{"version":3,"file":"broadcastService-DGqqg97J-ssfrjid5.js","sources":["../../assets/broadcastService-DGqqg97J.js"],"sourcesContent":["import{J as m,q as M,av as h,h as A,i as y,z as b,p as q,s as E}from\"./index-tnWDkOuX.js\";/**\r\n * @license lucide-react v0.462.0 - ISC\r\n *\r\n * This source code is licensed under the ISC license.\r\n * See the LICENSE file in the root directory of this source tree.\r\n */const B=m(\"ExternalLink\",[[\"path\",{d:\"M15 3h6v6\",key:\"1q9fwt\"}],[\"path\",{d:\"M10 14 21 3\",key:\"gplh6r\"}],[\"path\",{d:\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\",key:\"a6xqqp\"}]]);async function w({title:i,message:r,audienceKey:s,createdBy:d,linkUrl:o}){const l={title:i,message:r,audienceKey:s,active:!0,createdAt:E(),createdBy:d||null,linkUrl:o||void 0};return(await q(A(y,\"broadcasts\"),l)).id}function L(i,r){const s=new Map,d=i.map(o=>{const l=M(A(y,\"broadcasts\"),h(\"audienceKey\",\"==\",o));return b(l,c=>{c.docChanges().forEach(t=>{const a=t.doc.data(),e=t.doc.id,n={...a,id:e};t.type===\"removed\"?s.delete(e):s.set(e,n)});const v=Array.from(s.values()).filter(t=>t.active===!0);if(v.length===0){r(null);return}const p=v.sort((t,a)=>{var u,f;const e=typeof((u=t.createdAt)==null?void 0:u.toMillis)==\"function\"?t.createdAt.toMillis():0,n=typeof((f=a.createdAt)==null?void 0:f.toMillis)==\"function\"?a.createdAt.toMillis():0;return e-n});r(p[p.length-1])},c=>{console.error(\"subscribeToActiveBroadcasts error:\",c),r(null)})});return()=>d.forEach(o=>o())}function T(i,r){const s=new Map,d=i.map(o=>{const l=M(A(y,\"broadcasts\"),h(\"audienceKey\",\"==\",o));return b(l,c=>{c.docChanges().forEach(t=>{const a=t.doc.data(),e=t.doc.id,n={...a,id:e};t.type===\"removed\"?s.delete(e):s.set(e,n)});const p=Array.from(s.values()).filter(t=>t.active===!0).sort((t,a)=>{var u,f;const e=typeof((u=t.createdAt)==null?void 0:u.toMillis)==\"function\"?t.createdAt.toMillis():0;return(typeof((f=a.createdAt)==null?void 0:f.toMillis)==\"function\"?a.createdAt.toMillis():0)-e});r(p)},c=>{console.error(\"subscribeToActiveBroadcastsList error:\",c),r([])})});return()=>d.forEach(o=>o())}export{B as E,T as a,w as p,L as s};\r\n//# sourceMappingURL=broadcastService-DGqqg97J.js.map\r\n"],"names":["m","w","i","r","s","o","l","E","q","A","y","L","M","h","b","t","a","e","n","v","p","u","f","T"],"mappings":"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"}