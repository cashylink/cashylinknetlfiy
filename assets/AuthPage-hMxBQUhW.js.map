{"version":3,"file":"AuthPage-hMxBQUhW.js","sources":["../../src/pages/AuthPage.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Link, Navigate, useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { useFirebaseAuth } from \"@/contexts/FirebaseAuthContext\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Smartphone, Monitor, Download } from \"lucide-react\";\r\nimport { db } from \"@/firebase\";\r\nimport { collection, addDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { getAppDownloads, getCachedOrEnvAppDownloads, resolveDownloadUrl, type AppDownloads } from '@/utils/appDownloadService';\r\n\r\nconst isValidEgyptPhone = (phone: string) => {\r\n  const digits = phone.replace(/\\D/g, '');\r\n  return /^01(0|1|2|5)\\d{8}$/.test(digits);\r\n};\r\n\r\nexport default function AuthPage() {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const mode = searchParams.get('mode') || 'signin';\r\n  const [isSignUp, setIsSignUp] = useState(mode === 'signup');\r\n  const [loading, setLoading] = useState(false);\r\n  const [appDownloads, setAppDownloads] = useState<AppDownloads>(getCachedOrEnvAppDownloads());\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    fullName: '',\r\n    phone: ''\r\n  });\r\n\r\n  const { signIn, signUp, user } = useFirebaseAuth();\r\n\r\n  // استرجاع آخر بريد مستخدم وتطبيقه على واجهة تسجيل الدخول\r\n  useEffect(() => {\r\n    try {\r\n      const last = typeof window !== 'undefined' ? window.localStorage.getItem('cashy:lastEmail') : null;\r\n      if (last) setFormData(prev => ({ ...prev, email: last, password: '' }));\r\n    } catch {}\r\n  }, []);\r\n  const { toast } = useToast();\r\n\r\n  if (user) return <Navigate to=\"/dashboard-redirect\" replace />;\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const data = await getAppDownloads();\r\n        setAppDownloads(data || {});\r\n      } catch (e) {\r\n        console.error('Failed to load app downloads', e);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    // حارس الضغط أثناء التنفيذ\r\n    if (loading) {\r\n      toast({ title: 'جارٍ التنفيذ', description: 'يرجى الانتظار حتى تكتمل العملية' });\r\n      return;\r\n    }\r\n    // فحص الاتصال قبل البدء\r\n    if (typeof navigator !== 'undefined' && navigator.onLine === false) {\r\n      toast({ title: 'لا يوجد اتصال', description: 'تحقق من اتصال الإنترنت ثم أعد المحاولة', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (isSignUp) {\r\n        // تطبيع البريد وكلمة المرور قبل الإنشاء\r\n        const normalizedEmail = (formData.email || '').trim().toLowerCase();\r\n        const normalizedPassword = (formData.password || '').trim();\r\n        // تحقق رقم مصري 11 رقم يبدأ بـ 010/011/012/015\r\n        if (!isValidEgyptPhone(formData.phone)) {\r\n          toast({ title: 'رقم غير صالح', description: 'يجب أن يكون رقم مصري 11 رقم ويبدأ بـ 010/011/012/015', variant: 'destructive' });\r\n          throw new Error('رقم الهاتف غير صالح');\r\n        }\r\n        const { error } = await signUp(normalizedEmail, normalizedPassword, formData.fullName, formData.phone);\r\n        if (error) throw error;\r\n        \r\n\r\n        \r\n        toast({ title: \"تم إنشاء الحساب بنجاح!\", description: \"تحقق من بريدك الإلكتروني لتفعيل الحساب\" });\r\n        \r\n        // التوجيه إلى صفحة إعداد حساب المستخدم مع تمرير الاسم\r\n        const userName = formData.fullName || 'التاجر الجديد';\r\n        navigate(`/user/account-setup?user_name=${encodeURIComponent(userName)}`);\r\n      } else {\r\n        const normalizedEmail = (formData.email || '').trim().toLowerCase();\r\n        const normalizedPassword = (formData.password || '').trim();\r\n        if (!/^\\S+@\\S+\\.\\S+$/.test(normalizedEmail)) {\r\n          throw new Error('صيغة البريد الإلكتروني غير صحيحة');\r\n        }\r\n        const { error } = await signIn(normalizedEmail, normalizedPassword);\r\n        if (error) {\r\n          const code = (error as any)?.code;\r\n          if (code === 'auth/invalid-email') {\r\n            throw new Error('صيغة البريد الإلكتروني غير صحيحة');\r\n          } else if (code === 'auth/user-not-found') {\r\n            throw new Error('لا يوجد حساب بهذا البريد الإلكتروني');\r\n          } else if (code === 'auth/wrong-password') {\r\n            throw new Error('كلمة المرور غير صحيحة');\r\n          } else if (code === 'auth/invalid-credential') {\r\n            throw new Error('البريد الإلكتروني أو كلمة المرور غير صحيحة');\r\n          } else if (code === 'auth/too-many-requests') {\r\n            throw new Error('تم تجاوز عدد المحاولات المسموح، حاول لاحقاً');\r\n          }\r\n          throw error;\r\n        }\r\n        toast({ title: \"مرحباً بك!\", description: \"تم تسجيل الدخول بنجاح، جاري إعداد حسابك...\" });\r\n      }\r\n    } catch (error: any) {\r\n      toast({ \r\n        title: \"خطأ\", \r\n        description: error?.message || \"حدث خطأ أثناء المعالجة\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"text-center\">\r\n          <div className=\"flex items-center justify-center gap-2 mb-4\">\r\n            <BrandLogo size={32} />\r\n            <span className=\"text-xl font-bold\">CashyLink</span>\r\n          </div>\r\n          <CardTitle>{isSignUp ? 'إنشاء حساب جديد' : 'تسجيل الدخول'}</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {isSignUp && (\r\n              <>\r\n                <Input\r\n                  placeholder=\"الاسم الكامل\"\r\n                  value={formData.fullName}\r\n                  onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}\r\n                  required\r\n                />\r\n                <Input\r\n                  placeholder=\"رقم مصري (11 رقم يبدأ بـ 010/011/012/015)\"\r\n                  value={formData.phone}\r\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n                  dir=\"ltr\"\r\n                  inputMode=\"numeric\"\r\n                  required\r\n                />\r\n              </>\r\n            )}\r\n            <Input\r\n              type=\"email\"\r\n              placeholder=\"البريد الإلكتروني\"\r\n              value={formData.email}\r\n              onChange={(e) => {\r\n                const v = e.target.value;\r\n                setFormData({ ...formData, email: v });\r\n                try { window.localStorage.setItem('cashy:lastEmail', v); } catch {}\r\n              }}\r\n              required\r\n            />\r\n            <Input\r\n              type=\"password\"\r\n              placeholder=\"كلمة المرور\"\r\n              value={formData.password}\r\n              onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n              autoComplete={isSignUp ? 'new-password' : 'off'}\r\n              required\r\n            />\r\n            <Button type=\"submit\" className=\"w-full btn-primary\" onClick={(e) => {\r\n              // فحص مسبق لعرض سبب المنع\r\n              if (loading) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                toast({ title: 'جارٍ التنفيذ', description: 'يرجى الانتظار حتى تكتمل العملية' });\r\n                return;\r\n              }\r\n              if (typeof navigator !== 'undefined' && navigator.onLine === false) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                toast({ title: 'لا يوجد اتصال', description: 'تحقق من اتصال الإنترنت ثم أعد المحاولة', variant: 'destructive' });\r\n              }\r\n            }}>\r\n              {loading ? 'جاري المعالجة...' : (isSignUp ? 'إنشاء الحساب' : 'تسجيل الدخول')}\r\n            </Button>\r\n            {/* زر تسجيل دخول كمدير تمت إزالته لعدم حفظ كلمة المرور تلقائياً ولأمان أعلى */}\r\n          </form>\r\n          \r\n          <div className=\"text-center mt-6\">\r\n            <span className=\"text-muted-foreground\">\r\n              {isSignUp ? 'لديك حساب؟' : 'ليس لديك حساب؟'}\r\n            </span>\r\n            <Button \r\n              variant=\"link\" \r\n              onClick={() => setIsSignUp(!isSignUp)}\r\n              className=\"text-primary\"\r\n            >\r\n              {isSignUp ? 'تسجيل الدخول' : 'إنشاء حساب'}\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"text-center mt-4\">\r\n            <Link to=\"/\">\r\n              <Button variant=\"ghost\" className=\"text-muted-foreground\">\r\n                العودة للصفحة الرئيسية\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n\r\n          {/* Download buttons visible to all */}\r\n          <div className=\"mt-6 flex flex-col sm:flex-row gap-3 justify-center items-center\">\r\n            <a\r\n              href={resolveDownloadUrl(appDownloads?.androidUrl) || '#'}\r\n              onClick={(e) => { if (!appDownloads?.androidUrl) e.preventDefault(); }}\r\n              className={`flex items-center gap-3 px-4 py-2 rounded-lg shadow-elegant transform hover:scale-105 transition-all duration-300 ${appDownloads?.androidUrl ? 'bg-green-600 text-white hover:bg-green-700' : 'bg-gray-300 text-gray-600 cursor-not-allowed'}`}\r\n              aria-disabled={!appDownloads?.androidUrl}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <Smartphone className=\"h-5 w-5\" />\r\n              تحميل للأندرويد\r\n              <Download className=\"h-4 w-4\" />\r\n            </a>\r\n            <a\r\n              href={resolveDownloadUrl(appDownloads?.pcUrl) || '#'}\r\n              onClick={(e) => { if (!appDownloads?.pcUrl) e.preventDefault(); }}\r\n              className={`flex items-center gap-3 px-4 py-2 rounded-lg shadow-elegant transform hover:scale-105 transition-all duration-300 ${appDownloads?.pcUrl ? 'bg-indigo-600 text-white hover:bg-indigo-700' : 'bg-gray-300 text-gray-600 cursor-not-allowed'}`}\r\n              aria-disabled={!appDownloads?.pcUrl}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <Monitor className=\"h-5 w-5\" />\r\n              تحميل تطبيق الكمبيوتر نسخة 64 بت\r\n              <Download className=\"h-4 w-4\" />\r\n            </a>\r\n            <a\r\n              href={resolveDownloadUrl(appDownloads?.pc32Url) || '#'}\r\n              onClick={(e) => { if (!appDownloads?.pc32Url) e.preventDefault(); }}\r\n              className={`flex items-center gap-3 px-4 py-2 rounded-lg shadow-elegant transform hover:scale-105 transition-all duration-300 ${appDownloads?.pc32Url ? 'bg-blue-600 text-white hover:bg-blue-700' : 'bg-gray-300 text-gray-600 cursor-not-allowed'}`}\r\n              aria-disabled={!appDownloads?.pc32Url}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <Monitor className=\"h-5 w-5\" />\r\n              تحميل تطبيق الكمبيوتر نسخة 32 بت\r\n              <Download className=\"h-4 w-4\" />\r\n            </a>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":["isValidEgyptPhone","phone","digits","AuthPage","searchParams","useSearchParams","navigate","useNavigate","mode","isSignUp","setIsSignUp","useState","loading","setLoading","appDownloads","setAppDownloads","getCachedOrEnvAppDownloads","formData","setFormData","signIn","signUp","user","useFirebaseAuth","useEffect","last","prev","toast","useToast","jsx","Navigate","data","getAppDownloads","e","handleSubmit","normalizedEmail","normalizedPassword","error","userName","code","jsxs","Card","CardHeader","CardTitle","CardContent","Fragment","Input","v","Button","Link","resolveDownloadUrl","Smartphone","Download","Monitor"],"mappings":"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"}