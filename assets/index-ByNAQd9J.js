const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-ZGe4V60k.js","./card-DkkzKPOG.js","./BrandLogo-DOUKakNu.js","./brandingService-BsDZBAj_.js","./whatsappService-CIhmFO3s.js","./arrow-left-D5FFUW_k.js","./star-yb_71G06.js","./crown-DVcdJK5_.js","./download-DLpDPmdB.js","./zap-CrRIEBM5.js","./circle-check-big-BHSvXML9.js","./SubscriptionsPage-BRztpxaW.js","./contentService-DKe2K4If.js","./AuthPage-CJebENlv.js","./TopUpPage-BNKQ0vCC.js","./select-C6YIhHRk.js","./AdminTopupsPage-CHPTgpLZ.js","./AdminNotificationsPage-Bzdw9Iax.js","./label-DLYo0glq.js","./textarea-D1anXLJb.js","./link-DuA-rQjj.js","./UserRegisterPage-DHnCee7x.js","./alert-CBXJMVrX.js","./wallet-DZBIXzTG.js","./user-plus-DAoSrWcj.js","./phone-DTD1SJt6.js","./store-Bv7_Vi1f.js","./UserAccountSetupPage-C4PUC6cr.js","./DashboardLoginPage-CHw-yFod.js","./ProtectedDashboard-CaGTqTJW.js","./MasterPinDialog-DheRYSMD.js","./circle-alert-CVi0QR3C.js","./profitService-D3k_nU3Q.js","./dollar-sign-D9SysBEX.js","./ProtectedUserDashboard-kC9zwMv2.js","./broadcastService-DV-tfjBt.js","./MerchantDashboard-UGEnuPJF.js","./dropdown-menu-CWE56XgY.js","./index-C0GkdC8j.js","./badge-cSTreLRq.js","./WalletsManagement-BCD52CVo.js","./progress-SHas5-4o.js","./square-pen-BDLxom85.js","./PendingApprovalPage-D4kAX12-.js","./freeTrialService-BXaubVVo.js","./ProtectedAdminDashboard-CBXDtRV0.js","./ProfileIcon-BdpNBzcL.js","./switch-B2amUM-T.js","./separator-ahiWkz_Z.js","./save-BtC1Nqm5.js","./users-MxWNm7DK.js","./circle-x-Bnf2mdA0.js","./AuthTestPage-BfWPJ3sK.js","./ProfileSettingsPage-BRcg6bKD.js","./walletSelectionPinService-DRb7-UVn.js","./TransactionsPage-McbKX-66.js","./MaintenanceDialog-BFDJfaTZ.js","./WalletAdditionPage-CZIDEnFd.js","./ReferralsPage-BDvfe4K2.js","./CPanelPage-Dl_EMMOX.js","./CPanelLoginPage-BPljrT8Y.js","./UserDashboardPage-ByyrI8CM.js"])))=>i.map(i=>d[i]);
var H2=Object.defineProperty;var TT=t=>{throw TypeError(t)};var K2=(t,e,n)=>e in t?H2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Bg=(t,e,n)=>K2(t,typeof e!="symbol"?e+"":e,n),zg=(t,e,n)=>e.has(t)||TT("Cannot "+n);var H=(t,e,n)=>(zg(t,e,"read from private field"),n?n.call(t):e.get(t)),ht=(t,e,n)=>e.has(t)?TT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),We=(t,e,n,r)=>(zg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Wn=(t,e,n)=>(zg(t,e,"access private method"),n);var Fh=(t,e,n,r)=>({set _(s){We(t,e,s,n)},get _(){return H(t,e,r)}});function G2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $x={exports:{}},Sp={},Bx={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=Symbol.for("react.element"),Q2=Symbol.for("react.portal"),Y2=Symbol.for("react.fragment"),J2=Symbol.for("react.strict_mode"),X2=Symbol.for("react.profiler"),Z2=Symbol.for("react.provider"),eL=Symbol.for("react.context"),tL=Symbol.for("react.forward_ref"),nL=Symbol.for("react.suspense"),rL=Symbol.for("react.memo"),sL=Symbol.for("react.lazy"),IT=Symbol.iterator;function iL(t){return t===null||typeof t!="object"?null:(t=IT&&t[IT]||t["@@iterator"],typeof t=="function"?t:null)}var zx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wx=Object.assign,qx={};function Uc(t,e,n){this.props=t,this.context=e,this.refs=qx,this.updater=n||zx}Uc.prototype.isReactComponent={};Uc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hx(){}Hx.prototype=Uc.prototype;function c_(t,e,n){this.props=t,this.context=e,this.refs=qx,this.updater=n||zx}var u_=c_.prototype=new Hx;u_.constructor=c_;Wx(u_,Uc.prototype);u_.isPureReactComponent=!0;var ST=Array.isArray,Kx=Object.prototype.hasOwnProperty,d_={current:null},Gx={key:!0,ref:!0,__self:!0,__source:!0};function Qx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Kx.call(e,r)&&!Gx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:sh,type:t,key:i,ref:o,props:s,_owner:d_.current}}function oL(t,e){return{$$typeof:sh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function h_(t){return typeof t=="object"&&t!==null&&t.$$typeof===sh}function aL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bT=/\/+/g;function Wg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aL(""+t.key):e.toString(36)}function xf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sh:case Q2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wg(o,0):r,ST(s)?(n="",t!=null&&(n=t.replace(bT,"$&/")+"/"),xf(s,e,n,"",function(c){return c})):s!=null&&(h_(s)&&(s=oL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(bT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ST(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Wg(i,a);o+=xf(i,e,n,l,s)}else if(l=iL(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Wg(i,a++),o+=xf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uh(t,e,n){if(t==null)return t;var r=[],s=0;return xf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function lL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},Rf={transition:null},cL={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Rf,ReactCurrentOwner:d_};function Yx(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:Uh,forEach:function(t,e,n){Uh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uh(t,function(){e++}),e},toArray:function(t){return Uh(t,function(e){return e})||[]},only:function(t){if(!h_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=Uc;it.Fragment=Y2;it.Profiler=X2;it.PureComponent=c_;it.StrictMode=J2;it.Suspense=nL;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cL;it.act=Yx;it.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Wx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=d_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Kx.call(e,l)&&!Gx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sh,type:t.type,key:s,ref:i,props:r,_owner:o}};it.createContext=function(t){return t={$$typeof:eL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Z2,_context:t},t.Consumer=t};it.createElement=Qx;it.createFactory=function(t){var e=Qx.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:tL,render:t}};it.isValidElement=h_;it.lazy=function(t){return{$$typeof:sL,_payload:{_status:-1,_result:t},_init:lL}};it.memo=function(t,e){return{$$typeof:rL,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=Rf.transition;Rf.transition={};try{t()}finally{Rf.transition=e}};it.unstable_act=Yx;it.useCallback=function(t,e){return hr.current.useCallback(t,e)};it.useContext=function(t){return hr.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};it.useEffect=function(t,e){return hr.current.useEffect(t,e)};it.useId=function(){return hr.current.useId()};it.useImperativeHandle=function(t,e,n){return hr.current.useImperativeHandle(t,e,n)};it.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return hr.current.useMemo(t,e)};it.useReducer=function(t,e,n){return hr.current.useReducer(t,e,n)};it.useRef=function(t){return hr.current.useRef(t)};it.useState=function(t){return hr.current.useState(t)};it.useSyncExternalStore=function(t,e,n){return hr.current.useSyncExternalStore(t,e,n)};it.useTransition=function(){return hr.current.useTransition()};it.version="18.3.1";Bx.exports=it;var S=Bx.exports;const U=jx(S),f_=G2({__proto__:null,default:U},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uL=S,dL=Symbol.for("react.element"),hL=Symbol.for("react.fragment"),fL=Object.prototype.hasOwnProperty,mL=uL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pL={key:!0,ref:!0,__self:!0,__source:!0};function Jx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fL.call(e,r)&&!pL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:dL,type:t,key:i,ref:o,props:s,_owner:mL.current}}Sp.Fragment=hL;Sp.jsx=Jx;Sp.jsxs=Jx;$x.exports=Sp;var T=$x.exports,Xx={exports:{}},Hr={},Zx={exports:{}},eR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,V){var te=j.length;j.push(V);e:for(;0<te;){var ae=te-1>>>1,Y=j[ae];if(0<s(Y,V))j[ae]=V,j[te]=Y,te=ae;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var V=j[0],te=j.pop();if(te!==V){j[0]=te;e:for(var ae=0,Y=j.length,ke=Y>>>1;ae<ke;){var Se=2*(ae+1)-1,De=j[Se],Ye=Se+1,Ae=j[Ye];if(0>s(De,te))Ye<Y&&0>s(Ae,De)?(j[ae]=Ae,j[Ye]=te,ae=Ye):(j[ae]=De,j[Se]=te,ae=Se);else if(Ye<Y&&0>s(Ae,te))j[ae]=Ae,j[Ye]=te,ae=Ye;else break e}}return V}function s(j,V){var te=j.sortIndex-V.sortIndex;return te!==0?te:j.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,w=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=j)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function x(j){if(g=!1,_(j),!w)if(n(l)!==null)w=!0,oe(k);else{var V=n(c);V!==null&&fe(x,V.startTime-j)}}function k(j,V){w=!1,g&&(g=!1,E(A),A=-1),m=!0;var te=f;try{for(_(V),h=n(l);h!==null&&(!(h.expirationTime>V)||j&&!D());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,f=h.priorityLevel;var Y=ae(h.expirationTime<=V);V=t.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(l)&&r(l),_(V)}else r(l);h=n(l)}if(h!==null)var ke=!0;else{var Se=n(c);Se!==null&&fe(x,Se.startTime-V),ke=!1}return ke}finally{h=null,f=te,m=!1}}var L=!1,R=null,A=-1,b=5,P=-1;function D(){return!(t.unstable_now()-P<b)}function O(){if(R!==null){var j=t.unstable_now();P=j;var V=!0;try{V=R(!0,j)}finally{V?C():(L=!1,R=null)}}else L=!1}var C;if(typeof v=="function")C=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ie=$.port2;$.port1.onmessage=O,C=function(){ie.postMessage(null)}}else C=function(){y(O,0)};function oe(j){R=j,L||(L=!0,C())}function fe(j,V){A=y(function(){j(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,oe(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var te=f;f=V;try{return j()}finally{f=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,V){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var te=f;f=j;try{return V()}finally{f=te}},t.unstable_scheduleCallback=function(j,V,te){var ae=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ae+te:ae):te=ae,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=te+Y,j={id:d++,callback:V,priorityLevel:j,startTime:te,expirationTime:Y,sortIndex:-1},te>ae?(j.sortIndex=te,e(c,j),n(l)===null&&j===n(c)&&(g?(E(A),A=-1):g=!0,fe(x,te-ae))):(j.sortIndex=Y,e(l,j),w||m||(w=!0,oe(k))),j},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(j){var V=f;return function(){var te=f;f=V;try{return j.apply(this,arguments)}finally{f=te}}}})(eR);Zx.exports=eR;var gL=Zx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yL=S,Wr=gL;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tR=new Set,fd={};function ol(t,e){cc(t,e),cc(t+"Capture",e)}function cc(t,e){for(fd[t]=e,t=0;t<e.length;t++)tR.add(e[t])}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lv=Object.prototype.hasOwnProperty,vL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AT={},xT={};function wL(t){return lv.call(xT,t)?!0:lv.call(AT,t)?!1:vL.test(t)?xT[t]=!0:(AT[t]=!0,!1)}function _L(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EL(t,e,n,r){if(e===null||typeof e>"u"||_L(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jn[t]=new fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jn[e]=new fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jn[t]=new fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jn[t]=new fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jn[t]=new fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jn[t]=new fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jn[t]=new fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jn[t]=new fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jn[t]=new fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var m_=/[\-:]([a-z])/g;function p_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(m_,p_);jn[e]=new fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(m_,p_);jn[e]=new fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(m_,p_);jn[e]=new fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jn[t]=new fr(t,1,!1,t.toLowerCase(),null,!1,!1)});jn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jn[t]=new fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function g_(t,e,n,r){var s=jn.hasOwnProperty(e)?jn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EL(e,n,s,r)&&(n=null),r||s===null?wL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Di=yL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jh=Symbol.for("react.element"),kl=Symbol.for("react.portal"),Dl=Symbol.for("react.fragment"),y_=Symbol.for("react.strict_mode"),cv=Symbol.for("react.profiler"),nR=Symbol.for("react.provider"),rR=Symbol.for("react.context"),v_=Symbol.for("react.forward_ref"),uv=Symbol.for("react.suspense"),dv=Symbol.for("react.suspense_list"),w_=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),sR=Symbol.for("react.offscreen"),RT=Symbol.iterator;function pu(t){return t===null||typeof t!="object"?null:(t=RT&&t[RT]||t["@@iterator"],typeof t=="function"?t:null)}var en=Object.assign,qg;function Du(t){if(qg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qg=e&&e[1]||""}return`
`+qg+t}var Hg=!1;function Kg(t,e){if(!t||Hg)return"";Hg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Du(t):""}function TL(t){switch(t.tag){case 5:return Du(t.type);case 16:return Du("Lazy");case 13:return Du("Suspense");case 19:return Du("SuspenseList");case 0:case 2:case 15:return t=Kg(t.type,!1),t;case 11:return t=Kg(t.type.render,!1),t;case 1:return t=Kg(t.type,!0),t;default:return""}}function hv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dl:return"Fragment";case kl:return"Portal";case cv:return"Profiler";case y_:return"StrictMode";case uv:return"Suspense";case dv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rR:return(t.displayName||"Context")+".Consumer";case nR:return(t._context.displayName||"Context")+".Provider";case v_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w_:return e=t.displayName||null,e!==null?e:hv(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return hv(t(e))}catch{}}return null}function IL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hv(e);case 8:return e===y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function No(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SL(t){var e=iR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $h(t){t._valueTracker||(t._valueTracker=SL(t))}function oR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fv(t,e){var n=e.checked;return en({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function PT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=No(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aR(t,e){e=e.checked,e!=null&&g_(t,"checked",e,!1)}function mv(t,e){aR(t,e);var n=No(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pv(t,e.type,n):e.hasOwnProperty("defaultValue")&&pv(t,e.type,No(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function CT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pv(t,e,n){(e!=="number"||lm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nu=Array.isArray;function zl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+No(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return en({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(Nu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:No(n)}}function lR(t,e){var n=No(e.value),r=No(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function DT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bh,uR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bh=Bh||document.createElement("div"),Bh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function md(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bL=["Webkit","ms","Moz","O"];Object.keys(Wu).forEach(function(t){bL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wu[e]=Wu[t]})});function dR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wu.hasOwnProperty(t)&&Wu[t]?(""+e).trim():e+"px"}function hR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var AL=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vv(t,e){if(e){if(AL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function wv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _v=null;function __(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ev=null,Wl=null,ql=null;function NT(t){if(t=ah(t)){if(typeof Ev!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Pp(e),Ev(t.stateNode,t.type,e))}}function fR(t){Wl?ql?ql.push(t):ql=[t]:Wl=t}function mR(){if(Wl){var t=Wl,e=ql;if(ql=Wl=null,NT(t),e)for(t=0;t<e.length;t++)NT(e[t])}}function pR(t,e){return t(e)}function gR(){}var Gg=!1;function yR(t,e,n){if(Gg)return t(e,n);Gg=!0;try{return pR(t,e,n)}finally{Gg=!1,(Wl!==null||ql!==null)&&(gR(),mR())}}function pd(t,e){var n=t.stateNode;if(n===null)return null;var r=Pp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var Tv=!1;if(Ei)try{var gu={};Object.defineProperty(gu,"passive",{get:function(){Tv=!0}}),window.addEventListener("test",gu,gu),window.removeEventListener("test",gu,gu)}catch{Tv=!1}function xL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var qu=!1,cm=null,um=!1,Iv=null,RL={onError:function(t){qu=!0,cm=t}};function PL(t,e,n,r,s,i,o,a,l){qu=!1,cm=null,xL.apply(RL,arguments)}function CL(t,e,n,r,s,i,o,a,l){if(PL.apply(this,arguments),qu){if(qu){var c=cm;qu=!1,cm=null}else throw Error(ne(198));um||(um=!0,Iv=c)}}function al(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function OT(t){if(al(t)!==t)throw Error(ne(188))}function kL(t){var e=t.alternate;if(!e){if(e=al(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return OT(s),t;if(i===r)return OT(s),e;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function wR(t){return t=kL(t),t!==null?_R(t):null}function _R(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_R(t);if(e!==null)return e;t=t.sibling}return null}var ER=Wr.unstable_scheduleCallback,LT=Wr.unstable_cancelCallback,DL=Wr.unstable_shouldYield,NL=Wr.unstable_requestPaint,fn=Wr.unstable_now,OL=Wr.unstable_getCurrentPriorityLevel,E_=Wr.unstable_ImmediatePriority,TR=Wr.unstable_UserBlockingPriority,dm=Wr.unstable_NormalPriority,LL=Wr.unstable_LowPriority,IR=Wr.unstable_IdlePriority,bp=null,Ks=null;function VL(t){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(bp,t,void 0,(t.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:UL,ML=Math.log,FL=Math.LN2;function UL(t){return t>>>=0,t===0?32:31-(ML(t)/FL|0)|0}var zh=64,Wh=4194304;function Ou(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ou(a):(i&=o,i!==0&&(r=Ou(i)))}else o=n&~s,o!==0?r=Ou(o):i!==0&&(r=Ou(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ws(e),s=1<<n,r|=t[n],e&=~s;return r}function jL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $L(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ws(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=jL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Sv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SR(){var t=zh;return zh<<=1,!(zh&4194240)&&(zh=64),t}function Qg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ih(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ws(e),t[e]=n}function BL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ws(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function T_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ws(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var bt=0;function bR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AR,I_,xR,RR,PR,bv=!1,qh=[],yo=null,vo=null,wo=null,gd=new Map,yd=new Map,eo=[],zL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VT(t,e){switch(t){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(e.pointerId)}}function yu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ah(e),e!==null&&I_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WL(t,e,n,r,s){switch(e){case"focusin":return yo=yu(yo,t,e,n,r,s),!0;case"dragenter":return vo=yu(vo,t,e,n,r,s),!0;case"mouseover":return wo=yu(wo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return gd.set(i,yu(gd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,yd.set(i,yu(yd.get(i)||null,t,e,n,r,s)),!0}return!1}function CR(t){var e=wa(t.target);if(e!==null){var n=al(e);if(n!==null){if(e=n.tag,e===13){if(e=vR(n),e!==null){t.blockedOn=e,PR(t.priority,function(){xR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Av(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_v=r,n.target.dispatchEvent(r),_v=null}else return e=ah(n),e!==null&&I_(e),t.blockedOn=n,!1;e.shift()}return!0}function MT(t,e,n){Pf(t)&&n.delete(e)}function qL(){bv=!1,yo!==null&&Pf(yo)&&(yo=null),vo!==null&&Pf(vo)&&(vo=null),wo!==null&&Pf(wo)&&(wo=null),gd.forEach(MT),yd.forEach(MT)}function vu(t,e){t.blockedOn===e&&(t.blockedOn=null,bv||(bv=!0,Wr.unstable_scheduleCallback(Wr.unstable_NormalPriority,qL)))}function vd(t){function e(s){return vu(s,t)}if(0<qh.length){vu(qh[0],t);for(var n=1;n<qh.length;n++){var r=qh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yo!==null&&vu(yo,t),vo!==null&&vu(vo,t),wo!==null&&vu(wo,t),gd.forEach(e),yd.forEach(e),n=0;n<eo.length;n++)r=eo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<eo.length&&(n=eo[0],n.blockedOn===null);)CR(n),n.blockedOn===null&&eo.shift()}var Hl=Di.ReactCurrentBatchConfig,fm=!0;function HL(t,e,n,r){var s=bt,i=Hl.transition;Hl.transition=null;try{bt=1,S_(t,e,n,r)}finally{bt=s,Hl.transition=i}}function KL(t,e,n,r){var s=bt,i=Hl.transition;Hl.transition=null;try{bt=4,S_(t,e,n,r)}finally{bt=s,Hl.transition=i}}function S_(t,e,n,r){if(fm){var s=Av(t,e,n,r);if(s===null)iy(t,e,r,mm,n),VT(t,r);else if(WL(s,t,e,n,r))r.stopPropagation();else if(VT(t,r),e&4&&-1<zL.indexOf(t)){for(;s!==null;){var i=ah(s);if(i!==null&&AR(i),i=Av(t,e,n,r),i===null&&iy(t,e,r,mm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else iy(t,e,r,null,n)}}var mm=null;function Av(t,e,n,r){if(mm=null,t=__(r),t=wa(t),t!==null)if(e=al(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mm=t,null}function kR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OL()){case E_:return 1;case TR:return 4;case dm:case LL:return 16;case IR:return 536870912;default:return 16}default:return 16}}var uo=null,b_=null,Cf=null;function DR(){if(Cf)return Cf;var t,e=b_,n=e.length,r,s="value"in uo?uo.value:uo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Cf=s.slice(t,1<r?1-r:void 0)}function kf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hh(){return!0}function FT(){return!1}function Kr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hh:FT,this.isPropagationStopped=FT,this}return en(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hh)},persist:function(){},isPersistent:Hh}),e}var jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A_=Kr(jc),oh=en({},jc,{view:0,detail:0}),GL=Kr(oh),Yg,Jg,wu,Ap=en({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wu&&(wu&&t.type==="mousemove"?(Yg=t.screenX-wu.screenX,Jg=t.screenY-wu.screenY):Jg=Yg=0,wu=t),Yg)},movementY:function(t){return"movementY"in t?t.movementY:Jg}}),UT=Kr(Ap),QL=en({},Ap,{dataTransfer:0}),YL=Kr(QL),JL=en({},oh,{relatedTarget:0}),Xg=Kr(JL),XL=en({},jc,{animationName:0,elapsedTime:0,pseudoElement:0}),ZL=Kr(XL),eV=en({},jc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tV=Kr(eV),nV=en({},jc,{data:0}),jT=Kr(nV),rV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iV[t])?!!e[t]:!1}function x_(){return oV}var aV=en({},oh,{key:function(t){if(t.key){var e=rV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x_,charCode:function(t){return t.type==="keypress"?kf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lV=Kr(aV),cV=en({},Ap,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$T=Kr(cV),uV=en({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x_}),dV=Kr(uV),hV=en({},jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),fV=Kr(hV),mV=en({},Ap,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pV=Kr(mV),gV=[9,13,27,32],R_=Ei&&"CompositionEvent"in window,Hu=null;Ei&&"documentMode"in document&&(Hu=document.documentMode);var yV=Ei&&"TextEvent"in window&&!Hu,NR=Ei&&(!R_||Hu&&8<Hu&&11>=Hu),BT=" ",zT=!1;function OR(t,e){switch(t){case"keyup":return gV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nl=!1;function vV(t,e){switch(t){case"compositionend":return LR(e);case"keypress":return e.which!==32?null:(zT=!0,BT);case"textInput":return t=e.data,t===BT&&zT?null:t;default:return null}}function wV(t,e){if(Nl)return t==="compositionend"||!R_&&OR(t,e)?(t=DR(),Cf=b_=uo=null,Nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NR&&e.locale!=="ko"?null:e.data;default:return null}}var _V={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_V[t.type]:e==="textarea"}function VR(t,e,n,r){fR(r),e=pm(e,"onChange"),0<e.length&&(n=new A_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ku=null,wd=null;function EV(t){KR(t,0)}function xp(t){var e=Vl(t);if(oR(e))return t}function TV(t,e){if(t==="change")return e}var MR=!1;if(Ei){var Zg;if(Ei){var ey="oninput"in document;if(!ey){var qT=document.createElement("div");qT.setAttribute("oninput","return;"),ey=typeof qT.oninput=="function"}Zg=ey}else Zg=!1;MR=Zg&&(!document.documentMode||9<document.documentMode)}function HT(){Ku&&(Ku.detachEvent("onpropertychange",FR),wd=Ku=null)}function FR(t){if(t.propertyName==="value"&&xp(wd)){var e=[];VR(e,wd,t,__(t)),yR(EV,e)}}function IV(t,e,n){t==="focusin"?(HT(),Ku=e,wd=n,Ku.attachEvent("onpropertychange",FR)):t==="focusout"&&HT()}function SV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xp(wd)}function bV(t,e){if(t==="click")return xp(e)}function AV(t,e){if(t==="input"||t==="change")return xp(e)}function xV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Is=typeof Object.is=="function"?Object.is:xV;function _d(t,e){if(Is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!lv.call(e,s)||!Is(t[s],e[s]))return!1}return!0}function KT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function GT(t,e){var n=KT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=KT(n)}}function UR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?UR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jR(){for(var t=window,e=lm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lm(t.document)}return e}function P_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RV(t){var e=jR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&UR(n.ownerDocument.documentElement,n)){if(r!==null&&P_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=GT(n,i);var o=GT(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PV=Ei&&"documentMode"in document&&11>=document.documentMode,Ol=null,xv=null,Gu=null,Rv=!1;function QT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rv||Ol==null||Ol!==lm(r)||(r=Ol,"selectionStart"in r&&P_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gu&&_d(Gu,r)||(Gu=r,r=pm(xv,"onSelect"),0<r.length&&(e=new A_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ol)))}function Kh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ll={animationend:Kh("Animation","AnimationEnd"),animationiteration:Kh("Animation","AnimationIteration"),animationstart:Kh("Animation","AnimationStart"),transitionend:Kh("Transition","TransitionEnd")},ty={},$R={};Ei&&($R=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function Rp(t){if(ty[t])return ty[t];if(!Ll[t])return t;var e=Ll[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $R)return ty[t]=e[n];return t}var BR=Rp("animationend"),zR=Rp("animationiteration"),WR=Rp("animationstart"),qR=Rp("transitionend"),HR=new Map,YT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(t,e){HR.set(t,e),ol(e,[t])}for(var ny=0;ny<YT.length;ny++){var ry=YT[ny],CV=ry.toLowerCase(),kV=ry[0].toUpperCase()+ry.slice(1);qo(CV,"on"+kV)}qo(BR,"onAnimationEnd");qo(zR,"onAnimationIteration");qo(WR,"onAnimationStart");qo("dblclick","onDoubleClick");qo("focusin","onFocus");qo("focusout","onBlur");qo(qR,"onTransitionEnd");cc("onMouseEnter",["mouseout","mouseover"]);cc("onMouseLeave",["mouseout","mouseover"]);cc("onPointerEnter",["pointerout","pointerover"]);cc("onPointerLeave",["pointerout","pointerover"]);ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lu));function JT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CL(r,e,void 0,t),t.currentTarget=null}function KR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;JT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;JT(s,a,c),i=l}}}if(um)throw t=Iv,um=!1,Iv=null,t}function jt(t,e){var n=e[Nv];n===void 0&&(n=e[Nv]=new Set);var r=t+"__bubble";n.has(r)||(GR(e,t,2,!1),n.add(r))}function sy(t,e,n){var r=0;e&&(r|=4),GR(n,t,r,e)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function Ed(t){if(!t[Gh]){t[Gh]=!0,tR.forEach(function(n){n!=="selectionchange"&&(DV.has(n)||sy(n,!1,t),sy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gh]||(e[Gh]=!0,sy("selectionchange",!1,e))}}function GR(t,e,n,r){switch(kR(e)){case 1:var s=HL;break;case 4:s=KL;break;default:s=S_}n=s.bind(null,e,n,t),s=void 0,!Tv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function iy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=wa(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}yR(function(){var c=i,d=__(n),h=[];e:{var f=HR.get(t);if(f!==void 0){var m=A_,w=t;switch(t){case"keypress":if(kf(n)===0)break e;case"keydown":case"keyup":m=lV;break;case"focusin":w="focus",m=Xg;break;case"focusout":w="blur",m=Xg;break;case"beforeblur":case"afterblur":m=Xg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=UT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=YL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=dV;break;case BR:case zR:case WR:m=ZL;break;case qR:m=fV;break;case"scroll":m=GL;break;case"wheel":m=pV;break;case"copy":case"cut":case"paste":m=tV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$T}var g=(e&4)!==0,y=!g&&t==="scroll",E=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,_;v!==null;){_=v;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,E!==null&&(x=pd(v,E),x!=null&&g.push(Td(v,x,_)))),y)break;v=v.return}0<g.length&&(f=new m(f,w,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==_v&&(w=n.relatedTarget||n.fromElement)&&(wa(w)||w[Ti]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=c,w=w?wa(w):null,w!==null&&(y=al(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=c),m!==w)){if(g=UT,x="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=$T,x="onPointerLeave",E="onPointerEnter",v="pointer"),y=m==null?f:Vl(m),_=w==null?f:Vl(w),f=new g(x,v+"leave",m,n,d),f.target=y,f.relatedTarget=_,x=null,wa(d)===c&&(g=new g(E,v+"enter",w,n,d),g.target=_,g.relatedTarget=y,x=g),y=x,m&&w)t:{for(g=m,E=w,v=0,_=g;_;_=pl(_))v++;for(_=0,x=E;x;x=pl(x))_++;for(;0<v-_;)g=pl(g),v--;for(;0<_-v;)E=pl(E),_--;for(;v--;){if(g===E||E!==null&&g===E.alternate)break t;g=pl(g),E=pl(E)}g=null}else g=null;m!==null&&XT(h,f,m,g,!1),w!==null&&y!==null&&XT(h,y,w,g,!0)}}e:{if(f=c?Vl(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=TV;else if(WT(f))if(MR)k=AV;else{k=SV;var L=IV}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=bV);if(k&&(k=k(t,c))){VR(h,k,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&pv(f,"number",f.value)}switch(L=c?Vl(c):window,t){case"focusin":(WT(L)||L.contentEditable==="true")&&(Ol=L,xv=c,Gu=null);break;case"focusout":Gu=xv=Ol=null;break;case"mousedown":Rv=!0;break;case"contextmenu":case"mouseup":case"dragend":Rv=!1,QT(h,n,d);break;case"selectionchange":if(PV)break;case"keydown":case"keyup":QT(h,n,d)}var R;if(R_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Nl?OR(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(NR&&n.locale!=="ko"&&(Nl||A!=="onCompositionStart"?A==="onCompositionEnd"&&Nl&&(R=DR()):(uo=d,b_="value"in uo?uo.value:uo.textContent,Nl=!0)),L=pm(c,A),0<L.length&&(A=new jT(A,t,null,n,d),h.push({event:A,listeners:L}),R?A.data=R:(R=LR(n),R!==null&&(A.data=R)))),(R=yV?vV(t,n):wV(t,n))&&(c=pm(c,"onBeforeInput"),0<c.length&&(d=new jT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=R))}KR(h,e)})}function Td(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pd(t,n),i!=null&&r.unshift(Td(t,i,s)),i=pd(t,e),i!=null&&r.push(Td(t,i,s))),t=t.return}return r}function pl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function XT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=pd(n,i),l!=null&&o.unshift(Td(n,l,a))):s||(l=pd(n,i),l!=null&&o.push(Td(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var NV=/\r\n?/g,OV=/\u0000|\uFFFD/g;function ZT(t){return(typeof t=="string"?t:""+t).replace(NV,`
`).replace(OV,"")}function Qh(t,e,n){if(e=ZT(e),ZT(t)!==e&&n)throw Error(ne(425))}function gm(){}var Pv=null,Cv=null;function kv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dv=typeof setTimeout=="function"?setTimeout:void 0,LV=typeof clearTimeout=="function"?clearTimeout:void 0,eI=typeof Promise=="function"?Promise:void 0,VV=typeof queueMicrotask=="function"?queueMicrotask:typeof eI<"u"?function(t){return eI.resolve(null).then(t).catch(MV)}:Dv;function MV(t){setTimeout(function(){throw t})}function oy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vd(e)}function _o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $c=Math.random().toString(36).slice(2),$s="__reactFiber$"+$c,Id="__reactProps$"+$c,Ti="__reactContainer$"+$c,Nv="__reactEvents$"+$c,FV="__reactListeners$"+$c,UV="__reactHandles$"+$c;function wa(t){var e=t[$s];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[$s]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tI(t);t!==null;){if(n=t[$s])return n;t=tI(t)}return e}t=n,n=t.parentNode}return null}function ah(t){return t=t[$s]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Pp(t){return t[Id]||null}var Ov=[],Ml=-1;function Ho(t){return{current:t}}function $t(t){0>Ml||(t.current=Ov[Ml],Ov[Ml]=null,Ml--)}function Ot(t,e){Ml++,Ov[Ml]=t.current,t.current=e}var Oo={},tr=Ho(Oo),Ar=Ho(!1),Wa=Oo;function uc(t,e){var n=t.type.contextTypes;if(!n)return Oo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xr(t){return t=t.childContextTypes,t!=null}function ym(){$t(Ar),$t(tr)}function nI(t,e,n){if(tr.current!==Oo)throw Error(ne(168));Ot(tr,e),Ot(Ar,n)}function QR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,IL(t)||"Unknown",s));return en({},n,r)}function vm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oo,Wa=tr.current,Ot(tr,t),Ot(Ar,Ar.current),!0}function rI(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=QR(t,e,Wa),r.__reactInternalMemoizedMergedChildContext=t,$t(Ar),$t(tr),Ot(tr,t)):$t(Ar),Ot(Ar,n)}var ci=null,Cp=!1,ay=!1;function YR(t){ci===null?ci=[t]:ci.push(t)}function jV(t){Cp=!0,YR(t)}function Ko(){if(!ay&&ci!==null){ay=!0;var t=0,e=bt;try{var n=ci;for(bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ci=null,Cp=!1}catch(s){throw ci!==null&&(ci=ci.slice(t+1)),ER(E_,Ko),s}finally{bt=e,ay=!1}}return null}var Fl=[],Ul=0,wm=null,_m=0,ts=[],ns=0,qa=null,hi=1,fi="";function oa(t,e){Fl[Ul++]=_m,Fl[Ul++]=wm,wm=t,_m=e}function JR(t,e,n){ts[ns++]=hi,ts[ns++]=fi,ts[ns++]=qa,qa=t;var r=hi;t=fi;var s=32-ws(r)-1;r&=~(1<<s),n+=1;var i=32-ws(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,hi=1<<32-ws(e)+s|n<<s|r,fi=i+t}else hi=1<<i|n<<s|r,fi=t}function C_(t){t.return!==null&&(oa(t,1),JR(t,1,0))}function k_(t){for(;t===wm;)wm=Fl[--Ul],Fl[Ul]=null,_m=Fl[--Ul],Fl[Ul]=null;for(;t===qa;)qa=ts[--ns],ts[ns]=null,fi=ts[--ns],ts[ns]=null,hi=ts[--ns],ts[ns]=null}var jr=null,Mr=null,Kt=!1,gs=null;function XR(t,e){var n=rs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jr=t,Mr=_o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jr=t,Mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qa!==null?{id:hi,overflow:fi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jr=t,Mr=null,!0):!1;default:return!1}}function Lv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vv(t){if(Kt){var e=Mr;if(e){var n=e;if(!sI(t,e)){if(Lv(t))throw Error(ne(418));e=_o(n.nextSibling);var r=jr;e&&sI(t,e)?XR(r,n):(t.flags=t.flags&-4097|2,Kt=!1,jr=t)}}else{if(Lv(t))throw Error(ne(418));t.flags=t.flags&-4097|2,Kt=!1,jr=t}}}function iI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jr=t}function Yh(t){if(t!==jr)return!1;if(!Kt)return iI(t),Kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kv(t.type,t.memoizedProps)),e&&(e=Mr)){if(Lv(t))throw ZR(),Error(ne(418));for(;e;)XR(t,e),e=_o(e.nextSibling)}if(iI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mr=_o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mr=null}}else Mr=jr?_o(t.stateNode.nextSibling):null;return!0}function ZR(){for(var t=Mr;t;)t=_o(t.nextSibling)}function dc(){Mr=jr=null,Kt=!1}function D_(t){gs===null?gs=[t]:gs.push(t)}var $V=Di.ReactCurrentBatchConfig;function _u(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Jh(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function oI(t){var e=t._init;return e(t._payload)}function e1(t){function e(E,v){if(t){var _=E.deletions;_===null?(E.deletions=[v],E.flags|=16):_.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=So(E,v),E.index=0,E.sibling=null,E}function i(E,v,_){return E.index=_,t?(_=E.alternate,_!==null?(_=_.index,_<v?(E.flags|=2,v):_):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,_,x){return v===null||v.tag!==6?(v=my(_,E.mode,x),v.return=E,v):(v=s(v,_),v.return=E,v)}function l(E,v,_,x){var k=_.type;return k===Dl?d(E,v,_.props.children,x,_.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xi&&oI(k)===v.type)?(x=s(v,_.props),x.ref=_u(E,v,_),x.return=E,x):(x=Ff(_.type,_.key,_.props,null,E.mode,x),x.ref=_u(E,v,_),x.return=E,x)}function c(E,v,_,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=py(_,E.mode,x),v.return=E,v):(v=s(v,_.children||[]),v.return=E,v)}function d(E,v,_,x,k){return v===null||v.tag!==7?(v=Ua(_,E.mode,x,k),v.return=E,v):(v=s(v,_),v.return=E,v)}function h(E,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=my(""+v,E.mode,_),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jh:return _=Ff(v.type,v.key,v.props,null,E.mode,_),_.ref=_u(E,null,v),_.return=E,_;case kl:return v=py(v,E.mode,_),v.return=E,v;case Xi:var x=v._init;return h(E,x(v._payload),_)}if(Nu(v)||pu(v))return v=Ua(v,E.mode,_,null),v.return=E,v;Jh(E,v)}return null}function f(E,v,_,x){var k=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:a(E,v,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case jh:return _.key===k?l(E,v,_,x):null;case kl:return _.key===k?c(E,v,_,x):null;case Xi:return k=_._init,f(E,v,k(_._payload),x)}if(Nu(_)||pu(_))return k!==null?null:d(E,v,_,x,null);Jh(E,_)}return null}function m(E,v,_,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return E=E.get(_)||null,a(v,E,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jh:return E=E.get(x.key===null?_:x.key)||null,l(v,E,x,k);case kl:return E=E.get(x.key===null?_:x.key)||null,c(v,E,x,k);case Xi:var L=x._init;return m(E,v,_,L(x._payload),k)}if(Nu(x)||pu(x))return E=E.get(_)||null,d(v,E,x,k,null);Jh(v,x)}return null}function w(E,v,_,x){for(var k=null,L=null,R=v,A=v=0,b=null;R!==null&&A<_.length;A++){R.index>A?(b=R,R=null):b=R.sibling;var P=f(E,R,_[A],x);if(P===null){R===null&&(R=b);break}t&&R&&P.alternate===null&&e(E,R),v=i(P,v,A),L===null?k=P:L.sibling=P,L=P,R=b}if(A===_.length)return n(E,R),Kt&&oa(E,A),k;if(R===null){for(;A<_.length;A++)R=h(E,_[A],x),R!==null&&(v=i(R,v,A),L===null?k=R:L.sibling=R,L=R);return Kt&&oa(E,A),k}for(R=r(E,R);A<_.length;A++)b=m(R,E,A,_[A],x),b!==null&&(t&&b.alternate!==null&&R.delete(b.key===null?A:b.key),v=i(b,v,A),L===null?k=b:L.sibling=b,L=b);return t&&R.forEach(function(D){return e(E,D)}),Kt&&oa(E,A),k}function g(E,v,_,x){var k=pu(_);if(typeof k!="function")throw Error(ne(150));if(_=k.call(_),_==null)throw Error(ne(151));for(var L=k=null,R=v,A=v=0,b=null,P=_.next();R!==null&&!P.done;A++,P=_.next()){R.index>A?(b=R,R=null):b=R.sibling;var D=f(E,R,P.value,x);if(D===null){R===null&&(R=b);break}t&&R&&D.alternate===null&&e(E,R),v=i(D,v,A),L===null?k=D:L.sibling=D,L=D,R=b}if(P.done)return n(E,R),Kt&&oa(E,A),k;if(R===null){for(;!P.done;A++,P=_.next())P=h(E,P.value,x),P!==null&&(v=i(P,v,A),L===null?k=P:L.sibling=P,L=P);return Kt&&oa(E,A),k}for(R=r(E,R);!P.done;A++,P=_.next())P=m(R,E,A,P.value,x),P!==null&&(t&&P.alternate!==null&&R.delete(P.key===null?A:P.key),v=i(P,v,A),L===null?k=P:L.sibling=P,L=P);return t&&R.forEach(function(O){return e(E,O)}),Kt&&oa(E,A),k}function y(E,v,_,x){if(typeof _=="object"&&_!==null&&_.type===Dl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case jh:e:{for(var k=_.key,L=v;L!==null;){if(L.key===k){if(k=_.type,k===Dl){if(L.tag===7){n(E,L.sibling),v=s(L,_.props.children),v.return=E,E=v;break e}}else if(L.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xi&&oI(k)===L.type){n(E,L.sibling),v=s(L,_.props),v.ref=_u(E,L,_),v.return=E,E=v;break e}n(E,L);break}else e(E,L);L=L.sibling}_.type===Dl?(v=Ua(_.props.children,E.mode,x,_.key),v.return=E,E=v):(x=Ff(_.type,_.key,_.props,null,E.mode,x),x.ref=_u(E,v,_),x.return=E,E=x)}return o(E);case kl:e:{for(L=_.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(E,v.sibling),v=s(v,_.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=py(_,E.mode,x),v.return=E,E=v}return o(E);case Xi:return L=_._init,y(E,v,L(_._payload),x)}if(Nu(_))return w(E,v,_,x);if(pu(_))return g(E,v,_,x);Jh(E,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,_),v.return=E,E=v):(n(E,v),v=my(_,E.mode,x),v.return=E,E=v),o(E)):n(E,v)}return y}var hc=e1(!0),t1=e1(!1),Em=Ho(null),Tm=null,jl=null,N_=null;function O_(){N_=jl=Tm=null}function L_(t){var e=Em.current;$t(Em),t._currentValue=e}function Mv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Kl(t,e){Tm=t,N_=jl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tr=!0),t.firstContext=null)}function os(t){var e=t._currentValue;if(N_!==t)if(t={context:t,memoizedValue:e,next:null},jl===null){if(Tm===null)throw Error(ne(308));jl=t,Tm.dependencies={lanes:0,firstContext:t}}else jl=jl.next=t;return e}var _a=null;function V_(t){_a===null?_a=[t]:_a.push(t)}function n1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,V_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ii(t,r)}function Ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zi=!1;function M_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Eo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,gt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ii(t,n)}return s=r.interleaved,s===null?(e.next=e,V_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ii(t,n)}function Df(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,T_(t,n)}}function aI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Im(t,e,n,r){var s=t.updateQueue;Zi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,g=a;switch(f=e,m=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){h=w.call(m,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,f=typeof w=="function"?w.call(m,h,f):w,f==null)break e;h=en({},h,f);break e;case 2:Zi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ka|=o,t.lanes=o,t.memoizedState=h}}function lI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var lh={},Gs=Ho(lh),Sd=Ho(lh),bd=Ho(lh);function Ea(t){if(t===lh)throw Error(ne(174));return t}function F_(t,e){switch(Ot(bd,e),Ot(Sd,t),Ot(Gs,lh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yv(e,t)}$t(Gs),Ot(Gs,e)}function fc(){$t(Gs),$t(Sd),$t(bd)}function s1(t){Ea(bd.current);var e=Ea(Gs.current),n=yv(e,t.type);e!==n&&(Ot(Sd,t),Ot(Gs,n))}function U_(t){Sd.current===t&&($t(Gs),$t(Sd))}var Jt=Ho(0);function Sm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ly=[];function j_(){for(var t=0;t<ly.length;t++)ly[t]._workInProgressVersionPrimary=null;ly.length=0}var Nf=Di.ReactCurrentDispatcher,cy=Di.ReactCurrentBatchConfig,Ha=0,Zt=null,An=null,Nn=null,bm=!1,Qu=!1,Ad=0,BV=0;function qn(){throw Error(ne(321))}function $_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Is(t[n],e[n]))return!1;return!0}function B_(t,e,n,r,s,i){if(Ha=i,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nf.current=t===null||t.memoizedState===null?HV:KV,t=n(r,s),Qu){i=0;do{if(Qu=!1,Ad=0,25<=i)throw Error(ne(301));i+=1,Nn=An=null,e.updateQueue=null,Nf.current=GV,t=n(r,s)}while(Qu)}if(Nf.current=Am,e=An!==null&&An.next!==null,Ha=0,Nn=An=Zt=null,bm=!1,e)throw Error(ne(300));return t}function z_(){var t=Ad!==0;return Ad=0,t}function Ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Zt.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function as(){if(An===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var e=Nn===null?Zt.memoizedState:Nn.next;if(e!==null)Nn=e,An=t;else{if(t===null)throw Error(ne(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Nn===null?Zt.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function xd(t,e){return typeof e=="function"?e(t):e}function uy(t){var e=as(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=An,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ha&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Zt.lanes|=d,Ka|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Is(r,e.memoizedState)||(Tr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Zt.lanes|=i,Ka|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dy(t){var e=as(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Is(i,e.memoizedState)||(Tr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function i1(){}function o1(t,e){var n=Zt,r=as(),s=e(),i=!Is(r.memoizedState,s);if(i&&(r.memoizedState=s,Tr=!0),r=r.queue,W_(c1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Nn!==null&&Nn.memoizedState.tag&1){if(n.flags|=2048,Rd(9,l1.bind(null,n,r,s,e),void 0,null),Ln===null)throw Error(ne(349));Ha&30||a1(n,e,s)}return s}function a1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function l1(t,e,n,r){e.value=n,e.getSnapshot=r,u1(e)&&d1(t)}function c1(t,e,n){return n(function(){u1(e)&&d1(t)})}function u1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Is(t,n)}catch{return!0}}function d1(t){var e=Ii(t,1);e!==null&&_s(e,t,1,-1)}function cI(t){var e=Ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:t},e.queue=t,t=t.dispatch=qV.bind(null,Zt,t),[e.memoizedState,t]}function Rd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function h1(){return as().memoizedState}function Of(t,e,n,r){var s=Ls();Zt.flags|=t,s.memoizedState=Rd(1|e,n,void 0,r===void 0?null:r)}function kp(t,e,n,r){var s=as();r=r===void 0?null:r;var i=void 0;if(An!==null){var o=An.memoizedState;if(i=o.destroy,r!==null&&$_(r,o.deps)){s.memoizedState=Rd(e,n,i,r);return}}Zt.flags|=t,s.memoizedState=Rd(1|e,n,i,r)}function uI(t,e){return Of(8390656,8,t,e)}function W_(t,e){return kp(2048,8,t,e)}function f1(t,e){return kp(4,2,t,e)}function m1(t,e){return kp(4,4,t,e)}function p1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g1(t,e,n){return n=n!=null?n.concat([t]):null,kp(4,4,p1.bind(null,e,t),n)}function q_(){}function y1(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v1(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w1(t,e,n){return Ha&21?(Is(n,e)||(n=SR(),Zt.lanes|=n,Ka|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tr=!0),t.memoizedState=n)}function zV(t,e){var n=bt;bt=n!==0&&4>n?n:4,t(!0);var r=cy.transition;cy.transition={};try{t(!1),e()}finally{bt=n,cy.transition=r}}function _1(){return as().memoizedState}function WV(t,e,n){var r=Io(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},E1(t))T1(e,n);else if(n=n1(t,e,n,r),n!==null){var s=cr();_s(n,t,r,s),I1(n,e,r)}}function qV(t,e,n){var r=Io(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(E1(t))T1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Is(a,o)){var l=e.interleaved;l===null?(s.next=s,V_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=n1(t,e,s,r),n!==null&&(s=cr(),_s(n,t,r,s),I1(n,e,r))}}function E1(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function T1(t,e){Qu=bm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,T_(t,n)}}var Am={readContext:os,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},HV={readContext:os,useCallback:function(t,e){return Ls().memoizedState=[t,e===void 0?null:e],t},useContext:os,useEffect:uI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Of(4194308,4,p1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Of(4194308,4,t,e)},useInsertionEffect:function(t,e){return Of(4,2,t,e)},useMemo:function(t,e){var n=Ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ls();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WV.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=Ls();return t={current:t},e.memoizedState=t},useState:cI,useDebugValue:q_,useDeferredValue:function(t){return Ls().memoizedState=t},useTransition:function(){var t=cI(!1),e=t[0];return t=zV.bind(null,t[1]),Ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,s=Ls();if(Kt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),Ln===null)throw Error(ne(349));Ha&30||a1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,uI(c1.bind(null,r,i,t),[t]),r.flags|=2048,Rd(9,l1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ls(),e=Ln.identifierPrefix;if(Kt){var n=fi,r=hi;n=(r&~(1<<32-ws(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ad++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KV={readContext:os,useCallback:y1,useContext:os,useEffect:W_,useImperativeHandle:g1,useInsertionEffect:f1,useLayoutEffect:m1,useMemo:v1,useReducer:uy,useRef:h1,useState:function(){return uy(xd)},useDebugValue:q_,useDeferredValue:function(t){var e=as();return w1(e,An.memoizedState,t)},useTransition:function(){var t=uy(xd)[0],e=as().memoizedState;return[t,e]},useMutableSource:i1,useSyncExternalStore:o1,useId:_1,unstable_isNewReconciler:!1},GV={readContext:os,useCallback:y1,useContext:os,useEffect:W_,useImperativeHandle:g1,useInsertionEffect:f1,useLayoutEffect:m1,useMemo:v1,useReducer:dy,useRef:h1,useState:function(){return dy(xd)},useDebugValue:q_,useDeferredValue:function(t){var e=as();return An===null?e.memoizedState=t:w1(e,An.memoizedState,t)},useTransition:function(){var t=dy(xd)[0],e=as().memoizedState;return[t,e]},useMutableSource:i1,useSyncExternalStore:o1,useId:_1,unstable_isNewReconciler:!1};function ds(t,e){if(t&&t.defaultProps){e=en({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:en({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dp={isMounted:function(t){return(t=t._reactInternals)?al(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=cr(),s=Io(t),i=gi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Eo(t,i,s),e!==null&&(_s(e,t,s,r),Df(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=cr(),s=Io(t),i=gi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Eo(t,i,s),e!==null&&(_s(e,t,s,r),Df(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cr(),r=Io(t),s=gi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Eo(t,s,r),e!==null&&(_s(e,t,r,n),Df(e,t,r))}};function dI(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_d(n,r)||!_d(s,i):!0}function S1(t,e,n){var r=!1,s=Oo,i=e.contextType;return typeof i=="object"&&i!==null?i=os(i):(s=xr(e)?Wa:tr.current,r=e.contextTypes,i=(r=r!=null)?uc(t,s):Oo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dp.enqueueReplaceState(e,e.state,null)}function Uv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},M_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=os(i):(i=xr(e)?Wa:tr.current,s.context=uc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Fv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Dp.enqueueReplaceState(s,s.state,null),Im(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mc(t,e){try{var n="",r=e;do n+=TL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function hy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QV=typeof WeakMap=="function"?WeakMap:Map;function b1(t,e,n){n=gi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rm||(Rm=!0,Yv=r),jv(t,e)},n}function A1(t,e,n){n=gi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jv(t,e),typeof r!="function"&&(To===null?To=new Set([this]):To.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cM.bind(null,t,e,n),e.then(t,t))}function mI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pI(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gi(-1,1),e.tag=2,Eo(n,e,1))),n.lanes|=1),t)}var YV=Di.ReactCurrentOwner,Tr=!1;function or(t,e,n,r){e.child=t===null?t1(e,null,n,r):hc(e,t.child,n,r)}function gI(t,e,n,r,s){n=n.render;var i=e.ref;return Kl(e,s),r=B_(t,e,n,r,i,s),n=z_(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Si(t,e,s)):(Kt&&n&&C_(e),e.flags|=1,or(t,e,r,s),e.child)}function yI(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Z_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,x1(t,e,i,r,s)):(t=Ff(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_d,n(o,r)&&t.ref===e.ref)return Si(t,e,s)}return e.flags|=1,t=So(i,r),t.ref=e.ref,t.return=e,e.child=t}function x1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_d(i,r)&&t.ref===e.ref)if(Tr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tr=!0);else return e.lanes=t.lanes,Si(t,e,s)}return $v(t,e,n,r,s)}function R1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(Bl,kr),kr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ot(Bl,kr),kr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ot(Bl,kr),kr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ot(Bl,kr),kr|=r;return or(t,e,s,n),e.child}function P1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $v(t,e,n,r,s){var i=xr(n)?Wa:tr.current;return i=uc(e,i),Kl(e,s),n=B_(t,e,n,r,i,s),r=z_(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Si(t,e,s)):(Kt&&r&&C_(e),e.flags|=1,or(t,e,n,s),e.child)}function vI(t,e,n,r,s){if(xr(n)){var i=!0;vm(e)}else i=!1;if(Kl(e,s),e.stateNode===null)Lf(t,e),S1(e,n,r),Uv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=os(c):(c=xr(n)?Wa:tr.current,c=uc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&hI(e,o,r,c),Zi=!1;var f=e.memoizedState;o.state=f,Im(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ar.current||Zi?(typeof d=="function"&&(Fv(e,n,d,r),l=e.memoizedState),(a=Zi||dI(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,r1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ds(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=os(l):(l=xr(n)?Wa:tr.current,l=uc(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&hI(e,o,r,l),Zi=!1,f=e.memoizedState,o.state=f,Im(e,r,o,s);var w=e.memoizedState;a!==h||f!==w||Ar.current||Zi?(typeof m=="function"&&(Fv(e,n,m,r),w=e.memoizedState),(c=Zi||dI(e,n,c,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Bv(t,e,n,r,i,s)}function Bv(t,e,n,r,s,i){P1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&rI(e,n,!1),Si(t,e,i);r=e.stateNode,YV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hc(e,t.child,null,i),e.child=hc(e,null,a,i)):or(t,e,a,i),e.memoizedState=r.state,s&&rI(e,n,!0),e.child}function C1(t){var e=t.stateNode;e.pendingContext?nI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nI(t,e.context,!1),F_(t,e.containerInfo)}function wI(t,e,n,r,s){return dc(),D_(s),e.flags|=256,or(t,e,n,r),e.child}var zv={dehydrated:null,treeContext:null,retryLane:0};function Wv(t){return{baseLanes:t,cachePool:null,transitions:null}}function k1(t,e,n){var r=e.pendingProps,s=Jt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ot(Jt,s&1),t===null)return Vv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Lp(o,r,0,null),t=Ua(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Wv(n),e.memoizedState=zv,t):H_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return JV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=So(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=So(a,i):(i=Ua(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Wv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zv,r}return i=t.child,t=i.sibling,r=So(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function H_(t,e){return e=Lp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xh(t,e,n,r){return r!==null&&D_(r),hc(e,t.child,null,n),t=H_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=hy(Error(ne(422))),Xh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Lp({mode:"visible",children:r.children},s,0,null),i=Ua(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&hc(e,t.child,null,o),e.child.memoizedState=Wv(o),e.memoizedState=zv,i);if(!(e.mode&1))return Xh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ne(419)),r=hy(i,r,void 0),Xh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tr||a){if(r=Ln,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ii(t,s),_s(r,t,s,-1))}return X_(),r=hy(Error(ne(421))),Xh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=uM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mr=_o(s.nextSibling),jr=e,Kt=!0,gs=null,t!==null&&(ts[ns++]=hi,ts[ns++]=fi,ts[ns++]=qa,hi=t.id,fi=t.overflow,qa=e),e=H_(e,r.children),e.flags|=4096,e)}function _I(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mv(t.return,e,n)}function fy(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function D1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(or(t,e,r.children,n),r=Jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_I(t,n,e);else if(t.tag===19)_I(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ot(Jt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Sm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),fy(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}fy(e,!0,n,null,i);break;case"together":fy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ka|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=So(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=So(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XV(t,e,n){switch(e.tag){case 3:C1(e),dc();break;case 5:s1(e);break;case 1:xr(e.type)&&vm(e);break;case 4:F_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ot(Em,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ot(Jt,Jt.current&1),e.flags|=128,null):n&e.child.childLanes?k1(t,e,n):(Ot(Jt,Jt.current&1),t=Si(t,e,n),t!==null?t.sibling:null);Ot(Jt,Jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return D1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ot(Jt,Jt.current),r)break;return null;case 22:case 23:return e.lanes=0,R1(t,e,n)}return Si(t,e,n)}var N1,qv,O1,L1;N1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qv=function(){};O1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ea(Gs.current);var i=null;switch(n){case"input":s=fv(t,s),r=fv(t,r),i=[];break;case"select":s=en({},s,{value:void 0}),r=en({},r,{value:void 0}),i=[];break;case"textarea":s=gv(t,s),r=gv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gm)}vv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};L1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eu(t,e){if(!Kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Hn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZV(t,e,n){var r=e.pendingProps;switch(k_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(e),null;case 1:return xr(e.type)&&ym(),Hn(e),null;case 3:return r=e.stateNode,fc(),$t(Ar),$t(tr),j_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gs!==null&&(Zv(gs),gs=null))),qv(t,e),Hn(e),null;case 5:U_(e);var s=Ea(bd.current);if(n=e.type,t!==null&&e.stateNode!=null)O1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Hn(e),null}if(t=Ea(Gs.current),Yh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$s]=e,r[Id]=i,t=(e.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(s=0;s<Lu.length;s++)jt(Lu[s],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":PT(r,i),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jt("invalid",r);break;case"textarea":kT(r,i),jt("invalid",r)}vv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qh(r.textContent,a,t),s=["children",""+a]):fd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jt("scroll",r)}switch(n){case"input":$h(r),CT(r,i,!0);break;case"textarea":$h(r),DT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$s]=e,t[Id]=r,N1(t,e,!1,!1),e.stateNode=t;e:{switch(o=wv(n,r),n){case"dialog":jt("cancel",t),jt("close",t),s=r;break;case"iframe":case"object":case"embed":jt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Lu.length;s++)jt(Lu[s],t);s=r;break;case"source":jt("error",t),s=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),s=r;break;case"details":jt("toggle",t),s=r;break;case"input":PT(t,r),s=fv(t,r),jt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=en({},r,{value:void 0}),jt("invalid",t);break;case"textarea":kT(t,r),s=gv(t,r),jt("invalid",t);break;default:s=r}vv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?hR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uR(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&md(t,l):typeof l=="number"&&md(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&jt("scroll",t):l!=null&&g_(t,i,l,o))}switch(n){case"input":$h(t),CT(t,r,!1);break;case"textarea":$h(t),DT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+No(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zl(t,!!r.multiple,i,!1):r.defaultValue!=null&&zl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hn(e),null;case 6:if(t&&e.stateNode!=null)L1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=Ea(bd.current),Ea(Gs.current),Yh(e)){if(r=e.stateNode,n=e.memoizedProps,r[$s]=e,(i=r.nodeValue!==n)&&(t=jr,t!==null))switch(t.tag){case 3:Qh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$s]=e,e.stateNode=r}return Hn(e),null;case 13:if($t(Jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Kt&&Mr!==null&&e.mode&1&&!(e.flags&128))ZR(),dc(),e.flags|=98560,i=!1;else if(i=Yh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[$s]=e}else dc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hn(e),i=!1}else gs!==null&&(Zv(gs),gs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?xn===0&&(xn=3):X_())),e.updateQueue!==null&&(e.flags|=4),Hn(e),null);case 4:return fc(),qv(t,e),t===null&&Ed(e.stateNode.containerInfo),Hn(e),null;case 10:return L_(e.type._context),Hn(e),null;case 17:return xr(e.type)&&ym(),Hn(e),null;case 19:if($t(Jt),i=e.memoizedState,i===null)return Hn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Eu(i,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sm(t),o!==null){for(e.flags|=128,Eu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ot(Jt,Jt.current&1|2),e.child}t=t.sibling}i.tail!==null&&fn()>pc&&(e.flags|=128,r=!0,Eu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Sm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Kt)return Hn(e),null}else 2*fn()-i.renderingStartTime>pc&&n!==1073741824&&(e.flags|=128,r=!0,Eu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fn(),e.sibling=null,n=Jt.current,Ot(Jt,r?n&1|2:n&1),e):(Hn(e),null);case 22:case 23:return J_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kr&1073741824&&(Hn(e),e.subtreeFlags&6&&(e.flags|=8192)):Hn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function eM(t,e){switch(k_(e),e.tag){case 1:return xr(e.type)&&ym(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fc(),$t(Ar),$t(tr),j_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return U_(e),null;case 13:if($t(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));dc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(Jt),null;case 4:return fc(),null;case 10:return L_(e.type._context),null;case 22:case 23:return J_(),null;case 24:return null;default:return null}}var Zh=!1,Jn=!1,tM=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function $l(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){an(t,e,r)}else n.current=null}function Hv(t,e,n){try{n()}catch(r){an(t,e,r)}}var EI=!1;function nM(t,e){if(Pv=fm,t=jR(),P_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cv={focusedElem:t,selectionRange:n},fm=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,y=w.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?g:ds(e.type,g),y);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(x){an(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return w=EI,EI=!1,w}function Yu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hv(e,n,i)}s=s.next}while(s!==r)}}function Np(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function V1(t){var e=t.alternate;e!==null&&(t.alternate=null,V1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$s],delete e[Id],delete e[Nv],delete e[FV],delete e[UV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M1(t){return t.tag===5||t.tag===3||t.tag===4}function TI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gm));else if(r!==4&&(t=t.child,t!==null))for(Gv(t,e,n),t=t.sibling;t!==null;)Gv(t,e,n),t=t.sibling}function Qv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qv(t,e,n),t=t.sibling;t!==null;)Qv(t,e,n),t=t.sibling}var Mn=null,ms=!1;function zi(t,e,n){for(n=n.child;n!==null;)F1(t,e,n),n=n.sibling}function F1(t,e,n){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(bp,n)}catch{}switch(n.tag){case 5:Jn||$l(n,e);case 6:var r=Mn,s=ms;Mn=null,zi(t,e,n),Mn=r,ms=s,Mn!==null&&(ms?(t=Mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mn.removeChild(n.stateNode));break;case 18:Mn!==null&&(ms?(t=Mn,n=n.stateNode,t.nodeType===8?oy(t.parentNode,n):t.nodeType===1&&oy(t,n),vd(t)):oy(Mn,n.stateNode));break;case 4:r=Mn,s=ms,Mn=n.stateNode.containerInfo,ms=!0,zi(t,e,n),Mn=r,ms=s;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hv(n,e,o),s=s.next}while(s!==r)}zi(t,e,n);break;case 1:if(!Jn&&($l(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){an(n,e,a)}zi(t,e,n);break;case 21:zi(t,e,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,zi(t,e,n),Jn=r):zi(t,e,n);break;default:zi(t,e,n)}}function II(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tM),e.forEach(function(r){var s=dM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ls(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mn=a.stateNode,ms=!1;break e;case 3:Mn=a.stateNode.containerInfo,ms=!0;break e;case 4:Mn=a.stateNode.containerInfo,ms=!0;break e}a=a.return}if(Mn===null)throw Error(ne(160));F1(i,o,s),Mn=null,ms=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){an(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U1(e,t),e=e.sibling}function U1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(e,t),Os(t),r&4){try{Yu(3,t,t.return),Np(3,t)}catch(g){an(t,t.return,g)}try{Yu(5,t,t.return)}catch(g){an(t,t.return,g)}}break;case 1:ls(e,t),Os(t),r&512&&n!==null&&$l(n,n.return);break;case 5:if(ls(e,t),Os(t),r&512&&n!==null&&$l(n,n.return),t.flags&32){var s=t.stateNode;try{md(s,"")}catch(g){an(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&aR(s,i),wv(a,o);var c=wv(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?hR(s,h):d==="dangerouslySetInnerHTML"?uR(s,h):d==="children"?md(s,h):g_(s,d,h,c)}switch(a){case"input":mv(s,i);break;case"textarea":lR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?zl(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?zl(s,!!i.multiple,i.defaultValue,!0):zl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Id]=i}catch(g){an(t,t.return,g)}}break;case 6:if(ls(e,t),Os(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){an(t,t.return,g)}}break;case 3:if(ls(e,t),Os(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vd(e.containerInfo)}catch(g){an(t,t.return,g)}break;case 4:ls(e,t),Os(t);break;case 13:ls(e,t),Os(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Q_=fn())),r&4&&II(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Jn=(c=Jn)||d,ls(e,t),Jn=c):ls(e,t),Os(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ee=t,d=t.child;d!==null;){for(h=Ee=d;Ee!==null;){switch(f=Ee,m=f.child,f.tag){case 0:case 11:case 14:case 15:Yu(4,f,f.return);break;case 1:$l(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(g){an(r,n,g)}}break;case 5:$l(f,f.return);break;case 22:if(f.memoizedState!==null){bI(h);continue}}m!==null?(m.return=f,Ee=m):bI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dR("display",o))}catch(g){an(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){an(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ls(e,t),Os(t),r&4&&II(t);break;case 21:break;default:ls(e,t),Os(t)}}function Os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(M1(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(md(s,""),r.flags&=-33);var i=TI(t);Qv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=TI(t);Gv(t,a,o);break;default:throw Error(ne(161))}}catch(l){an(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rM(t,e,n){Ee=t,j1(t)}function j1(t,e,n){for(var r=(t.mode&1)!==0;Ee!==null;){var s=Ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Jn;a=Zh;var c=Jn;if(Zh=o,(Jn=l)&&!c)for(Ee=s;Ee!==null;)o=Ee,l=o.child,o.tag===22&&o.memoizedState!==null?AI(s):l!==null?(l.return=o,Ee=l):AI(s);for(;i!==null;)Ee=i,j1(i),i=i.sibling;Ee=s,Zh=a,Jn=c}SI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ee=i):SI(t)}}function SI(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||Np(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ds(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&vd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Jn||e.flags&512&&Kv(e)}catch(f){an(e,e.return,f)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function bI(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function AI(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Np(4,e)}catch(l){an(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){an(e,s,l)}}var i=e.return;try{Kv(e)}catch(l){an(e,i,l)}break;case 5:var o=e.return;try{Kv(e)}catch(l){an(e,o,l)}}}catch(l){an(e,e.return,l)}if(e===t){Ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ee=a;break}Ee=e.return}}var sM=Math.ceil,xm=Di.ReactCurrentDispatcher,K_=Di.ReactCurrentOwner,ss=Di.ReactCurrentBatchConfig,gt=0,Ln=null,En=null,Un=0,kr=0,Bl=Ho(0),xn=0,Pd=null,Ka=0,Op=0,G_=0,Ju=null,Er=null,Q_=0,pc=1/0,li=null,Rm=!1,Yv=null,To=null,ef=!1,ho=null,Pm=0,Xu=0,Jv=null,Vf=-1,Mf=0;function cr(){return gt&6?fn():Vf!==-1?Vf:Vf=fn()}function Io(t){return t.mode&1?gt&2&&Un!==0?Un&-Un:$V.transition!==null?(Mf===0&&(Mf=SR()),Mf):(t=bt,t!==0||(t=window.event,t=t===void 0?16:kR(t.type)),t):1}function _s(t,e,n,r){if(50<Xu)throw Xu=0,Jv=null,Error(ne(185));ih(t,n,r),(!(gt&2)||t!==Ln)&&(t===Ln&&(!(gt&2)&&(Op|=n),xn===4&&to(t,Un)),Rr(t,r),n===1&&gt===0&&!(e.mode&1)&&(pc=fn()+500,Cp&&Ko()))}function Rr(t,e){var n=t.callbackNode;$L(t,e);var r=hm(t,t===Ln?Un:0);if(r===0)n!==null&&LT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&LT(n),e===1)t.tag===0?jV(xI.bind(null,t)):YR(xI.bind(null,t)),VV(function(){!(gt&6)&&Ko()}),n=null;else{switch(bR(r)){case 1:n=E_;break;case 4:n=TR;break;case 16:n=dm;break;case 536870912:n=IR;break;default:n=dm}n=G1(n,$1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $1(t,e){if(Vf=-1,Mf=0,gt&6)throw Error(ne(327));var n=t.callbackNode;if(Gl()&&t.callbackNode!==n)return null;var r=hm(t,t===Ln?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cm(t,r);else{e=r;var s=gt;gt|=2;var i=z1();(Ln!==t||Un!==e)&&(li=null,pc=fn()+500,Fa(t,e));do try{aM();break}catch(a){B1(t,a)}while(!0);O_(),xm.current=i,gt=s,En!==null?e=0:(Ln=null,Un=0,e=xn)}if(e!==0){if(e===2&&(s=Sv(t),s!==0&&(r=s,e=Xv(t,s))),e===1)throw n=Pd,Fa(t,0),to(t,r),Rr(t,fn()),n;if(e===6)to(t,r);else{if(s=t.current.alternate,!(r&30)&&!iM(s)&&(e=Cm(t,r),e===2&&(i=Sv(t),i!==0&&(r=i,e=Xv(t,i))),e===1))throw n=Pd,Fa(t,0),to(t,r),Rr(t,fn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:aa(t,Er,li);break;case 3:if(to(t,r),(r&130023424)===r&&(e=Q_+500-fn(),10<e)){if(hm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){cr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dv(aa.bind(null,t,Er,li),e);break}aa(t,Er,li);break;case 4:if(to(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ws(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sM(r/1960))-r,10<r){t.timeoutHandle=Dv(aa.bind(null,t,Er,li),r);break}aa(t,Er,li);break;case 5:aa(t,Er,li);break;default:throw Error(ne(329))}}}return Rr(t,fn()),t.callbackNode===n?$1.bind(null,t):null}function Xv(t,e){var n=Ju;return t.current.memoizedState.isDehydrated&&(Fa(t,e).flags|=256),t=Cm(t,e),t!==2&&(e=Er,Er=n,e!==null&&Zv(e)),t}function Zv(t){Er===null?Er=t:Er.push.apply(Er,t)}function iM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Is(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function to(t,e){for(e&=~G_,e&=~Op,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ws(e),r=1<<n;t[n]=-1,e&=~r}}function xI(t){if(gt&6)throw Error(ne(327));Gl();var e=hm(t,0);if(!(e&1))return Rr(t,fn()),null;var n=Cm(t,e);if(t.tag!==0&&n===2){var r=Sv(t);r!==0&&(e=r,n=Xv(t,r))}if(n===1)throw n=Pd,Fa(t,0),to(t,e),Rr(t,fn()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,aa(t,Er,li),Rr(t,fn()),null}function Y_(t,e){var n=gt;gt|=1;try{return t(e)}finally{gt=n,gt===0&&(pc=fn()+500,Cp&&Ko())}}function Ga(t){ho!==null&&ho.tag===0&&!(gt&6)&&Gl();var e=gt;gt|=1;var n=ss.transition,r=bt;try{if(ss.transition=null,bt=1,t)return t()}finally{bt=r,ss.transition=n,gt=e,!(gt&6)&&Ko()}}function J_(){kr=Bl.current,$t(Bl)}function Fa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LV(n)),En!==null)for(n=En.return;n!==null;){var r=n;switch(k_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ym();break;case 3:fc(),$t(Ar),$t(tr),j_();break;case 5:U_(r);break;case 4:fc();break;case 13:$t(Jt);break;case 19:$t(Jt);break;case 10:L_(r.type._context);break;case 22:case 23:J_()}n=n.return}if(Ln=t,En=t=So(t.current,null),Un=kr=e,xn=0,Pd=null,G_=Op=Ka=0,Er=Ju=null,_a!==null){for(e=0;e<_a.length;e++)if(n=_a[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}_a=null}return t}function B1(t,e){do{var n=En;try{if(O_(),Nf.current=Am,bm){for(var r=Zt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bm=!1}if(Ha=0,Nn=An=Zt=null,Qu=!1,Ad=0,K_.current=null,n===null||n.return===null){xn=1,Pd=e,En=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=mI(o);if(m!==null){m.flags&=-257,pI(m,o,a,i,e),m.mode&1&&fI(i,c,e),e=m,l=c;var w=e.updateQueue;if(w===null){var g=new Set;g.add(l),e.updateQueue=g}else w.add(l);break e}else{if(!(e&1)){fI(i,c,e),X_();break e}l=Error(ne(426))}}else if(Kt&&a.mode&1){var y=mI(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),pI(y,o,a,i,e),D_(mc(l,a));break e}}i=l=mc(l,a),xn!==4&&(xn=2),Ju===null?Ju=[i]:Ju.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=b1(i,l,e);aI(i,E);break e;case 1:a=l;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(To===null||!To.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=A1(i,a,e);aI(i,x);break e}}i=i.return}while(i!==null)}q1(n)}catch(k){e=k,En===n&&n!==null&&(En=n=n.return);continue}break}while(!0)}function z1(){var t=xm.current;return xm.current=Am,t===null?Am:t}function X_(){(xn===0||xn===3||xn===2)&&(xn=4),Ln===null||!(Ka&268435455)&&!(Op&268435455)||to(Ln,Un)}function Cm(t,e){var n=gt;gt|=2;var r=z1();(Ln!==t||Un!==e)&&(li=null,Fa(t,e));do try{oM();break}catch(s){B1(t,s)}while(!0);if(O_(),gt=n,xm.current=r,En!==null)throw Error(ne(261));return Ln=null,Un=0,xn}function oM(){for(;En!==null;)W1(En)}function aM(){for(;En!==null&&!DL();)W1(En)}function W1(t){var e=K1(t.alternate,t,kr);t.memoizedProps=t.pendingProps,e===null?q1(t):En=e,K_.current=null}function q1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eM(n,e),n!==null){n.flags&=32767,En=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,En=null;return}}else if(n=ZV(n,e,kr),n!==null){En=n;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);xn===0&&(xn=5)}function aa(t,e,n){var r=bt,s=ss.transition;try{ss.transition=null,bt=1,lM(t,e,n,r)}finally{ss.transition=s,bt=r}return null}function lM(t,e,n,r){do Gl();while(ho!==null);if(gt&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BL(t,i),t===Ln&&(En=Ln=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ef||(ef=!0,G1(dm,function(){return Gl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ss.transition,ss.transition=null;var o=bt;bt=1;var a=gt;gt|=4,K_.current=null,nM(t,n),U1(n,t),RV(Cv),fm=!!Pv,Cv=Pv=null,t.current=n,rM(n),NL(),gt=a,bt=o,ss.transition=i}else t.current=n;if(ef&&(ef=!1,ho=t,Pm=s),i=t.pendingLanes,i===0&&(To=null),VL(n.stateNode),Rr(t,fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Rm)throw Rm=!1,t=Yv,Yv=null,t;return Pm&1&&t.tag!==0&&Gl(),i=t.pendingLanes,i&1?t===Jv?Xu++:(Xu=0,Jv=t):Xu=0,Ko(),null}function Gl(){if(ho!==null){var t=bR(Pm),e=ss.transition,n=bt;try{if(ss.transition=null,bt=16>t?16:t,ho===null)var r=!1;else{if(t=ho,ho=null,Pm=0,gt&6)throw Error(ne(331));var s=gt;for(gt|=4,Ee=t.current;Ee!==null;){var i=Ee,o=i.child;if(Ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ee=c;Ee!==null;){var d=Ee;switch(d.tag){case 0:case 11:case 15:Yu(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ee=h;else for(;Ee!==null;){d=Ee;var f=d.sibling,m=d.return;if(V1(d),d===c){Ee=null;break}if(f!==null){f.return=m,Ee=f;break}Ee=m}}}var w=i.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ee=o;else e:for(;Ee!==null;){if(i=Ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yu(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Ee=E;break e}Ee=i.return}}var v=t.current;for(Ee=v;Ee!==null;){o=Ee;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ee=_;else e:for(o=v;Ee!==null;){if(a=Ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Np(9,a)}}catch(k){an(a,a.return,k)}if(a===o){Ee=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ee=x;break e}Ee=a.return}}if(gt=s,Ko(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(bp,t)}catch{}r=!0}return r}finally{bt=n,ss.transition=e}}return!1}function RI(t,e,n){e=mc(n,e),e=b1(t,e,1),t=Eo(t,e,1),e=cr(),t!==null&&(ih(t,1,e),Rr(t,e))}function an(t,e,n){if(t.tag===3)RI(t,t,n);else for(;e!==null;){if(e.tag===3){RI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(To===null||!To.has(r))){t=mc(n,t),t=A1(e,t,1),e=Eo(e,t,1),t=cr(),e!==null&&(ih(e,1,t),Rr(e,t));break}}e=e.return}}function cM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=cr(),t.pingedLanes|=t.suspendedLanes&n,Ln===t&&(Un&n)===n&&(xn===4||xn===3&&(Un&130023424)===Un&&500>fn()-Q_?Fa(t,0):G_|=n),Rr(t,e)}function H1(t,e){e===0&&(t.mode&1?(e=Wh,Wh<<=1,!(Wh&130023424)&&(Wh=4194304)):e=1);var n=cr();t=Ii(t,e),t!==null&&(ih(t,e,n),Rr(t,n))}function uM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),H1(t,n)}function dM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),H1(t,n)}var K1;K1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ar.current)Tr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tr=!1,XV(t,e,n);Tr=!!(t.flags&131072)}else Tr=!1,Kt&&e.flags&1048576&&JR(e,_m,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lf(t,e),t=e.pendingProps;var s=uc(e,tr.current);Kl(e,n),s=B_(null,e,r,t,s,n);var i=z_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(r)?(i=!0,vm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,M_(e),s.updater=Dp,e.stateNode=s,s._reactInternals=e,Uv(e,r,t,n),e=Bv(null,e,r,!0,i,n)):(e.tag=0,Kt&&i&&C_(e),or(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fM(r),t=ds(r,t),s){case 0:e=$v(null,e,r,t,n);break e;case 1:e=vI(null,e,r,t,n);break e;case 11:e=gI(null,e,r,t,n);break e;case 14:e=yI(null,e,r,ds(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),$v(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),vI(t,e,r,s,n);case 3:e:{if(C1(e),t===null)throw Error(ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,r1(t,e),Im(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mc(Error(ne(423)),e),e=wI(t,e,r,n,s);break e}else if(r!==s){s=mc(Error(ne(424)),e),e=wI(t,e,r,n,s);break e}else for(Mr=_o(e.stateNode.containerInfo.firstChild),jr=e,Kt=!0,gs=null,n=t1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dc(),r===s){e=Si(t,e,n);break e}or(t,e,r,n)}e=e.child}return e;case 5:return s1(e),t===null&&Vv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kv(r,s)?o=null:i!==null&&kv(r,i)&&(e.flags|=32),P1(t,e),or(t,e,o,n),e.child;case 6:return t===null&&Vv(e),null;case 13:return k1(t,e,n);case 4:return F_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hc(e,null,r,n):or(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),gI(t,e,r,s,n);case 7:return or(t,e,e.pendingProps,n),e.child;case 8:return or(t,e,e.pendingProps.children,n),e.child;case 12:return or(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ot(Em,r._currentValue),r._currentValue=o,i!==null)if(Is(i.value,o)){if(i.children===s.children&&!Ar.current){e=Si(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=gi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Mv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ne(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Mv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}or(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Kl(e,n),s=os(s),r=r(s),e.flags|=1,or(t,e,r,n),e.child;case 14:return r=e.type,s=ds(r,e.pendingProps),s=ds(r.type,s),yI(t,e,r,s,n);case 15:return x1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),Lf(t,e),e.tag=1,xr(r)?(t=!0,vm(e)):t=!1,Kl(e,n),S1(e,r,s),Uv(e,r,s,n),Bv(null,e,r,!0,t,n);case 19:return D1(t,e,n);case 22:return R1(t,e,n)}throw Error(ne(156,e.tag))};function G1(t,e){return ER(t,e)}function hM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(t,e,n,r){return new hM(t,e,n,r)}function Z_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fM(t){if(typeof t=="function")return Z_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v_)return 11;if(t===w_)return 14}return 2}function So(t,e){var n=t.alternate;return n===null?(n=rs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ff(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Z_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Dl:return Ua(n.children,s,i,e);case y_:o=8,s|=8;break;case cv:return t=rs(12,n,e,s|2),t.elementType=cv,t.lanes=i,t;case uv:return t=rs(13,n,e,s),t.elementType=uv,t.lanes=i,t;case dv:return t=rs(19,n,e,s),t.elementType=dv,t.lanes=i,t;case sR:return Lp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nR:o=10;break e;case rR:o=9;break e;case v_:o=11;break e;case w_:o=14;break e;case Xi:o=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=rs(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ua(t,e,n,r){return t=rs(7,t,r,e),t.lanes=n,t}function Lp(t,e,n,r){return t=rs(22,t,r,e),t.elementType=sR,t.lanes=n,t.stateNode={isHidden:!1},t}function my(t,e,n){return t=rs(6,t,null,e),t.lanes=n,t}function py(t,e,n){return e=rs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qg(0),this.expirationTimes=Qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function e0(t,e,n,r,s,i,o,a,l){return t=new mM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},M_(i),t}function pM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Q1(t){if(!t)return Oo;t=t._reactInternals;e:{if(al(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(xr(n))return QR(t,n,e)}return e}function Y1(t,e,n,r,s,i,o,a,l){return t=e0(n,r,!0,t,s,i,o,a,l),t.context=Q1(null),n=t.current,r=cr(),s=Io(n),i=gi(r,s),i.callback=e??null,Eo(n,i,s),t.current.lanes=s,ih(t,s,r),Rr(t,r),t}function Vp(t,e,n,r){var s=e.current,i=cr(),o=Io(s);return n=Q1(n),e.context===null?e.context=n:e.pendingContext=n,e=gi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Eo(s,e,o),t!==null&&(_s(t,s,o,i),Df(t,s,o)),o}function km(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function PI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function t0(t,e){PI(t,e),(t=t.alternate)&&PI(t,e)}function gM(){return null}var J1=typeof reportError=="function"?reportError:function(t){console.error(t)};function n0(t){this._internalRoot=t}Mp.prototype.render=n0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Vp(t,e,null,null)};Mp.prototype.unmount=n0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ga(function(){Vp(null,t,null,null)}),e[Ti]=null}};function Mp(t){this._internalRoot=t}Mp.prototype.unstable_scheduleHydration=function(t){if(t){var e=RR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<eo.length&&e!==0&&e<eo[n].priority;n++);eo.splice(n,0,t),n===0&&CR(t)}};function r0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function CI(){}function yM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=km(o);i.call(c)}}var o=Y1(e,r,t,0,null,!1,!1,"",CI);return t._reactRootContainer=o,t[Ti]=o.current,Ed(t.nodeType===8?t.parentNode:t),Ga(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=km(l);a.call(c)}}var l=e0(t,0,!1,null,null,!1,!1,"",CI);return t._reactRootContainer=l,t[Ti]=l.current,Ed(t.nodeType===8?t.parentNode:t),Ga(function(){Vp(e,l,n,r)}),l}function Up(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=km(o);a.call(l)}}Vp(e,o,t,s)}else o=yM(n,e,t,s,r);return km(o)}AR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ou(e.pendingLanes);n!==0&&(T_(e,n|1),Rr(e,fn()),!(gt&6)&&(pc=fn()+500,Ko()))}break;case 13:Ga(function(){var r=Ii(t,1);if(r!==null){var s=cr();_s(r,t,1,s)}}),t0(t,1)}};I_=function(t){if(t.tag===13){var e=Ii(t,134217728);if(e!==null){var n=cr();_s(e,t,134217728,n)}t0(t,134217728)}};xR=function(t){if(t.tag===13){var e=Io(t),n=Ii(t,e);if(n!==null){var r=cr();_s(n,t,e,r)}t0(t,e)}};RR=function(){return bt};PR=function(t,e){var n=bt;try{return bt=t,e()}finally{bt=n}};Ev=function(t,e,n){switch(e){case"input":if(mv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Pp(r);if(!s)throw Error(ne(90));oR(r),mv(r,s)}}}break;case"textarea":lR(t,n);break;case"select":e=n.value,e!=null&&zl(t,!!n.multiple,e,!1)}};pR=Y_;gR=Ga;var vM={usingClientEntryPoint:!1,Events:[ah,Vl,Pp,fR,mR,Y_]},Tu={findFiberByHostInstance:wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wM={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wR(t),t===null?null:t.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||gM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{bp=tf.inject(wM),Ks=tf}catch{}}Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vM;Hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!r0(e))throw Error(ne(200));return pM(t,e,null,n)};Hr.createRoot=function(t,e){if(!r0(t))throw Error(ne(299));var n=!1,r="",s=J1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=e0(t,1,!1,null,null,n,!1,r,s),t[Ti]=e.current,Ed(t.nodeType===8?t.parentNode:t),new n0(e)};Hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=wR(e),t=t===null?null:t.stateNode,t};Hr.flushSync=function(t){return Ga(t)};Hr.hydrate=function(t,e,n){if(!Fp(e))throw Error(ne(200));return Up(null,t,e,!0,n)};Hr.hydrateRoot=function(t,e,n){if(!r0(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=J1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Y1(e,null,t,1,n??null,s,!1,i,o),t[Ti]=e.current,Ed(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Mp(e)};Hr.render=function(t,e,n){if(!Fp(e))throw Error(ne(200));return Up(null,t,e,!1,n)};Hr.unmountComponentAtNode=function(t){if(!Fp(t))throw Error(ne(40));return t._reactRootContainer?(Ga(function(){Up(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};Hr.unstable_batchedUpdates=Y_;Hr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fp(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Up(t,e,n,!1,r)};Hr.version="18.3.1-next-f1338f8080-20240426";function X1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X1)}catch(t){console.error(t)}}X1(),Xx.exports=Hr;var ch=Xx.exports;const Z1=jx(ch);var eP,kI=ch;eP=kI.createRoot,kI.hydrateRoot;const _M="modulepreload",EM=function(t,e){return new URL(t,e).href},DI={},X=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=EM(c,r),c in DI)return;DI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let w=o.length-1;w>=0;w--){const g=o[w];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":_M,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((w,g)=>{m.addEventListener("load",w),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},TM=1,IM=1e6;let gy=0;function SM(){return gy=(gy+1)%Number.MAX_SAFE_INTEGER,gy.toString()}const yy=new Map,NI=t=>{if(yy.has(t))return;const e=setTimeout(()=>{yy.delete(t),Zu({type:"REMOVE_TOAST",toastId:t})},IM);yy.set(t,e)},bM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,TM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?NI(n):t.toasts.forEach(r=>{NI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Uf=[];let jf={toasts:[]};function Zu(t){jf=bM(jf,t),Uf.forEach(e=>{e(jf)})}function AM({...t}){const e=SM(),n=s=>Zu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Zu({type:"DISMISS_TOAST",toastId:e});return Zu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function s0(){const[t,e]=S.useState(jf);return S.useEffect(()=>(Uf.push(e),()=>{const n=Uf.indexOf(e);n>-1&&Uf.splice(n,1)}),[t]),{...t,toast:AM,dismiss:n=>Zu({type:"DISMISS_TOAST",toastId:n})}}function Nt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function OI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=OI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():OI(t[s],null)}}}}function $n(...t){return S.useCallback(tP(...t),t)}function xM(t,e){const n=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return T.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Bc(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:m,...w}=h,g=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,y=S.useMemo(()=>w,Object.values(w));return T.jsx(g.Provider,{value:y,children:m})};c.displayName=i+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,w=S.useContext(m);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,RM(s,...e)]}function RM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Cd(t){const e=CM(t),n=S.forwardRef((r,s)=>{const{children:i,...o}=r,a=S.Children.toArray(i),l=a.find(DM);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return T.jsx(e,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return T.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var PM=Cd("Slot");function CM(t){const e=S.forwardRef((n,r)=>{const{children:s,...i}=n;if(S.isValidElement(s)){const o=OM(s),a=NM(i,s.props);return s.type!==S.Fragment&&(a.ref=r?tP(r,o):o),S.cloneElement(s,a)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nP=Symbol("radix.slottable");function kM(t){const e=({children:n})=>T.jsx(T.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=nP,e}function DM(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nP}function NM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function OM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function LM(t){const e=t+"CollectionProvider",[n,r]=Bc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:E}=g,v=U.useRef(null),_=U.useRef(new Map).current;return T.jsx(s,{scope:y,itemMap:_,collectionRef:v,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=Cd(a),c=U.forwardRef((g,y)=>{const{scope:E,children:v}=g,_=i(a,E),x=$n(y,_.collectionRef);return T.jsx(l,{ref:x,children:v})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Cd(d),m=U.forwardRef((g,y)=>{const{scope:E,children:v,..._}=g,x=U.useRef(null),k=$n(y,x),L=i(d,E);return U.useEffect(()=>(L.itemMap.set(x,{ref:x,..._}),()=>void L.itemMap.delete(x))),T.jsx(f,{[h]:"",ref:k,children:v})});m.displayName=d;function w(g){const y=i(t+"CollectionConsumer",g);return U.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((L,R)=>_.indexOf(L.ref.current)-_.indexOf(R.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},w,r]}var VM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tn=VM.reduce((t,e)=>{const n=Cd(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function rP(t,e){t&&ch.flushSync(()=>t.dispatchEvent(e))}function Xs(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function MM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var FM="DismissableLayer",ew="dismissableLayer.update",UM="dismissableLayer.pointerDownOutside",jM="dismissableLayer.focusOutside",LI,sP=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jp=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(sP),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=S.useState({}),w=$n(e,R=>h(R)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=g.indexOf(y),v=d?g.indexOf(d):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,x=v>=E,k=BM(R=>{const A=R.target,b=[...c.branches].some(P=>P.contains(A));!x||b||(s==null||s(R),o==null||o(R),R.defaultPrevented||a==null||a())},f),L=zM(R=>{const A=R.target;[...c.branches].some(P=>P.contains(A))||(i==null||i(R),o==null||o(R),R.defaultPrevented||a==null||a())},f);return MM(R=>{v===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&a&&(R.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(LI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),VI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=LI)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),VI())},[d,c]),S.useEffect(()=>{const R=()=>m({});return document.addEventListener(ew,R),()=>document.removeEventListener(ew,R)},[]),T.jsx(tn.div,{...l,ref:w,style:{pointerEvents:_?x?"auto":"none":void 0,...t.style},onFocusCapture:Nt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Nt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Nt(t.onPointerDownCapture,k.onPointerDownCapture)})});jp.displayName=FM;var $M="DismissableLayerBranch",iP=S.forwardRef((t,e)=>{const n=S.useContext(sP),r=S.useRef(null),s=$n(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),T.jsx(tn.div,{...t,ref:s})});iP.displayName=$M;function BM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){oP(UM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function zM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&oP(jM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function VI(){const t=new CustomEvent(ew);document.dispatchEvent(t)}function oP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?rP(s,i):s.dispatchEvent(i)}var WM=jp,qM=iP,bi=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},HM="Portal",i0=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);bi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Z1.createPortal(T.jsx(tn.div,{...r,ref:e}),o):null});i0.displayName=HM;function KM(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var ll=t=>{const{present:e,children:n}=t,r=GM(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=$n(r.ref,QM(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};ll.displayName="Presence";function GM(t){const[e,n]=S.useState(),r=S.useRef(null),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=KM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=nf(r.current);i.current=a==="mounted"?c:"none"},[a]),bi(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=nf(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),bi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const g=nf(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(i.current=nf(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function nf(t){return(t==null?void 0:t.animationName)||"none"}function QM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var YM=f_[" useInsertionEffect ".trim().toString()]||bi;function o0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=JM({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const f=XM(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function JM({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),s=S.useRef(n),i=S.useRef(e);return YM(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function XM(t){return typeof t=="function"}var ZM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),eF="VisuallyHidden",$p=S.forwardRef((t,e)=>T.jsx(tn.span,{...t,ref:e,style:{...ZM,...t.style}}));$p.displayName=eF;var tF=$p,a0="ToastProvider",[l0,nF,rF]=LM("Toast"),[aP]=Bc("Toast",[rF]),[sF,Bp]=aP(a0),lP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=S.useState(null),[c,d]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${a0}\`. Expected non-empty \`string\`.`),T.jsx(l0.Provider,{scope:e,children:T.jsx(sF,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>d(m=>m+1),[]),onToastRemove:S.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};lP.displayName=a0;var cP="ToastViewport",iF=["F8"],tw="toast.viewportPause",nw="toast.viewportResume",uP=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=iF,label:s="Notifications ({hotkey})",...i}=t,o=Bp(cP,n),a=nF(n),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=$n(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;S.useEffect(()=>{const y=E=>{var _;r.length!==0&&r.every(x=>E[x]||E.code===x)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),S.useEffect(()=>{const y=l.current,E=h.current;if(w&&y&&E){const v=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(tw);E.dispatchEvent(L),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(nw);E.dispatchEvent(L),o.isClosePausedRef.current=!1}},x=L=>{!y.contains(L.relatedTarget)&&_()},k=()=>{y.contains(document.activeElement)||_()};return y.addEventListener("focusin",v),y.addEventListener("focusout",x),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",k),window.addEventListener("blur",v),window.addEventListener("focus",_),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",x),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",k),window.removeEventListener("blur",v),window.removeEventListener("focus",_)}}},[w,o.isClosePausedRef]);const g=S.useCallback(({tabbingDirection:y})=>{const v=a().map(_=>{const x=_.ref.current,k=[x,...vF(x)];return y==="forwards"?k:k.reverse()});return(y==="forwards"?v.reverse():v).flat()},[a]);return S.useEffect(()=>{const y=h.current;if(y){const E=v=>{var k,L,R;const _=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!_){const A=document.activeElement,b=v.shiftKey;if(v.target===y&&b){(k=c.current)==null||k.focus();return}const O=g({tabbingDirection:b?"backwards":"forwards"}),C=O.findIndex($=>$===A);vy(O.slice(C+1))?v.preventDefault():b?(L=c.current)==null||L.focus():(R=d.current)==null||R.focus()}};return y.addEventListener("keydown",E),()=>y.removeEventListener("keydown",E)}},[a,g]),T.jsxs(qM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&T.jsx(rw,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});vy(y)}}),T.jsx(l0.Slot,{scope:n,children:T.jsx(tn.ol,{tabIndex:-1,...i,ref:f})}),w&&T.jsx(rw,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});vy(y)}})]})});uP.displayName=cP;var dP="ToastFocusProxy",rw=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Bp(dP,n);return T.jsx($p,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});rw.displayName=dP;var uh="Toast",oF="toast.swipeStart",aF="toast.swipeMove",lF="toast.swipeCancel",cF="toast.swipeEnd",hP=S.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=o0({prop:r,defaultProp:s??!0,onChange:i,caller:uh});return T.jsx(ll,{present:n||a,children:T.jsx(hF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Xs(t.onPause),onResume:Xs(t.onResume),onSwipeStart:Nt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Nt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Nt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Nt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});hP.displayName=uh;var[uF,dF]=aP(uh,{onClose(){}}),hF=S.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...w}=t,g=Bp(uh,n),[y,E]=S.useState(null),v=$n(e,$=>E($)),_=S.useRef(null),x=S.useRef(null),k=s||g.duration,L=S.useRef(0),R=S.useRef(k),A=S.useRef(0),{onToastAdd:b,onToastRemove:P}=g,D=Xs(()=>{var ie;(y==null?void 0:y.contains(document.activeElement))&&((ie=g.viewport)==null||ie.focus()),o()}),O=S.useCallback($=>{!$||$===1/0||(window.clearTimeout(A.current),L.current=new Date().getTime(),A.current=window.setTimeout(D,$))},[D]);S.useEffect(()=>{const $=g.viewport;if($){const ie=()=>{O(R.current),c==null||c()},oe=()=>{const fe=new Date().getTime()-L.current;R.current=R.current-fe,window.clearTimeout(A.current),l==null||l()};return $.addEventListener(tw,oe),$.addEventListener(nw,ie),()=>{$.removeEventListener(tw,oe),$.removeEventListener(nw,ie)}}},[g.viewport,k,l,c,O]),S.useEffect(()=>{i&&!g.isClosePausedRef.current&&O(k)},[i,k,g.isClosePausedRef,O]),S.useEffect(()=>(b(),()=>P()),[b,P]);const C=S.useMemo(()=>y?wP(y):null,[y]);return g.viewport?T.jsxs(T.Fragment,{children:[C&&T.jsx(fF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),T.jsx(uF,{scope:n,onClose:D,children:ch.createPortal(T.jsx(l0.ItemSlot,{scope:n,children:T.jsx(WM,{asChild:!0,onEscapeKeyDown:Nt(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:T.jsx(tn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Nt(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Nt(t.onPointerDown,$=>{$.button===0&&(_.current={x:$.clientX,y:$.clientY})}),onPointerMove:Nt(t.onPointerMove,$=>{if(!_.current)return;const ie=$.clientX-_.current.x,oe=$.clientY-_.current.y,fe=!!x.current,j=["left","right"].includes(g.swipeDirection),V=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,te=j?V(0,ie):0,ae=j?0:V(0,oe),Y=$.pointerType==="touch"?10:2,ke={x:te,y:ae},Se={originalEvent:$,delta:ke};fe?(x.current=ke,rf(aF,h,Se,{discrete:!1})):MI(ke,g.swipeDirection,Y)?(x.current=ke,rf(oF,d,Se,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(ie)>Y||Math.abs(oe)>Y)&&(_.current=null)}),onPointerUp:Nt(t.onPointerUp,$=>{const ie=x.current,oe=$.target;if(oe.hasPointerCapture($.pointerId)&&oe.releasePointerCapture($.pointerId),x.current=null,_.current=null,ie){const fe=$.currentTarget,j={originalEvent:$,delta:ie};MI(ie,g.swipeDirection,g.swipeThreshold)?rf(cF,m,j,{discrete:!0}):rf(lF,f,j,{discrete:!0}),fe.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),fF=t=>{const{__scopeToast:e,children:n,...r}=t,s=Bp(uh,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return gF(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:T.jsx(i0,{asChild:!0,children:T.jsx($p,{...r,children:i&&T.jsxs(T.Fragment,{children:[s.label," ",n]})})})},mF="ToastTitle",fP=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return T.jsx(tn.div,{...r,ref:e})});fP.displayName=mF;var pF="ToastDescription",mP=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return T.jsx(tn.div,{...r,ref:e})});mP.displayName=pF;var pP="ToastAction",gP=S.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?T.jsx(vP,{altText:n,asChild:!0,children:T.jsx(c0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${pP}\`. Expected non-empty \`string\`.`),null)});gP.displayName=pP;var yP="ToastClose",c0=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=dF(yP,n);return T.jsx(vP,{asChild:!0,children:T.jsx(tn.button,{type:"button",...r,ref:e,onClick:Nt(t.onClick,s.onClose)})})});c0.displayName=yP;var vP=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return T.jsx(tn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function wP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),yF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...wP(r))}}),e}function rf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?rP(s,i):s.dispatchEvent(i)}var MI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function gF(t=()=>{}){const e=Xs(t);bi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function yF(t){return t.nodeType===t.ELEMENT_NODE}function vF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var wF=lP,_P=uP,EP=hP,TP=fP,IP=mP,SP=gP,bP=c0;function AP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=AP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function xP(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=AP(t))&&(r&&(r+=" "),r+=e);return r}const FI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,UI=xP,RP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return UI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=FI(d)||FI(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(w=>{let[g,y]=w;return Array.isArray(y)?y.includes({...i,...a}[g]):{...i,...a}[g]===y})?[...c,h,f]:c},[]);return UI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),jI=t=>{const e=EF(t);return e.charAt(0).toUpperCase()+e.slice(1)},PP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),TF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...IF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:PP("lucide",s),...!i&&!TF(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=(t,e)=>{const n=S.forwardRef(({className:r,...s},i)=>S.createElement(SF,{ref:i,iconNode:e,className:PP(`lucide-${_F(jI(t))}`,`lucide-${t}`,r),...s}));return n.displayName=jI(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],AF=kt("arrow-down",bF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],RF=kt("arrow-right",xF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],CF=kt("arrow-up-down",PF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],DF=kt("badge-percent",kF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],OF=kt("check",NF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],VF=kt("clock",LF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],FF=kt("credit-card",MF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],jF=kt("eye-off",UF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BF=kt("eye",$F);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],WF=kt("file-text",zF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],HF=kt("house",qF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],GF=kt("lock",KF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$I=kt("log-out",QF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],BI=kt("mail",YF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],XF=kt("message-circle",JF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M5 12h14",key:"1ays0h"}]],eU=kt("minus",ZF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zI=kt("plus",tU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],wy=kt("receipt",nU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],CP=kt("refresh-ccw",rU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],WI=kt("settings",sU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],oU=kt("shield",iU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],lU=kt("square",aU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],uU=kt("trending-up",cU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hU=kt("triangle-alert",dU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mU=kt("user",fU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],gU=kt("wrench",pU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],u0=kt("x",yU),d0="-",vU=t=>{const e=_U(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(d0);return a[0]===""&&a.length!==1&&a.shift(),kP(a,e)||wU(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},kP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?kP(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(d0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},qI=/^\[(.+)\]$/,wU=t=>{if(qI.test(t)){const e=qI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},_U=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return TU(Object.entries(t.classGroups),n).forEach(([i,o])=>{sw(o,r,i,e)}),r},sw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:HI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(EU(s)){sw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{sw(o,HI(e,i),n,r)})})},HI=(t,e)=>{let n=t;return e.split(d0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},EU=t=>t.isThemeGetter,TU=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,IU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},DP="!",SU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let y=0;y<a.length;y++){let E=a[y];if(c===0){if(E===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(d,y)),d=y+i;continue}if(E==="/"){h=y;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(DP),w=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},bU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},AU=t=>({cache:IU(t.cacheSize),parseClassName:SU(t),...vU(t)}),xU=/\s+/,RU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(xU);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let w=!!m,g=r(w?f.substring(0,m):f);if(!g){if(!w){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}w=!1}const y=bU(d).join(":"),E=h?y+DP:y,v=E+g;if(i.includes(v))continue;i.push(v);const _=s(g,w);for(let x=0;x<_.length;++x){const k=_[x];i.push(E+k)}a=c+(a.length>0?" "+a:a)}return a};function PU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=NP(e))&&(r&&(r+=" "),r+=n);return r}const NP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=NP(t[r]))&&(n&&(n+=" "),n+=e);return n};function CU(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=AU(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=RU(l,n);return s(l,d),d}return function(){return i(PU.apply(null,arguments))}}const Ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},OP=/^\[(?:([a-z-]+):)?(.+)\]$/i,kU=/^\d+\/\d+$/,DU=new Set(["px","full","screen"]),NU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,OU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,VU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,MU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oi=t=>Ql(t)||DU.has(t)||kU.test(t),Wi=t=>zc(t,"length",qU),Ql=t=>!!t&&!Number.isNaN(Number(t)),_y=t=>zc(t,"number",Ql),Iu=t=>!!t&&Number.isInteger(Number(t)),FU=t=>t.endsWith("%")&&Ql(t.slice(0,-1)),Je=t=>OP.test(t),qi=t=>NU.test(t),UU=new Set(["length","size","percentage"]),jU=t=>zc(t,UU,LP),$U=t=>zc(t,"position",LP),BU=new Set(["image","url"]),zU=t=>zc(t,BU,KU),WU=t=>zc(t,"",HU),Su=()=>!0,zc=(t,e,n)=>{const r=OP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},qU=t=>OU.test(t)&&!LU.test(t),LP=()=>!1,HU=t=>VU.test(t),KU=t=>MU.test(t),GU=()=>{const t=Ut("colors"),e=Ut("spacing"),n=Ut("blur"),r=Ut("brightness"),s=Ut("borderColor"),i=Ut("borderRadius"),o=Ut("borderSpacing"),a=Ut("borderWidth"),l=Ut("contrast"),c=Ut("grayscale"),d=Ut("hueRotate"),h=Ut("invert"),f=Ut("gap"),m=Ut("gradientColorStops"),w=Ut("gradientColorStopPositions"),g=Ut("inset"),y=Ut("margin"),E=Ut("opacity"),v=Ut("padding"),_=Ut("saturate"),x=Ut("scale"),k=Ut("sepia"),L=Ut("skew"),R=Ut("space"),A=Ut("translate"),b=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Je,e],O=()=>[Je,e],C=()=>["",oi,Wi],$=()=>["auto",Ql,Je],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],oe=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Je],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[Ql,Je];return{cacheSize:500,separator:":",theme:{colors:[Su],spacing:[oi,Wi],blur:["none","",qi,Je],brightness:ae(),borderColor:[t],borderRadius:["none","","full",qi,Je],borderSpacing:O(),borderWidth:C(),contrast:ae(),grayscale:V(),hueRotate:ae(),invert:V(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[FU,Wi],inset:D(),margin:D(),opacity:ae(),padding:O(),saturate:ae(),scale:ae(),sepia:V(),skew:ae(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[qi]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),Je]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Iu,Je]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Iu,Je]}],"grid-cols":[{"grid-cols":[Su]}],"col-start-end":[{col:["auto",{span:["full",Iu,Je]},Je]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Su]}],"row-start-end":[{row:["auto",{span:[Iu,Je]},Je]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,e]}],"min-w":[{"min-w":[Je,e,"min","max","fit"]}],"max-w":[{"max-w":[Je,e,"none","full","min","max","fit","prose",{screen:[qi]},qi]}],h:[{h:[Je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",qi,Wi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_y]}],"font-family":[{font:[Su]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",Ql,_y]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",oi,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",oi,Wi]}],"underline-offset":[{"underline-offset":["auto",oi,Je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),$U]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...oe(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:oe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...oe()]}],"outline-offset":[{"outline-offset":[oi,Je]}],"outline-w":[{outline:[oi,Wi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[oi,Wi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",qi,WU]}],"shadow-color":[{shadow:[Su]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",qi,Je]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Iu,Je]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[oi,Wi,_y]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},QU=CU(GU);function Bn(...t){return QU(xP(t))}const YU=wF,VP=S.forwardRef(({className:t,...e},n)=>T.jsx(_P,{ref:n,className:Bn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));VP.displayName=_P.displayName;const JU=RP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),MP=S.forwardRef(({className:t,variant:e,...n},r)=>T.jsx(EP,{ref:r,className:Bn(JU({variant:e}),t),...n}));MP.displayName=EP.displayName;const XU=S.forwardRef(({className:t,...e},n)=>T.jsx(SP,{ref:n,className:Bn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));XU.displayName=SP.displayName;const FP=S.forwardRef(({className:t,...e},n)=>T.jsx(bP,{ref:n,className:Bn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:T.jsx(u0,{className:"h-4 w-4"})}));FP.displayName=bP.displayName;const UP=S.forwardRef(({className:t,...e},n)=>T.jsx(TP,{ref:n,className:Bn("text-sm font-semibold",t),...e}));UP.displayName=TP.displayName;const jP=S.forwardRef(({className:t,...e},n)=>T.jsx(IP,{ref:n,className:Bn("text-sm opacity-90",t),...e}));jP.displayName=IP.displayName;function ZU(){const{toasts:t}=s0();return T.jsxs(YU,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return T.jsxs(MP,{...i,children:[T.jsxs("div",{className:"grid gap-1",children:[n&&T.jsx(UP,{children:n}),r&&T.jsx(jP,{children:r})]}),s,T.jsx(FP,{})]},e)}),T.jsx(VP,{})]})}var Dm=["light","dark"],h0="(prefers-color-scheme: dark)",e4=typeof window>"u",f0=S.createContext(void 0),t4={setTheme:t=>{},themes:[]},$P=()=>{var t;return(t=S.useContext(f0))!=null?t:t4},n4=t=>S.useContext(f0)?t.children:S.createElement(s4,{...t}),r4=["light","dark"],s4=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=r4,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=S.useState(()=>KI(s,o)),[m,w]=S.useState(()=>KI(s)),g=l?Object.values(l):i,y=S.useCallback(x=>{let k=x;if(!k)return;x==="system"&&n&&(k=GI());let L=l?l[k]:k,R=e?o4():null,A=document.documentElement;if(a==="class"?(A.classList.remove(...g),L&&A.classList.add(L)):L?A.setAttribute(a,L):A.removeAttribute(a),r){let b=Dm.includes(o)?o:null,P=Dm.includes(k)?k:b;A.style.colorScheme=P}R==null||R()},[]),E=S.useCallback(x=>{let k=typeof x=="function"?x(x):x;f(k);try{localStorage.setItem(s,k)}catch{}},[t]),v=S.useCallback(x=>{let k=GI(x);w(k),h==="system"&&n&&!t&&y("system")},[h,t]);S.useEffect(()=>{let x=window.matchMedia(h0);return x.addListener(v),v(x),()=>x.removeListener(v)},[v]),S.useEffect(()=>{let x=k=>{if(k.key!==s)return;let L=k.newValue||o;E(L)};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[E]),S.useEffect(()=>{y(t??h)},[t,h]);let _=S.useMemo(()=>({theme:h,setTheme:E,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,E,t,m,n,i]);return S.createElement(f0.Provider,{value:_},S.createElement(i4,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:d}),c)},i4=S.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Dm.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,g=!1,y=!0)=>{let E=o?o[w]:w,v=g?w+"|| ''":`'${E}'`,_="";return s&&y&&!g&&Dm.includes(w)&&(_+=`d.style.colorScheme = '${w}';`),n==="class"?g||E?_+=`c.add(${v})`:_+="null":E&&(_+=`d[s](n,${v})`),_},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${h0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),KI=(t,e)=>{if(e4)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},o4=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},GI=t=>(t||(t=window.matchMedia(h0)),t.matches?"dark":"light"),a4=t=>{switch(t){case"success":return u4;case"info":return h4;case"warning":return d4;case"error":return f4;default:return null}},l4=Array(12).fill(0),c4=({visible:t,className:e})=>U.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},U.createElement("div",{className:"sonner-spinner"},l4.map((n,r)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),u4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),d4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),h4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),f4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),m4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),p4=()=>{let[t,e]=U.useState(document.hidden);return U.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},iw=1,g4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:iw++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],U.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(v4(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||iw++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wr=new g4,y4=(t,e)=>{let n=(e==null?void 0:e.id)||iw++;return wr.addToast({title:t,...e,id:n}),n},v4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",w4=y4,_4=()=>wr.toasts,E4=()=>wr.getActiveToasts(),Kn=Object.assign(w4,{success:wr.success,info:wr.info,warning:wr.warning,error:wr.error,custom:wr.custom,message:wr.message,promise:wr.promise,dismiss:wr.dismiss,loading:wr.loading},{getHistory:_4,getToasts:E4});function T4(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}T4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function sf(t){return t.label!==void 0}var I4=3,S4="32px",b4="16px",QI=4e3,A4=356,x4=14,R4=20,P4=200;function cs(...t){return t.filter(Boolean).join(" ")}function C4(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var k4=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:w,interacting:g,setHeights:y,visibleToasts:E,heights:v,index:_,toasts:x,expanded:k,removeToast:L,defaultRichColors:R,closeButton:A,style:b,cancelButtonStyle:P,actionButtonStyle:D,className:O="",descriptionClassName:C="",duration:$,position:ie,gap:oe,loadingIcon:fe,expandByDefault:j,classNames:V,icons:te,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:Y}=t,[ke,Se]=U.useState(null),[De,Ye]=U.useState(null),[Ae,Yt]=U.useState(!1),[Xe,je]=U.useState(!1),[ze,Vt]=U.useState(!1),[rn,Vn]=U.useState(!1),[Gr,In]=U.useState(!1),[nr,Le]=U.useState(0),[vt,vn]=U.useState(0),mr=U.useRef(m.duration||$||QI),Zo=U.useRef(null),Qr=U.useRef(null),ea=_===0,Mt=_+1<=E,Pn=m.type,Yr=m.dismissible!==!1,ks=m.className||"",au=m.descriptionClassName||"",ii=U.useMemo(()=>v.findIndex(G=>G.toastId===m.id)||0,[v,m.id]),ta=U.useMemo(()=>{var G;return(G=m.closeButton)!=null?G:A},[m.closeButton,A]),J=U.useMemo(()=>m.duration||$||QI,[m.duration,$]),W=U.useRef(0),Z=U.useRef(0),q=U.useRef(0),Q=U.useRef(null),[re,le]=ie.split("-"),we=U.useMemo(()=>v.reduce((G,ge,he)=>he>=ii?G:G+ge.height,0),[v,ii]),ue=p4(),Ve=m.invert||f,me=Pn==="loading";Z.current=U.useMemo(()=>ii*oe+we,[ii,we]),U.useEffect(()=>{mr.current=J},[J]),U.useEffect(()=>{Yt(!0)},[]),U.useEffect(()=>{let G=Qr.current;if(G){let ge=G.getBoundingClientRect().height;return vn(ge),y(he=>[{toastId:m.id,height:ge,position:m.position},...he]),()=>y(he=>he.filter($e=>$e.toastId!==m.id))}},[y,m.id]),U.useLayoutEffect(()=>{if(!Ae)return;let G=Qr.current,ge=G.style.height;G.style.height="auto";let he=G.getBoundingClientRect().height;G.style.height=ge,vn(he),y($e=>$e.find(ut=>ut.toastId===m.id)?$e.map(ut=>ut.toastId===m.id?{...ut,height:he}:ut):[{toastId:m.id,height:he,position:m.position},...$e])},[Ae,m.title,m.description,y,m.id]);let Fe=U.useCallback(()=>{je(!0),Le(Z.current),y(G=>G.filter(ge=>ge.toastId!==m.id)),setTimeout(()=>{L(m)},P4)},[m,L,y,Z]);U.useEffect(()=>{if(m.promise&&Pn==="loading"||m.duration===1/0||m.type==="loading")return;let G;return k||g||Y&&ue?(()=>{if(q.current<W.current){let ge=new Date().getTime()-W.current;mr.current=mr.current-ge}q.current=new Date().getTime()})():mr.current!==1/0&&(W.current=new Date().getTime(),G=setTimeout(()=>{var ge;(ge=m.onAutoClose)==null||ge.call(m,m),Fe()},mr.current)),()=>clearTimeout(G)},[k,g,m,Pn,Y,ue,Fe]),U.useEffect(()=>{m.delete&&Fe()},[Fe,m.delete]);function ye(){var G,ge,he;return te!=null&&te.loading?U.createElement("div",{className:cs(V==null?void 0:V.loader,(G=m==null?void 0:m.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":Pn==="loading"},te.loading):fe?U.createElement("div",{className:cs(V==null?void 0:V.loader,(ge=m==null?void 0:m.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":Pn==="loading"},fe):U.createElement(c4,{className:cs(V==null?void 0:V.loader,(he=m==null?void 0:m.classNames)==null?void 0:he.loader),visible:Pn==="loading"})}return U.createElement("li",{tabIndex:0,ref:Qr,className:cs(O,ks,V==null?void 0:V.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[Pn],(n=m==null?void 0:m.classNames)==null?void 0:n[Pn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:R,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":Ae,"data-promise":!!m.promise,"data-swiped":Gr,"data-removed":Xe,"data-visible":Mt,"data-y-position":re,"data-x-position":le,"data-index":_,"data-front":ea,"data-swiping":ze,"data-dismissible":Yr,"data-type":Pn,"data-invert":Ve,"data-swipe-out":rn,"data-swipe-direction":De,"data-expanded":!!(k||j&&Ae),style:{"--index":_,"--toasts-before":_,"--z-index":x.length-_,"--offset":`${Xe?nr:Z.current}px`,"--initial-height":j?"auto":`${vt}px`,...b,...m.style},onDragEnd:()=>{Vt(!1),Se(null),Q.current=null},onPointerDown:G=>{me||!Yr||(Zo.current=new Date,Le(Z.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(Vt(!0),Q.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,ge,he,$e;if(rn||!Yr)return;Q.current=null;let ut=Number(((G=Qr.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zt=Number(((ge=Qr.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),wt=new Date().getTime()-((he=Zo.current)==null?void 0:he.getTime()),Ke=ke==="x"?ut:zt,ft=Math.abs(Ke)/wt;if(Math.abs(Ke)>=R4||ft>.11){Le(Z.current),($e=m.onDismiss)==null||$e.call(m,m),Ye(ke==="x"?ut>0?"right":"left":zt>0?"down":"up"),Fe(),Vn(!0),In(!1);return}Vt(!1),Se(null)},onPointerMove:G=>{var ge,he,$e,ut;if(!Q.current||!Yr||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;let zt=G.clientY-Q.current.y,wt=G.clientX-Q.current.x,Ke=(he=t.swipeDirections)!=null?he:C4(ie);!ke&&(Math.abs(wt)>1||Math.abs(zt)>1)&&Se(Math.abs(wt)>Math.abs(zt)?"x":"y");let ft={x:0,y:0};ke==="y"?(Ke.includes("top")||Ke.includes("bottom"))&&(Ke.includes("top")&&zt<0||Ke.includes("bottom")&&zt>0)&&(ft.y=zt):ke==="x"&&(Ke.includes("left")||Ke.includes("right"))&&(Ke.includes("left")&&wt<0||Ke.includes("right")&&wt>0)&&(ft.x=wt),(Math.abs(ft.x)>0||Math.abs(ft.y)>0)&&In(!0),($e=Qr.current)==null||$e.style.setProperty("--swipe-amount-x",`${ft.x}px`),(ut=Qr.current)==null||ut.style.setProperty("--swipe-amount-y",`${ft.y}px`)}},ta&&!m.jsx?U.createElement("button",{"aria-label":ae,"data-disabled":me,"data-close-button":!0,onClick:me||!Yr?()=>{}:()=>{var G;Fe(),(G=m.onDismiss)==null||G.call(m,m)},className:cs(V==null?void 0:V.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=te==null?void 0:te.close)!=null?i:m4):null,m.jsx||S.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:U.createElement(U.Fragment,null,Pn||m.icon||m.promise?U.createElement("div",{"data-icon":"",className:cs(V==null?void 0:V.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ye():null,m.type!=="loading"?m.icon||(te==null?void 0:te[Pn])||a4(Pn):null):null,U.createElement("div",{"data-content":"",className:cs(V==null?void 0:V.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},U.createElement("div",{"data-title":"",className:cs(V==null?void 0:V.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?U.createElement("div",{"data-description":"",className:cs(C,au,V==null?void 0:V.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),S.isValidElement(m.cancel)?m.cancel:m.cancel&&sf(m.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:G=>{var ge,he;sf(m.cancel)&&Yr&&((he=(ge=m.cancel).onClick)==null||he.call(ge,G),Fe())},className:cs(V==null?void 0:V.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,S.isValidElement(m.action)?m.action:m.action&&sf(m.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||D,onClick:G=>{var ge,he;sf(m.action)&&((he=(ge=m.action).onClick)==null||he.call(ge,G),!G.defaultPrevented&&Fe())},className:cs(V==null?void 0:V.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function YI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function D4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?b4:S4;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var N4=S.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:w=I4,toastOptions:g,dir:y=YI(),gap:E=x4,loadingIcon:v,icons:_,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:k}=t,[L,R]=U.useState([]),A=U.useMemo(()=>Array.from(new Set([r].concat(L.filter(Y=>Y.position).map(Y=>Y.position)))),[L,r]),[b,P]=U.useState([]),[D,O]=U.useState(!1),[C,$]=U.useState(!1),[ie,oe]=U.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=U.useRef(null),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=U.useRef(null),te=U.useRef(!1),ae=U.useCallback(Y=>{R(ke=>{var Se;return(Se=ke.find(De=>De.id===Y.id))!=null&&Se.delete||wr.dismiss(Y.id),ke.filter(({id:De})=>De!==Y.id)})},[]);return U.useEffect(()=>wr.subscribe(Y=>{if(Y.dismiss){R(ke=>ke.map(Se=>Se.id===Y.id?{...Se,delete:!0}:Se));return}setTimeout(()=>{Z1.flushSync(()=>{R(ke=>{let Se=ke.findIndex(De=>De.id===Y.id);return Se!==-1?[...ke.slice(0,Se),{...ke[Se],...Y},...ke.slice(Se+1)]:[Y,...ke]})})})}),[]),U.useEffect(()=>{if(d!=="system"){oe(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:ke})=>{oe(ke?"dark":"light")})}catch{Y.addListener(({matches:Se})=>{try{oe(Se?"dark":"light")}catch(De){console.error(De)}})}},[d]),U.useEffect(()=>{L.length<=1&&O(!1)},[L]),U.useEffect(()=>{let Y=ke=>{var Se,De;s.every(Ye=>ke[Ye]||ke.code===Ye)&&(O(!0),(Se=fe.current)==null||Se.focus()),ke.code==="Escape"&&(document.activeElement===fe.current||(De=fe.current)!=null&&De.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[s]),U.useEffect(()=>{if(fe.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,te.current=!1)}},[fe.current]),U.createElement("section",{ref:e,"aria-label":`${x} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((Y,ke)=>{var Se;let[De,Ye]=Y.split("-");return L.length?U.createElement("ol",{key:Y,dir:y==="auto"?YI():y,tabIndex:-1,ref:fe,className:a,"data-sonner-toaster":!0,"data-theme":ie,"data-y-position":De,"data-lifted":D&&L.length>1&&!i,"data-x-position":Ye,style:{"--front-toast-height":`${((Se=b[0])==null?void 0:Se.height)||0}px`,"--width":`${A4}px`,"--gap":`${E}px`,...m,...D4(l,c)},onBlur:Ae=>{te.current&&!Ae.currentTarget.contains(Ae.relatedTarget)&&(te.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||te.current||(te.current=!0,V.current=Ae.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{C||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},L.filter(Ae=>!Ae.position&&ke===0||Ae.position===Y).map((Ae,Yt)=>{var Xe,je;return U.createElement(k4,{key:Ae.id,icons:_,index:Yt,toast:Ae,defaultRichColors:h,duration:(Xe=g==null?void 0:g.duration)!=null?Xe:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:w,closeButton:(je=g==null?void 0:g.closeButton)!=null?je:o,interacting:C,position:Y,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ae,toasts:L.filter(ze=>ze.position==Ae.position),heights:b.filter(ze=>ze.position==Ae.position),setHeights:P,expandByDefault:i,gap:E,loadingIcon:v,expanded:D,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const O4=({...t})=>{const{theme:e="system"}=$P();return T.jsx(N4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var L4=f_[" useId ".trim().toString()]||(()=>{}),V4=0;function Ey(t){const[e,n]=S.useState(L4());return bi(()=>{n(r=>r??String(V4++))},[t]),t||(e?`radix-${e}`:"")}const M4=["top","right","bottom","left"],Lo=Math.min,Nr=Math.max,Nm=Math.round,of=Math.floor,Qs=t=>({x:t,y:t}),F4={left:"right",right:"left",bottom:"top",top:"bottom"},U4={start:"end",end:"start"};function ow(t,e,n){return Nr(t,Lo(e,n))}function Ai(t,e){return typeof t=="function"?t(e):t}function xi(t){return t.split("-")[0]}function Wc(t){return t.split("-")[1]}function m0(t){return t==="x"?"y":"x"}function p0(t){return t==="y"?"height":"width"}const j4=new Set(["top","bottom"]);function zs(t){return j4.has(xi(t))?"y":"x"}function g0(t){return m0(zs(t))}function $4(t,e,n){n===void 0&&(n=!1);const r=Wc(t),s=g0(t),i=p0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Om(o)),[o,Om(o)]}function B4(t){const e=Om(t);return[aw(t),e,aw(e)]}function aw(t){return t.replace(/start|end/g,e=>U4[e])}const JI=["left","right"],XI=["right","left"],z4=["top","bottom"],W4=["bottom","top"];function q4(t,e,n){switch(t){case"top":case"bottom":return n?e?XI:JI:e?JI:XI;case"left":case"right":return e?z4:W4;default:return[]}}function H4(t,e,n,r){const s=Wc(t);let i=q4(xi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(aw)))),i}function Om(t){return t.replace(/left|right|bottom|top/g,e=>F4[e])}function K4(t){return{top:0,right:0,bottom:0,left:0,...t}}function BP(t){return typeof t!="number"?K4(t):{top:t,right:t,bottom:t,left:t}}function Lm(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function ZI(t,e,n){let{reference:r,floating:s}=t;const i=zs(e),o=g0(e),a=p0(o),l=xi(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Wc(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const G4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=ZI(c,r,l),f=r,m={},w=0;for(let g=0;g<a.length;g++){const{name:y,fn:E}=a[g],{x:v,y:_,data:x,reset:k}=await E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=v??d,h=_??h,m={...m,[y]:{...m[y],...x}},k&&w<=50&&(w++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:d,y:h}=ZI(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function kd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Ai(e,t),w=BP(m),y=a[f?h==="floating"?"reference":"floating":h],E=Lm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},k=Lm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:l}):v);return{top:(E.top-k.top+w.top)/x.y,bottom:(k.bottom-E.bottom+w.bottom)/x.y,left:(E.left-k.left+w.left)/x.x,right:(k.right-E.right+w.right)/x.x}}const Q4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ai(t,e)||{};if(c==null)return{};const h=BP(d),f={x:n,y:r},m=g0(s),w=p0(m),g=await o.getDimensions(c),y=m==="y",E=y?"top":"left",v=y?"bottom":"right",_=y?"clientHeight":"clientWidth",x=i.reference[w]+i.reference[m]-f[m]-i.floating[w],k=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=L?L[_]:0;(!R||!await(o.isElement==null?void 0:o.isElement(L)))&&(R=a.floating[_]||i.floating[w]);const A=x/2-k/2,b=R/2-g[w]/2-1,P=Lo(h[E],b),D=Lo(h[v],b),O=P,C=R-g[w]-D,$=R/2-g[w]/2+A,ie=ow(O,$,C),oe=!l.arrow&&Wc(s)!=null&&$!==ie&&i.reference[w]/2-($<O?P:D)-g[w]/2<0,fe=oe?$<O?$-O:$-C:0;return{[m]:f[m]+fe,data:{[m]:ie,centerOffset:$-ie-fe,...oe&&{alignmentOffset:fe}},reset:oe}}}),Y4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...y}=Ai(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=xi(s),v=zs(a),_=xi(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(_||!g?[Om(a)]:B4(a)),L=w!=="none";!f&&L&&k.push(...H4(a,g,w,x));const R=[a,...k],A=await kd(e,y),b=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(A[E]),h){const $=$4(s,o,x);b.push(A[$[0]],A[$[1]])}if(P=[...P,{placement:s,overflows:b}],!b.every($=>$<=0)){var D,O;const $=(((D=i.flip)==null?void 0:D.index)||0)+1,ie=R[$];if(ie&&(!(h==="alignment"?v!==zs(ie):!1)||P.every(j=>zs(j.placement)===v?j.overflows[0]>0:!0)))return{data:{index:$,overflows:P},reset:{placement:ie}};let oe=(O=P.filter(fe=>fe.overflows[0]<=0).sort((fe,j)=>fe.overflows[1]-j.overflows[1])[0])==null?void 0:O.placement;if(!oe)switch(m){case"bestFit":{var C;const fe=(C=P.filter(j=>{if(L){const V=zs(j.placement);return V===v||V==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(V=>V>0).reduce((V,te)=>V+te,0)]).sort((j,V)=>j[1]-V[1])[0])==null?void 0:C[0];fe&&(oe=fe);break}case"initialPlacement":oe=a;break}if(s!==oe)return{reset:{placement:oe}}}return{}}}};function eS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function tS(t){return M4.some(e=>t[e]>=0)}const J4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ai(t,e);switch(r){case"referenceHidden":{const i=await kd(e,{...s,elementContext:"reference"}),o=eS(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:tS(o)}}}case"escaped":{const i=await kd(e,{...s,altBoundary:!0}),o=eS(i,n.floating);return{data:{escapedOffsets:o,escaped:tS(o)}}}default:return{}}}}},zP=new Set(["left","top"]);async function X4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=xi(n),a=Wc(n),l=zs(n)==="y",c=zP.has(o)?-1:1,d=i&&l?-1:1,h=Ai(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(m=a==="end"?w*-1:w),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const Z4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await X4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},ej=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:E,y:v}=y;return{x:E,y:v}}},...l}=Ai(t,e),c={x:n,y:r},d=await kd(e,l),h=zs(xi(s)),f=m0(h);let m=c[f],w=c[h];if(i){const y=f==="y"?"top":"left",E=f==="y"?"bottom":"right",v=m+d[y],_=m-d[E];m=ow(v,m,_)}if(o){const y=h==="y"?"top":"left",E=h==="y"?"bottom":"right",v=w+d[y],_=w-d[E];w=ow(v,w,_)}const g=a.fn({...e,[f]:m,[h]:w});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},tj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ai(t,e),d={x:n,y:r},h=zs(s),f=m0(h);let m=d[f],w=d[h];const g=Ai(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=f==="y"?"height":"width",x=i.reference[f]-i.floating[_]+y.mainAxis,k=i.reference[f]+i.reference[_]-y.mainAxis;m<x?m=x:m>k&&(m=k)}if(c){var E,v;const _=f==="y"?"width":"height",x=zP.has(xi(s)),k=i.reference[h]-i.floating[_]+(x&&((E=o.offset)==null?void 0:E[h])||0)+(x?0:y.crossAxis),L=i.reference[h]+i.reference[_]+(x?0:((v=o.offset)==null?void 0:v[h])||0)-(x?y.crossAxis:0);w<k?w=k:w>L&&(w=L)}return{[f]:m,[h]:w}}}},nj=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ai(t,e),d=await kd(e,c),h=xi(s),f=Wc(s),m=zs(s)==="y",{width:w,height:g}=i.floating;let y,E;h==="top"||h==="bottom"?(y=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,y=f==="end"?"top":"bottom");const v=g-d.top-d.bottom,_=w-d.left-d.right,x=Lo(g-d[y],v),k=Lo(w-d[E],_),L=!e.middlewareData.shift;let R=x,A=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=v),L&&!f){const P=Nr(d.left,0),D=Nr(d.right,0),O=Nr(d.top,0),C=Nr(d.bottom,0);m?A=w-2*(P!==0||D!==0?P+D:Nr(d.left,d.right)):R=g-2*(O!==0||C!==0?O+C:Nr(d.top,d.bottom))}await l({...e,availableWidth:A,availableHeight:R});const b=await o.getDimensions(a.floating);return w!==b.width||g!==b.height?{reset:{rects:!0}}:{}}}};function zp(){return typeof window<"u"}function qc(t){return WP(t)?(t.nodeName||"").toLowerCase():"#document"}function $r(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ni(t){var e;return(e=(WP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function WP(t){return zp()?t instanceof Node||t instanceof $r(t).Node:!1}function Ss(t){return zp()?t instanceof Element||t instanceof $r(t).Element:!1}function Zs(t){return zp()?t instanceof HTMLElement||t instanceof $r(t).HTMLElement:!1}function nS(t){return!zp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $r(t).ShadowRoot}const rj=new Set(["inline","contents"]);function dh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=bs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!rj.has(s)}const sj=new Set(["table","td","th"]);function ij(t){return sj.has(qc(t))}const oj=[":popover-open",":modal"];function Wp(t){return oj.some(e=>{try{return t.matches(e)}catch{return!1}})}const aj=["transform","translate","scale","rotate","perspective"],lj=["transform","translate","scale","rotate","perspective","filter"],cj=["paint","layout","strict","content"];function y0(t){const e=v0(),n=Ss(t)?bs(t):t;return aj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||lj.some(r=>(n.willChange||"").includes(r))||cj.some(r=>(n.contain||"").includes(r))}function uj(t){let e=Vo(t);for(;Zs(e)&&!gc(e);){if(y0(e))return e;if(Wp(e))return null;e=Vo(e)}return null}function v0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const dj=new Set(["html","body","#document"]);function gc(t){return dj.has(qc(t))}function bs(t){return $r(t).getComputedStyle(t)}function qp(t){return Ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vo(t){if(qc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||nS(t)&&t.host||ni(t);return nS(e)?e.host:e}function qP(t){const e=Vo(t);return gc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zs(e)&&dh(e)?e:qP(e)}function Dd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=qP(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=$r(s);if(i){const a=lw(o);return e.concat(o,o.visualViewport||[],dh(s)?s:[],a&&n?Dd(a):[])}return e.concat(s,Dd(s,[],n))}function lw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function HP(t){const e=bs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Zs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Nm(n)!==i||Nm(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function w0(t){return Ss(t)?t:t.contextElement}function Yl(t){const e=w0(t);if(!Zs(e))return Qs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=HP(e);let o=(i?Nm(n.width):n.width)/r,a=(i?Nm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const hj=Qs(0);function KP(t){const e=$r(t);return!v0()||!e.visualViewport?hj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$r(t)?!1:e}function Qa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=w0(t);let o=Qs(1);e&&(r?Ss(r)&&(o=Yl(r)):o=Yl(t));const a=fj(i,n,r)?KP(i):Qs(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=$r(i),m=r&&Ss(r)?$r(r):r;let w=f,g=lw(w);for(;g&&r&&m!==w;){const y=Yl(g),E=g.getBoundingClientRect(),v=bs(g),_=E.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,x=E.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,h*=y.y,l+=_,c+=x,w=$r(g),g=lw(w)}}return Lm({width:d,height:h,x:l,y:c})}function Hp(t,e){const n=qp(t).scrollLeft;return e?e.left+n:Qa(ni(t)).left+n}function GP(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Hp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function mj(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ni(r),a=e?Wp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Qs(1);const d=Qs(0),h=Zs(r);if((h||!h&&!i)&&((qc(r)!=="body"||dh(o))&&(l=qp(r)),Zs(r))){const m=Qa(r);c=Yl(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?GP(o,l):Qs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function pj(t){return Array.from(t.getClientRects())}function gj(t){const e=ni(t),n=qp(t),r=t.ownerDocument.body,s=Nr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Nr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Hp(t);const a=-n.scrollTop;return bs(r).direction==="rtl"&&(o+=Nr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const rS=25;function yj(t,e){const n=$r(t),r=ni(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=v0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Hp(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,w=Math.abs(r.clientWidth-h.clientWidth-m);w<=rS&&(i-=w)}else c<=rS&&(i+=c);return{width:i,height:o,x:a,y:l}}const vj=new Set(["absolute","fixed"]);function wj(t,e){const n=Qa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Zs(t)?Yl(t):Qs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function sS(t,e,n){let r;if(e==="viewport")r=yj(t,n);else if(e==="document")r=gj(ni(t));else if(Ss(e))r=wj(e,n);else{const s=KP(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Lm(r)}function QP(t,e){const n=Vo(t);return n===e||!Ss(n)||gc(n)?!1:bs(n).position==="fixed"||QP(n,e)}function _j(t,e){const n=e.get(t);if(n)return n;let r=Dd(t,[],!1).filter(a=>Ss(a)&&qc(a)!=="body"),s=null;const i=bs(t).position==="fixed";let o=i?Vo(t):t;for(;Ss(o)&&!gc(o);){const a=bs(o),l=y0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&vj.has(s.position)||dh(o)&&!l&&QP(t,o))?r=r.filter(d=>d!==o):s=a,o=Vo(o)}return e.set(t,r),r}function Ej(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Wp(e)?[]:_j(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=sS(e,d,s);return c.top=Nr(h.top,c.top),c.right=Lo(h.right,c.right),c.bottom=Lo(h.bottom,c.bottom),c.left=Nr(h.left,c.left),c},sS(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Tj(t){const{width:e,height:n}=HP(t);return{width:e,height:n}}function Ij(t,e,n){const r=Zs(e),s=ni(e),i=n==="fixed",o=Qa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Qs(0);function c(){l.x=Hp(s)}if(r||!r&&!i)if((qc(e)!=="body"||dh(s))&&(a=qp(e)),r){const m=Qa(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?GP(s,a):Qs(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Ty(t){return bs(t).position==="static"}function iS(t,e){if(!Zs(t)||bs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ni(t)===n&&(n=n.ownerDocument.body),n}function YP(t,e){const n=$r(t);if(Wp(t))return n;if(!Zs(t)){let s=Vo(t);for(;s&&!gc(s);){if(Ss(s)&&!Ty(s))return s;s=Vo(s)}return n}let r=iS(t,e);for(;r&&ij(r)&&Ty(r);)r=iS(r,e);return r&&gc(r)&&Ty(r)&&!y0(r)?n:r||uj(t)||n}const Sj=async function(t){const e=this.getOffsetParent||YP,n=this.getDimensions,r=await n(t.floating);return{reference:Ij(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bj(t){return bs(t).direction==="rtl"}const Aj={convertOffsetParentRelativeRectToViewportRelativeRect:mj,getDocumentElement:ni,getClippingRect:Ej,getOffsetParent:YP,getElementRects:Sj,getClientRects:pj,getDimensions:Tj,getScale:Yl,isElement:Ss,isRTL:bj};function JP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function xj(t,e){let n=null,r;const s=ni(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const w=of(h),g=of(s.clientWidth-(d+f)),y=of(s.clientHeight-(h+m)),E=of(d),_={rootMargin:-w+"px "+-g+"px "+-y+"px "+-E+"px",threshold:Nr(0,Lo(1,l))||1};let x=!0;function k(L){const R=L[0].intersectionRatio;if(R!==l){if(!x)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!JP(c,t.getBoundingClientRect())&&o(),x=!1}try{n=new IntersectionObserver(k,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,_)}n.observe(t)}return o(!0),i}function Rj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=w0(t),d=s||i?[...c?Dd(c):[],...Dd(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?xj(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(E=>{let[v]=E;v&&v.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let w,g=l?Qa(t):null;l&&y();function y(){const E=Qa(t);g&&!JP(g,E)&&n(),g=E,w=requestAnimationFrame(y)}return n(),()=>{var E;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(E=m)==null||E.disconnect(),m=null,l&&cancelAnimationFrame(w)}}const Pj=Z4,Cj=ej,kj=Y4,Dj=nj,Nj=J4,oS=Q4,Oj=tj,Lj=(t,e,n)=>{const r=new Map,s={platform:Aj,...n},i={...s.platform,_c:r};return G4(t,e,{...s,platform:i})};var Vj=typeof document<"u",Mj=function(){},$f=Vj?S.useLayoutEffect:Mj;function Vm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Vm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Vm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function XP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function aS(t,e){const n=XP(t);return Math.round(e*n)/n}function Iy(t){const e=S.useRef(t);return $f(()=>{e.current=t}),e}function Fj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=S.useState(r);Vm(f,r)||m(r);const[w,g]=S.useState(null),[y,E]=S.useState(null),v=S.useCallback(j=>{j!==L.current&&(L.current=j,g(j))},[]),_=S.useCallback(j=>{j!==R.current&&(R.current=j,E(j))},[]),x=i||w,k=o||y,L=S.useRef(null),R=S.useRef(null),A=S.useRef(d),b=l!=null,P=Iy(l),D=Iy(s),O=Iy(c),C=S.useCallback(()=>{if(!L.current||!R.current)return;const j={placement:e,strategy:n,middleware:f};D.current&&(j.platform=D.current),Lj(L.current,R.current,j).then(V=>{const te={...V,isPositioned:O.current!==!1};$.current&&!Vm(A.current,te)&&(A.current=te,ch.flushSync(()=>{h(te)}))})},[f,e,n,D,O]);$f(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[c]);const $=S.useRef(!1);$f(()=>($.current=!0,()=>{$.current=!1}),[]),$f(()=>{if(x&&(L.current=x),k&&(R.current=k),x&&k){if(P.current)return P.current(x,k,C);C()}},[x,k,C,P,b]);const ie=S.useMemo(()=>({reference:L,floating:R,setReference:v,setFloating:_}),[v,_]),oe=S.useMemo(()=>({reference:x,floating:k}),[x,k]),fe=S.useMemo(()=>{const j={position:n,left:0,top:0};if(!oe.floating)return j;const V=aS(oe.floating,d.x),te=aS(oe.floating,d.y);return a?{...j,transform:"translate("+V+"px, "+te+"px)",...XP(oe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:te}},[n,a,oe.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:C,refs:ie,elements:oe,floatingStyles:fe}),[d,C,ie,oe,fe])}const Uj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?oS({element:r.current,padding:s}).fn(n):{}:r?oS({element:r,padding:s}).fn(n):{}}}},jj=(t,e)=>({...Pj(t),options:[t,e]}),$j=(t,e)=>({...Cj(t),options:[t,e]}),Bj=(t,e)=>({...Oj(t),options:[t,e]}),zj=(t,e)=>({...kj(t),options:[t,e]}),Wj=(t,e)=>({...Dj(t),options:[t,e]}),qj=(t,e)=>({...Nj(t),options:[t,e]}),Hj=(t,e)=>({...Uj(t),options:[t,e]});var Kj="Arrow",ZP=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return T.jsx(tn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:T.jsx("polygon",{points:"0,0 30,0 15,10"})})});ZP.displayName=Kj;var Gj=ZP;function eC(t){const[e,n]=S.useState(void 0);return bi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var _0="Popper",[tC,nC]=Bc(_0),[Qj,rC]=tC(_0),sC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return T.jsx(Qj,{scope:e,anchor:r,onAnchorChange:s,children:n})};sC.displayName=_0;var iC="PopperAnchor",oC=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=rC(iC,n),o=S.useRef(null),a=$n(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:T.jsx(tn.div,{...s,ref:a})});oC.displayName=iC;var E0="PopperContent",[Yj,Jj]=tC(E0),aC=S.forwardRef((t,e)=>{var Ae,Yt,Xe,je,ze,Vt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:w,...g}=t,y=rC(E0,n),[E,v]=S.useState(null),_=$n(e,rn=>v(rn)),[x,k]=S.useState(null),L=eC(x),R=(L==null?void 0:L.width)??0,A=(L==null?void 0:L.height)??0,b=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(c)?c:[c],O=D.length>0,C={padding:P,boundary:D.filter(Zj),altBoundary:O},{refs:$,floatingStyles:ie,placement:oe,isPositioned:fe,middlewareData:j}=Fj({strategy:"fixed",placement:b,whileElementsMounted:(...rn)=>Rj(...rn,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[jj({mainAxis:s+A,alignmentAxis:o}),l&&$j({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Bj():void 0,...C}),l&&zj({...C}),Wj({...C,apply:({elements:rn,rects:Vn,availableWidth:Gr,availableHeight:In})=>{const{width:nr,height:Le}=Vn.reference,vt=rn.floating.style;vt.setProperty("--radix-popper-available-width",`${Gr}px`),vt.setProperty("--radix-popper-available-height",`${In}px`),vt.setProperty("--radix-popper-anchor-width",`${nr}px`),vt.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),x&&Hj({element:x,padding:a}),e3({arrowWidth:R,arrowHeight:A}),f&&qj({strategy:"referenceHidden",...C})]}),[V,te]=uC(oe),ae=Xs(w);bi(()=>{fe&&(ae==null||ae())},[fe,ae]);const Y=(Ae=j.arrow)==null?void 0:Ae.x,ke=(Yt=j.arrow)==null?void 0:Yt.y,Se=((Xe=j.arrow)==null?void 0:Xe.centerOffset)!==0,[De,Ye]=S.useState();return bi(()=>{E&&Ye(window.getComputedStyle(E).zIndex)},[E]),T.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:fe?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(je=j.transformOrigin)==null?void 0:je.x,(ze=j.transformOrigin)==null?void 0:ze.y].join(" "),...((Vt=j.hide)==null?void 0:Vt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:T.jsx(Yj,{scope:n,placedSide:V,onArrowChange:k,arrowX:Y,arrowY:ke,shouldHideArrow:Se,children:T.jsx(tn.div,{"data-side":V,"data-align":te,...g,ref:_,style:{...g.style,animation:fe?void 0:"none"}})})})});aC.displayName=E0;var lC="PopperArrow",Xj={top:"bottom",right:"left",bottom:"top",left:"right"},cC=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Jj(lC,r),o=Xj[i.placedSide];return T.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:T.jsx(Gj,{...s,ref:n,style:{...s.style,display:"block"}})})});cC.displayName=lC;function Zj(t){return t!==null}var e3=t=>({name:"transformOrigin",options:t,fn(e){var y,E,v;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=uC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,m=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let w="",g="";return c==="bottom"?(w=o?h:`${f}px`,g=`${-l}px`):c==="top"?(w=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(w=`${-l}px`,g=o?h:`${m}px`):c==="left"&&(w=`${r.floating.width+l}px`,g=o?h:`${m}px`),{data:{x:w,y:g}}}});function uC(t){const[e,n="center"]=t.split("-");return[e,n]}var wG=sC,t3=oC,n3=aC,r3=cC,[Kp]=Bc("Tooltip",[nC]),T0=nC(),dC="TooltipProvider",s3=700,lS="tooltip.open",[i3,hC]=Kp(dC),fC=t=>{const{__scopeTooltip:e,delayDuration:n=s3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),T.jsx(i3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};fC.displayName=dC;var mC="Tooltip",[_G,Gp]=Kp(mC),cw="TooltipTrigger",o3=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Gp(cw,n),i=hC(cw,n),o=T0(n),a=S.useRef(null),l=$n(e,a,s.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),T.jsx(t3,{asChild:!0,...o,children:T.jsx(tn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Nt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Nt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Nt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Nt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Nt(t.onBlur,s.onClose),onClick:Nt(t.onClick,s.onClose)})})});o3.displayName=cw;var a3="TooltipPortal",[EG,l3]=Kp(a3,{forceMount:void 0}),yc="TooltipContent",pC=S.forwardRef((t,e)=>{const n=l3(yc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Gp(yc,t.__scopeTooltip);return T.jsx(ll,{present:r||o.open,children:o.disableHoverableContent?T.jsx(gC,{side:s,...i,ref:e}):T.jsx(c3,{side:s,...i,ref:e})})}),c3=S.forwardRef((t,e)=>{const n=Gp(yc,t.__scopeTooltip),r=hC(yc,t.__scopeTooltip),s=S.useRef(null),i=$n(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=S.useCallback(()=>{a(null),h(!1)},[h]),m=S.useCallback((w,g)=>{const y=w.currentTarget,E={x:w.clientX,y:w.clientY},v=m3(E,y.getBoundingClientRect()),_=p3(E,v),x=g3(g.getBoundingClientRect()),k=v3([..._,...x]);a(k),h(!0)},[h]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&d){const w=y=>m(y,d),g=y=>m(y,l);return l.addEventListener("pointerleave",w),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",g)}}},[l,d,m,f]),S.useEffect(()=>{if(o){const w=g=>{const y=g.target,E={x:g.clientX,y:g.clientY},v=(l==null?void 0:l.contains(y))||(d==null?void 0:d.contains(y)),_=!y3(E,o);v?f():_&&(f(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,d,o,c,f]),T.jsx(gC,{...t,ref:i})}),[u3,d3]=Kp(mC,{isInside:!1}),h3=kM("TooltipContent"),gC=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Gp(yc,n),c=T0(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(lS,d),()=>document.removeEventListener(lS,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),T.jsx(jp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:T.jsxs(n3,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[T.jsx(h3,{children:r}),T.jsx(u3,{scope:n,isInside:!0,children:T.jsx(tF,{id:l.contentId,role:"tooltip",children:s||r})})]})})});pC.displayName=yc;var yC="TooltipArrow",f3=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=T0(n);return d3(yC,n).isInside?null:T.jsx(r3,{...s,...r,ref:e})});f3.displayName=yC;function m3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function p3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function g3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function y3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function v3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),w3(e)}function w3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var _3=fC,vC=pC;const E3=_3,T3=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>T.jsx(vC,{ref:r,sideOffset:e,className:Bn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));T3.displayName=vC.displayName;var Qp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},I3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},so,l_,wx,S3=(wx=class{constructor(){ht(this,so,I3);ht(this,l_,!1)}setTimeoutProvider(t){We(this,so,t)}setTimeout(t,e){return H(this,so).setTimeout(t,e)}clearTimeout(t){H(this,so).clearTimeout(t)}setInterval(t,e){return H(this,so).setInterval(t,e)}clearInterval(t){H(this,so).clearInterval(t)}},so=new WeakMap,l_=new WeakMap,wx),Mm=new S3;function b3(t){setTimeout(t,0)}var Yp=typeof window>"u"||"Deno"in globalThis;function ar(){}function A3(t,e){return typeof t=="function"?t(e):t}function x3(t){return typeof t=="number"&&t>=0&&t!==1/0}function R3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function uw(t,e){return typeof t=="function"?t(e):t}function P3(t,e){return typeof t=="function"?t(e):t}function cS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==I0(o,e.options))return!1}else if(!Od(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function uS(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Nd(e.options.mutationKey)!==Nd(i))return!1}else if(!Od(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function I0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Nd)(t)}function Nd(t){return JSON.stringify(t,(e,n)=>dw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Od(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Od(t[n],e[n])):!1}var C3=Object.prototype.hasOwnProperty;function wC(t,e){if(t===e)return t;const n=dS(t)&&dS(e);if(!n&&!(dw(t)&&dw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:C3.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=wC(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function TG(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function dS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function dw(t){if(!hS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hS(t){return Object.prototype.toString.call(t)==="[object Object]"}function k3(t){return new Promise(e=>{Mm.setTimeout(e,t)})}function D3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?wC(t,e):e}function N3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function O3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var S0=Symbol();function _C(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===S0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function IG(t,e){return typeof t=="function"?t(...e):!!t}var Da,io,tc,_x,L3=(_x=class extends Qp{constructor(){super();ht(this,Da);ht(this,io);ht(this,tc);We(this,tc,e=>{if(!Yp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,io)||this.setEventListener(H(this,tc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,io))==null||e.call(this),We(this,io,void 0))}setEventListener(e){var n;We(this,tc,e),(n=H(this,io))==null||n.call(this),We(this,io,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){H(this,Da)!==e&&(We(this,Da,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof H(this,Da)=="boolean"?H(this,Da):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Da=new WeakMap,io=new WeakMap,tc=new WeakMap,_x),EC=new L3;function V3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function M3(t){var n;let e;if((n=t.then(r=>(e=r,r),ar))==null||n.catch(ar),e!==void 0)return{data:e}}function TC(t){return t}function F3(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function U3(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(ar),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function j3(t){return t.state.isPaused}function $3(t){return t.state.status==="success"}function B3(t){return!0}function z3(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??j3,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[F3(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??$3,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??B3,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??TC,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[U3(f,o,i)]:[]);return{mutations:r,queries:a}}function W3(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??TC,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:m,promise:w,dehydratedAt:g})=>{var L,R;const y=w?M3(w):void 0,E=h.data===void 0?y==null?void 0:y.data:h.data,v=E===void 0?E:i(E);let _=s.get(f);const x=(_==null?void 0:_.state.status)==="pending",k=(_==null?void 0:_.state.fetchStatus)==="fetching";if(_){const A=y&&g!==void 0&&g>_.state.dataUpdatedAt;if(h.dataUpdatedAt>_.state.dataUpdatedAt||A){const{fetchStatus:b,...P}=h;_.setState({...P,data:v})}}else _=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(R=n==null?void 0:n.defaultOptions)==null?void 0:R.queries,queryKey:d,queryHash:f,meta:m},{...h,data:v,fetchStatus:"idle",status:v!==void 0?"success":h.status});w&&!x&&!k&&(g===void 0||g>_.state.dataUpdatedAt)&&_.fetch(void 0,{initialPromise:Promise.resolve(w).then(i)}).catch(ar)})}var q3=b3;function H3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=q3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var lr=H3(),nc,oo,rc,Ex,K3=(Ex=class extends Qp{constructor(){super();ht(this,nc,!0);ht(this,oo);ht(this,rc);We(this,rc,e=>{if(!Yp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,oo)||this.setEventListener(H(this,rc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,oo))==null||e.call(this),We(this,oo,void 0))}setEventListener(e){var n;We(this,rc,e),(n=H(this,oo))==null||n.call(this),We(this,oo,e(this.setOnline.bind(this)))}setOnline(e){H(this,nc)!==e&&(We(this,nc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return H(this,nc)}},nc=new WeakMap,oo=new WeakMap,rc=new WeakMap,Ex),Fm=new K3;function G3(t){return Math.min(1e3*2**t,3e4)}function IC(t){return(t??"online")==="online"?Fm.isOnline():!0}var hw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function SC(t){let e=!1,n=0,r;const s=V3(),i=()=>s.status!=="pending",o=g=>{var y;if(!i()){const E=new hw(g);f(E),(y=t.onCancel)==null||y.call(t,E)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>EC.isFocused()&&(t.networkMode==="always"||Fm.isOnline())&&t.canRun(),d=()=>IC(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},m=()=>new Promise(g=>{var y;r=E=>{(i()||c())&&g(E)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),w=()=>{if(i())return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(E){g=Promise.reject(E)}Promise.resolve(g).then(h).catch(E=>{var L;if(i())return;const v=t.retry??(Yp?0:3),_=t.retryDelay??G3,x=typeof _=="function"?_(n,E):_,k=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,E);if(e||!k){f(E);return}n++,(L=t.onFail)==null||L.call(t,n,E),k3(x).then(()=>c()?void 0:m()).then(()=>{e?f(E):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():m().then(w),s)}}var Na,Tx,bC=(Tx=class{constructor(){ht(this,Na)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),x3(this.gcTime)&&We(this,Na,Mm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yp?1/0:5*60*1e3))}clearGcTimeout(){H(this,Na)&&(Mm.clearTimeout(H(this,Na)),We(this,Na,void 0))}},Na=new WeakMap,Tx),Oa,sc,es,La,kn,th,Va,hs,ai,Ix,Q3=(Ix=class extends bC{constructor(n){super();ht(this,hs);ht(this,Oa);ht(this,sc);ht(this,es);ht(this,La);ht(this,kn);ht(this,th);ht(this,Va);We(this,Va,!1),We(this,th,n.defaultOptions),this.setOptions(n.options),this.observers=[],We(this,La,n.client),We(this,es,H(this,La).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,We(this,Oa,mS(this.options)),this.state=n.state??H(this,Oa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=H(this,kn))==null?void 0:n.promise}setOptions(n){if(this.options={...H(this,th),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=mS(this.options);r.data!==void 0&&(this.setState(fS(r.data,r.dataUpdatedAt)),We(this,Oa,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,es).remove(this)}setData(n,r){const s=D3(this.state.data,n,this.options);return Wn(this,hs,ai).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Wn(this,hs,ai).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=H(this,kn))==null?void 0:s.promise;return(i=H(this,kn))==null||i.cancel(n),r?r.then(ar).catch(ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Oa))}isActive(){return this.observers.some(n=>P3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===S0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>uw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!R3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,kn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,kn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),H(this,es).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(H(this,kn)&&(H(this,Va)?H(this,kn).cancel({revert:!0}):H(this,kn).cancelRetry()),this.scheduleGc()),H(this,es).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wn(this,hs,ai).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,w,g,y,E,v,_,x;if(this.state.fetchStatus!=="idle"&&((c=H(this,kn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,kn))return H(this,kn).continueRetry(),H(this,kn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const k=this.observers.find(L=>L.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,i=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(We(this,Va,!0),s.signal)})},o=()=>{const k=_C(this.options,r),R=(()=>{const A={client:H(this,La),queryKey:this.queryKey,meta:this.meta};return i(A),A})();return We(this,Va,!1),this.options.persister?this.options.persister(k,R,this):k(R)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,La),state:this.state,fetchFn:o};return i(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),We(this,sc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Wn(this,hs,ai).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),We(this,kn,SC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof hw&&k.revert&&this.setState({...H(this,sc),fetchStatus:"idle"}),s.abort()},onFail:(k,L)=>{Wn(this,hs,ai).call(this,{type:"failed",failureCount:k,error:L})},onPause:()=>{Wn(this,hs,ai).call(this,{type:"pause"})},onContinue:()=>{Wn(this,hs,ai).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await H(this,kn).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(w=(m=H(this,es).config).onSuccess)==null||w.call(m,k,this),(y=(g=H(this,es).config).onSettled)==null||y.call(g,k,this.state.error,this),k}catch(k){if(k instanceof hw){if(k.silent)return H(this,kn).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Wn(this,hs,ai).call(this,{type:"error",error:k}),(v=(E=H(this,es).config).onError)==null||v.call(E,k,this),(x=(_=H(this,es).config).onSettled)==null||x.call(_,this.state.data,k,this),k}finally{this.scheduleGc()}}},Oa=new WeakMap,sc=new WeakMap,es=new WeakMap,La=new WeakMap,kn=new WeakMap,th=new WeakMap,Va=new WeakMap,hs=new WeakSet,ai=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Y3(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...fS(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return We(this,sc,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),lr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,es).notify({query:this,type:"updated",action:n})})},Ix);function Y3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:IC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fS(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function mS(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function pS(t){return{onFetch:(e,n)=>{var d,h,f,m,w;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const y=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},E=_C(e.options,e.fetchOptions),v=async(_,x,k)=>{if(g)return Promise.reject();if(x==null&&_.pages.length)return Promise.resolve(_);const R=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:x,direction:k?"backward":"forward",meta:e.options.meta};return y(D),D})(),A=await E(R),{maxPages:b}=e.options,P=k?O3:N3;return{pages:P(_.pages,A,b),pageParams:P(_.pageParams,x,b)}};if(s&&i.length){const _=s==="backward",x=_?J3:gS,k={pages:i,pageParams:o},L=x(r,k);a=await v(k,L,_)}else{const _=t??i.length;do{const x=l===0?o[0]??r.initialPageParam:gS(r,a);if(l>0&&x==null)break;a=await v(a,x),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function gS(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function J3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var nh,Ms,ir,Ma,Fs,Yi,Sx,X3=(Sx=class extends bC{constructor(n){super();ht(this,Fs);ht(this,nh);ht(this,Ms);ht(this,ir);ht(this,Ma);We(this,nh,n.client),this.mutationId=n.mutationId,We(this,ir,n.mutationCache),We(this,Ms,[]),this.state=n.state||Z3(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){H(this,Ms).includes(n)||(H(this,Ms).push(n),this.clearGcTimeout(),H(this,ir).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){We(this,Ms,H(this,Ms).filter(r=>r!==n)),this.scheduleGc(),H(this,ir).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){H(this,Ms).length||(this.state.status==="pending"?this.scheduleGc():H(this,ir).remove(this))}continue(){var n;return((n=H(this,Ma))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,w,g,y,E,v,_,x,k,L,R,A,b,P;const r=()=>{Wn(this,Fs,Yi).call(this,{type:"continue"})},s={client:H(this,nh),meta:this.options.meta,mutationKey:this.options.mutationKey};We(this,Ma,SC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,O)=>{Wn(this,Fs,Yi).call(this,{type:"failed",failureCount:D,error:O})},onPause:()=>{Wn(this,Fs,Yi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,ir).canRun(this)}));const i=this.state.status==="pending",o=!H(this,Ma).canStart();try{if(i)r();else{Wn(this,Fs,Yi).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=H(this,ir).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&Wn(this,Fs,Yi).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const D=await H(this,Ma).start();return await((f=(h=H(this,ir).config).onSuccess)==null?void 0:f.call(h,D,n,this.state.context,this,s)),await((w=(m=this.options).onSuccess)==null?void 0:w.call(m,D,n,this.state.context,s)),await((y=(g=H(this,ir).config).onSettled)==null?void 0:y.call(g,D,null,this.state.variables,this.state.context,this,s)),await((v=(E=this.options).onSettled)==null?void 0:v.call(E,D,null,n,this.state.context,s)),Wn(this,Fs,Yi).call(this,{type:"success",data:D}),D}catch(D){try{throw await((x=(_=H(this,ir).config).onError)==null?void 0:x.call(_,D,n,this.state.context,this,s)),await((L=(k=this.options).onError)==null?void 0:L.call(k,D,n,this.state.context,s)),await((A=(R=H(this,ir).config).onSettled)==null?void 0:A.call(R,void 0,D,this.state.variables,this.state.context,this,s)),await((P=(b=this.options).onSettled)==null?void 0:P.call(b,void 0,D,n,this.state.context,s)),D}finally{Wn(this,Fs,Yi).call(this,{type:"error",error:D})}}finally{H(this,ir).runNext(this)}}},nh=new WeakMap,Ms=new WeakMap,ir=new WeakMap,Ma=new WeakMap,Fs=new WeakSet,Yi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),lr.batch(()=>{H(this,Ms).forEach(s=>{s.onMutationUpdate(n)}),H(this,ir).notify({mutation:this,type:"updated",action:n})})},Sx);function Z3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ui,fs,rh,bx,e6=(bx=class extends Qp{constructor(e={}){super();ht(this,ui);ht(this,fs);ht(this,rh);this.config=e,We(this,ui,new Set),We(this,fs,new Map),We(this,rh,0)}build(e,n,r){const s=new X3({client:e,mutationCache:this,mutationId:++Fh(this,rh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){H(this,ui).add(e);const n=af(e);if(typeof n=="string"){const r=H(this,fs).get(n);r?r.push(e):H(this,fs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(H(this,ui).delete(e)){const n=af(e);if(typeof n=="string"){const r=H(this,fs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&H(this,fs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=af(e);if(typeof n=="string"){const r=H(this,fs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=af(e);if(typeof n=="string"){const s=(r=H(this,fs).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){lr.batch(()=>{H(this,ui).forEach(e=>{this.notify({type:"removed",mutation:e})}),H(this,ui).clear(),H(this,fs).clear()})}getAll(){return Array.from(H(this,ui))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>uS(n,r))}findAll(e={}){return this.getAll().filter(n=>uS(e,n))}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return lr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ar))))}},ui=new WeakMap,fs=new WeakMap,rh=new WeakMap,bx);function af(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Us,Ax,t6=(Ax=class extends Qp{constructor(e={}){super();ht(this,Us);this.config=e,We(this,Us,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??I0(s,n);let o=this.get(i);return o||(o=new Q3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){H(this,Us).has(e.queryHash)||(H(this,Us).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=H(this,Us).get(e.queryHash);n&&(e.destroy(),n===e&&H(this,Us).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){lr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return H(this,Us).get(e)}getAll(){return[...H(this,Us).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>cS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>cS(e,r)):n}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){lr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){lr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Us=new WeakMap,Ax),on,ao,lo,ic,oc,co,ac,lc,xx,n6=(xx=class{constructor(t={}){ht(this,on);ht(this,ao);ht(this,lo);ht(this,ic);ht(this,oc);ht(this,co);ht(this,ac);ht(this,lc);We(this,on,t.queryCache||new t6),We(this,ao,t.mutationCache||new e6),We(this,lo,t.defaultOptions||{}),We(this,ic,new Map),We(this,oc,new Map),We(this,co,0)}mount(){Fh(this,co)._++,H(this,co)===1&&(We(this,ac,EC.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,on).onFocus())})),We(this,lc,Fm.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,on).onOnline())})))}unmount(){var t,e;Fh(this,co)._--,H(this,co)===0&&((t=H(this,ac))==null||t.call(this),We(this,ac,void 0),(e=H(this,lc))==null||e.call(this),We(this,lc,void 0))}isFetching(t){return H(this,on).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,ao).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,on).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=H(this,on).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(uw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return H(this,on).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=H(this,on).get(r.queryHash),i=s==null?void 0:s.state.data,o=A3(e,i);if(o!==void 0)return H(this,on).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return lr.batch(()=>H(this,on).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,on).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=H(this,on);lr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=H(this,on);return lr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=lr.batch(()=>H(this,on).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ar).catch(ar)}invalidateQueries(t,e={}){return lr.batch(()=>(H(this,on).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=lr.batch(()=>H(this,on).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ar)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ar)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=H(this,on).build(this,e);return n.isStaleByTime(uw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ar).catch(ar)}fetchInfiniteQuery(t){return t.behavior=pS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ar).catch(ar)}ensureInfiniteQueryData(t){return t.behavior=pS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Fm.isOnline()?H(this,ao).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,on)}getMutationCache(){return H(this,ao)}getDefaultOptions(){return H(this,lo)}setDefaultOptions(t){We(this,lo,t)}setQueryDefaults(t,e){H(this,ic).set(Nd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...H(this,ic).values()],n={};return e.forEach(r=>{Od(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){H(this,oc).set(Nd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...H(this,oc).values()],n={};return e.forEach(r=>{Od(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...H(this,lo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=I0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===S0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,lo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,on).clear(),H(this,ao).clear()}},on=new WeakMap,ao=new WeakMap,lo=new WeakMap,ic=new WeakMap,oc=new WeakMap,co=new WeakMap,ac=new WeakMap,lc=new WeakMap,xx),AC=S.createContext(void 0),AG=t=>{const e=S.useContext(AC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},r6=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),T.jsx(AC.Provider,{value:t,children:e})),s6=["added","removed","updated"];function yS(t){return s6.includes(t)}async function i6({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();W3(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function vS({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:z3(t,r)};await e.persistClient(s)}function o6(t){const e=t.queryClient.getQueryCache().subscribe(r=>{yS(r.type)&&vS(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{yS(r.type)&&vS(t)});return()=>{e(),n()}}function a6(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=i6(t).then(()=>{e||(n=o6(t))});return[r,s]}function Sy(){}function l6({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:c6(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Sy,restoreClient:Sy,removeClient:Sy}}function c6(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Mm.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ld(){return Ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ld.apply(this,arguments)}var fo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fo||(fo={}));const wS="popstate";function u6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Um("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vd(s)}return xC(e,n,null,t)}function d6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=cl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Um("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Vd(i))}function r(s,i){b0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return xC(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function b0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h6(){return Math.random().toString(36).substr(2,8)}function _S(t,e){return{usr:t.state,key:t.key,idx:e}}function Um(t,e,n,r){return n===void 0&&(n=null),Ld({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?cl(e):e,{state:n,key:e&&e.key||r||h6()})}function Vd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function cl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=fo.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ld({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=fo.Pop;let y=d(),E=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:E})}function f(y,E){a=fo.Push;let v=Um(g.location,y,E);n&&n(v,y),c=d()+1;let _=_S(v,c),x=g.createHref(v);try{o.pushState(_,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(x)}i&&l&&l({action:a,location:g.location,delta:1})}function m(y,E){a=fo.Replace;let v=Um(g.location,y,E);n&&n(v,y),c=d();let _=_S(v,c),x=g.createHref(v);o.replaceState(_,"",x),i&&l&&l({action:a,location:g.location,delta:0})}function w(y){let E=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:Vd(y);return v=v.replace(/ $/,"%20"),pn(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(wS,h),l=y,()=>{s.removeEventListener(wS,h),l=null}},createHref(y){return e(s,y)},createURL:w,encodeLocation(y){let E=w(y);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(y){return o.go(y)}};return g}var ES;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ES||(ES={}));function f6(t,e,n){return n===void 0&&(n="/"),m6(t,e,n)}function m6(t,e,n,r){let s=typeof e=="string"?cl(e):e,i=A0(s.pathname||"/",n);if(i==null)return null;let o=RC(t);p6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=x6(i);a=S6(o[l],c)}return a}function RC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=bo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(pn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),RC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:T6(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of PC(i.path))s(i,o,l)}),e}function PC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=PC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function p6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:I6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const g6=/^:[\w-]+$/,y6=3,v6=2,w6=1,_6=10,E6=-2,TS=t=>t==="*";function T6(t,e){let n=t.split("/"),r=n.length;return n.some(TS)&&(r+=E6),e&&(r+=v6),n.filter(s=>!TS(s)).reduce((s,i)=>s+(g6.test(i)?y6:i===""?w6:_6),r)}function I6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function S6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=b6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:bo([i,h.pathname]),pathnameBase:k6(bo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=bo([i,h.pathnameBase]))}return o}function b6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=A6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const w=a[h];return m&&!w?c[f]=void 0:c[f]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function A6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),b0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function x6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return b0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function A0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function R6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?cl(t):t;return{pathname:n?n.startsWith("/")?n:P6(n,e):e,search:D6(r),hash:N6(s)}}function P6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function by(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function C6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function x0(t,e){let n=C6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function R0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=cl(t):(s=Ld({},t),pn(!s.pathname||!s.pathname.includes("?"),by("?","pathname","search",s)),pn(!s.pathname||!s.pathname.includes("#"),by("#","pathname","hash",s)),pn(!s.search||!s.search.includes("#"),by("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=R6(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const bo=t=>t.join("/").replace(/\/\/+/g,"/"),k6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,N6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function O6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CC=["post","put","patch","delete"];new Set(CC);const L6=["get",...CC];new Set(L6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Md.apply(this,arguments)}const P0=S.createContext(null),V6=S.createContext(null),Go=S.createContext(null),Jp=S.createContext(null),Ni=S.createContext({outlet:null,matches:[],isDataRoute:!1}),kC=S.createContext(null);function M6(t,e){let{relative:n}=e===void 0?{}:e;Hc()||pn(!1);let{basename:r,navigator:s}=S.useContext(Go),{hash:i,pathname:o,search:a}=NC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:bo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Hc(){return S.useContext(Jp)!=null}function ri(){return Hc()||pn(!1),S.useContext(Jp).location}function DC(t){S.useContext(Go).static||S.useLayoutEffect(t)}function Kc(){let{isDataRoute:t}=S.useContext(Ni);return t?Y6():F6()}function F6(){Hc()||pn(!1);let t=S.useContext(P0),{basename:e,future:n,navigator:r}=S.useContext(Go),{matches:s}=S.useContext(Ni),{pathname:i}=ri(),o=JSON.stringify(x0(s,n.v7_relativeSplatPath)),a=S.useRef(!1);return DC(()=>{a.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=R0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:bo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function xG(){let{matches:t}=S.useContext(Ni),e=t[t.length-1];return e?e.params:{}}function NC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(Go),{matches:s}=S.useContext(Ni),{pathname:i}=ri(),o=JSON.stringify(x0(s,r.v7_relativeSplatPath));return S.useMemo(()=>R0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function U6(t,e){return j6(t,e)}function j6(t,e,n,r){Hc()||pn(!1);let{navigator:s}=S.useContext(Go),{matches:i}=S.useContext(Ni),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ri(),d;if(e){var h;let y=typeof e=="string"?cl(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||pn(!1),d=y}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=f6(t,{pathname:m}),g=q6(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:bo([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:bo([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?S.createElement(Jp.Provider,{value:{location:Md({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fo.Pop}},g):g}function $6(){let t=Q6(),e=O6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const B6=S.createElement($6,null);class z6 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ni.Provider,{value:this.props.routeContext},S.createElement(kC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function W6(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(P0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ni.Provider,{value:e},r)}function q6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||pn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,w=!1,g=null,y=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||B6,l&&(c<0&&f===0?(J6("route-fallback"),w=!0,y=null):c===f&&(w=!0,y=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),v=()=>{let _;return m?_=g:w?_=y:h.route.Component?_=S.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,S.createElement(W6,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(z6,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var OC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OC||{}),LC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(LC||{});function H6(t){let e=S.useContext(P0);return e||pn(!1),e}function K6(t){let e=S.useContext(V6);return e||pn(!1),e}function G6(t){let e=S.useContext(Ni);return e||pn(!1),e}function VC(t){let e=G6(),n=e.matches[e.matches.length-1];return n.route.id||pn(!1),n.route.id}function Q6(){var t;let e=S.useContext(kC),n=K6(),r=VC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Y6(){let{router:t}=H6(OC.UseNavigateStable),e=VC(LC.UseNavigateStable),n=S.useRef(!1);return DC(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Md({fromRouteId:e},i)))},[t,e])}const IS={};function J6(t,e,n){IS[t]||(IS[t]=!0)}function MC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function RG(t){let{to:e,replace:n,state:r,relative:s}=t;Hc()||pn(!1);let{future:i,static:o}=S.useContext(Go),{matches:a}=S.useContext(Ni),{pathname:l}=ri(),c=Kc(),d=R0(e,x0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function be(t){pn(!1)}function FC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=fo.Pop,navigator:i,static:o=!1,future:a}=t;Hc()&&pn(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Md({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=cl(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:w="default"}=r,g=S.useMemo(()=>{let y=A0(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:w},navigationType:s}},[l,d,h,f,m,w,s]);return g==null?null:S.createElement(Go.Provider,{value:c},S.createElement(Jp.Provider,{children:n,value:g}))}function SS(t){let{children:e,location:n}=t;return U6(fw(e),n)}new Promise(()=>{});function fw(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,fw(r.props.children,i));return}r.type!==be&&pn(!1),!r.props.index||!r.props.children||pn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mw(){return mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mw.apply(this,arguments)}function X6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Z6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function e$(t,e){return t.button===0&&(!e||e==="_self")&&!Z6(t)}function pw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function t$(t,e){let n=pw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const n$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],r$="6";try{window.__reactRouterVersion=r$}catch{}const s$="startTransition",jm=f_[s$];function i$(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=u6({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&jm?jm(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>MC(r),[r]),S.createElement(FC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function o$(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=d6({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&jm?jm(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>MC(r),[r]),S.createElement(FC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const a$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c$=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=X6(e,n$),{basename:m}=S.useContext(Go),w,g=!1;if(typeof c=="string"&&l$.test(c)&&(w=c,a$))try{let _=new URL(window.location.href),x=c.startsWith("//")?new URL(_.protocol+c):new URL(c),k=A0(x.pathname,m);x.origin===_.origin&&k!=null?c=k+x.search+x.hash:g=!0}catch{}let y=M6(c,{relative:s}),E=u$(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function v(_){r&&r(_),_.defaultPrevented||E(_)}return S.createElement("a",mw({},f,{href:w||y,onClick:g||i?r:v,ref:n,target:l}))});var bS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bS||(bS={}));var AS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(AS||(AS={}));function u$(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Kc(),c=ri(),d=NC(t,{relative:o});return S.useCallback(h=>{if(e$(h,n)){h.preventDefault();let f=r!==void 0?r:Vd(c)===Vd(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function PG(t){let e=S.useRef(pw(t)),n=S.useRef(!1),r=ri(),s=S.useMemo(()=>t$(r.search,n.current?null:e.current),[r.search]),i=Kc(),o=S.useCallback((a,l)=>{const c=pw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const UC=S.createContext(void 0),d$=({children:t})=>{const[e,n]=S.useState("medium"),[r,s]=S.useState(!1),[i,o]=S.useState(!1);S.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),S.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),S.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),S.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return T.jsx(UC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},CG=()=>{const t=S.useContext(UC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},h$=RP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),us=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?PM:"button";return T.jsx(o,{className:Bn(h$({variant:e,size:n,className:t})),ref:i,...s})});us.displayName="Button";const gw=S.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),T.jsx("input",{type:e,className:Bn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});gw.displayName="Input";const f$=()=>{};var xS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},m$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},C0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):m$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new p$;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class p$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g$=function(t){const e=jC(t);return C0.encodeByteArray(e,!0)},$m=function(t){return g$(t).replace(/\./g,"")},$C=function(t){try{return C0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=()=>BC().__FIREBASE_DEFAULTS__,v$=()=>{if(typeof process>"u"||typeof xS>"u")return;const t=xS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},w$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$C(t[1]);return e&&JSON.parse(e)},Xp=()=>{try{return f$()||y$()||v$()||w$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_$=t=>{var e,n;return(n=(e=Xp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},zC=t=>{const e=_$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},WC=()=>{var t;return(t=Xp())==null?void 0:t.config},E$=t=>{var e;return(e=Xp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$m(JSON.stringify(n)),$m(JSON.stringify(o)),""].join(".")}const ed={};function I$(){const t={prod:[],emulator:[]};for(const e of Object.keys(ed))ed[e]?t.emulator.push(e):t.prod.push(e);return t}function S$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let RS=!1;function qC(t,e){if(typeof window>"u"||typeof document>"u"||!Oi(window.location.host)||ed[t]===e||ed[t]||RS)return;ed[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=I$().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{RS=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=S$(r),m=n("text"),w=document.getElementById(m)||document.createElement("span"),g=n("learnmore"),y=document.getElementById(g)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;a(_),d(y,g);const x=c();l(v,E),_.append(v,w,y,x),document.body.appendChild(_)}i?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function HC(){var e;const t=(e=Xp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function R$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function P$(){const t=zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KC(){return!HC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GC(){return!HC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function D0(){try{return typeof indexedDB=="object"}catch{return!1}}function C$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$="FirebaseError";class Rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k$,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?D$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Rs(s,a,r)}}function D$(t,e){return t.replace(N$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const N$=/\{\$([^}]+)}/g;function vc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(PS(i)&&PS(o)){if(!vc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function PS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Mu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function O$(t,e){const n=new L$(t,e);return n.subscribe.bind(n)}class L${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ay),s.error===void 0&&(s.error=Ay),s.complete===void 0&&(s.complete=Ay);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ay(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U$(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F$(t){return t===la?void 0:t}function U$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new M$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const $$={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},B$=at.INFO,z$={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},W$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=z$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zp{constructor(e){this.name=e,this._logLevel=B$,this._logHandler=W$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const q$=(t,e)=>e.some(n=>t instanceof n);let CS,kS;function H$(){return CS||(CS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K$(){return kS||(kS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YC=new WeakMap,vw=new WeakMap,JC=new WeakMap,xy=new WeakMap,N0=new WeakMap;function G$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ao(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&YC.set(n,t)}).catch(()=>{}),N0.set(e,t),e}function Q$(t){if(vw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});vw.set(t,e)}let ww={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Y$(t){ww=t(ww)}function J$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ry(this),e,...n);return JC.set(r,e.sort?e.sort():[e]),Ao(r)}:K$().includes(t)?function(...e){return t.apply(Ry(this),e),Ao(YC.get(this))}:function(...e){return Ao(t.apply(Ry(this),e))}}function X$(t){return typeof t=="function"?J$(t):(t instanceof IDBTransaction&&Q$(t),q$(t,H$())?new Proxy(t,ww):t)}function Ao(t){if(t instanceof IDBRequest)return G$(t);if(xy.has(t))return xy.get(t);const e=X$(t);return e!==t&&(xy.set(t,e),N0.set(e,t)),e}const Ry=t=>N0.get(t);function Z$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ao(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ao(o.result),l.oldVersion,l.newVersion,Ao(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const e5=["get","getKey","getAll","getAllKeys","count"],t5=["put","add","delete","clear"],Py=new Map;function DS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Py.get(e))return Py.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=t5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||e5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Py.set(e,i),i}Y$(t=>({...t,get:(e,n,r)=>DS(e,n)||t.get(e,n,r),has:(e,n)=>!!DS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _w="@firebase/app",NS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Zp("@firebase/app"),s5="@firebase/app-compat",i5="@firebase/analytics-compat",o5="@firebase/analytics",a5="@firebase/app-check-compat",l5="@firebase/app-check",c5="@firebase/auth",u5="@firebase/auth-compat",d5="@firebase/database",h5="@firebase/data-connect",f5="@firebase/database-compat",m5="@firebase/functions",p5="@firebase/functions-compat",g5="@firebase/installations",y5="@firebase/installations-compat",v5="@firebase/messaging",w5="@firebase/messaging-compat",_5="@firebase/performance",E5="@firebase/performance-compat",T5="@firebase/remote-config",I5="@firebase/remote-config-compat",S5="@firebase/storage",b5="@firebase/storage-compat",A5="@firebase/firestore",x5="@firebase/ai",R5="@firebase/firestore-compat",P5="firebase",C5="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="[DEFAULT]",k5={[_w]:"fire-core",[s5]:"fire-core-compat",[o5]:"fire-analytics",[i5]:"fire-analytics-compat",[l5]:"fire-app-check",[a5]:"fire-app-check-compat",[c5]:"fire-auth",[u5]:"fire-auth-compat",[d5]:"fire-rtdb",[h5]:"fire-data-connect",[f5]:"fire-rtdb-compat",[m5]:"fire-fn",[p5]:"fire-fn-compat",[g5]:"fire-iid",[y5]:"fire-iid-compat",[v5]:"fire-fcm",[w5]:"fire-fcm-compat",[_5]:"fire-perf",[E5]:"fire-perf-compat",[T5]:"fire-rc",[I5]:"fire-rc-compat",[S5]:"fire-gcs",[b5]:"fire-gcs-compat",[A5]:"fire-fst",[R5]:"fire-fst-compat",[x5]:"fire-vertex","fire-js":"fire-js",[P5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map,D5=new Map,Tw=new Map;function OS(t,e){try{t.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Tw.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Tw.set(e,t);for(const n of Bm.values())OS(n,t);for(const n of D5.values())OS(n,t);return!0}function eg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Or(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new Gc("app","Firebase",N5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=C5;function XC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ew,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xo.create("bad-app-name",{appName:String(s)});if(n||(n=WC()),!n)throw xo.create("no-options");const i=Bm.get(s);if(i){if(vc(n,i.options)&&vc(r,i.config))return i;throw xo.create("duplicate-app",{appName:s})}const o=new j$(s);for(const l of Tw.values())o.addComponent(l);const a=new O5(n,r,o);return Bm.set(s,a),a}function ZC(t=Ew){const e=Bm.get(t);if(!e&&t===Ew&&WC())return XC();if(!e)throw xo.create("no-app",{appName:t});return e}function Br(t,e,n){let r=k5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(o.join(" "));return}ei(new As(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="firebase-heartbeat-database",V5=1,Fd="firebase-heartbeat-store";let Cy=null;function ek(){return Cy||(Cy=Z$(L5,V5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fd)}catch(n){console.warn(n)}}}}).catch(t=>{throw xo.create("idb-open",{originalErrorMessage:t.message})})),Cy}async function M5(t){try{const n=(await ek()).transaction(Fd),r=await n.objectStore(Fd).get(tk(t));return await n.done,r}catch(e){if(e instanceof Rs)Ri.warn(e.message);else{const n=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(n.message)}}}async function LS(t,e){try{const r=(await ek()).transaction(Fd,"readwrite");await r.objectStore(Fd).put(e,tk(t)),await r.done}catch(n){if(n instanceof Rs)Ri.warn(n.message);else{const r=xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ri.warn(r.message)}}}function tk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=1024,U5=30;class j5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new B5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=VS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>U5){const o=z5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ri.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=VS(),{heartbeatsToSend:r,unsentEntries:s}=$5(this._heartbeatsCache.heartbeats),i=$m(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ri.warn(n),""}}}function VS(){return new Date().toISOString().substring(0,10)}function $5(t,e=F5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),MS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),MS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class B5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D0()?C$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await M5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return LS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return LS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function MS(t){return $m(JSON.stringify({version:2,heartbeats:t})).length}function z5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){ei(new As("platform-logger",e=>new n5(e),"PRIVATE")),ei(new As("heartbeat",e=>new j5(e),"PRIVATE")),Br(_w,NS,t),Br(_w,NS,"esm2020"),Br("fire-js","")}W5("");function nk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q5=nk,rk=new Gc("auth","Firebase",nk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Zp("@firebase/auth");function H5(t,...e){zm.logLevel<=at.WARN&&zm.warn(`Auth (${hh}): ${t}`,...e)}function Bf(t,...e){zm.logLevel<=at.ERROR&&zm.error(`Auth (${hh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t,...e){throw L0(t,...e)}function O0(t,...e){return L0(t,...e)}function sk(t,e,n){const r={...q5(),[e]:n};return new Gc("auth","Firebase",r).create(e,{appName:t.name})}function Ro(t){return sk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rk.create(t,...e)}function lt(t,e,...n){if(!t)throw L0(e,...n)}function mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bf(e),new Error(e)}function Wm(t,e){t||mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ik(){return FS()==="http:"||FS()==="https:"}function FS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ik()||x$()||"connection"in navigator)?navigator.onLine:!0}function Q5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wm(n>e,"Short delay should be less than long delay!"),this.isMobile=b$()||R$()}get(){return G5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t,e){Wm(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z5=new fh(3e4,6e4);function Li(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function si(t,e,n,r,s={}){return ak(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=QC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return A$()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(c.credentials="include"),ok.fetch()(await lk(t,t.config.apiHost,n,a),c)})}async function ak(t,e,n){t._canInitEmulator=!1;const r={...J5,...e};try{const s=new tB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw lf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw lf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sk(t,d,c);Ya(t,d)}}catch(s){if(s instanceof Rs)throw s;Ya(t,"network-request-failed",{message:String(s)})}}async function tg(t,e,n,r,s={}){const i=await si(t,e,n,r,s);return"mfaPendingCredential"in i&&Ya(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function lk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Y5(t.config,s):`${t.config.apiScheme}://${s}`;return X5.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function eB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(O0(this.auth,"network-request-failed")),Z5.get())})}}function lf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=O0(t,e,r);return s.customData._tokenResponse=n,s}function US(t){return t!==void 0&&t.enterprise!==void 0}class nB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rB(t,e){return si(t,"GET","/v2/recaptchaConfig",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e){return si(t,"POST","/v1/accounts:delete",e)}async function qm(t,e){return si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iB(t,e=!1){const n=xt(t),r=await n.getIdToken(e),s=V0(r);lt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:td(ky(s.auth_time)),issuedAtTime:td(ky(s.iat)),expirationTime:td(ky(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ky(t){return Number(t)*1e3}function V0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bf("JWT malformed, contained fewer than 3 sections"),null;try{const s=$C(n);return s?JSON.parse(s):(Bf("Failed to decode base64 JWT payload"),null)}catch(s){return Bf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function jS(t){const e=V0(t);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rs&&oB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=td(this.lastLoginAt),this.creationTime=td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hm(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Ud(t,qm(e,{idToken:n}));lt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?ck(s.providerUserInfo):[],o=cB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Iw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function lB(t){const e=xt(t);await Hm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ck(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(t,e){const n=await ak(t,{},async()=>{const r=QC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await lk(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(l.credentials="include"),ok.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dB(t,e){return si(t,"POST","/v2/accounts:revokeToken",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const n=jS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await uB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Jl;return r&&(lt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(lt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(lt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t,e){lt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vs{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new aB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Iw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ud(this,this.stsTokenManager.getToken(this.auth,e));return lt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iB(this,e)}reload(){return lB(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Or(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await Ud(this,sB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:w,stsTokenManager:g}=n;lt(h&&g,e,"internal-error");const y=Jl.fromJSON(this.name,g);lt(typeof h=="string",e,"internal-error"),Hi(r,e.name),Hi(s,e.name),lt(typeof f=="boolean",e,"internal-error"),lt(typeof m=="boolean",e,"internal-error"),Hi(i,e.name),Hi(o,e.name),Hi(a,e.name),Hi(l,e.name),Hi(c,e.name),Hi(d,e.name);const E=new vs({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:y,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(E.providerData=w.map(v=>({...v}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Jl;s.updateFromServerResponse(n);const i=new vs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];lt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ck(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Jl;a.updateFromIdToken(r);const l=new vs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Iw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Map;function Ta(t){Wm(t instanceof Function,"Expected a class definition");let e=$S.get(t);return e?(Wm(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$S.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uk.type="NONE";const Sw=uk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e,n){return`firebase:${t}:${e}:${n}`}class Xl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Dy(this.userKey,s.apiKey,i),this.fullPersistenceKey=Dy("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qm(this.auth,{idToken:e}).catch(()=>{});return n?vs._fromGetAccountInfoResponse(this.auth,n,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xl(Ta(Sw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ta(Sw);const o=Dy(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await qm(e,{idToken:d}).catch(()=>{});if(!f)break;h=await vs._fromGetAccountInfoResponse(e,f,d)}else h=vs._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Xl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fk(e))return"Blackberry";if(mk(e))return"Webos";if(fB(e))return"Safari";if((e.includes("chrome/")||mB(e))&&!e.includes("edge/"))return"Chrome";if(hk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hB(t=zn()){return/firefox\//i.test(t)}function fB(t=zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mB(t=zn()){return/crios\//i.test(t)}function dk(t=zn()){return/iemobile/i.test(t)}function hk(t=zn()){return/android/i.test(t)}function fk(t=zn()){return/blackberry/i.test(t)}function mk(t=zn()){return/webos/i.test(t)}function pB(t=zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gB(){return P$()&&document.documentMode===10}function yB(t=zn()){return pB(t)||hk(t)||mk(t)||fk(t)||/windows phone/i.test(t)||dk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t,e=[]){let n;switch(t){case"Browser":n=BS(zn());break;case"Worker":n=`${BS(zn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e={}){return si(t,"GET","/v2/passwordPolicy",Li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=6;class EB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_B,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zS(this),this.idTokenSubscription=new zS(this),this.beforeStateQueue=new vB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ta(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qm(this,{idToken:e}),r=await vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Or(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Or(this.app))return Promise.reject(Ro(this));const n=e?xt(e):null;return n&&lt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Or(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Or(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wB(this),n=new EB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ta(e)||this._popupRedirectResolver;lt(n,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[Ta(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&H5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qc(t){return xt(t)}class zS{constructor(e){this.auth=e,this.observer=null,this.addObserver=O$(n=>this.observer=n)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IB(t){M0=t}function SB(t){return M0.loadJS(t)}function bB(){return M0.recaptchaEnterpriseScript}class AB{constructor(){this.enterprise=new xB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RB="recaptcha-enterprise",gk="NO_RECAPTCHA";class PB{constructor(e){this.type=RB,this.auth=Qc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{rB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new nB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;US(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(gk)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&US(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=bB();l.length!==0&&(l+=a),SB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function WS(t,e,n,r=!1,s=!1){const i=new PB(t);let o;if(s)o=gk;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Km(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await WS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await WS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t,e){const n=eg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(vc(i,e??{}))return s;Ya(s,"already-initialized")}return n.initialize({options:e})}function kB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ta);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mi("not implemented")}_getIdTokenResponse(e){return mi("not implemented")}_linkToIdToken(e,n){return mi("not implemented")}_getReauthenticationResolver(e){return mi("not implemented")}}async function NB(t,e){return si(t,"POST","/v1/accounts:update",e)}async function OB(t,e){return si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(t,e){return tg(t,"POST","/v1/accounts:signInWithPassword",Li(t,e))}async function VB(t,e){return si(t,"POST","/v1/accounts:sendOobCode",Li(t,e))}async function MB(t,e){return VB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,e){return tg(t,"POST","/v1/accounts:signInWithEmailLink",Li(t,e))}async function UB(t,e){return tg(t,"POST","/v1/accounts:signInWithEmailLink",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends DB{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,n,"signInWithPassword",LB);case"emailLink":return FB(e,{email:this._email,oobCode:this._password});default:Ya(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,r,"signUpPassword",OB);case"emailLink":return UB(e,{idToken:n,email:this._email,oobCode:this._password});default:Ya(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $B(t){const e=Vu(Mu(t)).link,n=e?Vu(Mu(e)).deep_link_id:null,r=Vu(Mu(t)).deep_link_id;return(r?Vu(Mu(r)).link:null)||r||n||e||t}class F0{constructor(e){const n=Vu(Mu(e)),r=n.apiKey??null,s=n.oobCode??null,i=jB(n.mode??null);lt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$B(e);try{return new F0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.providerId=Yc.PROVIDER_ID}static credential(e,n){return jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=F0.parseLink(n);return lt(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}Yc.PROVIDER_ID="password";Yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(t,e){return tg(t,"POST","/v1/accounts:signUp",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vs._fromIdTokenResponse(e,r,s),o=qS(r);return new wc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qS(r);return new wc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends Rs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gm(e,n,r,s)}}function yk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gm._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zB(t,e,n=!1){const{auth:r}=t;if(Or(r.app))return Promise.reject(Ro(r));const s="reauthenticate";try{const i=await Ud(t,yk(r,s,e,t),n);lt(i.idToken,r,"internal-error");const o=V0(i.idToken);lt(o,r,"internal-error");const{sub:a}=o;return lt(t.uid===a,r,"user-mismatch"),wc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ya(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e,n=!1){if(Or(t.app))return Promise.reject(Ro(t));const r="signIn",s=await yk(t,r,e),i=await wc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qB(t,e){return WB(Qc(t),e)}async function DG(t,e){return zB(xt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t){const e=Qc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HB(t,e,n){const r=Qc(t);await Km(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",MB)}async function HS(t,e,n){if(Or(t.app))return Promise.reject(Ro(t));const r=Qc(t),o=await Km(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vk(t),l}),a=await wc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function KB(t,e,n){return Or(t.app)?Promise.reject(Ro(t)):qB(xt(t),Yc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vk(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e){return si(t,"POST","/v1/accounts:createAuthUri",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(t,e){const n=ik()?K5():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await GB(xt(t),r);return s||[]}function NG(t,e){return YB(xt(t),null,e)}async function YB(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Ud(t,NB(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(t,e){return xt(t).setPersistence(e)}function XB(t,e,n,r){return xt(t).onAuthStateChanged(e,n,r)}function KS(t){return xt(t).signOut()}const GS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(GS,"1"),this.storage.removeItem(GS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=1e3,e9=10;class _k extends wk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,e9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_k.type="LOCAL";const Ek=_k;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk extends wk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Tk.type="SESSION";const t9=Tk;new fh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new fh(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new fh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new fh(5e3,15e3);var QS="@firebase/auth",YS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s9(t){ei(new As("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;lt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pk(t)},c=new TB(r,s,i,l);return kB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new As("auth-internal",e=>{const n=Qc(e.getProvider("auth").getImmediate());return(r=>new n9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(QS,YS,r9(t)),Br(QS,YS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=5*60;E$("authIdTokenMaxAge");function o9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}IB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=O0("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",o9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s9("Browser");var a9="firebase",l9="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(a9,l9,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=new Map,u9={activated:!1,tokenObservers:[]},d9={initialized:!1,enabled:!1};function xs(t){return c9.get(t)||{...u9}}function Ik(){return d9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="https://content-firebaseappcheck.googleapis.com/v1";const f9="exchangeDebugToken",JS={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},OG=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new yw,this.pending.promise.catch(n=>{}),await p9(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new yw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function p9(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},mo=new Gc("appCheck","AppCheck",g9);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t){if(!xs(t).activated)throw mo.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw mo.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw mo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw mo.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw mo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function Ak(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${h9}/projects/${n}/apps/${r}:${f9}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="firebase-app-check-database",v9=1,bw="firebase-app-check-store";let cf=null;function w9(){return cf||(cf=new Promise((t,e)=>{try{const n=indexedDB.open(y9,v9);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(mo.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(bw,{keyPath:"compositeKey"})}}}catch(n){e(mo.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),cf)}function _9(t,e){return E9(T9(t),e)}async function E9(t,e){const r=(await w9()).transaction(bw,"readwrite"),i=r.objectStore(bw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(mo.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function T9(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Zp("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e){return D0()?_9(t,e).catch(n=>{Fu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(){return Ik().enabled}async function Rk(){const t=Ik();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9={error:"UNKNOWN_ERROR"};function S9(t){return C0.encodeString(JSON.stringify(t),!1)}async function Aw(t,e=!1,n=!1){const r=t.app;Sk(r);const s=xs(r);let i=s.token,o;if(i&&!Uu(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Uu(c)?i=c:await Ny(r,void 0))}if(!e&&i&&Uu(i))return{token:i.token};let a=!1;if(xk())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=bk(Ak(r,await Rk()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Ny(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Fu.warn(c.message):n&&Fu.error(c),Oy(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await xs(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Fu.warn(c.message):n&&Fu.error(c),o=c}let l;return i?o?Uu(i)?l={token:i.token,internalError:o}:l=Oy(o):(l={token:i.token},s.token=i,await Ny(r,i)):l=Oy(o),a&&R9(r,l),l}async function b9(t){const e=t.app;Sk(e);const{provider:n}=xs(e);if(xk()){const r=await Rk(),{token:s}=await bk(Ak(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function A9(t,e,n,r){const{app:s}=t,i=xs(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Uu(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),XS(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>XS(t))}function Pk(t,e){const n=xs(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function XS(t){const{app:e}=t,n=xs(e);let r=n.tokenRefresher;r||(r=x9(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function x9(t){const{app:e}=t;return new m9(async()=>{const n=xs(e);let r;if(n.token?r=await Aw(t,!0):r=await Aw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=xs(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},JS.RETRIAL_MIN_WAIT,JS.RETRIAL_MAX_WAIT)}function R9(t,e){const n=xs(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Uu(t){return t.expireTimeMillis-Date.now()>0}function Oy(t){return{token:S9(I9),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=xs(this.app);for(const n of e)Pk(this.app,n.next);return Promise.resolve()}}function C9(t,e){return new P9(t,e)}function k9(t){return{getToken:e=>Aw(t,e),getLimitedUseToken:()=>b9(t),addTokenListener:e=>A9(t,"INTERNAL",e),removeTokenListener:e=>Pk(t.app,e)}}const D9="@firebase/app-check",N9="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="app-check",ZS="app-check-internal";function L9(){ei(new As(O9,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return C9(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(ZS).initialize()})),ei(new As(ZS,t=>{const e=t.getProvider("app-check").getImmediate();return k9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Br(D9,N9)}L9();var eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,Ck;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function b(){}b.prototype=A.prototype,R.F=A.prototype,R.prototype=new b,R.prototype.constructor=R,R.D=function(P,D,O){for(var C=Array(arguments.length-2),$=2;$<arguments.length;$++)C[$-2]=arguments[$];return A.prototype[D].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,A,b){b||(b=0);const P=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)P[D]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(D=0;D<16;++D)P[D]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=R.g[0],b=R.g[1],D=R.g[2];let O=R.g[3],C;C=A+(O^b&(D^O))+P[0]+3614090360&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[1]+3905402710&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[2]+606105819&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[3]+3250441966&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[4]+4118548399&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[5]+1200080426&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[6]+2821735955&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[7]+4249261313&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[8]+1770035416&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[9]+2336552879&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[10]+4294925233&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[11]+2304563134&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[12]+1804603682&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[13]+4254626195&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[14]+2792965006&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[15]+1236535329&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(D^O&(b^D))+P[1]+4129170786&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[6]+3225465664&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[11]+643717713&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[0]+3921069994&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[5]+3593408605&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[10]+38016083&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[15]+3634488961&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[4]+3889429448&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[9]+568446438&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[14]+3275163606&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[3]+4107603335&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[8]+1163531501&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[13]+2850285829&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[2]+4243563512&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[7]+1735328473&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[12]+2368359562&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(b^D^O)+P[5]+4294588738&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[8]+2272392833&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[11]+1839030562&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[14]+4259657740&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[1]+2763975236&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[4]+1272893353&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[7]+4139469664&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[10]+3200236656&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[13]+681279174&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[0]+3936430074&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[3]+3572445317&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[6]+76029189&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[9]+3654602809&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[12]+3873151461&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[15]+530742520&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[2]+3299628645&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(D^(b|~O))+P[0]+4096336452&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[7]+1126891415&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[14]+2878612391&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[5]+4237533241&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[12]+1700485571&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[3]+2399980690&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[10]+4293915773&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[1]+2240044497&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[8]+1873313359&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[15]+4264355552&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[6]+2734768916&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[13]+1309151649&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[4]+4149444226&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[11]+3174756917&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[2]+718787259&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+O&4294967295}r.prototype.v=function(R,A){A===void 0&&(A=R.length);const b=A-this.blockSize,P=this.C;let D=this.h,O=0;for(;O<A;){if(D==0)for(;O<=b;)s(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<A;)if(P[D++]=R.charCodeAt(O++),D==this.blockSize){s(this,P),D=0;break}}else for(;O<A;)if(P[D++]=R[O++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var b=R.length-8;b<R.length;++b)R[b]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,b=0;b<4;++b)for(let P=0;P<32;P+=8)R[A++]=this.g[b]>>>P&255;return R};function i(R,A){var b=a;return Object.prototype.hasOwnProperty.call(b,R)?b[R]:b[R]=A(R)}function o(R,A){this.h=A;const b=[];let P=!0;for(let D=R.length-1;D>=0;D--){const O=R[D]|0;P&&O==A||(b[D]=O,P=!1)}this.g=b}var a={};function l(R){return-128<=R&&R<128?i(R,function(A){return new o([A|0],A<0?-1:0)}):new o([R|0],R<0?-1:0)}function c(R){if(isNaN(R)||!isFinite(R))return h;if(R<0)return y(c(-R));const A=[];let b=1;for(let P=0;R>=b;P++)A[P]=R/b|0,b*=4294967296;return new o(A,0)}function d(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return y(d(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(A,8));let P=h;for(let O=0;O<R.length;O+=8){var D=Math.min(8,R.length-O);const C=parseInt(R.substring(O,O+D),A);D<8?(D=c(Math.pow(A,D)),P=P.j(D).add(c(C))):(P=P.j(b),P=P.add(c(C)))}return P}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-y(this).m();let R=0,A=1;for(let b=0;b<this.g.length;b++){const P=this.i(b);R+=(P>=0?P:4294967296+P)*A,A*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(g(this))return"-"+y(this).toString(R);const A=c(Math.pow(R,6));var b=this;let P="";for(;;){const D=x(b,A).g;b=E(b,D.j(A));let O=((b.g.length>0?b.g[0]:b.h)>>>0).toString(R);if(b=D,w(b))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function g(R){return R.h==-1}t.l=function(R){return R=E(this,R),g(R)?-1:w(R)?0:1};function y(R){const A=R.g.length,b=[];for(let P=0;P<A;P++)b[P]=~R.g[P];return new o(b,~R.h).add(f)}t.abs=function(){return g(this)?y(this):this},t.add=function(R){const A=Math.max(this.g.length,R.g.length),b=[];let P=0;for(let D=0;D<=A;D++){let O=P+(this.i(D)&65535)+(R.i(D)&65535),C=(O>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);P=C>>>16,O&=65535,C&=65535,b[D]=C<<16|O}return new o(b,b[b.length-1]&-2147483648?-1:0)};function E(R,A){return R.add(y(A))}t.j=function(R){if(w(this)||w(R))return h;if(g(this))return g(R)?y(this).j(y(R)):y(y(this).j(R));if(g(R))return y(this.j(y(R)));if(this.l(m)<0&&R.l(m)<0)return c(this.m()*R.m());const A=this.g.length+R.g.length,b=[];for(var P=0;P<2*A;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<R.g.length;D++){const O=this.i(P)>>>16,C=this.i(P)&65535,$=R.i(D)>>>16,ie=R.i(D)&65535;b[2*P+2*D]+=C*ie,v(b,2*P+2*D),b[2*P+2*D+1]+=O*ie,v(b,2*P+2*D+1),b[2*P+2*D+1]+=C*$,v(b,2*P+2*D+1),b[2*P+2*D+2]+=O*$,v(b,2*P+2*D+2)}for(R=0;R<A;R++)b[R]=b[2*R+1]<<16|b[2*R];for(R=A;R<2*A;R++)b[R]=0;return new o(b,0)};function v(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function _(R,A){this.g=R,this.h=A}function x(R,A){if(w(A))throw Error("division by zero");if(w(R))return new _(h,h);if(g(R))return A=x(y(R),A),new _(y(A.g),y(A.h));if(g(A))return A=x(R,y(A)),new _(y(A.g),A.h);if(R.g.length>30){if(g(R)||g(A))throw Error("slowDivide_ only works with positive integers.");for(var b=f,P=A;P.l(R)<=0;)b=k(b),P=k(P);var D=L(b,1),O=L(P,1);for(P=L(P,2),b=L(b,2);!w(P);){var C=O.add(P);C.l(R)<=0&&(D=D.add(b),O=C),P=L(P,1),b=L(b,1)}return A=E(R,D.j(A)),new _(D,A)}for(D=h;R.l(A)>=0;){for(b=Math.max(1,Math.floor(R.m()/A.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=c(b),C=O.j(A);g(C)||C.l(R)>0;)b-=P,O=c(b),C=O.j(A);w(O)&&(O=f),D=D.add(O),R=E(R,C)}return new _(D,R)}t.B=function(R){return x(this,R).h},t.and=function(R){const A=Math.max(this.g.length,R.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)&R.i(P);return new o(b,this.h&R.h)},t.or=function(R){const A=Math.max(this.g.length,R.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)|R.i(P);return new o(b,this.h|R.h)},t.xor=function(R){const A=Math.max(this.g.length,R.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)^R.i(P);return new o(b,this.h^R.h)};function k(R){const A=R.g.length+1,b=[];for(let P=0;P<A;P++)b[P]=R.i(P)<<1|R.i(P-1)>>>31;return new o(b,R.h)}function L(R,A){const b=A>>5;A%=32;const P=R.g.length-b,D=[];for(let O=0;O<P;O++)D[O]=A>0?R.i(O+b)>>>A|R.i(O+b+1)<<32-A:R.i(O+b);return new o(D,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ck=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Po=o}).apply(typeof eb<"u"?eb:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kk,ju,Dk,zf,xw,Nk,Ok,Lk;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var p=0;p<u.length;++p){var I=u[p];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var I=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var F=u[N];if(!(F in I))break e;I=I[F]}u=u[u.length-1],N=I[u],p=p(N),p!=N&&p!=null&&e(I,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var I=[],N;for(N in p)Object.prototype.hasOwnProperty.call(p,N)&&I.push([N,p[N]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function l(u,p,I){return u.call.apply(u.bind,arguments)}function c(u,p,I){return c=l,c.apply(null,arguments)}function d(u,p){var I=Array.prototype.slice.call(arguments,1);return function(){var N=I.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,p){function I(){}I.prototype=p.prototype,u.Z=p.prototype,u.prototype=new I,u.prototype.constructor=u,u.Ob=function(N,F,B){for(var ce=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ce[Ze-2]=arguments[Ze];return p.prototype[F].apply(N,ce)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const p=u.length;if(p>0){const I=Array(p);for(let N=0;N<p;N++)I[N]=u[N];return I}return[]}function w(u,p){for(let N=1;N<arguments.length;N++){const F=arguments[N];var I=typeof F;if(I=I!="object"?I:F?Array.isArray(F)?"array":I:"null",I=="array"||I=="object"&&typeof F.length=="number"){I=u.length||0;const B=F.length||0;u.length=I+B;for(let ce=0;ce<B;ce++)u[I+ce]=F[ce]}else u.push(F)}}class g{constructor(p,I){this.i=p,this.j=I,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(u){o.setTimeout(()=>{throw u},0)}function E(){var u=R;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class v{constructor(){this.h=this.g=null}add(p,I){const N=_.get();N.set(p,I),this.h?this.h.next=N:this.g=N,this.h=N}}var _=new g(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(p,I){this.h=p,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let k,L=!1,R=new v,A=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(b)}};function b(){for(var u;u=E();){try{u.h.call(u.g)}catch(I){y(I)}var p=_;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}L=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const I=()=>{};o.addEventListener("test",I,p),o.removeEventListener("test",I,p)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function $(u,p){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}h($,D),$.prototype.init=function(u,p){const I=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(I=="mouseover"?p=u.fromElement:I=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),oe=0;function fe(u,p,I,N,F){this.listener=u,this.proxy=null,this.src=p,this.type=I,this.capture=!!N,this.ha=F,this.key=++oe,this.da=this.fa=!1}function j(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function V(u,p,I){for(const N in u)p.call(I,u[N],N,u)}function te(u,p){for(const I in u)p.call(void 0,u[I],I,u)}function ae(u){const p={};for(const I in u)p[I]=u[I];return p}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(u,p){let I,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(I in N)u[I]=N[I];for(let B=0;B<Y.length;B++)I=Y[B],Object.prototype.hasOwnProperty.call(N,I)&&(u[I]=N[I])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,p,I,N,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const ce=Ye(u,p,N,F);return ce>-1?(p=u[ce],I||(p.fa=!1)):(p=new fe(p,this.src,B,!!N,F),p.fa=I,u.push(p)),p};function De(u,p){const I=p.type;if(I in u.g){var N=u.g[I],F=Array.prototype.indexOf.call(N,p,void 0),B;(B=F>=0)&&Array.prototype.splice.call(N,F,1),B&&(j(p),u.g[I].length==0&&(delete u.g[I],u.h--))}}function Ye(u,p,I,N){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==p&&B.capture==!!I&&B.ha==N)return F}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Yt={};function Xe(u,p,I,N,F){if(Array.isArray(p)){for(let B=0;B<p.length;B++)Xe(u,p[B],I,N,F);return null}return I=Le(I),u&&u[ie]?u.J(p,I,a(N)?!!N.capture:!1,F):je(u,p,I,!1,N,F)}function je(u,p,I,N,F,B){if(!p)throw Error("Invalid event type");const ce=a(F)?!!F.capture:!!F;let Ze=In(u);if(Ze||(u[Ae]=Ze=new Se(u)),I=Ze.add(p,I,N,ce,B),I.proxy)return I;if(N=ze(),I.proxy=N,N.src=u,N.listener=I,u.addEventListener)O||(F=ce),F===void 0&&(F=!1),u.addEventListener(p.toString(),N,F);else if(u.attachEvent)u.attachEvent(Vn(p.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return I}function ze(){function u(I){return p.call(u.src,u.listener,I)}const p=Gr;return u}function Vt(u,p,I,N,F){if(Array.isArray(p))for(var B=0;B<p.length;B++)Vt(u,p[B],I,N,F);else N=a(N)?!!N.capture:!!N,I=Le(I),u&&u[ie]?(u=u.i,B=String(p).toString(),B in u.g&&(p=u.g[B],I=Ye(p,I,N,F),I>-1&&(j(p[I]),Array.prototype.splice.call(p,I,1),p.length==0&&(delete u.g[B],u.h--)))):u&&(u=In(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ye(p,I,N,F)),(I=u>-1?p[u]:null)&&rn(I))}function rn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ie])De(p.i,u);else{var I=u.type,N=u.proxy;p.removeEventListener?p.removeEventListener(I,N,u.capture):p.detachEvent?p.detachEvent(Vn(I),N):p.addListener&&p.removeListener&&p.removeListener(N),(I=In(p))?(De(I,u),I.h==0&&(I.src=null,p[Ae]=null)):j(u)}}}function Vn(u){return u in Yt?Yt[u]:Yt[u]="on"+u}function Gr(u,p){if(u.da)u=!0;else{p=new $(p,this);const I=u.listener,N=u.ha||u.src;u.fa&&rn(u),u=I.call(N,p)}return u}function In(u){return u=u[Ae],u instanceof Se?u:null}var nr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Le(u){return typeof u=="function"?u:(u[nr]||(u[nr]=function(p){return u.handleEvent(p)}),u[nr])}function vt(){P.call(this),this.i=new Se(this),this.M=this,this.G=null}h(vt,P),vt.prototype[ie]=!0,vt.prototype.removeEventListener=function(u,p,I,N){Vt(this,u,p,I,N)};function vn(u,p){var I,N=u.G;if(N)for(I=[];N;N=N.G)I.push(N);if(u=u.M,N=p.type||p,typeof p=="string")p=new D(p,u);else if(p instanceof D)p.target=p.target||u;else{var F=p;p=new D(N,u),ke(p,F)}F=!0;let B,ce;if(I)for(ce=I.length-1;ce>=0;ce--)B=p.g=I[ce],F=mr(B,N,!0,p)&&F;if(B=p.g=u,F=mr(B,N,!0,p)&&F,F=mr(B,N,!1,p)&&F,I)for(ce=0;ce<I.length;ce++)B=p.g=I[ce],F=mr(B,N,!1,p)&&F}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const I=u.g[p];for(let N=0;N<I.length;N++)j(I[N]);delete u.g[p],u.h--}}this.G=null},vt.prototype.J=function(u,p,I,N){return this.i.add(String(u),p,!1,I,N)},vt.prototype.K=function(u,p,I,N){return this.i.add(String(u),p,!0,I,N)};function mr(u,p,I,N){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let F=!0;for(let B=0;B<p.length;++B){const ce=p[B];if(ce&&!ce.da&&ce.capture==I){const Ze=ce.listener,bn=ce.ha||ce.src;ce.fa&&De(u.i,ce),F=Ze.call(bn,N)!==!1&&F}}return F&&!N.defaultPrevented}function Zo(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(u,p||0)}function Qr(u){u.g=Zo(()=>{u.g=null,u.i&&(u.i=!1,Qr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ea extends P{constructor(p,I){super(),this.m=p,this.l=I,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Qr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(u){P.call(this),this.h=u,this.g={}}h(Mt,P);var Pn=[];function Yr(u){V(u.g,function(p,I){this.g.hasOwnProperty(I)&&rn(p)},u),u.g={}}Mt.prototype.N=function(){Mt.Z.N.call(this),Yr(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ks=o.JSON.stringify,au=o.JSON.parse,ii=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ta(){}function J(){}var W={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Z(){D.call(this,"d")}h(Z,D);function q(){D.call(this,"c")}h(q,D);var Q={},re=null;function le(){return re=re||new vt}Q.Ia="serverreachability";function we(u){D.call(this,Q.Ia,u)}h(we,D);function ue(u){const p=le();vn(p,new we(p))}Q.STAT_EVENT="statevent";function Ve(u,p){D.call(this,Q.STAT_EVENT,u),this.stat=p}h(Ve,D);function me(u){const p=le();vn(p,new Ve(p,u))}Q.Ja="timingevent";function Fe(u,p){D.call(this,Q.Ja,u),this.size=p}h(Fe,D);function ye(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},p)}function G(){this.g=!0}G.prototype.ua=function(){this.g=!1};function ge(u,p,I,N,F,B){u.info(function(){if(u.g)if(B){var ce="",Ze=B.split("&");for(let Pt=0;Pt<Ze.length;Pt++){var bn=Ze[Pt].split("=");if(bn.length>1){const Cn=bn[0];bn=bn[1];const Ns=Cn.split("_");ce=Ns.length>=2&&Ns[1]=="type"?ce+(Cn+"="+bn+"&"):ce+(Cn+"=redacted&")}}}else ce=null;else ce=B;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+p+`
`+I+`
`+ce})}function he(u,p,I,N,F,B,ce){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+p+`
`+I+`
`+B+" "+ce})}function $e(u,p,I,N){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+zt(u,I)+(N?" "+N:"")})}function ut(u,p){u.info(function(){return"TIMEOUT: "+p})}G.prototype.info=function(){};function zt(u,p){if(!u.g)return p;if(!p)return null;try{const B=JSON.parse(p);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var I=B[u];if(!(I.length<2)){var N=I[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ce=1;ce<N.length;ce++)N[ce]=""}}}}return ks(B)}catch{return p}}var wt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ke={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ft;function Wt(){}h(Wt,ta),Wt.prototype.g=function(){return new XMLHttpRequest},ft=new Wt;function pe(u){return encodeURIComponent(String(u))}function mt(u){var p=1;u=u.split(":");const I=[];for(;p>0&&u.length;)I.push(u.shift()),p--;return u.length&&I.push(u.join(":")),I}function Be(u,p,I,N){this.j=u,this.i=p,this.l=I,this.S=N||1,this.V=new Mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}var et={},Et={};function dt(u,p,I){u.M=1,u.A=Ch(yr(p)),u.u=I,u.R=!0,ot(u,null)}function ot(u,p){u.F=Date.now(),Tt(u),u.B=yr(u.A);var I=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),eT(I.i,"t",N),u.C=0,I=u.j.L,u.h=new Ge,u.g=vT(u.j,I?p:null,!u.u),u.P>0&&(u.O=new ea(c(u.Y,u,u.g),u.P)),p=u.V,I=u.g,N=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Pn[0]=F.toString()),F=Pn);for(let B=0;B<F.length;B++){const ce=Xe(I,F[B],N||p.handleEvent,!1,p.h||p);if(!ce)break;p.g[ce.key]=ce}p=u.J?ae(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),ue(),ge(u.i,u.v,u.B,u.l,u.S,u.u)}Be.prototype.ba=function(u){u=u.target;const p=this.O;p&&ji(u)==3?p.j():this.Y(u)},Be.prototype.Y=function(u){try{if(u==this.g)e:{const Ze=ji(this.g),bn=this.g.ya(),Pt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||aT(this.g)))){this.K||Ze!=4||bn==7||(bn==8||Pt<=0?ue(3):ue(2)),_e(this);var p=this.g.ca();this.X=p;var I=Sn(this);if(this.o=p==200,he(this.i,this.v,this.B,this.l,this.S,Ze,p),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(N)){var B=N;break t}}B=null}if(u=B)$e(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qt(this,u);else{this.o=!1,this.m=3,me(12),Rt(this),It(this);break e}}if(this.R){u=!0;let Cn;for(;!this.K&&this.C<I.length;)if(Cn=st(this,I),Cn==Et){Ze==4&&(this.m=4,me(14),u=!1),$e(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==et){this.m=4,me(15),$e(this.i,this.l,I,"[Invalid Chunk]"),u=!1;break}else $e(this.i,this.l,Cn,null),qt(this,Cn);if(Qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||I.length!=0||this.h.h||(this.m=1,me(16),u=!1),this.o=this.o&&u,!u)$e(this.i,this.l,I,"[Invalid Chunked Response]"),Rt(this),It(this);else if(I.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),jg(ce),ce.P=!0,me(11))}}else $e(this.i,this.l,I,null),qt(this,I);Ze==4&&Rt(this),this.o&&!this.K&&(Ze==4?mT(this.j,this):(this.o=!1,Tt(this)))}else W2(this.g),p==400&&I.indexOf("Unknown SID")>0?(this.m=3,me(12)):(this.m=0,me(13)),Rt(this),It(this)}}}catch{}finally{}};function Sn(u){if(!Qe(u))return u.g.la();const p=aT(u.g);if(p==="")return"";let I="";const N=p.length,F=ji(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Rt(u),It(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<N;B++)u.h.h=!0,I+=u.h.i.decode(p[B],{stream:!(F&&B==N-1)});return p.length=0,u.h.g+=I,u.C=0,u.h.g}function Qe(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function st(u,p){var I=u.C,N=p.indexOf(`
`,I);return N==-1?Et:(I=Number(p.substring(I,N)),isNaN(I)?et:(N+=1,N+I>p.length?Et:(p=p.slice(N,N+I),u.C=N+I,p)))}Be.prototype.cancel=function(){this.K=!0,Rt(this)};function Tt(u){u.T=Date.now()+u.H,Ne(u,u.H)}function Ne(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ye(c(u.aa,u),p)}function _e(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Be.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ut(this.i,this.B),this.M!=2&&(ue(),me(17)),Rt(this),this.m=2,It(this)):Ne(this,this.T-u)};function It(u){u.j.I==0||u.K||mT(u.j,u)}function Rt(u){_e(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Yr(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function qt(u,p){try{var I=u.j;if(I.I!=0&&(I.g==u||Jr(I.h,u))){if(!u.L&&Jr(I.h,u)&&I.I==3){try{var N=I.Ba.g.parse(p)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<u.F)Lh(I),Nh(I);else break e;Ug(I),me(18)}}else I.xa=F[1],0<I.xa-I.K&&F[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=ye(c(I.Va,I),6e3));pr(I.h)<=1&&I.ta&&(I.ta=void 0)}else ra(I,11)}else if((u.L||I.g==u)&&Lh(I),!C(p))for(F=I.Ba.g.parse(p),p=0;p<F.length;p++){let Pt=F[p];const Cn=Pt[0];if(!(Cn<=I.K))if(I.K=Cn,Pt=Pt[1],I.I==2)if(Pt[0]=="c"){I.M=Pt[1],I.ba=Pt[2];const Ns=Pt[3];Ns!=null&&(I.ka=Ns,I.j.info("VER="+I.ka));const sa=Pt[4];sa!=null&&(I.za=sa,I.j.info("SVER="+I.za));const $i=Pt[5];$i!=null&&typeof $i=="number"&&$i>0&&(N=1.5*$i,I.O=N,I.j.info("backChannelRequestTimeoutMs_="+N)),N=I;const Bi=u.g;if(Bi){const Mh=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mh){var B=N.h;B.g||Mh.indexOf("spdy")==-1&&Mh.indexOf("quic")==-1&&Mh.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(gr(B,B.h),B.h=null))}if(N.G){const $g=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;$g&&(N.wa=$g,Ft(N.J,N.G,$g))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-u.F,I.j.info("Handshake RTT: "+I.T+"ms")),N=I;var ce=u;if(N.na=yT(N,N.L?N.ba:null,N.W),ce.L){Xr(N.h,ce);var Ze=ce,bn=N.O;bn&&(Ze.H=bn),Ze.D&&(_e(Ze),Tt(Ze)),N.g=ce}else hT(N);I.i.length>0&&Oh(I)}else Pt[0]!="stop"&&Pt[0]!="close"||ra(I,7);else I.I==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?ra(I,7):Fg(I):Pt[0]!="noop"&&I.l&&I.l.qa(Pt),I.A=0)}}ue(4)}catch{}}var wn=class{constructor(u,p){this.g=u,this.map=p}};function rr(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pr(u){return u.h?1:u.g?u.g.size:0}function Jr(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function gr(u,p){u.g?u.g.add(p):u.h=p}function Xr(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}rr.prototype.cancel=function(){if(this.i=Ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ds(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const I of u.g.values())p=p.concat(I.G);return p}return m(u.i)}var hl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ph(u,p){if(u){u=u.split("&");for(let I=0;I<u.length;I++){const N=u[I].indexOf("=");let F,B=null;N>=0?(F=u[I].substring(0,N),B=u[I].substring(N+1)):F=u[I],p(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Zr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Zr?(this.l=u.l,tt(this,u.j),this.o=u.o,this.g=u.g,vr(this,u.u),this.h=u.h,Lg(this,tT(u.i)),this.m=u.m):u&&(p=String(u).match(hl))?(this.l=!1,tt(this,p[1]||"",!0),this.o=lu(p[2]||""),this.g=lu(p[3]||"",!0),vr(this,p[4]),this.h=lu(p[5]||"",!0),Lg(this,p[6]||"",!0),this.m=lu(p[7]||"")):(this.l=!1,this.i=new uu(null,this.l))}Zr.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(cu(p,YE,!0),":");var I=this.g;return(I||p=="file")&&(u.push("//"),(p=this.o)&&u.push(cu(p,YE,!0),"@"),u.push(pe(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&u.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&u.push("/"),u.push(cu(I,I.charAt(0)=="/"?L2:O2,!0))),(I=this.i.toString())&&u.push("?",I),(I=this.m)&&u.push("#",cu(I,M2)),u.join("")},Zr.prototype.resolve=function(u){const p=yr(this);let I=!!u.j;I?tt(p,u.j):I=!!u.o,I?p.o=u.o:I=!!u.g,I?p.g=u.g:I=u.u!=null;var N=u.h;if(I)vr(p,u.u);else if(I=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=p.h.lastIndexOf("/");F!=-1&&(N=p.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let ce=0;ce<F.length;){const Ze=F[ce++];Ze=="."?N&&ce==F.length&&B.push(""):Ze==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),N&&ce==F.length&&B.push("")):(B.push(Ze),N=!0)}N=B.join("/")}else N=F}return I?p.h=N:I=u.i.toString()!=="",I?Lg(p,tT(u.i)):I=!!u.m,I&&(p.m=u.m),p};function yr(u){return new Zr(u)}function tt(u,p,I){u.j=I?lu(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function vr(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Lg(u,p,I){p instanceof uu?(u.i=p,F2(u.i,u.l)):(I||(p=cu(p,V2)),u.i=new uu(p,u.l))}function Ft(u,p,I){u.i.set(p,I)}function Ch(u){return Ft(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function lu(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cu(u,p,I){return typeof u=="string"?(u=encodeURI(u).replace(p,N2),I&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function N2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var YE=/[#\/\?@]/g,O2=/[#\?:]/g,L2=/[#\?]/g,V2=/[#\?@]/g,M2=/#/g;function uu(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function na(u){u.g||(u.g=new Map,u.h=0,u.i&&Ph(u.i,function(p,I){u.add(decodeURIComponent(p.replace(/\+/g," ")),I)}))}t=uu.prototype,t.add=function(u,p){na(this),this.i=null,u=fl(this,u);let I=this.g.get(u);return I||this.g.set(u,I=[]),I.push(p),this.h+=1,this};function JE(u,p){na(u),p=fl(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function XE(u,p){return na(u),p=fl(u,p),u.g.has(p)}t.forEach=function(u,p){na(this),this.g.forEach(function(I,N){I.forEach(function(F){u.call(p,F,N,this)},this)},this)};function ZE(u,p){na(u);let I=[];if(typeof p=="string")XE(u,p)&&(I=I.concat(u.g.get(fl(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)I=I.concat(u[p]);return I}t.set=function(u,p){return na(this),this.i=null,u=fl(this,u),XE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=ZE(this,u),u.length>0?String(u[0]):p):p};function eT(u,p,I){JE(u,p),I.length>0&&(u.i=null,u.g.set(fl(u,p),m(I)),u.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let N=0;N<p.length;N++){var I=p[N];const F=pe(I);I=ZE(this,I);for(let B=0;B<I.length;B++){let ce=F;I[B]!==""&&(ce+="="+pe(I[B])),u.push(ce)}}return this.i=u.join("&")};function tT(u){const p=new uu;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function fl(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function F2(u,p){p&&!u.j&&(na(u),u.i=null,u.g.forEach(function(I,N){const F=N.toLowerCase();N!=F&&(JE(this,N),eT(this,F,I))},u)),u.j=p}function U2(u,p){const I=new G;if(o.Image){const N=new Image;N.onload=d(Ui,I,"TestLoadImage: loaded",!0,p,N),N.onerror=d(Ui,I,"TestLoadImage: error",!1,p,N),N.onabort=d(Ui,I,"TestLoadImage: abort",!1,p,N),N.ontimeout=d(Ui,I,"TestLoadImage: timeout",!1,p,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else p(!1)}function j2(u,p){const I=new G,N=new AbortController,F=setTimeout(()=>{N.abort(),Ui(I,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:N.signal}).then(B=>{clearTimeout(F),B.ok?Ui(I,"TestPingServer: ok",!0,p):Ui(I,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Ui(I,"TestPingServer: error",!1,p)})}function Ui(u,p,I,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(I)}catch{}}function $2(){this.g=new ii}function Vg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Vg,ta),Vg.prototype.g=function(){return new kh(this.i,this.h)};function kh(u,p){vt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(kh,vt),t=kh.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,hu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,du(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hu(this)),this.g&&(this.readyState=3,hu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function nT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?du(this):hu(this),this.readyState==3&&nT(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,du(this))},t.Na=function(u){this.g&&(this.response=u,du(this))},t.ga=function(){this.g&&du(this)};function du(u){u.readyState=4,u.l=null,u.j=null,u.B=null,hu(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var I=p.next();!I.done;)I=I.value,u.push(I[0]+": "+I[1]),I=p.next();return u.join(`\r
`)};function hu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rT(u){let p="";return V(u,function(I,N){p+=N,p+=":",p+=I,p+=`\r
`}),p}function Mg(u,p,I){e:{for(N in I){var N=!1;break e}N=!0}N||(I=rT(I),typeof u=="string"?I!=null&&pe(I):Ft(u,p,I))}function sn(u){vt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(sn,vt);var B2=/^https?$/i,z2=["POST","PUT"];t=sn.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,I,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ft.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(B){sT(this,B);return}if(u=I||"",I=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)I.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const B of N.keys())I.set(B,N.get(B));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(I.keys()).find(B=>B.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(z2,p,void 0)>=0)||N||F||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ce]of I)this.g.setRequestHeader(B,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){sT(this,B)}};function sT(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,iT(u),Dh(u)}function iT(u){u.A||(u.A=!0,vn(u,"complete"),vn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vn(this,"complete"),vn(this,"abort"),Dh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dh(this,!0)),sn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?oT(this):this.Xa())},t.Xa=function(){oT(this)};function oT(u){if(u.h&&typeof i<"u"){if(u.v&&ji(u)==4)setTimeout(u.Ca.bind(u),0);else if(vn(u,"readystatechange"),ji(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var I;if(!(I=p)){var N;if(N=B===0){let ce=String(u.D).match(hl)[1]||null;!ce&&o.self&&o.self.location&&(ce=o.self.location.protocol.slice(0,-1)),N=!B2.test(ce?ce.toLowerCase():"")}I=N}if(I)vn(u,"complete"),vn(u,"success");else{u.o=6;try{var F=ji(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",iT(u)}}finally{Dh(u)}}}}function Dh(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const I=u.g;u.g=null,p||vn(u,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ji(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ji(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),au(p)}};function aT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function W2(u){const p={};u=(u.g&&ji(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(C(u[N]))continue;var I=mt(u[N]);const F=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const B=p[F]||[];p[F]=B,B.push(I)}te(p,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fu(u,p,I){return I&&I.internalChannelParams&&I.internalChannelParams[u]||p}function lT(u){this.za=0,this.i=[],this.j=new G,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fu("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fu("baseRetryDelayMs",5e3,u),this.Za=fu("retryDelaySeedMs",1e4,u),this.Ta=fu("forwardChannelMaxRetries",2,u),this.va=fu("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new rr(u&&u.concurrentRequestLimit),this.Ba=new $2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=lT.prototype,t.ka=8,t.I=1,t.connect=function(u,p,I,N){me(0),this.W=u,this.H=p||{},I&&N!==void 0&&(this.H.OSID=I,this.H.OAID=N),this.F=this.X,this.J=yT(this,null,this.W),Oh(this)};function Fg(u){if(cT(u),u.I==3){var p=u.V++,I=yr(u.J);if(Ft(I,"SID",u.M),Ft(I,"RID",p),Ft(I,"TYPE","terminate"),mu(u,I),p=new Be(u,u.j,p),p.M=2,p.A=Ch(yr(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=p.A,I=!0),I||(p.g=vT(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Tt(p)}gT(u)}function Nh(u){u.g&&(jg(u),u.g.cancel(),u.g=null)}function cT(u){Nh(u),u.v&&(o.clearTimeout(u.v),u.v=null),Lh(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Oh(u){if(!Pr(u.h)&&!u.m){u.m=!0;var p=u.Ea;k||A(),L||(k(),L=!0),R.add(p,u),u.D=0}}function q2(u,p){return pr(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ye(c(u.Ea,u,p),pT(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Be(this,this.j,u);let B=this.o;if(this.U&&(B?(B=ae(B),ke(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var p=0,I=0;I<this.i.length;I++){t:{var N=this.i[I];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(p+=N,p>4096){p=I;break e}if(p===4096||I===this.i.length-1){p=I+1;break e}}p=1e3}else p=1e3;p=dT(this,F,p),I=yr(this.J),Ft(I,"RID",u),Ft(I,"CVER",22),this.G&&Ft(I,"X-HTTP-Session-Id",this.G),mu(this,I),B&&(this.R?p="headers="+pe(rT(B))+"&"+p:this.u&&Mg(I,this.u,B)),gr(this.h,F),this.Ra&&Ft(I,"TYPE","init"),this.S?(Ft(I,"$req",p),Ft(I,"SID","null"),F.U=!0,dt(F,I,null)):dt(F,I,p),this.I=2}}else this.I==3&&(u?uT(this,u):this.i.length==0||Pr(this.h)||uT(this))};function uT(u,p){var I;p?I=p.l:I=u.V++;const N=yr(u.J);Ft(N,"SID",u.M),Ft(N,"RID",I),Ft(N,"AID",u.K),mu(u,N),u.u&&u.o&&Mg(N,u.u,u.o),I=new Be(u,u.j,I,u.D+1),u.u===null&&(I.J=u.o),p&&(u.i=p.G.concat(u.i)),p=dT(u,I,1e3),I.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),gr(u.h,I),dt(I,N,p)}function mu(u,p){u.H&&V(u.H,function(I,N){Ft(p,N,I)}),u.l&&V({},function(I,N){Ft(p,N,I)})}function dT(u,p,I){I=Math.min(u.i.length,I);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var F=u.i;let Ze=-1;for(;;){const bn=["count="+I];Ze==-1?I>0?(Ze=F[0].g,bn.push("ofs="+Ze)):Ze=0:bn.push("ofs="+Ze);let Pt=!0;for(let Cn=0;Cn<I;Cn++){var B=F[Cn].g;const Ns=F[Cn].map;if(B-=Ze,B<0)Ze=Math.max(0,F[Cn].g-100),Pt=!1;else try{B="req"+B+"_"||"";try{var ce=Ns instanceof Map?Ns:Object.entries(Ns);for(const[sa,$i]of ce){let Bi=$i;a($i)&&(Bi=ks($i)),bn.push(B+sa+"="+encodeURIComponent(Bi))}}catch(sa){throw bn.push(B+"type="+encodeURIComponent("_badmap")),sa}}catch{N&&N(Ns)}}if(Pt){ce=bn.join("&");break e}}ce=void 0}return u=u.i.splice(0,I),p.G=u,ce}function hT(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;k||A(),L||(k(),L=!0),R.add(p,u),u.A=0}}function Ug(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ye(c(u.Da,u),pT(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,fT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ye(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,me(10),Nh(this),fT(this))};function jg(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function fT(u){u.g=new Be(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=yr(u.na);Ft(p,"RID","rpc"),Ft(p,"SID",u.M),Ft(p,"AID",u.K),Ft(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ft(p,"TO",u.ia),Ft(p,"TYPE","xmlhttp"),mu(u,p),u.u&&u.o&&Mg(p,u.u,u.o),u.O&&(u.g.H=u.O);var I=u.g;u=u.ba,I.M=1,I.A=Ch(yr(p)),I.u=null,I.R=!0,ot(I,u)}t.Va=function(){this.C!=null&&(this.C=null,Nh(this),Ug(this),me(19))};function Lh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function mT(u,p){var I=null;if(u.g==p){Lh(u),jg(u),u.g=null;var N=2}else if(Jr(u.h,p))I=p.G,Xr(u.h,p),N=1;else return;if(u.I!=0){if(p.o)if(N==1){I=p.u?p.u.length:0,p=Date.now()-p.F;var F=u.D;N=le(),vn(N,new Fe(N,I)),Oh(u)}else hT(u);else if(F=p.m,F==3||F==0&&p.X>0||!(N==1&&q2(u,p)||N==2&&Ug(u)))switch(I&&I.length>0&&(p=u.h,p.i=p.i.concat(I)),F){case 1:ra(u,5);break;case 4:ra(u,10);break;case 3:ra(u,6);break;default:ra(u,2)}}}function pT(u,p){let I=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(I*=2),I*p}function ra(u,p){if(u.j.info("Error code "+p),p==2){var I=c(u.bb,u),N=u.Ua;const F=!N;N=new Zr(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||tt(N,"https"),Ch(N),F?U2(N.toString(),I):j2(N.toString(),I)}else me(2);u.I=0,u.l&&u.l.pa(p),gT(u),cT(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function gT(u){if(u.I=0,u.ja=[],u.l){const p=Ds(u.h);(p.length!=0||u.i.length!=0)&&(w(u.ja,p),w(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function yT(u,p,I){var N=I instanceof Zr?yr(I):new Zr(I);if(N.g!="")p&&(N.g=p+"."+N.g),vr(N,N.u);else{var F=o.location;N=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;const B=new Zr(null);N&&tt(B,N),p&&(B.g=p),F&&vr(B,F),I&&(B.h=I),N=B}return I=u.G,p=u.wa,I&&p&&Ft(N,I,p),Ft(N,"VER",u.ka),mu(u,N),N}function vT(u,p,I){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new sn(new Vg({ab:I})):new sn(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wT(){}t=wT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Vh(){}Vh.prototype.g=function(u,p){return new Cr(u,p)};function Cr(u,p){vt.call(this),this.g=new lT(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!C(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ml(this)}h(Cr,vt),Cr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cr.prototype.close=function(){Fg(this.g)},Cr.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var I={};I.__data__=u,u=I}else this.v&&(I={},I.__data__=ks(u),u=I);p.i.push(new wn(p.Ya++,u)),p.I==3&&Oh(p)},Cr.prototype.N=function(){this.g.l=null,delete this.j,Fg(this.g),delete this.g,Cr.Z.N.call(this)};function _T(u){Z.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const I in p){u=I;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}h(_T,Z);function ET(){q.call(this),this.status=1}h(ET,q);function ml(u){this.g=u}h(ml,wT),ml.prototype.ra=function(){vn(this.g,"a")},ml.prototype.qa=function(u){vn(this.g,new _T(u))},ml.prototype.pa=function(u){vn(this.g,new ET)},ml.prototype.oa=function(){vn(this.g,"b")},Vh.prototype.createWebChannel=Vh.prototype.g,Cr.prototype.send=Cr.prototype.o,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,Lk=function(){return new Vh},Ok=function(){return le()},Nk=Q,xw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,zf=wt,Ke.COMPLETE="complete",Dk=Ke,J.EventType=W,W.OPEN="a",W.CLOSE="b",W.ERROR="c",W.MESSAGE="d",vt.prototype.listen=vt.prototype.J,ju=J,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,kk=sn}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const tb="@firebase/firestore",nb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qn.UNAUTHENTICATED=new Qn(null),Qn.GOOGLE_CREDENTIALS=new Qn("google-credentials-uid"),Qn.FIRST_PARTY=new Qn("first-party-uid"),Qn.MOCK_USER=new Qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new Zp("@firebase/firestore");function Al(){return Mo.logLevel}function Vk(t){Mo.setLogLevel(t)}function ee(t,...e){if(Mo.logLevel<=at.DEBUG){const n=e.map(U0);Mo.debug(`Firestore (${Jc}): ${t}`,...n)}}function mn(t,...e){if(Mo.logLevel<=at.ERROR){const n=e.map(U0);Mo.error(`Firestore (${Jc}): ${t}`,...n)}}function Fo(t,...e){if(Mo.logLevel<=at.WARN){const n=e.map(U0);Mo.warn(`Firestore (${Jc}): ${t}`,...n)}}function U0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Mk(t,r,n)}function Mk(t,e,n){let r=`FIRESTORE (${Jc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mn(r),new Error(r)}function Pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Mk(e,s,r)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qn.UNAUTHENTICATED))}shutdown(){}}class M9{constructor(e){this.t=e,this.currentUser=Qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new is;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new is,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new is)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new V9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Qn(e)}}class F9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new F9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new rb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=$9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function He(t,e){return t<e?-1:t>e?1:0}function Rw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ly(s)===Ly(i)?He(s,i):Ly(s)?1:-1}return He(t.length,e.length)}const B9=55296,z9=57343;function Ly(t){const e=t.charCodeAt(0);return e>=B9&&e<=z9}function _c(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function Uk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="__name__";class Vs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Vs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return He(e.length,n.length)}static compareSegments(e,n){const r=Vs.isNumericId(e),s=Vs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Vs.extractNumericId(e).compare(Vs.extractNumericId(n)):Rw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class _t extends Vs{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const W9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Vs{construct(e,n,r){return new Gt(e,n,r)}static isValidIdentifier(e){return W9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sb}static keyField(){return new Gt([sb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new se(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new se(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(_t.fromString(e))}static fromName(e){return new de(_t.fromString(e).popFirst(5))}static empty(){return new de(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t,e,n){if(!n)throw new se(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $k(t,e,n,r){if(e===!0&&r===!0)throw new se(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ib(t){if(!de.isDocumentKey(t))throw new se(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ob(t){if(de.isDocumentKey(t))throw new se(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function rg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rg(t);throw new se(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function q9(t,e){if(e<=0)throw new se(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function mh(t,e){if(!Bk(t))throw new se(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=-62135596800,lb=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*lb);return new yt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ab)throw new se(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lb}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mh(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ab;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Tn("string",yt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new yt(0,0))}static max(){return new Ce(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=-1;class Qm{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Pw(t){return t.fields.find(e=>e.kind===2)}function ca(t){return t.fields.filter(e=>e.kind!==2)}Qm.UNKNOWN_ID=-1;class Wf{constructor(e,n){this.fieldPath=e,this.kind=n}}class $d{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new $d(0,qr.min())}}function zk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new qr(s,de.empty(),e)}function Wk(t){return new qr(t.readTime,t.key,Ec)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(Ce.min(),de.empty(),Ec)}static max(){return new qr(Ce.max(),de.empty(),Ec)}}function j0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==qk)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="SimpleDb";class sg{static open(e,n,r,s){try{return new sg(n,e.transaction(s,r))}catch(i){throw new nd(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new is,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new nd(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=$0(r.target.error);this.S.reject(new nd(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Dr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new K9(n)}}class Co{static delete(e){return ee(Dr,"Removing database:",e),ha(BC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!D0())return!1;if(Co.F())return!0;const e=zn(),n=Co.M(e),r=0<n&&n<10,s=Kk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Co.M(zn())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Dr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new nd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new se(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new se(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new nd(e,o))},s.onupgradeneeded=i=>{ee(Dr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{ee(Dr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=sg.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ee(Dr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Kk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class H9{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ha(this.U.delete())}}class nd extends se{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Yo(t){return t.name==="IndexedDbTransactionError"}class K9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ee(Dr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee(Dr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ha(r)}add(e){return ee(Dr,"ADD",this.store.name,e,e),ha(this.store.add(e))}get(e){return ha(this.store.get(e)).next(n=>(n===void 0&&(n=null),ee(Dr,"GET",this.store.name,e,n),n))}delete(e){return ee(Dr,"DELETE",this.store.name,e),ha(this.store.delete(e))}count(){return ee(Dr,"COUNT",this.store.name),ha(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){ee(Dr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=$0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new H9(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ha(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=$0(r.target.error);n(s)}})}let cb=!1;function $0(t){const e=Co.M(zn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cb||(cb=!0,setTimeout(()=>{throw r},0)),r}}return t}const rd="IndexBackfiller";class G9{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(rd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();ee(rd,`Documents written: ${n}`)}catch(n){Yo(n)?ee(rd,"Ignoring IndexedDB error during index backfill: ",n):await Qo(n)}await this.re(6e4)})}}class Q9{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return ee(rd,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(ee(rd,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Wk(i);j0(o,r)>0&&(r=o)}),new qr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ir.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=-1;function ig(t){return t==null}function Bd(t){return t===0&&1/t==-1/0}function Gk(t){return typeof t=="number"&&Number.isInteger(t)&&!Bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="";function er(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ub(e)),e=Y9(t.get(n),e);return ub(e)}function Y9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Ym:n+="";break;default:n+=i}}return n}function ub(t){return t+Ym+""}function Ws(t){const e=t.length;if(Pe(e>=2,64408,{path:t}),e===2)return Pe(t.charAt(0)===Ym&&t.charAt(1)==="",56145,{path:t}),_t.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Ym,i);switch((o<0||o>n)&&Te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Te(61167,{path:t})}i=o+2}return new _t(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="remoteDocuments",ph="owner",gl="owner",zd="mutationQueues",J9="userId",ps="mutations",db="batchId",Ia="userMutationsIndex",hb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t,e){return[t,er(e)]}function Qk(t,e,n){return[t,er(e),n]}const X9={},Tc="documentMutations",Jm="remoteDocumentsV14",Z9=["prefixPath","collectionGroup","readTime","documentId"],Hf="documentKeyIndex",ez=["prefixPath","collectionGroup","documentId"],Yk="collectionGroupIndex",tz=["collectionGroup","readTime","prefixPath","documentId"],Wd="remoteDocumentGlobal",Cw="remoteDocumentGlobalKey",Ic="targets",Jk="queryTargetsIndex",nz=["canonicalId","targetId"],Sc="targetDocuments",rz=["targetId","path"],B0="documentTargetsIndex",sz=["path","targetId"],Xm="targetGlobalKey",$a="targetGlobal",qd="collectionParents",iz=["collectionId","parent"],bc="clientMetadata",oz="clientId",og="bundles",az="bundleId",ag="namedQueries",lz="name",z0="indexConfiguration",cz="indexId",kw="collectionGroupIndex",uz="collectionGroup",sd="indexState",dz=["indexId","uid"],Xk="sequenceNumberIndex",hz=["uid","sequenceNumber"],id="indexEntries",fz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zk="documentKeyIndex",mz=["indexId","uid","orderedDocumentKey"],lg="documentOverlays",pz=["userId","collectionPath","documentId"],Dw="collectionPathOverlayIndex",gz=["userId","collectionPath","largestBatchId"],eD="collectionGroupOverlayIndex",yz=["userId","collectionGroup","largestBatchId"],W0="globals",vz="name",tD=[zd,ps,Tc,ua,Ic,ph,$a,Sc,bc,Wd,qd,og,ag],wz=[...tD,lg],nD=[zd,ps,Tc,Jm,Ic,ph,$a,Sc,bc,Wd,qd,og,ag,lg],rD=nD,q0=[...rD,z0,sd,id],_z=q0,sD=[...q0,W0],Ez=sD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends Hk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Rn(t,e){const n=Ie(t);return Co.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new df(this.root,e,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new df(this.root,e,this.comparator,!0)}}class df{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Fn.RED,this.left=s??Fn.EMPTY,this.right=i??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Fn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Fn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mb(this.data.getIterator())}getIteratorFrom(e){return new mb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class mb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Sr([])}unionWith(e){let n=new At(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _c(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new oD("Invalid base64 string: "+i):i}}(e);return new un(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const Tz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=Tz.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ci(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="server_timestamp",lD="__type__",cD="__previous_value__",uD="__local_write_time__";function H0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lD])==null?void 0:r.stringValue)===aD}function cg(t){const e=t.mapValue.fields[cD];return H0(e)?cg(e):e}function Hd(t){const e=Pi(t.mapValue.fields[uD].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Zm="(default)";class Uo{constructor(e,n){this.projectId=e,this.database=n||Zm}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database===Zm}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="__type__",dD="__max__",po={mapValue:{fields:{__type__:{stringValue:dD}}}},G0="__vector__",Ac="value",Kf={nullValue:"NULL_VALUE"};function jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?H0(t)?4:hD(t)?9007199254740991:ug(t)?10:11:Te(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=jo(t);if(n!==jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hd(t).isEqual(Hd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Pi(s.timestampValue),a=Pi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ci(s.bytesValue).isEqual(Ci(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ht(s.geoPointValue.latitude)===Ht(i.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ht(s.integerValue)===Ht(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ht(s.doubleValue),a=Ht(i.doubleValue);return o===a?Bd(o)===Bd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return _c(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(fb(o)!==fb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return Te(52216,{left:t})}}function Kd(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function $o(t,e){if(t===e)return 0;const n=jo(t),r=jo(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ht(i.integerValue||i.doubleValue),l=Ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return pb(t.timestampValue,e.timestampValue);case 4:return pb(Hd(t),Hd(e));case 5:return Rw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ci(i),l=Ci(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=He(a[c],l[c]);if(d!==0)return d}return He(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=He(Ht(i.latitude),Ht(o.latitude));return a!==0?a:He(Ht(i.longitude),Ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,w,g;const a=i.fields||{},l=o.fields||{},c=(f=a[Ac])==null?void 0:f.arrayValue,d=(m=l[Ac])==null?void 0:m.arrayValue,h=He(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:gb(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===po.mapValue&&o===po.mapValue)return 0;if(i===po.mapValue)return 1;if(o===po.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Rw(l[h],d[h]);if(f!==0)return f;const m=$o(a[l[h]],c[d[h]]);if(m!==0)return m}return He(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function pb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=Pi(t),r=Pi(e),s=He(n.seconds,r.seconds);return s!==0?s:He(n.nanos,r.nanos)}function gb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$o(n[s],r[s]);if(i)return i}return He(n.length,r.length)}function xc(t){return Ow(t)}function Ow(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ow(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ow(n.fields[o])}`;return s+"}"}(t.mapValue):Te(61005,{value:t})}function Gf(t){switch(jo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cg(t);return e?16+Gf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ci(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Gf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Jo(r.fields,(i,o)=>{s+=i.length+Gf(o)}),s}(t.mapValue);default:throw Te(13486,{value:t})}}function Gd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lw(t){return!!t&&"integerValue"in t}function Qd(t){return!!t&&"arrayValue"in t}function yb(t){return!!t&&"nullValue"in t}function vb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qf(t){return!!t&&"mapValue"in t}function ug(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[K0])==null?void 0:r.stringValue)===G0}function od(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Jo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=od(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=od(t.arrayValue.values[n]);return e}return{...t}}function hD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}const fD={mapValue:{fields:{[K0]:{stringValue:G0},[Ac]:{arrayValue:{}}}}};function Sz(t){return"nullValue"in t?Kf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gd(Uo.empty(),de.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ug(t)?fD:{mapValue:{}}:Te(35942,{value:t})}function bz(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gd(Uo.empty(),de.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?fD:"mapValue"in t?ug(t)?{mapValue:{}}:po:Te(61959,{value:t})}function wb(t,e){const n=$o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function _b(t,e){const n=$o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=od(n)}setAll(e){let n=Gt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=od(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Qf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Qf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Jo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Xn(od(this.value))}}function mD(t){const e=[];return Jo(t.fields,(n,r)=>{const s=new Gt([n]);if(Qf(r)){const i=mD(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,Ce.min(),Ce.min(),Ce.min(),Xn.empty(),0)}static newFoundDocument(e,n,r,s){return new cn(e,1,n,Ce.min(),r,s,0)}static newNoDocument(e,n){return new cn(e,2,n,Ce.min(),Ce.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Ce.min(),Ce.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.position=e,this.inclusive=n}}function Eb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=$o(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n="asc"){this.field=e,this.dir=n}}function Az(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{}class ct extends pD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xz(e,n,r):n==="array-contains"?new Cz(e,r):n==="in"?new ED(e,r):n==="not-in"?new kz(e,r):n==="array-contains-any"?new Dz(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Rz(e,r):new Pz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($o(n,this.value)):n!==null&&jo(this.value)===jo(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends pD{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new St(e,n)}matches(e){return Pc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pc(t){return t.op==="and"}function Vw(t){return t.op==="or"}function Q0(t){return gD(t)&&Pc(t)}function gD(t){for(const e of t.filters)if(e instanceof St)return!1;return!0}function Mw(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+xc(t.value);if(Q0(t))return t.filters.map(e=>Mw(e)).join(",");{const e=t.filters.map(n=>Mw(n)).join(",");return`${t.op}(${e})`}}function yD(t,e){return t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.field.isEqual(s.field)&&ti(r.value,s.value)}(t,e):t instanceof St?function(r,s){return s instanceof St&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&yD(o,s.filters[a]),!0):!1}(t,e):void Te(19439)}function vD(t,e){const n=t.filters.concat(e);return St.create(n,t.op)}function wD(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${xc(n.value)}`}(t):t instanceof St?function(n){return n.op.toString()+" {"+n.getFilters().map(wD).join(" ,")+"}"}(t):"Filter"}class xz extends ct{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class Rz extends ct{constructor(e,n){super(e,"in",n),this.keys=_D("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Pz extends ct{constructor(e,n){super(e,"not-in",n),this.keys=_D("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _D(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class Cz extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qd(n)&&Kd(n.arrayValue,this.value)}}class ED extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kd(this.value.arrayValue,n)}}class kz extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kd(this.value.arrayValue,n)}}class Dz extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Fw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Nz(t,e,n,r,s,i,o)}function Ja(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ig(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xc(r)).join(",")),e.Te=n}return e.Te}function gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Az(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tb(t.startAt,e.startAt)&&Tb(t.endAt,e.endAt)}function ep(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function tp(t,e){return t.filters.filter(n=>n instanceof ct&&n.field.isEqual(e))}function Ib(t,e,n){let r=Kf,s=!0;for(const i of tp(t,e)){let o=Kf,a=!0;switch(i.op){case"<":case"<=":o=Sz(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Kf}wb({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];wb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Sb(t,e,n){let r=po,s=!0;for(const i of tp(t,e)){let o=po,a=!0;switch(i.op){case">=":case">":o=bz(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=po}_b({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];_b({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TD(t,e,n,r,s,i,o,a){return new Xc(t,e,n,r,s,i,o,a)}function yh(t){return new Xc(t)}function bb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ID(t){return t.collectionGroup!==null}function ad(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new At(Gt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Yd(i,r))}),n.has(Gt.keyField().canonicalString())||e.Ie.push(new Yd(Gt.keyField(),r))}return e.Ie}function zr(t){const e=Ie(t);return e.Ee||(e.Ee=Oz(e,ad(t))),e.Ee}function Oz(t,e){if(t.limitType==="F")return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yd(s.field,i)});const n=t.endAt?new Rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rc(t.startAt.position,t.startAt.inclusive):null;return Fw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uw(t,e){const n=t.filters.concat([e]);return new Xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function np(t,e,n){return new Xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dg(t,e){return gh(zr(t),zr(e))&&t.limitType===e.limitType}function SD(t){return`${Ja(zr(t))}|lt:${t.limitType}`}function xl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>wD(s)).join(", ")}]`),ig(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xc(s)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function vh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):de.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ad(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Eb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ad(r),s)||r.endAt&&!function(o,a,l){const c=Eb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ad(r),s))}(t,e)}function bD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AD(t){return(e,n)=>{let r=!1;for(const s of ad(t)){const i=Lz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Lz(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?$o(l,c):Te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return iD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=new Lt(de.comparator);function Fr(){return Vz}const xD=new Lt(de.comparator);function $u(...t){let e=xD;for(const n of t)e=e.insert(n.key,n);return e}function RD(t){let e=xD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qs(){return ld()}function PD(){return ld()}function ld(){return new Vi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mz=new Lt(de.comparator),Fz=new At(de.comparator);function rt(...t){let e=Fz;for(const n of t)e=e.add(n);return e}const Uz=new At(He);function Y0(){return Uz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function CD(t){return{integerValue:""+t}}function jz(t,e){return Gk(e)?CD(e):J0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this._=void 0}}function $z(t,e,n){return t instanceof Cc?function(s,i){const o={fields:{[lD]:{stringValue:aD},[uD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&H0(i)&&(i=cg(i)),i&&(o.fields[cD]=i),{mapValue:o}}(n,e):t instanceof Xa?DD(t,e):t instanceof kc?ND(t,e):function(s,i){const o=kD(s,i),a=Ab(o)+Ab(s.Ae);return Lw(o)&&Lw(s.Ae)?CD(a):J0(s.serializer,a)}(t,e)}function Bz(t,e,n){return t instanceof Xa?DD(t,e):t instanceof kc?ND(t,e):n}function kD(t,e){return t instanceof Jd?function(r){return Lw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Cc extends hg{}class Xa extends hg{constructor(e){super(),this.elements=e}}function DD(t,e){const n=OD(e);for(const r of t.elements)n.some(s=>ti(s,r))||n.push(r);return{arrayValue:{values:n}}}class kc extends hg{constructor(e){super(),this.elements=e}}function ND(t,e){let n=OD(e);for(const r of t.elements)n=n.filter(s=>!ti(s,r));return{arrayValue:{values:n}}}class Jd extends hg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ab(t){return Ht(t.integerValue||t.doubleValue)}function OD(t){return Qd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.field=e,this.transform=n}}function zz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xa&&s instanceof Xa||r instanceof kc&&s instanceof kc?_c(r.elements,s.elements,ti):r instanceof Jd&&s instanceof Jd?ti(r.Ae,s.Ae):r instanceof Cc&&s instanceof Cc}(t.transform,e.transform)}class Wz{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fg{}function LD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mg(t.key,Zn.none()):new Zc(t.key,t.data,Zn.none());{const n=t.data,r=Xn.empty();let s=new At(Gt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Mi(t.key,r,new Sr(s.toArray()),Zn.none())}}function qz(t,e,n){t instanceof Zc?function(s,i,o){const a=s.value.clone(),l=Rb(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mi?function(s,i,o){if(!Yf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Rb(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(VD(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cd(t,e,n,r){return t instanceof Zc?function(i,o,a,l){if(!Yf(i.precondition,o))return a;const c=i.value.clone(),d=Pb(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mi?function(i,o,a,l){if(!Yf(i.precondition,o))return a;const c=Pb(i.fieldTransforms,l,o),d=o.data;return d.setAll(VD(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Yf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Hz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=kD(r.transform,s||null);i!=null&&(n===null&&(n=Xn.empty()),n.set(r.field,i))}return n||null}function xb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_c(r,s,(i,o)=>zz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zc extends fg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mi extends fg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rb(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Bz(o,a,n[s]))}return r}function Pb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,$z(i,o,e))}return r}class mg extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MD extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&qz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PD();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=LD(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),rt())}isEqual(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,(n,r)=>xb(n,r))&&_c(this.baseMutations,e.baseMutations,(n,r)=>xb(n,r))}}class eE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Mz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new eE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,pt;function Gz(t){switch(t){case z.OK:return Te(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function FD(t){if(t===void 0)return mn("GRPC error has no .code"),z.UNKNOWN;switch(t){case _n.OK:return z.OK;case _n.CANCELLED:return z.CANCELLED;case _n.UNKNOWN:return z.UNKNOWN;case _n.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case _n.INTERNAL:return z.INTERNAL;case _n.UNAVAILABLE:return z.UNAVAILABLE;case _n.UNAUTHENTICATED:return z.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case _n.NOT_FOUND:return z.NOT_FOUND;case _n.ALREADY_EXISTS:return z.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return z.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case _n.ABORTED:return z.ABORTED;case _n.OUT_OF_RANGE:return z.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return z.UNIMPLEMENTED;case _n.DATA_LOSS:return z.DATA_LOSS;default:return Te(39323,{code:t})}}(pt=_n||(_n={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=new Po([4294967295,4294967295],0);function Cb(t){const e=Qz().encode(t),n=new Ck;return n.update(e),new Uint8Array(n.digest())}function kb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Po([n,r],0),new Po([s,i],0)]}class nE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bu(`Invalid padding: ${n}`);if(r<0)throw new Bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Po.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Po.fromNumber(r)));return s.compare(Yz)===1&&(s=new Po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cb(e),[r,s]=kb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new nE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Cb(e),[r,s]=kb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wh(Ce.min(),s,new Lt(He),Fr(),rt())}}class _h{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _h(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class UD{constructor(e,n){this.targetId=e,this.Ce=n}}class jD{constructor(e,n,r=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Db{constructor(){this.ve=0,this.Fe=Nb(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),n=rt(),r=rt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:i})}}),new _h(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Nb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Jz{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fr(),this.Je=hf(),this.He=hf(),this.Ye=new Lt(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ep(i))if(r===0){const o=new de(i.path);this.et(n,o,cn.newNoDocument(o,Ce.min()))}else Pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ci(r).toUint8Array()}catch(l){if(l instanceof oD)return Fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new nE(o,s,i)}catch(l){return Fo(l instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&ep(a.target)){const l=new de(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,cn.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=rt();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new wh(e,n,this.Ye,this.je,r);return this.je=Fr(),this.Je=hf(),this.He=hf(),this.Ye=new Lt(He),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Db,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new At(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new At(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Db),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hf(){return new Lt(de.comparator)}function Nb(){return new Lt(de.comparator)}const Xz={asc:"ASCENDING",desc:"DESCENDING"},Zz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eW={and:"AND",or:"OR"};class tW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jw(t,e){return t.useProto3Json||ig(e)?e:{value:e}}function Dc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $D(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nW(t,e){return Dc(t,e.toTimestamp())}function ur(t){return Pe(!!t,49232),Ce.fromTimestamp(function(n){const r=Pi(n);return new yt(r.seconds,r.nanos)}(t))}function rE(t,e){return $w(t,e).canonicalString()}function $w(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BD(t){const e=_t.fromString(t);return Pe(JD(e),10190,{key:e.toString()}),e}function rp(t,e){return rE(t.databaseId,e.path)}function Ba(t,e){const n=BD(e);if(n.get(1)!==t.databaseId.projectId)throw new se(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(qD(n))}function zD(t,e){return rE(t.databaseId,e)}function WD(t){const e=BD(t);return e.length===4?_t.emptyPath():qD(e)}function Bw(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qD(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ob(t,e,n){return{name:rp(t,e),fields:n.value.mapValue.fields}}function rW(t,e,n){const r=Ba(t,e.name),s=ur(e.updateTime),i=e.createTime?ur(e.createTime):Ce.min(),o=new Xn({mapValue:{fields:e.fields}}),a=cn.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function sW(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string",58123),un.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),un.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?z.UNKNOWN:FD(c.code);return new se(d,c.message||"")}(o);n=new jD(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ba(t,r.document.name),i=ur(r.document.updateTime),o=r.document.createTime?ur(r.document.createTime):Ce.min(),a=new Xn({mapValue:{fields:r.document.fields}}),l=cn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Jf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ba(t,r.document),i=r.readTime?ur(r.readTime):Ce.min(),o=cn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Jf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ba(t,r.document),i=r.removedTargetIds||[];n=new Jf([],i,s,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Kz(s,i),a=r.targetId;n=new UD(a,o)}}return n}function sp(t,e){let n;if(e instanceof Zc)n={update:Ob(t,e.key,e.value)};else if(e instanceof mg)n={delete:rp(t,e.key)};else if(e instanceof Mi)n={update:Ob(t,e.key,e.data),updateMask:uW(e.fieldMask)};else{if(!(e instanceof MD))return Te(16599,{Vt:e.type});n={verify:rp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof kc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:nW(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Te(27497)}(t,e.precondition)),n}function zw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Zn.updateTime(ur(i.updateTime)):i.exists!==void 0?Zn.exists(i.exists):Zn.none()}(e.currentDocument):Zn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Pe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Cc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Xa(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new kc(d)}else"increment"in a?l=new Jd(o,a.increment):Te(16584,{proto:a});const c=Gt.fromServerFormat(a.fieldPath);return new X0(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Ba(t,e.update.name),i=new Xn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Sr(c.map(d=>Gt.fromServerFormat(d)))}(e.updateMask);return new Mi(s,i,o,n,r)}return new Zc(s,i,n,r)}if(e.delete){const s=Ba(t,e.delete);return new mg(s,n)}if(e.verify){const s=Ba(t,e.verify);return new MD(s,n)}return Te(1463,{proto:e})}function iW(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?ur(s.updateTime):ur(i);return o.isEqual(Ce.min())&&(o=ur(i)),new Wz(o,s.transformResults||[])}(n,e))):[]}function HD(t,e){return{documents:[zD(t,e.path)]}}function KD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zD(t,s);const i=function(c){if(c.length!==0)return YD(St.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Rl(f.field),direction:aW(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function GD(t){let e=WD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=QD(h);return f instanceof St&&Q0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new Yd(Pl(w.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,ig(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Rc(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Rc(m,f)}(n.endAt)),TD(e,s,o,i,a,"F",l,c)}function oW(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pl(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Pl(n.unaryFilter.field);return ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Pl(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pl(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(Pl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return St.create(n.compositeFilter.filters.map(r=>QD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(t):Te(30097,{filter:t})}function aW(t){return Xz[t]}function lW(t){return Zz[t]}function cW(t){return eW[t]}function Rl(t){return{fieldPath:t.canonicalString()}}function Pl(t){return Gt.fromServerFormat(t.fieldPath)}function YD(t){return t instanceof ct?function(n){if(n.op==="=="){if(vb(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NAN"}};if(yb(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vb(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NAN"}};if(yb(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rl(n.field),op:lW(n.op),value:n.value}}}(t):t instanceof St?function(n){const r=n.getFilters().map(s=>YD(s));return r.length===1?r[0]:{compositeFilter:{op:cW(n.op),filters:r}}}(t):Te(54877,{filter:t})}function uW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r,s,i=Ce.min(),o=Ce.min(),a=un.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.yt=e}}function dW(t,e){let n;if(e.document)n=rW(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=de.fromSegments(e.noDocument.path),s=el(e.noDocument.readTime);n=cn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const r=de.fromSegments(e.unknownDocument.path),s=el(e.unknownDocument.version);n=cn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new yt(s[0],s[1]);return Ce.fromTimestamp(i)}(e.readTime)),n}function Lb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ip(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:rp(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Dc(i,o.version.toTimestamp()),createTime:Dc(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Za(e.version)}}return r}function ip(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function el(t){const e=new yt(t.seconds,t.nanoseconds);return Ce.fromTimestamp(e)}function fa(t,e){const n=(e.baseMutations||[]).map(i=>zw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>zw(t.yt,i)),s=yt.fromMillis(e.localWriteTimeMs);return new Z0(e.batchId,s,n,r)}function zu(t){const e=el(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?el(t.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Pe(o===1,1966,{count:o}),zr(yh(WD(i.documents[0])))}(t.query):function(i){return zr(GD(i))}(t.query),new pi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,un.fromBase64String(t.resumeToken))}function ZD(t,e){const n=Za(e.snapshotVersion),r=Za(e.lastLimboFreeSnapshotVersion);let s;s=ep(e.target)?HD(t.yt,e.target):KD(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function eN(t){const e=GD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?np(e,e.limit,"L"):e}function Vy(t,e){return new tE(e.largestBatchId,zw(t.yt,e.overlayMutation))}function Vb(t,e){const n=e.path.lastSegment();return[t,er(e.path.popLast()),n]}function Mb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Za(r.readTime),documentKey:er(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{getBundleMetadata(e,n){return Fb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:el(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return Fb(e).put(function(s){return{bundleId:s.id,createTime:Za(ur(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Ub(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:eN(i.bundledQuery),readTime:el(i.readTime)}}(r)})}saveNamedQuery(e,n){return Ub(e).put(function(s){return{name:s.name,readTime:Za(ur(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function Fb(t){return Rn(t,og)}function Ub(t){return Rn(t,ag)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new pg(e,r)}getOverlay(e,n){return bu(e).get(Vb(this.userId,n)).next(r=>r?Vy(this.serializer,r):null)}getOverlays(e,n){const r=qs();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new tE(n,o);s.push(this.St(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(er(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(bu(e).Z(Dw,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=qs(),i=er(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return bu(e).J(Dw,o).next(a=>{for(const l of a){const c=Vy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=qs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bu(e).ee({index:eD,range:a},(l,c,d)=>{const h=Vy(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return bu(e).put(function(s,i,o){const[a,l,c]=Vb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function bu(t){return Rn(t,lg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{bt(e){return Rn(e,W0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?un.fromUint8Array(r):un.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ht(e.integerValue));else if("doubleValue"in e){const r=Ht(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Bd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Pi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ci(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?hD(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ug(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Ac,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ht(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),de.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ma.Kt=new ma;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=255;function mW(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function jb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=mW(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class pW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=jb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=jb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(vl),this.sn(255)}_n(){this.an(vl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===vl?(this.sn(vl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===vl?(this.an(vl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class gW{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class yW{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Au{constructor(){this.cn=new pW,this.ln=new gW(this.cn),this.hn=new yW(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new pa(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Xf(this.En),directionalValue:Xf(this.dn),orderedDocumentKey:Xf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ki(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=$b(t.En,e.En),n!==0?n:(n=$b(t.dn,e.dn),n!==0?n:de.comparator(t.In,e.In)))}function $b(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Xf(t){return GC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function Bb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class zb{constructor(e){this.mn=new At((n,r)=>Gt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Pe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Pw(e);if(n!==void 0&&!this.wn(n))return!1;const r=ca(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new At(Gt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Wf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wf(r.field,r.dir==="asc"?0:1)));return new Qm(Qm.UNKNOWN_ID,this.collectionId,n,$d.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){var n,r;if(Pe(t instanceof ct||t instanceof St,20012),t instanceof ct){if(t instanceof ED){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ct.create(t.field,"==",i)))||[];return St.create(s,"or")}return t}const e=t.filters.map(s=>tN(s));return St.create(e,t.op)}function vW(t){if(t.getFilters().length===0)return[];const e=Hw(tN(t));return Pe(nN(e),7391),Ww(e)||qw(e)?[e]:e.getFilters()}function Ww(t){return t instanceof ct}function qw(t){return t instanceof St&&Q0(t)}function nN(t){return Ww(t)||qw(t)||function(n){if(n instanceof St&&Vw(n)){for(const r of n.getFilters())if(!Ww(r)&&!qw(r))return!1;return!0}return!1}(t)}function Hw(t){if(Pe(t instanceof ct||t instanceof St,34018),t instanceof ct)return t;if(t.filters.length===1)return Hw(t.filters[0]);const e=t.filters.map(r=>Hw(r));let n=St.create(e,t.op);return n=op(n),nN(n)?n:(Pe(n instanceof St,64498),Pe(Pc(n),40251),Pe(n.filters.length>1,57927),n.filters.reduce((r,s)=>sE(r,s)))}function sE(t,e){let n;return Pe(t instanceof ct||t instanceof St,38388),Pe(e instanceof ct||e instanceof St,25473),n=t instanceof ct?e instanceof ct?function(s,i){return St.create([s,i],"and")}(t,e):Wb(t,e):e instanceof ct?Wb(e,t):function(s,i){if(Pe(s.filters.length>0&&i.filters.length>0,48005),Pc(s)&&Pc(i))return vD(s,i.getFilters());const o=Vw(s)?s:i,a=Vw(s)?i:s,l=o.filters.map(c=>sE(c,a));return St.create(l,"or")}(t,e),op(n)}function Wb(t,e){if(Pc(e))return vD(e,t.getFilters());{const n=e.filters.map(r=>sE(t,r));return St.create(n,"or")}}function op(t){if(Pe(t instanceof ct||t instanceof St,11850),t instanceof ct)return t;const e=t.getFilters();if(e.length===1)return op(e[0]);if(gD(t))return t;const n=e.map(s=>op(s)),r=[];return n.forEach(s=>{s instanceof ct?r.push(s):s instanceof St&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:St.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(){this.Cn=new iE}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(qr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class iE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new At(_t.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new At(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="IndexedDbIndexManager",ff=new Uint8Array(0);class _W{constructor(e,n){this.databaseId=n,this.vn=new iE,this.Fn=new Vi(r=>Ja(r),(r,s)=>gh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:er(s)};return Hb(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Uk(n),""],!1,!0);return Hb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Ws(o.parent))}return r})}addFieldIndex(e,n){const r=xu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=_l(e);return i.next(a=>{o.put(Mb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=xu(e),s=_l(e),i=wl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xu(e),r=wl(e),s=_l(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new zb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=wl(e);let s=!0;const i=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=rt();const a=[];return M.forEach(i,(l,c)=>{ee(qb,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${Ja(n)}`);const d=function(_,x){const k=Pw(x);if(k===void 0)return null;for(const L of tp(_,k.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(_,x){const k=new Map;for(const L of ca(x))for(const R of tp(_,L.fieldPath))switch(R.op){case"==":case"in":k.set(L.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return k.set(L.fieldPath.canonicalString(),R.value),Array.from(k.values())}return null}(c,l),f=function(_,x){const k=[];let L=!0;for(const R of ca(x)){const A=R.kind===0?Ib(_,R.fieldPath,_.startAt):Sb(_,R.fieldPath,_.startAt);k.push(A.value),L&&(L=A.inclusive)}return new Rc(k,L)}(c,l),m=function(_,x){const k=[];let L=!0;for(const R of ca(x)){const A=R.kind===0?Sb(_,R.fieldPath,_.endAt):Ib(_,R.fieldPath,_.endAt);k.push(A.value),L&&(L=A.inclusive)}return new Rc(k,L)}(c,l),w=this.On(l,c,f),g=this.On(l,c,m),y=this.Nn(l,c,h),E=this.Bn(l.indexId,d,w,f.inclusive,g,m.inclusive,y);return M.forEach(E,v=>r.Y(v,n.limit).next(_=>{_.forEach(x=>{const k=de.fromSegments(x.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=vW(St.create(e.filters,"and")).map(r=>Fw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):ff,m=this.kn(e,f,r[h%c],s),w=this.qn(e,f,i[h%c],o),g=a.map(y=>this.kn(e,f,y,!0));d.push(...this.createRange(m,w,g))}return d}kn(e,n,r,s){const i=new pa(e,de.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new pa(e,de.empty(),n,r);return s?i.An():i}xn(e,n){const r=new zb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return M.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new At(Gt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Au;for(const s of ca(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);ma.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Au;return ma.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Au;return ma.Kt.Dt(Gd(this.databaseId,n),r.Pn(function(i){const o=ca(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Au);let i=0;for(const o of ca(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Qd(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);ma.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Au;l.seed(a.un()),ma.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ct&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xu(e),s=_l(e);return(n?r.J(kw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new $d(h.sequenceNumber,new qr(el(h.readTime),new de(Ws(h.documentKey)),h.largestBatchId)):$d.empty(),m=d.fields.map(([w,g])=>new Wf(Gt.fromServerFormat(w),g));return new Qm(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:He(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=xu(e),i=_l(e);return this.Gn(e).next(o=>s.J(kw,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(Mb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?M.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return wl(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return wl(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=wl(e);let i=new At(Ki);return s.ee({index:Zk,range:IDBKeyRange.only([r.indexId,this.uid,Xf(this.$n(r,n))])},(o,a)=>{i=i.add(new pa(r.indexId,n,Bb(a.arrayValue),Bb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new At(Ki);const s=this.Qn(n,e);if(s==null)return r;const i=Pw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Qd(o))for(const a of o.arrayValue.values||[])r=r.add(new pa(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new pa(n.indexId,e.key,ff,s));return r}Jn(e,n,r,s,i){ee(qb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),w=c.getIterator();let g=yl(m),y=yl(w);for(;g||y;){let E=!1,v=!1;if(g&&y){const _=d(g,y);_<0?v=!0:_>0&&(E=!0)}else g!=null?v=!0:E=!0;E?(h(y),y=yl(w)):v?(f(g),g=yl(m)):(g=yl(m),y=yl(w))}}(s,i,Ki,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return _l(e).ee({index:Xk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ki(o,a)).filter((o,a,l)=>!a||Ki(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Ki(o,e),l=Ki(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,ff,de.empty()),l=s[o+1].Vn(this.uid,ff,de.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Ki(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Kb)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Te(44426))).next(Kb)}}function Hb(t){return Rn(t,qd)}function wl(t){return Rn(t,id)}function xu(t){return Rn(t,z0)}function _l(t){return Rn(t,sd)}function Kb(t){Pe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;j0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new qr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rN=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e,n){const r=t.store(ps),s=t.store(Tc),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Pe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=Qk(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return M.waitFor(i).next(()=>c)}function ap(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(rN,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);class gg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Pe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new gg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gi(e).ee({index:Ia,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Cl(e),o=Gi(e);return o.add({}).next(a=>{Pe(typeof a=="number",49019);const l=new Z0(a,n,r,s),c=function(m,w,g){const y=g.baseMutations.map(v=>sp(m.yt,v)),E=g.mutations.map(v=>sp(m.yt,v));return{userId:w,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:y,mutations:E}}(this.serializer,this.userId,l),d=[];let h=new At((f,m)=>He(f.canonicalString(),m.canonicalString()));for(const f of s){const m=Qk(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,X9))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Gi(e).get(n).next(r=>r?(Pe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),fa(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Gi(e).ee({index:Ia,range:s},(o,a,l)=>{a.userId===this.userId&&(Pe(a.batchId>=r,47524,{tr:r}),i=fa(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ja;return Gi(e).ee({index:Ia,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ja],[this.userId,Number.POSITIVE_INFINITY]);return Gi(e).J(Ia,n).next(r=>r.map(s=>fa(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=qf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Cl(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Ws(d);if(c===this.userId&&n.path.isEqual(f))return Gi(e).get(h).next(m=>{if(!m)throw Te(61480,{nr:o,batchId:h});Pe(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(fa(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(He);const s=[];return n.forEach(i=>{const o=qf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Cl(e).ee({range:a},(c,d,h)=>{const[f,m,w]=c,g=Ws(m);f===this.userId&&i.path.isEqual(g)?r=r.add(w):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=qf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new At(He);return Cl(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,w=Ws(f);h===this.userId&&r.isPrefixOf(w)?w.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Gi(e).get(i).next(o=>{if(o===null)throw Te(35274,{batchId:i});Pe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(fa(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return sN(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Cl(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Ws(i[1]);s.push(l)}else a.done()}).next(()=>{Pe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return iN(e,this.userId,n)}_r(e){return oN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:ja,lastStreamToken:""})}}function iN(t,e,n){const r=qf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Cl(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Gi(t){return Rn(t,ps)}function Cl(t){return Rn(t,Tc)}function oN(t){return Rn(t,zd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new tl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Ce.fromTimestamp(new yt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>El(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Pe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return El(e).ee((o,a)=>{const l=zu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return El(e).ee((r,s)=>{const i=zu(s);n(i)})}lr(e){return Qb(e).get(Xm).next(n=>(Pe(n!==null,2888),n))}hr(e,n){return Qb(e).put(Xm,n)}Pr(e,n){return El(e).put(ZD(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ja(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return El(e).ee({range:s,index:Jk},(o,a,l)=>{const c=zu(a);gh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=no(e);return n.forEach(o=>{const a=er(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=no(e);return M.forEach(n,i=>{const o=er(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=no(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=no(e);let i=rt();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Ws(o[1]),d=new de(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=er(n.path),s=IDBKeyRange.bound([r],[Uk(r)],!1,!0);let i=0;return no(e).ee({index:B0,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return El(e).get(n).next(r=>r?zu(r):null)}}function El(t){return Rn(t,Ic)}function Qb(t){return Rn(t,$a)}function no(t){return Rn(t,Sc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="LruGarbageCollector",aN=1048576;function Jb([t,e],[n,r]){const s=He(t,n);return s===0?He(e,r):s}class TW{constructor(e){this.Ir=e,this.buffer=new At(Jb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(Yb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yo(n)?ee(Yb,"Ignoring IndexedDB error during garbage collection: ",n):await Qo(n)}await this.Vr(3e5)})}}class IW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Ir.ce);const r=new TW(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Gb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Al()<=at.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function cN(t,e){return new IW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e,n){this.db=e,this.garbageCollector=cN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return mf(e,r)}removeReference(e,n,r){return mf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return mf(e,n)}br(e,n){return function(s,i){let o=!1;return oN(s).te(a=>iN(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ce.min()),no(e).delete(function(h){return[0,er(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return mf(e,n)}Sr(e,n){const r=no(e);let s,i=Ir.ce;return r.ee({index:B0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Ir.ce&&n(new de(Ws(s)),i),i=c,s=l):i=Ir.ce}).next(()=>{i!==Ir.ce&&n(new de(Ws(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mf(t,e){return no(t).put(function(r,s){return{targetId:0,path:er(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.changes=new Vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ia(e).put(r)}removeEntry(e,n,r){return ia(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ip(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=cn.newInvalidDocument(n);return ia(e).ee({index:Hf,range:IDBKeyRange.only(Ru(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:cn.newInvalidDocument(n)};return ia(e).ee({index:Hf,range:IDBKeyRange.only(Ru(n))},(s,i)=>{r={document:this.Cr(n,i),size:ap(i)}}).next(()=>r)}getEntries(e,n){let r=Fr();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Fr(),s=new Lt(de.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,ap(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let s=new At(eA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ru(s.first()),Ru(s.last())),o=s.getIterator();let a=o.getNext();return ia(e).ee({index:Hf,range:i},(l,c,d)=>{const h=de.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&eA(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ru(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ip(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ia(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Fr();for(const h of c){const f=this.Cr(de.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(vh(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Fr();const o=Zb(n,r),a=Zb(n,qr.max());return ia(e).ee({index:Yk,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(de.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new AW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Xb(e).get(Cw).next(n=>(Pe(!!n,20021),n))}Dr(e,n){return Xb(e).put(Cw,n)}Cr(e,n){if(n){const r=dW(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return cn.newInvalidDocument(e)}}function dN(t){return new bW(t)}class AW extends uN{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Vi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new At((i,o)=>He(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Lb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=ap(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Lb(this.Nr.serializer,o.convertToNoDocument(Ce.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Xb(t){return Rn(t,Wd)}function ia(t){return Rn(t,Jm)}function Ru(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zb(t,e){const n=e.documentKey.path.toArray();return[t,ip(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function eA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=He(n[i],r[i]),s)return s;return s=He(n.length,r.length),s||(s=He(n[n.length-2],r[r.length-2]),s||He(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&cd(r.mutation,s,Sr.empty(),yt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=rt()){const s=qs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$u();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,rt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Fr();const o=ld(),a=function(){return ld()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Mi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),cd(d.mutation,c,d.mutation.getFieldMask(),yt.now())):o.set(c.key,Sr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new xW(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ld();let s=new Lt((o,a)=>o-a),i=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Sr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||rt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=PD();d.forEach(f=>{if(!i.has(f)){const m=LD(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ID(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(qs());let a=Ec,l=i;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,rt())).next(d=>({batchId:a,changes:RD(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let s=$u();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$u();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,f){return new Xc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,cn.newInvalidDocument(d)))});let a=$u();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&cd(d.mutation,c,Sr.empty(),yt.now()),vh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ur(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:eN(s.bundledQuery),readTime:ur(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(){this.overlays=new Lt(de.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qs();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=qs(),i=n.length+1,o=new de(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Lt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=qs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=qs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tE(n,r));let i=this.qr.get(n);i===void 0&&(i=rt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.Qr=new At(Dn.$r),this.Ur=new At(Dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Dn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Dn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new de(new _t([])),r=new Dn(n,e),s=new Dn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new _t([])),r=new Dn(n,e),s=new Dn(n,e+1);let i=rt();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Dn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new At(Dn.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Z0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Dn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ja:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dn(n,0),s=new Dn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(He);return n.forEach(s=>{const i=new Dn(s,0),o=new Dn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;de.isDocumentKey(i)||(i=i.child(""));const o=new Dn(new de(i),0);let a=new At(He);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new Dn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Dn(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e){this.ri=e,this.docs=function(){return new Lt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():cn.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fr();const o=n.path,a=new de(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||j0(Wk(d),r)<=0||(s.has(d.key)||vh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Te(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NW(this)}getSize(e){return M.resolve(this.size)}}class NW extends uN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.persistence=e,this.si=new Vi(n=>Ja(n),gh),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new oE,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ir(0),this.li=!1,this.li=!0,this.hi=new CW,this.referenceDelegate=e(this),this.Pi=new OW(this),this.indexManager=new wW,this.remoteDocumentCache=function(s){return new DW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new XD(n),this.Ii=new RW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new LW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class LW extends Hk{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.Ri=new oE,this.Vi=null}static mi(e){return new yg(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=de.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class lp{constructor(e,n){this.persistence=e,this.pi=new Vi(r=>er(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=cN(this,n)}static mi(e,n){return new lp(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ce.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gf(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e){this.serializer=e}k(e,n,r,s){const i=new sg("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(ph)}(e),function(l){l.createObjectStore(zd,{keyPath:J9}),l.createObjectStore(ps,{keyPath:db,autoIncrement:!0}).createIndex(Ia,hb,{unique:!0}),l.createObjectStore(Tc)}(e),tA(e),function(l){l.createObjectStore(ua)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Sc),l.deleteObjectStore(Ic),l.deleteObjectStore($a)}(e),tA(e)),o=o.next(()=>function(l){const c=l.store($a),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return c.put(Xm,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(ps).J().next(h=>{l.deleteObjectStore(ps),l.createObjectStore(ps,{keyPath:db,autoIncrement:!0}).createIndex(Ia,hb,{unique:!0});const f=c.store(ps),m=h.map(w=>f.put(w));return M.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(bc,{keyPath:oz})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Wd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(og,{keyPath:az})})(e),function(l){l.createObjectStore(ag,{keyPath:lz})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(lg,{keyPath:pz});c.createIndex(Dw,gz,{unique:!1}),c.createIndex(eD,yz,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Jm,{keyPath:Z9});c.createIndex(Hf,ez),c.createIndex(Yk,tz)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ua))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(z0,{keyPath:cz,autoIncrement:!0}).createIndex(kw,uz,{unique:!1}),l.createObjectStore(sd,{keyPath:dz}).createIndex(Xk,hz,{unique:!1}),l.createObjectStore(id,{keyPath:fz}).createIndex(Zk,mz,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(sd).clear()}).next(()=>{n.objectStore(id).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(W0,{keyPath:vz})})(e)})),r<18&&s>=18&&GC()&&(o=o.next(()=>{n.objectStore(sd).clear()}).next(()=>{n.objectStore(id).clear()})),o}wi(e){let n=0;return e.store(ua).ee((r,s)=>{n+=ap(s)}).next(()=>{const r={byteSize:n};return e.store(Wd).put(Cw,r)})}yi(e){const n=e.store(zd),r=e.store(ps);return n.J().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,ja],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Ia,o).next(a=>M.forEach(a,l=>{Pe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=fa(this.serializer,l);return sN(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Sc),r=e.store(ua);return e.store($a).get(Xm).next(s=>{const i=[];return r.ee((o,a)=>{const l=new _t(o),c=function(h){return[0,er(h)]}(l);i.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:er(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}bi(e,n){e.createObjectStore(qd,{keyPath:iz});const r=n.store(qd),s=new iE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:er(l)})}};return n.store(ua).ee({X:!0},(o,a)=>{const l=new _t(o);return i(l.popLast())}).next(()=>n.store(Tc).ee({X:!0},([o,a,l],c)=>{const d=Ws(a);return i(d.popLast())}))}Di(e){const n=e.store(Ic);return n.ee((r,s)=>{const i=zu(s),o=ZD(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ua),s=[];return r.ee((i,o)=>{const a=n.store(Jm),l=function(h){return h.document?new de(_t.fromString(h.document.name).popFirst(5)):h.noDocument?de.fromSegments(h.noDocument.path):h.unknownDocument?de.fromSegments(h.unknownDocument.path):Te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Fi(e,n){const r=n.store(ps),s=dN(this.serializer),i=new aE(yg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??rt();fa(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),M.forEach(a,(l,c)=>{const d=new Qn(c),h=pg.wt(this.serializer,d),f=i.getIndexManager(d),m=gg.wt(d,this.serializer,f,i.referenceDelegate);return new hN(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Nw(n,Ir.ce),l).next()})})}}function tA(t){t.createObjectStore(Sc,{keyPath:rz}).createIndex(B0,sz,{unique:!0}),t.createObjectStore(Ic,{keyPath:"targetId"}).createIndex(Jk,nz,{unique:!0}),t.createObjectStore($a)}const Qi="IndexedDbPersistence",My=18e5,Fy=5e3,Uy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",MW="main";class lE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!lE.v())throw new se(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SW(this,s),this.$i=n+MW,this.serializer=new XD(l),this.Ui=new Co(this.$i,this.Ni,new VW(this.serializer)),this.hi=new fW,this.Pi=new EW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dN(this.serializer),this.Ii=new hW,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&mn(Qi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(z.FAILED_PRECONDITION,Uy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ir(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Yo(e))return ee(Qi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(Qi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Pu(e).get(gl).next(n=>M.resolve(this.es(n)))}ts(e){return pf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,My)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Rn(n,bc);return r.J().next(s=>{const i=this.ss(s,My),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):Pu(e).get(gl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Fy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new se(z.FAILED_PRECONDITION,Uy);return!1}}return!(!this.networkEnabled||!this.inForeground)||pf(e).J().next(r=>this.ss(r,Fy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ee(Qi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ph,bc],e=>{const n=new Nw(e,Ir.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>pf(e).J().next(n=>this.ss(n,My).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return gg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _W(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return pg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee(Qi,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Ez:l===17?sD:l===16?_z:l===15?q0:l===14?rD:l===13?nD:l===12?wz:l===11?tD:void Te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Nw(a,this.ci?this.ci.next():Ir.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new se(z.FAILED_PRECONDITION,qk);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Pu(e).get(gl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Fy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new se(z.FAILED_PRECONDITION,Uy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pu(e).put(gl,n)}static v(){return Co.v()}Zi(e){const n=Pu(e);return n.get(gl).next(r=>this.es(r)?(ee(Qi,"Releasing primary lease."),n.delete(gl)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;KC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ee(Qi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mn(Qi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pu(t){return Rn(t,ph)}function pf(t){return Rn(t,bc)}function fN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=rt(),s=rt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new cE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return KC()?8:Kk(zn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new FW;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Al()<=at.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Al()<=at.DEBUG&&ee("QueryEngine","Query:",xl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Al()<=at.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):M.resolve())}ys(e,n){if(bb(n))return M.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=np(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=rt(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,np(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return bb(n)||s.isEqual(Ce.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(Al()<=at.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xl(n)),this.vs(e,o,n,zk(s,Ec)).next(a=>a))})}Ds(e,n){let r=new At(AD(e));return n.forEach((s,i)=>{vh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Al()<=at.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",xl(n)),this.ps.getDocumentsMatchingQuery(e,n,qr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="LocalStore",UW=3e8;class jW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Lt(He),this.xs=new Vi(i=>Ja(i),gh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function pN(t,e,n,r){return new jW(t,e,n,r)}async function gN(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=rt();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function $W(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(w=>{m=m.next(()=>d.getEntry(l,w)).next(g=>{const y=c.docVersions.get(w);Pe(y!==null,48541),g.version.compareTo(y)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function yN(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function BW(t,e){const n=Ie(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(un.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(g,y,E){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=UW?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=Fr(),c=rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(zW(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Ce.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function zW(t,e,n){let r=rt(),s=rt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee(uE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function WW(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ja),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cp(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new pi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Nc(t,e,n){const r=Ie(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yo(o))throw o;ee(uE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function up(t,e,n){const r=Ie(t);let s=Ce.min(),i=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Ie(l),f=h.xs.get(d);return f!==void 0?M.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,zr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ce.min(),n?i:rt())).next(a=>(_N(r,bD(e),a),{documents:a,Qs:i})))}function vN(t,e){const n=Ie(t),r=Ie(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function wN(t,e){const n=Ie(t),r=n.Os.get(e)||Ce.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,zk(r,Ec),Number.MAX_SAFE_INTEGER)).then(s=>(_N(n,e,s),s))}function _N(t,e,n){let r=t.Os.get(e)||Ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firestore_clients";function nA(t,e){return`${EN}_${t}_${e}`}const TN="firestore_mutations";function rA(t,e,n){let r=`${TN}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const IN="firestore_targets";function jy(t,e){return`${IN}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="SharedClientState";class dp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new se(s.error.code,s.error.message))),o?new dp(e,n,s.state,i):(mn(js,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ud{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new se(r.error.code,r.error.message))),i?new ud(e,r.state,s):(mn(js,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Y0();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Gk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new hp(e,i):(mn(js,`Failed to parse client data for instance '${e}': ${n}`),null)}}class dE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new dE(n.clientId,n.onlineState):(mn(js,`Failed to parse online state: ${e}`),null)}}class Kw{constructor(){this.activeTargetIds=Y0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $y{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Lt(He),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=nA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Kw),this.ro=new RegExp(`^${EN}_${o}_([^_]*)$`),this.io=new RegExp(`^${TN}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${IN}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(nA(this.persistenceKey,r));if(s){const i=hp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(jy(this.persistenceKey,e));if(s){const i=ud.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee(js,"READ",e,n),n}setItem(e,n){ee(js,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee(js,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ee(js,"EVENT",n.key,n.newValue),n.key===this.eo)return void mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Ir.ce;if(i!=null)try{const a=JSON.parse(i);Pe(typeof a=="number",30636,{So:i}),o=a}catch(a){mn(js,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Ir.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new dp(this.currentUser,e,n,r),i=rA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=rA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=jy(this.persistenceKey,e),i=new ud(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return hp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return dp.Ws(new Qn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return ud.Ws(s,n)}uo(e){return dE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ee(js,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Y0();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class SN{constructor(){this.Mo=new Kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="ConnectivityMonitor";class iA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(sA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(sA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function Gw(){return gf===null?gf=function(){return 268435456+Math.round(2147483648*Math.random())}():gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="RestConnection",HW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Zm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Gw(),a=this.zo(e,n.toUriEncodedString());ee(By,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Oi(c);return this.Jo(e,a,l,r,d).then(h=>(ee(By,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Fo(By,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=HW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="WebChannelConnection";class QW extends KW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Gw();return new Promise((a,l)=>{const c=new kk;c.setWithCredentials(!0),c.listenOnce(Dk.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zf.NO_ERROR:const h=c.getResponseJson();ee(Gn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case zf.TIMEOUT:ee(Gn,`RPC '${e}' ${o} timed out`),l(new se(z.DEADLINE_EXCEEDED,"Request time out"));break;case zf.HTTP_ERROR:const f=c.getStatus();if(ee(Gn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const g=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(w.status);l(new se(g,w.message))}else l(new se(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new se(z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ee(Gn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ee(Gn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Gw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Lk(),a=Ok(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ee(Gn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const w=new GW({Yo:y=>{m?ee(Gn,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(ee(Gn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ee(Gn,`RPC '${e}' stream ${s} sending:`,y),h.send(y))},Zo:()=>h.close()}),g=(y,E,v)=>{y.listen(E,_=>{try{v(_)}catch(x){setTimeout(()=>{throw x},0)}})};return g(h,ju.EventType.OPEN,()=>{m||(ee(Gn,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),g(h,ju.EventType.CLOSE,()=>{m||(m=!0,ee(Gn,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),g(h,ju.EventType.ERROR,y=>{m||(m=!0,Fo(Gn,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),w.a_(new se(z.UNAVAILABLE,"The operation could not be completed")))}),g(h,ju.EventType.MESSAGE,y=>{var E;if(!m){const v=y.data[0];Pe(!!v,16349);const _=v,x=(_==null?void 0:_.error)||((E=_[0])==null?void 0:E.error);if(x){ee(Gn,`RPC '${e}' stream ${s} received error:`,x);const k=x.status;let L=function(b){const P=_n[b];if(P!==void 0)return FD(P)}(k),R=x.message;L===void 0&&(L=z.INTERNAL,R="Unknown error status: "+k+" with message "+x.message),m=!0,w.a_(new se(L,R)),h.close()}else ee(Gn,`RPC '${e}' stream ${s} received:`,v),w.u_(v)}}),g(a,Nk.STAT_EVENT,y=>{y.stat===xw.PROXY?ee(Gn,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===xw.NOPROXY&&ee(Gn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(){return typeof window<"u"?window:null}function Zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){return new tW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="PersistentStream";class xN{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new se(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(oA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ee(oA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YW extends xN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sW(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?ur(o.readTime):Ce.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ep(l)?{documents:HD(i,l)}:{query:KD(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$D(i,o.resumeToken);const c=jw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ce.min())>0){a.readTime=Dc(i,o.snapshotVersion.toTimestamp());const c=jw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=oW(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bw(this.serializer),n.removeTarget=e,this.q_(n)}}class JW extends xN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=iW(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{}class ZW extends XW{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new se(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,$w(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,$w(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class e7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class t7{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ul(this)&&(ee(nl,"Restarting streams for network reachability change."),await async function(l){const c=Ie(l);c.Ea.add(4),await eu(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Eh(c)}(this))})}),this.Ra=new e7(r,s)}}async function Eh(t){if(ul(t))for(const e of t.da)await e(!0)}async function eu(t){for(const e of t.da)await e(!1)}function wg(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mE(n)?fE(n):nu(n).O_()&&hE(n,e))}function Oc(t,e){const n=Ie(t),r=nu(n);n.Ia.delete(e),r.O_()&&RN(n,e),n.Ia.size===0&&(r.O_()?r.L_():ul(n)&&n.Ra.set("Unknown"))}function hE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nu(t).Y_(e)}function RN(t,e){t.Va.Ue(e),nu(t).Z_(e)}function fE(t){t.Va=new Jz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nu(t).start(),t.Ra.ua()}function mE(t){return ul(t)&&!nu(t).x_()&&t.Ia.size>0}function ul(t){return Ie(t).Ea.size===0}function PN(t){t.Va=void 0}async function n7(t){t.Ra.set("Online")}async function r7(t){t.Ia.forEach((e,n)=>{hE(t,e)})}async function s7(t,e){PN(t),mE(t)?(t.Ra.ha(e),fE(t)):t.Ra.set("Unknown")}async function i7(t,e,n){if(t.Ra.set("Online"),e instanceof jD&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){ee(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fp(t,r)}else if(e instanceof Jf?t.Va.Ze(e):e instanceof UD?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await yN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(un.EMPTY_BYTE_STRING,d.snapshotVersion)),RN(i,l);const h=new pi(d.target,l,c,d.sequenceNumber);hE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee(nl,"Failed to raise snapshot:",r),await fp(t,r)}}async function fp(t,e,n){if(!Yo(e))throw e;t.Ea.add(1),await eu(t),t.Ra.set("Offline"),n||(n=()=>yN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(nl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Eh(t)})}function CN(t,e){return e().catch(n=>fp(t,n,e))}async function tu(t){const e=Ie(t),n=Bo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ja;for(;o7(e);)try{const s=await WW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,a7(e,s)}catch(s){await fp(e,s)}kN(e)&&DN(e)}function o7(t){return ul(t)&&t.Ta.length<10}function a7(t,e){t.Ta.push(e);const n=Bo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function kN(t){return ul(t)&&!Bo(t).x_()&&t.Ta.length>0}function DN(t){Bo(t).start()}async function l7(t){Bo(t).ra()}async function c7(t){const e=Bo(t);for(const n of t.Ta)e.ea(n.mutations)}async function u7(t,e,n){const r=t.Ta.shift(),s=eE.from(r,e,n);await CN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await tu(t)}async function d7(t,e){e&&Bo(t).X_&&await async function(r,s){if(function(o){return Gz(o)&&o!==z.ABORTED}(s.code)){const i=r.Ta.shift();Bo(r).B_(),await CN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await tu(r)}}(t,e),kN(t)&&DN(t)}async function aA(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ee(nl,"RemoteStore received new credentials");const r=ul(n);n.Ea.add(3),await eu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Eh(n)}async function Qw(t,e){const n=Ie(t);e?(n.Ea.delete(2),await Eh(n)):e||(n.Ea.add(2),await eu(n),n.Ra.set("Unknown"))}function nu(t){return t.ma||(t.ma=function(n,r,s){const i=Ie(n);return i.sa(),new YW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:n7.bind(null,t),t_:r7.bind(null,t),r_:s7.bind(null,t),H_:i7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),mE(t)?fE(t):t.Ra.set("Unknown")):(await t.ma.stop(),PN(t))})),t.ma}function Bo(t){return t.fa||(t.fa=function(n,r,s){const i=Ie(n);return i.sa(),new JW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:l7.bind(null,t),r_:d7.bind(null,t),ta:c7.bind(null,t),na:u7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await tu(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(nl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new pE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(t,e){if(mn("AsyncQueue",`${e}: ${t}`),Yo(t))return new se(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=$u(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.ga=new Lt(de.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Lc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Lc(e,n,Zl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class f7{constructor(){this.queries=cA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ie(n),i=s.queries;s.queries=cA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new se(z.ABORTED,"Firestore shutting down"))}}function cA(){return new Vi(t=>SD(t),dg)}async function gE(t,e){const n=Ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new h7,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Th(o,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&vE(n)}async function yE(t,e){const n=Ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function m7(t,e){const n=Ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&vE(n)}function p7(t,e,n){const r=Ie(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function vE(t){t.Ca.forEach(e=>{e.next()})}var Yw,uA;(uA=Yw||(Yw={})).Ma="default",uA.Cache="cache";class wE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.key=e}}class ON{constructor(e){this.key=e}}class LN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=AD(e),this.tu=new Zl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new lA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=vh(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?w!==g&&(r.track({type:3,doc:m}),y=!0):this.su(f,m)||(r.track({type:2,doc:m}),y=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),y=!0):f&&!m&&(r.track({type:1,doc:f}),y=!0,(l||c)&&(a=!0)),y&&(m?(o=o.add(m),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,w){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:y})}};return g(m)-g(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Lc(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new ON(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new NN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=rt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Lc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ru="SyncEngine";class g7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class y7{constructor(e){this.key=e,this.hu=!1}}class v7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Vi(a=>SD(a),dg),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(de.comparator),this.Au=new Map,this.Ru=new oE,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w7(t,e,n=!0){const r=_g(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await VN(r,e,n,!0),s}async function _7(t,e){const n=_g(t);await VN(n,e,!0,!1)}async function VN(t,e,n,r){const s=await cp(t.localStore,zr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await _E(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&wg(t.remoteStore,s),a}async function _E(t,e,n,r,s){t.pu=(h,f,m)=>async function(g,y,E,v){let _=y.view.ru(E);_.Cs&&(_=await up(g.localStore,y.query,!1).then(({documents:R})=>y.view.ru(R,_)));const x=v&&v.targetChanges.get(y.targetId),k=v&&v.targetMismatches.get(y.targetId)!=null,L=y.view.applyChanges(_,g.isPrimaryClient,x,k);return Jw(g,y.targetId,L.au),L.snapshot}(t,h,f,m);const i=await up(t.localStore,e,!0),o=new LN(e,i.Qs),a=o.ru(i.documents),l=_h.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Jw(t,n,c.au);const d=new g7(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function E7(t,e,n){const r=Ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!dg(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Nc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Oc(r.remoteStore,s.targetId),Vc(r,s.targetId)}).catch(Qo)):(Vc(r,s.targetId),await Nc(r.localStore,s.targetId,!0))}async function T7(t,e){const n=Ie(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Oc(n.remoteStore,r.targetId))}async function I7(t,e,n){const r=SE(t);try{const s=await function(o,a){const l=Ie(o),c=yt.now(),d=a.reduce((m,w)=>m.add(w.key),rt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=Fr(),g=rt();return l.Ns.getEntries(m,d).next(y=>{w=y,w.forEach((E,v)=>{v.isValidDocument()||(g=g.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,w)).next(y=>{h=y;const E=[];for(const v of a){const _=Hz(v,h.get(v.key).overlayedDocument);_!=null&&E.push(new Mi(v.key,_,mD(_.value.mapValue),Zn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,E,a)}).next(y=>{f=y;const E=y.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(m,y.batchId,E)})}).then(()=>({batchId:f.batchId,changes:RD(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Lt(He)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Xo(r,s.changes),await tu(r.remoteStore)}catch(s){const i=Th(s,"Failed to persist write");n.reject(i)}}async function MN(t,e){const n=Ie(t);try{const r=await BW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Pe(o.hu,14607):s.removedDocuments.size>0&&(Pe(o.hu,42227),o.hu=!1))}),await Xo(n,r,e)}catch(r){await Qo(r)}}function dA(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ie(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&vE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function S7(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Lt(de.comparator);o=o.insert(i,cn.newNoDocument(i,Ce.min()));const a=rt().add(i),l=new wh(Ce.min(),new Map,new Lt(He),o,a);await MN(r,l),r.du=r.du.remove(i),r.Au.delete(e),IE(r)}else await Nc(r.localStore,e,!1).then(()=>Vc(r,e,n)).catch(Qo)}async function b7(t,e){const n=Ie(t),r=e.batch.batchId;try{const s=await $W(n.localStore,e);TE(n,r,null),EE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xo(n,s)}catch(s){await Qo(s)}}async function A7(t,e,n){const r=Ie(t);try{const s=await function(o,a){const l=Ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);TE(r,e,n),EE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xo(r,s)}catch(s){await Qo(s)}}function EE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function TE(t,e,n){const r=Ie(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Vc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||FN(t,r)})}function FN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Oc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),IE(t))}function Jw(t,e,n){for(const r of n)r instanceof NN?(t.Ru.addReference(r.key,e),x7(t,r)):r instanceof ON?(ee(ru,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||FN(t,r.key)):Te(19791,{wu:r})}function x7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ee(ru,"New document in limbo: "+n),t.Eu.add(r),IE(t))}function IE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(_t.fromString(e)),r=t.fu.next();t.Au.set(r,new y7(n)),t.du=t.du.insert(n,r),wg(t.remoteStore,new pi(zr(yh(n.path)),r,"TargetPurposeLimboResolution",Ir.ce))}}async function Xo(t,e,n){const r=Ie(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=cE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=Ie(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Yo(h))throw h;ee(uE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),w=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(f,g)}}}(r.localStore,i))}async function R7(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){ee(ru,"User change. New user:",e.toKey());const r=await gN(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new se(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xo(n,r.Ls)}}function P7(t,e){const n=Ie(t),r=n.Au.get(e);if(r&&r.hu)return rt().add(r.key);{let s=rt();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function C7(t,e){const n=Ie(t),r=await up(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Jw(n,e.targetId,s.au),s}async function k7(t,e){const n=Ie(t);return wN(n.localStore,e).then(r=>Xo(n,r))}async function D7(t,e,n,r){const s=Ie(t),i=await function(a,l){const c=Ie(a),d=Ie(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await tu(s.remoteStore):n==="acknowledged"||n==="rejected"?(TE(s,e,r||null),EE(s,e),function(a,l){Ie(Ie(a).mutationQueue).ir(l)}(s.localStore,e)):Te(6720,"Unknown batchState",{Su:n}),await Xo(s,i)):ee(ru,"Cannot apply mutation batch with id: "+e)}async function N7(t,e){const n=Ie(t);if(_g(n),SE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await hA(n,r.toArray());n.gu=!0,await Qw(n.remoteStore,!0);for(const i of s)wg(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Vc(n,o),Nc(n.localStore,o,!0))),Oc(n.remoteStore,o)}),await s,await hA(n,r),function(o){const a=Ie(o);a.Au.forEach((l,c)=>{Oc(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Lt(de.comparator)}(n),n.gu=!1,await Qw(n.remoteStore,!1)}}async function hA(t,e,n){const r=Ie(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await cp(r.localStore,zr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await C7(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await vN(r.localStore,o);a=await cp(r.localStore,c),await _E(r,UN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function UN(t){return TD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function O7(t){return function(n){return Ie(Ie(n).persistence).Ts()}(Ie(t).localStore)}async function L7(t,e,n,r){const s=Ie(t);if(s.gu)return void ee(ru,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await wN(s.localStore,bD(i[0])),a=wh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",un.EMPTY_BYTE_STRING);await Xo(s,o,a);break}case"rejected":await Nc(s.localStore,e,!0),Vc(s,e,r);break;default:Te(64155,n)}}async function V7(t,e,n){const r=_g(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ee(ru,"Adding an already active target "+s);continue}const i=await vN(r.localStore,s),o=await cp(r.localStore,i);await _E(r,UN(i),o.targetId,!1,o.resumeToken),wg(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Nc(r.localStore,s,!1).then(()=>{Oc(r.remoteStore,s),Vc(r,s)}).catch(Qo)}}function _g(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S7.bind(null,e),e.Pu.H_=m7.bind(null,e.eventManager),e.Pu.yu=p7.bind(null,e.eventManager),e}function SE(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A7.bind(null,e),e}class Xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pN(this.persistence,new mN,e.initialUser,this.serializer)}Cu(e){return new aE(yg.mi,this.serializer)}Du(e){return new SN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xd.provider={build:()=>new Xd};class M7 extends Xd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pe(this.persistence.referenceDelegate instanceof lp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new aE(r=>lp.mi(r,n),this.serializer)}}class jN extends Xd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await SE(this.xu.syncEngine),await tu(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return pN(this.persistence,new mN,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new lN(r,e.asyncQueue,n)}Mu(e,n){const r=new Q9(n,this.persistence);return new G9(e.asyncQueue,r)}Cu(e){const n=fN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new lE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,bN(),Zf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new SN}}class F7 extends jN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof $y&&(this.sharedClientState.syncEngine={Co:D7.bind(null,n),vo:L7.bind(null,n),Fo:V7.bind(null,n),Ts:O7.bind(null,n),Do:k7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await N7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=bN();if(!$y.v(n))throw new se(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $y(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R7.bind(null,this.syncEngine),await Qw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new f7}()}createDatastore(e){const n=vg(e.databaseInfo.databaseId),r=function(i){return new QW(i)}(e.databaseInfo);return function(i,o,a,l){return new ZW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new t7(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dA(this.syncEngine,n,0),function(){return iA.v()?new iA:new qW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new v7(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ie(s);ee(nl,"RemoteStore shutting down."),i.Ea.add(5),await eu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Zd.provider={build:()=>new Zd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="FirestoreClient";class U7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Qn.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ee(zo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee(zo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Th(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zy(t,e){t.asyncQueue.verifyOperationInProgress(),ee(zo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await gN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AE(t);ee(zo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>aA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>aA(e.remoteStore,s)),t._onlineComponents=e}async function AE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(zo,"Using user provided OfflineComponentProvider");try{await zy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await zy(t,new Xd)}}else ee(zo,"Using default OfflineComponentProvider"),await zy(t,new M7(void 0));return t._offlineComponents}async function xE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(zo,"Using user provided OnlineComponentProvider"),await fA(t,t._uninitializedComponentsProvider._online)):(ee(zo,"Using default OnlineComponentProvider"),await fA(t,new Zd))),t._onlineComponents}function $N(t){return AE(t).then(e=>e.persistence)}function BN(t){return AE(t).then(e=>e.localStore)}function zN(t){return xE(t).then(e=>e.remoteStore)}function j7(t){return xE(t).then(e=>e.syncEngine)}async function mp(t){const e=await xE(t),n=e.eventManager;return n.onListen=w7.bind(null,e.syncEngine),n.onUnlisten=E7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=T7.bind(null,e.syncEngine),n}function $7(t){return t.asyncQueue.enqueue(async()=>{const e=await $N(t),n=await zN(t);return e.setNetworkEnabled(!0),function(s){const i=Ie(s);return i.Ea.delete(0),Eh(i)}(n)})}function B7(t){return t.asyncQueue.enqueue(async()=>{const e=await $N(t),n=await zN(t);return e.setNetworkEnabled(!1),async function(s){const i=Ie(s);i.Ea.add(0),await eu(i),i.Ra.set("Offline")}(n)})}function z7(t,e){const n=new is;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=Ie(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new se(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Th(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await BN(t),e,n)),n.promise}function W7(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new bE({next:f=>{d.Nu(),o.enqueueAndForget(()=>yE(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new se(z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new se(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new wE(yh(a.path),d,{includeMetadataChanges:!0,qa:!0});return gE(i,h)}(await mp(t),t.asyncQueue,e,n,r)),r.promise}function q7(t,e){const n=new is;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await up(s,i,!0),l=new LN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Th(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await BN(t),e,n)),n.promise}function H7(t,e,n={}){const r=new is;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new bE({next:f=>{d.Nu(),o.enqueueAndForget(()=>yE(i,h)),f.fromCache&&l.source==="server"?c.reject(new se(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new wE(a,d,{includeMetadataChanges:!0,qa:!0});return gE(i,h)}(await mp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7="firestore.googleapis.com",pA=!0;class gA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K7,this.ssl=pA}else this.host=e.host,this.ssl=e.ssl??pA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aN)throw new se(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$k("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fk;switch(r.type){case"firstParty":return new U9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mA.get(n);r&&(ee("ComponentProvider","Removing Datastore"),mA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ps(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(mh(n,Qt._jsonSchema))return new Qt(e,r||null,new de(_t.fromString(n.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:Tn("string",Qt._jsonSchemaVersion),referencePath:Tn("string")};class yi extends Ps{constructor(e,n,r){super(e,n,yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new de(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function Re(t,e,...n){if(t=xt(t),jk("collection","path",e),t instanceof RE){const r=_t.fromString(e,...n);return ob(r),new yi(t,null,r)}{if(!(t instanceof Qt||t instanceof yi))throw new se(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return ob(r),new yi(t.firestore,null,r)}}function xe(t,e,...n){if(t=xt(t),arguments.length===1&&(e=ng.newId()),jk("doc","path",e),t instanceof RE){const r=_t.fromString(e,...n);return ib(r),new Qt(t,null,new de(r))}{if(!(t instanceof Qt||t instanceof yi))throw new se(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return ib(r),new Qt(t.firestore,t instanceof yi?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="AsyncQueue";class vA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AN(this,"async_queue_retry"),this._c=()=>{const r=Zf();r&&ee(yA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new is;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Yo(e))throw e;ee(yA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",wA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=pE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:wA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class dr extends RE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vA(e),this._firestoreClient=void 0,await e}}}function qN(t,e,n){n||(n=Zm);const r=eg(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(vc(i,e))return s;throw new se(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aN)throw new se(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Oi(e.host)&&k0(e.host),r.initialize({options:e,instanceIdentifier:n})}function Fi(t){if(t._terminated)throw new se(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HN(t),t._firestoreClient}function HN(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new Iz(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,WN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new U7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function G7(t,e){Fo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return KN(t,Zd.provider,{build:r=>new jN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Q7(t){Fo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();KN(t,Zd.provider,{build:n=>new F7(n,e.cacheSizeBytes)})}function KN(t,e,n){if((t=gn(t,dr))._firestoreClient||t._terminated)throw new se(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new se(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},HN(t)}function PE(t){return $7(Fi(t=gn(t,dr)))}function CE(t){return B7(Fi(t=gn(t,dr)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(un.fromBase64String(e))}catch(n){throw new se(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mh(e,Lr._jsonSchema))return Lr.fromBase64String(e.bytes)}}Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:Tn("string",Lr._jsonSchemaVersion),bytes:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Es._jsonSchemaVersion}}static fromJSON(e){if(mh(e,Es._jsonSchema))return new Es(e.latitude,e.longitude)}}Es._jsonSchemaVersion="firestore/geoPoint/1.0",Es._jsonSchema={type:Tn("string",Es._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mh(e,Ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ts(e.vectorValues);throw new se(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ts._jsonSchemaVersion="firestore/vectorValue/1.0",Ts._jsonSchema={type:Tn("string",Ts._jsonSchemaVersion),vectorValues:Tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=/^__.*__$/;class J7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zc(e,this.data,n,this.fieldTransforms)}}class GN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:t})}}class Eg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Eg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QN(this.Ac)&&Y7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class X7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vg(e)}Cc(e,n,r,s=!1){return new Eg({Ac:e,methodName:n,Dc:r,path:Gt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tg(t){const e=t._freezeSettings(),n=vg(t._databaseId);return new X7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);NE("Data must be an object, but it was:",o,r);const a=JN(r,o);let l,c;if(i.merge)l=new Sr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Xw(e,h,n);if(!o.contains(f))throw new se(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ZN(d,f)||d.push(f)}l=new Sr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new J7(new Xn(a),l,c)}class Ig extends su{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ig}}function Z7(t,e,n){return new Eg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kE extends su{_toFieldTransform(e){return new X0(e.path,new Cc)}isEqual(e){return e instanceof kE}}class DE extends su{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Z7(this,e,!0),r=this.vc.map(i=>iu(i,n)),s=new Xa(r);return new X0(e.path,s)}isEqual(e){return e instanceof DE&&vc(this.vc,e.vc)}}function e8(t,e,n,r){const s=t.Cc(1,e,n);NE("Data must be an object, but it was:",s,r);const i=[],o=Xn.empty();Jo(r,(l,c)=>{const d=OE(e,l,n);c=xt(c);const h=s.yc(d);if(c instanceof Ig)i.push(d);else{const f=iu(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Sr(i);return new GN(o,a,s.fieldTransforms)}function t8(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Xw(e,r,n)],l=[s];if(i.length%2!=0)throw new se(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Xw(e,i[f])),l.push(i[f+1]);const c=[],d=Xn.empty();for(let f=a.length-1;f>=0;--f)if(!ZN(c,a[f])){const m=a[f];let w=l[f];w=xt(w);const g=o.yc(m);if(w instanceof Ig)c.push(m);else{const y=iu(w,g);y!=null&&(c.push(m),d.set(m,y))}}const h=new Sr(c);return new GN(d,h,o.fieldTransforms)}function n8(t,e,n,r=!1){return iu(n,t.Cc(r?4:3,e))}function iu(t,e){if(XN(t=xt(t)))return NE("Unsupported field value:",e,t),JN(t,e);if(t instanceof su)return function(r,s){if(!QN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=iu(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=yt.fromDate(r);return{timestampValue:Dc(s.serializer,i)}}if(r instanceof yt){const i=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dc(s.serializer,i)}}if(r instanceof Es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lr)return{bytesValue:$D(s.serializer,r._byteString)};if(r instanceof Qt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ts)return function(o,a){return{mapValue:{fields:{[K0]:{stringValue:G0},[Ac]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return J0(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${rg(r)}`)}(t,e)}function JN(t,e){const n={};return iD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(t,(r,s)=>{const i=iu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function XN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof Es||t instanceof Lr||t instanceof Qt||t instanceof su||t instanceof Ts)}function NE(t,e,n){if(!XN(n)||!Bk(n)){const r=rg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Xw(t,e,n){if((e=xt(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return OE(t,e);throw pp("Field path arguments must be of type string or ",t,!1,void 0,n)}const r8=new RegExp("[~\\*/\\[\\]]");function OE(t,e,n){if(e.search(r8)>=0)throw pp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ih(...e.split("."))._internalPath}catch{throw pp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new se(z.INVALID_ARGUMENT,a+t+l)}function ZN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class s8 extends eO{data(){return super.data()}}function Sg(t,e){return typeof e=="string"?OE(t,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LE{}class bg extends LE{}function Ue(t,e,...n){let r=[];e instanceof LE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Ag).length,a=i.filter(l=>l instanceof Sh).length;if(o>1||o>0&&a>0)throw new se(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sh extends bg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sh(e,n,r)}_apply(e){const n=this._parse(e);return nO(e._query,n),new Ps(e.firestore,e.converter,Uw(e._query,n))}_parse(e){const n=Tg(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new se(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){TA(h,d);const w=[];for(const g of h)w.push(EA(l,i,g));f={arrayValue:{values:w}}}else f=EA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||TA(h,d),f=n8(a,o,h,d==="in"||d==="not-in");return ct.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Oe(t,e,n){const r=e,s=Sg("where",t);return Sh._create(s,r,n)}class Ag extends LE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:St.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)nO(o,l),o=Uw(o,l)}(e._query,n),new Ps(e.firestore,e.converter,Uw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xg extends bg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new se(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new se(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yd(i,o)}(e._query,this._field,this._direction);return new Ps(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ys(t,e="asc"){const n=e,r=Sg("orderBy",t);return xg._create(r,n)}class Rg extends bg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rg(e,n,r)}_apply(e){return new Ps(e.firestore,e.converter,np(e._query,this._limit,this._limitType))}}function ko(t){return q9("limit",t),Rg._create("limit",t,"F")}function EA(t,e,n){if(typeof(n=xt(n))=="string"){if(n==="")throw new se(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ID(e)&&n.indexOf("/")!==-1)throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!de.isDocumentKey(r))throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gd(t,new de(r))}if(n instanceof Qt)return Gd(t,n._key);throw new se(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(n)}.`)}function TA(t,e){if(!Array.isArray(t)||t.length===0)throw new se(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nO(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rO{convertValue(e,n="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Ac].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ht(o.doubleValue));return new Ts(n)}convertGeoPoint(e){return new Es(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hd(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);Pe(JD(r),9688,{name:e});const s=new Uo(r.get(1),r.get(3)),i=new de(r.popFirst(5));return s.isEqual(n)||mn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vi extends eO{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",vi._jsonSchema={type:Tn("string",vi._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class dd extends vi{data(e={}){return super.data(e)}}class wi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Sa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dd(this._firestore,this._userDataWriter,r.key,r,new Sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new dd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new dd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:i8(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function i8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){t=gn(t,Qt);const e=gn(t.firestore,dr);return W7(Fi(e),t._key).then(n=>oO(e,t,n))}wi._jsonSchemaVersion="firestore/querySnapshot/1.0",wi._jsonSchema={type:Tn("string",wi._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class bh extends rO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function iO(t){t=gn(t,Qt);const e=gn(t.firestore,dr),n=Fi(e),r=new bh(e);return z7(n,t._key).then(s=>new vi(e,r,t._key,s,new Sa(s!==null&&s.hasLocalMutations,!0),t.converter))}function qe(t){t=gn(t,Ps);const e=gn(t.firestore,dr),n=Fi(e),r=new bh(e);return tO(t._query),H7(n,t._query).then(s=>new wi(e,r,t,s))}function o8(t){t=gn(t,Ps);const e=gn(t.firestore,dr),n=Fi(e),r=new bh(e);return q7(n,t._query).then(s=>new wi(e,r,t,s))}function ln(t,e,n){t=gn(t,Qt);const r=gn(t.firestore,dr),s=sO(t.converter,e,n);return Ah(r,[YN(Tg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zn.none())])}function yn(t,e,n,...r){t=gn(t,Qt);const s=gn(t.firestore,dr),i=Tg(s);let o;return o=typeof(e=xt(e))=="string"||e instanceof Ih?t8(i,"updateDoc",t._key,e,n,r):e8(i,"updateDoc",t._key,e),Ah(s,[o.toMutation(t._key,Zn.exists(!0))])}function On(t){return Ah(gn(t.firestore,dr),[new mg(t._key,Zn.none())])}function Js(t,e){const n=gn(t.firestore,dr),r=xe(t),s=sO(t.converter,e);return Ah(n,[YN(Tg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}function ki(t,...e){var l,c,d;t=xt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_A(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_A(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof Qt)o=gn(t.firestore,dr),a=yh(t._key.path),i={next:h=>{e[r]&&e[r](oO(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=gn(t,Ps);o=gn(h.firestore,dr),a=h._query;const f=new bh(o);i={next:m=>{e[r]&&e[r](new wi(o,f,h,m))},error:e[r+1],complete:e[r+2]},tO(t._query)}return function(f,m,w,g){const y=new bE(g),E=new wE(m,y,w);return f.asyncQueue.enqueueAndForget(async()=>gE(await mp(f),E)),()=>{y.Nu(),f.asyncQueue.enqueueAndForget(async()=>yE(await mp(f),E))}}(Fi(o),a,s,i)}function Ah(t,e){return function(r,s){const i=new is;return r.asyncQueue.enqueueAndForget(async()=>I7(await j7(r),s,i)),i.promise}(Fi(t),e)}function oO(t,e,n){const r=n.docs.get(e._key),s=new bh(t);return new vi(t,s,e._key,r,new Sa(n.hasPendingWrites,n.fromCache),e.converter)}function Me(){return new kE("serverTimestamp")}function a8(...t){return new DE("arrayUnion",t)}(function(e,n=!0){(function(s){Jc=s})(hh),ei(new As("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new dr(new M9(r.getProvider("auth-internal")),new j9(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new se(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Br(tb,nb,e),Br(tb,nb,"esm2020")})();const dn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:rO,Bytes:Lr,CollectionReference:yi,DocumentReference:Qt,DocumentSnapshot:vi,FieldPath:Ih,FieldValue:su,Firestore:dr,FirestoreError:se,GeoPoint:Es,Query:Ps,QueryCompositeFilterConstraint:Ag,QueryConstraint:bg,QueryDocumentSnapshot:dd,QueryFieldFilterConstraint:Sh,QueryLimitConstraint:Rg,QueryOrderByConstraint:xg,QuerySnapshot:wi,SnapshotMetadata:Sa,Timestamp:yt,VectorValue:Ts,_AutoId:ng,_ByteString:un,_DatabaseId:Uo,_DocumentKey:de,_EmptyAuthCredentialsProvider:Fk,_FieldPath:Gt,_cast:gn,_logWarn:Fo,_validateIsNotUsedTogether:$k,addDoc:Js,arrayUnion:a8,collection:Re,deleteDoc:On,disableNetwork:CE,doc:xe,enableIndexedDbPersistence:G7,enableMultiTabIndexedDbPersistence:Q7,enableNetwork:PE,ensureFirestoreConfigured:Fi,executeWrite:Ah,getDoc:Xt,getDocFromCache:iO,getDocs:qe,getDocsFromCache:o8,initializeFirestore:qN,limit:ko,onSnapshot:ki,orderBy:Ys,query:Ue,serverTimestamp:Me,setDoc:ln,setLogLevel:Vk,updateDoc:yn,where:Oe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8="type.googleapis.com/google.protobuf.Int64Value",c8="type.googleapis.com/google.protobuf.UInt64Value";function aO(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function gp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>gp(e));if(typeof t=="function"||typeof t=="object")return aO(t,e=>gp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Mc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case l8:case c8:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Mc(e)):typeof t=="function"||typeof t=="object"?aO(t,e=>Mc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class br extends Rs{constructor(e,n,r){super(`${VE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,br.prototype)}}function u8(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function yp(t,e){let n=u8(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!IA[o])return new br("internal","internal");n=IA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Mc(s))}}catch{}return n==="ok"?null:new br(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Or(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="us-central1",h8=/^data: (.*?)(?:\n|$)/;function f8(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new br("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class m8{constructor(e,n,r,s,i=Zw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new d8(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Zw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function p8(t,e,n){const r=Oi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(k0(t.emulatorOrigin+"/backends"),qC("Functions",!0))}function g8(t,e,n){const r=s=>v8(t,e,s,{});return r.stream=(s,i)=>_8(t,e,s,i),r}function lO(t){return t.emulatorOrigin&&Oi(t.emulatorOrigin)?"include":void 0}async function y8(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:lO(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function cO(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function v8(t,e,n,r){const s=t._url(e);return w8(t,s,n,r)}async function w8(t,e,n,r){n=gp(n);const s={data:n},i=await cO(t,r),o=r.timeout||7e4,a=f8(o),l=await Promise.race([y8(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new br("cancelled","Firebase Functions instance was deleted.");const c=yp(l.status,l.json);if(c)throw c;if(!l.json)throw new br("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new br("internal","Response is missing data field.");return{data:Mc(d)}}function _8(t,e,n,r){const s=t._url(e);return E8(t,s,n,r||{})}async function E8(t,e,n,r){var f;n=gp(n);const s={data:n},i=await cO(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:lO(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new br("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const w=yp(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let a,l;const c=new Promise((m,w)=>{a=m,l=w});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new br("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=T8(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:w,done:g}=await m.read();return{value:w,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function T8(t,e,n,r){const s=(o,a)=>{const l=o.match(h8);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Mc(d.result));return}if("message"in d){a.enqueue(Mc(d.message));return}if("error"in d){const h=yp(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof br){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new br("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new br("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof br?c:yp(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const SA="@firebase/functions",bA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="auth-internal",S8="app-check-internal",b8="messaging-internal";function A8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(I8),o=n.getProvider(b8),a=n.getProvider(S8);return new m8(s,i,o,a,r)};ei(new As(VE,e,"PUBLIC").setMultipleInstances(!0)),Br(SA,bA,t),Br(SA,bA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t=ZC(),e=Zw){const r=eg(xt(t),VE).getImmediate({identifier:e}),s=zC("functions");return s&&R8(r,...s),r}function R8(t,e,n){p8(xt(t),e,n)}function MG(t,e,n){return g8(xt(t),e)}A8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="firebasestorage.googleapis.com",dO="storageBucket",P8=2*60*1e3,C8=10*60*1e3,k8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Rs{constructor(e,n,r=0){super(Wy(e),`Firebase Storage: ${n} (${Wy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bt||(Bt={}));function Wy(t){return"storage/"+t}function ME(){const t="An unknown error occurred, please check the error payload for server response.";return new nn(Bt.UNKNOWN,t)}function D8(t){return new nn(Bt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function N8(t){return new nn(Bt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function O8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nn(Bt.UNAUTHENTICATED,t)}function L8(){return new nn(Bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V8(t){return new nn(Bt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hO(){return new nn(Bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fO(){return new nn(Bt.CANCELED,"User canceled the upload/download.")}function M8(t){return new nn(Bt.INVALID_URL,"Invalid URL '"+t+"'.")}function F8(t){return new nn(Bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function U8(){return new nn(Bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dO+"' property when initializing the app?")}function mO(){return new nn(Bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function j8(){return new nn(Bt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function $8(){return new nn(Bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function B8(t){return new nn(Bt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function e_(t){return new nn(Bt.INVALID_ARGUMENT,t)}function pO(){return new nn(Bt.APP_DELETED,"The Firebase app was deleted.")}function z8(t){return new nn(Bt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hd(t,e){return new nn(Bt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Cu(t){throw new nn(Bt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ur.makeFromUrl(e,n)}catch{return new Ur(e,"")}if(r.path==="")return r;throw F8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),w={bucket:1,path:3},g=n===uO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",E=new RegExp(`^https?://${g}/${s}/${y}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<_.length;x++){const k=_[x],L=k.regex.exec(e);if(L){const R=L[k.indices.bucket];let A=L[k.indices.path];A||(A=""),r=new Ur(R,A),k.postModify(r);break}}if(r==null)throw M8(e);return r}}class W8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...y){c||(c=!0,e.apply(null,y))}function h(y){s=setTimeout(()=>{s=null,t(m,l())},y)}function f(){i&&clearTimeout(i)}function m(y,...E){if(c){f();return}if(y){f(),d.call(null,y,...E);return}if(l()||o){f(),d.call(null,y,...E);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,h(_)}let w=!1;function g(y){w||(w=!0,f(),!c&&(s!==null?(y||(a=2),clearTimeout(s),h(0)):y||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function H8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t){return t!==void 0}function G8(t){return typeof t=="function"}function Q8(t){return typeof t=="object"&&!Array.isArray(t)}function Pg(t){return typeof t=="string"||t instanceof String}function AA(t){return FE()&&t instanceof Blob}function FE(){return typeof Blob<"u"}function xA(t,e,n,r){if(r<e)throw e_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw e_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function gO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var za;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(za||(za={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,g)=>{this.resolve_=w,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new yf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===za.NO_ERROR,l=i.getStatus();if(!a||yO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===za.ABORT;r(!1,new yf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new yf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());K8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=ME();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?pO():fO();o(l)}else{const l=hO();o(l)}};this.canceled_?n(!1,new yf(!1,null,!0)):this.backoffId_=q8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&H8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function J8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function X8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Z8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function eq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function tq(t,e,n,r,s,i,o=!0,a=!1){const l=gO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return Z8(d,e),J8(d,n),X8(d,i),eq(d,r),new Y8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rq(...t){const e=nq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(FE())return new Blob(t);throw new nn(Bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iq(t){if(typeof atob>"u")throw B8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qy{constructor(e,n){this.data=e,this.contentType=n||null}}function oq(t,e){switch(t){case Hs.RAW:return new qy(vO(e));case Hs.BASE64:case Hs.BASE64URL:return new qy(wO(t,e));case Hs.DATA_URL:return new qy(lq(e),cq(e))}throw ME()}function vO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function aq(t){let e;try{e=decodeURIComponent(t)}catch{throw hd(Hs.DATA_URL,"Malformed data URL.")}return vO(e)}function wO(t,e){switch(t){case Hs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw hd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Hs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw hd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iq(e)}catch(s){throw s.message.includes("polyfill")?s:hd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class _O{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw hd(Hs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=uq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function lq(t){const e=new _O(t);return e.base64?wO(Hs.BASE64,e.rest):aq(e.rest)}function cq(t){return new _O(t).contentType}function uq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){let r=0,s="";AA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(AA(this.data_)){const r=this.data_,s=sq(r,e,n);return s===null?null:new di(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new di(r,!0)}}static getBlob(...e){if(FE()){const n=e.map(r=>r instanceof di?r.data_:r);return new di(rq.apply(null,n))}else{const n=e.map(o=>Pg(o)?oq(Hs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new di(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){let e;try{e=JSON.parse(t)}catch{return null}return Q8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function TO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t,e){return e}class sr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||fq}}let vf=null;function mq(t){return!Pg(t)||t.length<2?t:TO(t)}function UE(){if(vf)return vf;const t=[];t.push(new sr("bucket")),t.push(new sr("generation")),t.push(new sr("metageneration")),t.push(new sr("name","fullPath",!0));function e(i,o){return mq(o)}const n=new sr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new sr("size");return s.xform=r,t.push(s),t.push(new sr("timeCreated")),t.push(new sr("updated")),t.push(new sr("md5Hash",null,!0)),t.push(new sr("cacheControl",null,!0)),t.push(new sr("contentDisposition",null,!0)),t.push(new sr("contentEncoding",null,!0)),t.push(new sr("contentLanguage",null,!0)),t.push(new sr("contentType",null,!0)),t.push(new sr("metadata","customMetadata",!0)),vf=t,vf}function pq(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ur(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function gq(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return pq(r,t),r}function IO(t,e,n){const r=EO(e);return r===null?null:gq(t,r,n)}function yq(t,e,n,r){const s=EO(e);if(s===null||!Pg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=xh(f,n,r),w=gO({alt:"media",token:c});return m+w})[0]}function SO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ou{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){if(!t)throw ME()}function jE(t,e){function n(r,s){const i=IO(t,s,e);return _i(i!==null),i}return n}function vq(t,e){function n(r,s){const i=IO(t,s,e);return _i(i!==null),yq(i,s,t.host,t._protocol)}return n}function Rh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=L8():s=O8():n.getStatus()===402?s=N8(t.bucket):n.getStatus()===403?s=V8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function bO(t){const e=Rh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=D8(t.path)),i.serverResponse=s.serverResponse,i}return n}function wq(t,e,n){const r=e.fullServerUrl(),s=xh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ou(s,i,jE(t,n),o);return a.errorHandler=bO(e),a}function _q(t,e,n){const r=e.fullServerUrl(),s=xh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new ou(s,i,vq(t,n),o);return a.errorHandler=bO(e),a}function Eq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function AO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Eq(null,e)),r}function xO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let x=0;x<2;x++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=AO(e,r,s),d=SO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=di.getBlob(h,r,f);if(m===null)throw mO();const w={name:c.fullPath},g=xh(i,t.host,t._protocol),y="POST",E=t.maxUploadRetryTime,v=new ou(g,y,jE(t,n),E);return v.urlParams=w,v.headers=o,v.body=m.uploadData(),v.errorHandler=Rh(e),v}class vp{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function $E(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{_i(!1)}return _i(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Tq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=AO(e,r,s),a={name:o.fullPath},l=xh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=SO(o,n),f=t.maxUploadRetryTime;function m(g){$E(g);let y;try{y=g.getResponseHeader("X-Goog-Upload-URL")}catch{_i(!1)}return _i(Pg(y)),y}const w=new ou(l,c,m,f);return w.urlParams=a,w.headers=d,w.body=h,w.errorHandler=Rh(e),w}function Iq(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=$E(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{_i(!1)}h||_i(!1);const f=Number(h);return _i(!isNaN(f)),new vp(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ou(n,o,i,a);return l.headers=s,l.errorHandler=Rh(e),l}const RA=256*1024;function Sq(t,e,n,r,s,i,o,a){const l=new vp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw j8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const w={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw mO();function y(x,k){const L=$E(x,["active","final"]),R=l.current+d,A=r.size();let b;return L==="final"?b=jE(e,i)(x,k):b=null,new vp(R,A,L==="final",b)}const E="POST",v=e.maxUploadRetryTime,_=new ou(n,E,y,v);return _.headers=w,_.body=g.uploadData(),_.progressCallback=a||null,_.errorHandler=Rh(t),_}const _r={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Hy(t){switch(t){case"running":case"pausing":case"canceling":return _r.RUNNING;case"paused":return _r.PAUSED;case"success":return _r.SUCCESS;case"canceled":return _r.CANCELED;case"error":return _r.ERROR;default:return _r.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(e,n,r){if(G8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Aq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=za.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=za.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=za.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Cu("cannot .send() more than once");if(Oi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xq extends Aq{initXhr(){this.xhr_.responseType="text"}}function ga(){return new xq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=UE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Bt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(yO(s.status,[]))if(i)s=hO();else{this.sleepTime=Math.max(this.sleepTime*2,k8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Bt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Tq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ga,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Iq(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,ga,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=RA*this._chunkMultiplier,n=new vp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Sq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ga,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=wq(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,ga,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=xO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ga,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=fO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Hy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new bq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Hy(this._state)){case _r.SUCCESS:Tl(this._resolve.bind(null,this.snapshot))();break;case _r.CANCELED:case _r.ERROR:const n=this._reject;Tl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Hy(this._state)){case _r.RUNNING:case _r.PAUSED:e.next&&Tl(e.next.bind(e,this.snapshot))();break;case _r.SUCCESS:e.complete&&Tl(e.complete.bind(e))();break;case _r.CANCELED:case _r.ERROR:e.error&&Tl(e.error.bind(e,this._error))();break;default:e.error&&Tl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this._service=e,n instanceof Ur?this._location=n:this._location=Ur.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new rl(e,n)}get root(){const e=new Ur(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TO(this._location.path)}get storage(){return this._service}get parent(){const e=dq(this._location.path);if(e===null)return null;const n=new Ur(this._location.bucket,e);return new rl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw z8(e)}}function Pq(t,e,n){t._throwIfRoot("uploadBytes");const r=xO(t.storage,t._location,UE(),new di(e,!0),n);return t.storage.makeRequestWithTokens(r,ga).then(s=>({metadata:s,ref:t}))}function Cq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Rq(t,new di(e),n)}function kq(t){t._throwIfRoot("getDownloadURL");const e=_q(t.storage,t._location,UE());return t.storage.makeRequestWithTokens(e,ga).then(n=>{if(n===null)throw $8();return n})}function Dq(t,e){const n=hq(t._location.path,e),r=new Ur(t._location.bucket,n);return new rl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nq(t){return/^[A-Za-z]+:\/\//.test(t)}function Oq(t,e){return new rl(t,e)}function RO(t,e){if(t instanceof BE){const n=t;if(n._bucket==null)throw U8();const r=new rl(n,n._bucket);return e!=null?RO(r,e):r}else return e!==void 0?Dq(t,e):t}function Lq(t,e){if(e&&Nq(e)){if(t instanceof BE)return Oq(t,e);throw e_("To use ref(service, url), the first argument must be a Storage instance.")}else return RO(t,e)}function PA(t,e){const n=e==null?void 0:e[dO];return n==null?null:Ur.makeFromBucketSpec(n,t)}function Vq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Oi(e);s&&(k0(`https://${t.host}/b`),qC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:T$(i,t.app.options.projectId))}class BE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=uO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=P8,this._maxUploadRetryTime=C8,this._requests=new Set,s!=null?this._bucket=Ur.makeFromBucketSpec(s,this._host):this._bucket=PA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ur.makeFromBucketSpec(this._url,e):this._bucket=PA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new W8(pO());{const o=tq(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const CA="@firebase/storage",kA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="storage";function FG(t,e,n){return t=xt(t),Pq(t,e,n)}function Mq(t,e,n){return t=xt(t),Cq(t,e,n)}function Fq(t){return t=xt(t),kq(t)}function Uq(t,e){return t=xt(t),Lq(t,e)}function CO(t=ZC(),e){t=xt(t);const r=eg(t,PO).getImmediate({identifier:e}),s=zC("storage");return s&&jq(r,...s),r}function jq(t,e,n,r={}){Vq(t,e,n,r)}function $q(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new BE(n,r,s,e,hh)}function Bq(){ei(new As(PO,$q,"PUBLIC").setMultipleInstances(!0)),Br(CA,kA,""),Br(CA,kA,"esm2020")}Bq();const zq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},t_={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:t_.projectId,authDomain:t_.authDomain,emulatorMode:!1});const Cg=XC(t_);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Dt=CB(Cg,{persistence:[Ek,Sw]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const K=qN(Cg,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{Vk("error")}catch{}const Wq=x8(Cg,"us-central1"),qq=CO(Cg);console.log(" Firebase initialized successfully");const Hq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(Hq,100);let da=0;const Ky=3,Kq=1e3,kO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&da<Ky){da++;const r=Math.min(Kq*Math.pow(2,da-1),1e4);console.log(` Attempting to reconnect (${da}/${Ky}) in ${r}ms...`);try{await CE(K),await new Promise(s=>setTimeout(s,r)),await PE(K),console.log(" Firestore reconnected successfully"),da=0}catch(s){console.error(" Failed to reconnect:",s),da>=Ky&&(console.error(" Maximum reconnection attempts reached."),Gq())}}},Gq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await PE(K),da=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await CE(K),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(kO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Ct=Object.freeze(Object.defineProperty({__proto__:null,auth:Dt,db:K,functions:Wq,handleFirestoreError:kO,storage:qq},Symbol.toStringTag,{value:"Module"})),nt=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Qq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},sl=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>sl(n)).filter(n=>n!==void 0);if(t instanceof Date||!Qq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=sl(r);s!==void 0&&(e[n]=s)}return e},em={async create(t){await ln(xe(K,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Me()})},async getById(t){const e=xe(K,"profiles",t),n=await Xt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:nt(r.createdAt)}}return null},async update(t,e){const n=xe(K,"profiles",t);await yn(n,{...e,updatedAt:Me()})},async getByShopId(t){const e=Ue(Re(K,"profiles"),Oe("shopId","==",t));return(await qe(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:nt(s.createdAt)}})}},n_={async create(t){return(await Js(Re(K,"referrals"),{...t,createdAt:Me(),updatedAt:Me()})).id},async getByReferrerId(t){try{const e=Ue(Re(K,"referrals"),Oe("referrerId","==",t),Ys("createdAt","desc"));return(await qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),updatedAt:nt(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Ue(Re(K,"referrals"),Oe("referrerId","==",t));return(await qe(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:nt(i.data().createdAt),updatedAt:nt(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Ue(Re(K,"referrals"),Oe("referralCode","==",t),ko(1)),n=await qe(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:nt(r.data().createdAt),updatedAt:nt(r.data().updatedAt)}},async updateStatus(t,e){await yn(xe(K,"referrals",t),{status:e,updatedAt:Me()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},DO={async getByUserId(t){const e=Ue(Re(K,"profiles"),Oe("userId","==",t)),n=await qe(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:nt(s.createdAt),updatedAt:nt(s.updatedAt)}}return null},async update(t,e){const n=Ue(Re(K,"profiles"),Oe("userId","==",t)),r=await qe(n);if(!r.empty){const s=xe(K,"profiles",r.docs[0].id);await yn(s,{...e,updatedAt:Me()})}}},go={async create(t){return(await Js(Re(K,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Me(),updatedAt:Me()})).id},async getByMerchantId(t){const e=Ue(Re(K,"merchantWallets"),Oe("merchantUserId","==",t)),r=(await qe(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Ue(Re(K,"wallets"),Oe("userId","==",t));return(await qe(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=xe(K,"merchantWallets",t),n=await Xt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:nt(r.createdAt),updatedAt:nt(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=Ue(Re(K,"merchantWallets"),Oe("iccid","==",t)),n=await qe(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:nt(s.createdAt),updatedAt:nt(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=Ue(Re(K,"merchantWallets"),Oe("msisdn","==",t)),r=await qe(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}const s=Ue(Re(K,"merchantWallets")),i=await qe(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=xe(K,"merchantWallets",t);await yn(n,{...e,updatedAt:Me()})},async updateUsage(t,e,n){const r=xe(K,"merchantWallets",t),s={updatedAt:Me()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await yn(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Ue(Re(K,"merchantWallets"),Oe("msisdn","in",o)),c=(await qe(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await yn(d.ref,{merchantUserId:e,updatedAt:Me()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=xe(K,"merchantWallets",t);await On(e)}},zE={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await X(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>ka);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Me(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Js(Re(K,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await X(async()=>{const{ProfitService:d}=await import("./profitService-D3k_nU3Q.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await go.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),m=Number(t.amount||0),w=String((t==null?void 0:t.originType)||"").trim()==="withdraw",g=String(t.txnType||"")==="receive";w||g?await go.updateUsage(c,void 0,f+m):await go.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const g=await go.getById(h);m=String((g==null?void 0:g.msisdn)||(g==null?void 0:g.label)||h).trim()}catch{}let w="";f==="withdraw"?w=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?w=`   ${c}   ${m||" "}   ${d||""}    ${r}`:w=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Ue(Re(K,"transactions"),Oe("shopId","==",t),Ys("createdAt","desc"));return(await qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),confirmedAt:r.data().confirmedAt?nt(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Ue(Re(K,"transactions"),Oe("merchantUserId","==",t),Ys("createdAt","desc"));return(await qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),confirmedAt:r.data().confirmedAt?nt(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Ue(Re(K,"transactions"),Oe("merchantUserId","==",t)),n=Ue(Re(K,"transactions"),Oe("userId","==",t)),[r,s]=await Promise.all([qe(e),qe(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:nt(c.createdAt),confirmedAt:c.confirmedAt?nt(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=xe(K,"transactions",t);await yn(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function Yq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await zE.create(e);try{const{calculateCommission:r}=await X(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>ka);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Vr.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await X(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>ka);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Vr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Vr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await X(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>i_);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const Jq="https://summer-cake-5149.alkaptin2030.workers.dev",NO={async getTelegramWorkerUrl(){var t;try{const e=xe(K,"systemSettings","core"),n=await Xt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=xe(K,"systemSettings","core");await ln(e,{telegramWorkerUrl:t,updatedAt:Me()},{merge:!0})}},Xq={async send(t,e){try{const n=await Vr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await NO.getTelegramWorkerUrl()||Jq).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},Zq={async log(t,e,n,r,s){await Js(Re(K,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Me()})},async getLogs(t=100){const e=Ue(Re(K,"auditLogs"),Ys("createdAt","desc"),ko(t));return(await qe(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Ue(Re(K,"deletedTransactions"),Ys("deletedAt","desc"));return(await qe(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:nt(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Ue(Re(K,"deletedTransactions"),Oe("userId","==",t),Ys("deletedAt","desc"));return(await qe(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:nt(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Ue(Re(K,"deletedTransactions"),Oe("userId","==",t));return(await qe(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:nt(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Me(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Js(Re(K,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Ue(Re(K,"deletedTransactions"),Oe("originalTransactionId","==",t),Oe("userId","==",e)),r=await qe(n);r.empty?await Js(Re(K,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Me()}):await Promise.all(r.docs.map(s=>yn(s.ref,{permanent:!0,deletedAt:Me()}))),console.log("    :",t);try{const s=Ue(Re(K,"userTransactions"),Oe("userId","==",e)),o=(await qe(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>On(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=xe(K,"transactions",t);(await Xt(s)).exists()&&(console.log("     transactions  "),await On(s));const o=Ue(Re(K,"transactions"),Oe("transactionId","==",t)),a=await qe(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>On(d.ref))));const l=Ue(Re(K,"transactions"),Oe("originalTransactionId","==",t)),c=await qe(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>On(d.ref))));try{const d=Ue(Re(K,"deletedTransactions"),Oe("userId","==",e),Oe("originalTransactionId","==",t)),h=await qe(d),f=h.docs.map(w=>{var g;return String(((g=w.data())==null?void 0:g.reference)||"")}).filter(Boolean),m=h.docs.map(w=>{var g;return String(((g=w.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const w of f){const g=Ue(Re(K,"transactions"),Oe("reference","==",w)),y=await qe(g);y.empty||(console.log(`  ${y.size}   transactions  reference=${w}`),await Promise.all(y.docs.map(E=>On(E.ref))))}for(const w of m){try{const E=xe(K,"transactions",w);(await Xt(E)).exists()&&(console.log("     transactions  :",w),await On(E))}catch{}const g=Ue(Re(K,"transactions"),Oe("transactionId","==",w)),y=await qe(g);y.empty||(console.log(`  ${y.size}   transactions  transactionId=${w}`),await Promise.all(y.docs.map(E=>On(E.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},OO={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=xe(K,"daily_reports_archive",e);return await ln(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Me()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=Ue(Re(K,"daily_reports_archive"),Oe("userId","==",t),ko(e)),a=await qe(o);let l=[];try{l=(await qe(Ue(Re(K,"deletedDailyArchives"),Oe("userId","==",t)))).docs.map(w=>{var g,y;return{id:w.id,reportDate:String(((g=w.data())==null?void 0:g.reportDate)||""),archiveId:String(((y=w.data())==null?void 0:y.archiveId)||"")}})}catch{}const c=(m,w)=>l.some(g=>g.archiveId&&g.archiveId===m||g.reportDate&&g.reportDate===w),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:nt(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const w=h.get(m.reportDate);(!w||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=w.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,w)=>m.reportDate<w.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Ue(Re(K,"daily_reports_archive"),Oe("userId","==",t)),s=await qe(r);let i=0;for(const o of s.docs){const a=nt(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await On(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Ue(Re(K,"daily_reports_archive"),Oe("userId","==",t)),s=(await qe(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:nt(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await On(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=Ue(Re(K,"daily_reports_archive"),Oe("userId","==",t)),n=await qe(e);let r=0;for(const s of n.docs)try{await On(s.ref),r++}catch{const o=s.data();try{await Js(Re(K,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Me()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Vr={async getUserData(t){try{console.log("     :",{userId:t});const e=xe(K,"users",t),n=await Xt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:nt(r.createdAt),updatedAt:nt(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=Ue(Re(K,"deletedTransactions"),Oe("userId","==",t));return ki(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data();if(!((i==null?void 0:i.permanent)===!0))return;const a=String((i==null?void 0:i.originalTransactionId)||""),l=String((i==null?void 0:i.transactionId)||""),c=String((i==null?void 0:i.reference)||"");a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptById(t,l),c&&this.removeLocalReceiptByRef(t,c)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=xe(K,"users",t),r=sl(e);await ln(n,{...r||{},updatedAt:Me()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=xe(K,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=sl(r);let i={};try{const l=await Xt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Me()};console.log("   :",o);let a=3;for(;a>0;)try{await ln(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=Ue(Re(K,"userTransactions"),Oe("userId","==",t),Ys("createdAt","desc"),ko(200));e=await qe(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=Ue(Re(K,"userTransactions"),Oe("userId","==",t));e=await qe(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:nt(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=Ue(Re(K,"deletedTransactions"),Oe("userId","==",t),Oe("reference","==",o));if(!(await qe(c)).empty)return console.log("          ."),"skip-deleted"}{const c=Ue(Re(K,"deletedTransactions"),Oe("userId","==",t),Oe("permanent","==",!0)),d=await qe(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(m=>!!m).map(m=>String(m));if(d.docs.find(m=>{const w=m.data(),g=String(w.originalTransactionId||w.transactionId||m.id||""),y=String(w.reference||"");return g&&h.includes(g)||y&&h.includes(y)}))return console.log("        /   ."),"skip-deleted"}}const a=Ue(Re(K,"deletedTransactions"),Oe("userId","==",t),Ys("deletedAt","desc"),ko(20)),l=await qe(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,m=10*60*1e3;if(l.docs.find(g=>{const y=g.data(),E=y.senderMsisdn||y.senderPhone||y.sender_msisdn,v=y.receiverMsisdn||y.receiverPhone||y.receiver_msisdn,_=Number(y.amount||0),x=y.createdAt?new Date(String(y.createdAt)):f;return Math.abs(x.getTime()-f.getTime())<=m&&_===h&&E===c&&v===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=Ue(Re(K,"userTransactions"),Oe("userId","==",t));if(s.transactionId){const g=Ue(Re(K,"userTransactions"),Oe("userId","==",t),Oe("transactionId","==",s.transactionId)),y=await qe(g);if(!y.empty){const E=y.docs[0];return await yn(xe(K,"userTransactions",E.id),{...s,uploadedAt:Me()}),E.id}}if(s.reference){const g=Ue(Re(K,"userTransactions"),Oe("userId","==",t),Oe("reference","==",s.reference)),y=await qe(g);if(!y.empty){const E=y.docs[0];return await yn(xe(K,"userTransactions",E.id),{...s,uploadedAt:Me()}),E.id}}const a=Ue(Re(K,"userTransactions"),Oe("userId","==",t),Ys("createdAt","desc"),ko(20)),l=await qe(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,m=5*60*1e3,w=l.docs.find(g=>{const y=g.data(),E=y.senderMsisdn||y.senderPhone||y.sender_msisdn,v=y.receiverMsisdn||y.receiverPhone||y.receiver_msisdn,_=Number(y.amount||0),x=nt(y.createdAt);return Math.abs(x.getTime()-f.getTime())<=m&&_===h&&E===c&&v===d});if(w)return await yn(xe(K,"userTransactions",w.id),{...s,uploadedAt:Me()}),w.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Js(Re(K,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Me(),uploadedAt:Me()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=xe(K,"userTransactions",e),a=await Xt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await On(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=Ue(Re(K,"userTransactions"),Oe("userId","==",t)),r=await qe(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[Ue(Re(K,"userTransactions"),Oe("merchantUserId","==",t)),Ue(Re(K,"userTransactions"),Oe("createdBy","==",t))];for(const o of i)try{const l=(await qe(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await On(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=xe(K,"transactions",e);if((await Xt(a)).exists())console.log("     transactions   "),await On(a);else{const c=Ue(Re(K,"transactions"),Oe("transactionId","==",e)),d=await qe(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>On(m.ref))));const h=Ue(Re(K,"transactions"),Oe("originalTransactionId","==",e)),f=await qe(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>On(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},r_={async getToday(t){const e=xe(K,"dailyStats",t,"today","data"),n=await Xt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=xe(K,"dailyStats",t,"today","data");await ln(n,{...sl(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=xe(K,"dailyStats",t,"history",e);await ln(r,sl(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},eH={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Me()};return(await Js(Re(K,"installments"),n)).id},listenByUser(t,e){const n=Ue(Re(K,"installments"),Oe("userId","==",t));return ki(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await yn(xe(K,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await On(xe(K,"installments",t)),!0}},ku=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:eH,auditLogService:Zq,dailyReportsArchiveService:OO,dailyStatsService:r_,merchantWalletService:go,profileService:em,profileServiceExtra:DO,recordAutoTransaction:Yq,referralService:n_,sanitizeFirestoreData:sl,systemSettingsService:NO,telegramNotifier:Xq,transactionService:zE,userDataService:Vr},Symbol.toStringTag,{value:"Module"}));var ro=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(ro||{});const tH=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},wf=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},nH=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},UG=async(t,e,n,r)=>{try{const s=new Date,i=tH(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=xe(K,"users",t);if(await yn(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},DA=async t=>{try{const e=xe(K,"users",t);await yn(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},LO=async t=>{try{const e=xe(K,"users",t),n=await Xt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},jG=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},$G=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=nH(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},BG=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var Fc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Fc||(Fc={}));class Gy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const rH=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},sH=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:rH(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const w=s(),g=a(h);let y;const E=async()=>(!y&&w in f?y=typeof f[w]=="function"?y=await f[w]():y=f[w]:e!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),v=(A,b)=>{var P,D;if(g){const O=g==null?void 0:g.methods.find(C=>b===C.name);if(O)return O.rtype==="promise"?C=>n.nativePromise(h,b.toString(),C):(C,$)=>n.nativeCallback(h,b.toString(),C,$);if(A)return(P=A[b])===null||P===void 0?void 0:P.bind(A)}else{if(A)return(D=A[b])===null||D===void 0?void 0:D.bind(A);throw new Gy(`"${h}" plugin is not implemented on ${w}`,Fc.Unimplemented)}},_=A=>{let b;const P=(...D)=>{const O=E().then(C=>{const $=v(C,A);if($){const ie=$(...D);return b=ie==null?void 0:ie.remove,ie}else throw new Gy(`"${h}.${A}()" is not implemented on ${w}`,Fc.Unimplemented)});return A==="addListener"&&(O.remove=async()=>b()),O};return P.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:A,writable:!1,configurable:!1}),P},x=_("addListener"),k=_("removeListener"),L=(A,b)=>{const P=x({eventName:A},b),D=async()=>{const C=await P;k({eventName:A,callbackId:C},b)},O=new Promise(C=>P.then(()=>C({remove:D})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},O},R=new Proxy({},{get(A,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?L:x;case"removeListener":return k;default:return _(b)}}});return r[h]=R,c.set(h,{name:h,proxy:R,platforms:new Set([...Object.keys(f),...g?[w]:[]])}),R};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Gy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},iH=t=>t.Capacitor=sH(t),ve=iH(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),kg=ve.registerPlugin;class VO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new ve.Exception(e,Fc.Unimplemented)}unavailable(e="not available"){return new ve.Exception(e,Fc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const NA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),OA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class oH extends VO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=OA(s).trim(),i=OA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=NA(e.key),r=NA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}kg("CapacitorCookies",{web:()=>new oH});const aH=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),lH=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},cH=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,uH=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=lH(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class dH extends VO{async request(e){const n=uH(e,e.webFetchExtra),r=cH(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await aH(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}kg("CapacitorHttp",{web:()=>new dH});const ya=kg("Preferences",{web:()=>X(()=>import("./web-B3K1_McE.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Qy=Object.freeze(Object.defineProperty({__proto__:null,Preferences:ya},Symbol.toStringTag,{value:"Module"})),hH={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},MO=S.createContext(void 0);function dl(){const t=S.useContext(MO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const fH=({children:t})=>{var R,A;const[e,n]=S.useState(null),[r,s]=S.useState(null),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,d]=S.useState(!0),h=async b=>{var P,D,O,C,$,ie,oe,fe,j,V,te,ae,Y,ke,Se,De;try{const Ye=xe(K,"profiles",b);let Ae=!1;try{const Xe=await iO(Ye);if(Xe.exists()){const je=Xe.data(),ze={userId:Xe.id,shopId:je.shopId,role:je.role,fullName:je.fullName,phone:je.phone,shopName:je.shopName||null,approved:je.approved,avatarId:je.avatarId,bridgeLink:je.bridgeLink||null,bridgeDeviceId:je.bridgeDeviceId||null,showWithdrawNote:je.showWithdrawNote!==void 0?!!je.showWithdrawNote:!0,isReceiptNoteEnabled:je.isReceiptNoteEnabled!==void 0?!!je.isReceiptNoteEnabled:!0,smsReadingEnabled:je.smsReadingEnabled!==void 0?!!je.smsReadingEnabled:!0,smsAutoRegisterEnabled:je.smsAutoRegisterEnabled!==void 0?!!je.smsAutoRegisterEnabled:!1,createdAt:((D=(P=je.createdAt)==null?void 0:P.toDate)==null?void 0:D.call(P))||new Date,updatedAt:((C=(O=je.updatedAt)==null?void 0:O.toDate)==null?void 0:C.call(O))||new Date,trialStarted:je.trialStarted||!1,trialStartDate:(ie=($=je.trialStartDate)==null?void 0:$.toDate)==null?void 0:ie.call($),trialEndDate:(fe=(oe=je.trialEndDate)==null?void 0:oe.toDate)==null?void 0:fe.call(oe),trialExpired:je.trialExpired||!1};s(ze),Ae=!0,d(!1)}}catch(Xe){console.log("Cache profile not available:",(Xe==null?void 0:Xe.code)||Xe)}try{if(!Ae){const Xe=localStorage.getItem(`profile_cache_${b}`);if(Xe){const je=JSON.parse(Xe);s(je),Ae=!0,d(!1)}}}catch{}if(!Ae)for(let Xe=0;Xe<3;Xe++)try{const je=await Xt(Ye);if(je.exists()){const ze=je.data(),Vt={userId:je.id,shopId:ze.shopId,role:ze.role,fullName:ze.fullName,phone:ze.phone,sim1Number:ze.sim1Number||null,sim2Number:ze.sim2Number||null,shopName:ze.shopName||null,approved:ze.approved,avatarId:ze.avatarId,bridgeLink:ze.bridgeLink||null,bridgeDeviceId:ze.bridgeDeviceId||null,showWithdrawNote:ze.showWithdrawNote!==void 0?!!ze.showWithdrawNote:!0,isReceiptNoteEnabled:ze.isReceiptNoteEnabled!==void 0?!!ze.isReceiptNoteEnabled:!0,smsReadingEnabled:ze.smsReadingEnabled!==void 0?!!ze.smsReadingEnabled:!0,smsAutoRegisterEnabled:ze.smsAutoRegisterEnabled!==void 0?!!ze.smsAutoRegisterEnabled:!1,createdAt:((V=(j=ze.createdAt)==null?void 0:j.toDate)==null?void 0:V.call(j))||new Date,updatedAt:((ae=(te=ze.updatedAt)==null?void 0:te.toDate)==null?void 0:ae.call(te))||new Date,trialStarted:ze.trialStarted||!1,trialStartDate:(ke=(Y=ze.trialStartDate)==null?void 0:Y.toDate)==null?void 0:ke.call(Y),trialEndDate:(De=(Se=ze.trialEndDate)==null?void 0:Se.toDate)==null?void 0:De.call(Se),trialExpired:ze.trialExpired||!1};s(Vt);try{localStorage.setItem(`profile_cache_${je.id}`,JSON.stringify(Vt))}catch{}Ae=!0,d(!1);break}}catch{}return ki(Ye,async Xe=>{var je,ze,Vt,rn,Vn,Gr,In,nr;if(Xe.exists()){const Le=Xe.data(),vt={userId:Xe.id,shopId:Le.shopId,role:Le.role,fullName:Le.fullName,phone:Le.phone,sim1Number:Le.sim1Number||null,sim2Number:Le.sim2Number||null,shopName:Le.shopName||null,approved:Le.approved,avatarId:Le.avatarId,bridgeLink:Le.bridgeLink||null,bridgeDeviceId:Le.bridgeDeviceId||null,showWithdrawNote:Le.showWithdrawNote!==void 0?!!Le.showWithdrawNote:!0,isReceiptNoteEnabled:Le.isReceiptNoteEnabled!==void 0?!!Le.isReceiptNoteEnabled:!0,smsReadingEnabled:Le.smsReadingEnabled!==void 0?!!Le.smsReadingEnabled:!0,smsAutoRegisterEnabled:Le.smsAutoRegisterEnabled!==void 0?!!Le.smsAutoRegisterEnabled:!1,createdAt:((ze=(je=Le.createdAt)==null?void 0:je.toDate)==null?void 0:ze.call(je))||new Date,updatedAt:((rn=(Vt=Le.updatedAt)==null?void 0:Vt.toDate)==null?void 0:rn.call(Vt))||new Date,trialStarted:Le.trialStarted||!1,trialStartDate:(Gr=(Vn=Le.trialStartDate)==null?void 0:Vn.toDate)==null?void 0:Gr.call(Vn),trialEndDate:(nr=(In=Le.trialEndDate)==null?void 0:In.toDate)==null?void 0:nr.call(In),trialExpired:Le.trialExpired||!1};s(vt);try{localStorage.setItem(`profile_cache_${Xe.id}`,JSON.stringify(vt))}catch{}Ae||(Ae=!0,d(!1))}else if(!Ae)try{const Le=await DO.getByUserId(b);if(Le){const vt={userId:b,shopId:Le.shopId,role:Le.role||"user",fullName:Le.fullName||null,phone:Le.phone||null,shopName:Le.shopName||null,approved:Le.approved??!1,avatarId:Le.avatarId||void 0,bridgeLink:Le.bridgeLink||null,bridgeDeviceId:Le.bridgeDeviceId||null,createdAt:Me(),updatedAt:Me()};await ln(xe(K,"profiles",b),vt,{merge:!0}),s({...Le,userId:b,createdAt:Le.createdAt||new Date,updatedAt:Le.updatedAt||new Date})}else await m(b)}catch(Le){console.error("Profile migration/create error:",Le)}finally{Ae=!0,d(!1)}},Xe=>{console.error("Profile listener error:",Xe);try{d(!1)}catch{}})}catch(Ye){return console.error("Error setting up profile listener:",Ye),await m(b),d(!1),()=>{}}},f=async b=>{try{const P=xe(K,"users",b.uid);(await Xt(P)).exists()?(await yn(P,{lastLogin:Me(),updatedAt:Me()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",b.uid)):(await ln(P,{email:b.email||"",displayName:b.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Me(),updatedAt:Me(),lastLogin:Me()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",b.uid))}catch(P){console.error(" ensureAdminUserDoc error:",P)}},m=async(b,P,D,O,C)=>{var $,ie;try{console.log("Creating default profile for user:",b);const oe=n_.generateReferralCode(b);let fe=null;const j={userId:b,shopId:"default-shop",role:"user",fullName:P||" ",phone:D||null,shopName:O||null,approved:!1,referralCode:oe,referredBy:C||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!0,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(j),console.log("Created temporary profile:",j);try{const{doc:V,setDoc:te,serverTimestamp:ae}=await X(async()=>{const{doc:De,setDoc:Ye,serverTimestamp:Ae}=await Promise.resolve().then(()=>dn);return{doc:De,setDoc:Ye,serverTimestamp:Ae}},void 0,import.meta.url),{db:Y}=await X(async()=>{const{db:De}=await Promise.resolve().then(()=>Ct);return{db:De}},void 0,import.meta.url),ke={email:(($=Dt.currentUser)==null?void 0:$.email)||"",displayName:P||" ",phone:D||null,shopName:O||null,isActive:!1,referralCode:oe,referredBy:C||null,createdAt:ae(),lastLogin:null,updatedAt:ae()};if(console.log("Attempting to add user to admin collection with data:",ke),await te(V(Y,"users",b),ke,{merge:!0}),console.log(" User successfully added to admin collection:",ke),C)try{const{query:De,collection:Ye,where:Ae,limit:Yt,getDocs:Xe}=await X(async()=>{const{query:rn,collection:Vn,where:Gr,limit:In,getDocs:nr}=await Promise.resolve().then(()=>dn);return{query:rn,collection:Vn,where:Gr,limit:In,getDocs:nr}},void 0,import.meta.url),{db:je}=await X(async()=>{const{db:rn}=await Promise.resolve().then(()=>Ct);return{db:rn}},void 0,import.meta.url),ze=De(Ye(je,"users"),Ae("referralCode","==",C),Yt(1)),Vt=await Xe(ze);Vt.empty?console.log(" Referral code not found in users collection:",C):(fe=Vt.docs[0].id,await n_.create({referrerId:fe,referredUserId:b,referredUserEmail:((ie=Dt.currentUser)==null?void 0:ie.email)||"",referralCode:C,status:"completed"}),console.log(" Referral record created successfully for referrer:",fe))}catch(De){console.error(" Error creating referral record:",De)}const Se=await Xt(V(Y,"users",b));Se.exists()?console.log(" User document verified in Firestore:",Se.data()):console.log(" User document not found after creation")}catch(V){console.error(" Error adding user to admin collection:",V)}try{const{addDoc:V,collection:te,serverTimestamp:ae}=await X(async()=>{const{addDoc:Ye,collection:Ae,serverTimestamp:Yt}=await Promise.resolve().then(()=>dn);return{addDoc:Ye,collection:Ae,serverTimestamp:Yt}},void 0,import.meta.url),{db:Y}=await X(async()=>{const{db:Ye}=await Promise.resolve().then(()=>Ct);return{db:Ye}},void 0,import.meta.url),Se=(await V(te(Y,"shops"),{name:O||" ",ownerId:b,createdAt:ae(),updatedAt:ae(),isActive:!0})).id;await em.create({userId:b,shopId:Se,role:"user",fullName:" ",phone:null});try{await em.update(b,{referralCode:oe,referredBy:fe||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(Ye){console.warn(" Failed to update profile with referral fields:",Ye)}const De=await em.getById(b);De&&(s(De),console.log("Updated with Firebase profile:",De))}catch(V){console.error("Error creating profile:",V),console.log("Using local profile - Firebase unavailable")}}catch(oe){console.error("Error creating default profile:",oe)}};S.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const b=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const P=localStorage.getItem("demoUser"),D=localStorage.getItem("demoProfile");if(P&&D){console.log(" Found demo user in localStorage");try{const C=JSON.parse(P),$=JSON.parse(D);n(C),s($),clearTimeout(b),d(!1);return}catch(C){console.error("Error parsing demo user data:",C),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const O=XB(Dt,async C=>{if(console.log(" Auth state changed:",{uid:C==null?void 0:C.uid,email:C==null?void 0:C.email,emailVerified:C==null?void 0:C.emailVerified,timestamp:new Date().toISOString()}),n(C),C){console.log(" User authenticated, starting profile hydration for:",C.uid);try{await ya.set({key:"current_user_id",value:C.uid}),console.log(" Synced current_user_id to Native:",C.uid)}catch($){console.error("Failed to sync user ID to native:",$)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(C.uid),v(),f(C)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await ya.remove({key:"current_user_id"}),await ya.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(b)});return()=>{clearTimeout(b),O()}},[]),S.useEffect(()=>{const b=async()=>{try{await _(),await v()}catch{}};try{window.addEventListener("app:softRefresh",b)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",b)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=i==null?void 0:i.subscription,P=b==null?void 0:b.endDate,D=P!=null&&P.toDate?P.toDate():P?new Date(P):null;let O=null;const C=async()=>{try{const $=new Date;b&&b.isActive===!0&&D&&!isNaN(D.getTime())&&$>D&&(await DA(e.uid),await v())}catch{}};return C(),O=setInterval(C,36e5),()=>{try{clearInterval(O)}catch{}}},[e==null?void 0:e.uid,(R=i==null?void 0:i.subscription)==null?void 0:R.endDate,(A=i==null?void 0:i.subscription)==null?void 0:A.isActive]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=Vr.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{b==null||b()}catch{}}},[e==null?void 0:e.uid]);const w=async(b,P,D,O,C,$)=>{try{const ie=(b||"").trim().toLowerCase(),oe=(P||"").trim();console.log(" Attempting to sign up user:",ie);const fe=await HS(Dt,ie,oe);console.log(" Sign up successful:",fe.user.uid),await m(fe.user.uid,D,O,C,$),await f(fe.user);try{await h(fe.user.uid),await v()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(ie){console.error(" Sign up error:",ie);let oe="    ";return ie.code==="auth/email-already-in-use"?oe="    ":ie.code==="auth/weak-password"?oe="   ":ie.code==="auth/invalid-email"&&(oe="   "),{error:{...ie,message:oe}}}},g=async(b,P)=>{var C;const D=(b||"").trim().toLowerCase(),O=(P||"").trim();try{const $=ae=>ae.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),ie=ae=>ae.replace(/[-]/g,Y=>String("0123456789"["".indexOf(Y)])).replace(/[-]/g,Y=>String("0123456789"["".indexOf(Y)])),oe=ae=>ae.replace(/[0-9]/g,Y=>""[Number(Y)]),fe=ae=>ie($(ae));if(console.log(" Attempting to sign in user:",D),D==="test@example.com"&&O==="123456"){console.log(" Demo user login detected");const ae={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},Y={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(ae)),localStorage.setItem("demoProfile",JSON.stringify(Y)),n(ae),s(Y),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let j;const V=[fe(O),$(O),oe($(O))];let te=null;for(const ae of V)try{ae!==O&&console.log(" Trying password variant"),j=await KB(Dt,D,ae);break}catch(Y){if(te=Y,(Y==null?void 0:Y.code)!=="auth/wrong-password"&&(Y==null?void 0:Y.code)!=="auth/invalid-credential")throw Y}if(!j)throw te||new Error("auth/invalid-credential");console.log(" Sign in successful:",j.user.uid);try{if((await Xt(xe(K,"deletedUsers",j.user.uid))).exists())return console.log(" User is deleted, signing out"),await KS(Dt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(ae){console.error("Error checking deleted users:",ae)}await f(j.user);try{await h(j.user.uid),await v()}catch{}return{error:null}}catch($){if(console.error(" Sign in error:",$),D==="test@example.com"&&$.code==="auth/user-not-found"){console.log(" Creating test user...");try{const fe=await HS(Dt,D,O);return console.log(" Test user created:",fe.user.uid),await m(fe.user.uid," ","01000000000"," "),{error:null}}catch(fe){return console.error(" Error creating test user:",fe),{error:fe}}}let ie="    ",oe=$==null?void 0:$.code;if(oe==="auth/invalid-credential")try{const fe=await QB(Dt,((C=$==null?void 0:$.customData)==null?void 0:C.email)||"");Array.isArray(fe)&&fe.length===0?(oe="auth/user-not-found",ie="     "):(oe="auth/wrong-password",ie="   ")}catch{ie="      "}else oe==="auth/invalid-email"?ie="    ":oe==="auth/user-not-found"?ie="     ":oe==="auth/wrong-password"?ie="   ":oe==="auth/too-many-requests"&&(ie="      ");return{error:{...$,code:oe,message:ie}}}},y=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await KS(Dt);try{await ya.remove({key:"selected_wallet_id"}),await ya.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const D=(()=>{try{const O=typeof window<"u"?window:null,C=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),$=typeof window<"u"&&window.location.protocol==="file:",ie=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return C||$||ie||typeof import.meta<"u"&&hH&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(D)}catch{window.location.href=D}}catch(b){console.error("Sign out error:",b)}},E=async b=>{try{return await HB(Dt,b),{error:null}}catch(P){console.error("Reset password error:",P);let D="        ";return P.code==="auth/user-not-found"?D="     ":P.code==="auth/invalid-email"&&(D="   "),{error:{...P,message:D}}}},v=async()=>{var b,P;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{const D=xe(K,"users",e.uid);try{const C=await Xt(D);if(C.exists()){const $=C.data();o($);const ie=((b=$==null?void 0:$.branchPackage)==null?void 0:b.status)==="active";let oe=!1;ie?oe=!0:oe=wf($.subscription),l(oe)}}catch{}return ki(D,async C=>{var $,ie,oe,fe,j,V,te,ae;if(C.exists()){const Y=C.data();o(Y),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:Y.subscription,subscriptionExists:!!Y.subscription,planType:($=Y.subscription)==null?void 0:$.planType,isActive:(ie=Y.subscription)==null?void 0:ie.isActive,startDate:(oe=Y.subscription)==null?void 0:oe.startDate,endDate:(fe=Y.subscription)==null?void 0:fe.endDate,activatedBy:(j=Y.subscription)==null?void 0:j.activatedBy,activatedAt:(V=Y.subscription)==null?void 0:V.activatedAt,isOnFreeTrial:Y.isOnFreeTrial,freeTrialEndDate:Y.freeTrialEndDate,branchPackageStatus:(te=Y==null?void 0:Y.branchPackage)==null?void 0:te.status});const ke=((ae=Y==null?void 0:Y.branchPackage)==null?void 0:ae.status)==="active";let Se=!1;ke?(console.log(" Branch package is active, granting access"),Se=!0):Se=wf(Y.subscription),l(Se),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:Se,isOnFreeTrial:Y.isOnFreeTrial,hasActiveBranchPackage:ke,reason:ke?"Branch package active":Y.subscription?Y.subscription.isActive?Y.subscription.planType==="lifetime"?"Lifetime plan":Y.subscription.endDate?new Date>new Date(Y.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const De=Y.subscription,Ye=De==null?void 0:De.planType,Ae=De==null?void 0:De.endDate,Yt=Ae!=null&&Ae.toDate?Ae.toDate():Ae?new Date(Ae):null,Xe=new Date;De&&De.isActive===!0&&Yt&&!isNaN(Yt.getTime())&&Xe>Yt&&(await DA(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:Ye,endDate:Yt}))}catch(De){console.warn("Failed to auto-deactivate expired subscription:",De)}}},C=>{console.error(" Subscription listener error:",C),(async()=>{var $;try{const ie=await Xt(D);if(ie.exists()){const oe=ie.data();o(oe);const fe=(($=oe==null?void 0:oe.branchPackage)==null?void 0:$.status)==="active";let j=!1;fe?j=!0:j=wf(oe.subscription),l(j)}}catch{}})()})}catch(D){console.error("Error setting up subscription listener:",D);try{const O=await Xt(xe(K,"users",e.uid));if(O.exists()){const C=O.data();o(C);const $=((P=C==null?void 0:C.branchPackage)==null?void 0:P.status)==="active";let ie=!1;$?ie=!0:ie=wf(C.subscription),l(ie)}}catch{}}},_=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await v()}catch(b){console.error("Error refreshing profile:",b)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:w,signIn:g,signOut:y,resetPassword:E,updateUserProfile:async b=>{if(e)try{const P={updatedAt:Me()};if(b.fullName!==void 0&&(P.fullName=b.fullName),b.phone!==void 0&&(P.phone=b.phone),b.sim1Number!==void 0){const D=(b.sim1Number||"").trim();P.sim1Number=D.length?D:null}if(b.sim2Number!==void 0){const D=(b.sim2Number||"").trim();P.sim2Number=D.length?D:null}if(b.bridgeLink!==void 0){const D=(b.bridgeLink||"").trim();P.bridgeLink=D.length?D:null}if(b.bridgeDeviceId!==void 0){const D=(b.bridgeDeviceId||"").trim();P.bridgeDeviceId=D.length?D:null}b.showWithdrawNote!==void 0&&(P.showWithdrawNote=!!b.showWithdrawNote),b.isReceiptNoteEnabled!==void 0&&(P.isReceiptNoteEnabled=!!b.isReceiptNoteEnabled),b.smsReadingEnabled!==void 0&&(P.smsReadingEnabled=!!b.smsReadingEnabled),b.smsAutoRegisterEnabled!==void 0&&(P.smsAutoRegisterEnabled=!!b.smsAutoRegisterEnabled),await yn(xe(K,"profiles",e.uid),P),await h(e.uid)}catch(P){console.error("Error updating user profile:",P)}},updateAvatarId:async b=>{if(e)try{await yn(xe(K,"profiles",e.uid),{avatarId:b,updatedAt:Me()}),await h(e.uid)}catch(P){console.error("Error updating avatarId:",P)}},refreshProfile:_,checkSubscriptionStatus:v};return T.jsx(MO.Provider,{value:L,children:t})};function mH(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Dg="Checkbox",[pH]=Bc(Dg),[gH,WE]=pH(Dg);function yH(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,m]=o0({prop:n,defaultProp:s??!1,onChange:l,caller:Dg}),[w,g]=S.useState(null),[y,E]=S.useState(null),v=S.useRef(!1),_=w?!!o||!!w.closest("form"):!0,x={checked:f,disabled:i,setChecked:m,control:w,setControl:g,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:v,required:c,defaultChecked:Do(s)?!1:s,isFormControl:_,bubbleInput:y,setBubbleInput:E};return T.jsx(gH,{scope:e,...x,children:vH(h)?h(x):r})}var FO="CheckboxTrigger",UO=S.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:w}=WE(FO,t),g=$n(s,d),y=S.useRef(l);return S.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const v=()=>h(y.current);return E.addEventListener("reset",v),()=>E.removeEventListener("reset",v)}},[i,h]),T.jsx(tn.button,{type:"button",role:"checkbox","aria-checked":Do(l)?"mixed":l,"aria-required":c,"data-state":WO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:Nt(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Nt(n,E=>{h(v=>Do(v)?!0:!v),w&&m&&(f.current=E.isPropagationStopped(),f.current||E.stopPropagation())})})});UO.displayName=FO;var qE=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return T.jsx(yH,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>T.jsxs(T.Fragment,{children:[T.jsx(UO,{...h,ref:e,__scopeCheckbox:n}),f&&T.jsx(zO,{__scopeCheckbox:n})]})})});qE.displayName=Dg;var jO="CheckboxIndicator",$O=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=WE(jO,n);return T.jsx(ll,{present:r||Do(i.checked)||i.checked===!0,children:T.jsx(tn.span,{"data-state":WO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});$O.displayName=jO;var BO="CheckboxBubbleInput",zO=S.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:m}=WE(BO,t),w=$n(n,m),g=mH(i),y=eC(r);S.useEffect(()=>{const v=f;if(!v)return;const _=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(_,"checked").set,L=!s.current;if(g!==i&&k){const R=new Event("click",{bubbles:L});v.indeterminate=Do(i),k.call(v,Do(i)?!1:i),v.dispatchEvent(R)}},[f,g,i,s]);const E=S.useRef(Do(i)?!1:i);return T.jsx(tn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:w,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});zO.displayName=BO;function vH(t){return typeof t=="function"}function Do(t){return t==="indeterminate"}function WO(t){return Do(t)?"indeterminate":t?"checked":"unchecked"}const qO=S.forwardRef(({className:t,...e},n)=>T.jsx(qE,{ref:n,className:Bn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:T.jsx($O,{className:Bn("flex items-center justify-center text-current"),children:T.jsx(OF,{className:"h-4 w-4"})})}));qO.displayName=qE.displayName;const wp=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(typeof navigator<"u"?!navigator.onLine:!1);S.useEffect(()=>{const x=()=>c(!navigator.onLine);return window.addEventListener("online",x),window.addEventListener("offline",x),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",x)}},[]);const[d,h]=S.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:w,loading:g}=dl(),y=Kc();S.useEffect(()=>{try{m&&!g&&y("/user/dashboard")}catch{}},[m,g,y]),S.useEffect(()=>{try{const x=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;x&&e(x)}catch{}try{const x=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;x==="true"?h(!0):x==="false"&&h(!1)}catch{}(async()=>{var x,k;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const L=await((k=(x=navigator.credentials).get)==null?void 0:k.call(x,{password:!0,mediation:"optional"}));L&&L.type==="password"&&(L.id&&e(L.id),L.password&&r(L.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const L=sessionStorage.getItem("cashy:rememberedPassword");L&&!n&&r(L)}catch{}}catch{}})()},[]);const E=async x=>{if(x.preventDefault(),o){Kn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Kn.error("   .      .");return}const k=(t||"").trim().toLowerCase(),L=(n||"").trim();if(console.log("    :",{email:k,password:"***"}),!t||!n){Kn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(k)){Kn.error("    ");return}a(!0);try{try{await JB(Dt,d?Ek:t9);try{window.localStorage.setItem("cashy:rememberLogin",d?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:R}=await f(k,L);if(console.log(" SignIn result:",{error:R}),R){console.error("    :",R);const A=R==null?void 0:R.code;A==="auth/user-not-found"?Kn.error("     "):A==="auth/wrong-password"?Kn.error("   "):A==="auth/invalid-credential"?Kn.error("      "):A==="auth/too-many-requests"?Kn.error("      "):Kn.error((R==null?void 0:R.message)||"    ")}else{console.log("    !"),Kn.success("   !");try{if(d&&navigator.credentials&&window.PasswordCredential){const A=new window.PasswordCredential({id:k,name:k,password:L});await navigator.credentials.store(A)}if(d)try{sessionStorage.setItem("cashy:rememberedPassword",L)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(R){console.error("   :",R),Kn.error("   ")}finally{a(!1)}},v=x=>{if(o){x.preventDefault(),x.stopPropagation(),Kn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){x.preventDefault(),x.stopPropagation(),Kn.error("   .      .");return}t||Kn.error("   "),n||Kn.error("   ");const k=(t||"").trim().toLowerCase();k&&!/^\S+@\S+\.\S+$/.test(k)&&Kn.error("    ")},_=()=>{y("/user/forgot-password")};return S.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const x=document.documentElement,k=document.body,L=x.style.overflow,R=k.style.overflow,A=x.style.overscrollBehaviorY,b=k.style.overscrollBehaviorY;return x.style.overflow="hidden",k.style.overflow="hidden",x.style.overscrollBehaviorY="none",k.style.overscrollBehaviorY="none",()=>{x.style.overflow=L||"",k.style.overflow=R||"",x.style.overscrollBehaviorY=A||"",k.style.overscrollBehaviorY=b||""}},[]),T.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&T.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:T.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),T.jsx("div",{className:"absolute inset-0 bg-black/40"}),T.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:T.jsx(mU,{className:"w-10 h-10 text-white"})}),T.jsx("div",{className:"flex items-center justify-center mb-2",children:T.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),T.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),T.jsx("p",{className:"text-white/80",children:"    "})]}),T.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[T.jsxs("form",{onSubmit:E,className:"space-y-6",autoComplete:"on",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),T.jsxs("div",{className:"relative",children:[T.jsx(BI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),T.jsx(gw,{id:"username",type:"email",placeholder:"  ",value:t,onChange:x=>{const k=x.target.value;e(k);try{window.localStorage.setItem("cashy:lastEmail",k)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),T.jsxs("div",{className:"relative",children:[T.jsx(GF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),T.jsx(gw,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:x=>r(x.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),T.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?T.jsx(jF,{className:"w-5 h-5"}):T.jsx(BF,{className:"w-5 h-5"})})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.jsx(qO,{id:"rememberLogin",checked:d,onCheckedChange:x=>h(!!x)}),T.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),T.jsx("div",{className:"flex justify-end",children:T.jsxs(us,{type:"button",variant:"ghost",size:"sm",onClick:_,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[T.jsx(BI,{className:"w-4 h-4 ml-1"}),"  "]})}),T.jsx("button",{type:"submit",onClick:v,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?T.jsxs("div",{className:"flex items-center justify-center",children:[T.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):T.jsxs("div",{className:"flex items-center justify-center",children:[T.jsx(RF,{className:"w-5 h-5 ml-2"})," "]})})]}),T.jsxs("div",{className:"mt-6 text-center space-y-3",children:[T.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",T.jsx(c$,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),T.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",T.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",T.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),T.jsx("div",{className:"mt-6 text-center",children:T.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},wH=Object.freeze(Object.defineProperty({__proto__:null,default:wp},Symbol.toStringTag,{value:"Module"})),_H=()=>{const t=Kc(),e=ri(),{signOut:n,user:r,userSubscription:s}=dl(),{toast:i}=s0(),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=[{id:"home",label:"",icon:HF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:WF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:CF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:zI,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:AF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:wy,path:"/transactions"},{id:"settings",label:"",icon:WI,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:DF,action:()=>{var E;a(!1);const y=(E=s==null?void 0:s.subscription)==null?void 0:E.planType;if(y===ro.TAHWEELA||y===ro.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:gU,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:FF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:uU,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:wy,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:hU,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:zI,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:VF,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:XF,action:()=>{a(!1);const E=`   
  : ${(r==null?void 0:r.email)||" "}`,v=encodeURIComponent(E);window.open(`https://wa.me/201000392539?text=${v}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:$I,action:async()=>{a(!1);try{await n()}catch(y){console.error("Logout error:",y)}},color:"#EF4444"}],m=[{id:"shop-expenses-settings",label:" ",icon:wy,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:WI,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:$I,action:async()=>{c(!1);try{await n()}catch(y){console.error("Logout error:",y)}},color:"#EF4444"}],w=(y,E,v,_)=>{var A;const k=((A=s==null?void 0:s.subscription)==null?void 0:A.planType)===ro.TAHWEELA,L=b=>["/user/dashboard","/profile-settings"].includes(b),R=b=>b==="debts";if(v){if(k&&!R(_)&&!L(y)){i({title:"  ",description:"      .",variant:"destructive"});return}v()}else if(E&&y==="/add"){if(k){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!E){if(k&&!L(y)){i({title:"  ",description:"      .",variant:"destructive"});return}t(y)}},g=y=>e.pathname===y;return T.jsxs("div",{className:"mobile-bottom-nav",children:[o&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),T.jsx("div",{className:"quick-actions-bottomsheet",children:T.jsx("div",{className:"quick-actions-grid",children:f.map((y,E)=>T.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var _;if(((_=s==null?void 0:s.subscription)==null?void 0:_.planType)===ro.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),y.action()},style:{"--action-color":y.color,"--animation-delay":`${E*.06}s`},children:[T.jsx("div",{className:"quick-action-icon",children:T.jsx(y.icon,{className:"action-icon"})}),T.jsx("span",{className:"quick-action-label",children:y.label})]},y.id))})})]}),l&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),T.jsx("div",{className:"quick-actions-bottomsheet",children:T.jsx("div",{className:"quick-actions-grid",children:m.map((y,E)=>T.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var x;const v=(x=s==null?void 0:s.subscription)==null?void 0:x.planType,_=new Set(["logout","profile-settings"]);if(v===ro.TAHWEELA&&!_.has(y.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),y.action()},style:{"--action-color":y.color,"--animation-delay":`${E*.06}s`},children:[T.jsx("div",{className:"quick-action-icon",children:T.jsx(y.icon,{className:"action-icon"})}),T.jsx("span",{className:"quick-action-label",children:y.label})]},y.id))})})]}),T.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(y=>{const E=y.icon,v=g(y.path);return T.jsxs("button",{onClick:()=>w(y.path,y.isSpecial,y.action,y.id),className:`mobile-nav-item ${v?"active":""} ${y.isSpecial?"special":""}`,type:"button","aria-label":y.label,children:[T.jsx("div",{className:`nav-icon-container ${y.isSpecial?"special-icon":""} ${y.isSpecial&&y.id==="add"&&o?"special-open":""}`,children:T.jsx(E,{className:`nav-icon ${v?"active-icon":""} ${y.isSpecial?"special-icon-svg":""} ${y.isSpecial&&y.id==="settings"&&l?"rotated":""}`})}),!y.isSpecial&&T.jsx("span",{className:`nav-label ${v?"active-label":""}`,children:y.label})]},y.id)})})]})};var Rx,Px;const ba=(Px=(Rx=import.meta)==null?void 0:Rx.env)==null?void 0:Px.VITE_ANDROID_DOWNLOAD_URL;var Cx,kx;const Aa=(kx=(Cx=import.meta)==null?void 0:Cx.env)==null?void 0:kx.VITE_PC_DOWNLOAD_URL;var Dx,Nx;const xa=(Nx=(Dx=import.meta)==null?void 0:Dx.env)==null?void 0:Nx.VITE_PC32_DOWNLOAD_URL;var Ox,Lx;const Ra=(Lx=(Ox=import.meta)==null?void 0:Ox.env)==null?void 0:Lx.VITE_ANDROID_VERSION;var Vx,Mx;const Pa=(Mx=(Vx=import.meta)==null?void 0:Vx.env)==null?void 0:Mx.VITE_PC_VERSION;var Fx,Ux;const Ca=(Ux=(Fx=import.meta)==null?void 0:Fx.env)==null?void 0:Ux.VITE_PC32_VERSION;function hn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function EH(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Wo=["siteContent","appDownloads"],_p=["siteContent","desktop_updates"],Ep=["siteContent","android_updates"],eh="appDownloadsCache";function TH(){try{const e=localStorage.getItem(eh);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||ba,pcUrl:(n==null?void 0:n.pcUrl)||Aa,pc32Url:(n==null?void 0:n.pc32Url)||xa,androidVersion:(n==null?void 0:n.androidVersion)||Ra,pcVersion:(n==null?void 0:n.pcVersion)||Pa,pc32Version:(n==null?void 0:n.pc32Version)||Ca,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}}catch{}const t={androidUrl:ba,pcUrl:Aa,pc32Url:xa,androidVersion:Ra,pcVersion:Pa,pc32Version:Ca};return t.pcVersion||(t.pcVersion=hn(t.pcUrl)),t.androidVersion||(t.androidVersion=hn(t.androidUrl)),t.pc32Version||(t.pc32Version=hn(t.pc32Url)),t}async function IH(){try{const t=await Xt(xe(K,Wo[0],Wo[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(eh,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||ba,pcUrl:(n==null?void 0:n.pcUrl)||Aa,pc32Url:(n==null?void 0:n.pc32Url)||xa,androidVersion:(n==null?void 0:n.androidVersion)||Ra,pcVersion:(n==null?void 0:n.pcVersion)||Pa,pc32Version:(n==null?void 0:n.pc32Version)||Ca,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}const e={androidUrl:ba,pcUrl:Aa,pc32Url:xa,androidVersion:Ra,pcVersion:Pa,pc32Version:Ca};return e.pcVersion||(e.pcVersion=hn(e.pcUrl)),e.androidVersion||(e.androidVersion=hn(e.androidUrl)),e.pc32Version||(e.pc32Version=hn(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(eh);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||ba,pcUrl:(i==null?void 0:i.pcUrl)||Aa,pc32Url:(i==null?void 0:i.pc32Url)||xa,androidVersion:(i==null?void 0:i.androidVersion)||Ra,pcVersion:(i==null?void 0:i.pcVersion)||Pa,pc32Version:(i==null?void 0:i.pc32Version)||Ca,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=hn(o.pcUrl)),o.androidVersion||(o.androidVersion=hn(o.androidUrl)),o.pc32Version||(o.pc32Version=hn(o.pc32Url)),o}}catch{}const r={androidUrl:ba,pcUrl:Aa,pc32Url:xa,androidVersion:Ra,pcVersion:Pa,pc32Version:Ca};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}}function SH(t){try{const e=xe(K,Wo[0],Wo[1]);return ki(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||ba,pcUrl:(s==null?void 0:s.pcUrl)||Aa,pc32Url:(s==null?void 0:s.pc32Url)||xa,androidVersion:(s==null?void 0:s.androidVersion)||Ra,pcVersion:(s==null?void 0:s.pcVersion)||Pa,pc32Version:(s==null?void 0:s.pc32Version)||Ca,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=hn(i.pcUrl)),i.androidVersion||(i.androidVersion=hn(i.androidUrl)),i.pc32Version||(i.pc32Version=hn(i.pc32Url));try{localStorage.setItem(eh,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(eh);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function bH(t,e,n,r,s,i=12e4){const o=CO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=Uq(o,l);return new Promise((d,h)=>{const f=Mq(c,t);let m=!1;const w=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",g=>{const y=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(y)},g=>{clearTimeout(w),h(g)},async()=>{try{if(clearTimeout(w),m)return;const g=await Fq(c),y={updatedAt:Me(),updatedBy:n||"admin"};e==="android"?(y.androidUrl=g,r&&(y.androidVersion=r)):e==="pc"?(y.pcUrl=g,r&&(y.pcVersion=r)):(y.pc32Url=g,r&&(y.pc32Version=r));const E=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),v=ln(xe(K,Wo[0],Wo[1]),y,{merge:!0});let _=!1;const x=new Promise(k=>setTimeout(()=>{_=!0,k()},E));try{await Promise.race([v,x])}catch(k){console.warn(" Firestore write error, proceeding with URL only:",k)}_&&console.warn(" Firestore update timed out;             ."),d(g)}catch(g){h(g)}})})}async function AH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Me(),updatedBy:e||"admin"};await ln(xe(K,Wo[0],Wo[1]),r,{merge:!0})}async function xH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Me(),updatedBy:e||"admin"};await ln(xe(K,_p[0],_p[1]),r,{merge:!0})}function HO(t){try{const e=xe(K,_p[0],_p[1]);return ki(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function KO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function RH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Me(),updatedBy:e||"admin"};await ln(xe(K,Ep[0],Ep[1]),r,{merge:!0})}function PH(t){try{const e=xe(K,Ep[0],Ep[1]);return ki(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const CH=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:IH,getCachedOrEnvAppDownloads:TH,listenAndroidUpdates:PH,listenAppDownloads:SH,listenDesktopUpdates:HO,resolveDownloadUrl:EH,selectDesktopUrl:KO,setAndroidUpdateInfo:RH,setAppDownloadLinks:AH,setDesktopUpdateInfo:xH,uploadAppBinaryResumable:bH},Symbol.toStringTag,{value:"Module"})),kH=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=U.useState(!1),[s,i]=U.useState(!1),[o,a]=U.useState(!1),[l,c]=U.useState(0),[d,h]=U.useState(""),[f,m]=U.useState(!1),w=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(k){console.warn("failed to minimize",k)}},g=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(k){console.warn("failed to close",k)}},y=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(k){console.warn("failed to soft refresh",k),m(!1)}}};if(U.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(k=>{const L=(k==null?void 0:k.percent)==null?0:Number(k.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(k){console.warn("update init failed",k)}},[e,t]),U.useEffect(()=>{const k=HO(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const A=KO({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(A)}});return()=>{try{k()}catch{}}},[]),!e)return null;const[v,_]=U.useState(!1),x=async()=>{try{if(!t)return;v?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),_(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),_(!0))}catch(k){console.warn("window toggle failed",k)}};return T.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[T.jsx("button",{type:"button","aria-label":"",title:"",onClick:g,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:T.jsx(u0,{className:"w-5 h-5"})}),T.jsx("button",{type:"button","aria-label":"",title:" ",onClick:y,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:T.jsx(CP,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),T.jsx("button",{type:"button","aria-label":"",title:"",onClick:w,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:T.jsx(eU,{className:"w-5 h-5"})}),T.jsx("button",{type:"button","aria-label":"/",title:v?"  ":"   ",onClick:x,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:T.jsx(lU,{className:"w-5 h-5"})})]})},s_=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=S.useState(`${n}logo.svg`),[i,o]=S.useState(0),a=S.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return T.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:T.jsxs("div",{className:"flex flex-col items-center justify-center",children:[T.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),T.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},LA=kg("AppLauncher",{web:()=>X(()=>import("./web-Fd6RMTC9.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function DH(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{ve&&ve.getPlatform()!=="web"&&(LA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{ve&&ve.getPlatform()!=="web"&&LA.openUrl({url:n})}catch{}}}function GO(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function NH(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?GO(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function zG(t,e,n){const r=GO(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function OH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function LH(t){const e=OH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function WG(t,e,n){const r=NH(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=LH(t||e);DH(r,s)}async function VH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function HE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function MH(t,e,n=0){const r=HE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const ka=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:HE,calculateProfit:MH},Symbol.toStringTag,{value:"Module"})),FH=t=>t==="withdraw"||t==="receive"?"receive":"send",UH=async t=>{if(!t)return null;const e=Ue(Re(K,"transactions"),Oe("reference","==",t),ko(1)),n=await qe(e);return n.empty?null:n.docs[0].id},jH=async t=>{var e;try{const n=await ya.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return WH(t||((e=Dt.currentUser)==null?void 0:e.uid)||"")||null},Yy=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await go.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},QO=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");try{const o=await LO(t.createdBy);if((o==null?void 0:o.planType)===ro.ZERO)return console.log("Skipping mobile transaction notification for Zero plan user"),{id:"",duplicate:!0}}catch(o){console.warn("Error checking subscription in processMobileTransactionNotification:",o)}if(!t.amount||t.amount<=0)throw new Error("     ");const e=await UH(t.reference);if(e)return{id:e,duplicate:!0};const n=FH(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Yy(t.receiverMsisdn);if(o||(o=await Yy(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Yy(a))}r=o||await jH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await zE.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await VH(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=HE(t.amount,n);await Vr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},tm=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},YO=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Dt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(w=>tm(w)).filter(w=>!!w):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=w=>String(w||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(w=>({walletId:String((w==null?void 0:w.id)||""),msisdn:tm(String((w==null?void 0:w.phone)||(w==null?void 0:w.msisdn)||"")),isDefault:!!(w!=null&&w.isDefault)})).filter(w=>w.walletId&&w.msisdn):[],h=(await go.getByMerchantId(r)||[]).map(w=>({walletId:String((w==null?void 0:w.id)||""),msisdn:tm(String((w==null?void 0:w.msisdn)||"")),isDefault:!!(w!=null&&w.isDefault)})).filter(w=>w.walletId&&w.msisdn),f=[...c,...h],m=new Map;for(const w of s){const g=l(w);for(const y of f){const E=l(y.msisdn);if(y.msisdn===w){m.set(y.walletId,y.msisdn);continue}if(E.slice(-5)===g.slice(-5)){m.set(y.walletId,y.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",m.size)}catch{}if(m.size===1){const[w,g]=Array.from(m.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:w,msisdn:g})}catch{}return{walletId:w,msisdn:g}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function $H(t,e){try{const n=i=>tm(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function BH(t){var e;try{const n=t.userId||((e=Dt.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await YO(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");return a&&o[a]&&o[a].walletId?{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")}:l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId?{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")}:null}catch{return null}}function zH(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Dt.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const WH=t=>{var e,n;try{const r=t||((e=Dt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function JO(){return typeof window>"u"?()=>{}:()=>{}}const va=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:zH,detectWalletFromSim:$H,identifyWalletBySim:YO,initMobileSmsBridge:JO,processMobileTransactionNotification:QO,resolveWalletBySimOrSlot:BH},Symbol.toStringTag,{value:"Module"})),qH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},HH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},KH=()=>{var t,e;try{const n=((t=Dt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},GH=()=>{var t;try{const e=((t=Dt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Jy=async(t,e)=>{var _;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=qH(n),d=HH(n);if(!c||c<=0)return;const h=((_=Dt.currentUser)==null?void 0:_.uid)||"",f=KH()||void 0,m=GH()||"",w=f||"default-line";if(!h||!f||!m)return;try{const x=await LO(h);if((x==null?void 0:x.planType)===ro.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const g=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,y=`VF-${btoa(unescape(encodeURIComponent(g))).slice(0,24)}`,E=a?"withdraw":l?"transfer":"withdraw",v={type:E,amount:c,provider:"vodafone_cash",shopId:m,lineId:w,walletId:f,senderMsisdn:E==="transfer"&&d||void 0,receiverMsisdn:E==="withdraw"&&d||void 0,reference:y,createdBy:h,merchantUserId:h,note:"  "};try{await QO(v)}catch{}},ys={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Vr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Vr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Vr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=ys.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=ys.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Vr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=ys.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=ys.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=ys.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Vr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},QH=ys,qG=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:QH,reportsService:ys},Symbol.toStringTag,{value:"Module"})),Tp={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=xe(K,"walletLimits",t),s={updatedAt:Me(),ownerId:(n=Dt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await ln(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=xe(K,"walletLimits",t);try{const s=await Xt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||yt.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:yt.now()};return await ln(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Me(),ownerId:(e=Dt.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=xe(K,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Me(),updatedAt:Me(),ownerId:(e=Dt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=xe(K,"walletLimits",t);return await ln(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Me(),updatedAt:Me(),ownerId:(e=Dt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=xe(K,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Me()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await ln(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=xe(K,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:Me()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await ln(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=xe(K,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Me(),lastMonthlyReset:Me(),updatedAt:Me(),ownerId:(e=Dt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},i_=Object.freeze(Object.defineProperty({__proto__:null,default:Tp,walletDailyLimitsService:Tp},Symbol.toStringTag,{value:"Module"}));class YH{constructor(){Bg(this,"intervalId",null);Bg(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Dt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await r_.getToday(n);await r_.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await ys.syncReportsDataFromFirebase(e);const n=ys.getReportsData(e);if(!n.lastDailyResetDate||!ys.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Vr.getUserTransactions(e),l=v=>{const _=String(v||"").toLowerCase();return["completed","confirmed","success"].includes(_)?"completed":["failed","error"].includes(_)?"failed":["cancelled","canceled"].includes(_)?"cancelled":"pending"},c=(a||[]).filter(v=>{var x,k;const _=(x=v==null?void 0:v.createdAt)!=null&&x.toDate?v.createdAt.toDate():(v==null?void 0:v.createdAt)instanceof Date?v.createdAt:new Date(v==null?void 0:v.createdAt);return((k=_==null?void 0:_.toDateString)==null?void 0:k.call(_))===o&&l(v==null?void 0:v.status)==="completed"}),d=c.length,h=c.reduce((v,_)=>v+Number(_.amount||0),0),f=v=>{const _=String(((v==null?void 0:v.type)??(v==null?void 0:v.txnType))||"").toLowerCase();return _==="withdraw"||_==="withdrawal"||_==="receive"},m=v=>{const _=String(((v==null?void 0:v.type)??(v==null?void 0:v.txnType))||"").toLowerCase();return _==="send"||_==="transfer"},w=c.filter(f).reduce((v,_)=>{const x=_.withdrawnAmount!==void 0?Number(_.withdrawnAmount):Number(_.amount||0);return v+x},0),g=c.filter(m).reduce((v,_)=>{const x=_.sentAmount!==void 0?Number(_.sentAmount):Number(_.amount||0);return v+x},0),y=c.reduce((v,_)=>v+Number(ys.calculateTransactionProfit(_)||0),0),E=new Date(i).toISOString().slice(0,10);await OO.add({userId:e,reportDate:E,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(w.toFixed(2)),totalSent:Number(g.toFixed(2)),profit:Number(y.toFixed(2)),walletId:null}),console.log("    :",E)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await go.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await Tp.resetDailyLimits(i)}catch{}if(r)try{await Tp.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const VA=new YH,Xy=768;function JH(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Xy-1}px)`),r=()=>{e(window.innerWidth<Xy)};return n.addEventListener("change",r),e(window.innerWidth<Xy),()=>n.removeEventListener("change",r)},[]),!!t}function XH(){const[t,e]=S.useState("default"),[n,r]=S.useState(!1);return S.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const XO=S.createContext(void 0);function ZH({children:t}){const{profile:e,user:n,loading:r}=dl(),[s,i]=S.useState(null),[o,a]=S.useState(null),[l,c]=S.useState(!0);S.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),S.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const w=localStorage.getItem(m);i(w||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const w=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==w))try{const g=localStorage.getItem(w);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return T.jsx(XO.Provider,{value:d,children:t})}function eK(){const t=S.useContext(XO);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var Zy="focusScope.autoFocusOnMount",ev="focusScope.autoFocusOnUnmount",MA={bubbles:!1,cancelable:!0},tK="FocusScope",ZO=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=Xs(s),d=Xs(i),h=S.useRef(null),f=$n(e,g=>l(g)),m=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(_){if(m.paused||!a)return;const x=_.target;a.contains(x)?h.current=x:Ji(h.current,{select:!0})},y=function(_){if(m.paused||!a)return;const x=_.relatedTarget;x!==null&&(a.contains(x)||Ji(h.current,{select:!0}))},E=function(_){if(document.activeElement===document.body)for(const k of _)k.removedNodes.length>0&&Ji(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const v=new MutationObserver(E);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),v.disconnect()}}},[r,a,m.paused]),S.useEffect(()=>{if(a){UA.add(m);const g=document.activeElement;if(!a.contains(g)){const E=new CustomEvent(Zy,MA);a.addEventListener(Zy,c),a.dispatchEvent(E),E.defaultPrevented||(nK(aK(e2(a)),{select:!0}),document.activeElement===g&&Ji(a))}return()=>{a.removeEventListener(Zy,c),setTimeout(()=>{const E=new CustomEvent(ev,MA);a.addEventListener(ev,d),a.dispatchEvent(E),E.defaultPrevented||Ji(g??document.body,{select:!0}),a.removeEventListener(ev,d),UA.remove(m)},0)}}},[a,c,d,m]);const w=S.useCallback(g=>{if(!n&&!r||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,E=document.activeElement;if(y&&E){const v=g.currentTarget,[_,x]=rK(v);_&&x?!g.shiftKey&&E===x?(g.preventDefault(),n&&Ji(_,{select:!0})):g.shiftKey&&E===_&&(g.preventDefault(),n&&Ji(x,{select:!0})):E===v&&g.preventDefault()}},[n,r,m.paused]);return T.jsx(tn.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});ZO.displayName=tK;function nK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ji(r,{select:e}),document.activeElement!==n)return}function rK(t){const e=e2(t),n=FA(e,t),r=FA(e.reverse(),t);return[n,r]}function e2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function FA(t,e){for(const n of t)if(!sK(n,{upTo:e}))return n}function sK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function iK(t){return t instanceof HTMLInputElement&&"select"in t}function Ji(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&iK(t)&&e&&t.select()}}var UA=oK();function oK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=jA(t,e),t.unshift(e)},remove(e){var n;t=jA(t,e),(n=t[0])==null||n.resume()}}}function jA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function aK(t){return t.filter(e=>e.tagName!=="A")}var tv=0;function lK(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??$A()),document.body.insertAdjacentElement("beforeend",t[1]??$A()),tv++,()=>{tv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tv--}},[])}function $A(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Bs=function(){return Bs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bs.apply(this,arguments)};function t2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function cK(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var nm="right-scroll-bar-position",rm="width-before-scroll-bar",uK="with-scroll-bars-hidden",dK="--removed-body-scroll-bar-size";function nv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function hK(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var fK=typeof window<"u"?S.useLayoutEffect:S.useEffect,BA=new WeakMap;function mK(t,e){var n=hK(null,function(r){return t.forEach(function(s){return nv(s,r)})});return fK(function(){var r=BA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||nv(a,null)}),i.forEach(function(a){s.has(a)||nv(a,o)})}BA.set(n,t)},[t]),n}function pK(t){return t}function gK(t,e){e===void 0&&(e=pK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function yK(t){t===void 0&&(t={});var e=gK(null);return e.options=Bs({async:!0,ssr:!1},t),e}var n2=function(t){var e=t.sideCar,n=t2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Bs({},n))};n2.isSideCarExport=!0;function vK(t,e){return t.useMedium(e),n2}var r2=yK(),rv=function(){},Ng=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:rv,onWheelCapture:rv,onTouchMoveCapture:rv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,w=t.noIsolation,g=t.inert,y=t.allowPinchZoom,E=t.as,v=E===void 0?"div":E,_=t.gapMode,x=t2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,L=mK([n,e]),R=Bs(Bs({},x),s);return S.createElement(S.Fragment,null,d&&S.createElement(k,{sideCar:r2,removeScrollBar:c,shards:h,noRelative:m,noIsolation:w,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:_}),o?S.cloneElement(S.Children.only(a),Bs(Bs({},R),{ref:L})):S.createElement(v,Bs({},R,{className:l,ref:L}),a))});Ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ng.classNames={fullWidth:rm,zeroRight:nm};var wK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _K(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wK();return e&&t.setAttribute("nonce",e),t}function EK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function TK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var IK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=_K())&&(EK(e,n),TK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},SK=function(){var t=IK();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},s2=function(){var t=SK(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},bK={left:0,top:0,right:0,gap:0},sv=function(t){return parseInt(t||"",10)||0},AK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[sv(n),sv(r),sv(s)]},xK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return bK;var e=AK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},RK=s2(),ec="data-scroll-locked",PK=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(uK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ec,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(rm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(nm," .").concat(nm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(rm," .").concat(rm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ec,`] {
    `).concat(dK,": ").concat(a,`px;
  }
`)},zA=function(){var t=parseInt(document.body.getAttribute(ec)||"0",10);return isFinite(t)?t:0},CK=function(){S.useEffect(function(){return document.body.setAttribute(ec,(zA()+1).toString()),function(){var t=zA()-1;t<=0?document.body.removeAttribute(ec):document.body.setAttribute(ec,t.toString())}},[])},kK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;CK();var i=S.useMemo(function(){return xK(s)},[s]);return S.createElement(RK,{styles:PK(i,!e,s,n?"":"!important")})},o_=!1;if(typeof window<"u")try{var _f=Object.defineProperty({},"passive",{get:function(){return o_=!0,!0}});window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{o_=!1}var Il=o_?{passive:!1}:!1,DK=function(t){return t.tagName==="TEXTAREA"},i2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!DK(t)&&n[e]==="visible")},NK=function(t){return i2(t,"overflowY")},OK=function(t){return i2(t,"overflowX")},WA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=o2(t,r);if(s){var i=a2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},LK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},VK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},o2=function(t,e){return t==="v"?NK(e):OK(e)},a2=function(t,e){return t==="v"?LK(e):VK(e)},MK=function(t,e){return t==="h"&&e==="rtl"?-1:1},FK=function(t,e,n,r,s){var i=MK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=a2(t,a),w=m[0],g=m[1],y=m[2],E=g-y-i*w;(w||E)&&o2(t,a)&&(h+=E,f+=w);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},Ef=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},qA=function(t){return[t.deltaX,t.deltaY]},HA=function(t){return t&&"current"in t?t.current:t},UK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},jK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$K=0,Sl=[];function BK(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState($K++)[0],i=S.useState(s2)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=cK([t.lockRef.current],(t.shards||[]).map(HA),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var E=Ef(g),v=n.current,_="deltaX"in g?g.deltaX:v[0]-E[0],x="deltaY"in g?g.deltaY:v[1]-E[1],k,L=g.target,R=Math.abs(_)>Math.abs(x)?"h":"v";if("touches"in g&&R==="h"&&L.type==="range")return!1;var A=WA(R,L);if(!A)return!0;if(A?k=R:(k=R==="v"?"h":"v",A=WA(R,L)),!A)return!1;if(!r.current&&"changedTouches"in g&&(_||x)&&(r.current=k),!k)return!0;var b=r.current||k;return FK(b,y,g,b==="h"?_:x)},[]),l=S.useCallback(function(g){var y=g;if(!(!Sl.length||Sl[Sl.length-1]!==i)){var E="deltaY"in y?qA(y):Ef(y),v=e.current.filter(function(k){return k.name===y.type&&(k.target===y.target||y.target===k.shadowParent)&&UK(k.delta,E)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(HA).filter(Boolean).filter(function(k){return k.contains(y.target)}),x=_.length>0?a(y,_[0]):!o.current.noIsolation;x&&y.cancelable&&y.preventDefault()}}},[]),c=S.useCallback(function(g,y,E,v){var _={name:g,delta:y,target:E,should:v,shadowParent:zK(E)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(x){return x!==_})},1)},[]),d=S.useCallback(function(g){n.current=Ef(g),r.current=void 0},[]),h=S.useCallback(function(g){c(g.type,qA(g),g.target,a(g,t.lockRef.current))},[]),f=S.useCallback(function(g){c(g.type,Ef(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return Sl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Il),document.addEventListener("touchmove",l,Il),document.addEventListener("touchstart",d,Il),function(){Sl=Sl.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Il),document.removeEventListener("touchmove",l,Il),document.removeEventListener("touchstart",d,Il)}},[]);var m=t.removeScrollBar,w=t.inert;return S.createElement(S.Fragment,null,w?S.createElement(i,{styles:jK(s)}):null,m?S.createElement(kK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function zK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const WK=vK(r2,BK);var l2=S.forwardRef(function(t,e){return S.createElement(Ng,Bs({},t,{ref:e,sideCar:WK}))});l2.classNames=Ng.classNames;var qK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},bl=new WeakMap,Tf=new WeakMap,If={},iv=0,c2=function(t){return t&&(t.host||c2(t.parentNode))},HK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=c2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},KK=function(t,e,n,r){var s=HK(e,Array.isArray(t)?t:[t]);If[n]||(If[n]=new WeakMap);var i=If[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),w=m!==null&&m!=="false",g=(bl.get(f)||0)+1,y=(i.get(f)||0)+1;bl.set(f,g),i.set(f,y),o.push(f),g===1&&w&&Tf.set(f,!0),y===1&&f.setAttribute(n,"true"),w||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return d(e),a.clear(),iv++,function(){o.forEach(function(h){var f=bl.get(h)-1,m=i.get(h)-1;bl.set(h,f),i.set(h,m),f||(Tf.has(h)||h.removeAttribute(r),Tf.delete(h)),m||h.removeAttribute(n)}),iv--,iv||(bl=new WeakMap,bl=new WeakMap,Tf=new WeakMap,If={})}},GK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=qK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),KK(r,s,n,"aria-hidden")):function(){return null}},Og="Dialog",[u2,HG]=Bc(Og),[QK,Cs]=u2(Og),d2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=o0({prop:r,defaultProp:s??!1,onChange:i,caller:Og});return T.jsx(QK,{scope:e,triggerRef:a,contentRef:l,contentId:Ey(),titleId:Ey(),descriptionId:Ey(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};d2.displayName=Og;var h2="DialogTrigger",f2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(h2,n),i=$n(e,s.triggerRef);return T.jsx(tn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":QE(s.open),...r,ref:i,onClick:Nt(t.onClick,s.onOpenToggle)})});f2.displayName=h2;var KE="DialogPortal",[YK,m2]=u2(KE,{forceMount:void 0}),p2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Cs(KE,e);return T.jsx(YK,{scope:e,forceMount:n,children:S.Children.map(r,o=>T.jsx(ll,{present:n||i.open,children:T.jsx(i0,{asChild:!0,container:s,children:o})}))})};p2.displayName=KE;var Ip="DialogOverlay",g2=S.forwardRef((t,e)=>{const n=m2(Ip,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Cs(Ip,t.__scopeDialog);return i.modal?T.jsx(ll,{present:r||i.open,children:T.jsx(XK,{...s,ref:e})}):null});g2.displayName=Ip;var JK=Cd("DialogOverlay.RemoveScroll"),XK=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(Ip,n);return T.jsx(l2,{as:JK,allowPinchZoom:!0,shards:[s.contentRef],children:T.jsx(tn.div,{"data-state":QE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),il="DialogContent",y2=S.forwardRef((t,e)=>{const n=m2(il,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Cs(il,t.__scopeDialog);return T.jsx(ll,{present:r||i.open,children:i.modal?T.jsx(ZK,{...s,ref:e}):T.jsx(eG,{...s,ref:e})})});y2.displayName=il;var ZK=S.forwardRef((t,e)=>{const n=Cs(il,t.__scopeDialog),r=S.useRef(null),s=$n(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return GK(i)},[]),T.jsx(v2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Nt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Nt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Nt(t.onFocusOutside,i=>i.preventDefault())})}),eG=S.forwardRef((t,e)=>{const n=Cs(il,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return T.jsx(v2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),v2=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Cs(il,n),l=S.useRef(null),c=$n(e,l);return lK(),T.jsxs(T.Fragment,{children:[T.jsx(ZO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:T.jsx(jp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":QE(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),T.jsxs(T.Fragment,{children:[T.jsx(tG,{titleId:a.titleId}),T.jsx(rG,{contentRef:l,descriptionId:a.descriptionId})]})]})}),GE="DialogTitle",w2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(GE,n);return T.jsx(tn.h2,{id:s.titleId,...r,ref:e})});w2.displayName=GE;var _2="DialogDescription",E2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(_2,n);return T.jsx(tn.p,{id:s.descriptionId,...r,ref:e})});E2.displayName=_2;var T2="DialogClose",I2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cs(T2,n);return T.jsx(tn.button,{type:"button",...r,ref:e,onClick:Nt(t.onClick,()=>s.onOpenChange(!1))})});I2.displayName=T2;function QE(t){return t?"open":"closed"}var S2="DialogTitleWarning",[KG,b2]=xM(S2,{contentName:il,titleName:GE,docsSlug:"dialog"}),tG=({titleId:t})=>{const e=b2(S2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},nG="DialogDescriptionWarning",rG=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${b2(nG).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},sG=d2,iG=f2,oG=p2,A2=g2,x2=y2,R2=w2,P2=E2,aG=I2;const ov=sG,GG=iG,lG=oG,C2=S.forwardRef(({className:t,...e},n)=>T.jsx(A2,{ref:n,className:Bn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));C2.displayName=A2.displayName;const sm=S.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>T.jsxs(lG,{children:[T.jsx(C2,{}),T.jsxs(x2,{ref:o,className:Bn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&T.jsxs(aG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[T.jsx(u0,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sm.displayName=x2.displayName;const im=({className:t,...e})=>T.jsx("div",{className:Bn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});im.displayName="DialogHeader";const cG=({className:t,...e})=>T.jsx("div",{className:Bn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});cG.displayName="DialogFooter";const om=S.forwardRef(({className:t,...e},n)=>T.jsx(R2,{ref:n,className:Bn("text-lg font-semibold leading-none tracking-tight",t),...e}));om.displayName=R2.displayName;const a_=S.forwardRef(({className:t,...e},n)=>T.jsx(P2,{ref:n,className:Bn("text-sm text-muted-foreground",t),...e}));a_.displayName=P2.displayName;const uG={},KA=U.lazy(()=>X(()=>import("./Index-qyOS64S1.js"),[],import.meta.url)),Sf=U.lazy(()=>X(()=>import("./LandingPage-ZGe4V60k.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),GA=U.lazy(()=>X(()=>import("./SubscriptionsPage-BRztpxaW.js"),__vite__mapDeps([11,1,4,12]),import.meta.url)),QA=U.lazy(()=>X(()=>import("./AuthPage-CJebENlv.js"),__vite__mapDeps([13,1,2,3,8]),import.meta.url)),bf=U.lazy(()=>X(()=>import("./TopUpPage-BNKQ0vCC.js"),__vite__mapDeps([14,1,15]),import.meta.url)),YA=U.lazy(()=>X(()=>import("./AdminTopupsPage-CHPTgpLZ.js"),__vite__mapDeps([16,15]),import.meta.url)),JA=U.lazy(()=>X(()=>import("./AdminNotificationsPage-Bzdw9Iax.js"),__vite__mapDeps([17,1,18,19,20]),import.meta.url)),Af=U.lazy(()=>X(()=>import("./UserRegisterPage-DHnCee7x.js"),__vite__mapDeps([21,1,18,22,23,24,25,26]),import.meta.url)),XA=U.lazy(()=>X(()=>import("./UserAccountSetupPage-C4PUC6cr.js"),__vite__mapDeps([27,1,18,22,26,25,10]),import.meta.url)),ZA=U.lazy(()=>X(()=>import("./ForgotPasswordCodePage-DXj7Up7B.js"),[],import.meta.url)),ex=U.lazy(()=>X(()=>import("./DashboardLoginPage-CHw-yFod.js"),__vite__mapDeps([28,1]),import.meta.url)),tx=U.lazy(()=>X(()=>import("./ProtectedDashboard-CaGTqTJW.js"),__vite__mapDeps([29,1,15,30,18,31,32,33,23]),import.meta.url)),am=U.lazy(()=>X(()=>import("./ProtectedUserDashboard-kC9zwMv2.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url)),nx=U.lazy(()=>X(()=>import("./MerchantDashboard-UGEnuPJF.js"),__vite__mapDeps([36,37,15,38,39,40,1,41,18,42]),import.meta.url)),rx=U.lazy(()=>X(()=>import("./PendingApprovalPage-D4kAX12-.js"),__vite__mapDeps([43,44]),import.meta.url)),sx=U.lazy(()=>X(()=>import("./AdminLogin-DjM23FHK.js"),[],import.meta.url)),ix=U.lazy(()=>X(()=>import("./ProtectedAdminDashboard-CBXDtRV0.js"),__vite__mapDeps([45,12,3,46,37,15,38,18,30,31,47,1,19,22,39,48,4,25,49,50,35,9,7,8,10,51]),import.meta.url)),ox=U.lazy(()=>X(()=>import("./AuthTestPage-BfWPJ3sK.js"),__vite__mapDeps([52,1,18]),import.meta.url)),ax=U.lazy(()=>X(()=>import("./ProfileSettingsPage-BRcg6bKD.js"),__vite__mapDeps([53,1,18,47,54,30,31,42,5,49,7]),import.meta.url)),lx=U.lazy(()=>X(()=>import("./TransactionsPage-McbKX-66.js"),__vite__mapDeps([55,1,15,39,38,56,48,30,18,31,4,41,10,8,32,33,5,51]),import.meta.url)),cx=U.lazy(()=>X(()=>import("./WalletAdditionPage-CZIDEnFd.js"),__vite__mapDeps([57,1,18,15,5,23,25,31]),import.meta.url)),ux=U.lazy(()=>X(()=>import("./ReferralsPage-BDvfe4K2.js"),__vite__mapDeps([58,1,39,22,24,20,10,50,51]),import.meta.url)),dx=U.lazy(()=>X(()=>import("./CPanelPage-Dl_EMMOX.js"),__vite__mapDeps([59,1,18]),import.meta.url)),hx=U.lazy(()=>X(()=>import("./CPanelLoginPage-BPljrT8Y.js"),__vite__mapDeps([60,18,1]),import.meta.url)),fx=U.lazy(()=>X(()=>import("./NotFound-Bc4APQZe.js"),[],import.meta.url)),mx=U.lazy(()=>X(()=>import("./PrivacyPolicyPage-C2gGPIHO.js"),[],import.meta.url)),k2=new n6({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=l6({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});a6({queryClient:k2,persister:t,maxAge:24*60*60*1e3})}catch{}const dG=()=>{if(!((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return T.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:T.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:T.jsx(CP,{className:"w-5 h-5"})})})},px=()=>{const t=ri(),{user:e,loading:n}=dl(),r=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?T.jsx(_H,{}):null},gx=()=>{var ta;const t=JH(),{profile:e,user:n}=dl(),{shopId:r}=eK(),i=ri().pathname.startsWith("/user/dashboard"),o=Kc(),{toast:a}=s0(),[l,c]=U.useState(!1),[d,h]=U.useState(null),[f,m]=U.useState(!1),[w,g]=U.useState(null),[y,E]=U.useState(!1),[v,_]=U.useState(""),[x,k]=U.useState(""),[L,R]=U.useState(null),[A,b]=U.useState(null),P=U.useRef(null),D=U.useRef(null),O=U.useRef(!1),C=U.useRef(null),$=U.useRef(()=>{try{const J=localStorage.getItem("sms_suppressed_ids")||"[]",W=Array.isArray(JSON.parse(J))?JSON.parse(J):[];return new Set(W.map(Z=>String(Z||"")))}catch{return new Set}}),[ie,oe]=U.useState(!1);XH();const[fe,j]=U.useState(!1),[V,te]=U.useState(null),[ae,Y]=U.useState(""),[ke,Se]=U.useState(!1),[De,Ye]=U.useState(!1),[Ae,Yt]=U.useState(""),[Xe,je]=U.useState(""),[ze,Vt]=U.useState(!1),[rn,Vn]=U.useState(0),[Gr,In]=U.useState(!1),[nr,Le]=U.useState(""),[vt,vn]=U.useState(""),mr=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android";U.useEffect(()=>{try{const J=(n==null?void 0:n.uid)||"default",W=(localStorage.getItem(`sim1Number_${J}`)??localStorage.getItem("sim1Number")??"")||"",Z=(localStorage.getItem(`sim2Number_${J}`)??localStorage.getItem("sim2Number")??"")||"";Le(W),vn(Z)}catch{}},[n==null?void 0:n.uid]);const Zo=async(J,W)=>{if(!(!J||!V))try{const{resolveWalletBySimOrSlot:Z,merchantWalletService:q}=await X(async()=>{const{resolveWalletBySimOrSlot:le,merchantWalletService:we}=await Promise.resolve().then(()=>va);return{resolveWalletBySimOrSlot:le,merchantWalletService:we}},void 0,import.meta.url),Q=(n==null?void 0:n.uid)||"";te(le=>le?{...le,simNumber:J,simLabel:W}:null);let re=await Z({simNumbers:[J],userId:Q});if(!re)try{const le=await q.getByMerchantId(Q),we=localStorage.getItem(`wallets_${Q}`),ue=we?JSON.parse(we):[],Ve=[...Array.isArray(ue)?ue:[],...Array.isArray(le)?le:[]]}catch{}re&&re.msisdn&&(te(le=>le?{...le,walletMsisdn:re.msisdn}:null),re.walletId&&localStorage.setItem(`selectedWallet_${Q}`,re.walletId))}catch{}},Qr=U.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}In(!1);try{o("/user/login")}catch{}},[o]);U.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!n&&mr&&In(!0)}catch{!n&&mr&&In(!0)}},[n,mr]);const ea=U.useCallback(()=>{try{const J=window.AudioContext||window.webkitAudioContext;if(!J)return;const W=new J,Z=W.createOscillator(),q=W.createGain();Z.type="sine",q.gain.setValueAtTime(0,W.currentTime),Z.connect(q),q.connect(W.destination);const Q=W.currentTime;Z.frequency.setValueAtTime(800,Q),q.gain.linearRampToValueAtTime(.15,Q+.02),Z.start(Q),Z.frequency.exponentialRampToValueAtTime(1200,Q+.08),q.gain.exponentialRampToValueAtTime(1e-5,Q+.32),Z.stop(Q+.35)}catch{}},[]),Mt=J=>{try{const W=String(J||"").replace(/[^0-9+]/g,"");if(!W)return"";if(W.startsWith("+20")){const Z=W.slice(3);return Z.startsWith("1")?"0"+Z:Z}if(W.startsWith("0020")){const Z=W.slice(4);return Z.startsWith("1")?"0"+Z:Z}if(W.startsWith("20")){const Z=W.slice(2);return Z.startsWith("1")?"0"+Z:Z}return W.startsWith("0")?W:/^(10|11|12|15)/.test(W)?"0"+W:W}catch{return""}},Pn=J=>{try{const W=String(J||""),Z=W.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let q=Z?parseFloat(String(Z[1]).replace(",",".")):0;const Q=W.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let re=Q?Mt(Q[1]):void 0;const le=W.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),we=W.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),ue=le?String(le[1]).trim():we?String(we[1]).trim():void 0,Ve=W.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),me=W.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),Fe=W.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!q||q<=0){const G=W.match(/Received\s*EGP\s*([0-9.,]+)/i)||W.match(/Received\s*EGP([0-9.,]+)/i);G&&(q=parseFloat(String(G[1]).replace(/,/g,"")))}if(!re){const G=W.match(/from\s+([0-9+]+)/i);G&&(re=Mt(G[1]))}const ye=Ve?String(Ve[1]).trim():me?String(me[1]).trim():Fe?String(Fe[1]).trim():void 0;return{amount:q,sender:re,senderName:ue,reference:ye}}catch{return{amount:0}}};U.useEffect(()=>{(async()=>{var J;try{if(!fe||!V){Se(!1);return}const{auth:W}=await X(async()=>{const{auth:re}=await Promise.resolve().then(()=>Ct);return{auth:re}},void 0,import.meta.url),Z=((J=W.currentUser)==null?void 0:J.uid)||"",q=Z?`selectedWallet_${Z}`:"selectedWallet_default",Q=localStorage.getItem(q)||"";if(!Q){Se(!0);return}try{const{merchantWalletService:re}=await X(async()=>{const{merchantWalletService:ue}=await Promise.resolve().then(()=>ku);return{merchantWalletService:ue}},void 0,import.meta.url),le=await re.getById(Q),we=le&&le.defaultWithdrawCommission!=null;Se(!we)}catch{Se(!0)}}catch{Se(!0)}})()},[fe,V]);const Yr=async J=>{try{const{merchantWalletService:W,detectWalletFromSim:Z}=await X(async()=>{const{merchantWalletService:me,detectWalletFromSim:Fe}=await Promise.resolve().then(()=>va);return{merchantWalletService:me,detectWalletFromSim:Fe}},void 0,import.meta.url),q=(n==null?void 0:n.uid)||"";if(!q)return;const Q=`wallets_${q}`,re=typeof localStorage<"u"?localStorage.getItem(Q):null,le=re?JSON.parse(re):[],we=await W.getByMerchantId(q),ue=[...(Array.isArray(le)?le:[]).map(me=>({id:String((me==null?void 0:me.id)||""),phone:String((me==null?void 0:me.phone)||(me==null?void 0:me.msisdn)||""),isDefault:!!(me!=null&&me.isDefault)})),...(Array.isArray(we)?we:[]).map(me=>({id:String((me==null?void 0:me.id)||""),msisdn:String((me==null?void 0:me.msisdn)||""),isDefault:!!(me!=null&&me.isDefault)}))],Ve=await Z(J||[],ue);if(Ve&&Ve.walletId)try{localStorage.setItem(`selectedWallet_${q}`,Ve.walletId)}catch{}}catch{}};S.useEffect(()=>{const J=async W=>{var Z;try{const q=(W==null?void 0:W.detail)||{},Q=String(q.text||"").trim(),re=String(q.title||"").trim();if(!Q)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*/i.test(`${re} ${Q}`)){try{Jy(q,{toast:a})}catch{}return}const{auth:we}=await X(async()=>{const{auth:Ge}=await Promise.resolve().then(()=>Ct);return{auth:Ge}},void 0,import.meta.url),ue=((Z=we.currentUser)==null?void 0:Z.uid)||"";let Ve=r||"";if(!ue){try{a({title:"  ",description:"   "})}catch{}return}if(!Ve)try{const{doc:Ge,getDoc:et}=await X(async()=>{const{doc:ot,getDoc:Sn}=await Promise.resolve().then(()=>dn);return{doc:ot,getDoc:Sn}},void 0,import.meta.url),{db:Et}=await X(async()=>{const{db:ot}=await Promise.resolve().then(()=>Ct);return{db:ot}},void 0,import.meta.url),dt=await et(Ge(Et,"profiles",ue));if(dt.exists()){const ot=dt.data(),Sn=String((ot==null?void 0:ot.shopId)||"").trim();Sn&&(Ve=Sn)}}catch{}let me="",Fe="",ye=!1;try{const{doc:Ge,getDoc:et}=await X(async()=>{const{doc:ot,getDoc:Sn}=await Promise.resolve().then(()=>dn);return{doc:ot,getDoc:Sn}},void 0,import.meta.url),{db:Et}=await X(async()=>{const{db:ot}=await Promise.resolve().then(()=>Ct);return{db:ot}},void 0,import.meta.url),dt=await et(Ge(Et,"profiles",ue));if(dt.exists()){const ot=dt.data();ye=(ot==null?void 0:ot.smsAutoRegisterEnabled)===!0,me=String((ot==null?void 0:ot.sim1Number)||"").trim(),Fe=String((ot==null?void 0:ot.sim2Number)||"").trim()}}catch{}try{const Ge=localStorage.getItem(`sim1Number_${ue}`)??localStorage.getItem("sim1Number"),et=localStorage.getItem(`sim2Number_${ue}`)??localStorage.getItem("sim2Number");me||(me=String(Ge||"").trim()),Fe||(Fe=String(et||"").trim())}catch{}try{const{Preferences:Ge}=await X(async()=>{const{Preferences:dt}=await Promise.resolve().then(()=>Qy);return{Preferences:dt}},void 0,import.meta.url),et=await Ge.get({key:"sim1_number"}),Et=await Ge.get({key:"sim2_number"});!me&&(et!=null&&et.value)&&(me=String(et.value).trim()),!Fe&&(Et!=null&&Et.value)&&(Fe=String(Et.value).trim())}catch{}let G=[];const ge=Array.isArray(((W==null?void 0:W.detail)||{}).activeSimMsisdns)?W.detail.activeSimMsisdns.map(Ge=>String(Ge||"")):[];ge.length>0?G=ge:G=[me,Fe].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(G))}catch{}let he="";try{const Ge=localStorage.getItem("lastSmsSimMsisdn")||"";Ge&&G.includes(Ge)&&(he=Ge)}catch{}if(he||(he=G[0]||""),he)try{localStorage.setItem("lastSmsSimMsisdn",he)}catch{}const{resolveWalletBySimOrSlot:$e,bindSlotWalletMapping:ut,merchantWalletService:zt}=await X(async()=>{const{resolveWalletBySimOrSlot:Ge,bindSlotWalletMapping:et,merchantWalletService:Et}=await Promise.resolve().then(()=>va);return{resolveWalletBySimOrSlot:Ge,bindSlotWalletMapping:et,merchantWalletService:Et}},void 0,import.meta.url),wt=ue;let Ke=await $e({simNumbers:G,userId:wt});if(!Ke&&G.length>0){try{await Yr(G)}catch{}const Ge=localStorage.getItem(`selectedWallet_${wt}`)||"";if(Ge)try{const et=await zt.getById(Ge);Ke={walletId:Ge,msisdn:String((et==null?void 0:et.msisdn)||"")}}catch{}}if(Ke&&Ke.walletId){try{localStorage.setItem(`selectedWallet_${wt}`,Ke.walletId)}catch{}try{ut({userId:wt,walletId:Ke.walletId,msisdn:Ke.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ke.walletId}}))}catch{}try{const Ge=String(Ke.msisdn||"").trim();Ge&&(he=Ge,localStorage.setItem("lastSmsSimMsisdn",Ge))}catch{}}const ft=Pn(Q),Wt=Number(ft.amount||0);if(!Wt||Wt<=0){try{Jy(q,{toast:a})}catch{}return}const pe=(Ke==null?void 0:Ke.msisdn)||await av(ue),mt=ft.reference||`VF-${Date.now()}`,Be={amount:Wt,sender:String(ft.sender||""),senderName:ft.senderName,text:Q,simNumber:he};if(ye)try{await ks({...Be,reference:mt,walletMsisdn:pe})}catch{}else{try{const{addDoc:Ge,collection:et,serverTimestamp:Et}=await X(async()=>{const{addDoc:Qe,collection:st,serverTimestamp:Tt}=await Promise.resolve().then(()=>dn);return{addDoc:Qe,collection:st,serverTimestamp:Tt}},void 0,import.meta.url),{db:dt}=await X(async()=>{const{db:Qe}=await Promise.resolve().then(()=>Ct);return{db:Qe}},void 0,import.meta.url),ot=await Ge(et(dt,"pendingSmsPopups"),{userId:ue,shopId:Ve,payload:{...Be,reference:mt,walletMsisdn:pe},status:"pending",createdAt:Et()}),Sn=/Received\s*EGP/i.test(String(Q))?"InstaPay":"VF-Cash";te({...Be,reference:mt,providerLabel:Sn,walletMsisdn:pe,popupId:ot.id})}catch{const Ge=/Received\s*EGP/i.test(String(Q))?"InstaPay":"VF-Cash";te({...Be,reference:mt,providerLabel:Ge,walletMsisdn:pe})}j(!0);try{ea()}catch{}}}catch{try{Jy((W==null?void 0:W.detail)||{},{toast:a})}catch{}}};try{window.addEventListener("vfNotificationReceived",J)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",J)}catch{}}},[a,r]),S.useEffect(()=>{const J=async W=>{var Z;try{const q=(W==null?void 0:W.detail)||{},Q=String(q.text||"");if(!Q)return;const re=/Received\s*EGP/i.test(Q),le=fG(Q,String(q.sender||q.msisdn||""));if(!re&&!le)return;const{auth:we}=await X(async()=>{const{auth:Qe}=await Promise.resolve().then(()=>Ct);return{auth:Qe}},void 0,import.meta.url),ue=((Z=we.currentUser)==null?void 0:Z.uid)||"";let Ve=r||"";if(!ue){try{a({title:"  ",description:"   "})}catch{}return}if(!Ve)try{const{doc:Qe,getDoc:st}=await X(async()=>{const{doc:_e,getDoc:It}=await Promise.resolve().then(()=>dn);return{doc:_e,getDoc:It}},void 0,import.meta.url),{db:Tt}=await X(async()=>{const{db:_e}=await Promise.resolve().then(()=>Ct);return{db:_e}},void 0,import.meta.url),Ne=await st(Qe(Tt,"profiles",ue));if(Ne.exists()){const _e=Ne.data(),It=String((_e==null?void 0:_e.shopId)||"").trim();It&&(Ve=It)}}catch{}if(!Ve){try{a({title:"  ",description:"   "})}catch{}return}let me=!0,Fe=!1,ye="",G="";try{const{doc:Qe,getDoc:st}=await X(async()=>{const{doc:_e,getDoc:It}=await Promise.resolve().then(()=>dn);return{doc:_e,getDoc:It}},void 0,import.meta.url),{db:Tt}=await X(async()=>{const{db:_e}=await Promise.resolve().then(()=>Ct);return{db:_e}},void 0,import.meta.url),Ne=await st(Qe(Tt,"profiles",ue));if(Ne.exists()){const _e=Ne.data();me=(_e==null?void 0:_e.smsReadingEnabled)!==void 0?!!_e.smsReadingEnabled:!0,Fe=(_e==null?void 0:_e.smsAutoRegisterEnabled)===!0,ye=String((_e==null?void 0:_e.sim1Number)||"").trim()||ye,G=String((_e==null?void 0:_e.sim2Number)||"").trim()||G}}catch{}try{const Qe=localStorage.getItem(`sim1Number_${ue}`)??localStorage.getItem("sim1Number"),st=localStorage.getItem(`sim2Number_${ue}`)??localStorage.getItem("sim2Number");ye||(ye=String(Qe||"").trim()),G||(G=String(st||"").trim())}catch{}try{const{Preferences:Qe}=await X(async()=>{const{Preferences:Ne}=await Promise.resolve().then(()=>Qy);return{Preferences:Ne}},void 0,import.meta.url),st=await Qe.get({key:"sim1_number"}),Tt=await Qe.get({key:"sim2_number"});!ye&&(st!=null&&st.value)&&(ye=String(st.value).trim()),!G&&(Tt!=null&&Tt.value)&&(G=String(Tt.value).trim())}catch{}if(!me)return;const ge=String(q.msisdn||q.sender||""),he=Mt(ge);let $e=Array.isArray(q.activeSimMsisdns)&&q.activeSimMsisdns.length>0?q.activeSimMsisdns.map(Qe=>Mt(String(Qe||""))):he?[he]:[];if($e.length===0){const Qe=Number((q==null?void 0:q.slot)||(q==null?void 0:q.subId)||-1);Qe===1&&ye?$e=[Mt(ye)]:Qe===2&&G?$e=[Mt(G)]:$e=[Mt(ye),Mt(G)].filter(Boolean)}try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify($e))}catch{}let ut="";const zt=[ye,G].filter(Boolean).map(Qe=>Mt(Qe));if(he&&zt.includes(he))ut=he;else{const Qe=Number((q==null?void 0:q.slot)||(q==null?void 0:q.subId)||-1);Qe===1&&ye?ut=Mt(ye):Qe===2&&G?ut=Mt(G):ut=Mt($e[0]||ye||G||"")}if(ut)try{localStorage.setItem("lastSmsSimMsisdn",ut)}catch{}const{resolveWalletBySimOrSlot:wt,bindSlotWalletMapping:Ke,merchantWalletService:ft}=await X(async()=>{const{resolveWalletBySimOrSlot:Qe,bindSlotWalletMapping:st,merchantWalletService:Tt}=await Promise.resolve().then(()=>va);return{resolveWalletBySimOrSlot:Qe,bindSlotWalletMapping:st,merchantWalletService:Tt}},void 0,import.meta.url),Wt=ue;let pe=await wt({simNumbers:$e,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),userId:Wt});if(!pe&&$e.length>0){try{await Yr($e)}catch{}const Qe=localStorage.getItem(`selectedWallet_${Wt}`)||"";if(Qe)try{const st=await ft.getById(Qe);pe={walletId:Qe,msisdn:String((st==null?void 0:st.msisdn)||"")}}catch{}}if(pe&&pe.walletId){try{localStorage.setItem(`selectedWallet_${Wt}`,pe.walletId)}catch{}try{Ke({userId:Wt,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),walletId:pe.walletId,msisdn:pe.msisdn})}catch{}}const mt=Pn(Q);let Be=Number(mt.amount||0),Ge=mt.sender||he||String(q.sender||""),et=mt.senderName,Et=mt.reference||"";if(re){const Qe=String(Q).match(/Received\s*EGP\s*([0-9.,]+)/i);Qe&&(Be=parseFloat(String(Qe[1]).replace(/,/g,"")));const st=String(Q).match(/from\s+([0-9+]+)/i);st&&(Ge=Mt(st[1]));const Tt=String(Q).match(/Ref:\s*([A-Za-z0-9\-]+)/i);Tt&&(Et=String(Tt[1]).trim())}if(!Be||Be<=0)return;const dt=(pe==null?void 0:pe.msisdn)||(ue?await av(ue):""),ot=ut===Mt(ye)?"SIM 1":ut===Mt(G)?"SIM 2":"",Sn={amount:Be,sender:Ge,senderName:et,text:Q,simNumber:ut,simLabel:ot};if(Fe)try{await ks(Sn)}catch{}else{try{const{addDoc:Qe,collection:st,serverTimestamp:Tt}=await X(async()=>{const{addDoc:Rt,collection:qt,serverTimestamp:wn}=await Promise.resolve().then(()=>dn);return{addDoc:Rt,collection:qt,serverTimestamp:wn}},void 0,import.meta.url),{db:Ne}=await X(async()=>{const{db:Rt}=await Promise.resolve().then(()=>Ct);return{db:Rt}},void 0,import.meta.url),_e=await Qe(st(Ne,"pendingSmsPopups"),{userId:ue,shopId:Ve,payload:{...Sn,reference:Et,walletMsisdn:dt},status:"pending",createdAt:Tt()});te({...Sn,reference:Et,providerLabel:re?"InstaPay":"VF-Cash",walletMsisdn:dt,popupId:_e.id})}catch{te({...Sn,reference:Et,providerLabel:re?"InstaPay":"VF-Cash",walletMsisdn:dt})}j(!0);try{ea()}catch{}}}catch{}};try{window.addEventListener("mobileSmsReceived",J)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",J)}catch{}}},[a,r]),S.useEffect(()=>{},[a,r]),S.useEffect(()=>{},[a,r]);const ks=async J=>{var W,Z,q,Q,re,le,we;try{const ue=J||V;if(!ue)return;const{amount:Ve,sender:me,text:Fe,simNumber:ye,senderName:G}=ue,ge=String(Fe||"");let he=Number(Ve||0);const $e=typeof(J==null?void 0:J.deferredMode)=="boolean"?J.deferredMode:De,ut=(J==null?void 0:J.debtorName)??Ae,zt=(J==null?void 0:J.debtorNote)??Xe;try{j(!1)}catch{}try{}catch{}const wt=/Received\s*EGP/i.test(ge)?"instapay":"vodafone_cash";if(!he||he<=0){const Ne=ge.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(Ne&&(he=parseFloat(String(Ne[1]).replace(",","."))),!he||he<=0){const _e=ge.match(/Received\s*EGP\s*([0-9.,]+)/i)||ge.match(/Received\s*EGP([0-9.,]+)/i);_e&&(he=parseFloat(String(_e[1]).replace(/,/g,"")))}}let Ke=String(me||"").trim();if(!Ke){const Ne=ge.match(/\s+\s+(\d+)/i);Ke=Ne?Mt(Ne[1]):""}let ft=String((ue==null?void 0:ue.reference)||"").trim();if(!ft){const Ne=ge.match(/\s*\s*([\d\.]+)/i);ft=Ne?String(Ne[1]).trim():String(Date.now())}if(!he||he<=0){try{a({title:"      ",variant:"destructive"})}catch{}return}const{auth:Wt}=await X(async()=>{const{auth:Ne}=await Promise.resolve().then(()=>Ct);return{auth:Ne}},void 0,import.meta.url),pe=((W=Wt.currentUser)==null?void 0:W.uid)||"";let mt=r||"";if(!pe){try{a({title:"  ",description:"   "})}catch{}return}if(!mt)try{const{doc:Ne,getDoc:_e}=await X(async()=>{const{doc:qt,getDoc:wn}=await Promise.resolve().then(()=>dn);return{doc:qt,getDoc:wn}},void 0,import.meta.url),{db:It}=await X(async()=>{const{db:qt}=await Promise.resolve().then(()=>Ct);return{db:qt}},void 0,import.meta.url),Rt=await _e(Ne(It,"profiles",pe));if(Rt.exists()){const qt=Rt.data(),wn=String((qt==null?void 0:qt.shopId)||"").trim();wn&&(mt=wn)}}catch{}if(!mt){try{a({title:"  ",description:"   "})}catch{}return}let Be=await mG(pe);if(!Be)try{const{doc:Ne,getDoc:_e}=await X(async()=>{const{doc:tt,getDoc:vr}=await Promise.resolve().then(()=>dn);return{doc:tt,getDoc:vr}},void 0,import.meta.url),{db:It}=await X(async()=>{const{db:tt}=await Promise.resolve().then(()=>Ct);return{db:tt}},void 0,import.meta.url);let Rt="",qt="";try{const tt=await _e(Ne(It,"profiles",pe));if(tt.exists()){const vr=tt.data();Rt=String((vr==null?void 0:vr.sim1Number)||"").trim(),qt=String((vr==null?void 0:vr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:wn}=await X(async()=>{const{detectWalletFromSim:tt}=await Promise.resolve().then(()=>va);return{detectWalletFromSim:tt}},void 0,import.meta.url),{merchantWalletService:rr}=await X(async()=>{const{merchantWalletService:tt}=await Promise.resolve().then(()=>ku);return{merchantWalletService:tt}},void 0,import.meta.url),Pr=`wallets_${pe}`,pr=localStorage.getItem(Pr),Jr=pr?JSON.parse(pr):[],gr=await rr.getByMerchantId(pe),Xr=(Array.isArray(Jr)?Jr:[]).map(tt=>({id:String((tt==null?void 0:tt.id)||""),phone:String((tt==null?void 0:tt.phone)||(tt==null?void 0:tt.msisdn)||""),isDefault:!!(tt!=null&&tt.isDefault)})),Ds=(Array.isArray(gr)?gr:[]).map(tt=>({id:String((tt==null?void 0:tt.id)||""),msisdn:String((tt==null?void 0:tt.msisdn)||""),isDefault:!!(tt!=null&&tt.isDefault)})),hl=[...Xr,...Ds],Ph=ye||String(localStorage.getItem("lastSmsSimMsisdn")||"");let Zr=(Ph?[Ph]:[]).filter(Boolean);Zr.length===0&&(Zr=[Rt,qt].filter(Boolean));const yr=await wn(Zr,hl);if(yr&&yr.walletId){Be=yr.walletId;try{localStorage.setItem(`selectedWallet_${pe}`,Be)}catch{}}}catch{}if(!Be){try{a({title:"   ",description:"       "})}catch{}return}try{const Ne=pe;try{localStorage.setItem(`selectedWallet_${Ne}`,Be)}catch{}try{localStorage.setItem(`selectedWallet_${Ne}_${mt}`,Be)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Be}}))}catch{}try{const{Preferences:_e}=await X(async()=>{const{Preferences:It}=await Promise.resolve().then(()=>Qy);return{Preferences:It}},void 0,import.meta.url);await _e.set({key:"selected_wallet_id",value:Be}),await _e.set({key:"current_user_id",value:Ne})}catch{}}catch{}const{recordAutoTransaction:Ge,userDataService:et}=await X(async()=>{const{recordAutoTransaction:Ne,userDataService:_e}=await Promise.resolve().then(()=>ku);return{recordAutoTransaction:Ne,userDataService:_e}},void 0,import.meta.url),Et=ae&&ae.trim()!==""?Math.max(0,parseFloat(ae)):null;let dt=0;if(Et!=null)dt=Et;else try{const{merchantWalletService:Ne}=await X(async()=>{const{merchantWalletService:Rt}=await Promise.resolve().then(()=>ku);return{merchantWalletService:Rt}},void 0,import.meta.url),_e=await Ne.getById(String(Be)),It=_e&&_e.defaultWithdrawCommission;if(It!=null)dt=Math.round((Number(It)||0)*Number(he)/1e3*100)/100;else{const{calculateCommission:Rt}=await X(async()=>{const{calculateCommission:qt}=await Promise.resolve().then(()=>ka);return{calculateCommission:qt}},void 0,import.meta.url);dt=Rt(Number(he),"receive")}}catch{const{calculateCommission:Ne}=await X(async()=>{const{calculateCommission:_e}=await Promise.resolve().then(()=>ka);return{calculateCommission:_e}},void 0,import.meta.url);dt=Ne(Number(he),"receive")}try{const{walletDailyLimitsService:Ne}=await X(async()=>{const{walletDailyLimitsService:It}=await Promise.resolve().then(()=>i_);return{walletDailyLimitsService:It}},void 0,import.meta.url),_e=await Ne.canPerformOperation(String(Be),Math.max(0,Number(he||0)),"withdraw");if(!_e.canPerform)try{a({title:"  ",description:String(_e.message||"      "),variant:"destructive"})}catch{}}catch{}const ot=ft||`${ge}|${Date.now()}`,Sn=ye||String(localStorage.getItem("lastSmsSimMsisdn")||""),st=String((ue==null?void 0:ue.walletMsisdn)||"").trim()||Sn||await av(pe)||"",Tt=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if($e)try{const Ne=await et.getUserData(pe),_e=Array.isArray(Ne==null?void 0:Ne.debts)?Ne.debts:[],It=Tt==="add"?Number(he)+Number(dt):Number(he),Rt={id:`DEBT-${Date.now()}`,debtorName:ut||G||Ke||"",amount:Math.round(Number(It)*100)/100,reason:zt||"  VodafoneCash",customerId:void 0,mobile:Ke,status:"pending",createdAt:new Date},qt=[Rt,..._e];await et.updateUserData(pe,{debts:qt});try{const wn=dt;await et.saveUserTransaction(pe,{type:"withdraw",amount:he,withdrawnAmount:he,commission:wn,status:"pending",createdAt:new Date,senderMsisdn:Ke,receiverMsisdn:st,senderName:G,walletId:Be,fromWallet:Be,lineId:st,provider:wt,reference:ot,transactionId:`DEFER-${Date.now()}`,linkedDebtId:Rt.id})}catch{}try{const wn=(J==null?void 0:J.popupId)||(V==null?void 0:V.popupId)||"";if(wn){const{doc:rr,updateDoc:Pr,serverTimestamp:pr}=await X(async()=>{const{doc:gr,updateDoc:Xr,serverTimestamp:Ds}=await Promise.resolve().then(()=>dn);return{doc:gr,updateDoc:Xr,serverTimestamp:Ds}},void 0,import.meta.url),{db:Jr}=await X(async()=>{const{db:gr}=await Promise.resolve().then(()=>Ct);return{db:gr}},void 0,import.meta.url);try{await Pr(rr(Jr,"pendingSmsPopups",wn),{status:"confirmed",confirmedAt:pr()})}catch{}try{(q=(Z=$.current)==null?void 0:Z.add)==null||q.call(Z,wn);const gr=Array.from($.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(gr))}catch{}}}catch{}try{a({title:"  ",description:"      "})}catch{}return}catch{}try{const Ne=await Ge({shopId:mt,lineId:st,walletId:Be,amount:he,note:"SMS-ManualConfirm",provider:wt,createdBy:pe,senderMsisdn:Ke,senderName:G,reference:ot,text:ge});try{const _e=(J==null?void 0:J.popupId)||(V==null?void 0:V.popupId)||"";if(_e){const{doc:It,updateDoc:Rt,serverTimestamp:qt}=await X(async()=>{const{doc:rr,updateDoc:Pr,serverTimestamp:pr}=await Promise.resolve().then(()=>dn);return{doc:rr,updateDoc:Pr,serverTimestamp:pr}},void 0,import.meta.url),{db:wn}=await X(async()=>{const{db:rr}=await Promise.resolve().then(()=>Ct);return{db:rr}},void 0,import.meta.url);try{await Rt(It(wn,"pendingSmsPopups",_e),{status:"confirmed",confirmedAt:qt()})}catch{}try{(re=(Q=$.current)==null?void 0:Q.add)==null||re.call(Q,_e);const rr=Array.from($.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(rr))}catch{}}}catch{}try{const _e=Math.max(0,Number(he||0)),{doc:It,getDoc:Rt,updateDoc:qt}=await X(async()=>{const{doc:Xr,getDoc:Ds,updateDoc:hl}=await Promise.resolve().then(()=>dn);return{doc:Xr,getDoc:Ds,updateDoc:hl}},void 0,import.meta.url),{db:wn}=await X(async()=>{const{db:Xr}=await Promise.resolve().then(()=>Ct);return{db:Xr}},void 0,import.meta.url),rr=It(wn,"dashboardData",mt),Pr=await Rt(rr);let pr=Pr.exists()?Number(((le=Pr.data())==null?void 0:le.cashBalance)||0):0;const Jr=Pr.exists()?((we=Pr.data())==null?void 0:we.walletBalances)||{}:{},gr=Number(Jr[Be]||0);Jr[Be]=gr+_e,pr=pr-_e+Math.max(0,dt),await qt(rr,{cashBalance:pr,walletBalances:Jr,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:pr}}))}catch{}try{const{walletDailyLimitsService:Xr}=await X(async()=>{const{walletDailyLimitsService:Ds}=await Promise.resolve().then(()=>i_);return{walletDailyLimitsService:Ds}},void 0,import.meta.url);await Xr.updateUsage(String(Be),_e,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Be)}}))}catch{}}catch{}}catch{}(async()=>{try{const _e=dt;await et.saveUserTransaction(pe,{type:"withdraw",amount:he,withdrawnAmount:he,commission:_e,status:"completed",createdAt:new Date,senderMsisdn:Ke,receiverMsisdn:st,senderName:G,walletId:Be,fromWallet:Be,lineId:st,provider:wt,reference:ot,transactionId:Ne})}catch{}})(),j(!1),te(null);try{a({title:`     ${Ne}`})}catch{}}catch(Ne){try{a({title:String((Ne==null?void 0:Ne.message)||"  "),variant:"destructive"})}catch{}}}catch{}};S.useEffect(()=>{try{VA.start()}catch{}return()=>{try{VA.stop()}catch{}}},[]),S.useEffect(()=>{(async()=>{try{if(!(n!=null&&n.uid))return;const J=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),W=String(localStorage.getItem("android_installed_version")||"").trim(),Z=localStorage.getItem("android_last_ack_code"),q=localStorage.getItem("android_installed_code"),Q=Z?Number(Z):null,re=q?Number(q):null,le=J||W,we=Q??re??null;le&&_(le),we&&b(we);const{doc:ue,getDoc:Ve}=await X(async()=>{const{doc:ye,getDoc:G}=await Promise.resolve().then(()=>dn);return{doc:ye,getDoc:G}},void 0,import.meta.url),{db:me}=await X(async()=>{const{db:ye}=await Promise.resolve().then(()=>Ct);return{db:ye}},void 0,import.meta.url),Fe=await Ve(ue(me,"profiles",n.uid));if(Fe.exists()){const ye=Fe.data(),G=String((ye==null?void 0:ye.lastAckAndroidVersion)||(ye==null?void 0:ye.androidInstalledVersion)||(ye==null?void 0:ye.lastAckUpdateId)||"").trim(),ge=typeof(ye==null?void 0:ye.lastAckAndroidCode)=="number"?ye.lastAckAndroidCode:typeof(ye==null?void 0:ye.androidInstalledCode)=="number"?ye.androidInstalledCode:null,he=(ut,zt)=>{const wt=String(ut||"").replace(/^v/i,"").split(".").map(ft=>parseInt(ft,10)||0),Ke=String(zt||"").replace(/^v/i,"").split(".").map(ft=>parseInt(ft,10)||0);for(let ft=0;ft<Math.max(wt.length,Ke.length);ft++){const Wt=wt[ft]||0,pe=Ke[ft]||0;if(Wt>pe)return 1;if(Wt<pe)return-1}return 0};let $e=!1;if(typeof ge=="number"&&typeof we=="number"?$e=ge>we:typeof ge=="number"&&we==null?$e=!0:G&&le?$e=he(G,le)>0:G&&!le&&($e=!0),$e){if(G){try{localStorage.setItem("android_installed_version",G)}catch{}_(G)}if(typeof ge=="number"){try{localStorage.setItem("android_installed_code",String(ge))}catch{}b(ge)}}else if(typeof ge=="number"&&we==null){try{localStorage.setItem("android_installed_code",String(ge))}catch{}b(ge)}}}catch{}})()},[n==null?void 0:n.uid]),S.useEffect(()=>{try{const W=String((window==null?void 0:window.__nativeAppVersion)||"").trim();W&&k(W);const Z=window==null?void 0:window.__nativeAppVersionCode;if(typeof Z=="number"){R(Z);try{localStorage.setItem("android_installed_code",String(Z))}catch{}}try{W&&localStorage.setItem("android_installed_version",W)}catch{}}catch{}const J=W=>{var Z,q;try{const Q=String((((Z=W==null?void 0:W.detail)==null?void 0:Z.version)??"")||"").trim(),re=(q=W==null?void 0:W.detail)==null?void 0:q.code;Q&&k(Q);try{Q&&localStorage.setItem("android_installed_version",Q)}catch{}typeof re=="number"&&R(re)}catch{}};try{window.addEventListener("native-app-version",J)}catch{}return()=>{try{window.removeEventListener("native-app-version",J)}catch{}}},[]),S.useEffect(()=>{try{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",W=String(x||"").trim();if(!J||!W||!(n!=null&&n.uid))return;(async()=>{try{const{doc:Z,setDoc:q,serverTimestamp:Q}=await X(async()=>{const{doc:le,setDoc:we,serverTimestamp:ue}=await Promise.resolve().then(()=>dn);return{doc:le,setDoc:we,serverTimestamp:ue}},void 0,import.meta.url),{db:re}=await X(async()=>{const{db:le}=await Promise.resolve().then(()=>Ct);return{db:le}},void 0,import.meta.url);await q(Z(re,"profiles",n.uid),{androidInstalledVersion:W,androidInstalledAt:Q()},{merge:!0});try{localStorage.setItem("android_installed_version",W)}catch{}}catch{}})()}catch{}},[x,n==null?void 0:n.uid]),S.useEffect(()=>{ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"&&(async()=>{try{await X(()=>import("./ProtectedUserDashboard-kC9zwMv2.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url),await X(()=>import("./UserDashboardPage-ByyrI8CM.js"),__vite__mapDeps([61,1,39,15,18,30,31,23,6,42,41,25,5,48,33,46,37,38,47,51,10,56,4,8,32,26,35,19,40,44,54,7]),import.meta.url),await X(()=>Promise.resolve().then(()=>wH),void 0,import.meta.url),await X(()=>import("./ProfileSettingsPage-BRcg6bKD.js"),__vite__mapDeps([53,1,18,47,54,30,31,42,5,49,7]),import.meta.url),await X(()=>import("./TransactionsPage-McbKX-66.js"),__vite__mapDeps([55,1,15,39,38,56,48,30,18,31,4,41,10,8,32,33,5,51]),import.meta.url)}catch{}})()},[]),S.useEffect(()=>{if(!t)return;const J=document.createElement("style");J.setAttribute("data-disable-pull-to-refresh","true"),J.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(J);let W=0,Z=null;const q=re=>{var le,we;W=((we=(le=re.touches)==null?void 0:le[0])==null?void 0:we.clientY)||0,Z=re.target},Q=re=>{var ye,G;const le=((G=(ye=re.touches)==null?void 0:ye[0])==null?void 0:G.clientY)||0,we=document.scrollingElement||document.documentElement,ue=we.scrollTop||window.scrollY||0,Ve=we.scrollHeight-we.clientHeight||0,me=Z||null,Fe=(()=>{let ge=me;for(;ge&&ge!==document.body;){const $e=window.getComputedStyle(ge).overflowY;if(($e==="auto"||$e==="scroll")&&ge.scrollHeight>ge.clientHeight)return!0;ge=ge.parentElement}return!1})();!Fe&&ue<=0&&le>W&&re.cancelable&&re.preventDefault(),!Fe&&ue>=Ve&&le<W&&re.cancelable&&re.preventDefault()};return document.addEventListener("touchstart",q,{passive:!0}),document.addEventListener("touchmove",Q,{passive:!1}),()=>{document.removeEventListener("touchstart",q),document.removeEventListener("touchmove",Q);try{document.head.removeChild(J)}catch{}}},[t]),S.useEffect(()=>{if(!((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"))return;try{const q=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=q,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const q=(window.location.assign||(Q=>{})).bind(window.location);window.__originalAssign=q,window.location.assign=Q=>{try{if(String(Q||"").startsWith("/user/dashboard")){o("/user/dashboard");return}}catch{}try{q(Q)}catch{}}}catch{}let W=null,Z=!1;return(async()=>{try{const{listenAndroidUpdates:q}=await X(async()=>{const{listenAndroidUpdates:Q}=await Promise.resolve().then(()=>CH);return{listenAndroidUpdates:Q}},void 0,import.meta.url);W=q(Q=>{if(Z)return;const re=String((Q==null?void 0:Q.version)||"").trim(),le=String((Q==null?void 0:Q.url)||"").trim(),we=String((Q==null?void 0:Q.notes)||"").trim(),ue=!!(Q!=null&&Q.force),Ve=typeof(Q==null?void 0:Q.code)=="number"?Q.code:void 0,me=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),Fe=String(v||me||"").trim(),ye=(pe,mt)=>{const Be=String(pe||"").replace(/^v/i,"").split(".").map(et=>parseInt(et,10)||0),Ge=String(mt||"").replace(/^v/i,"").split(".").map(et=>parseInt(et,10)||0);for(let et=0;et<Math.max(Be.length,Ge.length);et++){const Et=Be[et]||0,dt=Ge[et]||0;if(Et>dt)return 1;if(Et<dt)return-1}return 0},G=String(x||"").trim(),ge=String(localStorage.getItem("android_installed_version")||"").trim(),he=localStorage.getItem("android_installed_code"),$e=he?Number(he):null,ut=[L,A,$e].filter(pe=>typeof pe=="number").reduce((pe,mt)=>pe===void 0?mt:Math.max(pe,mt),void 0),zt=typeof Ve=="number"&&typeof ut=="number"?Ve>ut:void 0,wt=(()=>{const pe=[G,Fe,ge].filter(Boolean);return pe.length===0?"":pe.reduce((mt,Be)=>ye(Be,mt)>0?Be:mt)})(),Ke=ye(re,wt)>0;if(!!le&&(!!re||typeof Ve=="number")&&(zt!==void 0?zt:Ke)){const pe="   ",mt=`${we?we+`
`:""} : ${re}`;h({title:pe,message:mt,apkUrl:le,force:ue,versionId:re,versionCode:Ve}),c(!0)}else try{c(!1)}catch{}})}catch{}})(),()=>{Z=!0;try{typeof W=="function"&&W()}catch{}}},[v,x]),S.useEffect(()=>{const J=Z=>{const q=(Z==null?void 0:Z.detail)||{};try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}m(!0),g({percent:q.percent??null,downloaded:q.downloaded??0,total:q.total??0})},W=()=>{try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}m(!1),E(!0),g({percent:100,downloaded:((w==null?void 0:w.total)??(w==null?void 0:w.downloaded)??0)||0,total:(w==null?void 0:w.total)??0});try{const Z=String((d==null?void 0:d.versionId)||"").trim();if(Z){try{localStorage.setItem("android_last_ack_version_id",Z)}catch{}try{localStorage.setItem("android_installed_version",Z)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:q,setDoc:Q,serverTimestamp:re}=await X(async()=>{const{doc:we,setDoc:ue,serverTimestamp:Ve}=await Promise.resolve().then(()=>dn);return{doc:we,setDoc:ue,serverTimestamp:Ve}},void 0,import.meta.url),{db:le}=await X(async()=>{const{db:we}=await Promise.resolve().then(()=>Ct);return{db:we}},void 0,import.meta.url);await Q(q(le,"profiles",n.uid),{lastAckAndroidVersion:Z,androidInstalledVersion:Z,lastAckAt:re(),androidInstalledAt:re()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",J),window.addEventListener("androidUpdateDownloaded",W),()=>{window.removeEventListener("androidUpdateProgress",J),window.removeEventListener("androidUpdateDownloaded",W)}},[]),S.useEffect(()=>((async()=>{var J;try{const{auth:W}=await X(async()=>{const{auth:Fe}=await Promise.resolve().then(()=>Ct);return{auth:Fe}},void 0,import.meta.url),Z=((J=W.currentUser)==null?void 0:J.uid)||"";if(!Z)return;const{db:q}=await X(async()=>{const{db:Fe}=await Promise.resolve().then(()=>Ct);return{db:Fe}},void 0,import.meta.url),{collection:Q,query:re,where:le,onSnapshot:we}=await X(async()=>{const{collection:Fe,query:ye,where:G,onSnapshot:ge}=await Promise.resolve().then(()=>dn);return{collection:Fe,query:ye,where:G,onSnapshot:ge}},void 0,import.meta.url),ue=re(Q(q,"pendingSmsPopups"),le("userId","==",Z),le("status","==","pending")),Ve=Date.now(),me=we(ue,Fe=>{var ye,G,ge,he,$e,ut,zt,wt,Ke;try{const ft=typeof Fe.docChanges=="function"?Fe.docChanges():[];for(const Wt of ft){if(Wt.type==="added"){const pe=Wt.doc.data()||{},mt=Wt.doc.id;if((G=(ye=$.current)==null?void 0:ye.has)!=null&&G.call(ye,mt))continue;try{const st=pe.createdAt||pe.timestamp||(pe.payload||{}).createdAt||(pe.payload||{}).timestamp,Tt=st&&typeof st.toMillis=="function"?st.toMillis():typeof pe.createdAtMs=="number"?pe.createdAtMs:typeof(pe.payload||{}).createdAtMs=="number"?(pe.payload||{}).createdAtMs:null;if(typeof Tt=="number"&&Tt<Ve)continue}catch{}let Be=pe.amount??((ge=pe.payload)==null?void 0:ge.amount)??null,Ge=pe.sender??((he=pe.payload)==null?void 0:he.sender)??"";const et=pe.senderName??(($e=pe.payload)==null?void 0:$e.senderName)??"";let Et=pe.reference??((ut=pe.payload)==null?void 0:ut.reference)??"";const dt=pe.text??((zt=pe.payload)==null?void 0:zt.text)??"";let ot=pe.simNumber??((wt=pe.payload)==null?void 0:wt.simNumber)??"";const Sn=pe.walletMsisdn??((Ke=pe.payload)==null?void 0:Ke.walletMsisdn)??"";let Qe="VF-Cash";if(/Received\s*EGP/i.test(String(dt))){Qe="InstaPay";const st=String(dt).match(/Received\s*EGP\s*([0-9.,]+)/i);st&&(Be=parseFloat(String(st[1]).replace(/,/g,"")));const Tt=String(dt).match(/from\s+([0-9+]+)/i);Tt&&(Ge=Mt(Tt[1]));const Ne=String(dt).match(/Ref:\s*([A-Za-z0-9\-]+)/i);Ne&&(Et=String(Ne[1]).trim());try{if(!ot){const _e=localStorage.getItem("sim1Number");_e&&(ot=String(_e).trim())}}catch{}}te({amount:Number(Be||0),sender:String(Ge||""),senderName:et,reference:String(Et||""),text:dt,simNumber:ot,walletMsisdn:Sn,providerLabel:Qe,popupId:mt}),j(!0);try{ea()}catch{}}if(Wt.type==="removed"){const pe=Wt.doc.id,mt=(V==null?void 0:V.popupId)||"";mt&&mt===pe&&(j(!1),te(null))}}}catch{}});C.current=me}catch{}})(),()=>{try{const J=C.current;typeof J=="function"&&J()}catch{}}),[n==null?void 0:n.uid]),S.useEffect(()=>{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",W=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(J||W)return;let Z=!1;return(async()=>{try{const q="0.0.0",Q=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!Q.ok)return;const re=await Q.json(),le=String((re==null?void 0:re.version)||"0.0.0"),we=!!(re!=null&&re.force);if(!Z&&((Ve,me)=>{const Fe=String(Ve).split(".").map(G=>parseInt(G,10)||0),ye=String(me).split(".").map(G=>parseInt(G,10)||0);for(let G=0;G<Math.max(Fe.length,ye.length);G++){const ge=Fe[G]||0,he=ye[G]||0;if(ge>he)return 1;if(ge<he)return-1}return 0})(le,q)>0){if(we){try{window.location.reload()}catch{}return}try{a({title:"  ",description:` ${le}      `})}catch{}}}catch{}})(),()=>{Z=!0}},[]);const au=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),ii=(()=>{const J=(Z,q)=>{const Q=String(Z||"").replace(/^v/i,"").split(".").map(le=>parseInt(le,10)||0),re=String(q||"").replace(/^v/i,"").split(".").map(le=>parseInt(le,10)||0);for(let le=0;le<Math.max(Q.length,re.length);le++){const we=Q[le]||0,ue=re[le]||0;if(we>ue)return 1;if(we<ue)return-1}return 0},W=[x,v,au].filter(Boolean);return W.length===0?"":W.reduce((Z,q)=>J(q,Z)>0?q:Z)})();return T.jsxs(T.Fragment,{children:[T.jsx(ov,{open:Gr,onOpenChange:()=>{},children:T.jsxs(sm,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:J=>{try{J.preventDefault()}catch{}},onEscapeKeyDown:J=>{try{J.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[T.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),T.jsx(im,{className:"text-center",children:T.jsxs("div",{className:"flex items-center justify-center gap-3",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:T.jsx(oU,{className:"w-6 h-6"})}),T.jsx(om,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),T.jsxs("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:[T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"1"}),T.jsx("div",{children:"  ( )                        ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"2"}),T.jsx("div",{children:"                         ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"3"}),T.jsx("div",{children:"       (   )        ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"4"}),T.jsx("div",{children:"                    ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"5"}),T.jsx("div",{children:"               ."})]})]}),T.jsx("div",{className:"mt-4",children:T.jsx(us,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Qr,children:"  "})})]})}),U.useEffect(()=>{try{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",W=(n==null?void 0:n.uid)||"";if(!J||!W)return;const Z=`androidPermsRequested_${W}`;localStorage.getItem(Z)==="true"||(localStorage.setItem(Z,"true"),setTimeout(()=>{try{window.location.href="cashy://requestPerms"}catch{}},300))}catch{}},[n==null?void 0:n.uid]),(()=>{try{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",W=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),ie&&(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"&&T.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:T.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:T.jsx("span",{className:"text-2xl",children:"!"})}),T.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),T.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),T.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:T.jsx(us,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),l&&d&&T.jsx(ov,{open:l,onOpenChange:J=>{d!=null&&d.force||c(J)},children:T.jsxs(sm,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[T.jsxs(im,{className:"text-center",children:[T.jsx(om,{className:"text-base md:text-lg font-bold text-gray-900",children:d.title}),T.jsx(a_,{className:"text-sm text-gray-700 whitespace-pre-line",children:d.message}),T.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:ii?`  : v${ii}`:""})]}),T.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!d.force&&!f&&!y&&T.jsx(us,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>c(!1),children:""}),!y&&T.jsx(us,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const J=String((d==null?void 0:d.versionId)||"").trim(),W=d==null?void 0:d.versionCode;if(J)try{localStorage.setItem("android_last_ack_version_id",J)}catch{}if(typeof W=="number")try{localStorage.setItem("android_last_ack_code",String(W))}catch{}if((async()=>{try{if(n!=null&&n.uid&&J){const{doc:q,setDoc:Q,serverTimestamp:re}=await X(async()=>{const{doc:ue,setDoc:Ve,serverTimestamp:me}=await Promise.resolve().then(()=>dn);return{doc:ue,setDoc:Ve,serverTimestamp:me}},void 0,import.meta.url),{db:le}=await X(async()=>{const{db:ue}=await Promise.resolve().then(()=>Ct);return{db:ue}},void 0,import.meta.url),we={lastAckAndroidVersion:J,lastAckAt:re()};typeof W=="number"&&(we.lastAckAndroidCode=W),await Q(q(le,"profiles",n.uid),we,{merge:!0})}}catch{}})(),(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"){const q=d.apkUrl,Q=`cashy://update?url=${encodeURIComponent(q)}`;m(!0),g({percent:0,downloaded:0,total:0});try{D.current&&clearInterval(D.current),D.current=setInterval(()=>{g(re=>{const le=typeof(re==null?void 0:re.percent)=="number"?re.percent:0,we=O.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(le+we))),downloaded:(re==null?void 0:re.downloaded)??0,total:(re==null?void 0:re.total)??0}})},600)}catch{}window.location.href=Q;try{P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{try{O.current=!1}catch{}try{P.current=null}catch{}},8e3)}catch{}}else{const q=d.apkUrl;try{window.open(q,"_blank")}catch{}}}catch{}},children:f?" ...":" "}),y&&T.jsx(us,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"){c(!1);try{const W=String((d==null?void 0:d.versionId)||"").trim();if(W){try{localStorage.setItem("android_last_ack_version_id",W)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:Z,setDoc:q,serverTimestamp:Q}=await X(async()=>{const{doc:ue,setDoc:Ve,serverTimestamp:me}=await Promise.resolve().then(()=>dn);return{doc:ue,setDoc:Ve,serverTimestamp:me}},void 0,import.meta.url),{db:re}=await X(async()=>{const{db:ue}=await Promise.resolve().then(()=>Ct);return{db:ue}},void 0,import.meta.url),le={lastAckAndroidVersion:W,androidInstalledVersion:W,lastAckAt:Q(),androidInstalledAt:Q()},we=d==null?void 0:d.versionCode;if(typeof we=="number"){le.lastAckAndroidCode=we,le.androidInstalledCode=we;try{localStorage.setItem("android_installed_code",String(we)),localStorage.setItem("android_last_ack_code",String(we))}catch{}}await q(Z(re,"profiles",n.uid),le,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),f&&T.jsxs("div",{className:"mt-3 text-center",children:[T.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:T.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((w==null?void 0:w.percent)||0)))}%`}})}),T.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((w==null?void 0:w.percent)||0),"%"]})]})]})}),i&&T.jsx(ov,{open:fe,onOpenChange:async J=>{var W,Z;if(j(J),!J){try{const q=(V==null?void 0:V.popupId)||"";if(q){const{db:Q}=await X(async()=>{const{db:ue}=await Promise.resolve().then(()=>Ct);return{db:ue}},void 0,import.meta.url),{doc:re,updateDoc:le,serverTimestamp:we}=await X(async()=>{const{doc:ue,updateDoc:Ve,serverTimestamp:me}=await Promise.resolve().then(()=>dn);return{doc:ue,updateDoc:Ve,serverTimestamp:me}},void 0,import.meta.url);try{await le(re(Q,"pendingSmsPopups",q),{status:"dismissed",dismissedAt:we()})}catch{}try{(Z=(W=$.current)==null?void 0:W.add)==null||Z.call(W,q);const ue=Array.from($.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(ue))}catch{}}}catch{}Ye(!1),Y(""),Yt(""),je(""),Vt(!1),Vn(0)}},children:T.jsxs(sm,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[T.jsxs(im,{children:[T.jsx(om,{children:V!=null&&V.providerLabel?T.jsxs(T.Fragment,{children:["   ",T.jsx("span",{className:"text-red-600",children:V.providerLabel})]}):"   "}),T.jsx(a_,{})]}),T.jsxs("div",{className:"text-sm",children:[T.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[T.jsx(us,{variant:(V==null?void 0:V.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(V==null?void 0:V.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Zo(nr,"SIM 1"),disabled:!nr,children:" "}),T.jsx(us,{variant:(V==null?void 0:V.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(V==null?void 0:V.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Zo(vt,"SIM 2"),disabled:!vt,children:" "})]}),T.jsx("div",{className:"border rounded-lg p-3",children:T.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"font-bold",children:[" ",(ta=V==null?void 0:V.amount)==null?void 0:ta.toLocaleString()]}),T.jsx("div",{className:"font-mono",children:(V==null?void 0:V.sender)||""}),(V==null?void 0:V.simNumber)&&T.jsx("div",{className:"font-mono",children:V==null?void 0:V.simNumber}),(V==null?void 0:V.senderName)&&T.jsx("div",{children:V==null?void 0:V.senderName}),(V==null?void 0:V.reference)&&T.jsx("div",{className:"font-mono",children:V==null?void 0:V.reference}),(V==null?void 0:V.walletMsisdn)&&T.jsx("div",{className:"font-mono",children:V==null?void 0:V.walletMsisdn})]}),T.jsxs("div",{className:"space-y-2 text-right",children:[T.jsx("div",{children:"  "}),T.jsx("div",{children:" "}),(V==null?void 0:V.simNumber)&&T.jsx("div",{children:" "}),(V==null?void 0:V.senderName)&&T.jsx("div",{children:"  "}),(V==null?void 0:V.reference)&&T.jsx("div",{children:"  "}),(V==null?void 0:V.walletMsisdn)&&T.jsx("div",{children:"  "})]})]})}),ke&&T.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[T.jsx("span",{className:"flex-1",children:"  ()"}),T.jsx("input",{type:"number",step:"0.01",min:"0",value:ae,onChange:J=>Y(J.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),ze&&T.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("div",{className:"text-sm",children:" "}),T.jsxs("div",{className:"font-bold",children:[" ",rn.toLocaleString()]})]}),T.jsx("div",{className:"mt-3",children:T.jsx("input",{type:"text",value:Ae,onChange:J=>Yt(J.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),T.jsx("div",{className:"mt-3",children:T.jsx(us,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Ye(!0),Vt(!1)},children:""})})]}),De&&!ze&&T.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),T.jsx("div",{className:"pt-2",children:T.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var J;try{const Z=String((V==null?void 0:V.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),q=Z?parseFloat(String(Z[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),{auth:Q}=await X(async()=>{const{auth:ye}=await Promise.resolve().then(()=>Ct);return{auth:ye}},void 0,import.meta.url),re=((J=Q.currentUser)==null?void 0:J.uid)||"",le=re?`selectedWallet_${re}`:"selectedWallet_default",we=localStorage.getItem(le)||"",ue=ae&&ae.trim()!==""?Math.max(0,parseFloat(ae)):null;let Ve=0;if(ue!=null)Ve=ue;else try{const{merchantWalletService:ye}=await X(async()=>{const{merchantWalletService:he}=await Promise.resolve().then(()=>ku);return{merchantWalletService:he}},void 0,import.meta.url),G=await ye.getById(String(we)),ge=G&&G.defaultWithdrawCommission;if(ge!=null)Ve=Math.round((Number(ge)||0)*Number(q)/1e3*100)/100;else{const{calculateCommission:he}=await X(async()=>{const{calculateCommission:$e}=await Promise.resolve().then(()=>ka);return{calculateCommission:$e}},void 0,import.meta.url);Ve=he(Number(q),"receive")}}catch{const{calculateCommission:ye}=await X(async()=>{const{calculateCommission:G}=await Promise.resolve().then(()=>ka);return{calculateCommission:G}},void 0,import.meta.url);Ve=ye(Number(q),"receive")}const Fe=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(q)+Number(Ve):Number(q);Vn(Math.round(Fe*100)/100),Vt(!0)}catch{Vt(!0)}},children:""})})]}),T.jsx("div",{className:"pt-3",children:T.jsx(us,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const J=String((V==null?void 0:V.text)||""),W=J.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),Z=W?parseFloat(String(W[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),q=J.match(/\s+\s+(\d+)/i),Q=String((V==null?void 0:V.sender)||(q?q[1]:"")||""),re=J.match(/\s*\s*([\d\.]+)/i),le=String((V==null?void 0:V.reference)||(re?re[1]:String(Date.now())));ks({...V,amount:Z,sender:Q,reference:le,deferredMode:De,debtorName:Ae,debtorNote:Xe})}catch{ks()}},children:" "})})]})})]})},yx=()=>{const t=ri(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?T.jsxs(T.Fragment,{children:[T.jsx(ZU,{}),T.jsx(O4,{})]}):null},vx=()=>{const{user:t,loading:e}=dl();return e?T.jsx(s_,{}):t?T.jsx(am,{}):T.jsx(wp,{})},hG=()=>T.jsx(r6,{client:k2,children:T.jsx(d$,{children:T.jsxs(E3,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android")&&T.jsx(kH,{}),T.jsx(dG,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&uG||ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android")?T.jsxs(o$,{children:[T.jsx(gx,{}),T.jsx(yx,{}),T.jsx(S.Suspense,{fallback:T.jsx(s_,{}),children:T.jsxs(SS,{children:[T.jsx(be,{path:"/",element:ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"?T.jsx(vx,{}):T.jsx(Sf,{})}),T.jsx(be,{path:"/dashboard-redirect",element:T.jsx(KA,{})}),T.jsx(be,{path:"/landing",element:T.jsx(Sf,{})}),T.jsx(be,{path:"/subscriptions",element:T.jsx(GA,{})}),T.jsx(be,{path:"/auth",element:T.jsx(QA,{})}),T.jsx(be,{path:"/user/login",element:T.jsx(wp,{})}),T.jsx(be,{path:"/user/forgot-password",element:T.jsx(ZA,{})}),T.jsx(be,{path:"/user/register",element:T.jsx(Af,{})}),T.jsx(be,{path:"/register",element:T.jsx(Af,{})}),T.jsx(be,{path:"/user/account-setup",element:T.jsx(XA,{})}),T.jsx(be,{path:"/user/pending-approval",element:T.jsx(rx,{})}),T.jsx(be,{path:"/user/dashboard",element:T.jsx(am,{})}),T.jsx(be,{path:"/branch/:shopId/dashboard",element:T.jsx(am,{})}),T.jsx(be,{path:"/user/add-wallet",element:T.jsx(cx,{})}),T.jsx(be,{path:"/admin/login",element:T.jsx(sx,{})}),T.jsx(be,{path:"/admin/dashboard",element:T.jsx(ix,{})}),T.jsx(be,{path:"/admin/topups",element:T.jsx(YA,{})}),T.jsx(be,{path:"/admin/notifications",element:T.jsx(JA,{})}),T.jsx(be,{path:"/profile-settings",element:T.jsx(ax,{})}),T.jsx(be,{path:"/transactions",element:T.jsx(lx,{})}),T.jsx(be,{path:"/referrals",element:T.jsx(ux,{})}),T.jsx(be,{path:"/privacy-policy",element:T.jsx(mx,{})}),T.jsx(be,{path:"/cpanel",element:T.jsx(dx,{})}),T.jsx(be,{path:"/cpanel/login",element:T.jsx(hx,{})}),T.jsx(be,{path:"/auth-test",element:T.jsx(ox,{})}),T.jsx(be,{path:"/topup",element:T.jsx(bf,{})}),T.jsx(be,{path:"/recharge",element:T.jsx(bf,{})}),T.jsx(be,{path:"/merchant/*",element:T.jsx(nx,{})}),T.jsx(be,{path:"/dashboard/login",element:T.jsx(ex,{})}),T.jsx(be,{path:"/dashboard",element:T.jsx(tx,{})}),T.jsx(be,{path:"*",element:T.jsx(fx,{})})]})}),T.jsx(px,{})]}):T.jsxs(i$,{children:[T.jsx(gx,{}),T.jsx(yx,{}),T.jsx(S.Suspense,{fallback:T.jsx(s_,{}),children:T.jsxs(SS,{children:[T.jsx(be,{path:"/",element:ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"?T.jsx(vx,{}):T.jsx(Sf,{})}),T.jsx(be,{path:"/dashboard-redirect",element:T.jsx(KA,{})}),T.jsx(be,{path:"/landing",element:T.jsx(Sf,{})}),T.jsx(be,{path:"/subscriptions",element:T.jsx(GA,{})}),T.jsx(be,{path:"/auth",element:T.jsx(QA,{})}),T.jsx(be,{path:"/user/login",element:T.jsx(wp,{})}),T.jsx(be,{path:"/user/forgot-password",element:T.jsx(ZA,{})}),T.jsx(be,{path:"/user/register",element:T.jsx(Af,{})}),T.jsx(be,{path:"/register",element:T.jsx(Af,{})}),T.jsx(be,{path:"/user/account-setup",element:T.jsx(XA,{})}),T.jsx(be,{path:"/user/pending-approval",element:T.jsx(rx,{})}),T.jsx(be,{path:"/user/dashboard",element:T.jsx(am,{})}),T.jsx(be,{path:"/user/add-wallet",element:T.jsx(cx,{})}),T.jsx(be,{path:"/admin/login",element:T.jsx(sx,{})}),T.jsx(be,{path:"/admin/dashboard",element:T.jsx(ix,{})}),T.jsx(be,{path:"/admin/topups",element:T.jsx(YA,{})}),T.jsx(be,{path:"/admin/notifications",element:T.jsx(JA,{})}),T.jsx(be,{path:"/profile-settings",element:T.jsx(ax,{})}),T.jsx(be,{path:"/transactions",element:T.jsx(lx,{})}),T.jsx(be,{path:"/referrals",element:T.jsx(ux,{})}),T.jsx(be,{path:"/privacy-policy",element:T.jsx(mx,{})}),T.jsx(be,{path:"/cpanel",element:T.jsx(dx,{})}),T.jsx(be,{path:"/cpanel/login",element:T.jsx(hx,{})}),T.jsx(be,{path:"/auth-test",element:T.jsx(ox,{})}),T.jsx(be,{path:"/topup",element:T.jsx(bf,{})}),T.jsx(be,{path:"/recharge",element:T.jsx(bf,{})}),T.jsx(be,{path:"/merchant/*",element:T.jsx(nx,{})}),T.jsx(be,{path:"/dashboard/login",element:T.jsx(ex,{})}),T.jsx(be,{path:"/dashboard",element:T.jsx(tx,{})}),T.jsx(be,{path:"*",element:T.jsx(fx,{})})]})}),T.jsx(px,{})]})]})})}),fG=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},av=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await X(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>va);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},mG=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await X(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>va);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},D2=S.createContext(void 0),pG=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!1),[i,o]=S.useState(null),{profile:a,user:l}=dl();S.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),w=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),m&&s(m==="true"),w&&o(Number(w))}catch{}},[]),S.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=xe(K,"cashierShift",a.shopId);let m=null;return(async()=>{try{(await Xt(f)).exists()||await ln(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),m=ki(f,g=>{if(g.exists()){const y=g.data(),E=(y==null?void 0:y.shiftUser)||null,v=!!(y!=null&&y.isShiftActive),_=(y==null?void 0:y.shiftStartAt)??null;let x=E;if(!x)try{const k=localStorage.getItem("cashier_shift_user"),L=k?JSON.parse(k):null;L&&(x=L)}catch{}n(x),s(v),o(typeof _=="number"?_:_?Number(_):null);try{x?localStorage.setItem("cashier_shift_user",JSON.stringify(x)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",v?"true":"false"),_!=null&&localStorage.setItem("cashier_shift_start_at",String(_))}catch{}}},g=>{console.warn("cashierShift snapshot error:",g)})}catch(w){console.warn("Failed to init cashierShift doc:",w)}})(),()=>{m&&m()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const m=xe(K,"cashierShift",a.shopId);yn(m,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const m=xe(K,"cashierShift",a.shopId);yn(m,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const w=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,g=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,y=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let E=localStorage.getItem(w);if(E==null){const _=localStorage.getItem(g);if(_!=null){E=_;try{localStorage.setItem(w,_),localStorage.removeItem(g)}catch{}}}if(E==null&&(l!=null&&l.uid)){const _=localStorage.getItem("cashBalance"),x=localStorage.getItem("userCashBalance");if(_!=null){try{localStorage.setItem(w,_),localStorage.removeItem("cashBalance")}catch{}E=_}else if(x!=null){try{localStorage.setItem(w,x),localStorage.removeItem("userCashBalance")}catch{}E=x}}const v=localStorage.getItem(y);E?localStorage.setItem("shiftStartDrawerFunds",E):localStorage.setItem("shiftStartDrawerFunds","0"),v?localStorage.setItem("shiftStartWalletBalances",v):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=xe(K,"dashboardData",a.shopId),w=await Xt(m);if(w.exists()){const g=w.data(),y=Number((g==null?void 0:g.cashBalance)??0),E=(g==null?void 0:g.walletBalances)??{};try{const v=localStorage.getItem("shiftStartDrawerFunds"),_=localStorage.getItem("shiftStartWalletBalances"),x=v?parseFloat(v):0,k=_?JSON.parse(_):{},L=!v||!Number.isFinite(x)||x===0,R=!_||Object.keys(k||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(y)?y:0)),R&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(E||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=xe(K,"cashierShift",a.shopId);yn(f,{isShiftActive:!1})}}catch{}};return T.jsx(D2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},QG=()=>{const t=S.useContext(D2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{JO()}catch{}const gG=()=>{const{theme:t="system"}=$P();return S.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};eP(document.getElementById("root")).render(T.jsx(n4,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:T.jsx(fH,{children:T.jsx(pG,{children:T.jsxs(ZH,{children:[T.jsx(hG,{}),T.jsx(gG,{})]})})})}));export{ri as $,RF as A,us as B,UG as C,ro as D,jF as E,wf as F,KB as G,ln as H,gw as I,kt as J,Xt as K,c$ as L,BI as M,RG as N,yn as O,n_ as P,VF as Q,U as R,oU as S,Bn as T,mU as U,RP as V,ov as W,sm as X,im as Y,om as Z,cG as _,Kc as a,jG as a$,ys as a0,Vr as a1,Bc as a2,LM as a3,Ey as a4,tn as a5,Nt as a6,$n as a7,o0 as a8,Xs as a9,Fq as aA,qq as aB,a_ as aC,Yc as aD,DG as aE,mH as aF,eC as aG,nC as aH,wG as aI,t3 as aJ,ll as aK,i0 as aL,GK as aM,rP as aN,lK as aO,l2 as aP,Cd as aQ,ZO as aR,jp as aS,n3 as aT,r3 as aU,tP as aV,OF as aW,CG as aX,$P as aY,GO as aZ,eU as a_,VO as aa,SH as ab,uU as ac,X as ad,em as ae,QG as af,JH as ag,ve as ah,$I as ai,CF as aj,iO as ak,HE as al,s_ as am,WI as an,SS as ao,be as ap,go as aq,zI as ar,FF as as,LO as at,Tp as au,Oe as av,u0 as aw,a8 as ax,Uq as ay,FG as az,PG as b,WG as b$,$G as b0,BG as b1,nH as b2,zG as b3,DH as b4,AM as b5,eK as b6,o8 as b7,Zq as b8,DF as b9,Y3 as bA,D3 as bB,lr as bC,IG as bD,AG as bE,zE as bF,MH as bG,wy as bH,yt as bI,GG as bJ,Xq as bK,HG as bL,sG as bM,oG as bN,KG as bO,x2 as bP,kM as bQ,R2 as bR,P2 as bS,aG as bT,A2 as bU,iG as bV,h$ as bW,xG as bX,OO as bY,ya as bZ,NH as b_,WF as ba,gU as bb,bi as bc,ZM as bd,ch as be,NG as bf,HO as bg,KO as bh,XF as bi,hU as bj,PH as bk,RH as bl,On as bm,DA as bn,xH as bo,Qp as bp,V3 as bq,P3 as br,TG as bs,uw as bt,ar as bu,Yp as bv,x3 as bw,R3 as bx,Mm as by,EC as bz,s0 as c,CO as c0,eH as c1,AF as c2,dn as c3,Ct as c4,ku as c5,Qy as c6,CH as c7,qG as c8,i_ as c9,IH as d,EH as e,Dt as f,TH as g,Re as h,K as i,T as j,qe as k,ko as l,MG as m,Wq as n,Ys as o,Js as p,Ue as q,S as r,Me as s,GF as t,dl as u,BF as v,HB as w,xe as x,ki as y,Kn as z};
//# sourceMappingURL=index-ByNAQd9J.js.map
