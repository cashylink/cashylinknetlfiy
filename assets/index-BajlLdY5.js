const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-DFf2Fasj.js","./card-D2hJhqI-.js","./BrandLogo-Dn1jMzcD.js","./brandingService-BqW7mk-Z.js","./whatsappService--qyt9eIV.js","./arrow-left-BVUbpV8M.js","./star-fobb1gQT.js","./crown-boDzhgGr.js","./download-D_3I9CMV.js","./zap-BkNBeu5f.js","./circle-check-big-BvPzvsqn.js","./SubscriptionsPage-DQizp7lf.js","./contentService-BAgpTADa.js","./AuthPage-CdAghIZm.js","./TopUpPage-BtNhLyQP.js","./select-cRpGVzzV.js","./AdminTopupsPage-DVQxh6qe.js","./AdminNotificationsPage-BN-0nhF2.js","./label-CgY5njAZ.js","./textarea-Cvc8sCdz.js","./link-BJb21vzu.js","./UserRegisterPage-D0n-Vlbh.js","./alert-i0V4r5-q.js","./wallet-Dg9YtWWF.js","./user-plus-BO7cIBnW.js","./phone-CylL3NjV.js","./store-BITNry5u.js","./UserAccountSetupPage-BkPgfSkZ.js","./DashboardLoginPage-CDIeAWV8.js","./ProtectedDashboard-Do-kwz4x.js","./MasterPinDialog-Dzu-23pe.js","./circle-alert-Cbz1KT_L.js","./profitService-BsJiOlFZ.js","./dollar-sign-BDqmtM9Z.js","./ProtectedUserDashboard-dIQOkXWb.js","./broadcastService-C_SwVw31.js","./MerchantDashboard-rEzXhDBM.js","./dropdown-menu-CLJIY3v9.js","./index-B1OW4tWd.js","./badge-BqG4iaD_.js","./WalletsManagement-_lWZkYzr.js","./progress-uLjsq_1U.js","./square-pen-DK1oGpEC.js","./PendingApprovalPage-C5W5nXPN.js","./freeTrialService-BUM0cki6.js","./ProtectedAdminDashboard-IitlD4IP.js","./ProfileIcon-J1PQyHLH.js","./switch-C4SVCi3r.js","./separator-DOqIUub8.js","./save-COmMuQ3C.js","./users-lg5x3XDt.js","./circle-x-keELdqKL.js","./AuthTestPage-Ie2DdGhd.js","./ProfileSettingsPage-BsK0EQMt.js","./walletSelectionPinService-BIm1XEpT.js","./TransactionsPage-C6VBiazI.js","./MaintenanceDialog-DW_e-0_t.js","./WalletAdditionPage-B97uz4x_.js","./ReferralsPage-8Z0hLPpA.js","./CPanelPage-1HM7mZBm.js","./CPanelLoginPage-DQUck7AY.js","./UserDashboardPage-C_0DGTNn.js"])))=>i.map(i=>d[i]);
var J2=Object.defineProperty;var xI=t=>{throw TypeError(t)};var X2=(t,e,n)=>e in t?J2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _u=(t,e,n)=>X2(t,typeof e!="symbol"?e+"":e,n),zg=(t,e,n)=>e.has(t)||xI("Cannot "+n);var K=(t,e,n)=>(zg(t,e,"read from private field"),n?n.call(t):e.get(t)),at=(t,e,n)=>e.has(t)?xI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ze=(t,e,n,r)=>(zg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gn=(t,e,n)=>(zg(t,e,"access private method"),n);var Bh=(t,e,n,r)=>({set _(s){ze(t,e,s,n)},get _(){return K(t,e,r)}});function Z2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function qx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hx={exports:{}},Rp={},Kx={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh=Symbol.for("react.element"),eL=Symbol.for("react.portal"),tL=Symbol.for("react.fragment"),nL=Symbol.for("react.strict_mode"),rL=Symbol.for("react.profiler"),sL=Symbol.for("react.provider"),iL=Symbol.for("react.context"),oL=Symbol.for("react.forward_ref"),aL=Symbol.for("react.suspense"),lL=Symbol.for("react.memo"),cL=Symbol.for("react.lazy"),RI=Symbol.iterator;function uL(t){return t===null||typeof t!="object"?null:(t=RI&&t[RI]||t["@@iterator"],typeof t=="function"?t:null)}var Gx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qx=Object.assign,Yx={};function Bc(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Gx}Bc.prototype.isReactComponent={};Bc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jx(){}Jx.prototype=Bc.prototype;function d_(t,e,n){this.props=t,this.context=e,this.refs=Yx,this.updater=n||Gx}var h_=d_.prototype=new Jx;h_.constructor=d_;Qx(h_,Bc.prototype);h_.isPureReactComponent=!0;var PI=Array.isArray,Xx=Object.prototype.hasOwnProperty,f_={current:null},Zx={key:!0,ref:!0,__self:!0,__source:!0};function e1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Xx.call(e,r)&&!Zx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:uh,type:t,key:i,ref:o,props:s,_owner:f_.current}}function dL(t,e){return{$$typeof:uh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function m_(t){return typeof t=="object"&&t!==null&&t.$$typeof===uh}function hL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var CI=/\/+/g;function Wg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hL(""+t.key):e.toString(36)}function kf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uh:case eL:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wg(o,0):r,PI(s)?(n="",t!=null&&(n=t.replace(CI,"$&/")+"/"),kf(s,e,n,"",function(c){return c})):s!=null&&(m_(s)&&(s=dL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(CI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",PI(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Wg(i,a);o+=kf(i,e,n,l,s)}else if(l=uL(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Wg(i,a++),o+=kf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zh(t,e,n){if(t==null)return t;var r=[],s=0;return kf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pr={current:null},Nf={transition:null},mL={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:Nf,ReactCurrentOwner:f_};function t1(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:zh,forEach:function(t,e,n){zh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zh(t,function(){e++}),e},toArray:function(t){return zh(t,function(e){return e})||[]},only:function(t){if(!m_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=Bc;nt.Fragment=tL;nt.Profiler=rL;nt.PureComponent=d_;nt.StrictMode=nL;nt.Suspense=aL;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mL;nt.act=t1;nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=f_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xx.call(e,l)&&!Zx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:uh,type:t.type,key:s,ref:i,props:r,_owner:o}};nt.createContext=function(t){return t={$$typeof:iL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sL,_context:t},t.Consumer=t};nt.createElement=e1;nt.createFactory=function(t){var e=e1.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:oL,render:t}};nt.isValidElement=m_;nt.lazy=function(t){return{$$typeof:cL,_payload:{_status:-1,_result:t},_init:fL}};nt.memo=function(t,e){return{$$typeof:lL,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Nf.transition;Nf.transition={};try{t()}finally{Nf.transition=e}};nt.unstable_act=t1;nt.useCallback=function(t,e){return pr.current.useCallback(t,e)};nt.useContext=function(t){return pr.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return pr.current.useDeferredValue(t)};nt.useEffect=function(t,e){return pr.current.useEffect(t,e)};nt.useId=function(){return pr.current.useId()};nt.useImperativeHandle=function(t,e,n){return pr.current.useImperativeHandle(t,e,n)};nt.useInsertionEffect=function(t,e){return pr.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return pr.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return pr.current.useMemo(t,e)};nt.useReducer=function(t,e,n){return pr.current.useReducer(t,e,n)};nt.useRef=function(t){return pr.current.useRef(t)};nt.useState=function(t){return pr.current.useState(t)};nt.useSyncExternalStore=function(t,e,n){return pr.current.useSyncExternalStore(t,e,n)};nt.useTransition=function(){return pr.current.useTransition()};nt.version="18.3.1";Kx.exports=nt;var T=Kx.exports;const U=qx(T),p_=Z2({__proto__:null,default:U},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pL=T,gL=Symbol.for("react.element"),yL=Symbol.for("react.fragment"),vL=Object.prototype.hasOwnProperty,wL=pL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_L={key:!0,ref:!0,__self:!0,__source:!0};function n1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vL.call(e,r)&&!_L.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gL,type:t,key:i,ref:o,props:s,_owner:wL.current}}Rp.Fragment=yL;Rp.jsx=n1;Rp.jsxs=n1;Hx.exports=Rp;var _=Hx.exports,r1={exports:{}},Xr={},s1={exports:{}},i1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,H){var le=j.length;j.push(H);e:for(;0<le;){var ge=le-1>>>1,J=j[ge];if(0<s(J,H))j[ge]=H,j[le]=J,le=ge;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],le=j.pop();if(le!==H){j[0]=le;e:for(var ge=0,J=j.length,M=J>>>1;ge<M;){var Ee=2*(ge+1)-1,De=j[Ee],Qe=Ee+1,Ce=j[Qe];if(0>s(De,le))Qe<J&&0>s(Ce,De)?(j[ge]=Ce,j[Qe]=le,ge=Qe):(j[ge]=De,j[Ee]=le,ge=Ee);else if(Qe<J&&0>s(Ce,le))j[ge]=Ce,j[Qe]=le,ge=Qe;else break e}}return H}function s(j,H){var le=j.sortIndex-H.sortIndex;return le!==0?le:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,S=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(j){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=j)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function R(j){if(p=!1,E(j),!S)if(n(l)!==null)S=!0,ne(k);else{var H=n(c);H!==null&&fe(R,H.startTime-j)}}function k(j,H){S=!1,p&&(p=!1,w(b),b=-1),m=!0;var le=f;try{for(E(H),h=n(l);h!==null&&(!(h.expirationTime>H)||j&&!N());){var ge=h.callback;if(typeof ge=="function"){h.callback=null,f=h.priorityLevel;var J=ge(h.expirationTime<=H);H=t.unstable_now(),typeof J=="function"?h.callback=J:h===n(l)&&r(l),E(H)}else r(l);h=n(l)}if(h!==null)var M=!0;else{var Ee=n(c);Ee!==null&&fe(R,Ee.startTime-H),M=!1}return M}finally{h=null,f=le,m=!1}}var L=!1,x=null,b=-1,A=5,P=-1;function N(){return!(t.unstable_now()-P<A)}function O(){if(x!==null){var j=t.unstable_now();P=j;var H=!0;try{H=x(!0,j)}finally{H?C():(L=!1,x=null)}}else L=!1}var C;if(typeof y=="function")C=function(){y(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,re=$.port2;$.port1.onmessage=O,C=function(){re.postMessage(null)}}else C=function(){v(O,0)};function ne(j){x=j,L||(L=!0,C())}function fe(j,H){b=v(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){S||m||(S=!0,ne(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var le=f;f=H;try{return j()}finally{f=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var le=f;f=j;try{return H()}finally{f=le}},t.unstable_scheduleCallback=function(j,H,le){var ge=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ge+le:ge):le=ge,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=le+J,j={id:d++,callback:H,priorityLevel:j,startTime:le,expirationTime:J,sortIndex:-1},le>ge?(j.sortIndex=le,e(c,j),n(l)===null&&j===n(c)&&(p?(w(b),b=-1):p=!0,fe(R,le-ge))):(j.sortIndex=J,e(l,j),S||m||(S=!0,ne(k))),j},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(j){var H=f;return function(){var le=f;f=H;try{return j.apply(this,arguments)}finally{f=le}}}})(i1);s1.exports=i1;var EL=s1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IL=T,Yr=EL;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o1=new Set,wd={};function cl(t,e){hc(t,e),hc(t+"Capture",e)}function hc(t,e){for(wd[t]=e,t=0;t<e.length;t++)o1.add(e[t])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cv=Object.prototype.hasOwnProperty,SL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kI={},NI={};function TL(t){return cv.call(NI,t)?!0:cv.call(kI,t)?!1:SL.test(t)?NI[t]=!0:(kI[t]=!0,!1)}function bL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AL(t,e,n,r){if(e===null||typeof e>"u"||bL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zn[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zn[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zn[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zn[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zn[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zn[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zn[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zn[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zn[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var g_=/[\-:]([a-z])/g;function y_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(g_,y_);zn[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(g_,y_);zn[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(g_,y_);zn[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zn[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});zn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zn[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function v_(t,e,n,r){var s=zn.hasOwnProperty(e)?zn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AL(e,n,s,r)&&(n=null),r||s===null?TL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Li=IL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wh=Symbol.for("react.element"),Ol=Symbol.for("react.portal"),Ll=Symbol.for("react.fragment"),w_=Symbol.for("react.strict_mode"),uv=Symbol.for("react.profiler"),a1=Symbol.for("react.provider"),l1=Symbol.for("react.context"),__=Symbol.for("react.forward_ref"),dv=Symbol.for("react.suspense"),hv=Symbol.for("react.suspense_list"),E_=Symbol.for("react.memo"),to=Symbol.for("react.lazy"),c1=Symbol.for("react.offscreen"),DI=Symbol.iterator;function Eu(t){return t===null||typeof t!="object"?null:(t=DI&&t[DI]||t["@@iterator"],typeof t=="function"?t:null)}var en=Object.assign,qg;function Fu(t){if(qg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qg=e&&e[1]||""}return`
`+qg+t}var Hg=!1;function Kg(t,e){if(!t||Hg)return"";Hg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fu(t):""}function xL(t){switch(t.tag){case 5:return Fu(t.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 2:case 15:return t=Kg(t.type,!1),t;case 11:return t=Kg(t.type.render,!1),t;case 1:return t=Kg(t.type,!0),t;default:return""}}function fv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ll:return"Fragment";case Ol:return"Portal";case uv:return"Profiler";case w_:return"StrictMode";case dv:return"Suspense";case hv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case l1:return(t.displayName||"Context")+".Consumer";case a1:return(t._context.displayName||"Context")+".Provider";case __:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case E_:return e=t.displayName||null,e!==null?e:fv(t.type)||"Memo";case to:e=t._payload,t=t._init;try{return fv(t(e))}catch{}}return null}function RL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fv(e);case 8:return e===w_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PL(t){var e=u1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qh(t){t._valueTracker||(t._valueTracker=PL(t))}function d1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mv(t,e){var n=e.checked;return en({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function OI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function h1(t,e){e=e.checked,e!=null&&v_(t,"checked",e,!1)}function pv(t,e){h1(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gv(t,e.type,n):e.hasOwnProperty("defaultValue")&&gv(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function LI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gv(t,e,n){(e!=="number"||hm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uu=Array.isArray;function Hl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return en({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function VI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Uu(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function f1(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function MI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hh,p1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hh=Hh||document.createElement("div"),Hh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _d(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CL=["Webkit","ms","Moz","O"];Object.keys(Yu).forEach(function(t){CL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yu[e]=Yu[t]})});function g1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yu.hasOwnProperty(t)&&Yu[t]?(""+e).trim():e+"px"}function y1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=g1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kL=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wv(t,e){if(e){if(kL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function _v(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ev=null;function I_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iv=null,Kl=null,Gl=null;function FI(t){if(t=fh(t)){if(typeof Iv!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Dp(e),Iv(t.stateNode,t.type,e))}}function v1(t){Kl?Gl?Gl.push(t):Gl=[t]:Kl=t}function w1(){if(Kl){var t=Kl,e=Gl;if(Gl=Kl=null,FI(t),e)for(t=0;t<e.length;t++)FI(e[t])}}function _1(t,e){return t(e)}function E1(){}var Gg=!1;function I1(t,e,n){if(Gg)return t(e,n);Gg=!0;try{return _1(t,e,n)}finally{Gg=!1,(Kl!==null||Gl!==null)&&(E1(),w1())}}function Ed(t,e){var n=t.stateNode;if(n===null)return null;var r=Dp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Sv=!1;if(Ti)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){Sv=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{Sv=!1}function NL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ju=!1,fm=null,mm=!1,Tv=null,DL={onError:function(t){Ju=!0,fm=t}};function OL(t,e,n,r,s,i,o,a,l){Ju=!1,fm=null,NL.apply(DL,arguments)}function LL(t,e,n,r,s,i,o,a,l){if(OL.apply(this,arguments),Ju){if(Ju){var c=fm;Ju=!1,fm=null}else throw Error(ae(198));mm||(mm=!0,Tv=c)}}function ul(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function UI(t){if(ul(t)!==t)throw Error(ae(188))}function VL(t){var e=t.alternate;if(!e){if(e=ul(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return UI(s),t;if(i===r)return UI(s),e;i=i.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function T1(t){return t=VL(t),t!==null?b1(t):null}function b1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b1(t);if(e!==null)return e;t=t.sibling}return null}var A1=Yr.unstable_scheduleCallback,jI=Yr.unstable_cancelCallback,ML=Yr.unstable_shouldYield,FL=Yr.unstable_requestPaint,mn=Yr.unstable_now,UL=Yr.unstable_getCurrentPriorityLevel,S_=Yr.unstable_ImmediatePriority,x1=Yr.unstable_UserBlockingPriority,pm=Yr.unstable_NormalPriority,jL=Yr.unstable_LowPriority,R1=Yr.unstable_IdlePriority,Pp=null,Gs=null;function $L(t){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Pp,t,void 0,(t.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:WL,BL=Math.log,zL=Math.LN2;function WL(t){return t>>>=0,t===0?32:31-(BL(t)/zL|0)|0}var Kh=64,Gh=4194304;function ju(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ju(a):(i&=o,i!==0&&(r=ju(i)))}else o=n&~s,o!==0?r=ju(o):i!==0&&(r=ju(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Es(e),s=1<<n,r|=t[n],e&=~s;return r}function qL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Es(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=qL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function bv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P1(){var t=Kh;return Kh<<=1,!(Kh&4194240)&&(Kh=64),t}function Qg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Es(e),t[e]=n}function KL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Es(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function T_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Es(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var It=0;function C1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k1,b_,N1,D1,O1,Av=!1,Qh=[],wo=null,_o=null,Eo=null,Id=new Map,Sd=new Map,ro=[],GL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $I(t,e){switch(t){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Id.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sd.delete(e.pointerId)}}function Su(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fh(e),e!==null&&b_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QL(t,e,n,r,s){switch(e){case"focusin":return wo=Su(wo,t,e,n,r,s),!0;case"dragenter":return _o=Su(_o,t,e,n,r,s),!0;case"mouseover":return Eo=Su(Eo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Id.set(i,Su(Id.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sd.set(i,Su(Sd.get(i)||null,t,e,n,r,s)),!0}return!1}function L1(t){var e=Ia(t.target);if(e!==null){var n=ul(e);if(n!==null){if(e=n.tag,e===13){if(e=S1(n),e!==null){t.blockedOn=e,O1(t.priority,function(){N1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Df(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ev=r,n.target.dispatchEvent(r),Ev=null}else return e=fh(n),e!==null&&b_(e),t.blockedOn=n,!1;e.shift()}return!0}function BI(t,e,n){Df(t)&&n.delete(e)}function YL(){Av=!1,wo!==null&&Df(wo)&&(wo=null),_o!==null&&Df(_o)&&(_o=null),Eo!==null&&Df(Eo)&&(Eo=null),Id.forEach(BI),Sd.forEach(BI)}function Tu(t,e){t.blockedOn===e&&(t.blockedOn=null,Av||(Av=!0,Yr.unstable_scheduleCallback(Yr.unstable_NormalPriority,YL)))}function Td(t){function e(s){return Tu(s,t)}if(0<Qh.length){Tu(Qh[0],t);for(var n=1;n<Qh.length;n++){var r=Qh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wo!==null&&Tu(wo,t),_o!==null&&Tu(_o,t),Eo!==null&&Tu(Eo,t),Id.forEach(e),Sd.forEach(e),n=0;n<ro.length;n++)r=ro[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ro.length&&(n=ro[0],n.blockedOn===null);)L1(n),n.blockedOn===null&&ro.shift()}var Ql=Li.ReactCurrentBatchConfig,ym=!0;function JL(t,e,n,r){var s=It,i=Ql.transition;Ql.transition=null;try{It=1,A_(t,e,n,r)}finally{It=s,Ql.transition=i}}function XL(t,e,n,r){var s=It,i=Ql.transition;Ql.transition=null;try{It=4,A_(t,e,n,r)}finally{It=s,Ql.transition=i}}function A_(t,e,n,r){if(ym){var s=xv(t,e,n,r);if(s===null)iy(t,e,r,vm,n),$I(t,r);else if(QL(s,t,e,n,r))r.stopPropagation();else if($I(t,r),e&4&&-1<GL.indexOf(t)){for(;s!==null;){var i=fh(s);if(i!==null&&k1(i),i=xv(t,e,n,r),i===null&&iy(t,e,r,vm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else iy(t,e,r,null,n)}}var vm=null;function xv(t,e,n,r){if(vm=null,t=I_(r),t=Ia(t),t!==null)if(e=ul(t),e===null)t=null;else if(n=e.tag,n===13){if(t=S1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vm=t,null}function V1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UL()){case S_:return 1;case x1:return 4;case pm:case jL:return 16;case R1:return 536870912;default:return 16}default:return 16}}var fo=null,x_=null,Of=null;function M1(){if(Of)return Of;var t,e=x_,n=e.length,r,s="value"in fo?fo.value:fo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Of=s.slice(t,1<r?1-r:void 0)}function Lf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yh(){return!0}function zI(){return!1}function Zr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yh:zI,this.isPropagationStopped=zI,this}return en(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yh)},persist:function(){},isPersistent:Yh}),e}var zc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R_=Zr(zc),hh=en({},zc,{view:0,detail:0}),ZL=Zr(hh),Yg,Jg,bu,Cp=en({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bu&&(bu&&t.type==="mousemove"?(Yg=t.screenX-bu.screenX,Jg=t.screenY-bu.screenY):Jg=Yg=0,bu=t),Yg)},movementY:function(t){return"movementY"in t?t.movementY:Jg}}),WI=Zr(Cp),eV=en({},Cp,{dataTransfer:0}),tV=Zr(eV),nV=en({},hh,{relatedTarget:0}),Xg=Zr(nV),rV=en({},zc,{animationName:0,elapsedTime:0,pseudoElement:0}),sV=Zr(rV),iV=en({},zc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oV=Zr(iV),aV=en({},zc,{data:0}),qI=Zr(aV),lV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uV[t])?!!e[t]:!1}function P_(){return dV}var hV=en({},hh,{key:function(t){if(t.key){var e=lV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P_,charCode:function(t){return t.type==="keypress"?Lf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fV=Zr(hV),mV=en({},Cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HI=Zr(mV),pV=en({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P_}),gV=Zr(pV),yV=en({},zc,{propertyName:0,elapsedTime:0,pseudoElement:0}),vV=Zr(yV),wV=en({},Cp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_V=Zr(wV),EV=[9,13,27,32],C_=Ti&&"CompositionEvent"in window,Xu=null;Ti&&"documentMode"in document&&(Xu=document.documentMode);var IV=Ti&&"TextEvent"in window&&!Xu,F1=Ti&&(!C_||Xu&&8<Xu&&11>=Xu),KI=" ",GI=!1;function U1(t,e){switch(t){case"keyup":return EV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vl=!1;function SV(t,e){switch(t){case"compositionend":return j1(e);case"keypress":return e.which!==32?null:(GI=!0,KI);case"textInput":return t=e.data,t===KI&&GI?null:t;default:return null}}function TV(t,e){if(Vl)return t==="compositionend"||!C_&&U1(t,e)?(t=M1(),Of=x_=fo=null,Vl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return F1&&e.locale!=="ko"?null:e.data;default:return null}}var bV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bV[t.type]:e==="textarea"}function $1(t,e,n,r){v1(r),e=wm(e,"onChange"),0<e.length&&(n=new R_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zu=null,bd=null;function AV(t){X1(t,0)}function kp(t){var e=Ul(t);if(d1(e))return t}function xV(t,e){if(t==="change")return e}var B1=!1;if(Ti){var Zg;if(Ti){var ey="oninput"in document;if(!ey){var YI=document.createElement("div");YI.setAttribute("oninput","return;"),ey=typeof YI.oninput=="function"}Zg=ey}else Zg=!1;B1=Zg&&(!document.documentMode||9<document.documentMode)}function JI(){Zu&&(Zu.detachEvent("onpropertychange",z1),bd=Zu=null)}function z1(t){if(t.propertyName==="value"&&kp(bd)){var e=[];$1(e,bd,t,I_(t)),I1(AV,e)}}function RV(t,e,n){t==="focusin"?(JI(),Zu=e,bd=n,Zu.attachEvent("onpropertychange",z1)):t==="focusout"&&JI()}function PV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kp(bd)}function CV(t,e){if(t==="click")return kp(e)}function kV(t,e){if(t==="input"||t==="change")return kp(e)}function NV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:NV;function Ad(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!cv.call(e,s)||!bs(t[s],e[s]))return!1}return!0}function XI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ZI(t,e){var n=XI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=XI(n)}}function W1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?W1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q1(){for(var t=window,e=hm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hm(t.document)}return e}function k_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DV(t){var e=q1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&W1(n.ownerDocument.documentElement,n)){if(r!==null&&k_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ZI(n,i);var o=ZI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OV=Ti&&"documentMode"in document&&11>=document.documentMode,Ml=null,Rv=null,ed=null,Pv=!1;function eS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pv||Ml==null||Ml!==hm(r)||(r=Ml,"selectionStart"in r&&k_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ed&&Ad(ed,r)||(ed=r,r=wm(Rv,"onSelect"),0<r.length&&(e=new R_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ml)))}function Jh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fl={animationend:Jh("Animation","AnimationEnd"),animationiteration:Jh("Animation","AnimationIteration"),animationstart:Jh("Animation","AnimationStart"),transitionend:Jh("Transition","TransitionEnd")},ty={},H1={};Ti&&(H1=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function Np(t){if(ty[t])return ty[t];if(!Fl[t])return t;var e=Fl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in H1)return ty[t]=e[n];return t}var K1=Np("animationend"),G1=Np("animationiteration"),Q1=Np("animationstart"),Y1=Np("transitionend"),J1=new Map,tS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(t,e){J1.set(t,e),cl(e,[t])}for(var ny=0;ny<tS.length;ny++){var ry=tS[ny],LV=ry.toLowerCase(),VV=ry[0].toUpperCase()+ry.slice(1);Ko(LV,"on"+VV)}Ko(K1,"onAnimationEnd");Ko(G1,"onAnimationIteration");Ko(Q1,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(Y1,"onTransitionEnd");hc("onMouseEnter",["mouseout","mouseover"]);hc("onMouseLeave",["mouseout","mouseover"]);hc("onPointerEnter",["pointerout","pointerover"]);hc("onPointerLeave",["pointerout","pointerover"]);cl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cl("onBeforeInput",["compositionend","keypress","textInput","paste"]);cl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MV=new Set("cancel close invalid load scroll toggle".split(" ").concat($u));function nS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LL(r,e,void 0,t),t.currentTarget=null}function X1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;nS(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;nS(s,a,c),i=l}}}if(mm)throw t=Tv,mm=!1,Tv=null,t}function Mt(t,e){var n=e[Ov];n===void 0&&(n=e[Ov]=new Set);var r=t+"__bubble";n.has(r)||(Z1(e,t,2,!1),n.add(r))}function sy(t,e,n){var r=0;e&&(r|=4),Z1(n,t,r,e)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function xd(t){if(!t[Xh]){t[Xh]=!0,o1.forEach(function(n){n!=="selectionchange"&&(MV.has(n)||sy(n,!1,t),sy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xh]||(e[Xh]=!0,sy("selectionchange",!1,e))}}function Z1(t,e,n,r){switch(V1(e)){case 1:var s=JL;break;case 4:s=XL;break;default:s=A_}n=s.bind(null,e,n,t),s=void 0,!Sv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function iy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ia(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}I1(function(){var c=i,d=I_(n),h=[];e:{var f=J1.get(t);if(f!==void 0){var m=R_,S=t;switch(t){case"keypress":if(Lf(n)===0)break e;case"keydown":case"keyup":m=fV;break;case"focusin":S="focus",m=Xg;break;case"focusout":S="blur",m=Xg;break;case"beforeblur":case"afterblur":m=Xg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=WI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=tV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=gV;break;case K1:case G1:case Q1:m=sV;break;case Y1:m=vV;break;case"scroll":m=ZL;break;case"wheel":m=_V;break;case"copy":case"cut":case"paste":m=oV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=HI}var p=(e&4)!==0,v=!p&&t==="scroll",w=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,E;y!==null;){E=y;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,w!==null&&(R=Ed(y,w),R!=null&&p.push(Rd(y,R,E)))),v)break;y=y.return}0<p.length&&(f=new m(f,S,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Ev&&(S=n.relatedTarget||n.fromElement)&&(Ia(S)||S[bi]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(S=n.relatedTarget||n.toElement,m=c,S=S?Ia(S):null,S!==null&&(v=ul(S),S!==v||S.tag!==5&&S.tag!==6)&&(S=null)):(m=null,S=c),m!==S)){if(p=WI,R="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=HI,R="onPointerLeave",w="onPointerEnter",y="pointer"),v=m==null?f:Ul(m),E=S==null?f:Ul(S),f=new p(R,y+"leave",m,n,d),f.target=v,f.relatedTarget=E,R=null,Ia(d)===c&&(p=new p(w,y+"enter",S,n,d),p.target=E,p.relatedTarget=v,R=p),v=R,m&&S)t:{for(p=m,w=S,y=0,E=p;E;E=vl(E))y++;for(E=0,R=w;R;R=vl(R))E++;for(;0<y-E;)p=vl(p),y--;for(;0<E-y;)w=vl(w),E--;for(;y--;){if(p===w||w!==null&&p===w.alternate)break t;p=vl(p),w=vl(w)}p=null}else p=null;m!==null&&rS(h,f,m,p,!1),S!==null&&v!==null&&rS(h,v,S,p,!0)}}e:{if(f=c?Ul(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=xV;else if(QI(f))if(B1)k=kV;else{k=PV;var L=RV}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=CV);if(k&&(k=k(t,c))){$1(h,k,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&gv(f,"number",f.value)}switch(L=c?Ul(c):window,t){case"focusin":(QI(L)||L.contentEditable==="true")&&(Ml=L,Rv=c,ed=null);break;case"focusout":ed=Rv=Ml=null;break;case"mousedown":Pv=!0;break;case"contextmenu":case"mouseup":case"dragend":Pv=!1,eS(h,n,d);break;case"selectionchange":if(OV)break;case"keydown":case"keyup":eS(h,n,d)}var x;if(C_)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vl?U1(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(F1&&n.locale!=="ko"&&(Vl||b!=="onCompositionStart"?b==="onCompositionEnd"&&Vl&&(x=M1()):(fo=d,x_="value"in fo?fo.value:fo.textContent,Vl=!0)),L=wm(c,b),0<L.length&&(b=new qI(b,t,null,n,d),h.push({event:b,listeners:L}),x?b.data=x:(x=j1(n),x!==null&&(b.data=x)))),(x=IV?SV(t,n):TV(t,n))&&(c=wm(c,"onBeforeInput"),0<c.length&&(d=new qI("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=x))}X1(h,e)})}function Rd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ed(t,n),i!=null&&r.unshift(Rd(t,i,s)),i=Ed(t,e),i!=null&&r.push(Rd(t,i,s))),t=t.return}return r}function vl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rS(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ed(n,i),l!=null&&o.unshift(Rd(n,l,a))):s||(l=Ed(n,i),l!=null&&o.push(Rd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FV=/\r\n?/g,UV=/\u0000|\uFFFD/g;function sS(t){return(typeof t=="string"?t:""+t).replace(FV,`
`).replace(UV,"")}function Zh(t,e,n){if(e=sS(e),sS(t)!==e&&n)throw Error(ae(425))}function _m(){}var Cv=null,kv=null;function Nv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dv=typeof setTimeout=="function"?setTimeout:void 0,jV=typeof clearTimeout=="function"?clearTimeout:void 0,iS=typeof Promise=="function"?Promise:void 0,$V=typeof queueMicrotask=="function"?queueMicrotask:typeof iS<"u"?function(t){return iS.resolve(null).then(t).catch(BV)}:Dv;function BV(t){setTimeout(function(){throw t})}function oy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Td(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Td(e)}function Io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),Bs="__reactFiber$"+Wc,Pd="__reactProps$"+Wc,bi="__reactContainer$"+Wc,Ov="__reactEvents$"+Wc,zV="__reactListeners$"+Wc,WV="__reactHandles$"+Wc;function Ia(t){var e=t[Bs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bi]||n[Bs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oS(t);t!==null;){if(n=t[Bs])return n;t=oS(t)}return e}t=n,n=t.parentNode}return null}function fh(t){return t=t[Bs]||t[bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ul(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Dp(t){return t[Pd]||null}var Lv=[],jl=-1;function Go(t){return{current:t}}function Ft(t){0>jl||(t.current=Lv[jl],Lv[jl]=null,jl--)}function Dt(t,e){jl++,Lv[jl]=t.current,t.current=e}var Vo={},sr=Go(Vo),Pr=Go(!1),Ka=Vo;function fc(t,e){var n=t.type.contextTypes;if(!n)return Vo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Cr(t){return t=t.childContextTypes,t!=null}function Em(){Ft(Pr),Ft(sr)}function aS(t,e,n){if(sr.current!==Vo)throw Error(ae(168));Dt(sr,e),Dt(Pr,n)}function eR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,RL(t)||"Unknown",s));return en({},n,r)}function Im(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vo,Ka=sr.current,Dt(sr,t),Dt(Pr,Pr.current),!0}function lS(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=eR(t,e,Ka),r.__reactInternalMemoizedMergedChildContext=t,Ft(Pr),Ft(sr),Dt(sr,t)):Ft(Pr),Dt(Pr,n)}var hi=null,Op=!1,ay=!1;function tR(t){hi===null?hi=[t]:hi.push(t)}function qV(t){Op=!0,tR(t)}function Qo(){if(!ay&&hi!==null){ay=!0;var t=0,e=It;try{var n=hi;for(It=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hi=null,Op=!1}catch(s){throw hi!==null&&(hi=hi.slice(t+1)),A1(S_,Qo),s}finally{It=e,ay=!1}}return null}var $l=[],Bl=0,Sm=null,Tm=0,rs=[],ss=0,Ga=null,pi=1,gi="";function la(t,e){$l[Bl++]=Tm,$l[Bl++]=Sm,Sm=t,Tm=e}function nR(t,e,n){rs[ss++]=pi,rs[ss++]=gi,rs[ss++]=Ga,Ga=t;var r=pi;t=gi;var s=32-Es(r)-1;r&=~(1<<s),n+=1;var i=32-Es(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pi=1<<32-Es(e)+s|n<<s|r,gi=i+t}else pi=1<<i|n<<s|r,gi=t}function N_(t){t.return!==null&&(la(t,1),nR(t,1,0))}function D_(t){for(;t===Sm;)Sm=$l[--Bl],$l[Bl]=null,Tm=$l[--Bl],$l[Bl]=null;for(;t===Ga;)Ga=rs[--ss],rs[ss]=null,gi=rs[--ss],rs[ss]=null,pi=rs[--ss],rs[ss]=null}var Hr=null,zr=null,Bt=!1,vs=null;function rR(t,e){var n=is(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hr=t,zr=Io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hr=t,zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ga!==null?{id:pi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=is(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hr=t,zr=null,!0):!1;default:return!1}}function Vv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mv(t){if(Bt){var e=zr;if(e){var n=e;if(!cS(t,e)){if(Vv(t))throw Error(ae(418));e=Io(n.nextSibling);var r=Hr;e&&cS(t,e)?rR(r,n):(t.flags=t.flags&-4097|2,Bt=!1,Hr=t)}}else{if(Vv(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Bt=!1,Hr=t}}}function uS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hr=t}function ef(t){if(t!==Hr)return!1;if(!Bt)return uS(t),Bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nv(t.type,t.memoizedProps)),e&&(e=zr)){if(Vv(t))throw sR(),Error(ae(418));for(;e;)rR(t,e),e=Io(e.nextSibling)}if(uS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zr=Io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zr=null}}else zr=Hr?Io(t.stateNode.nextSibling):null;return!0}function sR(){for(var t=zr;t;)t=Io(t.nextSibling)}function mc(){zr=Hr=null,Bt=!1}function O_(t){vs===null?vs=[t]:vs.push(t)}var HV=Li.ReactCurrentBatchConfig;function Au(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function tf(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dS(t){var e=t._init;return e(t._payload)}function iR(t){function e(w,y){if(t){var E=w.deletions;E===null?(w.deletions=[y],w.flags|=16):E.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=Ao(w,y),w.index=0,w.sibling=null,w}function i(w,y,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<y?(w.flags|=2,y):E):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,y,E,R){return y===null||y.tag!==6?(y=my(E,w.mode,R),y.return=w,y):(y=s(y,E),y.return=w,y)}function l(w,y,E,R){var k=E.type;return k===Ll?d(w,y,E.props.children,R,E.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===to&&dS(k)===y.type)?(R=s(y,E.props),R.ref=Au(w,y,E),R.return=w,R):(R=Bf(E.type,E.key,E.props,null,w.mode,R),R.ref=Au(w,y,E),R.return=w,R)}function c(w,y,E,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=py(E,w.mode,R),y.return=w,y):(y=s(y,E.children||[]),y.return=w,y)}function d(w,y,E,R,k){return y===null||y.tag!==7?(y=Ba(E,w.mode,R,k),y.return=w,y):(y=s(y,E),y.return=w,y)}function h(w,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=my(""+y,w.mode,E),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wh:return E=Bf(y.type,y.key,y.props,null,w.mode,E),E.ref=Au(w,null,y),E.return=w,E;case Ol:return y=py(y,w.mode,E),y.return=w,y;case to:var R=y._init;return h(w,R(y._payload),E)}if(Uu(y)||Eu(y))return y=Ba(y,w.mode,E,null),y.return=w,y;tf(w,y)}return null}function f(w,y,E,R){var k=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return k!==null?null:a(w,y,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wh:return E.key===k?l(w,y,E,R):null;case Ol:return E.key===k?c(w,y,E,R):null;case to:return k=E._init,f(w,y,k(E._payload),R)}if(Uu(E)||Eu(E))return k!==null?null:d(w,y,E,R,null);tf(w,E)}return null}function m(w,y,E,R,k){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(E)||null,a(y,w,""+R,k);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Wh:return w=w.get(R.key===null?E:R.key)||null,l(y,w,R,k);case Ol:return w=w.get(R.key===null?E:R.key)||null,c(y,w,R,k);case to:var L=R._init;return m(w,y,E,L(R._payload),k)}if(Uu(R)||Eu(R))return w=w.get(E)||null,d(y,w,R,k,null);tf(y,R)}return null}function S(w,y,E,R){for(var k=null,L=null,x=y,b=y=0,A=null;x!==null&&b<E.length;b++){x.index>b?(A=x,x=null):A=x.sibling;var P=f(w,x,E[b],R);if(P===null){x===null&&(x=A);break}t&&x&&P.alternate===null&&e(w,x),y=i(P,y,b),L===null?k=P:L.sibling=P,L=P,x=A}if(b===E.length)return n(w,x),Bt&&la(w,b),k;if(x===null){for(;b<E.length;b++)x=h(w,E[b],R),x!==null&&(y=i(x,y,b),L===null?k=x:L.sibling=x,L=x);return Bt&&la(w,b),k}for(x=r(w,x);b<E.length;b++)A=m(x,w,b,E[b],R),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?b:A.key),y=i(A,y,b),L===null?k=A:L.sibling=A,L=A);return t&&x.forEach(function(N){return e(w,N)}),Bt&&la(w,b),k}function p(w,y,E,R){var k=Eu(E);if(typeof k!="function")throw Error(ae(150));if(E=k.call(E),E==null)throw Error(ae(151));for(var L=k=null,x=y,b=y=0,A=null,P=E.next();x!==null&&!P.done;b++,P=E.next()){x.index>b?(A=x,x=null):A=x.sibling;var N=f(w,x,P.value,R);if(N===null){x===null&&(x=A);break}t&&x&&N.alternate===null&&e(w,x),y=i(N,y,b),L===null?k=N:L.sibling=N,L=N,x=A}if(P.done)return n(w,x),Bt&&la(w,b),k;if(x===null){for(;!P.done;b++,P=E.next())P=h(w,P.value,R),P!==null&&(y=i(P,y,b),L===null?k=P:L.sibling=P,L=P);return Bt&&la(w,b),k}for(x=r(w,x);!P.done;b++,P=E.next())P=m(x,w,b,P.value,R),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?b:P.key),y=i(P,y,b),L===null?k=P:L.sibling=P,L=P);return t&&x.forEach(function(O){return e(w,O)}),Bt&&la(w,b),k}function v(w,y,E,R){if(typeof E=="object"&&E!==null&&E.type===Ll&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Wh:e:{for(var k=E.key,L=y;L!==null;){if(L.key===k){if(k=E.type,k===Ll){if(L.tag===7){n(w,L.sibling),y=s(L,E.props.children),y.return=w,w=y;break e}}else if(L.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===to&&dS(k)===L.type){n(w,L.sibling),y=s(L,E.props),y.ref=Au(w,L,E),y.return=w,w=y;break e}n(w,L);break}else e(w,L);L=L.sibling}E.type===Ll?(y=Ba(E.props.children,w.mode,R,E.key),y.return=w,w=y):(R=Bf(E.type,E.key,E.props,null,w.mode,R),R.ref=Au(w,y,E),R.return=w,w=R)}return o(w);case Ol:e:{for(L=E.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(w,y.sibling),y=s(y,E.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=py(E,w.mode,R),y.return=w,w=y}return o(w);case to:return L=E._init,v(w,y,L(E._payload),R)}if(Uu(E))return S(w,y,E,R);if(Eu(E))return p(w,y,E,R);tf(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,E),y.return=w,w=y):(n(w,y),y=my(E,w.mode,R),y.return=w,w=y),o(w)):n(w,y)}return v}var pc=iR(!0),oR=iR(!1),bm=Go(null),Am=null,zl=null,L_=null;function V_(){L_=zl=Am=null}function M_(t){var e=bm.current;Ft(bm),t._currentValue=e}function Fv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yl(t,e){Am=t,L_=zl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(br=!0),t.firstContext=null)}function ls(t){var e=t._currentValue;if(L_!==t)if(t={context:t,memoizedValue:e,next:null},zl===null){if(Am===null)throw Error(ae(308));zl=t,Am.dependencies={lanes:0,firstContext:t}}else zl=zl.next=t;return e}var Sa=null;function F_(t){Sa===null?Sa=[t]:Sa.push(t)}function aR(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,F_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ai(t,r)}function Ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var no=!1;function U_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function So(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ai(t,n)}return s=r.interleaved,s===null?(e.next=e,F_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ai(t,n)}function Vf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,T_(t,n)}}function hS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xm(t,e,n,r){var s=t.updateQueue;no=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,p=a;switch(f=e,m=n,p.tag){case 1:if(S=p.payload,typeof S=="function"){h=S.call(m,h,f);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=p.payload,f=typeof S=="function"?S.call(m,h,f):S,f==null)break e;h=en({},h,f);break e;case 2:no=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ya|=o,t.lanes=o,t.memoizedState=h}}function fS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var mh={},Qs=Go(mh),Cd=Go(mh),kd=Go(mh);function Ta(t){if(t===mh)throw Error(ae(174));return t}function j_(t,e){switch(Dt(kd,e),Dt(Cd,t),Dt(Qs,mh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vv(e,t)}Ft(Qs),Dt(Qs,e)}function gc(){Ft(Qs),Ft(Cd),Ft(kd)}function cR(t){Ta(kd.current);var e=Ta(Qs.current),n=vv(e,t.type);e!==n&&(Dt(Cd,t),Dt(Qs,n))}function $_(t){Cd.current===t&&(Ft(Qs),Ft(Cd))}var Jt=Go(0);function Rm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ly=[];function B_(){for(var t=0;t<ly.length;t++)ly[t]._workInProgressVersionPrimary=null;ly.length=0}var Mf=Li.ReactCurrentDispatcher,cy=Li.ReactCurrentBatchConfig,Qa=0,Zt=null,An=null,Ln=null,Pm=!1,td=!1,Nd=0,KV=0;function Qn(){throw Error(ae(321))}function z_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function W_(t,e,n,r,s,i){if(Qa=i,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mf.current=t===null||t.memoizedState===null?JV:XV,t=n(r,s),td){i=0;do{if(td=!1,Nd=0,25<=i)throw Error(ae(301));i+=1,Ln=An=null,e.updateQueue=null,Mf.current=ZV,t=n(r,s)}while(td)}if(Mf.current=Cm,e=An!==null&&An.next!==null,Qa=0,Ln=An=Zt=null,Pm=!1,e)throw Error(ae(300));return t}function q_(){var t=Nd!==0;return Nd=0,t}function Vs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Zt.memoizedState=Ln=t:Ln=Ln.next=t,Ln}function cs(){if(An===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var e=Ln===null?Zt.memoizedState:Ln.next;if(e!==null)Ln=e,An=t;else{if(t===null)throw Error(ae(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Ln===null?Zt.memoizedState=Ln=t:Ln=Ln.next=t}return Ln}function Dd(t,e){return typeof e=="function"?e(t):e}function uy(t){var e=cs(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=An,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Qa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Zt.lanes|=d,Ya|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,bs(r,e.memoizedState)||(br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Zt.lanes|=i,Ya|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dy(t){var e=cs(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bs(i,e.memoizedState)||(br=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uR(){}function dR(t,e){var n=Zt,r=cs(),s=e(),i=!bs(r.memoizedState,s);if(i&&(r.memoizedState=s,br=!0),r=r.queue,H_(mR.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ln!==null&&Ln.memoizedState.tag&1){if(n.flags|=2048,Od(9,fR.bind(null,n,r,s,e),void 0,null),Mn===null)throw Error(ae(349));Qa&30||hR(n,e,s)}return s}function hR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fR(t,e,n,r){e.value=n,e.getSnapshot=r,pR(e)&&gR(t)}function mR(t,e,n){return n(function(){pR(e)&&gR(t)})}function pR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function gR(t){var e=Ai(t,1);e!==null&&Is(e,t,1,-1)}function mS(t){var e=Vs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dd,lastRenderedState:t},e.queue=t,t=t.dispatch=YV.bind(null,Zt,t),[e.memoizedState,t]}function Od(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yR(){return cs().memoizedState}function Ff(t,e,n,r){var s=Vs();Zt.flags|=t,s.memoizedState=Od(1|e,n,void 0,r===void 0?null:r)}function Lp(t,e,n,r){var s=cs();r=r===void 0?null:r;var i=void 0;if(An!==null){var o=An.memoizedState;if(i=o.destroy,r!==null&&z_(r,o.deps)){s.memoizedState=Od(e,n,i,r);return}}Zt.flags|=t,s.memoizedState=Od(1|e,n,i,r)}function pS(t,e){return Ff(8390656,8,t,e)}function H_(t,e){return Lp(2048,8,t,e)}function vR(t,e){return Lp(4,2,t,e)}function wR(t,e){return Lp(4,4,t,e)}function _R(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ER(t,e,n){return n=n!=null?n.concat([t]):null,Lp(4,4,_R.bind(null,e,t),n)}function K_(){}function IR(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&z_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function SR(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&z_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function TR(t,e,n){return Qa&21?(bs(n,e)||(n=P1(),Zt.lanes|=n,Ya|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,br=!0),t.memoizedState=n)}function GV(t,e){var n=It;It=n!==0&&4>n?n:4,t(!0);var r=cy.transition;cy.transition={};try{t(!1),e()}finally{It=n,cy.transition=r}}function bR(){return cs().memoizedState}function QV(t,e,n){var r=bo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AR(t))xR(e,n);else if(n=aR(t,e,n,r),n!==null){var s=fr();Is(n,t,r,s),RR(n,e,r)}}function YV(t,e,n){var r=bo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AR(t))xR(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,bs(a,o)){var l=e.interleaved;l===null?(s.next=s,F_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=aR(t,e,s,r),n!==null&&(s=fr(),Is(n,t,r,s),RR(n,e,r))}}function AR(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function xR(t,e){td=Pm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,T_(t,n)}}var Cm={readContext:ls,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},JV={readContext:ls,useCallback:function(t,e){return Vs().memoizedState=[t,e===void 0?null:e],t},useContext:ls,useEffect:pS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ff(4194308,4,_R.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ff(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ff(4,2,t,e)},useMemo:function(t,e){var n=Vs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QV.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=Vs();return t={current:t},e.memoizedState=t},useState:mS,useDebugValue:K_,useDeferredValue:function(t){return Vs().memoizedState=t},useTransition:function(){var t=mS(!1),e=t[0];return t=GV.bind(null,t[1]),Vs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,s=Vs();if(Bt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Mn===null)throw Error(ae(349));Qa&30||hR(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,pS(mR.bind(null,r,i,t),[t]),r.flags|=2048,Od(9,fR.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Vs(),e=Mn.identifierPrefix;if(Bt){var n=gi,r=pi;n=(r&~(1<<32-Es(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XV={readContext:ls,useCallback:IR,useContext:ls,useEffect:H_,useImperativeHandle:ER,useInsertionEffect:vR,useLayoutEffect:wR,useMemo:SR,useReducer:uy,useRef:yR,useState:function(){return uy(Dd)},useDebugValue:K_,useDeferredValue:function(t){var e=cs();return TR(e,An.memoizedState,t)},useTransition:function(){var t=uy(Dd)[0],e=cs().memoizedState;return[t,e]},useMutableSource:uR,useSyncExternalStore:dR,useId:bR,unstable_isNewReconciler:!1},ZV={readContext:ls,useCallback:IR,useContext:ls,useEffect:H_,useImperativeHandle:ER,useInsertionEffect:vR,useLayoutEffect:wR,useMemo:SR,useReducer:dy,useRef:yR,useState:function(){return dy(Dd)},useDebugValue:K_,useDeferredValue:function(t){var e=cs();return An===null?e.memoizedState=t:TR(e,An.memoizedState,t)},useTransition:function(){var t=dy(Dd)[0],e=cs().memoizedState;return[t,e]},useMutableSource:uR,useSyncExternalStore:dR,useId:bR,unstable_isNewReconciler:!1};function fs(t,e){if(t&&t.defaultProps){e=en({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:en({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vp={isMounted:function(t){return(t=t._reactInternals)?ul(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fr(),s=bo(t),i=wi(r,s);i.payload=e,n!=null&&(i.callback=n),e=So(t,i,s),e!==null&&(Is(e,t,s,r),Vf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fr(),s=bo(t),i=wi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=So(t,i,s),e!==null&&(Is(e,t,s,r),Vf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fr(),r=bo(t),s=wi(n,r);s.tag=2,e!=null&&(s.callback=e),e=So(t,s,r),e!==null&&(Is(e,t,r,n),Vf(e,t,r))}};function gS(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ad(n,r)||!Ad(s,i):!0}function PR(t,e,n){var r=!1,s=Vo,i=e.contextType;return typeof i=="object"&&i!==null?i=ls(i):(s=Cr(e)?Ka:sr.current,r=e.contextTypes,i=(r=r!=null)?fc(t,s):Vo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vp.enqueueReplaceState(e,e.state,null)}function jv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},U_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ls(i):(i=Cr(e)?Ka:sr.current,s.context=fc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Uv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Vp.enqueueReplaceState(s,s.state,null),xm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yc(t,e){try{var n="",r=e;do n+=xL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function hy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $v(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eM=typeof WeakMap=="function"?WeakMap:Map;function CR(t,e,n){n=wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nm||(Nm=!0,Jv=r),$v(t,e)},n}function kR(t,e,n){n=wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){$v(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$v(t,e),typeof r!="function"&&(To===null?To=new Set([this]):To.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mM.bind(null,t,e,n),e.then(t,t))}function wS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _S(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wi(-1,1),e.tag=2,So(n,e,1))),n.lanes|=1),t)}var tM=Li.ReactCurrentOwner,br=!1;function ur(t,e,n,r){e.child=t===null?oR(e,null,n,r):pc(e,t.child,n,r)}function ES(t,e,n,r,s){n=n.render;var i=e.ref;return Yl(e,s),r=W_(t,e,n,r,i,s),n=q_(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xi(t,e,s)):(Bt&&n&&N_(e),e.flags|=1,ur(t,e,r,s),e.child)}function IS(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!t0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,NR(t,e,i,r,s)):(t=Bf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ad,n(o,r)&&t.ref===e.ref)return xi(t,e,s)}return e.flags|=1,t=Ao(i,r),t.ref=e.ref,t.return=e,e.child=t}function NR(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ad(i,r)&&t.ref===e.ref)if(br=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(br=!0);else return e.lanes=t.lanes,xi(t,e,s)}return Bv(t,e,n,r,s)}function DR(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(ql,Mr),Mr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(ql,Mr),Mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Dt(ql,Mr),Mr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Dt(ql,Mr),Mr|=r;return ur(t,e,s,n),e.child}function OR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bv(t,e,n,r,s){var i=Cr(n)?Ka:sr.current;return i=fc(e,i),Yl(e,s),n=W_(t,e,n,r,i,s),r=q_(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xi(t,e,s)):(Bt&&r&&N_(e),e.flags|=1,ur(t,e,n,s),e.child)}function SS(t,e,n,r,s){if(Cr(n)){var i=!0;Im(e)}else i=!1;if(Yl(e,s),e.stateNode===null)Uf(t,e),PR(e,n,r),jv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ls(c):(c=Cr(n)?Ka:sr.current,c=fc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&yS(e,o,r,c),no=!1;var f=e.memoizedState;o.state=f,xm(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Pr.current||no?(typeof d=="function"&&(Uv(e,n,d,r),l=e.memoizedState),(a=no||gS(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fs(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ls(l):(l=Cr(n)?Ka:sr.current,l=fc(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&yS(e,o,r,l),no=!1,f=e.memoizedState,o.state=f,xm(e,r,o,s);var S=e.memoizedState;a!==h||f!==S||Pr.current||no?(typeof m=="function"&&(Uv(e,n,m,r),S=e.memoizedState),(c=no||gS(e,n,c,r,f,S,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return zv(t,e,n,r,i,s)}function zv(t,e,n,r,s,i){OR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&lS(e,n,!1),xi(t,e,i);r=e.stateNode,tM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pc(e,t.child,null,i),e.child=pc(e,null,a,i)):ur(t,e,a,i),e.memoizedState=r.state,s&&lS(e,n,!0),e.child}function LR(t){var e=t.stateNode;e.pendingContext?aS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aS(t,e.context,!1),j_(t,e.containerInfo)}function TS(t,e,n,r,s){return mc(),O_(s),e.flags|=256,ur(t,e,n,r),e.child}var Wv={dehydrated:null,treeContext:null,retryLane:0};function qv(t){return{baseLanes:t,cachePool:null,transitions:null}}function VR(t,e,n){var r=e.pendingProps,s=Jt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dt(Jt,s&1),t===null)return Mv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Up(o,r,0,null),t=Ba(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qv(n),e.memoizedState=Wv,t):G_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return nM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ao(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ao(a,i):(i=Ba(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Wv,r}return i=t.child,t=i.sibling,r=Ao(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function G_(t,e){return e=Up({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nf(t,e,n,r){return r!==null&&O_(r),pc(e,t.child,null,n),t=G_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=hy(Error(ae(422))),nf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Up({mode:"visible",children:r.children},s,0,null),i=Ba(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&pc(e,t.child,null,o),e.child.memoizedState=qv(o),e.memoizedState=Wv,i);if(!(e.mode&1))return nf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ae(419)),r=hy(i,r,void 0),nf(t,e,o,r)}if(a=(o&t.childLanes)!==0,br||a){if(r=Mn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ai(t,s),Is(r,t,s,-1))}return e0(),r=hy(Error(ae(421))),nf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zr=Io(s.nextSibling),Hr=e,Bt=!0,vs=null,t!==null&&(rs[ss++]=pi,rs[ss++]=gi,rs[ss++]=Ga,pi=t.id,gi=t.overflow,Ga=e),e=G_(e,r.children),e.flags|=4096,e)}function bS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fv(t.return,e,n)}function fy(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function MR(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ur(t,e,r.children,n),r=Jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bS(t,n,e);else if(t.tag===19)bS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Jt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),fy(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}fy(e,!0,n,null,i);break;case"together":fy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ya|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ao(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ao(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rM(t,e,n){switch(e.tag){case 3:LR(e),mc();break;case 5:cR(e);break;case 1:Cr(e.type)&&Im(e);break;case 4:j_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Dt(bm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Jt,Jt.current&1),e.flags|=128,null):n&e.child.childLanes?VR(t,e,n):(Dt(Jt,Jt.current&1),t=xi(t,e,n),t!==null?t.sibling:null);Dt(Jt,Jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return MR(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dt(Jt,Jt.current),r)break;return null;case 22:case 23:return e.lanes=0,DR(t,e,n)}return xi(t,e,n)}var FR,Hv,UR,jR;FR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hv=function(){};UR=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ta(Qs.current);var i=null;switch(n){case"input":s=mv(t,s),r=mv(t,r),i=[];break;case"select":s=en({},s,{value:void 0}),r=en({},r,{value:void 0}),i=[];break;case"textarea":s=yv(t,s),r=yv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_m)}wv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Mt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};jR=function(t,e,n,r){n!==r&&(e.flags|=4)};function xu(t,e){if(!Bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sM(t,e,n){var r=e.pendingProps;switch(D_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return Cr(e.type)&&Em(),Yn(e),null;case 3:return r=e.stateNode,gc(),Ft(Pr),Ft(sr),B_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ef(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vs!==null&&(ew(vs),vs=null))),Hv(t,e),Yn(e),null;case 5:$_(e);var s=Ta(kd.current);if(n=e.type,t!==null&&e.stateNode!=null)UR(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Yn(e),null}if(t=Ta(Qs.current),ef(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bs]=e,r[Pd]=i,t=(e.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(s=0;s<$u.length;s++)Mt($u[s],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":OI(r,i),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Mt("invalid",r);break;case"textarea":VI(r,i),Mt("invalid",r)}wv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Zh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Zh(r.textContent,a,t),s=["children",""+a]):wd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",r)}switch(n){case"input":qh(r),LI(r,i,!0);break;case"textarea":qh(r),MI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_m)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bs]=e,t[Pd]=r,FR(t,e,!1,!1),e.stateNode=t;e:{switch(o=_v(n,r),n){case"dialog":Mt("cancel",t),Mt("close",t),s=r;break;case"iframe":case"object":case"embed":Mt("load",t),s=r;break;case"video":case"audio":for(s=0;s<$u.length;s++)Mt($u[s],t);s=r;break;case"source":Mt("error",t),s=r;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),s=r;break;case"details":Mt("toggle",t),s=r;break;case"input":OI(t,r),s=mv(t,r),Mt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=en({},r,{value:void 0}),Mt("invalid",t);break;case"textarea":VI(t,r),s=yv(t,r),Mt("invalid",t);break;default:s=r}wv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?y1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&p1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_d(t,l):typeof l=="number"&&_d(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Mt("scroll",t):l!=null&&v_(t,i,l,o))}switch(n){case"input":qh(t),LI(t,r,!1);break;case"textarea":qh(t),MI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_m)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)jR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Ta(kd.current),Ta(Qs.current),ef(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bs]=e,(i=r.nodeValue!==n)&&(t=Hr,t!==null))switch(t.tag){case 3:Zh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bs]=e,e.stateNode=r}return Yn(e),null;case 13:if(Ft(Jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&zr!==null&&e.mode&1&&!(e.flags&128))sR(),mc(),e.flags|=98560,i=!1;else if(i=ef(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[Bs]=e}else mc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),i=!1}else vs!==null&&(ew(vs),vs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?xn===0&&(xn=3):e0())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return gc(),Hv(t,e),t===null&&xd(e.stateNode.containerInfo),Yn(e),null;case 10:return M_(e.type._context),Yn(e),null;case 17:return Cr(e.type)&&Em(),Yn(e),null;case 19:if(Ft(Jt),i=e.memoizedState,i===null)return Yn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)xu(i,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rm(t),o!==null){for(e.flags|=128,xu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Jt,Jt.current&1|2),e.child}t=t.sibling}i.tail!==null&&mn()>vc&&(e.flags|=128,r=!0,xu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Rm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Bt)return Yn(e),null}else 2*mn()-i.renderingStartTime>vc&&n!==1073741824&&(e.flags|=128,r=!0,xu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mn(),e.sibling=null,n=Jt.current,Dt(Jt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return Z_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mr&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function iM(t,e){switch(D_(e),e.tag){case 1:return Cr(e.type)&&Em(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gc(),Ft(Pr),Ft(sr),B_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $_(e),null;case 13:if(Ft(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));mc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Jt),null;case 4:return gc(),null;case 10:return M_(e.type._context),null;case 22:case 23:return Z_(),null;case 24:return null;default:return null}}var rf=!1,tr=!1,oM=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Wl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ln(t,e,r)}else n.current=null}function Kv(t,e,n){try{n()}catch(r){ln(t,e,r)}}var AS=!1;function aM(t,e){if(Cv=ym,t=q1(),k_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kv={focusedElem:t,selectionRange:n},ym=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var p=S.memoizedProps,v=S.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?p:fs(e.type,p),v);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(R){ln(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return S=AS,AS=!1,S}function nd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Kv(e,n,i)}s=s.next}while(s!==r)}}function Mp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $R(t){var e=t.alternate;e!==null&&(t.alternate=null,$R(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bs],delete e[Pd],delete e[Ov],delete e[zV],delete e[WV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BR(t){return t.tag===5||t.tag===3||t.tag===4}function xS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_m));else if(r!==4&&(t=t.child,t!==null))for(Qv(t,e,n),t=t.sibling;t!==null;)Qv(t,e,n),t=t.sibling}function Yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yv(t,e,n),t=t.sibling;t!==null;)Yv(t,e,n),t=t.sibling}var jn=null,gs=!1;function Hi(t,e,n){for(n=n.child;n!==null;)zR(t,e,n),n=n.sibling}function zR(t,e,n){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Pp,n)}catch{}switch(n.tag){case 5:tr||Wl(n,e);case 6:var r=jn,s=gs;jn=null,Hi(t,e,n),jn=r,gs=s,jn!==null&&(gs?(t=jn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jn.removeChild(n.stateNode));break;case 18:jn!==null&&(gs?(t=jn,n=n.stateNode,t.nodeType===8?oy(t.parentNode,n):t.nodeType===1&&oy(t,n),Td(t)):oy(jn,n.stateNode));break;case 4:r=jn,s=gs,jn=n.stateNode.containerInfo,gs=!0,Hi(t,e,n),jn=r,gs=s;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kv(n,e,o),s=s.next}while(s!==r)}Hi(t,e,n);break;case 1:if(!tr&&(Wl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ln(n,e,a)}Hi(t,e,n);break;case 21:Hi(t,e,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Hi(t,e,n),tr=r):Hi(t,e,n);break;default:Hi(t,e,n)}}function RS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oM),e.forEach(function(r){var s=gM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ds(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jn=a.stateNode,gs=!1;break e;case 3:jn=a.stateNode.containerInfo,gs=!0;break e;case 4:jn=a.stateNode.containerInfo,gs=!0;break e}a=a.return}if(jn===null)throw Error(ae(160));zR(i,o,s),jn=null,gs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ln(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WR(e,t),e=e.sibling}function WR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ds(e,t),Ls(t),r&4){try{nd(3,t,t.return),Mp(3,t)}catch(p){ln(t,t.return,p)}try{nd(5,t,t.return)}catch(p){ln(t,t.return,p)}}break;case 1:ds(e,t),Ls(t),r&512&&n!==null&&Wl(n,n.return);break;case 5:if(ds(e,t),Ls(t),r&512&&n!==null&&Wl(n,n.return),t.flags&32){var s=t.stateNode;try{_d(s,"")}catch(p){ln(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&h1(s,i),_v(a,o);var c=_v(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?y1(s,h):d==="dangerouslySetInnerHTML"?p1(s,h):d==="children"?_d(s,h):v_(s,d,h,c)}switch(a){case"input":pv(s,i);break;case"textarea":f1(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Hl(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Hl(s,!!i.multiple,i.defaultValue,!0):Hl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pd]=i}catch(p){ln(t,t.return,p)}}break;case 6:if(ds(e,t),Ls(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){ln(t,t.return,p)}}break;case 3:if(ds(e,t),Ls(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Td(e.containerInfo)}catch(p){ln(t,t.return,p)}break;case 4:ds(e,t),Ls(t);break;case 13:ds(e,t),Ls(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(J_=mn())),r&4&&RS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(c=tr)||d,ds(e,t),tr=c):ds(e,t),Ls(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ie=t,d=t.child;d!==null;){for(h=Ie=d;Ie!==null;){switch(f=Ie,m=f.child,f.tag){case 0:case 11:case 14:case 15:nd(4,f,f.return);break;case 1:Wl(f,f.return);var S=f.stateNode;if(typeof S.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(p){ln(r,n,p)}}break;case 5:Wl(f,f.return);break;case 22:if(f.memoizedState!==null){CS(h);continue}}m!==null?(m.return=f,Ie=m):CS(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=g1("display",o))}catch(p){ln(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){ln(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ds(e,t),Ls(t),r&4&&RS(t);break;case 21:break;default:ds(e,t),Ls(t)}}function Ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BR(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_d(s,""),r.flags&=-33);var i=xS(t);Yv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=xS(t);Qv(t,a,o);break;default:throw Error(ae(161))}}catch(l){ln(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lM(t,e,n){Ie=t,qR(t)}function qR(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||rf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tr;a=rf;var c=tr;if(rf=o,(tr=l)&&!c)for(Ie=s;Ie!==null;)o=Ie,l=o.child,o.tag===22&&o.memoizedState!==null?kS(s):l!==null?(l.return=o,Ie=l):kS(s);for(;i!==null;)Ie=i,qR(i),i=i.sibling;Ie=s,rf=a,tr=c}PS(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):PS(t)}}function PS(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||Mp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fS(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Td(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}tr||e.flags&512&&Gv(e)}catch(f){ln(e,e.return,f)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function CS(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function kS(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mp(4,e)}catch(l){ln(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ln(e,s,l)}}var i=e.return;try{Gv(e)}catch(l){ln(e,i,l)}break;case 5:var o=e.return;try{Gv(e)}catch(l){ln(e,o,l)}}}catch(l){ln(e,e.return,l)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var cM=Math.ceil,km=Li.ReactCurrentDispatcher,Q_=Li.ReactCurrentOwner,os=Li.ReactCurrentBatchConfig,ut=0,Mn=null,_n=null,Bn=0,Mr=0,ql=Go(0),xn=0,Ld=null,Ya=0,Fp=0,Y_=0,rd=null,Tr=null,J_=0,vc=1/0,di=null,Nm=!1,Jv=null,To=null,sf=!1,mo=null,Dm=0,sd=0,Xv=null,jf=-1,$f=0;function fr(){return ut&6?mn():jf!==-1?jf:jf=mn()}function bo(t){return t.mode&1?ut&2&&Bn!==0?Bn&-Bn:HV.transition!==null?($f===0&&($f=P1()),$f):(t=It,t!==0||(t=window.event,t=t===void 0?16:V1(t.type)),t):1}function Is(t,e,n,r){if(50<sd)throw sd=0,Xv=null,Error(ae(185));dh(t,n,r),(!(ut&2)||t!==Mn)&&(t===Mn&&(!(ut&2)&&(Fp|=n),xn===4&&so(t,Bn)),kr(t,r),n===1&&ut===0&&!(e.mode&1)&&(vc=mn()+500,Op&&Qo()))}function kr(t,e){var n=t.callbackNode;HL(t,e);var r=gm(t,t===Mn?Bn:0);if(r===0)n!==null&&jI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jI(n),e===1)t.tag===0?qV(NS.bind(null,t)):tR(NS.bind(null,t)),$V(function(){!(ut&6)&&Qo()}),n=null;else{switch(C1(r)){case 1:n=S_;break;case 4:n=x1;break;case 16:n=pm;break;case 536870912:n=R1;break;default:n=pm}n=ZR(n,HR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function HR(t,e){if(jf=-1,$f=0,ut&6)throw Error(ae(327));var n=t.callbackNode;if(Jl()&&t.callbackNode!==n)return null;var r=gm(t,t===Mn?Bn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Om(t,r);else{e=r;var s=ut;ut|=2;var i=GR();(Mn!==t||Bn!==e)&&(di=null,vc=mn()+500,$a(t,e));do try{hM();break}catch(a){KR(t,a)}while(!0);V_(),km.current=i,ut=s,_n!==null?e=0:(Mn=null,Bn=0,e=xn)}if(e!==0){if(e===2&&(s=bv(t),s!==0&&(r=s,e=Zv(t,s))),e===1)throw n=Ld,$a(t,0),so(t,r),kr(t,mn()),n;if(e===6)so(t,r);else{if(s=t.current.alternate,!(r&30)&&!uM(s)&&(e=Om(t,r),e===2&&(i=bv(t),i!==0&&(r=i,e=Zv(t,i))),e===1))throw n=Ld,$a(t,0),so(t,r),kr(t,mn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:ca(t,Tr,di);break;case 3:if(so(t,r),(r&130023424)===r&&(e=J_+500-mn(),10<e)){if(gm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){fr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dv(ca.bind(null,t,Tr,di),e);break}ca(t,Tr,di);break;case 4:if(so(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Es(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=mn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cM(r/1960))-r,10<r){t.timeoutHandle=Dv(ca.bind(null,t,Tr,di),r);break}ca(t,Tr,di);break;case 5:ca(t,Tr,di);break;default:throw Error(ae(329))}}}return kr(t,mn()),t.callbackNode===n?HR.bind(null,t):null}function Zv(t,e){var n=rd;return t.current.memoizedState.isDehydrated&&($a(t,e).flags|=256),t=Om(t,e),t!==2&&(e=Tr,Tr=n,e!==null&&ew(e)),t}function ew(t){Tr===null?Tr=t:Tr.push.apply(Tr,t)}function uM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function so(t,e){for(e&=~Y_,e&=~Fp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Es(e),r=1<<n;t[n]=-1,e&=~r}}function NS(t){if(ut&6)throw Error(ae(327));Jl();var e=gm(t,0);if(!(e&1))return kr(t,mn()),null;var n=Om(t,e);if(t.tag!==0&&n===2){var r=bv(t);r!==0&&(e=r,n=Zv(t,r))}if(n===1)throw n=Ld,$a(t,0),so(t,e),kr(t,mn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ca(t,Tr,di),kr(t,mn()),null}function X_(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(vc=mn()+500,Op&&Qo())}}function Ja(t){mo!==null&&mo.tag===0&&!(ut&6)&&Jl();var e=ut;ut|=1;var n=os.transition,r=It;try{if(os.transition=null,It=1,t)return t()}finally{It=r,os.transition=n,ut=e,!(ut&6)&&Qo()}}function Z_(){Mr=ql.current,Ft(ql)}function $a(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jV(n)),_n!==null)for(n=_n.return;n!==null;){var r=n;switch(D_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Em();break;case 3:gc(),Ft(Pr),Ft(sr),B_();break;case 5:$_(r);break;case 4:gc();break;case 13:Ft(Jt);break;case 19:Ft(Jt);break;case 10:M_(r.type._context);break;case 22:case 23:Z_()}n=n.return}if(Mn=t,_n=t=Ao(t.current,null),Bn=Mr=e,xn=0,Ld=null,Y_=Fp=Ya=0,Tr=rd=null,Sa!==null){for(e=0;e<Sa.length;e++)if(n=Sa[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sa=null}return t}function KR(t,e){do{var n=_n;try{if(V_(),Mf.current=Cm,Pm){for(var r=Zt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pm=!1}if(Qa=0,Ln=An=Zt=null,td=!1,Nd=0,Q_.current=null,n===null||n.return===null){xn=1,Ld=e,_n=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Bn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=wS(o);if(m!==null){m.flags&=-257,_S(m,o,a,i,e),m.mode&1&&vS(i,c,e),e=m,l=c;var S=e.updateQueue;if(S===null){var p=new Set;p.add(l),e.updateQueue=p}else S.add(l);break e}else{if(!(e&1)){vS(i,c,e),e0();break e}l=Error(ae(426))}}else if(Bt&&a.mode&1){var v=wS(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),_S(v,o,a,i,e),O_(yc(l,a));break e}}i=l=yc(l,a),xn!==4&&(xn=2),rd===null?rd=[i]:rd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=CR(i,l,e);hS(i,w);break e;case 1:a=l;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(To===null||!To.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=kR(i,a,e);hS(i,R);break e}}i=i.return}while(i!==null)}YR(n)}catch(k){e=k,_n===n&&n!==null&&(_n=n=n.return);continue}break}while(!0)}function GR(){var t=km.current;return km.current=Cm,t===null?Cm:t}function e0(){(xn===0||xn===3||xn===2)&&(xn=4),Mn===null||!(Ya&268435455)&&!(Fp&268435455)||so(Mn,Bn)}function Om(t,e){var n=ut;ut|=2;var r=GR();(Mn!==t||Bn!==e)&&(di=null,$a(t,e));do try{dM();break}catch(s){KR(t,s)}while(!0);if(V_(),ut=n,km.current=r,_n!==null)throw Error(ae(261));return Mn=null,Bn=0,xn}function dM(){for(;_n!==null;)QR(_n)}function hM(){for(;_n!==null&&!ML();)QR(_n)}function QR(t){var e=XR(t.alternate,t,Mr);t.memoizedProps=t.pendingProps,e===null?YR(t):_n=e,Q_.current=null}function YR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iM(n,e),n!==null){n.flags&=32767,_n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,_n=null;return}}else if(n=sM(n,e,Mr),n!==null){_n=n;return}if(e=e.sibling,e!==null){_n=e;return}_n=e=t}while(e!==null);xn===0&&(xn=5)}function ca(t,e,n){var r=It,s=os.transition;try{os.transition=null,It=1,fM(t,e,n,r)}finally{os.transition=s,It=r}return null}function fM(t,e,n,r){do Jl();while(mo!==null);if(ut&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KL(t,i),t===Mn&&(_n=Mn=null,Bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sf||(sf=!0,ZR(pm,function(){return Jl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=os.transition,os.transition=null;var o=It;It=1;var a=ut;ut|=4,Q_.current=null,aM(t,n),WR(n,t),DV(kv),ym=!!Cv,kv=Cv=null,t.current=n,lM(n),FL(),ut=a,It=o,os.transition=i}else t.current=n;if(sf&&(sf=!1,mo=t,Dm=s),i=t.pendingLanes,i===0&&(To=null),$L(n.stateNode),kr(t,mn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nm)throw Nm=!1,t=Jv,Jv=null,t;return Dm&1&&t.tag!==0&&Jl(),i=t.pendingLanes,i&1?t===Xv?sd++:(sd=0,Xv=t):sd=0,Qo(),null}function Jl(){if(mo!==null){var t=C1(Dm),e=os.transition,n=It;try{if(os.transition=null,It=16>t?16:t,mo===null)var r=!1;else{if(t=mo,mo=null,Dm=0,ut&6)throw Error(ae(331));var s=ut;for(ut|=4,Ie=t.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ie=c;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:nd(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ie=h;else for(;Ie!==null;){d=Ie;var f=d.sibling,m=d.return;if($R(d),d===c){Ie=null;break}if(f!==null){f.return=m,Ie=f;break}Ie=m}}}var S=i.alternate;if(S!==null){var p=S.child;if(p!==null){S.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nd(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Ie=w;break e}Ie=i.return}}var y=t.current;for(Ie=y;Ie!==null;){o=Ie;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ie=E;else e:for(o=y;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mp(9,a)}}catch(k){ln(a,a.return,k)}if(a===o){Ie=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Ie=R;break e}Ie=a.return}}if(ut=s,Qo(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Pp,t)}catch{}r=!0}return r}finally{It=n,os.transition=e}}return!1}function DS(t,e,n){e=yc(n,e),e=CR(t,e,1),t=So(t,e,1),e=fr(),t!==null&&(dh(t,1,e),kr(t,e))}function ln(t,e,n){if(t.tag===3)DS(t,t,n);else for(;e!==null;){if(e.tag===3){DS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(To===null||!To.has(r))){t=yc(n,t),t=kR(e,t,1),e=So(e,t,1),t=fr(),e!==null&&(dh(e,1,t),kr(e,t));break}}e=e.return}}function mM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fr(),t.pingedLanes|=t.suspendedLanes&n,Mn===t&&(Bn&n)===n&&(xn===4||xn===3&&(Bn&130023424)===Bn&&500>mn()-J_?$a(t,0):Y_|=n),kr(t,e)}function JR(t,e){e===0&&(t.mode&1?(e=Gh,Gh<<=1,!(Gh&130023424)&&(Gh=4194304)):e=1);var n=fr();t=Ai(t,e),t!==null&&(dh(t,e,n),kr(t,n))}function pM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JR(t,n)}function gM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),JR(t,n)}var XR;XR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pr.current)br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return br=!1,rM(t,e,n);br=!!(t.flags&131072)}else br=!1,Bt&&e.flags&1048576&&nR(e,Tm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uf(t,e),t=e.pendingProps;var s=fc(e,sr.current);Yl(e,n),s=W_(null,e,r,t,s,n);var i=q_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cr(r)?(i=!0,Im(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,U_(e),s.updater=Vp,e.stateNode=s,s._reactInternals=e,jv(e,r,t,n),e=zv(null,e,r,!0,i,n)):(e.tag=0,Bt&&i&&N_(e),ur(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vM(r),t=fs(r,t),s){case 0:e=Bv(null,e,r,t,n);break e;case 1:e=SS(null,e,r,t,n);break e;case 11:e=ES(null,e,r,t,n);break e;case 14:e=IS(null,e,r,fs(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),Bv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),SS(t,e,r,s,n);case 3:e:{if(LR(e),t===null)throw Error(ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,lR(t,e),xm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yc(Error(ae(423)),e),e=TS(t,e,r,n,s);break e}else if(r!==s){s=yc(Error(ae(424)),e),e=TS(t,e,r,n,s);break e}else for(zr=Io(e.stateNode.containerInfo.firstChild),Hr=e,Bt=!0,vs=null,n=oR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mc(),r===s){e=xi(t,e,n);break e}ur(t,e,r,n)}e=e.child}return e;case 5:return cR(e),t===null&&Mv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Nv(r,s)?o=null:i!==null&&Nv(r,i)&&(e.flags|=32),OR(t,e),ur(t,e,o,n),e.child;case 6:return t===null&&Mv(e),null;case 13:return VR(t,e,n);case 4:return j_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pc(e,null,r,n):ur(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),ES(t,e,r,s,n);case 7:return ur(t,e,e.pendingProps,n),e.child;case 8:return ur(t,e,e.pendingProps.children,n),e.child;case 12:return ur(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Dt(bm,r._currentValue),r._currentValue=o,i!==null)if(bs(i.value,o)){if(i.children===s.children&&!Pr.current){e=xi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Fv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ur(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Yl(e,n),s=ls(s),r=r(s),e.flags|=1,ur(t,e,r,n),e.child;case 14:return r=e.type,s=fs(r,e.pendingProps),s=fs(r.type,s),IS(t,e,r,s,n);case 15:return NR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),Uf(t,e),e.tag=1,Cr(r)?(t=!0,Im(e)):t=!1,Yl(e,n),PR(e,r,s),jv(e,r,s,n),zv(null,e,r,!0,t,n);case 19:return MR(t,e,n);case 22:return DR(t,e,n)}throw Error(ae(156,e.tag))};function ZR(t,e){return A1(t,e)}function yM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(t,e,n,r){return new yM(t,e,n,r)}function t0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vM(t){if(typeof t=="function")return t0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===__)return 11;if(t===E_)return 14}return 2}function Ao(t,e){var n=t.alternate;return n===null?(n=is(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")t0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ll:return Ba(n.children,s,i,e);case w_:o=8,s|=8;break;case uv:return t=is(12,n,e,s|2),t.elementType=uv,t.lanes=i,t;case dv:return t=is(13,n,e,s),t.elementType=dv,t.lanes=i,t;case hv:return t=is(19,n,e,s),t.elementType=hv,t.lanes=i,t;case c1:return Up(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case a1:o=10;break e;case l1:o=9;break e;case __:o=11;break e;case E_:o=14;break e;case to:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=is(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ba(t,e,n,r){return t=is(7,t,r,e),t.lanes=n,t}function Up(t,e,n,r){return t=is(22,t,r,e),t.elementType=c1,t.lanes=n,t.stateNode={isHidden:!1},t}function my(t,e,n){return t=is(6,t,null,e),t.lanes=n,t}function py(t,e,n){return e=is(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qg(0),this.expirationTimes=Qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function n0(t,e,n,r,s,i,o,a,l){return t=new wM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=is(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},U_(i),t}function _M(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ol,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eP(t){if(!t)return Vo;t=t._reactInternals;e:{if(ul(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Cr(n))return eR(t,n,e)}return e}function tP(t,e,n,r,s,i,o,a,l){return t=n0(n,r,!0,t,s,i,o,a,l),t.context=eP(null),n=t.current,r=fr(),s=bo(n),i=wi(r,s),i.callback=e??null,So(n,i,s),t.current.lanes=s,dh(t,s,r),kr(t,r),t}function jp(t,e,n,r){var s=e.current,i=fr(),o=bo(s);return n=eP(n),e.context===null?e.context=n:e.pendingContext=n,e=wi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=So(s,e,o),t!==null&&(Is(t,s,o,i),Vf(t,s,o)),o}function Lm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function r0(t,e){OS(t,e),(t=t.alternate)&&OS(t,e)}function EM(){return null}var nP=typeof reportError=="function"?reportError:function(t){console.error(t)};function s0(t){this._internalRoot=t}$p.prototype.render=s0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));jp(t,e,null,null)};$p.prototype.unmount=s0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ja(function(){jp(null,t,null,null)}),e[bi]=null}};function $p(t){this._internalRoot=t}$p.prototype.unstable_scheduleHydration=function(t){if(t){var e=D1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ro.length&&e!==0&&e<ro[n].priority;n++);ro.splice(n,0,t),n===0&&L1(t)}};function i0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LS(){}function IM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Lm(o);i.call(c)}}var o=tP(e,r,t,0,null,!1,!1,"",LS);return t._reactRootContainer=o,t[bi]=o.current,xd(t.nodeType===8?t.parentNode:t),Ja(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Lm(l);a.call(c)}}var l=n0(t,0,!1,null,null,!1,!1,"",LS);return t._reactRootContainer=l,t[bi]=l.current,xd(t.nodeType===8?t.parentNode:t),Ja(function(){jp(e,l,n,r)}),l}function zp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Lm(o);a.call(l)}}jp(e,o,t,s)}else o=IM(n,e,t,s,r);return Lm(o)}k1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ju(e.pendingLanes);n!==0&&(T_(e,n|1),kr(e,mn()),!(ut&6)&&(vc=mn()+500,Qo()))}break;case 13:Ja(function(){var r=Ai(t,1);if(r!==null){var s=fr();Is(r,t,1,s)}}),r0(t,1)}};b_=function(t){if(t.tag===13){var e=Ai(t,134217728);if(e!==null){var n=fr();Is(e,t,134217728,n)}r0(t,134217728)}};N1=function(t){if(t.tag===13){var e=bo(t),n=Ai(t,e);if(n!==null){var r=fr();Is(n,t,e,r)}r0(t,e)}};D1=function(){return It};O1=function(t,e){var n=It;try{return It=t,e()}finally{It=n}};Iv=function(t,e,n){switch(e){case"input":if(pv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Dp(r);if(!s)throw Error(ae(90));d1(r),pv(r,s)}}}break;case"textarea":f1(t,n);break;case"select":e=n.value,e!=null&&Hl(t,!!n.multiple,e,!1)}};_1=X_;E1=Ja;var SM={usingClientEntryPoint:!1,Events:[fh,Ul,Dp,v1,w1,X_]},Ru={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TM={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||EM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{Pp=of.inject(TM),Gs=of}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SM;Xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!i0(e))throw Error(ae(200));return _M(t,e,null,n)};Xr.createRoot=function(t,e){if(!i0(t))throw Error(ae(299));var n=!1,r="",s=nP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=n0(t,1,!1,null,null,n,!1,r,s),t[bi]=e.current,xd(t.nodeType===8?t.parentNode:t),new s0(e)};Xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=T1(e),t=t===null?null:t.stateNode,t};Xr.flushSync=function(t){return Ja(t)};Xr.hydrate=function(t,e,n){if(!Bp(e))throw Error(ae(200));return zp(null,t,e,!0,n)};Xr.hydrateRoot=function(t,e,n){if(!i0(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=nP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tP(e,null,t,1,n??null,s,!1,i,o),t[bi]=e.current,xd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new $p(e)};Xr.render=function(t,e,n){if(!Bp(e))throw Error(ae(200));return zp(null,t,e,!1,n)};Xr.unmountComponentAtNode=function(t){if(!Bp(t))throw Error(ae(40));return t._reactRootContainer?(Ja(function(){zp(null,null,t,!1,function(){t._reactRootContainer=null,t[bi]=null})}),!0):!1};Xr.unstable_batchedUpdates=X_;Xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bp(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return zp(t,e,n,!1,r)};Xr.version="18.3.1-next-f1338f8080-20240426";function rP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rP)}catch(t){console.error(t)}}rP(),r1.exports=Xr;var ph=r1.exports;const sP=qx(ph);var iP,VS=ph;iP=VS.createRoot,VS.hydrateRoot;const bM="modulepreload",AM=function(t,e){return new URL(t,e).href},MS={},ee=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=AM(c,r),c in MS)return;MS[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let S=o.length-1;S>=0;S--){const p=o[S];if(p.href===c&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":bM,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((S,p)=>{m.addEventListener("load",S),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},xM=1,RM=1e6;let gy=0;function PM(){return gy=(gy+1)%Number.MAX_SAFE_INTEGER,gy.toString()}const yy=new Map,FS=t=>{if(yy.has(t))return;const e=setTimeout(()=>{yy.delete(t),id({type:"REMOVE_TOAST",toastId:t})},RM);yy.set(t,e)},CM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,xM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?FS(n):t.toasts.forEach(r=>{FS(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},zf=[];let Wf={toasts:[]};function id(t){Wf=CM(Wf,t),zf.forEach(e=>{e(Wf)})}function kM({...t}){const e=PM(),n=s=>id({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>id({type:"DISMISS_TOAST",toastId:e});return id({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function o0(){const[t,e]=T.useState(Wf);return T.useEffect(()=>(zf.push(e),()=>{const n=zf.indexOf(e);n>-1&&zf.splice(n,1)}),[t]),{...t,toast:kM,dismiss:n=>id({type:"DISMISS_TOAST",toastId:n})}}function Nt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function US(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=US(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():US(t[s],null)}}}}function Wn(...t){return T.useCallback(oP(...t),t)}function NM(t,e){const n=T.createContext(e),r=i=>{const{children:o,...a}=i,l=T.useMemo(()=>a,Object.values(a));return _.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=T.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function qc(t,e=[]){let n=[];function r(i,o){const a=T.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:f,children:m,...S}=h,p=((w=f==null?void 0:f[t])==null?void 0:w[l])||a,v=T.useMemo(()=>S,Object.values(S));return _.jsx(p.Provider,{value:v,children:m})};c.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[l])||a,S=T.useContext(m);if(S)return S;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,DM(s,...e)]}function DM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Vd(t){const e=LM(t),n=T.forwardRef((r,s)=>{const{children:i,...o}=r,a=T.Children.toArray(i),l=a.find(MM);if(l){const c=l.props.children,d=a.map(h=>h===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:h);return _.jsx(e,{...o,ref:s,children:T.isValidElement(c)?T.cloneElement(c,void 0,d):null})}return _.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var OM=Vd("Slot");function LM(t){const e=T.forwardRef((n,r)=>{const{children:s,...i}=n;if(T.isValidElement(s)){const o=UM(s),a=FM(i,s.props);return s.type!==T.Fragment&&(a.ref=r?oP(r,o):o),T.cloneElement(s,a)}return T.Children.count(s)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aP=Symbol("radix.slottable");function VM(t){const e=({children:n})=>_.jsx(_.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=aP,e}function MM(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aP}function FM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function UM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function jM(t){const e=t+"CollectionProvider",[n,r]=qc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:w}=p,y=U.useRef(null),E=U.useRef(new Map).current;return _.jsx(s,{scope:v,itemMap:E,collectionRef:y,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=Vd(a),c=U.forwardRef((p,v)=>{const{scope:w,children:y}=p,E=i(a,w),R=Wn(v,E.collectionRef);return _.jsx(l,{ref:R,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Vd(d),m=U.forwardRef((p,v)=>{const{scope:w,children:y,...E}=p,R=U.useRef(null),k=Wn(v,R),L=i(d,w);return U.useEffect(()=>(L.itemMap.set(R,{ref:R,...E}),()=>void L.itemMap.delete(R))),_.jsx(f,{[h]:"",ref:k,children:y})});m.displayName=d;function S(p){const v=i(t+"CollectionConsumer",p);return U.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const E=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((L,x)=>E.indexOf(L.ref.current)-E.indexOf(x.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},S,r]}var $M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tn=$M.reduce((t,e)=>{const n=Vd(`Primitive.${e}`),r=T.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function lP(t,e){t&&ph.flushSync(()=>t.dispatchEvent(e))}function Xs(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function BM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t);T.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var zM="DismissableLayer",tw="dismissableLayer.update",WM="dismissableLayer.pointerDownOutside",qM="dismissableLayer.focusOutside",jS,cP=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wp=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=T.useContext(cP),[d,h]=T.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),S=Wn(e,x=>h(x)),p=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(v),y=d?p.indexOf(d):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,R=y>=w,k=KM(x=>{const b=x.target,A=[...c.branches].some(P=>P.contains(b));!R||A||(s==null||s(x),o==null||o(x),x.defaultPrevented||a==null||a())},f),L=GM(x=>{const b=x.target;[...c.branches].some(P=>P.contains(b))||(i==null||i(x),o==null||o(x),x.defaultPrevented||a==null||a())},f);return BM(x=>{y===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),T.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(jS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),$S(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=jS)}},[d,f,n,c]),T.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),$S())},[d,c]),T.useEffect(()=>{const x=()=>m({});return document.addEventListener(tw,x),()=>document.removeEventListener(tw,x)},[]),_.jsx(tn.div,{...l,ref:S,style:{pointerEvents:E?R?"auto":"none":void 0,...t.style},onFocusCapture:Nt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Nt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Nt(t.onPointerDownCapture,k.onPointerDownCapture)})});Wp.displayName=zM;var HM="DismissableLayerBranch",uP=T.forwardRef((t,e)=>{const n=T.useContext(cP),r=T.useRef(null),s=Wn(e,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),_.jsx(tn.div,{...t,ref:s})});uP.displayName=HM;function KM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=T.useRef(!1),s=T.useRef(()=>{});return T.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){dP(WM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=T.useRef(!1);return T.useEffect(()=>{const s=i=>{i.target&&!r.current&&dP(qM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $S(){const t=new CustomEvent(tw);document.dispatchEvent(t)}function dP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?lP(s,i):s.dispatchEvent(i)}var QM=Wp,YM=uP,Ri=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},JM="Portal",a0=T.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=T.useState(!1);Ri(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sP.createPortal(_.jsx(tn.div,{...r,ref:e}),o):null});a0.displayName=JM;function XM(t,e){return T.useReducer((n,r)=>e[n][r]??n,t)}var dl=t=>{const{present:e,children:n}=t,r=ZM(e),s=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=Wn(r.ref,eF(s));return typeof n=="function"||r.isPresent?T.cloneElement(s,{ref:i}):null};dl.displayName="Presence";function ZM(t){const[e,n]=T.useState(),r=T.useRef(null),s=T.useRef(t),i=T.useRef("none"),o=t?"mounted":"unmounted",[a,l]=XM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=af(r.current);i.current=a==="mounted"?c:"none"},[a]),Ri(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=af(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ri(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const p=af(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&p&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=m=>{m.target===e&&(i.current=af(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function af(t){return(t==null?void 0:t.animationName)||"none"}function eF(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tF=p_[" useInsertionEffect ".trim().toString()]||Ri;function l0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=nF({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=T.useRef(t!==void 0);T.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=T.useCallback(d=>{var h;if(a){const f=rF(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function nF({defaultProp:t,onChange:e}){const[n,r]=T.useState(t),s=T.useRef(n),i=T.useRef(e);return tF(()=>{i.current=e},[e]),T.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function rF(t){return typeof t=="function"}var sF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iF="VisuallyHidden",qp=T.forwardRef((t,e)=>_.jsx(tn.span,{...t,ref:e,style:{...sF,...t.style}}));qp.displayName=iF;var oF=qp,c0="ToastProvider",[u0,aF,lF]=jM("Toast"),[hP]=qc("Toast",[lF]),[cF,Hp]=hP(c0),fP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=T.useState(null),[c,d]=T.useState(0),h=T.useRef(!1),f=T.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${c0}\`. Expected non-empty \`string\`.`),_.jsx(u0.Provider,{scope:e,children:_.jsx(cF,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:T.useCallback(()=>d(m=>m+1),[]),onToastRemove:T.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};fP.displayName=c0;var mP="ToastViewport",uF=["F8"],nw="toast.viewportPause",rw="toast.viewportResume",pP=T.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=uF,label:s="Notifications ({hotkey})",...i}=t,o=Hp(mP,n),a=aF(n),l=T.useRef(null),c=T.useRef(null),d=T.useRef(null),h=T.useRef(null),f=Wn(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=o.toastCount>0;T.useEffect(()=>{const v=w=>{var E;r.length!==0&&r.every(R=>w[R]||w.code===R)&&((E=h.current)==null||E.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),T.useEffect(()=>{const v=l.current,w=h.current;if(S&&v&&w){const y=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(nw);w.dispatchEvent(L),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(rw);w.dispatchEvent(L),o.isClosePausedRef.current=!1}},R=L=>{!v.contains(L.relatedTarget)&&E()},k=()=>{v.contains(document.activeElement)||E()};return v.addEventListener("focusin",y),v.addEventListener("focusout",R),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",E),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",R),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",E)}}},[S,o.isClosePausedRef]);const p=T.useCallback(({tabbingDirection:v})=>{const y=a().map(E=>{const R=E.ref.current,k=[R,...SF(R)];return v==="forwards"?k:k.reverse()});return(v==="forwards"?y.reverse():y).flat()},[a]);return T.useEffect(()=>{const v=h.current;if(v){const w=y=>{var k,L,x;const E=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!E){const b=document.activeElement,A=y.shiftKey;if(y.target===v&&A){(k=c.current)==null||k.focus();return}const O=p({tabbingDirection:A?"backwards":"forwards"}),C=O.findIndex($=>$===b);vy(O.slice(C+1))?y.preventDefault():A?(L=c.current)==null||L.focus():(x=d.current)==null||x.focus()}};return v.addEventListener("keydown",w),()=>v.removeEventListener("keydown",w)}},[a,p]),_.jsxs(YM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&_.jsx(sw,{ref:c,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});vy(v)}}),_.jsx(u0.Slot,{scope:n,children:_.jsx(tn.ol,{tabIndex:-1,...i,ref:f})}),S&&_.jsx(sw,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});vy(v)}})]})});pP.displayName=mP;var gP="ToastFocusProxy",sw=T.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Hp(gP,n);return _.jsx(qp,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});sw.displayName=gP;var gh="Toast",dF="toast.swipeStart",hF="toast.swipeMove",fF="toast.swipeCancel",mF="toast.swipeEnd",yP=T.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=l0({prop:r,defaultProp:s??!0,onChange:i,caller:gh});return _.jsx(dl,{present:n||a,children:_.jsx(yF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Xs(t.onPause),onResume:Xs(t.onResume),onSwipeStart:Nt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Nt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Nt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Nt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});yP.displayName=gh;var[pF,gF]=hP(gh,{onClose(){}}),yF=T.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...S}=t,p=Hp(gh,n),[v,w]=T.useState(null),y=Wn(e,$=>w($)),E=T.useRef(null),R=T.useRef(null),k=s||p.duration,L=T.useRef(0),x=T.useRef(k),b=T.useRef(0),{onToastAdd:A,onToastRemove:P}=p,N=Xs(()=>{var re;(v==null?void 0:v.contains(document.activeElement))&&((re=p.viewport)==null||re.focus()),o()}),O=T.useCallback($=>{!$||$===1/0||(window.clearTimeout(b.current),L.current=new Date().getTime(),b.current=window.setTimeout(N,$))},[N]);T.useEffect(()=>{const $=p.viewport;if($){const re=()=>{O(x.current),c==null||c()},ne=()=>{const fe=new Date().getTime()-L.current;x.current=x.current-fe,window.clearTimeout(b.current),l==null||l()};return $.addEventListener(nw,ne),$.addEventListener(rw,re),()=>{$.removeEventListener(nw,ne),$.removeEventListener(rw,re)}}},[p.viewport,k,l,c,O]),T.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(k)},[i,k,p.isClosePausedRef,O]),T.useEffect(()=>(A(),()=>P()),[A,P]);const C=T.useMemo(()=>v?TP(v):null,[v]);return p.viewport?_.jsxs(_.Fragment,{children:[C&&_.jsx(vF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),_.jsx(pF,{scope:n,onClose:N,children:ph.createPortal(_.jsx(u0.ItemSlot,{scope:n,children:_.jsx(QM,{asChild:!0,onEscapeKeyDown:Nt(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||N(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:_.jsx(tn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...S,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Nt(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Nt(t.onPointerDown,$=>{$.button===0&&(E.current={x:$.clientX,y:$.clientY})}),onPointerMove:Nt(t.onPointerMove,$=>{if(!E.current)return;const re=$.clientX-E.current.x,ne=$.clientY-E.current.y,fe=!!R.current,j=["left","right"].includes(p.swipeDirection),H=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,le=j?H(0,re):0,ge=j?0:H(0,ne),J=$.pointerType==="touch"?10:2,M={x:le,y:ge},Ee={originalEvent:$,delta:M};fe?(R.current=M,lf(hF,h,Ee,{discrete:!1})):BS(M,p.swipeDirection,J)?(R.current=M,lf(dF,d,Ee,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(re)>J||Math.abs(ne)>J)&&(E.current=null)}),onPointerUp:Nt(t.onPointerUp,$=>{const re=R.current,ne=$.target;if(ne.hasPointerCapture($.pointerId)&&ne.releasePointerCapture($.pointerId),R.current=null,E.current=null,re){const fe=$.currentTarget,j={originalEvent:$,delta:re};BS(re,p.swipeDirection,p.swipeThreshold)?lf(mF,m,j,{discrete:!0}):lf(fF,f,j,{discrete:!0}),fe.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),vF=t=>{const{__scopeToast:e,children:n,...r}=t,s=Hp(gh,e),[i,o]=T.useState(!1),[a,l]=T.useState(!1);return EF(()=>o(!0)),T.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:_.jsx(a0,{asChild:!0,children:_.jsx(qp,{...r,children:i&&_.jsxs(_.Fragment,{children:[s.label," ",n]})})})},wF="ToastTitle",vP=T.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return _.jsx(tn.div,{...r,ref:e})});vP.displayName=wF;var _F="ToastDescription",wP=T.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return _.jsx(tn.div,{...r,ref:e})});wP.displayName=_F;var _P="ToastAction",EP=T.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?_.jsx(SP,{altText:n,asChild:!0,children:_.jsx(d0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${_P}\`. Expected non-empty \`string\`.`),null)});EP.displayName=_P;var IP="ToastClose",d0=T.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=gF(IP,n);return _.jsx(SP,{asChild:!0,children:_.jsx(tn.button,{type:"button",...r,ref:e,onClick:Nt(t.onClick,s.onClose)})})});d0.displayName=IP;var SP=T.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return _.jsx(tn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function TP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),IF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...TP(r))}}),e}function lf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?lP(s,i):s.dispatchEvent(i)}var BS=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function EF(t=()=>{}){const e=Xs(t);Ri(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function IF(t){return t.nodeType===t.ELEMENT_NODE}function SF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var TF=fP,bP=pP,AP=yP,xP=vP,RP=wP,PP=EP,CP=d0;function kP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=kP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function NP(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=kP(t))&&(r&&(r+=" "),r+=e);return r}const zS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,WS=NP,DP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return WS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=zS(d)||zS(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(S=>{let[p,v]=S;return Array.isArray(v)?v.includes({...i,...a}[p]):{...i,...a}[p]===v})?[...c,h,f]:c},[]);return WS(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),qS=t=>{const e=AF(t);return e.charAt(0).toUpperCase()+e.slice(1)},OP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),xF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>T.createElement("svg",{ref:l,...RF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OP("lucide",s),...!i&&!xF(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>T.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(t,e)=>{const n=T.forwardRef(({className:r,...s},i)=>T.createElement(PF,{ref:i,iconNode:e,className:OP(`lucide-${bF(qS(t))}`,`lucide-${t}`,r),...s}));return n.displayName=qS(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],kF=xt("arrow-down",CF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],DF=xt("arrow-right",NF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],LF=xt("arrow-up-down",OF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],MF=xt("badge-percent",VF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],UF=xt("check",FF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$F=xt("clock",jF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],zF=xt("credit-card",BF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qF=xt("eye-off",WF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KF=xt("eye",HF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],QF=xt("file-text",GF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],JF=xt("house",YF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ZF=xt("lock",XF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],HS=xt("log-out",eU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],KS=xt("mail",tU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],rU=xt("message-circle",nU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M5 12h14",key:"1ays0h"}]],iU=xt("minus",sU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],GS=xt("plus",oU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],wy=xt("receipt",aU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],h0=xt("refresh-ccw",lU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],QS=xt("settings",cU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],dU=xt("shield",uU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],fU=xt("square",hU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pU=xt("trending-up",mU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],LP=xt("triangle-alert",gU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vU=xt("user",yU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],_U=xt("wrench",wU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],f0=xt("x",EU),m0="-",IU=t=>{const e=TU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(m0);return a[0]===""&&a.length!==1&&a.shift(),VP(a,e)||SU(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},VP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?VP(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(m0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},YS=/^\[(.+)\]$/,SU=t=>{if(YS.test(t)){const e=YS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},TU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return AU(Object.entries(t.classGroups),n).forEach(([i,o])=>{iw(o,r,i,e)}),r},iw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:JS(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(bU(s)){iw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{iw(o,JS(e,i),n,r)})})},JS=(t,e)=>{let n=t;return e.split(m0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},bU=t=>t.isThemeGetter,AU=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,xU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},MP="!",RU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let w=a[v];if(c===0){if(w===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(w==="/"){h=v;continue}}w==="["?c++:w==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(MP),S=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:S,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:o}):o},PU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},CU=t=>({cache:xU(t.cacheSize),parseClassName:RU(t),...IU(t)}),kU=/\s+/,NU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(kU);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let S=!!m,p=r(S?f.substring(0,m):f);if(!p){if(!S){a=c+(a.length>0?" "+a:a);continue}if(p=r(f),!p){a=c+(a.length>0?" "+a:a);continue}S=!1}const v=PU(d).join(":"),w=h?v+MP:v,y=w+p;if(i.includes(y))continue;i.push(y);const E=s(p,S);for(let R=0;R<E.length;++R){const k=E[R];i.push(w+k)}a=c+(a.length>0?" "+a:a)}return a};function DU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=FP(e))&&(r&&(r+=" "),r+=n);return r}const FP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=FP(t[r]))&&(n&&(n+=" "),n+=e);return n};function OU(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=CU(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=NU(l,n);return s(l,d),d}return function(){return i(DU.apply(null,arguments))}}const Vt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},UP=/^\[(?:([a-z-]+):)?(.+)\]$/i,LU=/^\d+\/\d+$/,VU=new Set(["px","full","screen"]),MU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$U=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ci=t=>Xl(t)||VU.has(t)||LU.test(t),Ki=t=>Hc(t,"length",QU),Xl=t=>!!t&&!Number.isNaN(Number(t)),_y=t=>Hc(t,"number",Xl),Pu=t=>!!t&&Number.isInteger(Number(t)),BU=t=>t.endsWith("%")&&Xl(t.slice(0,-1)),Je=t=>UP.test(t),Gi=t=>MU.test(t),zU=new Set(["length","size","percentage"]),WU=t=>Hc(t,zU,jP),qU=t=>Hc(t,"position",jP),HU=new Set(["image","url"]),KU=t=>Hc(t,HU,JU),GU=t=>Hc(t,"",YU),Cu=()=>!0,Hc=(t,e,n)=>{const r=UP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},QU=t=>FU.test(t)&&!UU.test(t),jP=()=>!1,YU=t=>jU.test(t),JU=t=>$U.test(t),XU=()=>{const t=Vt("colors"),e=Vt("spacing"),n=Vt("blur"),r=Vt("brightness"),s=Vt("borderColor"),i=Vt("borderRadius"),o=Vt("borderSpacing"),a=Vt("borderWidth"),l=Vt("contrast"),c=Vt("grayscale"),d=Vt("hueRotate"),h=Vt("invert"),f=Vt("gap"),m=Vt("gradientColorStops"),S=Vt("gradientColorStopPositions"),p=Vt("inset"),v=Vt("margin"),w=Vt("opacity"),y=Vt("padding"),E=Vt("saturate"),R=Vt("scale"),k=Vt("sepia"),L=Vt("skew"),x=Vt("space"),b=Vt("translate"),A=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Je,e],O=()=>[Je,e],C=()=>["",ci,Ki],$=()=>["auto",Xl,Je],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Je],le=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[Xl,Je];return{cacheSize:500,separator:":",theme:{colors:[Cu],spacing:[ci,Ki],blur:["none","",Gi,Je],brightness:ge(),borderColor:[t],borderRadius:["none","","full",Gi,Je],borderSpacing:O(),borderWidth:C(),contrast:ge(),grayscale:H(),hueRotate:ge(),invert:H(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[BU,Ki],inset:N(),margin:N(),opacity:ge(),padding:O(),saturate:ge(),scale:ge(),sepia:H(),skew:ge(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[Gi]}],"break-after":[{"break-after":le()}],"break-before":[{"break-before":le()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),Je]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pu,Je]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Pu,Je]}],"grid-cols":[{"grid-cols":[Cu]}],"col-start-end":[{col:["auto",{span:["full",Pu,Je]},Je]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Cu]}],"row-start-end":[{row:["auto",{span:[Pu,Je]},Je]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,e]}],"min-w":[{"min-w":[Je,e,"min","max","fit"]}],"max-w":[{"max-w":[Je,e,"none","full","min","max","fit","prose",{screen:[Gi]},Gi]}],h:[{h:[Je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Gi,Ki]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_y]}],"font-family":[{font:[Cu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",Xl,_y]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ci,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ci,Ki]}],"underline-offset":[{"underline-offset":["auto",ci,Je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),qU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",WU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},KU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ne()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[ci,Je]}],"outline-w":[{outline:[ci,Ki]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ci,Ki]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Gi,GU]}],"shadow-color":[{shadow:[Cu]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Gi,Je]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Pu,Je]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ci,Ki,_y]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ZU=OU(XU);function qn(...t){return ZU(NP(t))}const e4=TF,$P=T.forwardRef(({className:t,...e},n)=>_.jsx(bP,{ref:n,className:qn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$P.displayName=bP.displayName;const t4=DP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),BP=T.forwardRef(({className:t,variant:e,...n},r)=>_.jsx(AP,{ref:r,className:qn(t4({variant:e}),t),...n}));BP.displayName=AP.displayName;const zP=T.forwardRef(({className:t,...e},n)=>_.jsx(PP,{ref:n,className:qn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));zP.displayName=PP.displayName;const WP=T.forwardRef(({className:t,...e},n)=>_.jsx(CP,{ref:n,className:qn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:_.jsx(f0,{className:"h-4 w-4"})}));WP.displayName=CP.displayName;const qP=T.forwardRef(({className:t,...e},n)=>_.jsx(xP,{ref:n,className:qn("text-sm font-semibold",t),...e}));qP.displayName=xP.displayName;const HP=T.forwardRef(({className:t,...e},n)=>_.jsx(RP,{ref:n,className:qn("text-sm opacity-90",t),...e}));HP.displayName=RP.displayName;function n4(){const{toasts:t}=o0();return _.jsxs(e4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return _.jsxs(BP,{...i,children:[_.jsxs("div",{className:"grid gap-1",children:[n&&_.jsx(qP,{children:n}),r&&_.jsx(HP,{children:r})]}),s,_.jsx(WP,{})]},e)}),_.jsx($P,{})]})}var Vm=["light","dark"],p0="(prefers-color-scheme: dark)",r4=typeof window>"u",g0=T.createContext(void 0),s4={setTheme:t=>{},themes:[]},KP=()=>{var t;return(t=T.useContext(g0))!=null?t:s4},i4=t=>T.useContext(g0)?t.children:T.createElement(a4,{...t}),o4=["light","dark"],a4=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=o4,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=T.useState(()=>XS(s,o)),[m,S]=T.useState(()=>XS(s)),p=l?Object.values(l):i,v=T.useCallback(R=>{let k=R;if(!k)return;R==="system"&&n&&(k=ZS());let L=l?l[k]:k,x=e?c4():null,b=document.documentElement;if(a==="class"?(b.classList.remove(...p),L&&b.classList.add(L)):L?b.setAttribute(a,L):b.removeAttribute(a),r){let A=Vm.includes(o)?o:null,P=Vm.includes(k)?k:A;b.style.colorScheme=P}x==null||x()},[]),w=T.useCallback(R=>{let k=typeof R=="function"?R(R):R;f(k);try{localStorage.setItem(s,k)}catch{}},[t]),y=T.useCallback(R=>{let k=ZS(R);S(k),h==="system"&&n&&!t&&v("system")},[h,t]);T.useEffect(()=>{let R=window.matchMedia(p0);return R.addListener(y),y(R),()=>R.removeListener(y)},[y]),T.useEffect(()=>{let R=k=>{if(k.key!==s)return;let L=k.newValue||o;w(L)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[w]),T.useEffect(()=>{v(t??h)},[t,h]);let E=T.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,w,t,m,n,i]);return T.createElement(g0.Provider,{value:E},T.createElement(l4,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:p,nonce:d}),c)},l4=T.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Vm.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(S,p=!1,v=!0)=>{let w=o?o[S]:S,y=p?S+"|| ''":`'${w}'`,E="";return s&&v&&!p&&Vm.includes(S)&&(E+=`d.style.colorScheme = '${S}';`),n==="class"?p||w?E+=`c.add(${y})`:E+="null":w&&(E+=`d[s](n,${y})`),E},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${p0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return T.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),XS=(t,e)=>{if(r4)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},c4=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},ZS=t=>(t||(t=window.matchMedia(p0)),t.matches?"dark":"light"),u4=t=>{switch(t){case"success":return f4;case"info":return p4;case"warning":return m4;case"error":return g4;default:return null}},d4=Array(12).fill(0),h4=({visible:t,className:e})=>U.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},U.createElement("div",{className:"sonner-spinner"},d4.map((n,r)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),f4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),m4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),p4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),g4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),y4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),v4=()=>{let[t,e]=U.useState(document.hidden);return U.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},ow=1,w4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ow++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],U.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(E4(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||ow++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ir=new w4,_4=(t,e)=>{let n=(e==null?void 0:e.id)||ow++;return Ir.addToast({title:t,...e,id:n}),n},E4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",I4=_4,S4=()=>Ir.toasts,T4=()=>Ir.getActiveToasts(),Jn=Object.assign(I4,{success:Ir.success,info:Ir.info,warning:Ir.warning,error:Ir.error,custom:Ir.custom,message:Ir.message,promise:Ir.promise,dismiss:Ir.dismiss,loading:Ir.loading},{getHistory:S4,getToasts:T4});function b4(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}b4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function cf(t){return t.label!==void 0}var A4=3,x4="32px",R4="16px",eT=4e3,P4=356,C4=14,k4=20,N4=200;function hs(...t){return t.filter(Boolean).join(" ")}function D4(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var O4=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:S,interacting:p,setHeights:v,visibleToasts:w,heights:y,index:E,toasts:R,expanded:k,removeToast:L,defaultRichColors:x,closeButton:b,style:A,cancelButtonStyle:P,actionButtonStyle:N,className:O="",descriptionClassName:C="",duration:$,position:re,gap:ne,loadingIcon:fe,expandByDefault:j,classNames:H,icons:le,closeButtonAriaLabel:ge="Close toast",pauseWhenPageIsHidden:J}=t,[M,Ee]=U.useState(null),[De,Qe]=U.useState(null),[Ce,Rt]=U.useState(!1),[Ge,Ue]=U.useState(!1),[Be,qt]=U.useState(!1),[Ht,Kn]=U.useState(!1),[Nr,yn]=U.useState(!1),[yr,Ve]=U.useState(0),[lt,rn]=U.useState(0),vr=U.useRef(m.duration||$||eT),$i=U.useRef(null),wr=U.useRef(null),ta=E===0,Ds=E+1<=w,Fn=m.type,Dr=m.dismissible!==!1,sn=m.className||"",pl=m.descriptionClassName||"",oi=U.useMemo(()=>y.findIndex(G=>G.toastId===m.id)||0,[y,m.id]),ai=U.useMemo(()=>{var G;return(G=m.closeButton)!=null?G:b},[m.closeButton,b]),na=U.useMemo(()=>m.duration||$||eT,[m.duration,$]),es=U.useRef(0),Or=U.useRef(0),Y=U.useRef(0),B=U.useRef(null),[q,te]=re.split("-"),oe=U.useMemo(()=>y.reduce((G,ue,he)=>he>=oi?G:G+ue.height,0),[y,oi]),se=v4(),ye=m.invert||f,X=Fn==="loading";Or.current=U.useMemo(()=>oi*ne+oe,[oi,oe]),U.useEffect(()=>{vr.current=na},[na]),U.useEffect(()=>{Rt(!0)},[]),U.useEffect(()=>{let G=wr.current;if(G){let ue=G.getBoundingClientRect().height;return rn(ue),v(he=>[{toastId:m.id,height:ue,position:m.position},...he]),()=>v(he=>he.filter(de=>de.toastId!==m.id))}},[v,m.id]),U.useLayoutEffect(()=>{if(!Ce)return;let G=wr.current,ue=G.style.height;G.style.height="auto";let he=G.getBoundingClientRect().height;G.style.height=ue,rn(he),v(de=>de.find(ce=>ce.toastId===m.id)?de.map(ce=>ce.toastId===m.id?{...ce,height:he}:ce):[{toastId:m.id,height:he,position:m.position},...de])},[Ce,m.title,m.description,v,m.id]);let we=U.useCallback(()=>{Ue(!0),Ve(Or.current),v(G=>G.filter(ue=>ue.toastId!==m.id)),setTimeout(()=>{L(m)},N4)},[m,L,v,Or]);U.useEffect(()=>{if(m.promise&&Fn==="loading"||m.duration===1/0||m.type==="loading")return;let G;return k||p||J&&se?(()=>{if(Y.current<es.current){let ue=new Date().getTime()-es.current;vr.current=vr.current-ue}Y.current=new Date().getTime()})():vr.current!==1/0&&(es.current=new Date().getTime(),G=setTimeout(()=>{var ue;(ue=m.onAutoClose)==null||ue.call(m,m),we()},vr.current)),()=>clearTimeout(G)},[k,p,m,Fn,J,se,we]),U.useEffect(()=>{m.delete&&we()},[we,m.delete]);function xe(){var G,ue,he;return le!=null&&le.loading?U.createElement("div",{className:hs(H==null?void 0:H.loader,(G=m==null?void 0:m.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":Fn==="loading"},le.loading):fe?U.createElement("div",{className:hs(H==null?void 0:H.loader,(ue=m==null?void 0:m.classNames)==null?void 0:ue.loader,"sonner-loader"),"data-visible":Fn==="loading"},fe):U.createElement(h4,{className:hs(H==null?void 0:H.loader,(he=m==null?void 0:m.classNames)==null?void 0:he.loader),visible:Fn==="loading"})}return U.createElement("li",{tabIndex:0,ref:wr,className:hs(O,sn,H==null?void 0:H.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,H==null?void 0:H.default,H==null?void 0:H[Fn],(n=m==null?void 0:m.classNames)==null?void 0:n[Fn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:x,"data-styled":!(m.jsx||m.unstyled||S),"data-mounted":Ce,"data-promise":!!m.promise,"data-swiped":Nr,"data-removed":Ge,"data-visible":Ds,"data-y-position":q,"data-x-position":te,"data-index":E,"data-front":ta,"data-swiping":Be,"data-dismissible":Dr,"data-type":Fn,"data-invert":ye,"data-swipe-out":Ht,"data-swipe-direction":De,"data-expanded":!!(k||j&&Ce),style:{"--index":E,"--toasts-before":E,"--z-index":R.length-E,"--offset":`${Ge?yr:Or.current}px`,"--initial-height":j?"auto":`${lt}px`,...A,...m.style},onDragEnd:()=>{qt(!1),Ee(null),B.current=null},onPointerDown:G=>{X||!Dr||($i.current=new Date,Ve(Or.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(qt(!0),B.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,ue,he,de;if(Ht||!Dr)return;B.current=null;let ce=Number(((G=wr.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Re=Number(((ue=wr.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ot=new Date().getTime()-((he=$i.current)==null?void 0:he.getTime()),Tt=M==="x"?ce:Re,bt=Math.abs(Tt)/ot;if(Math.abs(Tt)>=k4||bt>.11){Ve(Or.current),(de=m.onDismiss)==null||de.call(m,m),Qe(M==="x"?ce>0?"right":"left":Re>0?"down":"up"),we(),Kn(!0),yn(!1);return}qt(!1),Ee(null)},onPointerMove:G=>{var ue,he,de,ce;if(!B.current||!Dr||((ue=window.getSelection())==null?void 0:ue.toString().length)>0)return;let Re=G.clientY-B.current.y,ot=G.clientX-B.current.x,Tt=(he=t.swipeDirections)!=null?he:D4(re);!M&&(Math.abs(ot)>1||Math.abs(Re)>1)&&Ee(Math.abs(ot)>Math.abs(Re)?"x":"y");let bt={x:0,y:0};M==="y"?(Tt.includes("top")||Tt.includes("bottom"))&&(Tt.includes("top")&&Re<0||Tt.includes("bottom")&&Re>0)&&(bt.y=Re):M==="x"&&(Tt.includes("left")||Tt.includes("right"))&&(Tt.includes("left")&&ot<0||Tt.includes("right")&&ot>0)&&(bt.x=ot),(Math.abs(bt.x)>0||Math.abs(bt.y)>0)&&yn(!0),(de=wr.current)==null||de.style.setProperty("--swipe-amount-x",`${bt.x}px`),(ce=wr.current)==null||ce.style.setProperty("--swipe-amount-y",`${bt.y}px`)}},ai&&!m.jsx?U.createElement("button",{"aria-label":ge,"data-disabled":X,"data-close-button":!0,onClick:X||!Dr?()=>{}:()=>{var G;we(),(G=m.onDismiss)==null||G.call(m,m)},className:hs(H==null?void 0:H.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=le==null?void 0:le.close)!=null?i:y4):null,m.jsx||T.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:U.createElement(U.Fragment,null,Fn||m.icon||m.promise?U.createElement("div",{"data-icon":"",className:hs(H==null?void 0:H.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||xe():null,m.type!=="loading"?m.icon||(le==null?void 0:le[Fn])||u4(Fn):null):null,U.createElement("div",{"data-content":"",className:hs(H==null?void 0:H.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},U.createElement("div",{"data-title":"",className:hs(H==null?void 0:H.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?U.createElement("div",{"data-description":"",className:hs(C,pl,H==null?void 0:H.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),T.isValidElement(m.cancel)?m.cancel:m.cancel&&cf(m.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:G=>{var ue,he;cf(m.cancel)&&Dr&&((he=(ue=m.cancel).onClick)==null||he.call(ue,G),we())},className:hs(H==null?void 0:H.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,T.isValidElement(m.action)?m.action:m.action&&cf(m.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||N,onClick:G=>{var ue,he;cf(m.action)&&((he=(ue=m.action).onClick)==null||he.call(ue,G),!G.defaultPrevented&&we())},className:hs(H==null?void 0:H.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function tT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function L4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?R4:x4;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var V4=T.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:S=A4,toastOptions:p,dir:v=tT(),gap:w=C4,loadingIcon:y,icons:E,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:k}=t,[L,x]=U.useState([]),b=U.useMemo(()=>Array.from(new Set([r].concat(L.filter(J=>J.position).map(J=>J.position)))),[L,r]),[A,P]=U.useState([]),[N,O]=U.useState(!1),[C,$]=U.useState(!1),[re,ne]=U.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=U.useRef(null),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=U.useRef(null),le=U.useRef(!1),ge=U.useCallback(J=>{x(M=>{var Ee;return(Ee=M.find(De=>De.id===J.id))!=null&&Ee.delete||Ir.dismiss(J.id),M.filter(({id:De})=>De!==J.id)})},[]);return U.useEffect(()=>Ir.subscribe(J=>{if(J.dismiss){x(M=>M.map(Ee=>Ee.id===J.id?{...Ee,delete:!0}:Ee));return}setTimeout(()=>{sP.flushSync(()=>{x(M=>{let Ee=M.findIndex(De=>De.id===J.id);return Ee!==-1?[...M.slice(0,Ee),{...M[Ee],...J},...M.slice(Ee+1)]:[J,...M]})})})}),[]),U.useEffect(()=>{if(d!=="system"){ne(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:M})=>{ne(M?"dark":"light")})}catch{J.addListener(({matches:Ee})=>{try{ne(Ee?"dark":"light")}catch(De){console.error(De)}})}},[d]),U.useEffect(()=>{L.length<=1&&O(!1)},[L]),U.useEffect(()=>{let J=M=>{var Ee,De;s.every(Qe=>M[Qe]||M.code===Qe)&&(O(!0),(Ee=fe.current)==null||Ee.focus()),M.code==="Escape"&&(document.activeElement===fe.current||(De=fe.current)!=null&&De.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[s]),U.useEffect(()=>{if(fe.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,le.current=!1)}},[fe.current]),U.createElement("section",{ref:e,"aria-label":`${R} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},b.map((J,M)=>{var Ee;let[De,Qe]=J.split("-");return L.length?U.createElement("ol",{key:J,dir:v==="auto"?tT():v,tabIndex:-1,ref:fe,className:a,"data-sonner-toaster":!0,"data-theme":re,"data-y-position":De,"data-lifted":N&&L.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((Ee=A[0])==null?void 0:Ee.height)||0}px`,"--width":`${P4}px`,"--gap":`${w}px`,...m,...L4(l,c)},onBlur:Ce=>{le.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(le.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||le.current||(le.current=!0,H.current=Ce.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{C||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},L.filter(Ce=>!Ce.position&&M===0||Ce.position===J).map((Ce,Rt)=>{var Ge,Ue;return U.createElement(O4,{key:Ce.id,icons:E,index:Rt,toast:Ce,defaultRichColors:h,duration:(Ge=p==null?void 0:p.duration)!=null?Ge:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:S,closeButton:(Ue=p==null?void 0:p.closeButton)!=null?Ue:o,interacting:C,position:J,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:ge,toasts:L.filter(Be=>Be.position==Ce.position),heights:A.filter(Be=>Be.position==Ce.position),setHeights:P,expandByDefault:i,gap:w,loadingIcon:y,expanded:N,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const M4=({...t})=>{const{theme:e="system"}=KP();return _.jsx(V4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var F4=p_[" useId ".trim().toString()]||(()=>{}),U4=0;function Ey(t){const[e,n]=T.useState(F4());return Ri(()=>{n(r=>r??String(U4++))},[t]),t||(e?`radix-${e}`:"")}const j4=["top","right","bottom","left"],Mo=Math.min,Ur=Math.max,Mm=Math.round,uf=Math.floor,Ys=t=>({x:t,y:t}),$4={left:"right",right:"left",bottom:"top",top:"bottom"},B4={start:"end",end:"start"};function aw(t,e,n){return Ur(t,Mo(e,n))}function Pi(t,e){return typeof t=="function"?t(e):t}function Ci(t){return t.split("-")[0]}function Kc(t){return t.split("-")[1]}function y0(t){return t==="x"?"y":"x"}function v0(t){return t==="y"?"height":"width"}const z4=new Set(["top","bottom"]);function Ws(t){return z4.has(Ci(t))?"y":"x"}function w0(t){return y0(Ws(t))}function W4(t,e,n){n===void 0&&(n=!1);const r=Kc(t),s=w0(t),i=v0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Fm(o)),[o,Fm(o)]}function q4(t){const e=Fm(t);return[lw(t),e,lw(e)]}function lw(t){return t.replace(/start|end/g,e=>B4[e])}const nT=["left","right"],rT=["right","left"],H4=["top","bottom"],K4=["bottom","top"];function G4(t,e,n){switch(t){case"top":case"bottom":return n?e?rT:nT:e?nT:rT;case"left":case"right":return e?H4:K4;default:return[]}}function Q4(t,e,n,r){const s=Kc(t);let i=G4(Ci(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(lw)))),i}function Fm(t){return t.replace(/left|right|bottom|top/g,e=>$4[e])}function Y4(t){return{top:0,right:0,bottom:0,left:0,...t}}function GP(t){return typeof t!="number"?Y4(t):{top:t,right:t,bottom:t,left:t}}function Um(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function sT(t,e,n){let{reference:r,floating:s}=t;const i=Ws(e),o=w0(e),a=v0(o),l=Ci(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Kc(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const J4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=sT(c,r,l),f=r,m={},S=0;for(let p=0;p<a.length;p++){const{name:v,fn:w}=a[p],{x:y,y:E,data:R,reset:k}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=y??d,h=E??h,m={...m,[v]:{...m[v],...R}},k&&S<=50&&(S++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:d,y:h}=sT(c,f,l)),p=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Md(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Pi(e,t),S=GP(m),v=a[f?h==="floating"?"reference":"floating":h],w=Um(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Um(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:E,strategy:l}):y);return{top:(w.top-k.top+S.top)/R.y,bottom:(k.bottom-w.bottom+S.bottom)/R.y,left:(w.left-k.left+S.left)/R.x,right:(k.right-w.right+S.right)/R.x}}const X4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Pi(t,e)||{};if(c==null)return{};const h=GP(d),f={x:n,y:r},m=w0(s),S=v0(m),p=await o.getDimensions(c),v=m==="y",w=v?"top":"left",y=v?"bottom":"right",E=v?"clientHeight":"clientWidth",R=i.reference[S]+i.reference[m]-f[m]-i.floating[S],k=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=L?L[E]:0;(!x||!await(o.isElement==null?void 0:o.isElement(L)))&&(x=a.floating[E]||i.floating[S]);const b=R/2-k/2,A=x/2-p[S]/2-1,P=Mo(h[w],A),N=Mo(h[y],A),O=P,C=x-p[S]-N,$=x/2-p[S]/2+b,re=aw(O,$,C),ne=!l.arrow&&Kc(s)!=null&&$!==re&&i.reference[S]/2-($<O?P:N)-p[S]/2<0,fe=ne?$<O?$-O:$-C:0;return{[m]:f[m]+fe,data:{[m]:re,centerOffset:$-re-fe,...ne&&{alignmentOffset:fe}},reset:ne}}}),Z4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:p=!0,...v}=Pi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Ci(s),y=Ws(a),E=Ci(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(E||!p?[Fm(a)]:q4(a)),L=S!=="none";!f&&L&&k.push(...Q4(a,p,S,R));const x=[a,...k],b=await Md(e,v),A=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&A.push(b[w]),h){const $=W4(s,o,R);A.push(b[$[0]],b[$[1]])}if(P=[...P,{placement:s,overflows:A}],!A.every($=>$<=0)){var N,O;const $=(((N=i.flip)==null?void 0:N.index)||0)+1,re=x[$];if(re&&(!(h==="alignment"?y!==Ws(re):!1)||P.every(j=>Ws(j.placement)===y?j.overflows[0]>0:!0)))return{data:{index:$,overflows:P},reset:{placement:re}};let ne=(O=P.filter(fe=>fe.overflows[0]<=0).sort((fe,j)=>fe.overflows[1]-j.overflows[1])[0])==null?void 0:O.placement;if(!ne)switch(m){case"bestFit":{var C;const fe=(C=P.filter(j=>{if(L){const H=Ws(j.placement);return H===y||H==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(H=>H>0).reduce((H,le)=>H+le,0)]).sort((j,H)=>j[1]-H[1])[0])==null?void 0:C[0];fe&&(ne=fe);break}case"initialPlacement":ne=a;break}if(s!==ne)return{reset:{placement:ne}}}return{}}}};function iT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function oT(t){return j4.some(e=>t[e]>=0)}const ej=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Pi(t,e);switch(r){case"referenceHidden":{const i=await Md(e,{...s,elementContext:"reference"}),o=iT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:oT(o)}}}case"escaped":{const i=await Md(e,{...s,altBoundary:!0}),o=iT(i,n.floating);return{data:{escapedOffsets:o,escaped:oT(o)}}}default:return{}}}}},QP=new Set(["left","top"]);async function tj(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ci(n),a=Kc(n),l=Ws(n)==="y",c=QP.has(o)?-1:1,d=i&&l?-1:1,h=Pi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:S}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof S=="number"&&(m=a==="end"?S*-1:S),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const nj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await tj(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},rj=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:w,y}=v;return{x:w,y}}},...l}=Pi(t,e),c={x:n,y:r},d=await Md(e,l),h=Ws(Ci(s)),f=y0(h);let m=c[f],S=c[h];if(i){const v=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=m+d[v],E=m-d[w];m=aw(y,m,E)}if(o){const v=h==="y"?"top":"left",w=h==="y"?"bottom":"right",y=S+d[v],E=S-d[w];S=aw(y,S,E)}const p=a.fn({...e,[f]:m,[h]:S});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:i,[h]:o}}}}}},sj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Pi(t,e),d={x:n,y:r},h=Ws(s),f=y0(h);let m=d[f],S=d[h];const p=Pi(a,e),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const E=f==="y"?"height":"width",R=i.reference[f]-i.floating[E]+v.mainAxis,k=i.reference[f]+i.reference[E]-v.mainAxis;m<R?m=R:m>k&&(m=k)}if(c){var w,y;const E=f==="y"?"width":"height",R=QP.has(Ci(s)),k=i.reference[h]-i.floating[E]+(R&&((w=o.offset)==null?void 0:w[h])||0)+(R?0:v.crossAxis),L=i.reference[h]+i.reference[E]+(R?0:((y=o.offset)==null?void 0:y[h])||0)-(R?v.crossAxis:0);S<k?S=k:S>L&&(S=L)}return{[f]:m,[h]:S}}}},ij=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Pi(t,e),d=await Md(e,c),h=Ci(s),f=Kc(s),m=Ws(s)==="y",{width:S,height:p}=i.floating;let v,w;h==="top"||h==="bottom"?(v=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,v=f==="end"?"top":"bottom");const y=p-d.top-d.bottom,E=S-d.left-d.right,R=Mo(p-d[v],y),k=Mo(S-d[w],E),L=!e.middlewareData.shift;let x=R,b=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(b=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=y),L&&!f){const P=Ur(d.left,0),N=Ur(d.right,0),O=Ur(d.top,0),C=Ur(d.bottom,0);m?b=S-2*(P!==0||N!==0?P+N:Ur(d.left,d.right)):x=p-2*(O!==0||C!==0?O+C:Ur(d.top,d.bottom))}await l({...e,availableWidth:b,availableHeight:x});const A=await o.getDimensions(a.floating);return S!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function Kp(){return typeof window<"u"}function Gc(t){return YP(t)?(t.nodeName||"").toLowerCase():"#document"}function Kr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ni(t){var e;return(e=(YP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function YP(t){return Kp()?t instanceof Node||t instanceof Kr(t).Node:!1}function As(t){return Kp()?t instanceof Element||t instanceof Kr(t).Element:!1}function Zs(t){return Kp()?t instanceof HTMLElement||t instanceof Kr(t).HTMLElement:!1}function aT(t){return!Kp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Kr(t).ShadowRoot}const oj=new Set(["inline","contents"]);function yh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=xs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!oj.has(s)}const aj=new Set(["table","td","th"]);function lj(t){return aj.has(Gc(t))}const cj=[":popover-open",":modal"];function Gp(t){return cj.some(e=>{try{return t.matches(e)}catch{return!1}})}const uj=["transform","translate","scale","rotate","perspective"],dj=["transform","translate","scale","rotate","perspective","filter"],hj=["paint","layout","strict","content"];function _0(t){const e=E0(),n=As(t)?xs(t):t;return uj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||dj.some(r=>(n.willChange||"").includes(r))||hj.some(r=>(n.contain||"").includes(r))}function fj(t){let e=Fo(t);for(;Zs(e)&&!wc(e);){if(_0(e))return e;if(Gp(e))return null;e=Fo(e)}return null}function E0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mj=new Set(["html","body","#document"]);function wc(t){return mj.has(Gc(t))}function xs(t){return Kr(t).getComputedStyle(t)}function Qp(t){return As(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Fo(t){if(Gc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||aT(t)&&t.host||ni(t);return aT(e)?e.host:e}function JP(t){const e=Fo(t);return wc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zs(e)&&yh(e)?e:JP(e)}function Fd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=JP(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Kr(s);if(i){const a=cw(o);return e.concat(o,o.visualViewport||[],yh(s)?s:[],a&&n?Fd(a):[])}return e.concat(s,Fd(s,[],n))}function cw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function XP(t){const e=xs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Zs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Mm(n)!==i||Mm(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function I0(t){return As(t)?t:t.contextElement}function Zl(t){const e=I0(t);if(!Zs(e))return Ys(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=XP(e);let o=(i?Mm(n.width):n.width)/r,a=(i?Mm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const pj=Ys(0);function ZP(t){const e=Kr(t);return!E0()||!e.visualViewport?pj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Kr(t)?!1:e}function Xa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=I0(t);let o=Ys(1);e&&(r?As(r)&&(o=Zl(r)):o=Zl(t));const a=gj(i,n,r)?ZP(i):Ys(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Kr(i),m=r&&As(r)?Kr(r):r;let S=f,p=cw(S);for(;p&&r&&m!==S;){const v=Zl(p),w=p.getBoundingClientRect(),y=xs(p),E=w.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,R=w.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=E,c+=R,S=Kr(p),p=cw(S)}}return Um({width:d,height:h,x:l,y:c})}function Yp(t,e){const n=Qp(t).scrollLeft;return e?e.left+n:Xa(ni(t)).left+n}function eC(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Yp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function yj(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ni(r),a=e?Gp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Ys(1);const d=Ys(0),h=Zs(r);if((h||!h&&!i)&&((Gc(r)!=="body"||yh(o))&&(l=Qp(r)),Zs(r))){const m=Xa(r);c=Zl(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?eC(o,l):Ys(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function vj(t){return Array.from(t.getClientRects())}function wj(t){const e=ni(t),n=Qp(t),r=t.ownerDocument.body,s=Ur(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ur(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Yp(t);const a=-n.scrollTop;return xs(r).direction==="rtl"&&(o+=Ur(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const lT=25;function _j(t,e){const n=Kr(t),r=ni(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=E0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Yp(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,S=Math.abs(r.clientWidth-h.clientWidth-m);S<=lT&&(i-=S)}else c<=lT&&(i+=c);return{width:i,height:o,x:a,y:l}}const Ej=new Set(["absolute","fixed"]);function Ij(t,e){const n=Xa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Zs(t)?Zl(t):Ys(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function cT(t,e,n){let r;if(e==="viewport")r=_j(t,n);else if(e==="document")r=wj(ni(t));else if(As(e))r=Ij(e,n);else{const s=ZP(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Um(r)}function tC(t,e){const n=Fo(t);return n===e||!As(n)||wc(n)?!1:xs(n).position==="fixed"||tC(n,e)}function Sj(t,e){const n=e.get(t);if(n)return n;let r=Fd(t,[],!1).filter(a=>As(a)&&Gc(a)!=="body"),s=null;const i=xs(t).position==="fixed";let o=i?Fo(t):t;for(;As(o)&&!wc(o);){const a=xs(o),l=_0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&Ej.has(s.position)||yh(o)&&!l&&tC(t,o))?r=r.filter(d=>d!==o):s=a,o=Fo(o)}return e.set(t,r),r}function Tj(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Gp(e)?[]:Sj(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=cT(e,d,s);return c.top=Ur(h.top,c.top),c.right=Mo(h.right,c.right),c.bottom=Mo(h.bottom,c.bottom),c.left=Ur(h.left,c.left),c},cT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function bj(t){const{width:e,height:n}=XP(t);return{width:e,height:n}}function Aj(t,e,n){const r=Zs(e),s=ni(e),i=n==="fixed",o=Xa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ys(0);function c(){l.x=Yp(s)}if(r||!r&&!i)if((Gc(e)!=="body"||yh(s))&&(a=Qp(e)),r){const m=Xa(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?eC(s,a):Ys(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Iy(t){return xs(t).position==="static"}function uT(t,e){if(!Zs(t)||xs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ni(t)===n&&(n=n.ownerDocument.body),n}function nC(t,e){const n=Kr(t);if(Gp(t))return n;if(!Zs(t)){let s=Fo(t);for(;s&&!wc(s);){if(As(s)&&!Iy(s))return s;s=Fo(s)}return n}let r=uT(t,e);for(;r&&lj(r)&&Iy(r);)r=uT(r,e);return r&&wc(r)&&Iy(r)&&!_0(r)?n:r||fj(t)||n}const xj=async function(t){const e=this.getOffsetParent||nC,n=this.getDimensions,r=await n(t.floating);return{reference:Aj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rj(t){return xs(t).direction==="rtl"}const Pj={convertOffsetParentRelativeRectToViewportRelativeRect:yj,getDocumentElement:ni,getClippingRect:Tj,getOffsetParent:nC,getElementRects:xj,getClientRects:vj,getDimensions:bj,getScale:Zl,isElement:As,isRTL:Rj};function rC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Cj(t,e){let n=null,r;const s=ni(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const S=uf(h),p=uf(s.clientWidth-(d+f)),v=uf(s.clientHeight-(h+m)),w=uf(d),E={rootMargin:-S+"px "+-p+"px "+-v+"px "+-w+"px",threshold:Ur(0,Mo(1,l))||1};let R=!0;function k(L){const x=L[0].intersectionRatio;if(x!==l){if(!R)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!rC(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(k,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(t)}return o(!0),i}function kj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=I0(t),d=s||i?[...c?Fd(c):[],...Fd(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?Cj(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[y]=w;y&&y.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let S,p=l?Xa(t):null;l&&v();function v(){const w=Xa(t);p&&!rC(p,w)&&n(),p=w,S=requestAnimationFrame(v)}return n(),()=>{var w;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(S)}}const Nj=nj,Dj=rj,Oj=Z4,Lj=ij,Vj=ej,dT=X4,Mj=sj,Fj=(t,e,n)=>{const r=new Map,s={platform:Pj,...n},i={...s.platform,_c:r};return J4(t,e,{...s,platform:i})};var Uj=typeof document<"u",jj=function(){},qf=Uj?T.useLayoutEffect:jj;function jm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!jm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!jm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function sC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function hT(t,e){const n=sC(t);return Math.round(e*n)/n}function Sy(t){const e=T.useRef(t);return qf(()=>{e.current=t}),e}function $j(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=T.useState(r);jm(f,r)||m(r);const[S,p]=T.useState(null),[v,w]=T.useState(null),y=T.useCallback(j=>{j!==L.current&&(L.current=j,p(j))},[]),E=T.useCallback(j=>{j!==x.current&&(x.current=j,w(j))},[]),R=i||S,k=o||v,L=T.useRef(null),x=T.useRef(null),b=T.useRef(d),A=l!=null,P=Sy(l),N=Sy(s),O=Sy(c),C=T.useCallback(()=>{if(!L.current||!x.current)return;const j={placement:e,strategy:n,middleware:f};N.current&&(j.platform=N.current),Fj(L.current,x.current,j).then(H=>{const le={...H,isPositioned:O.current!==!1};$.current&&!jm(b.current,le)&&(b.current=le,ph.flushSync(()=>{h(le)}))})},[f,e,n,N,O]);qf(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[c]);const $=T.useRef(!1);qf(()=>($.current=!0,()=>{$.current=!1}),[]),qf(()=>{if(R&&(L.current=R),k&&(x.current=k),R&&k){if(P.current)return P.current(R,k,C);C()}},[R,k,C,P,A]);const re=T.useMemo(()=>({reference:L,floating:x,setReference:y,setFloating:E}),[y,E]),ne=T.useMemo(()=>({reference:R,floating:k}),[R,k]),fe=T.useMemo(()=>{const j={position:n,left:0,top:0};if(!ne.floating)return j;const H=hT(ne.floating,d.x),le=hT(ne.floating,d.y);return a?{...j,transform:"translate("+H+"px, "+le+"px)",...sC(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:le}},[n,a,ne.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:C,refs:re,elements:ne,floatingStyles:fe}),[d,C,re,ne,fe])}const Bj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?dT({element:r.current,padding:s}).fn(n):{}:r?dT({element:r,padding:s}).fn(n):{}}}},zj=(t,e)=>({...Nj(t),options:[t,e]}),Wj=(t,e)=>({...Dj(t),options:[t,e]}),qj=(t,e)=>({...Mj(t),options:[t,e]}),Hj=(t,e)=>({...Oj(t),options:[t,e]}),Kj=(t,e)=>({...Lj(t),options:[t,e]}),Gj=(t,e)=>({...Vj(t),options:[t,e]}),Qj=(t,e)=>({...Bj(t),options:[t,e]});var Yj="Arrow",iC=T.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return _.jsx(tn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});iC.displayName=Yj;var Jj=iC;function oC(t){const[e,n]=T.useState(void 0);return Ri(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var S0="Popper",[aC,lC]=qc(S0),[Xj,cC]=aC(S0),uC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=T.useState(null);return _.jsx(Xj,{scope:e,anchor:r,onAnchorChange:s,children:n})};uC.displayName=S0;var dC="PopperAnchor",hC=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=cC(dC,n),o=T.useRef(null),a=Wn(e,o),l=T.useRef(null);return T.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:_.jsx(tn.div,{...s,ref:a})});hC.displayName=dC;var T0="PopperContent",[Zj,e3]=aC(T0),fC=T.forwardRef((t,e)=>{var Ce,Rt,Ge,Ue,Be,qt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:S,...p}=t,v=cC(T0,n),[w,y]=T.useState(null),E=Wn(e,Ht=>y(Ht)),[R,k]=T.useState(null),L=oC(R),x=(L==null?void 0:L.width)??0,b=(L==null?void 0:L.height)??0,A=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(c)?c:[c],O=N.length>0,C={padding:P,boundary:N.filter(n3),altBoundary:O},{refs:$,floatingStyles:re,placement:ne,isPositioned:fe,middlewareData:j}=$j({strategy:"fixed",placement:A,whileElementsMounted:(...Ht)=>kj(...Ht,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[zj({mainAxis:s+b,alignmentAxis:o}),l&&Wj({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?qj():void 0,...C}),l&&Hj({...C}),Kj({...C,apply:({elements:Ht,rects:Kn,availableWidth:Nr,availableHeight:yn})=>{const{width:yr,height:Ve}=Kn.reference,lt=Ht.floating.style;lt.setProperty("--radix-popper-available-width",`${Nr}px`),lt.setProperty("--radix-popper-available-height",`${yn}px`),lt.setProperty("--radix-popper-anchor-width",`${yr}px`),lt.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),R&&Qj({element:R,padding:a}),r3({arrowWidth:x,arrowHeight:b}),f&&Gj({strategy:"referenceHidden",...C})]}),[H,le]=gC(ne),ge=Xs(S);Ri(()=>{fe&&(ge==null||ge())},[fe,ge]);const J=(Ce=j.arrow)==null?void 0:Ce.x,M=(Rt=j.arrow)==null?void 0:Rt.y,Ee=((Ge=j.arrow)==null?void 0:Ge.centerOffset)!==0,[De,Qe]=T.useState();return Ri(()=>{w&&Qe(window.getComputedStyle(w).zIndex)},[w]),_.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:fe?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(Ue=j.transformOrigin)==null?void 0:Ue.x,(Be=j.transformOrigin)==null?void 0:Be.y].join(" "),...((qt=j.hide)==null?void 0:qt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:_.jsx(Zj,{scope:n,placedSide:H,onArrowChange:k,arrowX:J,arrowY:M,shouldHideArrow:Ee,children:_.jsx(tn.div,{"data-side":H,"data-align":le,...p,ref:E,style:{...p.style,animation:fe?void 0:"none"}})})})});fC.displayName=T0;var mC="PopperArrow",t3={top:"bottom",right:"left",bottom:"top",left:"right"},pC=T.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=e3(mC,r),o=t3[i.placedSide];return _.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:_.jsx(Jj,{...s,ref:n,style:{...s.style,display:"block"}})})});pC.displayName=mC;function n3(t){return t!==null}var r3=t=>({name:"transformOrigin",options:t,fn(e){var v,w,y;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=gC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,m=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let S="",p="";return c==="bottom"?(S=o?h:`${f}px`,p=`${-l}px`):c==="top"?(S=o?h:`${f}px`,p=`${r.floating.height+l}px`):c==="right"?(S=`${-l}px`,p=o?h:`${m}px`):c==="left"&&(S=`${r.floating.width+l}px`,p=o?h:`${m}px`),{data:{x:S,y:p}}}});function gC(t){const[e,n="center"]=t.split("-");return[e,n]}var SG=uC,s3=hC,i3=fC,o3=pC,[Jp]=qc("Tooltip",[lC]),b0=lC(),yC="TooltipProvider",a3=700,fT="tooltip.open",[l3,vC]=Jp(yC),wC=t=>{const{__scopeTooltip:e,delayDuration:n=a3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=T.useRef(!0),a=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),_.jsx(l3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:T.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};wC.displayName=yC;var _C="Tooltip",[TG,Xp]=Jp(_C),uw="TooltipTrigger",c3=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Xp(uw,n),i=vC(uw,n),o=b0(n),a=T.useRef(null),l=Wn(e,a,s.onTriggerChange),c=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),_.jsx(s3,{asChild:!0,...o,children:_.jsx(tn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Nt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Nt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Nt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Nt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Nt(t.onBlur,s.onClose),onClick:Nt(t.onClick,s.onClose)})})});c3.displayName=uw;var u3="TooltipPortal",[bG,d3]=Jp(u3,{forceMount:void 0}),_c="TooltipContent",EC=T.forwardRef((t,e)=>{const n=d3(_c,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Xp(_c,t.__scopeTooltip);return _.jsx(dl,{present:r||o.open,children:o.disableHoverableContent?_.jsx(IC,{side:s,...i,ref:e}):_.jsx(h3,{side:s,...i,ref:e})})}),h3=T.forwardRef((t,e)=>{const n=Xp(_c,t.__scopeTooltip),r=vC(_c,t.__scopeTooltip),s=T.useRef(null),i=Wn(e,s),[o,a]=T.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=T.useCallback(()=>{a(null),h(!1)},[h]),m=T.useCallback((S,p)=>{const v=S.currentTarget,w={x:S.clientX,y:S.clientY},y=y3(w,v.getBoundingClientRect()),E=v3(w,y),R=w3(p.getBoundingClientRect()),k=E3([...E,...R]);a(k),h(!0)},[h]);return T.useEffect(()=>()=>f(),[f]),T.useEffect(()=>{if(l&&d){const S=v=>m(v,d),p=v=>m(v,l);return l.addEventListener("pointerleave",S),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",S),d.removeEventListener("pointerleave",p)}}},[l,d,m,f]),T.useEffect(()=>{if(o){const S=p=>{const v=p.target,w={x:p.clientX,y:p.clientY},y=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),E=!_3(w,o);y?f():E&&(f(),c())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[l,d,o,c,f]),_.jsx(IC,{...t,ref:i})}),[f3,m3]=Jp(_C,{isInside:!1}),p3=VM("TooltipContent"),IC=T.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Xp(_c,n),c=b0(n),{onClose:d}=l;return T.useEffect(()=>(document.addEventListener(fT,d),()=>document.removeEventListener(fT,d)),[d]),T.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),_.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:_.jsxs(i3,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[_.jsx(p3,{children:r}),_.jsx(f3,{scope:n,isInside:!0,children:_.jsx(oF,{id:l.contentId,role:"tooltip",children:s||r})})]})})});EC.displayName=_c;var SC="TooltipArrow",g3=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=b0(n);return m3(SC,n).isInside?null:_.jsx(o3,{...s,...r,ref:e})});g3.displayName=SC;function y3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function v3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function w3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function _3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function E3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),I3(e)}function I3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var S3=wC,TC=EC;const T3=S3,b3=T.forwardRef(({className:t,sideOffset:e=4,...n},r)=>_.jsx(TC,{ref:r,sideOffset:e,className:qn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));b3.displayName=TC.displayName;var Zp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},A3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},oo,u_,Tx,x3=(Tx=class{constructor(){at(this,oo,A3);at(this,u_,!1)}setTimeoutProvider(t){ze(this,oo,t)}setTimeout(t,e){return K(this,oo).setTimeout(t,e)}clearTimeout(t){K(this,oo).clearTimeout(t)}setInterval(t,e){return K(this,oo).setInterval(t,e)}clearInterval(t){K(this,oo).clearInterval(t)}},oo=new WeakMap,u_=new WeakMap,Tx),$m=new x3;function R3(t){setTimeout(t,0)}var eg=typeof window>"u"||"Deno"in globalThis;function dr(){}function P3(t,e){return typeof t=="function"?t(e):t}function C3(t){return typeof t=="number"&&t>=0&&t!==1/0}function k3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function dw(t,e){return typeof t=="function"?t(e):t}function N3(t,e){return typeof t=="function"?t(e):t}function mT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==A0(o,e.options))return!1}else if(!jd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function pT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ud(e.options.mutationKey)!==Ud(i))return!1}else if(!jd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function A0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ud)(t)}function Ud(t){return JSON.stringify(t,(e,n)=>hw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function jd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>jd(t[n],e[n])):!1}var D3=Object.prototype.hasOwnProperty;function bC(t,e){if(t===e)return t;const n=gT(t)&&gT(e);if(!n&&!(hw(t)&&hw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:D3.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=bC(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function AG(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function gT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hw(t){if(!yT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yT(t){return Object.prototype.toString.call(t)==="[object Object]"}function O3(t){return new Promise(e=>{$m.setTimeout(e,t)})}function L3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?bC(t,e):e}function V3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function M3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var x0=Symbol();function AC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===x0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function xG(t,e){return typeof t=="function"?t(...e):!!t}var La,ao,sc,bx,F3=(bx=class extends Zp{constructor(){super();at(this,La);at(this,ao);at(this,sc);ze(this,sc,e=>{if(!eg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,ao)||this.setEventListener(K(this,sc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ao))==null||e.call(this),ze(this,ao,void 0))}setEventListener(e){var n;ze(this,sc,e),(n=K(this,ao))==null||n.call(this),ze(this,ao,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,La)!==e&&(ze(this,La,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,La)=="boolean"?K(this,La):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},La=new WeakMap,ao=new WeakMap,sc=new WeakMap,bx),xC=new F3;function U3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function j3(t){var n;let e;if((n=t.then(r=>(e=r,r),dr))==null||n.catch(dr),e!==void 0)return{data:e}}function RC(t){return t}function $3(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function B3(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(dr),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function z3(t){return t.state.isPaused}function W3(t){return t.state.status==="success"}function q3(t){return!0}function H3(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??z3,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[$3(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??W3,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??q3,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??RC,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[B3(f,o,i)]:[]);return{mutations:r,queries:a}}function K3(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??RC,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:m,promise:S,dehydratedAt:p})=>{var L,x;const v=S?j3(S):void 0,w=h.data===void 0?v==null?void 0:v.data:h.data,y=w===void 0?w:i(w);let E=s.get(f);const R=(E==null?void 0:E.state.status)==="pending",k=(E==null?void 0:E.state.fetchStatus)==="fetching";if(E){const b=v&&p!==void 0&&p>E.state.dataUpdatedAt;if(h.dataUpdatedAt>E.state.dataUpdatedAt||b){const{fetchStatus:A,...P}=h;E.setState({...P,data:y})}}else E=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(x=n==null?void 0:n.defaultOptions)==null?void 0:x.queries,queryKey:d,queryHash:f,meta:m},{...h,data:y,fetchStatus:"idle",status:y!==void 0?"success":h.status});S&&!R&&!k&&(p===void 0||p>E.state.dataUpdatedAt)&&E.fetch(void 0,{initialPromise:Promise.resolve(S).then(i)}).catch(dr)})}var G3=R3;function Q3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=G3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var hr=Q3(),ic,lo,oc,Ax,Y3=(Ax=class extends Zp{constructor(){super();at(this,ic,!0);at(this,lo);at(this,oc);ze(this,oc,e=>{if(!eg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,lo)||this.setEventListener(K(this,oc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,lo))==null||e.call(this),ze(this,lo,void 0))}setEventListener(e){var n;ze(this,oc,e),(n=K(this,lo))==null||n.call(this),ze(this,lo,e(this.setOnline.bind(this)))}setOnline(e){K(this,ic)!==e&&(ze(this,ic,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,ic)}},ic=new WeakMap,lo=new WeakMap,oc=new WeakMap,Ax),Bm=new Y3;function J3(t){return Math.min(1e3*2**t,3e4)}function PC(t){return(t??"online")==="online"?Bm.isOnline():!0}var fw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function CC(t){let e=!1,n=0,r;const s=U3(),i=()=>s.status!=="pending",o=p=>{var v;if(!i()){const w=new fw(p);f(w),(v=t.onCancel)==null||v.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>xC.isFocused()&&(t.networkMode==="always"||Bm.isOnline())&&t.canRun(),d=()=>PC(t.networkMode)&&t.canRun(),h=p=>{i()||(r==null||r(),s.resolve(p))},f=p=>{i()||(r==null||r(),s.reject(p))},m=()=>new Promise(p=>{var v;r=w=>{(i()||c())&&p(w)},(v=t.onPause)==null||v.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),S=()=>{if(i())return;let p;const v=n===0?t.initialPromise:void 0;try{p=v??t.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(h).catch(w=>{var L;if(i())return;const y=t.retry??(eg?0:3),E=t.retryDelay??J3,R=typeof E=="function"?E(n,w):E,k=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,w);if(e||!k){f(w);return}n++,(L=t.onFail)==null||L.call(t,n,w),O3(R).then(()=>c()?void 0:m()).then(()=>{e?f(w):S()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?S():m().then(S),s)}}var Va,xx,kC=(xx=class{constructor(){at(this,Va)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),C3(this.gcTime)&&ze(this,Va,$m.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(eg?1/0:5*60*1e3))}clearGcTimeout(){K(this,Va)&&($m.clearTimeout(K(this,Va)),ze(this,Va,void 0))}},Va=new WeakMap,xx),Ma,ac,ns,Fa,Dn,ah,Ua,ms,ui,Rx,X3=(Rx=class extends kC{constructor(n){super();at(this,ms);at(this,Ma);at(this,ac);at(this,ns);at(this,Fa);at(this,Dn);at(this,ah);at(this,Ua);ze(this,Ua,!1),ze(this,ah,n.defaultOptions),this.setOptions(n.options),this.observers=[],ze(this,Fa,n.client),ze(this,ns,K(this,Fa).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ze(this,Ma,wT(this.options)),this.state=n.state??K(this,Ma),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Dn))==null?void 0:n.promise}setOptions(n){if(this.options={...K(this,ah),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=wT(this.options);r.data!==void 0&&(this.setState(vT(r.data,r.dataUpdatedAt)),ze(this,Ma,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,ns).remove(this)}setData(n,r){const s=L3(this.state.data,n,this.options);return Gn(this,ms,ui).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gn(this,ms,ui).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Dn))==null?void 0:s.promise;return(i=K(this,Dn))==null||i.cancel(n),r?r.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,Ma))}isActive(){return this.observers.some(n=>N3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===x0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>dw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!k3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Dn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Dn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,ns).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Dn)&&(K(this,Ua)?K(this,Dn).cancel({revert:!0}):K(this,Dn).cancelRetry()),this.scheduleGc()),K(this,ns).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gn(this,ms,ui).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,S,p,v,w,y,E,R;if(this.state.fetchStatus!=="idle"&&((c=K(this,Dn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Dn))return K(this,Dn).continueRetry(),K(this,Dn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const k=this.observers.find(L=>L.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,i=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ze(this,Ua,!0),s.signal)})},o=()=>{const k=AC(this.options,r),x=(()=>{const b={client:K(this,Fa),queryKey:this.queryKey,meta:this.meta};return i(b),b})();return ze(this,Ua,!1),this.options.persister?this.options.persister(k,x,this):k(x)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:K(this,Fa),state:this.state,fetchFn:o};return i(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),ze(this,ac,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gn(this,ms,ui).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ze(this,Dn,CC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof fw&&k.revert&&this.setState({...K(this,ac),fetchStatus:"idle"}),s.abort()},onFail:(k,L)=>{Gn(this,ms,ui).call(this,{type:"failed",failureCount:k,error:L})},onPause:()=>{Gn(this,ms,ui).call(this,{type:"pause"})},onContinue:()=>{Gn(this,ms,ui).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await K(this,Dn).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(S=(m=K(this,ns).config).onSuccess)==null||S.call(m,k,this),(v=(p=K(this,ns).config).onSettled)==null||v.call(p,k,this.state.error,this),k}catch(k){if(k instanceof fw){if(k.silent)return K(this,Dn).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Gn(this,ms,ui).call(this,{type:"error",error:k}),(y=(w=K(this,ns).config).onError)==null||y.call(w,k,this),(R=(E=K(this,ns).config).onSettled)==null||R.call(E,this.state.data,k,this),k}finally{this.scheduleGc()}}},Ma=new WeakMap,ac=new WeakMap,ns=new WeakMap,Fa=new WeakMap,Dn=new WeakMap,ah=new WeakMap,Ua=new WeakMap,ms=new WeakSet,ui=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Z3(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...vT(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ze(this,ac,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),hr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,ns).notify({query:this,type:"updated",action:n})})},Rx);function Z3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vT(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function wT(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function _T(t){return{onFetch:(e,n)=>{var d,h,f,m,S;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((S=e.state.data)==null?void 0:S.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},w=AC(e.options,e.fetchOptions),y=async(E,R,k)=>{if(p)return Promise.reject();if(R==null&&E.pages.length)return Promise.resolve(E);const x=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:R,direction:k?"backward":"forward",meta:e.options.meta};return v(N),N})(),b=await w(x),{maxPages:A}=e.options,P=k?M3:V3;return{pages:P(E.pages,b,A),pageParams:P(E.pageParams,R,A)}};if(s&&i.length){const E=s==="backward",R=E?e6:ET,k={pages:i,pageParams:o},L=R(r,k);a=await y(k,L,E)}else{const E=t??i.length;do{const R=l===0?o[0]??r.initialPageParam:ET(r,a);if(l>0&&R==null)break;a=await y(a,R),l++}while(l<E)}return a};e.options.persister?e.fetchFn=()=>{var p,v;return(v=(p=e.options).persister)==null?void 0:v.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function ET(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function e6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var lh,Fs,cr,ja,Us,Zi,Px,t6=(Px=class extends kC{constructor(n){super();at(this,Us);at(this,lh);at(this,Fs);at(this,cr);at(this,ja);ze(this,lh,n.client),this.mutationId=n.mutationId,ze(this,cr,n.mutationCache),ze(this,Fs,[]),this.state=n.state||n6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Fs).includes(n)||(K(this,Fs).push(n),this.clearGcTimeout(),K(this,cr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ze(this,Fs,K(this,Fs).filter(r=>r!==n)),this.scheduleGc(),K(this,cr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Fs).length||(this.state.status==="pending"?this.scheduleGc():K(this,cr).remove(this))}continue(){var n;return((n=K(this,ja))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,S,p,v,w,y,E,R,k,L,x,b,A,P;const r=()=>{Gn(this,Us,Zi).call(this,{type:"continue"})},s={client:K(this,lh),meta:this.options.meta,mutationKey:this.options.mutationKey};ze(this,ja,CC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(N,O)=>{Gn(this,Us,Zi).call(this,{type:"failed",failureCount:N,error:O})},onPause:()=>{Gn(this,Us,Zi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,cr).canRun(this)}));const i=this.state.status==="pending",o=!K(this,ja).canStart();try{if(i)r();else{Gn(this,Us,Zi).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=K(this,cr).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&Gn(this,Us,Zi).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const N=await K(this,ja).start();return await((f=(h=K(this,cr).config).onSuccess)==null?void 0:f.call(h,N,n,this.state.context,this,s)),await((S=(m=this.options).onSuccess)==null?void 0:S.call(m,N,n,this.state.context,s)),await((v=(p=K(this,cr).config).onSettled)==null?void 0:v.call(p,N,null,this.state.variables,this.state.context,this,s)),await((y=(w=this.options).onSettled)==null?void 0:y.call(w,N,null,n,this.state.context,s)),Gn(this,Us,Zi).call(this,{type:"success",data:N}),N}catch(N){try{throw await((R=(E=K(this,cr).config).onError)==null?void 0:R.call(E,N,n,this.state.context,this,s)),await((L=(k=this.options).onError)==null?void 0:L.call(k,N,n,this.state.context,s)),await((b=(x=K(this,cr).config).onSettled)==null?void 0:b.call(x,void 0,N,this.state.variables,this.state.context,this,s)),await((P=(A=this.options).onSettled)==null?void 0:P.call(A,void 0,N,n,this.state.context,s)),N}finally{Gn(this,Us,Zi).call(this,{type:"error",error:N})}}finally{K(this,cr).runNext(this)}}},lh=new WeakMap,Fs=new WeakMap,cr=new WeakMap,ja=new WeakMap,Us=new WeakSet,Zi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),hr.batch(()=>{K(this,Fs).forEach(s=>{s.onMutationUpdate(n)}),K(this,cr).notify({mutation:this,type:"updated",action:n})})},Px);function n6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fi,ps,ch,Cx,r6=(Cx=class extends Zp{constructor(e={}){super();at(this,fi);at(this,ps);at(this,ch);this.config=e,ze(this,fi,new Set),ze(this,ps,new Map),ze(this,ch,0)}build(e,n,r){const s=new t6({client:e,mutationCache:this,mutationId:++Bh(this,ch)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){K(this,fi).add(e);const n=df(e);if(typeof n=="string"){const r=K(this,ps).get(n);r?r.push(e):K(this,ps).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(K(this,fi).delete(e)){const n=df(e);if(typeof n=="string"){const r=K(this,ps).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&K(this,ps).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=df(e);if(typeof n=="string"){const r=K(this,ps).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=df(e);if(typeof n=="string"){const s=(r=K(this,ps).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hr.batch(()=>{K(this,fi).forEach(e=>{this.notify({type:"removed",mutation:e})}),K(this,fi).clear(),K(this,ps).clear()})}getAll(){return Array.from(K(this,fi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pT(n,r))}findAll(e={}){return this.getAll().filter(n=>pT(e,n))}notify(e){hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return hr.batch(()=>Promise.all(e.map(n=>n.continue().catch(dr))))}},fi=new WeakMap,ps=new WeakMap,ch=new WeakMap,Cx);function df(t){var e;return(e=t.options.scope)==null?void 0:e.id}var js,kx,s6=(kx=class extends Zp{constructor(e={}){super();at(this,js);this.config=e,ze(this,js,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??A0(s,n);let o=this.get(i);return o||(o=new X3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,js).has(e.queryHash)||(K(this,js).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,js).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,js).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,js).get(e)}getAll(){return[...K(this,js).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>mT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>mT(e,r)):n}notify(e){hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){hr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},js=new WeakMap,kx),an,co,uo,lc,cc,ho,uc,dc,Nx,i6=(Nx=class{constructor(t={}){at(this,an);at(this,co);at(this,uo);at(this,lc);at(this,cc);at(this,ho);at(this,uc);at(this,dc);ze(this,an,t.queryCache||new s6),ze(this,co,t.mutationCache||new r6),ze(this,uo,t.defaultOptions||{}),ze(this,lc,new Map),ze(this,cc,new Map),ze(this,ho,0)}mount(){Bh(this,ho)._++,K(this,ho)===1&&(ze(this,uc,xC.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,an).onFocus())})),ze(this,dc,Bm.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,an).onOnline())})))}unmount(){var t,e;Bh(this,ho)._--,K(this,ho)===0&&((t=K(this,uc))==null||t.call(this),ze(this,uc,void 0),(e=K(this,dc))==null||e.call(this),ze(this,dc,void 0))}isFetching(t){return K(this,an).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,co).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,an).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=K(this,an).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(dw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return K(this,an).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,an).get(r.queryHash),i=s==null?void 0:s.state.data,o=P3(e,i);if(o!==void 0)return K(this,an).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return hr.batch(()=>K(this,an).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,an).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,an);hr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,an);return hr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=hr.batch(()=>K(this,an).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return hr.batch(()=>(K(this,an).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=hr.batch(()=>K(this,an).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,an).build(this,e);return n.isStaleByTime(dw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=_T(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=_T(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Bm.isOnline()?K(this,co).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,an)}getMutationCache(){return K(this,co)}getDefaultOptions(){return K(this,uo)}setDefaultOptions(t){ze(this,uo,t)}setQueryDefaults(t,e){K(this,lc).set(Ud(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,lc).values()],n={};return e.forEach(r=>{jd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){K(this,cc).set(Ud(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,cc).values()],n={};return e.forEach(r=>{jd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=A0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===x0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,an).clear(),K(this,co).clear()}},an=new WeakMap,co=new WeakMap,uo=new WeakMap,lc=new WeakMap,cc=new WeakMap,ho=new WeakMap,uc=new WeakMap,dc=new WeakMap,Nx),NC=T.createContext(void 0),CG=t=>{const e=T.useContext(NC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},o6=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),_.jsx(NC.Provider,{value:t,children:e})),a6=["added","removed","updated"];function IT(t){return a6.includes(t)}async function l6({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();K3(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function ST({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:H3(t,r)};await e.persistClient(s)}function c6(t){const e=t.queryClient.getQueryCache().subscribe(r=>{IT(r.type)&&ST(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{IT(r.type)&&ST(t)});return()=>{e(),n()}}function u6(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=l6(t).then(()=>{e||(n=c6(t))});return[r,s]}function Ty(){}function d6({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:h6(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Ty,restoreClient:Ty,removeClient:Ty}}function h6(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=$m.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $d(){return $d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$d.apply(this,arguments)}var po;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(po||(po={}));const TT="popstate";function f6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return zm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Bd(s)}return DC(e,n,null,t)}function m6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=hl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),zm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Bd(i))}function r(s,i){R0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return DC(e,n,r,t)}function gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function R0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p6(){return Math.random().toString(36).substr(2,8)}function bT(t,e){return{usr:t.state,key:t.key,idx:e}}function zm(t,e,n,r){return n===void 0&&(n=null),$d({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hl(e):e,{state:n,key:e&&e.key||r||p6()})}function Bd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function DC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=po.Pop,l=null,c=d();c==null&&(c=0,o.replaceState($d({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=po.Pop;let v=d(),w=v==null?null:v-c;c=v,l&&l({action:a,location:p.location,delta:w})}function f(v,w){a=po.Push;let y=zm(p.location,v,w);n&&n(y,v),c=d()+1;let E=bT(y,c),R=p.createHref(y);try{o.pushState(E,"",R)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(R)}i&&l&&l({action:a,location:p.location,delta:1})}function m(v,w){a=po.Replace;let y=zm(p.location,v,w);n&&n(y,v),c=d();let E=bT(y,c),R=p.createHref(y);o.replaceState(E,"",R),i&&l&&l({action:a,location:p.location,delta:0})}function S(v){let w=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:Bd(v);return y=y.replace(/ $/,"%20"),gn(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let p={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(TT,h),l=v,()=>{s.removeEventListener(TT,h),l=null}},createHref(v){return e(s,v)},createURL:S,encodeLocation(v){let w=S(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(v){return o.go(v)}};return p}var AT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(AT||(AT={}));function g6(t,e,n){return n===void 0&&(n="/"),y6(t,e,n)}function y6(t,e,n,r){let s=typeof e=="string"?hl(e):e,i=P0(s.pathname||"/",n);if(i==null)return null;let o=OC(t);v6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=C6(i);a=x6(o[l],c)}return a}function OC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(gn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=xo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(gn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),OC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:b6(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of LC(i.path))s(i,o,l)}),e}function LC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=LC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function v6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:A6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const w6=/^:[\w-]+$/,_6=3,E6=2,I6=1,S6=10,T6=-2,xT=t=>t==="*";function b6(t,e){let n=t.split("/"),r=n.length;return n.some(xT)&&(r+=T6),e&&(r+=E6),n.filter(s=>!xT(s)).reduce((s,i)=>s+(w6.test(i)?_6:i===""?I6:S6),r)}function A6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function x6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=R6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:xo([i,h.pathname]),pathnameBase:O6(xo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=xo([i,h.pathnameBase]))}return o}function R6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=P6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const S=a[h];return m&&!S?c[f]=void 0:c[f]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function P6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),R0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function C6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return R0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function P0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function k6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?hl(t):t;return{pathname:n?n.startsWith("/")?n:N6(n,e):e,search:L6(r),hash:V6(s)}}function N6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function by(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function C0(t,e){let n=D6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function k0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=hl(t):(s=$d({},t),gn(!s.pathname||!s.pathname.includes("?"),by("?","pathname","search",s)),gn(!s.pathname||!s.pathname.includes("#"),by("#","pathname","hash",s)),gn(!s.search||!s.search.includes("#"),by("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=k6(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const xo=t=>t.join("/").replace(/\/\/+/g,"/"),O6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,V6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function M6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VC=["post","put","patch","delete"];new Set(VC);const F6=["get",...VC];new Set(F6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zd.apply(this,arguments)}const N0=T.createContext(null),U6=T.createContext(null),Yo=T.createContext(null),tg=T.createContext(null),Vi=T.createContext({outlet:null,matches:[],isDataRoute:!1}),MC=T.createContext(null);function j6(t,e){let{relative:n}=e===void 0?{}:e;Qc()||gn(!1);let{basename:r,navigator:s}=T.useContext(Yo),{hash:i,pathname:o,search:a}=UC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:xo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Qc(){return T.useContext(tg)!=null}function ri(){return Qc()||gn(!1),T.useContext(tg).location}function FC(t){T.useContext(Yo).static||T.useLayoutEffect(t)}function Yc(){let{isDataRoute:t}=T.useContext(Vi);return t?Z6():$6()}function $6(){Qc()||gn(!1);let t=T.useContext(N0),{basename:e,future:n,navigator:r}=T.useContext(Yo),{matches:s}=T.useContext(Vi),{pathname:i}=ri(),o=JSON.stringify(C0(s,n.v7_relativeSplatPath)),a=T.useRef(!1);return FC(()=>{a.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=k0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:xo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function kG(){let{matches:t}=T.useContext(Vi),e=t[t.length-1];return e?e.params:{}}function UC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(Yo),{matches:s}=T.useContext(Vi),{pathname:i}=ri(),o=JSON.stringify(C0(s,r.v7_relativeSplatPath));return T.useMemo(()=>k0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function B6(t,e){return z6(t,e)}function z6(t,e,n,r){Qc()||gn(!1);let{navigator:s}=T.useContext(Yo),{matches:i}=T.useContext(Vi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ri(),d;if(e){var h;let v=typeof e=="string"?hl(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||gn(!1),d=v}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let S=g6(t,{pathname:m}),p=G6(S&&S.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:xo([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:xo([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&p?T.createElement(tg.Provider,{value:{location:zd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:po.Pop}},p):p}function W6(){let t=X6(),e=M6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:s},n):null,null)}const q6=T.createElement(W6,null);class H6 extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(Vi.Provider,{value:this.props.routeContext},T.createElement(MC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function K6(t){let{routeContext:e,match:n,children:r}=t,s=T.useContext(N0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Vi.Provider,{value:e},r)}function G6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||gn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,S=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||S){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,S=!1,p=null,v=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||q6,l&&(c<0&&f===0?(e$("route-fallback"),S=!0,v=null):c===f&&(S=!0,v=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),y=()=>{let E;return m?E=p:S?E=v:h.route.Component?E=T.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,T.createElement(K6,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(H6,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var jC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jC||{}),$C=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($C||{});function Q6(t){let e=T.useContext(N0);return e||gn(!1),e}function Y6(t){let e=T.useContext(U6);return e||gn(!1),e}function J6(t){let e=T.useContext(Vi);return e||gn(!1),e}function BC(t){let e=J6(),n=e.matches[e.matches.length-1];return n.route.id||gn(!1),n.route.id}function X6(){var t;let e=T.useContext(MC),n=Y6(),r=BC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Z6(){let{router:t}=Q6(jC.UseNavigateStable),e=BC($C.UseNavigateStable),n=T.useRef(!1);return FC(()=>{n.current=!0}),T.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zd({fromRouteId:e},i)))},[t,e])}const RT={};function e$(t,e,n){RT[t]||(RT[t]=!0)}function zC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function NG(t){let{to:e,replace:n,state:r,relative:s}=t;Qc()||gn(!1);let{future:i,static:o}=T.useContext(Yo),{matches:a}=T.useContext(Vi),{pathname:l}=ri(),c=Yc(),d=k0(e,C0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Ae(t){gn(!1)}function WC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=po.Pop,navigator:i,static:o=!1,future:a}=t;Qc()&&gn(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:i,static:o,future:zd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=hl(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:S="default"}=r,p=T.useMemo(()=>{let v=P0(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:S},navigationType:s}},[l,d,h,f,m,S,s]);return p==null?null:T.createElement(Yo.Provider,{value:c},T.createElement(tg.Provider,{children:n,value:p}))}function PT(t){let{children:e,location:n}=t;return B6(mw(e),n)}new Promise(()=>{});function mw(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(r,s)=>{if(!T.isValidElement(r))return;let i=[...e,s];if(r.type===T.Fragment){n.push.apply(n,mw(r.props.children,i));return}r.type!==Ae&&gn(!1),!r.props.index||!r.props.children||gn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pw.apply(this,arguments)}function t$(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function n$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function r$(t,e){return t.button===0&&(!e||e==="_self")&&!n$(t)}function gw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function s$(t,e){let n=gw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const i$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],o$="6";try{window.__reactRouterVersion=o$}catch{}const a$="startTransition",Wm=p_[a$];function l$(t){let{basename:e,children:n,future:r,window:s}=t,i=T.useRef();i.current==null&&(i.current=f6({window:s,v5Compat:!0}));let o=i.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=T.useCallback(h=>{c&&Wm?Wm(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>zC(r),[r]),T.createElement(WC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function c$(t){let{basename:e,children:n,future:r,window:s}=t,i=T.useRef();i.current==null&&(i.current=m6({window:s,v5Compat:!0}));let o=i.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=T.useCallback(h=>{c&&Wm?Wm(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>zC(r),[r]),T.createElement(WC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const u$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h$=T.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=t$(e,i$),{basename:m}=T.useContext(Yo),S,p=!1;if(typeof c=="string"&&d$.test(c)&&(S=c,u$))try{let E=new URL(window.location.href),R=c.startsWith("//")?new URL(E.protocol+c):new URL(c),k=P0(R.pathname,m);R.origin===E.origin&&k!=null?c=k+R.search+R.hash:p=!0}catch{}let v=j6(c,{relative:s}),w=f$(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(E){r&&r(E),E.defaultPrevented||w(E)}return T.createElement("a",pw({},f,{href:S||v,onClick:p||i?r:y,ref:n,target:l}))});var CT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(CT||(CT={}));var kT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kT||(kT={}));function f$(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Yc(),c=ri(),d=UC(t,{relative:o});return T.useCallback(h=>{if(r$(h,n)){h.preventDefault();let f=r!==void 0?r:Bd(c)===Bd(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function DG(t){let e=T.useRef(gw(t)),n=T.useRef(!1),r=ri(),s=T.useMemo(()=>s$(r.search,n.current?null:e.current),[r.search]),i=Yc(),o=T.useCallback((a,l)=>{const c=gw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const qC=T.createContext(void 0),m$=({children:t})=>{const[e,n]=T.useState("medium"),[r,s]=T.useState(!1),[i,o]=T.useState(!1);T.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),T.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),T.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),T.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return _.jsx(qC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},OG=()=>{const t=T.useContext(qC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},p$=DP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),ts=T.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?OM:"button";return _.jsx(o,{className:qn(p$({variant:e,size:n,className:t})),ref:i,...s})});ts.displayName="Button";const yw=T.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),_.jsx("input",{type:e,className:qn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});yw.displayName="Input";const g$=()=>{};var NT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},y$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new v$;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const S=c<<6&192|h;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class v$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w$=function(t){const e=HC(t);return D0.encodeByteArray(e,!0)},qm=function(t){return w$(t).replace(/\./g,"")},KC=function(t){try{return D0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$=()=>GC().__FIREBASE_DEFAULTS__,E$=()=>{if(typeof process>"u"||typeof NT>"u")return;const t=NT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KC(t[1]);return e&&JSON.parse(e)},ng=()=>{try{return g$()||_$()||E$()||I$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S$=t=>{var e,n;return(n=(e=ng())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QC=t=>{const e=S$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YC=()=>{var t;return(t=ng())==null?void 0:t.config},T$=t=>{var e;return(e=ng())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[qm(JSON.stringify(n)),qm(JSON.stringify(o)),""].join(".")}const od={};function A$(){const t={prod:[],emulator:[]};for(const e of Object.keys(od))od[e]?t.emulator.push(e):t.prod.push(e);return t}function x$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let DT=!1;function JC(t,e){if(typeof window>"u"||typeof document>"u"||!Mi(window.location.host)||od[t]===e||od[t]||DT)return;od[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=A$().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{DT=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=x$(r),m=n("text"),S=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),v=document.getElementById(p)||document.createElement("a"),w=n("preprendIcon"),y=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),d(v,p);const R=c();l(y,w),E.append(y,S,v,R),document.body.appendChild(E)}i?(S.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function XC(){var e;const t=(e=ng())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function k$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N$(){const t=Hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZC(){return!XC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ek(){return!XC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function L0(){try{return typeof indexedDB=="object"}catch{return!1}}function D$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="FirebaseError";class Cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=O$,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jc.prototype.create)}}class Jc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?L$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Cs(s,a,r)}}function L$(t,e){return t.replace(V$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const V$=/\{\$([^}]+)}/g;function Ec(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(OT(i)&&OT(o)){if(!Ec(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function OT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function M$(t,e){const n=new F$(t,e);return n.subscribe.bind(n)}class F${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");U$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ay),s.error===void 0&&(s.error=Ay),s.complete===void 0&&(s.complete=Ay);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ay(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LG=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B$(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $$(t){return t===ua?void 0:t}function B$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const W$={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},q$=rt.INFO,H$={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},K$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=H$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rg{constructor(e){this.name=e,this._logLevel=q$,this._logHandler=K$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const G$=(t,e)=>e.some(n=>t instanceof n);let LT,VT;function Q$(){return LT||(LT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y$(){return VT||(VT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nk=new WeakMap,ww=new WeakMap,rk=new WeakMap,xy=new WeakMap,V0=new WeakMap;function J$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ro(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nk.set(n,t)}).catch(()=>{}),V0.set(e,t),e}function X$(t){if(ww.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ww.set(t,e)}let _w={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ww.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ro(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z$(t){_w=t(_w)}function e5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ry(this),e,...n);return rk.set(r,e.sort?e.sort():[e]),Ro(r)}:Y$().includes(t)?function(...e){return t.apply(Ry(this),e),Ro(nk.get(this))}:function(...e){return Ro(t.apply(Ry(this),e))}}function t5(t){return typeof t=="function"?e5(t):(t instanceof IDBTransaction&&X$(t),G$(t,Q$())?new Proxy(t,_w):t)}function Ro(t){if(t instanceof IDBRequest)return J$(t);if(xy.has(t))return xy.get(t);const e=t5(t);return e!==t&&(xy.set(t,e),V0.set(e,t)),e}const Ry=t=>V0.get(t);function n5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ro(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ro(o.result),l.oldVersion,l.newVersion,Ro(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const r5=["get","getKey","getAll","getAllKeys","count"],s5=["put","add","delete","clear"],Py=new Map;function MT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Py.get(e))return Py.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=s5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||r5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Py.set(e,i),i}Z$(t=>({...t,get:(e,n,r)=>MT(e,n)||t.get(e,n,r),has:(e,n)=>!!MT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ew="@firebase/app",FT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new rg("@firebase/app"),a5="@firebase/app-compat",l5="@firebase/analytics-compat",c5="@firebase/analytics",u5="@firebase/app-check-compat",d5="@firebase/app-check",h5="@firebase/auth",f5="@firebase/auth-compat",m5="@firebase/database",p5="@firebase/data-connect",g5="@firebase/database-compat",y5="@firebase/functions",v5="@firebase/functions-compat",w5="@firebase/installations",_5="@firebase/installations-compat",E5="@firebase/messaging",I5="@firebase/messaging-compat",S5="@firebase/performance",T5="@firebase/performance-compat",b5="@firebase/remote-config",A5="@firebase/remote-config-compat",x5="@firebase/storage",R5="@firebase/storage-compat",P5="@firebase/firestore",C5="@firebase/ai",k5="@firebase/firestore-compat",N5="firebase",D5="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="[DEFAULT]",O5={[Ew]:"fire-core",[a5]:"fire-core-compat",[c5]:"fire-analytics",[l5]:"fire-analytics-compat",[d5]:"fire-app-check",[u5]:"fire-app-check-compat",[h5]:"fire-auth",[f5]:"fire-auth-compat",[m5]:"fire-rtdb",[p5]:"fire-data-connect",[g5]:"fire-rtdb-compat",[y5]:"fire-fn",[v5]:"fire-fn-compat",[w5]:"fire-iid",[_5]:"fire-iid-compat",[E5]:"fire-fcm",[I5]:"fire-fcm-compat",[S5]:"fire-perf",[T5]:"fire-perf-compat",[b5]:"fire-rc",[A5]:"fire-rc-compat",[x5]:"fire-gcs",[R5]:"fire-gcs-compat",[P5]:"fire-fst",[k5]:"fire-fst-compat",[C5]:"fire-vertex","fire-js":"fire-js",[N5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=new Map,L5=new Map,Sw=new Map;function UT(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Sw.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Sw.set(e,t);for(const n of Hm.values())UT(n,t);for(const n of L5.values())UT(n,t);return!0}function sg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new Jc("app","Firebase",V5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=D5;function sk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Iw,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Po.create("bad-app-name",{appName:String(s)});if(n||(n=YC()),!n)throw Po.create("no-options");const i=Hm.get(s);if(i){if(Ec(n,i.options)&&Ec(r,i.config))return i;throw Po.create("duplicate-app",{appName:s})}const o=new z$(s);for(const l of Sw.values())o.addComponent(l);const a=new M5(n,r,o);return Hm.set(s,a),a}function ik(t=Iw){const e=Hm.get(t);if(!e&&t===Iw&&YC())return sk();if(!e)throw Po.create("no-app",{appName:t});return e}function Gr(t,e,n){let r=O5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(o.join(" "));return}ei(new Rs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="firebase-heartbeat-database",U5=1,Wd="firebase-heartbeat-store";let Cy=null;function ok(){return Cy||(Cy=n5(F5,U5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Po.create("idb-open",{originalErrorMessage:t.message})})),Cy}async function j5(t){try{const n=(await ok()).transaction(Wd),r=await n.objectStore(Wd).get(ak(t));return await n.done,r}catch(e){if(e instanceof Cs)ki.warn(e.message);else{const n=Po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function jT(t,e){try{const r=(await ok()).transaction(Wd,"readwrite");await r.objectStore(Wd).put(e,ak(t)),await r.done}catch(n){if(n instanceof Cs)ki.warn(n.message);else{const r=Po.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(r.message)}}}function ak(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=1024,B5=30;class z5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$T();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>B5){const o=H5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ki.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$T(),{heartbeatsToSend:r,unsentEntries:s}=W5(this._heartbeatsCache.heartbeats),i=qm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ki.warn(n),""}}}function $T(){return new Date().toISOString().substring(0,10)}function W5(t,e=$5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),BT(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),BT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L0()?D$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await j5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function BT(t){return qm(JSON.stringify({version:2,heartbeats:t})).length}function H5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t){ei(new Rs("platform-logger",e=>new i5(e),"PRIVATE")),ei(new Rs("heartbeat",e=>new z5(e),"PRIVATE")),Gr(Ew,FT,t),Gr(Ew,FT,"esm2020"),Gr("fire-js","")}K5("");function lk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G5=lk,ck=new Jc("auth","Firebase",lk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new rg("@firebase/auth");function Q5(t,...e){Km.logLevel<=rt.WARN&&Km.warn(`Auth (${vh}): ${t}`,...e)}function Hf(t,...e){Km.logLevel<=rt.ERROR&&Km.error(`Auth (${vh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,...e){throw F0(t,...e)}function M0(t,...e){return F0(t,...e)}function uk(t,e,n){const r={...G5(),[e]:n};return new Jc("auth","Firebase",r).create(e,{appName:t.name})}function Co(t){return uk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function F0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ck.create(t,...e)}function st(t,e,...n){if(!t)throw F0(e,...n)}function yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hf(e),new Error(e)}function Gm(t,e){t||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function dk(){return zT()==="http:"||zT()==="https:"}function zT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dk()||C$()||"connection"in navigator)?navigator.onLine:!0}function X5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gm(n>e,"Short delay should be less than long delay!"),this.isMobile=R$()||k$()}get(){return J5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t,e){Gm(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nB=new wh(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function si(t,e,n,r,s={}){return fk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=tk({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return P$()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Mi(t.emulatorConfig.host)&&(c.credentials="include"),hk.fetch()(await mk(t,t.config.apiHost,n,a),c)})}async function fk(t,e,n){t._canInitEmulator=!1;const r={...eB,...e};try{const s=new sB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw hf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw hf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uk(t,d,c);Za(t,d)}}catch(s){if(s instanceof Cs)throw s;Za(t,"network-request-failed",{message:String(s)})}}async function ig(t,e,n,r,s={}){const i=await si(t,e,n,r,s);return"mfaPendingCredential"in i&&Za(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function mk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Z5(t.config,s):`${t.config.apiScheme}://${s}`;return tB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(M0(this.auth,"network-request-failed")),nB.get())})}}function hf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=M0(t,e,r);return s.customData._tokenResponse=n,s}function WT(t){return t!==void 0&&t.enterprise!==void 0}class iB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oB(t,e){return si(t,"GET","/v2/recaptchaConfig",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aB(t,e){return si(t,"POST","/v1/accounts:delete",e)}async function Qm(t,e){return si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lB(t,e=!1){const n=pt(t),r=await n.getIdToken(e),s=U0(r);st(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ad(ky(s.auth_time)),issuedAtTime:ad(ky(s.iat)),expirationTime:ad(ky(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ky(t){return Number(t)*1e3}function U0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{const s=KC(n);return s?JSON.parse(s):(Hf("Failed to decode base64 JWT payload"),null)}catch(s){return Hf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qT(t){const e=U0(t);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cs&&cB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(t){var h;const e=t.auth,n=await t.getIdToken(),r=await qd(t,Qm(e,{idToken:n}));st(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?pk(s.providerUserInfo):[],o=hB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Tw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function dB(t){const e=pt(t);await Ym(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e){const n=await fk(t,{},async()=>{const r=tk({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await mk(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Mi(t.emulatorConfig.host)&&(l.credentials="include"),hk.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mB(t,e){return si(t,"POST","/v2/accounts:revokeToken",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){st(e.length!==0,"internal-error");const n=qT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ec;return r&&(st(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(st(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(st(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){st(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _s{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new uB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await qd(this,this.stsTokenManager.getToken(this.auth,e));return st(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lB(this,e)}reload(){return dB(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ym(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await qd(this,aB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:S,stsTokenManager:p}=n;st(h&&p,e,"internal-error");const v=ec.fromJSON(this.name,p);st(typeof h=="string",e,"internal-error"),Qi(r,e.name),Qi(s,e.name),st(typeof f=="boolean",e,"internal-error"),st(typeof m=="boolean",e,"internal-error"),Qi(i,e.name),Qi(o,e.name),Qi(a,e.name),Qi(l,e.name),Qi(c,e.name),Qi(d,e.name);const w=new _s({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return S&&Array.isArray(S)&&(w.providerData=S.map(y=>({...y}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new ec;s.updateFromServerResponse(n);const i=new _s({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ym(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];st(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?pk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ec;a.updateFromIdToken(r);const l=new _s({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Tw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Map;function ba(t){Gm(t instanceof Function,"Expected a class definition");let e=HT.get(t);return e?(Gm(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gk.type="NONE";const bw=gk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e,n){return`firebase:${t}:${e}:${n}`}class tc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ny(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ny("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qm(this.auth,{idToken:e}).catch(()=>{});return n?_s._fromGetAccountInfoResponse(this.auth,n,e):null}return _s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tc(ba(bw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ba(bw);const o=Ny(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Qm(e,{idToken:d}).catch(()=>{});if(!f)break;h=await _s._fromGetAccountInfoResponse(e,f,d)}else h=_s._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new tc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new tc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wk(e))return"Blackberry";if(_k(e))return"Webos";if(gB(e))return"Safari";if((e.includes("chrome/")||yB(e))&&!e.includes("edge/"))return"Chrome";if(vk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pB(t=Hn()){return/firefox\//i.test(t)}function gB(t=Hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yB(t=Hn()){return/crios\//i.test(t)}function yk(t=Hn()){return/iemobile/i.test(t)}function vk(t=Hn()){return/android/i.test(t)}function wk(t=Hn()){return/blackberry/i.test(t)}function _k(t=Hn()){return/webos/i.test(t)}function vB(t=Hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wB(){return N$()&&document.documentMode===10}function _B(t=Hn()){return vB(t)||vk(t)||_k(t)||wk(t)||/windows phone/i.test(t)||yk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t,e=[]){let n;switch(t){case"Browser":n=KT(Hn());break;case"Worker":n=`${KT(Hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e={}){return si(t,"GET","/v2/passwordPolicy",Fi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=6;class TB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??SB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GT(this),this.idTokenSubscription=new GT(this),this.beforeStateQueue=new EB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ck,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ba(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qm(this,{idToken:e}),r=await _s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(jr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ym(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(Co(this));const n=e?pt(e):null;return n&&st(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IB(this),n=new TB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ba(e)||this._popupRedirectResolver;st(n,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[ba(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ek(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Q5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xc(t){return pt(t)}class GT{constructor(e){this.auth=e,this.observer=null,this.addObserver=M$(n=>this.observer=n)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AB(t){j0=t}function xB(t){return j0.loadJS(t)}function RB(){return j0.recaptchaEnterpriseScript}class PB{constructor(){this.enterprise=new CB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kB="recaptcha-enterprise",Ik="NO_RECAPTCHA";class NB{constructor(e){this.type=kB,this.auth=Xc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{oB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new iB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;WT(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(Ik)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&WT(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=RB();l.length!==0&&(l+=a),xB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function QT(t,e,n,r=!1,s=!1){const i=new NB(t);let o;if(s)o=Ik;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jm(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await QT(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await QT(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(t,e){const n=sg(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ec(i,e??{}))return s;Za(s,"already-initialized")}return n.initialize({options:e})}function OB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ba);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function VB(t,e){return si(t,"POST","/v1/accounts:update",e)}async function MB(t,e){return si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,e){return ig(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))}async function UB(t,e){return si(t,"POST","/v1/accounts:sendOobCode",Fi(t,e))}async function jB(t,e){return UB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){return ig(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}async function BB(t,e){return ig(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends LB{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Hd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(e,n,"signInWithPassword",FB);case"emailLink":return $B(e,{email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jm(e,r,"signUpPassword",MB);case"emailLink":return BB(e,{idToken:n,email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WB(t){const e=Bu(zu(t)).link,n=e?Bu(zu(e)).deep_link_id:null,r=Bu(zu(t)).deep_link_id;return(r?Bu(zu(r)).link:null)||r||n||e||t}class $0{constructor(e){const n=Bu(zu(e)),r=n.apiKey??null,s=n.oobCode??null,i=zB(n.mode??null);st(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=WB(e);try{return new $0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.providerId=Zc.PROVIDER_ID}static credential(e,n){return Hd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$0.parseLink(n);return st(r,"argument-error"),Hd._fromEmailAndCode(e,r.code,r.tenantId)}}Zc.PROVIDER_ID="password";Zc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e){return ig(t,"POST","/v1/accounts:signUp",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await _s._fromIdTokenResponse(e,r,s),o=YT(r);return new Ic({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=YT(r);return new Ic({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function YT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Cs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xm(e,n,r,s)}}function Sk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xm._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(t,e,n=!1){const{auth:r}=t;if(jr(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const i=await qd(t,Sk(r,s,e,t),n);st(i.idToken,r,"internal-error");const o=U0(i.idToken);st(o,r,"internal-error");const{sub:a}=o;return st(t.uid===a,r,"user-mismatch"),Ic._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Za(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e,n=!1){if(jr(t.app))return Promise.reject(Co(t));const r="signIn",s=await Sk(t,r,e),i=await Ic._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function GB(t,e){return KB(Xc(t),e)}async function VG(t,e){return HB(pt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t){const e=Xc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QB(t,e,n){const r=Xc(t);await Jm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jB)}async function JT(t,e,n){if(jr(t.app))return Promise.reject(Co(t));const r=Xc(t),o=await Jm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Tk(t),l}),a=await Ic._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YB(t,e,n){return jr(t.app)?Promise.reject(Co(t)):GB(pt(t),Zc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Tk(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JB(t,e){return si(t,"POST","/v1/accounts:createAuthUri",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(t,e){const n=dk()?Y5():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await JB(pt(t),r);return s||[]}function MG(t,e){return ZB(pt(t),null,e)}async function ZB(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await qd(t,VB(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t,e){return pt(t).setPersistence(e)}function t9(t,e,n,r){return pt(t).onAuthStateChanged(e,n,r)}function XT(t){return pt(t).signOut()}const ZT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ZT,"1"),this.storage.removeItem(ZT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=1e3,r9=10;class Ak extends bk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_B(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);wB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,r9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},n9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ak.type="LOCAL";const xk=Ak;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk extends bk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Rk.type="SESSION";const s9=Rk;new wh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new wh(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new wh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new wh(5e3,15e3);var eb="@firebase/auth",tb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a9(t){ei(new Rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;st(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ek(t)},c=new bB(r,s,i,l);return OB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new Rs("auth-internal",e=>{const n=Xc(e.getProvider("auth").getImmediate());return(r=>new i9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gr(eb,tb,o9(t)),Gr(eb,tb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=5*60;T$("authIdTokenMaxAge");function c9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}AB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=M0("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",c9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a9("Browser");var u9="firebase",d9="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr(u9,d9,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=new Map,f9={activated:!1,tokenObservers:[]},m9={initialized:!1,enabled:!1};function Ps(t){return h9.get(t)||{...f9}}function Pk(){return m9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="https://content-firebaseappcheck.googleapis.com/v1";const g9="exchangeDebugToken",nb={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},FG=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new vw,this.pending.promise.catch(n=>{}),await v9(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new vw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function v9(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},go=new Jc("appCheck","AppCheck",w9);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){if(!Ps(t).activated)throw go.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw go.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw go.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw go.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw go.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function Nk(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${p9}/projects/${n}/apps/${r}:${g9}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="firebase-app-check-database",E9=1,Aw="firebase-app-check-store";let ff=null;function I9(){return ff||(ff=new Promise((t,e)=>{try{const n=indexedDB.open(_9,E9);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(go.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Aw,{keyPath:"compositeKey"})}}}catch(n){e(go.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ff)}function S9(t,e){return T9(b9(t),e)}async function T9(t,e){const r=(await I9()).transaction(Aw,"readwrite"),i=r.objectStore(Aw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(go.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function b9(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new rg("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e){return L0()?S9(t,e).catch(n=>{Wu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){return Pk().enabled}async function Ok(){const t=Pk();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9={error:"UNKNOWN_ERROR"};function x9(t){return D0.encodeString(JSON.stringify(t),!1)}async function xw(t,e=!1,n=!1){const r=t.app;Ck(r);const s=Ps(r);let i=s.token,o;if(i&&!qu(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(qu(c)?i=c:await Dy(r,void 0))}if(!e&&i&&qu(i))return{token:i.token};let a=!1;if(Dk())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=kk(Nk(r,await Ok()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Dy(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Wu.warn(c.message):n&&Wu.error(c),Oy(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Ps(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Wu.warn(c.message):n&&Wu.error(c),o=c}let l;return i?o?qu(i)?l={token:i.token,internalError:o}:l=Oy(o):(l={token:i.token},s.token=i,await Dy(r,i)):l=Oy(o),a&&k9(r,l),l}async function R9(t){const e=t.app;Ck(e);const{provider:n}=Ps(e);if(Dk()){const r=await Ok(),{token:s}=await kk(Nk(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function P9(t,e,n,r){const{app:s}=t,i=Ps(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&qu(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),rb(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>rb(t))}function Lk(t,e){const n=Ps(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function rb(t){const{app:e}=t,n=Ps(e);let r=n.tokenRefresher;r||(r=C9(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function C9(t){const{app:e}=t;return new y9(async()=>{const n=Ps(e);let r;if(n.token?r=await xw(t,!0):r=await xw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ps(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},nb.RETRIAL_MIN_WAIT,nb.RETRIAL_MAX_WAIT)}function k9(t,e){const n=Ps(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qu(t){return t.expireTimeMillis-Date.now()>0}function Oy(t){return{token:x9(A9),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ps(this.app);for(const n of e)Lk(this.app,n.next);return Promise.resolve()}}function D9(t,e){return new N9(t,e)}function O9(t){return{getToken:e=>xw(t,e),getLimitedUseToken:()=>R9(t),addTokenListener:e=>P9(t,"INTERNAL",e),removeTokenListener:e=>Lk(t.app,e)}}const L9="@firebase/app-check",V9="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="app-check",sb="app-check-internal";function F9(){ei(new Rs(M9,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return D9(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(sb).initialize()})),ei(new Rs(sb,t=>{const e=t.getProvider("app-check").getImmediate();return O9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gr(L9,V9)}F9();var ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,Vk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,b){function A(){}A.prototype=b.prototype,x.F=b.prototype,x.prototype=new A,x.prototype.constructor=x,x.D=function(P,N,O){for(var C=Array(arguments.length-2),$=2;$<arguments.length;$++)C[$-2]=arguments[$];return b.prototype[N].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,b,A){A||(A=0);const P=Array(16);if(typeof b=="string")for(var N=0;N<16;++N)P[N]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(N=0;N<16;++N)P[N]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=x.g[0],A=x.g[1],N=x.g[2];let O=x.g[3],C;C=b+(O^A&(N^O))+P[0]+3614090360&4294967295,b=A+(C<<7&4294967295|C>>>25),C=O+(N^b&(A^N))+P[1]+3905402710&4294967295,O=b+(C<<12&4294967295|C>>>20),C=N+(A^O&(b^A))+P[2]+606105819&4294967295,N=O+(C<<17&4294967295|C>>>15),C=A+(b^N&(O^b))+P[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=b+(O^A&(N^O))+P[4]+4118548399&4294967295,b=A+(C<<7&4294967295|C>>>25),C=O+(N^b&(A^N))+P[5]+1200080426&4294967295,O=b+(C<<12&4294967295|C>>>20),C=N+(A^O&(b^A))+P[6]+2821735955&4294967295,N=O+(C<<17&4294967295|C>>>15),C=A+(b^N&(O^b))+P[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=b+(O^A&(N^O))+P[8]+1770035416&4294967295,b=A+(C<<7&4294967295|C>>>25),C=O+(N^b&(A^N))+P[9]+2336552879&4294967295,O=b+(C<<12&4294967295|C>>>20),C=N+(A^O&(b^A))+P[10]+4294925233&4294967295,N=O+(C<<17&4294967295|C>>>15),C=A+(b^N&(O^b))+P[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=b+(O^A&(N^O))+P[12]+1804603682&4294967295,b=A+(C<<7&4294967295|C>>>25),C=O+(N^b&(A^N))+P[13]+4254626195&4294967295,O=b+(C<<12&4294967295|C>>>20),C=N+(A^O&(b^A))+P[14]+2792965006&4294967295,N=O+(C<<17&4294967295|C>>>15),C=A+(b^N&(O^b))+P[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=b+(N^O&(A^N))+P[1]+4129170786&4294967295,b=A+(C<<5&4294967295|C>>>27),C=O+(A^N&(b^A))+P[6]+3225465664&4294967295,O=b+(C<<9&4294967295|C>>>23),C=N+(b^A&(O^b))+P[11]+643717713&4294967295,N=O+(C<<14&4294967295|C>>>18),C=A+(O^b&(N^O))+P[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=b+(N^O&(A^N))+P[5]+3593408605&4294967295,b=A+(C<<5&4294967295|C>>>27),C=O+(A^N&(b^A))+P[10]+38016083&4294967295,O=b+(C<<9&4294967295|C>>>23),C=N+(b^A&(O^b))+P[15]+3634488961&4294967295,N=O+(C<<14&4294967295|C>>>18),C=A+(O^b&(N^O))+P[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=b+(N^O&(A^N))+P[9]+568446438&4294967295,b=A+(C<<5&4294967295|C>>>27),C=O+(A^N&(b^A))+P[14]+3275163606&4294967295,O=b+(C<<9&4294967295|C>>>23),C=N+(b^A&(O^b))+P[3]+4107603335&4294967295,N=O+(C<<14&4294967295|C>>>18),C=A+(O^b&(N^O))+P[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=b+(N^O&(A^N))+P[13]+2850285829&4294967295,b=A+(C<<5&4294967295|C>>>27),C=O+(A^N&(b^A))+P[2]+4243563512&4294967295,O=b+(C<<9&4294967295|C>>>23),C=N+(b^A&(O^b))+P[7]+1735328473&4294967295,N=O+(C<<14&4294967295|C>>>18),C=A+(O^b&(N^O))+P[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=b+(A^N^O)+P[5]+4294588738&4294967295,b=A+(C<<4&4294967295|C>>>28),C=O+(b^A^N)+P[8]+2272392833&4294967295,O=b+(C<<11&4294967295|C>>>21),C=N+(O^b^A)+P[11]+1839030562&4294967295,N=O+(C<<16&4294967295|C>>>16),C=A+(N^O^b)+P[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=b+(A^N^O)+P[1]+2763975236&4294967295,b=A+(C<<4&4294967295|C>>>28),C=O+(b^A^N)+P[4]+1272893353&4294967295,O=b+(C<<11&4294967295|C>>>21),C=N+(O^b^A)+P[7]+4139469664&4294967295,N=O+(C<<16&4294967295|C>>>16),C=A+(N^O^b)+P[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=b+(A^N^O)+P[13]+681279174&4294967295,b=A+(C<<4&4294967295|C>>>28),C=O+(b^A^N)+P[0]+3936430074&4294967295,O=b+(C<<11&4294967295|C>>>21),C=N+(O^b^A)+P[3]+3572445317&4294967295,N=O+(C<<16&4294967295|C>>>16),C=A+(N^O^b)+P[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=b+(A^N^O)+P[9]+3654602809&4294967295,b=A+(C<<4&4294967295|C>>>28),C=O+(b^A^N)+P[12]+3873151461&4294967295,O=b+(C<<11&4294967295|C>>>21),C=N+(O^b^A)+P[15]+530742520&4294967295,N=O+(C<<16&4294967295|C>>>16),C=A+(N^O^b)+P[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=b+(N^(A|~O))+P[0]+4096336452&4294967295,b=A+(C<<6&4294967295|C>>>26),C=O+(A^(b|~N))+P[7]+1126891415&4294967295,O=b+(C<<10&4294967295|C>>>22),C=N+(b^(O|~A))+P[14]+2878612391&4294967295,N=O+(C<<15&4294967295|C>>>17),C=A+(O^(N|~b))+P[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=b+(N^(A|~O))+P[12]+1700485571&4294967295,b=A+(C<<6&4294967295|C>>>26),C=O+(A^(b|~N))+P[3]+2399980690&4294967295,O=b+(C<<10&4294967295|C>>>22),C=N+(b^(O|~A))+P[10]+4293915773&4294967295,N=O+(C<<15&4294967295|C>>>17),C=A+(O^(N|~b))+P[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=b+(N^(A|~O))+P[8]+1873313359&4294967295,b=A+(C<<6&4294967295|C>>>26),C=O+(A^(b|~N))+P[15]+4264355552&4294967295,O=b+(C<<10&4294967295|C>>>22),C=N+(b^(O|~A))+P[6]+2734768916&4294967295,N=O+(C<<15&4294967295|C>>>17),C=A+(O^(N|~b))+P[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=b+(N^(A|~O))+P[4]+4149444226&4294967295,b=A+(C<<6&4294967295|C>>>26),C=O+(A^(b|~N))+P[11]+3174756917&4294967295,O=b+(C<<10&4294967295|C>>>22),C=N+(b^(O|~A))+P[2]+718787259&4294967295,N=O+(C<<15&4294967295|C>>>17),C=A+(O^(N|~b))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+b&4294967295,x.g[1]=x.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.v=function(x,b){b===void 0&&(b=x.length);const A=b-this.blockSize,P=this.C;let N=this.h,O=0;for(;O<b;){if(N==0)for(;O<=A;)s(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<b;)if(P[N++]=x.charCodeAt(O++),N==this.blockSize){s(this,P),N=0;break}}else for(;O<b;)if(P[N++]=x[O++],N==this.blockSize){s(this,P),N=0;break}}this.h=N,this.o+=b},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var b=1;b<x.length-8;++b)x[b]=0;b=this.o*8;for(var A=x.length-8;A<x.length;++A)x[A]=b&255,b/=256;for(this.v(x),x=Array(16),b=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)x[b++]=this.g[A]>>>P&255;return x};function i(x,b){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=b(x)}function o(x,b){this.h=b;const A=[];let P=!0;for(let N=x.length-1;N>=0;N--){const O=x[N]|0;P&&O==b||(A[N]=O,P=!1)}this.g=A}var a={};function l(x){return-128<=x&&x<128?i(x,function(b){return new o([b|0],b<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(x<0)return v(c(-x));const b=[];let A=1;for(let P=0;x>=A;P++)b[P]=x/A|0,A*=4294967296;return new o(b,0)}function d(x,b){if(x.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(x.charAt(0)=="-")return v(d(x.substring(1),b));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(b,8));let P=h;for(let O=0;O<x.length;O+=8){var N=Math.min(8,x.length-O);const C=parseInt(x.substring(O,O+N),b);N<8?(N=c(Math.pow(b,N)),P=P.j(N).add(c(C))):(P=P.j(A),P=P.add(c(C)))}return P}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(p(this))return-v(this).m();let x=0,b=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);x+=(P>=0?P:4294967296+P)*b,b*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(S(this))return"0";if(p(this))return"-"+v(this).toString(x);const b=c(Math.pow(x,6));var A=this;let P="";for(;;){const N=R(A,b).g;A=w(A,N.j(b));let O=((A.g.length>0?A.g[0]:A.h)>>>0).toString(x);if(A=N,S(A))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function S(x){if(x.h!=0)return!1;for(let b=0;b<x.g.length;b++)if(x.g[b]!=0)return!1;return!0}function p(x){return x.h==-1}t.l=function(x){return x=w(this,x),p(x)?-1:S(x)?0:1};function v(x){const b=x.g.length,A=[];for(let P=0;P<b;P++)A[P]=~x.g[P];return new o(A,~x.h).add(f)}t.abs=function(){return p(this)?v(this):this},t.add=function(x){const b=Math.max(this.g.length,x.g.length),A=[];let P=0;for(let N=0;N<=b;N++){let O=P+(this.i(N)&65535)+(x.i(N)&65535),C=(O>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);P=C>>>16,O&=65535,C&=65535,A[N]=C<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function w(x,b){return x.add(v(b))}t.j=function(x){if(S(this)||S(x))return h;if(p(this))return p(x)?v(this).j(v(x)):v(v(this).j(x));if(p(x))return v(this.j(v(x)));if(this.l(m)<0&&x.l(m)<0)return c(this.m()*x.m());const b=this.g.length+x.g.length,A=[];for(var P=0;P<2*b;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<x.g.length;N++){const O=this.i(P)>>>16,C=this.i(P)&65535,$=x.i(N)>>>16,re=x.i(N)&65535;A[2*P+2*N]+=C*re,y(A,2*P+2*N),A[2*P+2*N+1]+=O*re,y(A,2*P+2*N+1),A[2*P+2*N+1]+=C*$,y(A,2*P+2*N+1),A[2*P+2*N+2]+=O*$,y(A,2*P+2*N+2)}for(x=0;x<b;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=b;x<2*b;x++)A[x]=0;return new o(A,0)};function y(x,b){for(;(x[b]&65535)!=x[b];)x[b+1]+=x[b]>>>16,x[b]&=65535,b++}function E(x,b){this.g=x,this.h=b}function R(x,b){if(S(b))throw Error("division by zero");if(S(x))return new E(h,h);if(p(x))return b=R(v(x),b),new E(v(b.g),v(b.h));if(p(b))return b=R(x,v(b)),new E(v(b.g),b.h);if(x.g.length>30){if(p(x)||p(b))throw Error("slowDivide_ only works with positive integers.");for(var A=f,P=b;P.l(x)<=0;)A=k(A),P=k(P);var N=L(A,1),O=L(P,1);for(P=L(P,2),A=L(A,2);!S(P);){var C=O.add(P);C.l(x)<=0&&(N=N.add(A),O=C),P=L(P,1),A=L(A,1)}return b=w(x,N.j(b)),new E(N,b)}for(N=h;x.l(b)>=0;){for(A=Math.max(1,Math.floor(x.m()/b.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=c(A),C=O.j(b);p(C)||C.l(x)>0;)A-=P,O=c(A),C=O.j(b);S(O)&&(O=f),N=N.add(O),x=w(x,C)}return new E(N,x)}t.B=function(x){return R(this,x).h},t.and=function(x){const b=Math.max(this.g.length,x.g.length),A=[];for(let P=0;P<b;P++)A[P]=this.i(P)&x.i(P);return new o(A,this.h&x.h)},t.or=function(x){const b=Math.max(this.g.length,x.g.length),A=[];for(let P=0;P<b;P++)A[P]=this.i(P)|x.i(P);return new o(A,this.h|x.h)},t.xor=function(x){const b=Math.max(this.g.length,x.g.length),A=[];for(let P=0;P<b;P++)A[P]=this.i(P)^x.i(P);return new o(A,this.h^x.h)};function k(x){const b=x.g.length+1,A=[];for(let P=0;P<b;P++)A[P]=x.i(P)<<1|x.i(P-1)>>>31;return new o(A,x.h)}function L(x,b){const A=b>>5;b%=32;const P=x.g.length-A,N=[];for(let O=0;O<P;O++)N[O]=b>0?x.i(O+A)>>>b|x.i(O+A+1)<<32-b:x.i(O+A);return new o(N,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Vk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ko=o}).apply(typeof ib<"u"?ib:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mk,Hu,Fk,Kf,Rw,Uk,jk,$k;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var g=0;g<u.length;++g){var I=u[g];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var I=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var F=u[D];if(!(F in I))break e;I=I[F]}u=u[u.length-1],D=I[u],g=g(D),g!=D&&g!=null&&e(I,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var I=[],D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&I.push([D,g[D]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,I){return u.call.apply(u.bind,arguments)}function c(u,g,I){return c=l,c.apply(null,arguments)}function d(u,g){var I=Array.prototype.slice.call(arguments,1);return function(){var D=I.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function h(u,g){function I(){}I.prototype=g.prototype,u.Z=g.prototype,u.prototype=new I,u.prototype.constructor=u,u.Ob=function(D,F,z){for(var pe=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)pe[Xe-2]=arguments[Xe];return g.prototype[F].apply(D,pe)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const I=Array(g);for(let D=0;D<g;D++)I[D]=u[D];return I}return[]}function S(u,g){for(let D=1;D<arguments.length;D++){const F=arguments[D];var I=typeof F;if(I=I!="object"?I:F?Array.isArray(F)?"array":I:"null",I=="array"||I=="object"&&typeof F.length=="number"){I=u.length||0;const z=F.length||0;u.length=I+z;for(let pe=0;pe<z;pe++)u[I+pe]=F[pe]}else u.push(F)}}class p{constructor(g,I){this.i=g,this.j=I,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){o.setTimeout(()=>{throw u},0)}function w(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class y{constructor(){this.h=this.g=null}add(g,I){const D=E.get();D.set(g,I),this.h?this.h.next=D:this.g=D,this.h=D}}var E=new p(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(g,I){this.h=g,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let k,L=!1,x=new y,b=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(A)}};function A(){for(var u;u=w();){try{u.h.call(u.g)}catch(I){v(I)}var g=E;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const I=()=>{};o.addEventListener("test",I,g),o.removeEventListener("test",I,g)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function $(u,g){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h($,N),$.prototype.init=function(u,g){const I=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(I=="mouseover"?g=u.fromElement:I=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),ne=0;function fe(u,g,I,D,F){this.listener=u,this.proxy=null,this.src=g,this.type=I,this.capture=!!D,this.ha=F,this.key=++ne,this.da=this.fa=!1}function j(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function H(u,g,I){for(const D in u)g.call(I,u[D],D,u)}function le(u,g){for(const I in u)g.call(void 0,u[I],I,u)}function ge(u){const g={};for(const I in u)g[I]=u[I];return g}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,g){let I,D;for(let F=1;F<arguments.length;F++){D=arguments[F];for(I in D)u[I]=D[I];for(let z=0;z<J.length;z++)I=J[z],Object.prototype.hasOwnProperty.call(D,I)&&(u[I]=D[I])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,g,I,D,F){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const pe=Qe(u,g,D,F);return pe>-1?(g=u[pe],I||(g.fa=!1)):(g=new fe(g,this.src,z,!!D,F),g.fa=I,u.push(g)),g};function De(u,g){const I=g.type;if(I in u.g){var D=u.g[I],F=Array.prototype.indexOf.call(D,g,void 0),z;(z=F>=0)&&Array.prototype.splice.call(D,F,1),z&&(j(g),u.g[I].length==0&&(delete u.g[I],u.h--))}}function Qe(u,g,I,D){for(let F=0;F<u.length;++F){const z=u[F];if(!z.da&&z.listener==g&&z.capture==!!I&&z.ha==D)return F}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),Rt={};function Ge(u,g,I,D,F){if(Array.isArray(g)){for(let z=0;z<g.length;z++)Ge(u,g[z],I,D,F);return null}return I=Ve(I),u&&u[re]?u.J(g,I,a(D)?!!D.capture:!1,F):Ue(u,g,I,!1,D,F)}function Ue(u,g,I,D,F,z){if(!g)throw Error("Invalid event type");const pe=a(F)?!!F.capture:!!F;let Xe=yn(u);if(Xe||(u[Ce]=Xe=new Ee(u)),I=Xe.add(g,I,D,pe,z),I.proxy)return I;if(D=Be(),I.proxy=D,D.src=u,D.listener=I,u.addEventListener)O||(F=pe),F===void 0&&(F=!1),u.addEventListener(g.toString(),D,F);else if(u.attachEvent)u.attachEvent(Kn(g.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Be(){function u(I){return g.call(u.src,u.listener,I)}const g=Nr;return u}function qt(u,g,I,D,F){if(Array.isArray(g))for(var z=0;z<g.length;z++)qt(u,g[z],I,D,F);else D=a(D)?!!D.capture:!!D,I=Ve(I),u&&u[re]?(u=u.i,z=String(g).toString(),z in u.g&&(g=u.g[z],I=Qe(g,I,D,F),I>-1&&(j(g[I]),Array.prototype.splice.call(g,I,1),g.length==0&&(delete u.g[z],u.h--)))):u&&(u=yn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Qe(g,I,D,F)),(I=u>-1?g[u]:null)&&Ht(I))}function Ht(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[re])De(g.i,u);else{var I=u.type,D=u.proxy;g.removeEventListener?g.removeEventListener(I,D,u.capture):g.detachEvent?g.detachEvent(Kn(I),D):g.addListener&&g.removeListener&&g.removeListener(D),(I=yn(g))?(De(I,u),I.h==0&&(I.src=null,g[Ce]=null)):j(u)}}}function Kn(u){return u in Rt?Rt[u]:Rt[u]="on"+u}function Nr(u,g){if(u.da)u=!0;else{g=new $(g,this);const I=u.listener,D=u.ha||u.src;u.fa&&Ht(u),u=I.call(D,g)}return u}function yn(u){return u=u[Ce],u instanceof Ee?u:null}var yr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ve(u){return typeof u=="function"?u:(u[yr]||(u[yr]=function(g){return u.handleEvent(g)}),u[yr])}function lt(){P.call(this),this.i=new Ee(this),this.M=this,this.G=null}h(lt,P),lt.prototype[re]=!0,lt.prototype.removeEventListener=function(u,g,I,D){qt(this,u,g,I,D)};function rn(u,g){var I,D=u.G;if(D)for(I=[];D;D=D.G)I.push(D);if(u=u.M,D=g.type||g,typeof g=="string")g=new N(g,u);else if(g instanceof N)g.target=g.target||u;else{var F=g;g=new N(D,u),M(g,F)}F=!0;let z,pe;if(I)for(pe=I.length-1;pe>=0;pe--)z=g.g=I[pe],F=vr(z,D,!0,g)&&F;if(z=g.g=u,F=vr(z,D,!0,g)&&F,F=vr(z,D,!1,g)&&F,I)for(pe=0;pe<I.length;pe++)z=g.g=I[pe],F=vr(z,D,!1,g)&&F}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const I=u.g[g];for(let D=0;D<I.length;D++)j(I[D]);delete u.g[g],u.h--}}this.G=null},lt.prototype.J=function(u,g,I,D){return this.i.add(String(u),g,!1,I,D)},lt.prototype.K=function(u,g,I,D){return this.i.add(String(u),g,!0,I,D)};function vr(u,g,I,D){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let z=0;z<g.length;++z){const pe=g[z];if(pe&&!pe.da&&pe.capture==I){const Xe=pe.listener,bn=pe.ha||pe.src;pe.fa&&De(u.i,pe),F=Xe.call(bn,D)!==!1&&F}}return F&&!D.defaultPrevented}function $i(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function wr(u){u.g=$i(()=>{u.g=null,u.i&&(u.i=!1,wr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ta extends P{constructor(g,I){super(),this.m=g,this.l=I,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:wr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(u){P.call(this),this.h=u,this.g={}}h(Ds,P);var Fn=[];function Dr(u){H(u.g,function(g,I){this.g.hasOwnProperty(I)&&Ht(g)},u),u.g={}}Ds.prototype.N=function(){Ds.Z.N.call(this),Dr(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sn=o.JSON.stringify,pl=o.JSON.parse,oi=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ai(){}function na(){}var es={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Or(){N.call(this,"d")}h(Or,N);function Y(){N.call(this,"c")}h(Y,N);var B={},q=null;function te(){return q=q||new lt}B.Ia="serverreachability";function oe(u){N.call(this,B.Ia,u)}h(oe,N);function se(u){const g=te();rn(g,new oe(g))}B.STAT_EVENT="statevent";function ye(u,g){N.call(this,B.STAT_EVENT,u),this.stat=g}h(ye,N);function X(u){const g=te();rn(g,new ye(g,u))}B.Ja="timingevent";function we(u,g){N.call(this,B.Ja,u),this.size=g}h(we,N);function xe(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function G(){this.g=!0}G.prototype.ua=function(){this.g=!1};function ue(u,g,I,D,F,z){u.info(function(){if(u.g)if(z){var pe="",Xe=z.split("&");for(let At=0;At<Xe.length;At++){var bn=Xe[At].split("=");if(bn.length>1){const kn=bn[0];bn=bn[1];const Os=kn.split("_");pe=Os.length>=2&&Os[1]=="type"?pe+(kn+"="+bn+"&"):pe+(kn+"=redacted&")}}}else pe=null;else pe=z;return"XMLHTTP REQ ("+D+") [attempt "+F+"]: "+g+`
`+I+`
`+pe})}function he(u,g,I,D,F,z,pe){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+F+"]: "+g+`
`+I+`
`+z+" "+pe})}function de(u,g,I,D){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Re(u,I)+(D?" "+D:"")})}function ce(u,g){u.info(function(){return"TIMEOUT: "+g})}G.prototype.info=function(){};function Re(u,g){if(!u.g)return g;if(!g)return null;try{const z=JSON.parse(g);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var I=z[u];if(!(I.length<2)){var D=I[1];if(Array.isArray(D)&&!(D.length<1)){var F=D[0];if(F!="noop"&&F!="stop"&&F!="close")for(let pe=1;pe<D.length;pe++)D[pe]=""}}}}return sn(z)}catch{return g}}var ot={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bt;function gt(){}h(gt,ai),gt.prototype.g=function(){return new XMLHttpRequest},bt=new gt;function qe(u){return encodeURIComponent(String(u))}function Lt(u){var g=1;u=u.split(":");const I=[];for(;g>0&&u.length;)I.push(u.shift()),g--;return u.length&&I.push(u.join(":")),I}function Kt(u,g,I,D){this.j=u,this.i=g,this.l=I,this.S=D||1,this.V=new Ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}var vt={},tt={};function je(u,g,I){u.M=1,u.A=Lr(vn(g)),u.u=I,u.R=!0,me(u,null)}function me(u,g){u.F=Date.now(),Pt(u),u.B=vn(u.A);var I=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),iI(I.i,"t",D),u.C=0,I=u.j.L,u.h=new He,u.g=SI(u.j,I?g:null,!u.u),u.P>0&&(u.O=new ta(c(u.Y,u,u.g),u.P)),g=u.V,I=u.g,D=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Fn[0]=F.toString()),F=Fn);for(let z=0;z<F.length;z++){const pe=Ge(I,F[z],D||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=u.J?ge(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),se(),ue(u.i,u.v,u.B,u.l,u.S,u.u)}Kt.prototype.ba=function(u){u=u.target;const g=this.O;g&&zi(u)==3?g.j():this.Y(u)},Kt.prototype.Y=function(u){try{if(u==this.g)e:{const Xe=zi(this.g),bn=this.g.ya(),At=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||hI(this.g)))){this.K||Xe!=4||bn==7||(bn==8||At<=0?se(3):se(2)),yt(this);var g=this.g.ca();this.X=g;var I=dt(this);if(this.o=g==200,he(this.i,this.v,this.B,this.l,this.S,Xe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var D,F=this.g;if((D=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(D)){var z=D;break t}}z=null}if(u=z)de(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ye(this,u);else{this.o=!1,this.m=3,X(12),be(this),Sn(this);break e}}if(this.R){u=!0;let kn;for(;!this.K&&this.C<I.length;)if(kn=jt(this,I),kn==tt){Xe==4&&(this.m=4,X(14),u=!1),de(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==vt){this.m=4,X(15),de(this.i,this.l,I,"[Invalid Chunk]"),u=!1;break}else de(this.i,this.l,kn,null),Ye(this,kn);if(wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||I.length!=0||this.h.h||(this.m=1,X(16),u=!1),this.o=this.o&&u,!u)de(this.i,this.l,I,"[Invalid Chunked Response]"),be(this),Sn(this);else if(I.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),$g(pe),pe.P=!0,X(11))}}else de(this.i,this.l,I,null),Ye(this,I);Xe==4&&be(this),this.o&&!this.K&&(Xe==4?wI(this.j,this):(this.o=!1,Pt(this)))}else Q2(this.g),g==400&&I.indexOf("Unknown SID")>0?(this.m=3,X(12)):(this.m=0,X(13)),be(this),Sn(this)}}}catch{}finally{}};function dt(u){if(!wt(u))return u.g.la();const g=hI(u.g);if(g==="")return"";let I="";const D=g.length,F=zi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return be(u),Sn(u),"";u.h.i=new o.TextDecoder}for(let z=0;z<D;z++)u.h.h=!0,I+=u.h.i.decode(g[z],{stream:!(F&&z==D-1)});return g.length=0,u.h.g+=I,u.C=0,u.h.g}function wt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jt(u,g){var I=u.C,D=g.indexOf(`
`,I);return D==-1?tt:(I=Number(g.substring(I,D)),isNaN(I)?vt:(D+=1,D+I>g.length?tt:(g=g.slice(D,D+I),u.C=D+I,g)))}Kt.prototype.cancel=function(){this.K=!0,be(this)};function Pt(u){u.T=Date.now()+u.H,_r(u,u.H)}function _r(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=xe(c(u.aa,u),g)}function yt(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Kt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ce(this.i,this.B),this.M!=2&&(se(),X(17)),be(this),this.m=2,Sn(this)):_r(this,this.T-u)};function Sn(u){u.j.I==0||u.K||wI(u.j,u)}function be(u){yt(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Dr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ye(u,g){try{var I=u.j;if(I.I!=0&&(I.g==u||Tn(I.h,u))){if(!u.L&&Tn(I.h,u)&&I.I==3){try{var D=I.Ba.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var F=D;if(F[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<u.F)Uh(I),Mh(I);else break e;jg(I),X(18)}}else I.xa=F[1],0<I.xa-I.K&&F[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=xe(c(I.Va,I),6e3));Ct(I.h)<=1&&I.ta&&(I.ta=void 0)}else ia(I,11)}else if((u.L||I.g==u)&&Uh(I),!C(g))for(F=I.Ba.g.parse(g),g=0;g<F.length;g++){let At=F[g];const kn=At[0];if(!(kn<=I.K))if(I.K=kn,At=At[1],I.I==2)if(At[0]=="c"){I.M=At[1],I.ba=At[2];const Os=At[3];Os!=null&&(I.ka=Os,I.j.info("VER="+I.ka));const oa=At[4];oa!=null&&(I.za=oa,I.j.info("SVER="+I.za));const Wi=At[5];Wi!=null&&typeof Wi=="number"&&Wi>0&&(D=1.5*Wi,I.O=D,I.j.info("backChannelRequestTimeoutMs_="+D)),D=I;const qi=u.g;if(qi){const $h=qi.g?qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($h){var z=D.h;z.g||$h.indexOf("spdy")==-1&&$h.indexOf("quic")==-1&&$h.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Un(z,z.h),z.h=null))}if(D.G){const Bg=qi.g?qi.g.getResponseHeader("X-HTTP-Session-Id"):null;Bg&&(D.wa=Bg,ke(D.J,D.G,Bg))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-u.F,I.j.info("Handshake RTT: "+I.T+"ms")),D=I;var pe=u;if(D.na=II(D,D.L?D.ba:null,D.W),pe.L){Cn(D.h,pe);var Xe=pe,bn=D.O;bn&&(Xe.H=bn),Xe.D&&(yt(Xe),Pt(Xe)),D.g=pe}else yI(D);I.i.length>0&&Fh(I)}else At[0]!="stop"&&At[0]!="close"||ia(I,7);else I.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?ia(I,7):Ug(I):At[0]!="noop"&&I.l&&I.l.qa(At),I.A=0)}}se(4)}catch{}}var Gt=class{constructor(u,g){this.g=u,this.map=g}};function ht(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _t(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ct(u){return u.h?1:u.g?u.g.size:0}function Tn(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Un(u,g){u.g?u.g.add(g):u.h=g}function Cn(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ht.prototype.cancel=function(){if(this.i=or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function or(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const I of u.g.values())g=g.concat(I.G);return g}return m(u.i)}var ar=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Er(u,g){if(u){u=u.split("&");for(let I=0;I<u.length;I++){const D=u[I].indexOf("=");let F,z=null;D>=0?(F=u[I].substring(0,D),z=u[I].substring(D+1)):F=u[I],g(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Qt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Qt?(this.l=u.l,us(this,u.j),this.o=u.o,this.g=u.g,li(this,u.u),this.h=u.h,ra(this,oI(u.i)),this.m=u.m):u&&(g=String(u).match(ar))?(this.l=!1,us(this,g[1]||"",!0),this.o=fu(g[2]||""),this.g=fu(g[3]||"",!0),li(this,g[4]),this.h=fu(g[5]||"",!0),ra(this,g[6]||"",!0),this.m=fu(g[7]||"")):(this.l=!1,this.i=new pu(null,this.l))}Qt.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(mu(g,tI,!0),":");var I=this.g;return(I||g=="file")&&(u.push("//"),(g=this.o)&&u.push(mu(g,tI,!0),"@"),u.push(qe(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&u.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&u.push("/"),u.push(mu(I,I.charAt(0)=="/"?j2:U2,!0))),(I=this.i.toString())&&u.push("?",I),(I=this.m)&&u.push("#",mu(I,B2)),u.join("")},Qt.prototype.resolve=function(u){const g=vn(this);let I=!!u.j;I?us(g,u.j):I=!!u.o,I?g.o=u.o:I=!!u.g,I?g.g=u.g:I=u.u!=null;var D=u.h;if(I)li(g,u.u);else if(I=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var F=g.h.lastIndexOf("/");F!=-1&&(D=g.h.slice(0,F+1)+D)}if(F=D,F==".."||F==".")D="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){D=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let pe=0;pe<F.length;){const Xe=F[pe++];Xe=="."?D&&pe==F.length&&z.push(""):Xe==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),D&&pe==F.length&&z.push("")):(z.push(Xe),D=!0)}D=z.join("/")}else D=F}return I?g.h=D:I=u.i.toString()!=="",I?ra(g,oI(u.i)):I=!!u.m,I&&(g.m=u.m),g};function vn(u){return new Qt(u)}function us(u,g,I){u.j=I?fu(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function li(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ra(u,g,I){g instanceof pu?(u.i=g,z2(u.i,u.l)):(I||(g=mu(g,$2)),u.i=new pu(g,u.l))}function ke(u,g,I){u.i.set(g,I)}function Lr(u){return ke(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function fu(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function mu(u,g,I){return typeof u=="string"?(u=encodeURI(u).replace(g,F2),I&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function F2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var tI=/[#\/\?@]/g,U2=/[#\?:]/g,j2=/[#\?]/g,$2=/[#\?@]/g,B2=/#/g;function pu(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function sa(u){u.g||(u.g=new Map,u.h=0,u.i&&Er(u.i,function(g,I){u.add(decodeURIComponent(g.replace(/\+/g," ")),I)}))}t=pu.prototype,t.add=function(u,g){sa(this),this.i=null,u=gl(this,u);let I=this.g.get(u);return I||this.g.set(u,I=[]),I.push(g),this.h+=1,this};function nI(u,g){sa(u),g=gl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function rI(u,g){return sa(u),g=gl(u,g),u.g.has(g)}t.forEach=function(u,g){sa(this),this.g.forEach(function(I,D){I.forEach(function(F){u.call(g,F,D,this)},this)},this)};function sI(u,g){sa(u);let I=[];if(typeof g=="string")rI(u,g)&&(I=I.concat(u.g.get(gl(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)I=I.concat(u[g]);return I}t.set=function(u,g){return sa(this),this.i=null,u=gl(this,u),rI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=sI(this,u),u.length>0?String(u[0]):g):g};function iI(u,g,I){nI(u,g),I.length>0&&(u.i=null,u.g.set(gl(u,g),m(I)),u.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let D=0;D<g.length;D++){var I=g[D];const F=qe(I);I=sI(this,I);for(let z=0;z<I.length;z++){let pe=F;I[z]!==""&&(pe+="="+qe(I[z])),u.push(pe)}}return this.i=u.join("&")};function oI(u){const g=new pu;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function gl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function z2(u,g){g&&!u.j&&(sa(u),u.i=null,u.g.forEach(function(I,D){const F=D.toLowerCase();D!=F&&(nI(this,D),iI(this,F,I))},u)),u.j=g}function W2(u,g){const I=new G;if(o.Image){const D=new Image;D.onload=d(Bi,I,"TestLoadImage: loaded",!0,g,D),D.onerror=d(Bi,I,"TestLoadImage: error",!1,g,D),D.onabort=d(Bi,I,"TestLoadImage: abort",!1,g,D),D.ontimeout=d(Bi,I,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else g(!1)}function q2(u,g){const I=new G,D=new AbortController,F=setTimeout(()=>{D.abort(),Bi(I,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:D.signal}).then(z=>{clearTimeout(F),z.ok?Bi(I,"TestPingServer: ok",!0,g):Bi(I,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Bi(I,"TestPingServer: error",!1,g)})}function Bi(u,g,I,D,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),D(I)}catch{}}function H2(){this.g=new oi}function Mg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Mg,ai),Mg.prototype.g=function(){return new Lh(this.i,this.h)};function Lh(u,g){lt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Lh,lt),t=Lh.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,yu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gu(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yu(this)),this.g&&(this.readyState=3,yu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;aI(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function aI(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?gu(this):yu(this),this.readyState==3&&aI(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,gu(this))},t.Na=function(u){this.g&&(this.response=u,gu(this))},t.ga=function(){this.g&&gu(this)};function gu(u){u.readyState=4,u.l=null,u.j=null,u.B=null,yu(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var I=g.next();!I.done;)I=I.value,u.push(I[0]+": "+I[1]),I=g.next();return u.join(`\r
`)};function yu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Lh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function lI(u){let g="";return H(u,function(I,D){g+=D,g+=":",g+=I,g+=`\r
`}),g}function Fg(u,g,I){e:{for(D in I){var D=!1;break e}D=!0}D||(I=lI(I),typeof u=="string"?I!=null&&qe(I):ke(u,g,I))}function on(u){lt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(on,lt);var K2=/^https?$/i,G2=["POST","PUT"];t=on.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,I,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bt.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(z){cI(this,z);return}if(u=I||"",I=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var F in D)I.set(F,D[F]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const z of D.keys())I.set(z,D.get(z));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(I.keys()).find(z=>z.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(G2,g,void 0)>=0)||D||F||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,pe]of I)this.g.setRequestHeader(z,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){cI(this,z)}};function cI(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,uI(u),Vh(u)}function uI(u){u.A||(u.A=!0,rn(u,"complete"),rn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,rn(this,"complete"),rn(this,"abort"),Vh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vh(this,!0)),on.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?dI(this):this.Xa())},t.Xa=function(){dI(this)};function dI(u){if(u.h&&typeof i<"u"){if(u.v&&zi(u)==4)setTimeout(u.Ca.bind(u),0);else if(rn(u,"readystatechange"),zi(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var I;if(!(I=g)){var D;if(D=z===0){let pe=String(u.D).match(ar)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),D=!K2.test(pe?pe.toLowerCase():"")}I=D}if(I)rn(u,"complete"),rn(u,"success");else{u.o=6;try{var F=zi(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",uI(u)}}finally{Vh(u)}}}}function Vh(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const I=u.g;u.g=null,g||rn(u,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zi(u){return u.g?u.g.readyState:0}t.ca=function(){try{return zi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),pl(g)}};function hI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Q2(u){const g={};u=(u.g&&zi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(C(u[D]))continue;var I=Lt(u[D]);const F=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const z=g[F]||[];g[F]=z,z.push(I)}le(g,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vu(u,g,I){return I&&I.internalChannelParams&&I.internalChannelParams[u]||g}function fI(u){this.za=0,this.i=[],this.j=new G,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vu("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vu("baseRetryDelayMs",5e3,u),this.Za=vu("retryDelaySeedMs",1e4,u),this.Ta=vu("forwardChannelMaxRetries",2,u),this.va=vu("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ht(u&&u.concurrentRequestLimit),this.Ba=new H2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=fI.prototype,t.ka=8,t.I=1,t.connect=function(u,g,I,D){X(0),this.W=u,this.H=g||{},I&&D!==void 0&&(this.H.OSID=I,this.H.OAID=D),this.F=this.X,this.J=II(this,null,this.W),Fh(this)};function Ug(u){if(mI(u),u.I==3){var g=u.V++,I=vn(u.J);if(ke(I,"SID",u.M),ke(I,"RID",g),ke(I,"TYPE","terminate"),wu(u,I),g=new Kt(u,u.j,g),g.M=2,g.A=Lr(vn(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=g.A,I=!0),I||(g.g=SI(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Pt(g)}EI(u)}function Mh(u){u.g&&($g(u),u.g.cancel(),u.g=null)}function mI(u){Mh(u),u.v&&(o.clearTimeout(u.v),u.v=null),Uh(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Fh(u){if(!_t(u.h)&&!u.m){u.m=!0;var g=u.Ea;k||b(),L||(k(),L=!0),x.add(g,u),u.D=0}}function Y2(u,g){return Ct(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=xe(c(u.Ea,u,g),_I(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Kt(this,this.j,u);let z=this.o;if(this.U&&(z?(z=ge(z),M(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var g=0,I=0;I<this.i.length;I++){t:{var D=this.i[I];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,g>4096){g=I;break e}if(g===4096||I===this.i.length-1){g=I+1;break e}}g=1e3}else g=1e3;g=gI(this,F,g),I=vn(this.J),ke(I,"RID",u),ke(I,"CVER",22),this.G&&ke(I,"X-HTTP-Session-Id",this.G),wu(this,I),z&&(this.R?g="headers="+qe(lI(z))+"&"+g:this.u&&Fg(I,this.u,z)),Un(this.h,F),this.Ra&&ke(I,"TYPE","init"),this.S?(ke(I,"$req",g),ke(I,"SID","null"),F.U=!0,je(F,I,null)):je(F,I,g),this.I=2}}else this.I==3&&(u?pI(this,u):this.i.length==0||_t(this.h)||pI(this))};function pI(u,g){var I;g?I=g.l:I=u.V++;const D=vn(u.J);ke(D,"SID",u.M),ke(D,"RID",I),ke(D,"AID",u.K),wu(u,D),u.u&&u.o&&Fg(D,u.u,u.o),I=new Kt(u,u.j,I,u.D+1),u.u===null&&(I.J=u.o),g&&(u.i=g.G.concat(u.i)),g=gI(u,I,1e3),I.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Un(u.h,I),je(I,D,g)}function wu(u,g){u.H&&H(u.H,function(I,D){ke(g,D,I)}),u.l&&H({},function(I,D){ke(g,D,I)})}function gI(u,g,I){I=Math.min(u.i.length,I);const D=u.l?c(u.l.Ka,u.l,u):null;e:{var F=u.i;let Xe=-1;for(;;){const bn=["count="+I];Xe==-1?I>0?(Xe=F[0].g,bn.push("ofs="+Xe)):Xe=0:bn.push("ofs="+Xe);let At=!0;for(let kn=0;kn<I;kn++){var z=F[kn].g;const Os=F[kn].map;if(z-=Xe,z<0)Xe=Math.max(0,F[kn].g-100),At=!1;else try{z="req"+z+"_"||"";try{var pe=Os instanceof Map?Os:Object.entries(Os);for(const[oa,Wi]of pe){let qi=Wi;a(Wi)&&(qi=sn(Wi)),bn.push(z+oa+"="+encodeURIComponent(qi))}}catch(oa){throw bn.push(z+"type="+encodeURIComponent("_badmap")),oa}}catch{D&&D(Os)}}if(At){pe=bn.join("&");break e}}pe=void 0}return u=u.i.splice(0,I),g.G=u,pe}function yI(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;k||b(),L||(k(),L=!0),x.add(g,u),u.A=0}}function jg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=xe(c(u.Da,u),_I(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,vI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=xe(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,X(10),Mh(this),vI(this))};function $g(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function vI(u){u.g=new Kt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=vn(u.na);ke(g,"RID","rpc"),ke(g,"SID",u.M),ke(g,"AID",u.K),ke(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ke(g,"TO",u.ia),ke(g,"TYPE","xmlhttp"),wu(u,g),u.u&&u.o&&Fg(g,u.u,u.o),u.O&&(u.g.H=u.O);var I=u.g;u=u.ba,I.M=1,I.A=Lr(vn(g)),I.u=null,I.R=!0,me(I,u)}t.Va=function(){this.C!=null&&(this.C=null,Mh(this),jg(this),X(19))};function Uh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function wI(u,g){var I=null;if(u.g==g){Uh(u),$g(u),u.g=null;var D=2}else if(Tn(u.h,g))I=g.G,Cn(u.h,g),D=1;else return;if(u.I!=0){if(g.o)if(D==1){I=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;D=te(),rn(D,new we(D,I)),Fh(u)}else yI(u);else if(F=g.m,F==3||F==0&&g.X>0||!(D==1&&Y2(u,g)||D==2&&jg(u)))switch(I&&I.length>0&&(g=u.h,g.i=g.i.concat(I)),F){case 1:ia(u,5);break;case 4:ia(u,10);break;case 3:ia(u,6);break;default:ia(u,2)}}}function _I(u,g){let I=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(I*=2),I*g}function ia(u,g){if(u.j.info("Error code "+g),g==2){var I=c(u.bb,u),D=u.Ua;const F=!D;D=new Qt(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||us(D,"https"),Lr(D),F?W2(D.toString(),I):q2(D.toString(),I)}else X(2);u.I=0,u.l&&u.l.pa(g),EI(u),mI(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),X(2)):(this.j.info("Failed to ping google.com"),X(1))};function EI(u){if(u.I=0,u.ja=[],u.l){const g=or(u.h);(g.length!=0||u.i.length!=0)&&(S(u.ja,g),S(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function II(u,g,I){var D=I instanceof Qt?vn(I):new Qt(I);if(D.g!="")g&&(D.g=g+"."+D.g),li(D,D.u);else{var F=o.location;D=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const z=new Qt(null);D&&us(z,D),g&&(z.g=g),F&&li(z,F),I&&(z.h=I),D=z}return I=u.G,g=u.wa,I&&g&&ke(D,I,g),ke(D,"VER",u.ka),wu(u,D),D}function SI(u,g,I){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new on(new Mg({ab:I})):new on(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function TI(){}t=TI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function jh(){}jh.prototype.g=function(u,g){return new Vr(u,g)};function Vr(u,g){lt.call(this),this.g=new fI(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new yl(this)}h(Vr,lt),Vr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){Ug(this.g)},Vr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var I={};I.__data__=u,u=I}else this.v&&(I={},I.__data__=sn(u),u=I);g.i.push(new Gt(g.Ya++,u)),g.I==3&&Fh(g)},Vr.prototype.N=function(){this.g.l=null,delete this.j,Ug(this.g),delete this.g,Vr.Z.N.call(this)};function bI(u){Or.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const I in g){u=I;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(bI,Or);function AI(){Y.call(this),this.status=1}h(AI,Y);function yl(u){this.g=u}h(yl,TI),yl.prototype.ra=function(){rn(this.g,"a")},yl.prototype.qa=function(u){rn(this.g,new bI(u))},yl.prototype.pa=function(u){rn(this.g,new AI)},yl.prototype.oa=function(){rn(this.g,"b")},jh.prototype.createWebChannel=jh.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,$k=function(){return new jh},jk=function(){return te()},Uk=B,Rw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,Kf=ot,Tt.COMPLETE="complete",Fk=Tt,na.EventType=es,es.OPEN="a",es.CLOSE="b",es.ERROR="c",es.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Hu=na,on.prototype.listenOnce=on.prototype.K,on.prototype.getLastError=on.prototype.Ha,on.prototype.getLastErrorCode=on.prototype.ya,on.prototype.getStatus=on.prototype.ca,on.prototype.getResponseJson=on.prototype.La,on.prototype.getResponseText=on.prototype.la,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Fa,Mk=on}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});const ob="@firebase/firestore",ab="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new rg("@firebase/firestore");function Pl(){return Uo.logLevel}function Bk(t){Uo.setLogLevel(t)}function Z(t,...e){if(Uo.logLevel<=rt.DEBUG){const n=e.map(B0);Uo.debug(`Firestore (${eu}): ${t}`,...n)}}function pn(t,...e){if(Uo.logLevel<=rt.ERROR){const n=e.map(B0);Uo.error(`Firestore (${eu}): ${t}`,...n)}}function jo(t,...e){if(Uo.logLevel<=rt.WARN){const n=e.map(B0);Uo.warn(`Firestore (${eu}): ${t}`,...n)}}function B0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zk(t,r,n)}function zk(t,e,n){let r=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw pn(r),new Error(r)}function Ne(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||zk(e,s,r)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zn.UNAUTHENTICATED))}shutdown(){}}class j9{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new as;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new as,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new as)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new U9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class $9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=W9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function Pw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ly(s)===Ly(i)?We(s,i):Ly(s)?1:-1}return We(t.length,e.length)}const q9=55296,H9=57343;function Ly(t){const e=t.charCodeAt(0);return e>=q9&&e<=H9}function Sc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function qk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ms.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return We(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),s=Ms.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):Pw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class mt extends Ms{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const K9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Ms{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return K9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cb}static keyField(){return new zt([cb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(mt.fromString(e))}static fromName(e){return new ve(mt.fromString(e).popFirst(5))}static empty(){return new ve(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(t,e,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kk(t,e,n,r){if(e===!0&&r===!0)throw new ie(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ub(t){if(!ve.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function db(t){if(ve.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ag(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se(12329,{type:typeof t})}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ag(t);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function G9(t,e){if(e<=0)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,e){const n={typeString:t};return e&&(n.value=e),n}function _h(t,e){if(!Gk(t))throw new ie(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ie(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=-62135596800,fb=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fb);return new ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hb)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fb}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_h(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:En("string",ft._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new ft(0,0))}static max(){return new Le(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=-1;class Zm{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Cw(t){return t.fields.find(e=>e.kind===2)}function da(t){return t.fields.filter(e=>e.kind!==2)}Zm.UNKNOWN_ID=-1;class Gf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Kd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Kd(0,Jr.min())}}function Qk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new Jr(s,ve.empty(),e)}function Yk(t){return new Jr(t.readTime,t.key,Tc)}class Jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jr(Le.min(),ve.empty(),Tc)}static max(){return new Jr(Le.max(),ve.empty(),Tc)}}function z0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==Jk)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="SimpleDb";class lg{static open(e,n,r,s){try{return new lg(n,e.transaction(s,r))}catch(i){throw new ld(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new as,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ld(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=W0(r.target.error);this.S.reject(new ld(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Z(Fr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Y9(n)}}class No{static delete(e){return Z(Fr,"Removing database:",e),ma(GC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!L0())return!1;if(No.F())return!0;const e=Hn(),n=No.M(e),r=0<n&&n<10,s=Zk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,No.M(Hn())===12.2&&pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Z(Fr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ld(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ie(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ie(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ld(e,o))},s.onupgradeneeded=i=>{Z(Fr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{Z(Fr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=lg.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Z(Fr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Zk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Q9{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ma(this.U.delete())}}class ld extends ie{constructor(e,n){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xo(t){return t.name==="IndexedDbTransactionError"}class Y9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Z(Fr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Z(Fr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ma(r)}add(e){return Z(Fr,"ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next(n=>(n===void 0&&(n=null),Z(Fr,"GET",this.store.name,e,n),n))}delete(e){return Z(Fr,"DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return Z(Fr,"COUNT",this.store.name),ma(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){Z(Fr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new V((r,s)=>{n.onerror=i=>{const o=W0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new Q9(a),c=n(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ma(t){return new V((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=W0(r.target.error);n(s)}})}let mb=!1;function W0(t){const e=No.M(Hn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mb||(mb=!0,setTimeout(()=>{throw r},0)),r}}return t}const cd="IndexBackfiller";class J9{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Z(cd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();Z(cd,`Documents written: ${n}`)}catch(n){Xo(n)?Z(cd,"Ignoring IndexedDB error during index backfill: ",n):await Jo(n)}await this.re(6e4)})}}class X9{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Z(cd,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(Z(cd,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Yk(i);z0(o,r)>0&&(r=o)}),new Jr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ar.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=-1;function cg(t){return t==null}function Gd(t){return t===0&&1/t==-1/0}function eN(t){return typeof t=="number"&&Number.isInteger(t)&&!Gd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="";function rr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pb(e)),e=Z9(t.get(n),e);return pb(e)}function Z9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ep:n+="";break;default:n+=i}}return n}function pb(t){return t+ep+""}function qs(t){const e=t.length;if(Ne(e>=2,64408,{path:t}),e===2)return Ne(t.charAt(0)===ep&&t.charAt(1)==="",56145,{path:t}),mt.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(ep,i);switch((o<0||o>n)&&Se(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Se(61167,{path:t})}i=o+2}return new mt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="remoteDocuments",Eh="owner",wl="owner",Qd="mutationQueues",ez="userId",ys="mutations",gb="batchId",Aa="userMutationsIndex",yb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e){return[t,rr(e)]}function tN(t,e,n){return[t,rr(e),n]}const tz={},bc="documentMutations",tp="remoteDocumentsV14",nz=["prefixPath","collectionGroup","readTime","documentId"],Yf="documentKeyIndex",rz=["prefixPath","collectionGroup","documentId"],nN="collectionGroupIndex",sz=["collectionGroup","readTime","prefixPath","documentId"],Yd="remoteDocumentGlobal",kw="remoteDocumentGlobalKey",Ac="targets",rN="queryTargetsIndex",iz=["canonicalId","targetId"],xc="targetDocuments",oz=["targetId","path"],q0="documentTargetsIndex",az=["path","targetId"],np="targetGlobalKey",Wa="targetGlobal",Jd="collectionParents",lz=["collectionId","parent"],Rc="clientMetadata",cz="clientId",ug="bundles",uz="bundleId",dg="namedQueries",dz="name",H0="indexConfiguration",hz="indexId",Nw="collectionGroupIndex",fz="collectionGroup",ud="indexState",mz=["indexId","uid"],sN="sequenceNumberIndex",pz=["uid","sequenceNumber"],dd="indexEntries",gz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iN="documentKeyIndex",yz=["indexId","uid","orderedDocumentKey"],hg="documentOverlays",vz=["userId","collectionPath","documentId"],Dw="collectionPathOverlayIndex",wz=["userId","collectionPath","largestBatchId"],oN="collectionGroupOverlayIndex",_z=["userId","collectionGroup","largestBatchId"],K0="globals",Ez="name",aN=[Qd,ys,bc,ha,Ac,Eh,Wa,xc,Rc,Yd,Jd,ug,dg],Iz=[...aN,hg],lN=[Qd,ys,bc,tp,Ac,Eh,Wa,xc,Rc,Yd,Jd,ug,dg,hg],cN=lN,G0=[...cN,H0,ud,dd],Sz=G0,uN=[...G0,K0],Tz=uN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Xk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Pn(t,e){const n=Te(t);return No.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$n.RED,this.left=s??$n.EMPTY,this.right=i??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $n(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $n.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wb(this.data.getIterator())}getIteratorFrom(e){return new wb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class wb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _l(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new xr([])}unionWith(e){let n=new St(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hN("Invalid base64 string: "+i):i}}(e);return new hn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const bz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const n=bz.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Di(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="server_timestamp",mN="__type__",pN="__previous_value__",gN="__local_write_time__";function Q0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mN])==null?void 0:r.stringValue)===fN}function fg(t){const e=t.mapValue.fields[pN];return Q0(e)?fg(e):e}function Xd(t){const e=Ni(t.mapValue.fields[gN].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const rp="(default)";class $o{constructor(e,n){this.projectId=e,this.database=n||rp}static empty(){return new $o("","")}get isDefaultDatabase(){return this.database===rp}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="__type__",yN="__max__",yo={mapValue:{fields:{__type__:{stringValue:yN}}}},J0="__vector__",Pc="value",Jf={nullValue:"NULL_VALUE"};function Bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Q0(t)?4:vN(t)?9007199254740991:mg(t)?10:11:Se(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=Bo(t);if(n!==Bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xd(t).isEqual(Xd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ni(s.timestampValue),a=Ni(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Di(s.bytesValue).isEqual(Di(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $t(s.geoPointValue.latitude)===$t(i.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $t(s.integerValue)===$t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$t(s.doubleValue),a=$t(i.doubleValue);return o===a?Gd(o)===Gd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Sc(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(vb(o)!==vb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return Se(52216,{left:t})}}function Zd(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function zo(t,e){if(t===e)return 0;const n=Bo(t),r=Bo(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=$t(i.integerValue||i.doubleValue),l=$t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return _b(t.timestampValue,e.timestampValue);case 4:return _b(Xd(t),Xd(e));case 5:return Pw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Di(i),l=Di(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=We(a[c],l[c]);if(d!==0)return d}return We(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=We($t(i.latitude),$t(o.latitude));return a!==0?a:We($t(i.longitude),$t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Eb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,S,p;const a=i.fields||{},l=o.fields||{},c=(f=a[Pc])==null?void 0:f.arrayValue,d=(m=l[Pc])==null?void 0:m.arrayValue,h=We(((S=c==null?void 0:c.values)==null?void 0:S.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:Eb(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===yo.mapValue&&o===yo.mapValue)return 0;if(i===yo.mapValue)return 1;if(o===yo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Pw(l[h],d[h]);if(f!==0)return f;const m=zo(a[l[h]],c[d[h]]);if(m!==0)return m}return We(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function _b(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=Ni(t),r=Ni(e),s=We(n.seconds,r.seconds);return s!==0?s:We(n.nanos,r.nanos)}function Eb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=zo(n[s],r[s]);if(i)return i}return We(n.length,r.length)}function Cc(t){return Lw(t)}function Lw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Di(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Lw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Lw(n.fields[o])}`;return s+"}"}(t.mapValue):Se(61005,{value:t})}function Xf(t){switch(Bo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fg(t);return e?16+Xf(e):16;case 5:return 2*t.stringValue.length;case 6:return Di(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Xf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Zo(r.fields,(i,o)=>{s+=i.length+Xf(o)}),s}(t.mapValue);default:throw Se(13486,{value:t})}}function eh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vw(t){return!!t&&"integerValue"in t}function th(t){return!!t&&"arrayValue"in t}function Ib(t){return!!t&&"nullValue"in t}function Sb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zf(t){return!!t&&"mapValue"in t}function mg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Y0])==null?void 0:r.stringValue)===J0}function hd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hd(t.arrayValue.values[n]);return e}return{...t}}function vN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yN}const wN={mapValue:{fields:{[Y0]:{stringValue:J0},[Pc]:{arrayValue:{}}}}};function xz(t){return"nullValue"in t?Jf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?eh($o.empty(),ve.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?mg(t)?wN:{mapValue:{}}:Se(35942,{value:t})}function Rz(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?eh($o.empty(),ve.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?wN:"mapValue"in t?mg(t)?{mapValue:{}}:yo:Se(61959,{value:t})}function Tb(t,e){const n=zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function bb(t,e){const n=zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hd(n)}setAll(e){let n=zt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=hd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Zf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Zf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new nr(hd(this.value))}}function _N(t){const e=[];return Zo(t.fields,(n,r)=>{const s=new zt([n]);if(Zf(r)){const i=_N(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new xr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Le.min(),Le.min(),Le.min(),nr.empty(),0)}static newFoundDocument(e,n,r,s){return new un(e,1,n,Le.min(),r,s,0)}static newNoDocument(e,n){return new un(e,2,n,Le.min(),Le.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Le.min(),Le.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.position=e,this.inclusive=n}}function Ab(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),n.key):r=zo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Pz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{}class it extends EN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Cz(e,n,r):n==="array-contains"?new Dz(e,r):n==="in"?new xN(e,r):n==="not-in"?new Oz(e,r):n==="array-contains-any"?new Lz(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kz(e,r):new Nz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&Bo(this.value)===Bo(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends EN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Et(e,n)}matches(e){return Nc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nc(t){return t.op==="and"}function Mw(t){return t.op==="or"}function X0(t){return IN(t)&&Nc(t)}function IN(t){for(const e of t.filters)if(e instanceof Et)return!1;return!0}function Fw(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Cc(t.value);if(X0(t))return t.filters.map(e=>Fw(e)).join(",");{const e=t.filters.map(n=>Fw(n)).join(",");return`${t.op}(${e})`}}function SN(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&ti(r.value,s.value)}(t,e):t instanceof Et?function(r,s){return s instanceof Et&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&SN(o,s.filters[a]),!0):!1}(t,e):void Se(19439)}function TN(t,e){const n=t.filters.concat(e);return Et.create(n,t.op)}function bN(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Cc(n.value)}`}(t):t instanceof Et?function(n){return n.op.toString()+" {"+n.getFilters().map(bN).join(" ,")+"}"}(t):"Filter"}class Cz extends it{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class kz extends it{constructor(e,n){super(e,"in",n),this.keys=AN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Nz extends it{constructor(e,n){super(e,"not-in",n),this.keys=AN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class Dz extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return th(n)&&Zd(n.arrayValue,this.value)}}class xN extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zd(this.value.arrayValue,n)}}class Oz extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zd(this.value.arrayValue,n)}}class Lz extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!th(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Uw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Vz(t,e,n,r,s,i,o)}function el(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),cg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cc(r)).join(",")),e.Te=n}return e.Te}function Ih(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xb(t.startAt,e.startAt)&&xb(t.endAt,e.endAt)}function sp(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ip(t,e){return t.filters.filter(n=>n instanceof it&&n.field.isEqual(e))}function Rb(t,e,n){let r=Jf,s=!0;for(const i of ip(t,e)){let o=Jf,a=!0;switch(i.op){case"<":case"<=":o=xz(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Jf}Tb({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Tb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Pb(t,e,n){let r=yo,s=!0;for(const i of ip(t,e)){let o=yo,a=!0;switch(i.op){case">=":case">":o=Rz(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=yo}bb({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];bb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RN(t,e,n,r,s,i,o,a){return new tu(t,e,n,r,s,i,o,a)}function Sh(t){return new tu(t)}function Cb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PN(t){return t.collectionGroup!==null}function fd(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new St(zt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new nh(i,r))}),n.has(zt.keyField().canonicalString())||e.Ie.push(new nh(zt.keyField(),r))}return e.Ie}function Qr(t){const e=Te(t);return e.Ee||(e.Ee=Mz(e,fd(t))),e.Ee}function Mz(t,e){if(t.limitType==="F")return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new nh(s.field,i)});const n=t.endAt?new kc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kc(t.startAt.position,t.startAt.inclusive):null;return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jw(t,e){const n=t.filters.concat([e]);return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function op(t,e,n){return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pg(t,e){return Ih(Qr(t),Qr(e))&&t.limitType===e.limitType}function CN(t){return`${el(Qr(t))}|lt:${t.limitType}`}function Cl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>bN(s)).join(", ")}]`),cg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Cc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Cc(s)).join(",")),`Target(${r})`}(Qr(t))}; limitType=${t.limitType})`}function Th(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ve.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fd(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Ab(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,fd(r),s)||r.endAt&&!function(o,a,l){const c=Ab(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,fd(r),s))}(t,e)}function kN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NN(t){return(e,n)=>{let r=!1;for(const s of fd(t)){const i=Fz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Fz(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?zo(l,c):Se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=new Ot(ve.comparator);function Wr(){return Uz}const DN=new Ot(ve.comparator);function Ku(...t){let e=DN;for(const n of t)e=e.insert(n.key,n);return e}function ON(t){let e=DN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hs(){return md()}function LN(){return md()}function md(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const jz=new Ot(ve.comparator),$z=new St(ve.comparator);function Ze(...t){let e=$z;for(const n of t)e=e.add(n);return e}const Bz=new St(We);function Z0(){return Bz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(e)?"-0":e}}function VN(t){return{integerValue:""+t}}function zz(t,e){return eN(e)?VN(e):eE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this._=void 0}}function Wz(t,e,n){return t instanceof Dc?function(s,i){const o={fields:{[mN]:{stringValue:fN},[gN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Q0(i)&&(i=fg(i)),i&&(o.fields[pN]=i),{mapValue:o}}(n,e):t instanceof tl?FN(t,e):t instanceof Oc?UN(t,e):function(s,i){const o=MN(s,i),a=kb(o)+kb(s.Ae);return Vw(o)&&Vw(s.Ae)?VN(a):eE(s.serializer,a)}(t,e)}function qz(t,e,n){return t instanceof tl?FN(t,e):t instanceof Oc?UN(t,e):n}function MN(t,e){return t instanceof rh?function(r){return Vw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Dc extends gg{}class tl extends gg{constructor(e){super(),this.elements=e}}function FN(t,e){const n=jN(e);for(const r of t.elements)n.some(s=>ti(s,r))||n.push(r);return{arrayValue:{values:n}}}class Oc extends gg{constructor(e){super(),this.elements=e}}function UN(t,e){let n=jN(e);for(const r of t.elements)n=n.filter(s=>!ti(s,r));return{arrayValue:{values:n}}}class rh extends gg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kb(t){return $t(t.integerValue||t.doubleValue)}function jN(t){return th(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.field=e,this.transform=n}}function Hz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof tl&&s instanceof tl||r instanceof Oc&&s instanceof Oc?Sc(r.elements,s.elements,ti):r instanceof rh&&s instanceof rh?ti(r.Ae,s.Ae):r instanceof Dc&&s instanceof Dc}(t.transform,e.transform)}class Kz{constructor(e,n){this.version=e,this.transformResults=n}}class Rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function em(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yg{}function $N(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bh(t.key,Rn.none()):new nu(t.key,t.data,Rn.none());{const n=t.data,r=nr.empty();let s=new St(zt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ji(t.key,r,new xr(s.toArray()),Rn.none())}}function Gz(t,e,n){t instanceof nu?function(s,i,o){const a=s.value.clone(),l=Db(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(s,i,o){if(!em(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Db(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(BN(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pd(t,e,n,r){return t instanceof nu?function(i,o,a,l){if(!em(i.precondition,o))return a;const c=i.value.clone(),d=Ob(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(i,o,a,l){if(!em(i.precondition,o))return a;const c=Ob(i.fieldTransforms,l,o),d=o.data;return d.setAll(BN(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return em(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Qz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=MN(r.transform,s||null);i!=null&&(n===null&&(n=nr.empty()),n.set(r.field,i))}return n||null}function Nb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Sc(r,s,(i,o)=>Hz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nu extends yg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ji extends yg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function BN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Db(t,e,n){const r=new Map;Ne(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,qz(o,a,n[s]))}return r}function Ob(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Wz(i,o,e))}return r}class bh extends yg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zN extends yg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Gz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=$N(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,(n,r)=>Nb(n,r))&&Sc(this.baseMutations,e.baseMutations,(n,r)=>Nb(n,r))}}class rE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return jz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new rE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,ct;function Jz(t){switch(t){case W.OK:return Se(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Se(15467,{code:t})}}function WN(t){if(t===void 0)return pn("GRPC error has no .code"),W.UNKNOWN;switch(t){case wn.OK:return W.OK;case wn.CANCELLED:return W.CANCELLED;case wn.UNKNOWN:return W.UNKNOWN;case wn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case wn.INTERNAL:return W.INTERNAL;case wn.UNAVAILABLE:return W.UNAVAILABLE;case wn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case wn.NOT_FOUND:return W.NOT_FOUND;case wn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case wn.ABORTED:return W.ABORTED;case wn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case wn.DATA_LOSS:return W.DATA_LOSS;default:return Se(39323,{code:t})}}(ct=wn||(wn={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=new ko([4294967295,4294967295],0);function Lb(t){const e=Xz().encode(t),n=new Vk;return n.update(e),new Uint8Array(n.digest())}function Vb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ko([n,r],0),new ko([s,i],0)]}class iE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gu(`Invalid padding: ${n}`);if(r<0)throw new Gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ko.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ko.fromNumber(r)));return s.compare(Zz)===1&&(s=new ko([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Lb(e),[r,s]=Vb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new iE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Lb(e),[r,s]=Vb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ah(Le.min(),s,new Ot(We),Wr(),Ze())}}class xh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xh(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class qN{constructor(e,n){this.targetId=e,this.Ce=n}}class HN{constructor(e,n,r=hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Mb{constructor(){this.ve=0,this.Fe=Fb(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),r=Ze();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Se(38017,{changeType:i})}}),new xh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Fb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eW{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wr(),this.Je=gf(),this.He=gf(),this.Ye=new Ot(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(sp(i))if(r===0){const o=new ve(i.path);this.et(n,o,un.newNoDocument(o,Le.min()))}else Ne(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Di(r).toUint8Array()}catch(l){if(l instanceof hN)return jo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new iE(o,s,i)}catch(l){return jo(l instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&sp(a.target)){const l=new ve(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,un.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ze();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Ah(e,n,this.Ye,this.je,r);return this.je=Wr(),this.Je=gf(),this.He=gf(),this.Ye=new Ot(We),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Mb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function gf(){return new Ot(ve.comparator)}function Fb(){return new Ot(ve.comparator)}const tW={asc:"ASCENDING",desc:"DESCENDING"},nW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rW={and:"AND",or:"OR"};class sW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $w(t,e){return t.useProto3Json||cg(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iW(t,e){return Lc(t,e.toTimestamp())}function mr(t){return Ne(!!t,49232),Le.fromTimestamp(function(n){const r=Ni(n);return new ft(r.seconds,r.nanos)}(t))}function oE(t,e){return Bw(t,e).canonicalString()}function Bw(t,e){const n=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GN(t){const e=mt.fromString(t);return Ne(rD(e),10190,{key:e.toString()}),e}function ap(t,e){return oE(t.databaseId,e.path)}function qa(t,e){const n=GN(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(JN(n))}function QN(t,e){return oE(t.databaseId,e)}function YN(t){const e=GN(t);return e.length===4?mt.emptyPath():JN(e)}function zw(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JN(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ub(t,e,n){return{name:ap(t,e),fields:n.value.mapValue.fields}}function oW(t,e,n){const r=qa(t,e.name),s=mr(e.updateTime),i=e.createTime?mr(e.createTime):Le.min(),o=new nr({mapValue:{fields:e.fields}}),a=un.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function aW(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Se(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ne(d===void 0||typeof d=="string",58123),hn.fromBase64String(d||"")):(Ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),hn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?W.UNKNOWN:WN(c.code);return new ie(d,c.message||"")}(o);n=new HN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qa(t,r.document.name),i=mr(r.document.updateTime),o=r.document.createTime?mr(r.document.createTime):Le.min(),a=new nr({mapValue:{fields:r.document.fields}}),l=un.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new tm(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qa(t,r.document),i=r.readTime?mr(r.readTime):Le.min(),o=un.newNoDocument(s,i),a=r.removedTargetIds||[];n=new tm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qa(t,r.document),i=r.removedTargetIds||[];n=new tm([],i,s,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Yz(s,i),a=r.targetId;n=new qN(a,o)}}return n}function lp(t,e){let n;if(e instanceof nu)n={update:Ub(t,e.key,e.value)};else if(e instanceof bh)n={delete:ap(t,e.key)};else if(e instanceof ji)n={update:Ub(t,e.key,e.data),updateMask:fW(e.fieldMask)};else{if(!(e instanceof zN))return Se(16599,{Vt:e.type});n={verify:ap(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Oc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iW(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se(27497)}(t,e.precondition)),n}function Ww(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Rn.updateTime(mr(i.updateTime)):i.exists!==void 0?Rn.exists(i.exists):Rn.none()}(e.currentDocument):Rn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Ne(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Dc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new tl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Oc(d)}else"increment"in a?l=new rh(o,a.increment):Se(16584,{proto:a});const c=zt.fromServerFormat(a.fieldPath);return new tE(c,l)}(t,s)):[];if(e.update){e.update.name;const s=qa(t,e.update.name),i=new nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new xr(c.map(d=>zt.fromServerFormat(d)))}(e.updateMask);return new ji(s,i,o,n,r)}return new nu(s,i,n,r)}if(e.delete){const s=qa(t,e.delete);return new bh(s,n)}if(e.verify){const s=qa(t,e.verify);return new zN(s,n)}return Se(1463,{proto:e})}function lW(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mr(s.updateTime):mr(i);return o.isEqual(Le.min())&&(o=mr(i)),new Kz(o,s.transformResults||[])}(n,e))):[]}function XN(t,e){return{documents:[QN(t,e.path)]}}function ZN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QN(t,s);const i=function(c){if(c.length!==0)return nD(Et.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:kl(f.field),direction:uW(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$w(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function eD(t){let e=YN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ne(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=tD(h);return f instanceof Et&&X0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(S){return new nh(Nl(S.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,cg(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new kc(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new kc(m,f)}(n.endAt)),RN(e,s,o,i,a,"F",l,c)}function cW(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nl(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Nl(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Nl(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nl(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(t):t.fieldFilter!==void 0?function(n){return it.create(Nl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Et.create(n.compositeFilter.filters.map(r=>tD(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(n.compositeFilter.op))}(t):Se(30097,{filter:t})}function uW(t){return tW[t]}function dW(t){return nW[t]}function hW(t){return rW[t]}function kl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return zt.fromServerFormat(t.fieldPath)}function nD(t){return t instanceof it?function(n){if(n.op==="=="){if(Sb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NAN"}};if(Ib(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NAN"}};if(Ib(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(n.field),op:dW(n.op),value:n.value}}}(t):t instanceof Et?function(n){const r=n.getFilters().map(s=>nD(s));return r.length===1?r[0]:{compositeFilter:{op:hW(n.op),filters:r}}}(t):Se(54877,{filter:t})}function fW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,s,i=Le.min(),o=Le.min(),a=hn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.yt=e}}function mW(t,e){let n;if(e.document)n=oW(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ve.fromSegments(e.noDocument.path),s=rl(e.noDocument.readTime);n=un.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const r=ve.fromSegments(e.unknownDocument.path),s=rl(e.unknownDocument.version);n=un.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ft(s[0],s[1]);return Le.fromTimestamp(i)}(e.readTime)),n}function jb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:ap(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Lc(i,o.version.toTimestamp()),createTime:Lc(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nl(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:nl(e.version)}}return r}function cp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(t){const e=new ft(t.seconds,t.nanoseconds);return Le.fromTimestamp(e)}function pa(t,e){const n=(e.baseMutations||[]).map(i=>Ww(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Ww(t.yt,i)),s=ft.fromMillis(e.localWriteTimeMs);return new nE(e.batchId,s,n,r)}function Qu(t){const e=rl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?rl(t.lastLimboFreeSnapshotVersion):Le.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Ne(o===1,1966,{count:o}),Qr(Sh(YN(i.documents[0])))}(t.query):function(i){return Qr(eD(i))}(t.query),new vi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,hn.fromBase64String(t.resumeToken))}function iD(t,e){const n=nl(e.snapshotVersion),r=nl(e.lastLimboFreeSnapshotVersion);let s;s=sp(e.target)?XN(t.yt,e.target):ZN(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function oD(t){const e=eD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?op(e,e.limit,"L"):e}function Vy(t,e){return new sE(e.largestBatchId,Ww(t.yt,e.overlayMutation))}function $b(t,e){const n=e.path.lastSegment();return[t,rr(e.path.popLast()),n]}function Bb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:nl(r.readTime),documentKey:rr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{getBundleMetadata(e,n){return zb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:rl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return zb(e).put(function(s){return{bundleId:s.id,createTime:nl(mr(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Wb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:oD(i.bundledQuery),readTime:rl(i.readTime)}}(r)})}saveNamedQuery(e,n){return Wb(e).put(function(s){return{name:s.name,readTime:nl(mr(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function zb(t){return Pn(t,ug)}function Wb(t){return Pn(t,dg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new vg(e,r)}getOverlay(e,n){return ku(e).get($b(this.userId,n)).next(r=>r?Vy(this.serializer,r):null)}getOverlays(e,n){const r=Hs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new sE(n,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(rr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(ku(e).Z(Dw,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hs(),i=rr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ku(e).J(Dw,o).next(a=>{for(const l of a){const c=Vy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ku(e).ee({index:oN,range:a},(l,c,d)=>{const h=Vy(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return ku(e).put(function(s,i,o){const[a,l,c]=$b(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:lp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function ku(t){return Pn(t,hg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{bt(e){return Pn(e,K0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?hn.fromUint8Array(r):hn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt($t(e.integerValue));else if("doubleValue"in e){const r=$t(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Gd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ni(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Di(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?vN(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):mg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Se(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Pc,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt($t(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ve.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ga.Kt=new ga;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=255;function yW(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function qb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=yW(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class vW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=qb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=qb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(El),this.sn(255)}_n(){this.an(El),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===El?(this.sn(El),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===El?(this.an(El),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class wW{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class _W{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Nu{constructor(){this.cn=new vW,this.ln=new wW(this.cn),this.hn=new _W(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ya(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:nm(this.En),directionalValue:nm(this.dn),orderedDocumentKey:nm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Yi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Hb(t.En,e.En),n!==0?n:(n=Hb(t.dn,e.dn),n!==0?n:ve.comparator(t.In,e.In)))}function Hb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function nm(t){return ek()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function Kb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class Gb{constructor(e){this.mn=new St((n,r)=>zt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ne(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Cw(e);if(n!==void 0&&!this.wn(n))return!1;const r=da(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new St(zt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Gf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gf(r.field,r.dir==="asc"?0:1)));return new Zm(Zm.UNKNOWN_ID,this.collectionId,n,Kd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){var n,r;if(Ne(t instanceof it||t instanceof Et,20012),t instanceof it){if(t instanceof xN){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>it.create(t.field,"==",i)))||[];return Et.create(s,"or")}return t}const e=t.filters.map(s=>aD(s));return Et.create(e,t.op)}function EW(t){if(t.getFilters().length===0)return[];const e=Kw(aD(t));return Ne(lD(e),7391),qw(e)||Hw(e)?[e]:e.getFilters()}function qw(t){return t instanceof it}function Hw(t){return t instanceof Et&&X0(t)}function lD(t){return qw(t)||Hw(t)||function(n){if(n instanceof Et&&Mw(n)){for(const r of n.getFilters())if(!qw(r)&&!Hw(r))return!1;return!0}return!1}(t)}function Kw(t){if(Ne(t instanceof it||t instanceof Et,34018),t instanceof it)return t;if(t.filters.length===1)return Kw(t.filters[0]);const e=t.filters.map(r=>Kw(r));let n=Et.create(e,t.op);return n=up(n),lD(n)?n:(Ne(n instanceof Et,64498),Ne(Nc(n),40251),Ne(n.filters.length>1,57927),n.filters.reduce((r,s)=>aE(r,s)))}function aE(t,e){let n;return Ne(t instanceof it||t instanceof Et,38388),Ne(e instanceof it||e instanceof Et,25473),n=t instanceof it?e instanceof it?function(s,i){return Et.create([s,i],"and")}(t,e):Qb(t,e):e instanceof it?Qb(e,t):function(s,i){if(Ne(s.filters.length>0&&i.filters.length>0,48005),Nc(s)&&Nc(i))return TN(s,i.getFilters());const o=Mw(s)?s:i,a=Mw(s)?i:s,l=o.filters.map(c=>aE(c,a));return Et.create(l,"or")}(t,e),up(n)}function Qb(t,e){if(Nc(e))return TN(e,t.getFilters());{const n=e.filters.map(r=>aE(t,r));return Et.create(n,"or")}}function up(t){if(Ne(t instanceof it||t instanceof Et,11850),t instanceof it)return t;const e=t.getFilters();if(e.length===1)return up(e[0]);if(IN(t))return t;const n=e.map(s=>up(s)),r=[];return n.forEach(s=>{s instanceof it?r.push(s):s instanceof Et&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Et.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(){this.Cn=new lE}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Jr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class lE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(mt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="IndexedDbIndexManager",yf=new Uint8Array(0);class SW{constructor(e,n){this.databaseId=n,this.vn=new lE,this.Fn=new Ui(r=>el(r),(r,s)=>Ih(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:rr(s)};return Jb(e).put(i)}return V.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[qk(n),""],!1,!0);return Jb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(qs(o.parent))}return r})}addFieldIndex(e,n){const r=Du(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Sl(e);return i.next(a=>{o.put(Bb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Du(e),s=Sl(e),i=Il(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Du(e),r=Il(e),s=Sl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Gb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Il(e);let s=!0;const i=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ze();const a=[];return V.forEach(i,(l,c)=>{Z(Yb,`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${el(n)}`);const d=function(E,R){const k=Cw(R);if(k===void 0)return null;for(const L of ip(E,k.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(E,R){const k=new Map;for(const L of da(R))for(const x of ip(E,L.fieldPath))switch(x.op){case"==":case"in":k.set(L.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return k.set(L.fieldPath.canonicalString(),x.value),Array.from(k.values())}return null}(c,l),f=function(E,R){const k=[];let L=!0;for(const x of da(R)){const b=x.kind===0?Rb(E,x.fieldPath,E.startAt):Pb(E,x.fieldPath,E.startAt);k.push(b.value),L&&(L=b.inclusive)}return new kc(k,L)}(c,l),m=function(E,R){const k=[];let L=!0;for(const x of da(R)){const b=x.kind===0?Pb(E,x.fieldPath,E.endAt):Rb(E,x.fieldPath,E.endAt);k.push(b.value),L&&(L=b.inclusive)}return new kc(k,L)}(c,l),S=this.On(l,c,f),p=this.On(l,c,m),v=this.Nn(l,c,h),w=this.Bn(l.indexId,d,S,f.inclusive,p,m.inclusive,v);return V.forEach(w,y=>r.Y(y,n.limit).next(E=>{E.forEach(R=>{const k=ve.fromSegments(R.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=EW(Et.create(e.filters,"and")).map(r=>Uw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):yf,m=this.kn(e,f,r[h%c],s),S=this.qn(e,f,i[h%c],o),p=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(m,S,p))}return d}kn(e,n,r,s){const i=new ya(e,ve.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new ya(e,ve.empty(),n,r);return s?i.An():i}xn(e,n){const r=new Gb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new St(zt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Nu;for(const s of da(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);ga.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Nu;return ga.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Nu;return ga.Kt.Dt(eh(this.databaseId,n),r.Pn(function(i){const o=da(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Nu);let i=0;for(const o of da(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&th(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);ga.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Nu;l.seed(a.un()),ga.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof it&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Du(e),s=Sl(e);return(n?r.J(Nw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new Kd(h.sequenceNumber,new Jr(rl(h.readTime),new ve(qs(h.documentKey)),h.largestBatchId)):Kd.empty(),m=d.fields.map(([S,p])=>new Gf(zt.fromServerFormat(S),p));return new Zm(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:We(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Du(e),i=Sl(e);return this.Gn(e).next(o=>s.J(Nw,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>i.put(Bb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?V.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Il(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Il(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Il(e);let i=new St(Yi);return s.ee({index:iN,range:IDBKeyRange.only([r.indexId,this.uid,nm(this.$n(r,n))])},(o,a)=>{i=i.add(new ya(r.indexId,n,Kb(a.arrayValue),Kb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new St(Yi);const s=this.Qn(n,e);if(s==null)return r;const i=Cw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(th(o))for(const a of o.arrayValue.values||[])r=r.add(new ya(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new ya(n.indexId,e.key,yf,s));return r}Jn(e,n,r,s,i){Z(Yb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),S=c.getIterator();let p=_l(m),v=_l(S);for(;p||v;){let w=!1,y=!1;if(p&&v){const E=d(p,v);E<0?y=!0:E>0&&(w=!0)}else p!=null?y=!0:w=!0;w?(h(v),v=_l(S)):y?(f(p),p=_l(m)):(p=_l(m),v=_l(S))}}(s,i,Yi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return Sl(e).ee({index:sN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Yi(o,a)).filter((o,a,l)=>!a||Yi(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Yi(o,e),l=Yi(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,yf,ve.empty()),l=s[o+1].Vn(this.uid,yf,ve.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Yi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Xb)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Se(44426))).next(Xb)}}function Jb(t){return Pn(t,Jd)}function Il(t){return Pn(t,dd)}function Du(t){return Pn(t,H0)}function Sl(t){return Pn(t,ud)}function Xb(t){Ne(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;z0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Jr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cD=41943040;class er{static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e,n){const r=t.store(ys),s=t.store(bc),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Ne(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=tN(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return V.waitFor(i).next(()=>c)}function dp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Se(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(cD,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);class wg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Ne(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new wg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ji(e).ee({index:Aa,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Dl(e),o=Ji(e);return o.add({}).next(a=>{Ne(typeof a=="number",49019);const l=new nE(a,n,r,s),c=function(m,S,p){const v=p.baseMutations.map(y=>lp(m.yt,y)),w=p.mutations.map(y=>lp(m.yt,y));return{userId:S,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:v,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new St((f,m)=>We(f.canonicalString(),m.canonicalString()));for(const f of s){const m=tN(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,tz))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ji(e).get(n).next(r=>r?(Ne(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),pa(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ji(e).ee({index:Aa,range:s},(o,a,l)=>{a.userId===this.userId&&(Ne(a.batchId>=r,47524,{tr:r}),i=pa(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=za;return Ji(e).ee({index:Aa,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,za],[this.userId,Number.POSITIVE_INFINITY]);return Ji(e).J(Aa,n).next(r=>r.map(s=>pa(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Qf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Dl(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=qs(d);if(c===this.userId&&n.path.isEqual(f))return Ji(e).get(h).next(m=>{if(!m)throw Se(61480,{nr:o,batchId:h});Ne(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(pa(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(We);const s=[];return n.forEach(i=>{const o=Qf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Dl(e).ee({range:a},(c,d,h)=>{const[f,m,S]=c,p=qs(m);f===this.userId&&i.path.isEqual(p)?r=r.add(S):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Qf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new St(We);return Dl(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,S=qs(f);h===this.userId&&r.isPrefixOf(S)?S.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ji(e).get(i).next(o=>{if(o===null)throw Se(35274,{batchId:i});Ne(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(pa(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return uD(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Dl(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=qs(i[1]);s.push(l)}else a.done()}).next(()=>{Ne(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return dD(e,this.userId,n)}_r(e){return hD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:za,lastStreamToken:""})}}function dD(t,e,n){const r=Qf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Dl(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Ji(t){return Pn(t,ys)}function Dl(t){return Pn(t,bc)}function hD(t){return Pn(t,Qd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sl(0)}static cr(){return new sl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new sl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Le.fromTimestamp(new ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Tl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Ne(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Tl(e).ee((o,a)=>{const l=Qu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Tl(e).ee((r,s)=>{const i=Qu(s);n(i)})}lr(e){return eA(e).get(np).next(n=>(Ne(n!==null,2888),n))}hr(e,n){return eA(e).put(np,n)}Pr(e,n){return Tl(e).put(iD(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=el(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Tl(e).ee({range:s,index:rN},(o,a,l)=>{const c=Qu(a);Ih(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=io(e);return n.forEach(o=>{const a=rr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,n,r){const s=io(e);return V.forEach(n,i=>{const o=rr(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=io(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=io(e);let i=Ze();return s.ee({range:r,X:!0},(o,a,l)=>{const c=qs(o[1]),d=new ve(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=rr(n.path),s=IDBKeyRange.bound([r],[qk(r)],!1,!0);let i=0;return io(e).ee({index:q0,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return Tl(e).get(n).next(r=>r?Qu(r):null)}}function Tl(t){return Pn(t,Ac)}function eA(t){return Pn(t,Wa)}function io(t){return Pn(t,xc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="LruGarbageCollector",fD=1048576;function nA([t,e],[n,r]){const s=We(t,n);return s===0?We(e,r):s}class bW{constructor(e){this.Ir=e,this.buffer=new St(nA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();nA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(tA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xo(n)?Z(tA,"Ignoring IndexedDB error during garbage collection: ",n):await Jo(n)}await this.Vr(3e5)})}}class AW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Ar.ce);const r=new bW(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Zb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Pl()<=rt.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function pD(t,e){return new AW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(e,n){this.db=e,this.garbageCollector=pD(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return vf(e,r)}removeReference(e,n,r){return vf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return vf(e,n)}br(e,n){return function(s,i){let o=!1;return hD(s).te(a=>dD(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Le.min()),io(e).delete(function(h){return[0,rr(h.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return vf(e,n)}Sr(e,n){const r=io(e);let s,i=Ar.ce;return r.ee({index:q0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Ar.ce&&n(new ve(qs(s)),i),i=c,s=l):i=Ar.ce}).next(()=>{i!==Ar.ce&&n(new ve(qs(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vf(t,e){return io(t).put(function(r,s){return{targetId:0,path:rr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return aa(e).put(r)}removeEntry(e,n,r){return aa(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],cp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=un.newInvalidDocument(n);return aa(e).ee({index:Yf,range:IDBKeyRange.only(Ou(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:un.newInvalidDocument(n)};return aa(e).ee({index:Yf,range:IDBKeyRange.only(Ou(n))},(s,i)=>{r={document:this.Cr(n,i),size:dp(i)}}).next(()=>r)}getEntries(e,n){let r=Wr();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Wr(),s=new Ot(ve.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,dp(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let s=new St(iA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ou(s.first()),Ou(s.last())),o=s.getIterator();let a=o.getNext();return aa(e).ee({index:Yf,range:i},(l,c,d)=>{const h=ve.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&iA(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ou(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),cp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return aa(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Wr();for(const h of c){const f=this.Cr(ve.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Th(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Wr();const o=sA(n,r),a=sA(n,Jr.max());return aa(e).ee({index:nN,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(ve.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new PW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return rA(e).get(kw).next(n=>(Ne(!!n,20021),n))}Dr(e,n){return rA(e).put(kw,n)}Cr(e,n){if(n){const r=mW(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return un.newInvalidDocument(e)}}function yD(t){return new RW(t)}class PW extends gD{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ui(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new St((i,o)=>We(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=jb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=dp(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=jb(this.Nr.serializer,o.convertToNoDocument(Le.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function rA(t){return Pn(t,Yd)}function aa(t){return Pn(t,tp)}function Ou(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sA(t,e){const n=e.documentKey.path.toArray();return[t,cp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function iA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=We(n[i],r[i]),s)return s;return s=We(n.length,r.length),s||(s=We(n[n.length-2],r[r.length-2]),s||We(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&pd(r.mutation,s,xr.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const s=Hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ku();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Wr();const o=md(),a=function(){return md()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ji)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),pd(d.mutation,c,d.mutation.getFieldMask(),ft.now())):o.set(c.key,xr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new CW(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=md();let s=new Ot((o,a)=>o-a),i=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||xr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ze()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=LN();d.forEach(f=>{if(!i.has(f)){const m=$N(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Hs());let a=Tc,l=i;return o.next(c=>V.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ze())).next(d=>({batchId:a,changes:ON(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let s=Ku();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ku();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const c=function(h,f){return new tu(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,un.newInvalidDocument(d)))});let a=Ku();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&pd(d.mutation,c,xr.empty(),ft.now()),Th(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mr(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:oD(s.bundledQuery),readTime:mr(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(){this.overlays=new Ot(ve.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hs();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Hs(),i=n.length+1,o=new ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ot((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return V.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sE(n,r));let i=this.qr.get(n);i===void 0&&(i=Ze(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.Qr=new St(On.$r),this.Ur=new St(On.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new On(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new On(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ve(new mt([])),r=new On(n,e),s=new On(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new mt([])),r=new On(n,e),s=new On(n,e+1);let i=Ze();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new On(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class On{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(On.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new On(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?za:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new On(n,0),s=new On(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(We);return n.forEach(s=>{const i=new On(s,0),o=new On(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ve.isDocumentKey(i)||(i=i.child(""));const o=new On(new ve(i),0);let a=new St(We);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,s=>{const i=new On(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new On(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e){this.ri=e,this.docs=function(){return new Ot(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():un.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wr();const o=n.path,a=new ve(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||z0(Yk(d),r)<=0||(s.has(d.key)||Th(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Se(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VW(this)}getSize(e){return V.resolve(this.size)}}class VW extends gD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e){this.persistence=e,this.si=new Ui(n=>el(n),Ih),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new cE,this.targetCount=0,this.ai=sl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new sl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ar(0),this.li=!1,this.li=!0,this.hi=new DW,this.referenceDelegate=e(this),this.Pi=new MW(this),this.indexManager=new IW,this.remoteDocumentCache=function(s){return new LW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new sD(n),this.Ii=new kW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new OW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new FW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class FW extends Xk{constructor(e){super(),this.currentSequenceNumber=e}}class _g{constructor(e){this.persistence=e,this.Ri=new cE,this.Vi=null}static mi(e){return new _g(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=ve.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Le.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hp{constructor(e,n){this.persistence=e,this.pi=new Ui(r=>rr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=pD(this,n)}static mi(e,n){return new hp(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Le.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xf(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.serializer=e}k(e,n,r,s){const i=new lg("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Eh)}(e),function(l){l.createObjectStore(Qd,{keyPath:ez}),l.createObjectStore(ys,{keyPath:gb,autoIncrement:!0}).createIndex(Aa,yb,{unique:!0}),l.createObjectStore(bc)}(e),oA(e),function(l){l.createObjectStore(ha)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(xc),l.deleteObjectStore(Ac),l.deleteObjectStore(Wa)}(e),oA(e)),o=o.next(()=>function(l){const c=l.store(Wa),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return c.put(np,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(ys).J().next(h=>{l.deleteObjectStore(ys),l.createObjectStore(ys,{keyPath:gb,autoIncrement:!0}).createIndex(Aa,yb,{unique:!0});const f=c.store(ys),m=h.map(S=>f.put(S));return V.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Rc,{keyPath:cz})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Yd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(ug,{keyPath:uz})})(e),function(l){l.createObjectStore(dg,{keyPath:dz})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(hg,{keyPath:vz});c.createIndex(Dw,wz,{unique:!1}),c.createIndex(oN,_z,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(tp,{keyPath:nz});c.createIndex(Yf,rz),c.createIndex(nN,sz)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ha))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(H0,{keyPath:hz,autoIncrement:!0}).createIndex(Nw,fz,{unique:!1}),l.createObjectStore(ud,{keyPath:mz}).createIndex(sN,pz,{unique:!1}),l.createObjectStore(dd,{keyPath:gz}).createIndex(iN,yz,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(ud).clear()}).next(()=>{n.objectStore(dd).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(K0,{keyPath:Ez})})(e)})),r<18&&s>=18&&ek()&&(o=o.next(()=>{n.objectStore(ud).clear()}).next(()=>{n.objectStore(dd).clear()})),o}wi(e){let n=0;return e.store(ha).ee((r,s)=>{n+=dp(s)}).next(()=>{const r={byteSize:n};return e.store(Yd).put(kw,r)})}yi(e){const n=e.store(Qd),r=e.store(ys);return n.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,za],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Aa,o).next(a=>V.forEach(a,l=>{Ne(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=pa(this.serializer,l);return uD(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(xc),r=e.store(ha);return e.store(Wa).get(np).next(s=>{const i=[];return r.ee((o,a)=>{const l=new mt(o),c=function(h){return[0,rr(h)]}(l);i.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:rr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,n){e.createObjectStore(Jd,{keyPath:lz});const r=n.store(Jd),s=new lE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rr(l)})}};return n.store(ha).ee({X:!0},(o,a)=>{const l=new mt(o);return i(l.popLast())}).next(()=>n.store(bc).ee({X:!0},([o,a,l],c)=>{const d=qs(a);return i(d.popLast())}))}Di(e){const n=e.store(Ac);return n.ee((r,s)=>{const i=Qu(s),o=iD(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ha),s=[];return r.ee((i,o)=>{const a=n.store(tp),l=function(h){return h.document?new ve(mt.fromString(h.document.name).popFirst(5)):h.noDocument?ve.fromSegments(h.noDocument.path):h.unknownDocument?ve.fromSegments(h.unknownDocument.path):Se(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>V.waitFor(s))}Fi(e,n){const r=n.store(ys),s=yD(this.serializer),i=new uE(_g.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ze();pa(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),V.forEach(a,(l,c)=>{const d=new Zn(c),h=vg.wt(this.serializer,d),f=i.getIndexManager(d),m=wg.wt(d,this.serializer,f,i.referenceDelegate);return new vD(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Ow(n,Ar.ce),l).next()})})}}function oA(t){t.createObjectStore(xc,{keyPath:oz}).createIndex(q0,az,{unique:!0}),t.createObjectStore(Ac,{keyPath:"targetId"}).createIndex(rN,iz,{unique:!0}),t.createObjectStore(Wa)}const Xi="IndexedDbPersistence",My=18e5,Fy=5e3,Uy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jW="main";class dE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!dE.v())throw new ie(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xW(this,s),this.$i=n+jW,this.serializer=new sD(l),this.Ui=new No(this.$i,this.Ni,new UW(this.serializer)),this.hi=new gW,this.Pi=new TW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yD(this.serializer),this.Ii=new pW,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&pn(Xi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(W.FAILED_PRECONDITION,Uy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ar(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Xo(e))return Z(Xi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z(Xi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Lu(e).get(wl).next(n=>V.resolve(this.es(n)))}ts(e){return wf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,My)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Pn(n,Rc);return r.J().next(s=>{const i=this.ss(s,My),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Lu(e).get(wl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Fy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ie(W.FAILED_PRECONDITION,Uy);return!1}}return!(!this.networkEnabled||!this.inForeground)||wf(e).J().next(r=>this.ss(r,Fy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Z(Xi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Eh,Rc],e=>{const n=new Ow(e,Ar.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>wf(e).J().next(n=>this.ss(n,My).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return wg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SW(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return vg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z(Xi,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Tz:l===17?uN:l===16?Sz:l===15?G0:l===14?cN:l===13?lN:l===12?Iz:l===11?aN:void Se(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Ow(a,this.ci?this.ci.next():Ar.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw pn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ie(W.FAILED_PRECONDITION,Jk);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Lu(e).get(wl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Fy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ie(W.FAILED_PRECONDITION,Uy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lu(e).put(wl,n)}static v(){return No.v()}Zi(e){const n=Lu(e);return n.get(wl).next(r=>this.es(r)?(Z(Xi,"Releasing primary lease."),n.delete(wl)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(pn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;ZC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return Z(Xi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pn(Xi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){pn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lu(t){return Pn(t,Eh)}function wf(t){return Pn(t,Rc)}function wD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ze(),s=Ze();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new hE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ZC()?8:Zk(Hn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $W;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Pl()<=rt.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Pl()<=rt.DEBUG&&Z("QueryEngine","Query:",Cl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Pl()<=rt.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(n))):V.resolve())}ys(e,n){if(Cb(n))return V.resolve(null);let r=Qr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=op(n,null,"F"),r=Qr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ze(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,op(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return Cb(n)||s.isEqual(Le.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?V.resolve(null):(Pl()<=rt.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cl(n)),this.vs(e,o,n,Qk(s,Tc)).next(a=>a))})}Ds(e,n){let r=new St(NN(e));return n.forEach((s,i)=>{Th(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Pl()<=rt.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Cl(n)),this.ps.getDocumentsMatchingQuery(e,n,Jr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="LocalStore",BW=3e8;class zW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ot(We),this.xs=new Ui(i=>el(i),Ih),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ED(t,e,n,r){return new zW(t,e,n,r)}async function ID(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ze();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function WW(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=V.resolve();return f.forEach(S=>{m=m.next(()=>d.getEntry(l,S)).next(p=>{const v=c.docVersions.get(S);Ne(v!==null,48541),p.version.compareTo(v)<0&&(h.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),d.addEntry(p)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ze();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function SD(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qW(t,e){const n=Te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(hn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(p,v,w){return p.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=BW?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=Wr(),c=Ze();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(HW(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Le.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function HW(t,e,n){let r=Ze(),s=Ze();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z(fE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function KW(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=za),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fp(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Vc(t,e,n){const r=Te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xo(o))throw o;Z(fE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function mp(t,e,n){const r=Te(t);let s=Le.min(),i=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Te(l),f=h.xs.get(d);return f!==void 0?V.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,Qr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Le.min(),n?i:Ze())).next(a=>(AD(r,kN(e),a),{documents:a,Qs:i})))}function TD(t,e){const n=Te(t),r=Te(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function bD(t,e){const n=Te(t),r=n.Os.get(e)||Le.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,Qk(r,Tc),Number.MAX_SAFE_INTEGER)).then(s=>(AD(n,e,s),s))}function AD(t,e,n){let r=t.Os.get(e)||Le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="firestore_clients";function aA(t,e){return`${xD}_${t}_${e}`}const RD="firestore_mutations";function lA(t,e,n){let r=`${RD}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const PD="firestore_targets";function jy(t,e){return`${PD}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="SharedClientState";class pp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ie(s.error.code,s.error.message))),o?new pp(e,n,s.state,i):(pn($s,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ie(r.error.code,r.error.message))),i?new gd(e,r.state,s):(pn($s,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Z0();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=eN(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new gp(e,i):(pn($s,`Failed to parse client data for instance '${e}': ${n}`),null)}}class mE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new mE(n.clientId,n.onlineState):(pn($s,`Failed to parse online state: ${e}`),null)}}class Gw{constructor(){this.activeTargetIds=Z0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $y{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ot(We),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=aA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Gw),this.ro=new RegExp(`^${xD}_${o}_([^_]*)$`),this.io=new RegExp(`^${RD}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${PD}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(aA(this.persistenceKey,r));if(s){const i=gp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(jy(this.persistenceKey,e));if(s){const i=gd.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Z($s,"READ",e,n),n}setItem(e,n){Z($s,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Z($s,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Z($s,"EVENT",n.key,n.newValue),n.key===this.eo)return void pn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Ar.ce;if(i!=null)try{const a=JSON.parse(i);Ne(typeof a=="number",30636,{So:i}),o=a}catch(a){pn($s,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Ar.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new pp(this.currentUser,e,n,r),i=lA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=lA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=jy(this.persistenceKey,e),i=new gd(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return gp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return pp.Ws(new Zn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return gd.Ws(s,n)}uo(e){return mE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Z($s,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Z0();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class CD{constructor(){this.Mo=new Gw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="ConnectivityMonitor";class uA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(cA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(cA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f=null;function Qw(){return _f===null?_f=function(){return 268435456+Math.round(2147483648*Math.random())}():_f++,"0x"+_f.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="RestConnection",QW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===rp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Qw(),a=this.zo(e,n.toUriEncodedString());Z(By,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Mi(c);return this.Jo(e,a,l,r,d).then(h=>(Z(By,`Received RPC '${e}' ${o}: `,h),h),h=>{throw jo(By,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=QW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class XW extends YW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Qw();return new Promise((a,l)=>{const c=new Mk;c.setWithCredentials(!0),c.listenOnce(Fk.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kf.NO_ERROR:const h=c.getResponseJson();Z(Xn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Kf.TIMEOUT:Z(Xn,`RPC '${e}' ${o} timed out`),l(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const f=c.getStatus();if(Z(Xn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const S=m==null?void 0:m.error;if(S&&S.status&&S.message){const p=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(y)>=0?y:W.UNKNOWN}(S.status);l(new ie(p,S.message))}else l(new ie(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ie(W.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Z(Xn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Z(Xn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Qw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$k(),a=jk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(Xn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const S=new JW({Yo:v=>{m?Z(Xn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(Z(Xn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Z(Xn,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),p=(v,w,y)=>{v.listen(w,E=>{try{y(E)}catch(R){setTimeout(()=>{throw R},0)}})};return p(h,Hu.EventType.OPEN,()=>{m||(Z(Xn,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),p(h,Hu.EventType.CLOSE,()=>{m||(m=!0,Z(Xn,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(h))}),p(h,Hu.EventType.ERROR,v=>{m||(m=!0,jo(Xn,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),S.a_(new ie(W.UNAVAILABLE,"The operation could not be completed")))}),p(h,Hu.EventType.MESSAGE,v=>{var w;if(!m){const y=v.data[0];Ne(!!y,16349);const E=y,R=(E==null?void 0:E.error)||((w=E[0])==null?void 0:w.error);if(R){Z(Xn,`RPC '${e}' stream ${s} received error:`,R);const k=R.status;let L=function(A){const P=wn[A];if(P!==void 0)return WN(P)}(k),x=R.message;L===void 0&&(L=W.INTERNAL,x="Unknown error status: "+k+" with message "+R.message),m=!0,S.a_(new ie(L,x)),h.close()}else Z(Xn,`RPC '${e}' stream ${s} received:`,y),S.u_(y)}}),p(a,Uk.STAT_EVENT,v=>{v.stat===Rw.PROXY?Z(Xn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Rw.NOPROXY&&Z(Xn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(){return typeof window<"u"?window:null}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){return new sW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="PersistentStream";class DD{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ND(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(pn(n.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ie(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Z(dA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Z(dA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZW extends DD{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aW(this.serializer,e),r=function(i){if(!("targetChange"in i))return Le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?mr(o.readTime):Le.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=zw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=sp(l)?{documents:XN(i,l)}:{query:ZN(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KN(i,o.resumeToken);const c=$w(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=Lc(i,o.snapshotVersion.toTimestamp());const c=$w(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=cW(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=zw(this.serializer),n.removeTarget=e,this.q_(n)}}class e7 extends DD{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lW(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{}class n7 extends t7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Bw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(W.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Bw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pn(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="RemoteStore";class s7{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{fl(this)&&(Z(il,"Restarting streams for network reachability change."),await async function(l){const c=Te(l);c.Ea.add(4),await ru(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Rh(c)}(this))})}),this.Ra=new r7(r,s)}}async function Rh(t){if(fl(t))for(const e of t.da)await e(!0)}async function ru(t){for(const e of t.da)await e(!1)}function Ig(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yE(n)?gE(n):iu(n).O_()&&pE(n,e))}function Mc(t,e){const n=Te(t),r=iu(n);n.Ia.delete(e),r.O_()&&OD(n,e),n.Ia.size===0&&(r.O_()?r.L_():fl(n)&&n.Ra.set("Unknown"))}function pE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}iu(t).Y_(e)}function OD(t,e){t.Va.Ue(e),iu(t).Z_(e)}function gE(t){t.Va=new eW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),iu(t).start(),t.Ra.ua()}function yE(t){return fl(t)&&!iu(t).x_()&&t.Ia.size>0}function fl(t){return Te(t).Ea.size===0}function LD(t){t.Va=void 0}async function i7(t){t.Ra.set("Online")}async function o7(t){t.Ia.forEach((e,n)=>{pE(t,e)})}async function a7(t,e){LD(t),yE(t)?(t.Ra.ha(e),gE(t)):t.Ra.set("Unknown")}async function l7(t,e,n){if(t.Ra.set("Online"),e instanceof HN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){Z(il,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yp(t,r)}else if(e instanceof tm?t.Va.Ze(e):e instanceof qN?t.Va.st(e):t.Va.tt(e),!n.isEqual(Le.min()))try{const r=await SD(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(hn.EMPTY_BYTE_STRING,d.snapshotVersion)),OD(i,l);const h=new vi(d.target,l,c,d.sequenceNumber);pE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z(il,"Failed to raise snapshot:",r),await yp(t,r)}}async function yp(t,e,n){if(!Xo(e))throw e;t.Ea.add(1),await ru(t),t.Ra.set("Offline"),n||(n=()=>SD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z(il,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Rh(t)})}function VD(t,e){return e().catch(n=>yp(t,n,e))}async function su(t){const e=Te(t),n=Wo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:za;for(;c7(e);)try{const s=await KW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,u7(e,s)}catch(s){await yp(e,s)}MD(e)&&FD(e)}function c7(t){return fl(t)&&t.Ta.length<10}function u7(t,e){t.Ta.push(e);const n=Wo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function MD(t){return fl(t)&&!Wo(t).x_()&&t.Ta.length>0}function FD(t){Wo(t).start()}async function d7(t){Wo(t).ra()}async function h7(t){const e=Wo(t);for(const n of t.Ta)e.ea(n.mutations)}async function f7(t,e,n){const r=t.Ta.shift(),s=rE.from(r,e,n);await VD(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await su(t)}async function m7(t,e){e&&Wo(t).X_&&await async function(r,s){if(function(o){return Jz(o)&&o!==W.ABORTED}(s.code)){const i=r.Ta.shift();Wo(r).B_(),await VD(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await su(r)}}(t,e),MD(t)&&FD(t)}async function hA(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),Z(il,"RemoteStore received new credentials");const r=fl(n);n.Ea.add(3),await ru(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Rh(n)}async function Yw(t,e){const n=Te(t);e?(n.Ea.delete(2),await Rh(n)):e||(n.Ea.add(2),await ru(n),n.Ra.set("Unknown"))}function iu(t){return t.ma||(t.ma=function(n,r,s){const i=Te(n);return i.sa(),new ZW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:i7.bind(null,t),t_:o7.bind(null,t),r_:a7.bind(null,t),H_:l7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),yE(t)?gE(t):t.Ra.set("Unknown")):(await t.ma.stop(),LD(t))})),t.ma}function Wo(t){return t.fa||(t.fa=function(n,r,s){const i=Te(n);return i.sa(),new e7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:d7.bind(null,t),r_:m7.bind(null,t),ta:h7.bind(null,t),na:f7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await su(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(il,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new vE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ph(t,e){if(pn("AsyncQueue",`${e}: ${t}`),Xo(t))return new ie(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{static emptySet(e){return new nc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Ku(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.ga=new Ot(ve.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fc(e,n,nc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class g7{constructor(){this.queries=mA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Te(n),i=s.queries;s.queries=mA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function mA(){return new Ui(t=>CN(t),pg)}async function wE(t,e){const n=Te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new p7,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ph(o,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&EE(n)}async function _E(t,e){const n=Te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y7(t,e){const n=Te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&EE(n)}function v7(t,e,n){const r=Te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function EE(t){t.Ca.forEach(e=>{e.next()})}var Jw,pA;(pA=Jw||(Jw={})).Ma="default",pA.Cache="cache";class IE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.key=e}}class jD{constructor(e){this.key=e}}class $D{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=NN(e),this.tu=new nc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new fA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Th(this.query,h)?h:null,S=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;f&&m?f.data.isEqual(m.data)?S!==p&&(r.track({type:3,doc:m}),v=!0):this.su(f,m)||(r.track({type:2,doc:m}),v=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),v=!0):f&&!m&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(m?(o=o.add(m),i=p?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,S){const p=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:v})}};return p(m)-p(S)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Fc(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new jD(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new UD(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ou="SyncEngine";class w7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _7{constructor(e){this.key=e,this.hu=!1}}class E7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ui(a=>CN(a),pg),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(ve.comparator),this.Au=new Map,this.Ru=new cE,this.Vu={},this.mu=new Map,this.fu=sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I7(t,e,n=!0){const r=Sg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await BD(r,e,n,!0),s}async function S7(t,e){const n=Sg(t);await BD(n,e,!0,!1)}async function BD(t,e,n,r){const s=await fp(t.localStore,Qr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await SE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ig(t.remoteStore,s),a}async function SE(t,e,n,r,s){t.pu=(h,f,m)=>async function(p,v,w,y){let E=v.view.ru(w);E.Cs&&(E=await mp(p.localStore,v.query,!1).then(({documents:x})=>v.view.ru(x,E)));const R=y&&y.targetChanges.get(v.targetId),k=y&&y.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(E,p.isPrimaryClient,R,k);return Xw(p,v.targetId,L.au),L.snapshot}(t,h,f,m);const i=await mp(t.localStore,e,!0),o=new $D(e,i.Qs),a=o.ru(i.documents),l=xh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Xw(t,n,c.au);const d=new w7(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function T7(t,e,n){const r=Te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!pg(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mc(r.remoteStore,s.targetId),Uc(r,s.targetId)}).catch(Jo)):(Uc(r,s.targetId),await Vc(r.localStore,s.targetId,!0))}async function b7(t,e){const n=Te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mc(n.remoteStore,r.targetId))}async function A7(t,e,n){const r=xE(t);try{const s=await function(o,a){const l=Te(o),c=ft.now(),d=a.reduce((m,S)=>m.add(S.key),Ze());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let S=Wr(),p=Ze();return l.Ns.getEntries(m,d).next(v=>{S=v,S.forEach((w,y)=>{y.isValidDocument()||(p=p.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,S)).next(v=>{h=v;const w=[];for(const y of a){const E=Qz(y,h.get(y.key).overlayedDocument);E!=null&&w.push(new ji(y.key,E,_N(E.value.mapValue),Rn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(v=>{f=v;const w=v.applyToLocalDocumentSet(h,p);return l.documentOverlayCache.saveOverlays(m,v.batchId,w)})}).then(()=>({batchId:f.batchId,changes:ON(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ot(We)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await ea(r,s.changes),await su(r.remoteStore)}catch(s){const i=Ph(s,"Failed to persist write");n.reject(i)}}async function zD(t,e){const n=Te(t);try{const r=await qW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ne(o.hu,14607):s.removedDocuments.size>0&&(Ne(o.hu,42227),o.hu=!1))}),await ea(n,r,e)}catch(r){await Jo(r)}}function gA(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Te(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&EE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x7(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ot(ve.comparator);o=o.insert(i,un.newNoDocument(i,Le.min()));const a=Ze().add(i),l=new Ah(Le.min(),new Map,new Ot(We),o,a);await zD(r,l),r.du=r.du.remove(i),r.Au.delete(e),AE(r)}else await Vc(r.localStore,e,!1).then(()=>Uc(r,e,n)).catch(Jo)}async function R7(t,e){const n=Te(t),r=e.batch.batchId;try{const s=await WW(n.localStore,e);bE(n,r,null),TE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ea(n,s)}catch(s){await Jo(s)}}async function P7(t,e,n){const r=Te(t);try{const s=await function(o,a){const l=Te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ne(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);bE(r,e,n),TE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ea(r,s)}catch(s){await Jo(s)}}function TE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function bE(t,e,n){const r=Te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||WD(t,r)})}function WD(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),AE(t))}function Xw(t,e,n){for(const r of n)r instanceof UD?(t.Ru.addReference(r.key,e),C7(t,r)):r instanceof jD?(Z(ou,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||WD(t,r.key)):Se(19791,{wu:r})}function C7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Z(ou,"New document in limbo: "+n),t.Eu.add(r),AE(t))}function AE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ve(mt.fromString(e)),r=t.fu.next();t.Au.set(r,new _7(n)),t.du=t.du.insert(n,r),Ig(t.remoteStore,new vi(Qr(Sh(n.path)),r,"TargetPurposeLimboResolution",Ar.ce))}}async function ea(t,e,n){const r=Te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=hE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=Te(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>V.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Xo(h))throw h;Z(fE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),S=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(S);d.Ms=d.Ms.insert(f,p)}}}(r.localStore,i))}async function k7(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){Z(ou,"User change. New user:",e.toKey());const r=await ID(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new ie(W.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ea(n,r.Ls)}}function N7(t,e){const n=Te(t),r=n.Au.get(e);if(r&&r.hu)return Ze().add(r.key);{let s=Ze();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function D7(t,e){const n=Te(t),r=await mp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Xw(n,e.targetId,s.au),s}async function O7(t,e){const n=Te(t);return bD(n.localStore,e).then(r=>ea(n,r))}async function L7(t,e,n,r){const s=Te(t),i=await function(a,l){const c=Te(a),d=Te(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await su(s.remoteStore):n==="acknowledged"||n==="rejected"?(bE(s,e,r||null),TE(s,e),function(a,l){Te(Te(a).mutationQueue).ir(l)}(s.localStore,e)):Se(6720,"Unknown batchState",{Su:n}),await ea(s,i)):Z(ou,"Cannot apply mutation batch with id: "+e)}async function V7(t,e){const n=Te(t);if(Sg(n),xE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await yA(n,r.toArray());n.gu=!0,await Yw(n.remoteStore,!0);for(const i of s)Ig(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Uc(n,o),Vc(n.localStore,o,!0))),Mc(n.remoteStore,o)}),await s,await yA(n,r),function(o){const a=Te(o);a.Au.forEach((l,c)=>{Mc(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ot(ve.comparator)}(n),n.gu=!1,await Yw(n.remoteStore,!1)}}async function yA(t,e,n){const r=Te(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await fp(r.localStore,Qr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await D7(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await TD(r.localStore,o);a=await fp(r.localStore,c),await SE(r,qD(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function qD(t){return RN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function M7(t){return function(n){return Te(Te(n).persistence).Ts()}(Te(t).localStore)}async function F7(t,e,n,r){const s=Te(t);if(s.gu)return void Z(ou,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await bD(s.localStore,kN(i[0])),a=Ah.createSynthesizedRemoteEventForCurrentChange(e,n==="current",hn.EMPTY_BYTE_STRING);await ea(s,o,a);break}case"rejected":await Vc(s.localStore,e,!0),Uc(s,e,r);break;default:Se(64155,n)}}async function U7(t,e,n){const r=Sg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Z(ou,"Adding an already active target "+s);continue}const i=await TD(r.localStore,s),o=await fp(r.localStore,i);await SE(r,qD(i),o.targetId,!1,o.resumeToken),Ig(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Vc(r.localStore,s,!1).then(()=>{Mc(r.remoteStore,s),Uc(r,s)}).catch(Jo)}}function Sg(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x7.bind(null,e),e.Pu.H_=y7.bind(null,e.eventManager),e.Pu.yu=v7.bind(null,e.eventManager),e}function xE(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P7.bind(null,e),e}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ED(this.persistence,new _D,e.initialUser,this.serializer)}Cu(e){return new uE(_g.mi,this.serializer)}Du(e){return new CD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class j7 extends sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ne(this.persistence.referenceDelegate instanceof hp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new uE(r=>hp.mi(r,n),this.serializer)}}class HD extends sh{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await xE(this.xu.syncEngine),await su(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return ED(this.persistence,new _D,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new mD(r,e.asyncQueue,n)}Mu(e,n){const r=new X9(n,this.persistence);return new J9(e.asyncQueue,r)}Cu(e){const n=wD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new dE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,kD(),rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new CD}}class $7 extends HD{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof $y&&(this.sharedClientState.syncEngine={Co:L7.bind(null,n),vo:F7.bind(null,n),Fo:U7.bind(null,n),Ts:M7.bind(null,n),Do:O7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await V7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=kD();if(!$y.v(n))throw new ie(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $y(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k7.bind(null,this.syncEngine),await Yw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g7}()}createDatastore(e){const n=Eg(e.databaseInfo.databaseId),r=function(i){return new XW(i)}(e.databaseInfo);return function(i,o,a,l){return new n7(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new s7(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gA(this.syncEngine,n,0),function(){return uA.v()?new uA:new GW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new E7(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Te(s);Z(il,"RemoteStore shutting down."),i.Ea.add(5),await ru(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="FirestoreClient";class B7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Zn.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z(qo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z(qo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ph(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zy(t,e){t.asyncQueue.verifyOperationInProgress(),Z(qo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ID(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PE(t);Z(qo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hA(e.remoteStore,s)),t._onlineComponents=e}async function PE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(qo,"Using user provided OfflineComponentProvider");try{await zy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await zy(t,new sh)}}else Z(qo,"Using default OfflineComponentProvider"),await zy(t,new j7(void 0));return t._offlineComponents}async function CE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(qo,"Using user provided OnlineComponentProvider"),await vA(t,t._uninitializedComponentsProvider._online)):(Z(qo,"Using default OnlineComponentProvider"),await vA(t,new ih))),t._onlineComponents}function KD(t){return PE(t).then(e=>e.persistence)}function GD(t){return PE(t).then(e=>e.localStore)}function QD(t){return CE(t).then(e=>e.remoteStore)}function z7(t){return CE(t).then(e=>e.syncEngine)}async function vp(t){const e=await CE(t),n=e.eventManager;return n.onListen=I7.bind(null,e.syncEngine),n.onUnlisten=T7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b7.bind(null,e.syncEngine),n}function W7(t){return t.asyncQueue.enqueue(async()=>{const e=await KD(t),n=await QD(t);return e.setNetworkEnabled(!0),function(s){const i=Te(s);return i.Ea.delete(0),Rh(i)}(n)})}function q7(t){return t.asyncQueue.enqueue(async()=>{const e=await KD(t),n=await QD(t);return e.setNetworkEnabled(!1),async function(s){const i=Te(s);i.Ea.add(0),await ru(i),i.Ra.set("Offline")}(n)})}function H7(t,e){const n=new as;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=Te(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new ie(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Ph(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await GD(t),e,n)),n.promise}function K7(t,e,n={}){const r=new as;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new RE({next:f=>{d.Nu(),o.enqueueAndForget(()=>_E(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new ie(W.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new IE(Sh(a.path),d,{includeMetadataChanges:!0,qa:!0});return wE(i,h)}(await vp(t),t.asyncQueue,e,n,r)),r.promise}function G7(t,e){const n=new as;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await mp(s,i,!0),l=new $D(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Ph(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await GD(t),e,n)),n.promise}function Q7(t,e,n={}){const r=new as;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new RE({next:f=>{d.Nu(),o.enqueueAndForget(()=>_E(i,h)),f.fromCache&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new IE(a,d,{includeMetadataChanges:!0,qa:!0});return wE(i,h)}(await vp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7="firestore.googleapis.com",_A=!0;class EA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y7,this.ssl=_A}else this.host=e.host,this.ssl=e.ssl??_A;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fD)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YD(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Wk;switch(r.type){case"firstParty":return new B9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wA.get(n);r&&(Z("ComponentProvider","Removing Datastore"),wA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_h(n,Wt._jsonSchema))return new Wt(e,r||null,new ve(mt.fromString(n.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:En("string",Wt._jsonSchemaVersion),referencePath:En("string")};class _i extends ks{constructor(e,n,r){super(e,n,Sh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new ve(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function Oe(t,e,...n){if(t=pt(t),Hk("collection","path",e),t instanceof kE){const r=mt.fromString(e,...n);return db(r),new _i(t,null,r)}{if(!(t instanceof Wt||t instanceof _i))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return db(r),new _i(t.firestore,null,r)}}function Pe(t,e,...n){if(t=pt(t),arguments.length===1&&(e=og.newId()),Hk("doc","path",e),t instanceof kE){const r=mt.fromString(e,...n);return ub(r),new Wt(t,null,new ve(r))}{if(!(t instanceof Wt||t instanceof _i))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return ub(r),new Wt(t.firestore,t instanceof _i?t.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="AsyncQueue";class SA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ND(this,"async_queue_retry"),this._c=()=>{const r=rm();r&&Z(IA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=rm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new as;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xo(e))throw e;Z(IA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,pn("INTERNAL UNHANDLED ERROR: ",TA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=vE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:TA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function TA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ir extends kE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new SA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SA(e),this._firestoreClient=void 0,await e}}}function JD(t,e,n){n||(n=rp);const r=sg(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Ec(i,e))return s;throw new ie(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fD)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Mi(e.host)&&O0(e.host),r.initialize({options:e,instanceIdentifier:n})}function ii(t){if(t._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XD(t),t._firestoreClient}function XD(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new Az(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,YD(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new B7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function J7(t,e){jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return ZD(t,ih.provider,{build:r=>new HD(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function X7(t){jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();ZD(t,ih.provider,{build:n=>new $7(n,e.cacheSizeBytes)})}function ZD(t,e,n){if((t=dn(t,ir))._firestoreClient||t._terminated)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ie(W.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},XD(t)}function NE(t){return W7(ii(t=dn(t,ir)))}function DE(t){return q7(ii(t=dn(t,ir)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(hn.fromBase64String(e))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $r(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_h(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:En("string",$r._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(_h(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:En("string",Ss._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_h(e,Ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ts(e.vectorValues);throw new ie(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ts._jsonSchemaVersion="firestore/vectorValue/1.0",Ts._jsonSchema={type:En("string",Ts._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=/^__.*__$/;class e8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new nu(e,this.data,n,this.fieldTransforms)}}class eO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:t})}}class Tg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tO(this.Ac)&&Z7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Eg(e)}Cc(e,n,r,s=!1){return new Tg({Ac:e,methodName:n,Dc:r,path:zt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ch(t){const e=t._freezeSettings(),n=Eg(t._databaseId);return new t8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function OE(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);ME("Data must be an object, but it was:",o,r);const a=sO(r,o);let l,c;if(i.merge)l=new xr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Zw(e,h,n);if(!o.contains(f))throw new ie(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);oO(d,f)||d.push(f)}l=new xr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new e8(new nr(a),l,c)}class bg extends lu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}function n8(t,e,n){return new Tg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class LE extends lu{_toFieldTransform(e){return new tE(e.path,new Dc)}isEqual(e){return e instanceof LE}}class VE extends lu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=n8(this,e,!0),r=this.vc.map(i=>cu(i,n)),s=new tl(r);return new tE(e.path,s)}isEqual(e){return e instanceof VE&&Ec(this.vc,e.vc)}}function nO(t,e,n,r){const s=t.Cc(1,e,n);ME("Data must be an object, but it was:",s,r);const i=[],o=nr.empty();Zo(r,(l,c)=>{const d=FE(e,l,n);c=pt(c);const h=s.yc(d);if(c instanceof bg)i.push(d);else{const f=cu(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new xr(i);return new eO(o,a,s.fieldTransforms)}function rO(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Zw(e,r,n)],l=[s];if(i.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Zw(e,i[f])),l.push(i[f+1]);const c=[],d=nr.empty();for(let f=a.length-1;f>=0;--f)if(!oO(c,a[f])){const m=a[f];let S=l[f];S=pt(S);const p=o.yc(m);if(S instanceof bg)c.push(m);else{const v=cu(S,p);v!=null&&(c.push(m),d.set(m,v))}}const h=new xr(c);return new eO(d,h,o.fieldTransforms)}function r8(t,e,n,r=!1){return cu(n,t.Cc(r?4:3,e))}function cu(t,e){if(iO(t=pt(t)))return ME("Unsupported field value:",e,t),sO(t,e);if(t instanceof lu)return function(r,s){if(!tO(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=cu(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ft.fromDate(r);return{timestampValue:Lc(s.serializer,i)}}if(r instanceof ft){const i=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,i)}}if(r instanceof Ss)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $r)return{bytesValue:KN(s.serializer,r._byteString)};if(r instanceof Wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:oE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ts)return function(o,a){return{mapValue:{fields:{[Y0]:{stringValue:J0},[Pc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return eE(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ag(r)}`)}(t,e)}function sO(t,e){const n={};return dN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(t,(r,s)=>{const i=cu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Ss||t instanceof $r||t instanceof Wt||t instanceof lu||t instanceof Ts)}function ME(t,e,n){if(!iO(n)||!Gk(n)){const r=ag(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Zw(t,e,n){if((e=pt(e))instanceof au)return e._internalPath;if(typeof e=="string")return FE(t,e);throw wp("Field path arguments must be of type string or ",t,!1,void 0,n)}const s8=new RegExp("[~\\*/\\[\\]]");function FE(t,e,n){if(e.search(s8)>=0)throw wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new au(...e.split("."))._internalPath}catch{throw wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wp(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ie(W.INVALID_ARGUMENT,a+t+l)}function oO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ag("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i8 extends aO{data(){return super.data()}}function Ag(t,e){return typeof e=="string"?FE(t,e):e instanceof au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UE{}class xg extends UE{}function $e(t,e,...n){let r=[];e instanceof UE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Rg).length,a=i.filter(l=>l instanceof kh).length;if(o>1||o>0&&a>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class kh extends xg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kh(e,n,r)}_apply(e){const n=this._parse(e);return cO(e._query,n),new ks(e.firestore,e.converter,jw(e._query,n))}_parse(e){const n=Ch(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){xA(h,d);const S=[];for(const p of h)S.push(AA(l,i,p));f={arrayValue:{values:S}}}else f=AA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||xA(h,d),f=r8(a,o,h,d==="in"||d==="not-in");return it.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Me(t,e,n){const r=e,s=Ag("where",t);return kh._create(s,r,n)}class Rg extends UE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Et.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)cO(o,l),o=jw(o,l)}(e._query,n),new ks(e.firestore,e.converter,jw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pg extends xg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nh(i,o)}(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new tu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Do(t,e="asc"){const n=e,r=Ag("orderBy",t);return Pg._create(r,n)}class Cg extends xg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Cg(e,n,r)}_apply(e){return new ks(e.firestore,e.converter,op(e._query,this._limit,this._limitType))}}function uu(t){return G9("limit",t),Cg._create("limit",t,"F")}function AA(t,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PN(e)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!ve.isDocumentKey(r))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eh(t,new ve(r))}if(n instanceof Wt)return eh(t,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ag(n)}.`)}function xA(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cO(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uO{convertValue(e,n="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Pc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>$t(o.doubleValue));return new Ts(n)}convertGeoPoint(e){return new Ss($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xd(e));default:return null}}convertTimestamp(e){const n=Ni(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);Ne(rD(r),9688,{name:e});const s=new $o(r.get(1),r.get(3)),i=new ve(r.popFirst(5));return s.isEqual(n)||pn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ei extends aO{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ag("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ei._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:En("string",Ei._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class yd extends Ei{data(e={}){return super.data(e)}}class Ii{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new xa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yd(this._firestore,this._userDataWriter,r.key,r,new xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new yd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new yd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:o8(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ii._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){t=dn(t,Wt);const e=dn(t.firestore,ir);return K7(ii(e),t._key).then(n=>hO(e,t,n))}Ii._jsonSchemaVersion="firestore/querySnapshot/1.0",Ii._jsonSchema={type:En("string",Ii._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class Nh extends uO{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function dO(t){t=dn(t,Wt);const e=dn(t.firestore,ir),n=ii(e),r=new Nh(e);return H7(n,t._key).then(s=>new Ei(e,r,t._key,s,new xa(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ke(t){t=dn(t,ks);const e=dn(t.firestore,ir),n=ii(e),r=new Nh(e);return lO(t._query),Q7(n,t._query).then(s=>new Ii(e,r,t,s))}function a8(t){t=dn(t,ks);const e=dn(t.firestore,ir),n=ii(e),r=new Nh(e);return G7(n,t._query).then(s=>new Ii(e,r,t,s))}function cn(t,e,n){t=dn(t,Wt);const r=dn(t.firestore,ir),s=jE(t.converter,e,n);return du(r,[OE(Ch(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Rn.none())])}function In(t,e,n,...r){t=dn(t,Wt);const s=dn(t.firestore,ir),i=Ch(s);let o;return o=typeof(e=pt(e))=="string"||e instanceof au?rO(i,"updateDoc",t._key,e,n,r):nO(i,"updateDoc",t._key,e),du(s,[o.toMutation(t._key,Rn.exists(!0))])}function Vn(t){return du(dn(t.firestore,ir),[new bh(t._key,Rn.none())])}function Js(t,e){const n=dn(t.firestore,ir),r=Pe(t),s=jE(t.converter,e);return du(n,[OE(Ch(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}function Oi(t,...e){var l,c,d;t=pt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||bA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(bA(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof Wt)o=dn(t.firestore,ir),a=Sh(t._key.path),i={next:h=>{e[r]&&e[r](hO(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=dn(t,ks);o=dn(h.firestore,ir),a=h._query;const f=new Nh(o);i={next:m=>{e[r]&&e[r](new Ii(o,f,h,m))},error:e[r+1],complete:e[r+2]},lO(t._query)}return function(f,m,S,p){const v=new RE(p),w=new IE(m,v,S);return f.asyncQueue.enqueueAndForget(async()=>wE(await vp(f),w)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>_E(await vp(f),w))}}(ii(o),a,s,i)}function du(t,e){return function(r,s){const i=new as;return r.asyncQueue.enqueueAndForget(async()=>A7(await z7(r),s,i)),i.promise}(ii(t),e)}function hO(t,e,n){const r=n.docs.get(e._key),s=new Nh(t);return new Ei(t,s,e._key,r,new xa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ch(e)}set(e,n,r){this._verifyNotCommitted();const s=Wy(e,this._firestore),i=jE(s.converter,n,r),o=OE(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Rn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Wy(e,this._firestore);let o;return o=typeof(n=pt(n))=="string"||n instanceof au?rO(this._dataReader,"WriteBatch.update",i._key,n,r,s):nO(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Wy(e,this._firestore);return this._mutations=this._mutations.concat(new bh(n._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wy(t,e){if((t=pt(t)).firestore!==e)throw new ie(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Fe(){return new LE("serverTimestamp")}function l8(...t){return new VE("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(t){return ii(t=dn(t,ir)),new fO(t,e=>du(t,e))}(function(e,n=!0){(function(s){eu=s})(vh),ei(new Rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ir(new j9(r.getProvider("auth-internal")),new z9(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Gr(ob,ab,e),Gr(ob,ab,"esm2020")})();const Nn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:uO,Bytes:$r,CollectionReference:_i,DocumentReference:Wt,DocumentSnapshot:Ei,FieldPath:au,FieldValue:lu,Firestore:ir,FirestoreError:ie,GeoPoint:Ss,Query:ks,QueryCompositeFilterConstraint:Rg,QueryConstraint:xg,QueryDocumentSnapshot:yd,QueryFieldFilterConstraint:kh,QueryLimitConstraint:Cg,QueryOrderByConstraint:Pg,QuerySnapshot:Ii,SnapshotMetadata:xa,Timestamp:ft,VectorValue:Ts,WriteBatch:fO,_AutoId:og,_ByteString:hn,_DatabaseId:$o,_DocumentKey:ve,_EmptyAuthCredentialsProvider:Wk,_FieldPath:zt,_cast:dn,_logWarn:jo,_validateIsNotUsedTogether:Kk,addDoc:Js,arrayUnion:l8,collection:Oe,deleteDoc:Vn,disableNetwork:DE,doc:Pe,enableIndexedDbPersistence:J7,enableMultiTabIndexedDbPersistence:X7,enableNetwork:NE,ensureFirestoreConfigured:ii,executeWrite:du,getDoc:Xt,getDocFromCache:dO,getDocs:Ke,getDocsFromCache:a8,initializeFirestore:JD,limit:uu,onSnapshot:Oi,orderBy:Do,query:$e,serverTimestamp:Fe,setDoc:cn,setLogLevel:Bk,updateDoc:In,where:Me,writeBatch:c8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8="type.googleapis.com/google.protobuf.Int64Value",d8="type.googleapis.com/google.protobuf.UInt64Value";function mO(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function _p(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>_p(e));if(typeof t=="function"||typeof t=="object")return mO(t,e=>_p(e));throw new Error("Data cannot be encoded in JSON: "+t)}function jc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case u8:case d8:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>jc(e)):typeof t=="function"||typeof t=="object"?mO(t,e=>jc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rr extends Cs{constructor(e,n,r){super(`${$E}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Rr.prototype)}}function h8(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ep(t,e){let n=h8(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!RA[o])return new Rr("internal","internal");n=RA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=jc(s))}}catch{}return n==="ok"?null:new Rr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="us-central1",m8=/^data: (.*?)(?:\n|$)/;function p8(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Rr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class g8{constructor(e,n,r,s,i=e_,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new f8(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=e_}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function y8(t,e,n){const r=Mi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(O0(t.emulatorOrigin+"/backends"),JC("Functions",!0))}function v8(t,e,n){const r=s=>_8(t,e,s,{});return r.stream=(s,i)=>I8(t,e,s,i),r}function pO(t){return t.emulatorOrigin&&Mi(t.emulatorOrigin)?"include":void 0}async function w8(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:pO(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function gO(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function _8(t,e,n,r){const s=t._url(e);return E8(t,s,n,r)}async function E8(t,e,n,r){n=_p(n);const s={data:n},i=await gO(t,r),o=r.timeout||7e4,a=p8(o),l=await Promise.race([w8(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Rr("cancelled","Firebase Functions instance was deleted.");const c=Ep(l.status,l.json);if(c)throw c;if(!l.json)throw new Rr("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Rr("internal","Response is missing data field.");return{data:jc(d)}}function I8(t,e,n,r){const s=t._url(e);return S8(t,s,n,r||{})}async function S8(t,e,n,r){var f;n=_p(n);const s={data:n},i=await gO(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:pO(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new Rr("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const S=Ep(0,null);return{data:Promise.reject(S),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(S)}}}}}}let a,l;const c=new Promise((m,S)=>{a=m,l=S});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Rr("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=T8(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:S,done:p}=await m.read();return{value:S,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function T8(t,e,n,r){const s=(o,a)=>{const l=o.match(m8);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(jc(d.result));return}if("message"in d){a.enqueue(jc(d.message));return}if("error"in d){const h=Ep(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Rr){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Rr("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Rr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Rr?c:Ep(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const PA="@firebase/functions",CA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8="auth-internal",A8="app-check-internal",x8="messaging-internal";function R8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(b8),o=n.getProvider(x8),a=n.getProvider(A8);return new g8(s,i,o,a,r)};ei(new Rs($E,e,"PUBLIC").setMultipleInstances(!0)),Gr(PA,CA,t),Gr(PA,CA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t=ik(),e=e_){const r=sg(pt(t),$E).getImmediate({identifier:e}),s=QC("functions");return s&&C8(r,...s),r}function C8(t,e,n){y8(pt(t),e,n)}function $G(t,e,n){return v8(pt(t),e)}R8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="firebasestorage.googleapis.com",vO="storageBucket",k8=2*60*1e3,N8=10*60*1e3,D8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Cs{constructor(e,n,r=0){super(qy(e),`Firebase Storage: ${n} (${qy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ut||(Ut={}));function qy(t){return"storage/"+t}function BE(){const t="An unknown error occurred, please check the error payload for server response.";return new nn(Ut.UNKNOWN,t)}function O8(t){return new nn(Ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function L8(t){return new nn(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function V8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nn(Ut.UNAUTHENTICATED,t)}function M8(){return new nn(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function F8(t){return new nn(Ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wO(){return new nn(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _O(){return new nn(Ut.CANCELED,"User canceled the upload/download.")}function U8(t){return new nn(Ut.INVALID_URL,"Invalid URL '"+t+"'.")}function j8(t){return new nn(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $8(){return new nn(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vO+"' property when initializing the app?")}function EO(){return new nn(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function B8(){return new nn(Ut.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function z8(){return new nn(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function W8(t){return new nn(Ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function t_(t){return new nn(Ut.INVALID_ARGUMENT,t)}function IO(){return new nn(Ut.APP_DELETED,"The Firebase app was deleted.")}function q8(t){return new nn(Ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(t,e){return new nn(Ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vu(t){throw new nn(Ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qr.makeFromUrl(e,n)}catch{return new qr(e,"")}if(r.path==="")return r;throw j8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),S={bucket:1,path:3},p=n===yO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",w=new RegExp(`^https?://${p}/${s}/${v}`,"i"),E=[{regex:a,indices:l,postModify:i},{regex:m,indices:S,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<E.length;R++){const k=E[R],L=k.regex.exec(e);if(L){const x=L[k.indices.bucket];let b=L[k.indices.path];b||(b=""),r=new qr(x,b),k.postModify(r);break}}if(r==null)throw U8(e);return r}}class H8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(m,l())},v)}function f(){i&&clearTimeout(i)}function m(v,...w){if(c){f();return}if(v){f(),d.call(null,v,...w);return}if(l()||o){f(),d.call(null,v,...w);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let S=!1;function p(v){S||(S=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}function G8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){return t!==void 0}function Y8(t){return typeof t=="function"}function J8(t){return typeof t=="object"&&!Array.isArray(t)}function kg(t){return typeof t=="string"||t instanceof String}function kA(t){return zE()&&t instanceof Blob}function zE(){return typeof Blob<"u"}function NA(t,e,n,r){if(r<e)throw t_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw t_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function SO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,p)=>{this.resolve_=S,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ef(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ha.NO_ERROR,l=i.getStatus();if(!a||TO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ha.ABORT;r(!1,new Ef(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ef(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Q8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=BE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?IO():_O();o(l)}else{const l=wO();o(l)}};this.canceled_?n(!1,new Ef(!1,null,!0)):this.backoffId_=K8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&G8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ef{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Z8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function rq(t,e,n,r,s,i,o=!0,a=!1){const l=SO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return tq(d,e),Z8(d,n),eq(d,i),nq(d,r),new X8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iq(...t){const e=sq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zE())return new Blob(t);throw new nn(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t){if(typeof atob>"u")throw W8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hy{constructor(e,n){this.data=e,this.contentType=n||null}}function lq(t,e){switch(t){case Ks.RAW:return new Hy(bO(e));case Ks.BASE64:case Ks.BASE64URL:return new Hy(AO(t,e));case Ks.DATA_URL:return new Hy(uq(e),dq(e))}throw BE()}function bO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function cq(t){let e;try{e=decodeURIComponent(t)}catch{throw vd(Ks.DATA_URL,"Malformed data URL.")}return bO(e)}function AO(t,e){switch(t){case Ks.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw vd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ks.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw vd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=aq(e)}catch(s){throw s.message.includes("polyfill")?s:vd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class xO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vd(Ks.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=hq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function uq(t){const e=new xO(t);return e.base64?AO(Ks.BASE64,e.rest):cq(e.rest)}function dq(t){return new xO(t).contentType}function hq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){let r=0,s="";kA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(kA(this.data_)){const r=this.data_,s=oq(r,e,n);return s===null?null:new mi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mi(r,!0)}}static getBlob(...e){if(zE()){const n=e.map(r=>r instanceof mi?r.data_:r);return new mi(iq.apply(null,n))}else{const n=e.map(o=>kg(o)?lq(Ks.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new mi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){let e;try{e=JSON.parse(t)}catch{return null}return J8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t,e){return e}class lr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||pq}}let If=null;function gq(t){return!kg(t)||t.length<2?t:PO(t)}function WE(){if(If)return If;const t=[];t.push(new lr("bucket")),t.push(new lr("generation")),t.push(new lr("metageneration")),t.push(new lr("name","fullPath",!0));function e(i,o){return gq(o)}const n=new lr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new lr("size");return s.xform=r,t.push(s),t.push(new lr("timeCreated")),t.push(new lr("updated")),t.push(new lr("md5Hash",null,!0)),t.push(new lr("cacheControl",null,!0)),t.push(new lr("contentDisposition",null,!0)),t.push(new lr("contentEncoding",null,!0)),t.push(new lr("contentLanguage",null,!0)),t.push(new lr("contentType",null,!0)),t.push(new lr("metadata","customMetadata",!0)),If=t,If}function yq(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new qr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function vq(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return yq(r,t),r}function CO(t,e,n){const r=RO(e);return r===null?null:vq(t,r,n)}function wq(t,e,n,r){const s=RO(e);if(s===null||!kg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=Dh(f,n,r),S=SO({alt:"media",token:c});return m+S})[0]}function kO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class hu{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){if(!t)throw BE()}function qE(t,e){function n(r,s){const i=CO(t,s,e);return Si(i!==null),i}return n}function _q(t,e){function n(r,s){const i=CO(t,s,e);return Si(i!==null),wq(i,s,t.host,t._protocol)}return n}function Oh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=M8():s=V8():n.getStatus()===402?s=L8(t.bucket):n.getStatus()===403?s=F8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function NO(t){const e=Oh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=O8(t.path)),i.serverResponse=s.serverResponse,i}return n}function Eq(t,e,n){const r=e.fullServerUrl(),s=Dh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hu(s,i,qE(t,n),o);return a.errorHandler=NO(e),a}function Iq(t,e,n){const r=e.fullServerUrl(),s=Dh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hu(s,i,_q(t,n),o);return a.errorHandler=NO(e),a}function Sq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function DO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Sq(null,e)),r}function OO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let R=0;R<2;R++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=DO(e,r,s),d=kO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=mi.getBlob(h,r,f);if(m===null)throw EO();const S={name:c.fullPath},p=Dh(i,t.host,t._protocol),v="POST",w=t.maxUploadRetryTime,y=new hu(p,v,qE(t,n),w);return y.urlParams=S,y.headers=o,y.body=m.uploadData(),y.errorHandler=Oh(e),y}class Ip{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function HE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Si(!1)}return Si(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Tq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=DO(e,r,s),a={name:o.fullPath},l=Dh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=kO(o,n),f=t.maxUploadRetryTime;function m(p){HE(p);let v;try{v=p.getResponseHeader("X-Goog-Upload-URL")}catch{Si(!1)}return Si(kg(v)),v}const S=new hu(l,c,m,f);return S.urlParams=a,S.headers=d,S.body=h,S.errorHandler=Oh(e),S}function bq(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=HE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Si(!1)}h||Si(!1);const f=Number(h);return Si(!isNaN(f)),new Ip(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new hu(n,o,i,a);return l.headers=s,l.errorHandler=Oh(e),l}const DA=256*1024;function Aq(t,e,n,r,s,i,o,a){const l=new Ip(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw B8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const S={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,f);if(p===null)throw EO();function v(R,k){const L=HE(R,["active","final"]),x=l.current+d,b=r.size();let A;return L==="final"?A=qE(e,i)(R,k):A=null,new Ip(x,b,L==="final",A)}const w="POST",y=e.maxUploadRetryTime,E=new hu(n,w,v,y);return E.headers=S,E.body=p.uploadData(),E.progressCallback=a||null,E.errorHandler=Oh(t),E}const Sr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ky(t){switch(t){case"running":case"pausing":case"canceling":return Sr.RUNNING;case"paused":return Sr.PAUSED;case"success":return Sr.SUCCESS;case"canceled":return Sr.CANCELED;case"error":return Sr.ERROR;default:return Sr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e,n,r){if(Y8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Rq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Vu("cannot .send() more than once");if(Mi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Pq extends Rq{initXhr(){this.xhr_.responseType="text"}}function va(){return new Pq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=WE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ut.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(TO(s.status,[]))if(i)s=wO();else{this.sleepTime=Math.max(this.sleepTime*2,D8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ut.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Tq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=bq(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,va,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=DA*this._chunkMultiplier,n=new Ip(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Aq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,va,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){DA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Eq(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=OO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=_O(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ky(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new xq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ky(this._state)){case Sr.SUCCESS:bl(this._resolve.bind(null,this.snapshot))();break;case Sr.CANCELED:case Sr.ERROR:const n=this._reject;bl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ky(this._state)){case Sr.RUNNING:case Sr.PAUSED:e.next&&bl(e.next.bind(e,this.snapshot))();break;case Sr.SUCCESS:e.complete&&bl(e.complete.bind(e))();break;case Sr.CANCELED:case Sr.ERROR:e.error&&bl(e.error.bind(e,this._error))();break;default:e.error&&bl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this._service=e,n instanceof qr?this._location=n:this._location=qr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ol(e,n)}get root(){const e=new qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PO(this._location.path)}get storage(){return this._service}get parent(){const e=fq(this._location.path);if(e===null)return null;const n=new qr(this._location.bucket,e);return new ol(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw q8(e)}}function kq(t,e,n){t._throwIfRoot("uploadBytes");const r=OO(t.storage,t._location,WE(),new mi(e,!0),n);return t.storage.makeRequestWithTokens(r,va).then(s=>({metadata:s,ref:t}))}function Nq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Cq(t,new mi(e),n)}function Dq(t){t._throwIfRoot("getDownloadURL");const e=Iq(t.storage,t._location,WE());return t.storage.makeRequestWithTokens(e,va).then(n=>{if(n===null)throw z8();return n})}function Oq(t,e){const n=mq(t._location.path,e),r=new qr(t._location.bucket,n);return new ol(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){return/^[A-Za-z]+:\/\//.test(t)}function Vq(t,e){return new ol(t,e)}function LO(t,e){if(t instanceof KE){const n=t;if(n._bucket==null)throw $8();const r=new ol(n,n._bucket);return e!=null?LO(r,e):r}else return e!==void 0?Oq(t,e):t}function Mq(t,e){if(e&&Lq(e)){if(t instanceof KE)return Vq(t,e);throw t_("To use ref(service, url), the first argument must be a Storage instance.")}else return LO(t,e)}function OA(t,e){const n=e==null?void 0:e[vO];return n==null?null:qr.makeFromBucketSpec(n,t)}function Fq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Mi(e);s&&(O0(`https://${t.host}/b`),JC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:b$(i,t.app.options.projectId))}class KE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=yO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=k8,this._maxUploadRetryTime=N8,this._requests=new Set,s!=null?this._bucket=qr.makeFromBucketSpec(s,this._host):this._bucket=OA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qr.makeFromBucketSpec(this._url,e):this._bucket=OA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ol(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new H8(IO());{const o=rq(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const LA="@firebase/storage",VA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="storage";function BG(t,e,n){return t=pt(t),kq(t,e,n)}function Uq(t,e,n){return t=pt(t),Nq(t,e,n)}function jq(t){return t=pt(t),Dq(t)}function $q(t,e){return t=pt(t),Mq(t,e)}function MO(t=ik(),e){t=pt(t);const r=sg(t,VO).getImmediate({identifier:e}),s=QC("storage");return s&&Bq(r,...s),r}function Bq(t,e,n,r={}){Fq(t,e,n,r)}function zq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new KE(n,r,s,e,vh)}function Wq(){ei(new Rs(VO,zq,"PUBLIC").setMultipleInstances(!0)),Gr(LA,VA,""),Gr(LA,VA,"esm2020")}Wq();const qq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},n_={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:n_.projectId,authDomain:n_.authDomain,emulatorMode:!1});const Ng=sk(n_);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const kt=DB(Ng,{persistence:[xk,bw]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const Q=JD(Ng,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{Bk("error")}catch{}const Hq=P8(Ng,"us-central1"),Kq=MO(Ng);console.log(" Firebase initialized successfully");const Gq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(Gq,100);let fa=0;const Gy=3,Qq=1e3,FO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&fa<Gy){fa++;const r=Math.min(Qq*Math.pow(2,fa-1),1e4);console.log(` Attempting to reconnect (${fa}/${Gy}) in ${r}ms...`);try{await DE(Q),await new Promise(s=>setTimeout(s,r)),await NE(Q),console.log(" Firestore reconnected successfully"),fa=0}catch(s){console.error(" Failed to reconnect:",s),fa>=Gy&&(console.error(" Maximum reconnection attempts reached."),Yq())}}},Yq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await NE(Q),fa=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await DE(Q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(FO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Yt=Object.freeze(Object.defineProperty({__proto__:null,auth:kt,db:Q,functions:Hq,handleFirestoreError:FO,storage:Kq},Symbol.toStringTag,{value:"Module"})),et=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Jq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},al=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>al(n)).filter(n=>n!==void 0);if(t instanceof Date||!Jq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=al(r);s!==void 0&&(e[n]=s)}return e},sm={async create(t){await cn(Pe(Q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Fe()})},async getById(t){const e=Pe(Q,"profiles",t),n=await Xt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:et(r.createdAt)}}return null},async update(t,e){const n=Pe(Q,"profiles",t);await In(n,{...e,updatedAt:Fe()})},async getByShopId(t){const e=$e(Oe(Q,"profiles"),Me("shopId","==",t));return(await Ke(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:et(s.createdAt)}})}},r_={async create(t){return(await Js(Oe(Q,"referrals"),{...t,createdAt:Fe(),updatedAt:Fe()})).id},async getByReferrerId(t){try{const e=$e(Oe(Q,"referrals"),Me("referrerId","==",t),Do("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt),updatedAt:et(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=$e(Oe(Q,"referrals"),Me("referrerId","==",t));return(await Ke(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:et(i.data().createdAt),updatedAt:et(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=$e(Oe(Q,"referrals"),Me("referralCode","==",t),uu(1)),n=await Ke(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:et(r.data().createdAt),updatedAt:et(r.data().updatedAt)}},async updateStatus(t,e){await In(Pe(Q,"referrals",t),{status:e,updatedAt:Fe()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},UO={async getByUserId(t){const e=$e(Oe(Q,"profiles"),Me("userId","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:et(s.createdAt),updatedAt:et(s.updatedAt)}}return null},async update(t,e){const n=$e(Oe(Q,"profiles"),Me("userId","==",t)),r=await Ke(n);if(!r.empty){const s=Pe(Q,"profiles",r.docs[0].id);await In(s,{...e,updatedAt:Fe()})}}},vo={async create(t){return(await Js(Oe(Q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Fe(),updatedAt:Fe()})).id},async getByMerchantId(t){const e=$e(Oe(Q,"merchantWallets"),Me("merchantUserId","==",t)),r=(await Ke(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=$e(Oe(Q,"wallets"),Me("userId","==",t));return(await Ke(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=Pe(Q,"merchantWallets",t),n=await Xt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:et(r.createdAt),updatedAt:et(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=$e(Oe(Q,"merchantWallets"),Me("iccid","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:et(s.createdAt),updatedAt:et(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=$e(Oe(Q,"merchantWallets"),Me("msisdn","==",t)),r=await Ke(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}const s=$e(Oe(Q,"merchantWallets")),i=await Ke(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:et(l.createdAt),updatedAt:et(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Pe(Q,"merchantWallets",t);await In(n,{...e,updatedAt:Fe()})},async updateUsage(t,e,n){const r=Pe(Q,"merchantWallets",t),s={updatedAt:Fe()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await In(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=$e(Oe(Q,"merchantWallets"),Me("msisdn","in",o)),c=(await Ke(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await In(d.ref,{merchantUserId:e,updatedAt:Fe()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Pe(Q,"merchantWallets",t);await Vn(e)}},GE={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await ee(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>Oa);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Fe(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Js(Oe(Q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await ee(async()=>{const{ProfitService:d}=await import("./profitService-BsJiOlFZ.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await vo.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),m=Number(t.amount||0),S=String((t==null?void 0:t.originType)||"").trim()==="withdraw",p=String(t.txnType||"")==="receive";S||p?await vo.updateUsage(c,void 0,f+m):await vo.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const p=await vo.getById(h);m=String((p==null?void 0:p.msisdn)||(p==null?void 0:p.label)||h).trim()}catch{}let S="";f==="withdraw"?S=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?S=`   ${c}   ${m||" "}   ${d||""}    ${r}`:S=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=$e(Oe(Q,"transactions"),Me("shopId","==",t),Do("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt),confirmedAt:r.data().confirmedAt?et(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=$e(Oe(Q,"transactions"),Me("merchantUserId","==",t),Do("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt),confirmedAt:r.data().confirmedAt?et(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=$e(Oe(Q,"transactions"),Me("merchantUserId","==",t)),n=$e(Oe(Q,"transactions"),Me("userId","==",t)),[r,s]=await Promise.all([Ke(e),Ke(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:et(c.createdAt),confirmedAt:c.confirmedAt?et(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=Pe(Q,"transactions",t);await In(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function Xq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await GE.create(e);try{const{calculateCommission:r}=await ee(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>Oa);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Br.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await ee(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>Oa);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Br.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Br.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await ee(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>a_);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const Zq="https://summer-cake-5149.alkaptin2030.workers.dev",jO={async getTelegramWorkerUrl(){var t;try{const e=Pe(Q,"systemSettings","core"),n=await Xt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Pe(Q,"systemSettings","core");await cn(e,{telegramWorkerUrl:t,updatedAt:Fe()},{merge:!0})}},eH={async send(t,e){try{const n=await Br.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await jO.getTelegramWorkerUrl()||Zq).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},tH={async log(t,e,n,r,s){await Js(Oe(Q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Fe()})},async getLogs(t=100){const e=$e(Oe(Q,"auditLogs"),Do("createdAt","desc"),uu(t));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:et(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=$e(Oe(Q,"deletedTransactions"),Do("deletedAt","desc"));return(await Ke(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:et(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=$e(Oe(Q,"deletedTransactions"),Me("userId","==",t),Do("deletedAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:et(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=$e(Oe(Q,"deletedTransactions"),Me("userId","==",t));return(await Ke(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:et(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Fe(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Js(Oe(Q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=$e(Oe(Q,"deletedTransactions"),Me("originalTransactionId","==",t),Me("userId","==",e)),r=await Ke(n);r.empty?await Js(Oe(Q,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Fe()}):await Promise.all(r.docs.map(s=>In(s.ref,{permanent:!0,deletedAt:Fe()}))),console.log("    :",t);try{const s=$e(Oe(Q,"userTransactions"),Me("userId","==",e)),o=(await Ke(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Vn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Pe(Q,"transactions",t);(await Xt(s)).exists()&&(console.log("     transactions  "),await Vn(s));const o=$e(Oe(Q,"transactions"),Me("transactionId","==",t)),a=await Ke(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Vn(d.ref))));const l=$e(Oe(Q,"transactions"),Me("originalTransactionId","==",t)),c=await Ke(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Vn(d.ref))));try{const d=$e(Oe(Q,"deletedTransactions"),Me("userId","==",e),Me("originalTransactionId","==",t)),h=await Ke(d),f=h.docs.map(S=>{var p;return String(((p=S.data())==null?void 0:p.reference)||"")}).filter(Boolean),m=h.docs.map(S=>{var p;return String(((p=S.data())==null?void 0:p.transactionId)||"")}).filter(Boolean);for(const S of f){const p=$e(Oe(Q,"transactions"),Me("reference","==",S)),v=await Ke(p);v.empty||(console.log(`  ${v.size}   transactions  reference=${S}`),await Promise.all(v.docs.map(w=>Vn(w.ref))))}for(const S of m){try{const w=Pe(Q,"transactions",S);(await Xt(w)).exists()&&(console.log("     transactions  :",S),await Vn(w))}catch{}const p=$e(Oe(Q,"transactions"),Me("transactionId","==",S)),v=await Ke(p);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${S}`),await Promise.all(v.docs.map(w=>Vn(w.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},$O={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=Pe(Q,"daily_reports_archive",e);return await cn(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Fe()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=$e(Oe(Q,"daily_reports_archive"),Me("userId","==",t),uu(e)),a=await Ke(o);let l=[];try{l=(await Ke($e(Oe(Q,"deletedDailyArchives"),Me("userId","==",t)))).docs.map(S=>{var p,v;return{id:S.id,reportDate:String(((p=S.data())==null?void 0:p.reportDate)||""),archiveId:String(((v=S.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(m,S)=>l.some(p=>p.archiveId&&p.archiveId===m||p.reportDate&&p.reportDate===S),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:et(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const S=h.get(m.reportDate);(!S||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=S.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,S)=>m.reportDate<S.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=$e(Oe(Q,"daily_reports_archive"),Me("userId","==",t)),s=await Ke(r);let i=0;for(const o of s.docs){const a=et(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Vn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=$e(Oe(Q,"daily_reports_archive"),Me("userId","==",t)),s=(await Ke(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:et(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Vn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=$e(Oe(Q,"daily_reports_archive"),Me("userId","==",t)),n=await Ke(e);let r=0;for(const s of n.docs)try{await Vn(s.ref),r++}catch{const o=s.data();try{await Js(Oe(Q,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Fe()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Br={async getUserData(t){try{console.log("     :",{userId:t});const e=Pe(Q,"users",t),n=await Xt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:et(r.createdAt),updatedAt:et(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=$e(Oe(Q,"deletedTransactions"),Me("userId","==",t));return Oi(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data();if(!((i==null?void 0:i.permanent)===!0))return;const a=String((i==null?void 0:i.originalTransactionId)||""),l=String((i==null?void 0:i.transactionId)||""),c=String((i==null?void 0:i.reference)||"");a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptById(t,l),c&&this.removeLocalReceiptByRef(t,c)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=Pe(Q,"users",t),r=al(e);await cn(n,{...r||{},updatedAt:Fe()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Pe(Q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=al(r);let i={};try{const l=await Xt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Fe()};console.log("   :",o);let a=3;for(;a>0;)try{await cn(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=$e(Oe(Q,"userTransactions"),Me("userId","==",t),Do("createdAt","desc"),uu(200));e=await Ke(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=$e(Oe(Q,"userTransactions"),Me("userId","==",t));e=await Ke(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:et(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=$e(Oe(Q,"deletedTransactions"),Me("userId","==",t),Me("reference","==",o));if(!(await Ke(a)).empty)return console.log("          ."),"skip-deleted"}{const a=$e(Oe(Q,"deletedTransactions"),Me("userId","==",t),Me("permanent","==",!0)),l=await Ke(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),m=String(f.originalTransactionId||f.transactionId||h.id||""),S=String(f.reference||"");return m&&c.includes(m)||S&&c.includes(S)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=$e(Oe(Q,"userTransactions"),Me("userId","==",t));if(s.transactionId){const a=$e(Oe(Q,"userTransactions"),Me("userId","==",t),Me("transactionId","==",s.transactionId)),l=await Ke(a);if(!l.empty){const c=l.docs[0];return await In(Pe(Q,"userTransactions",c.id),{...s,uploadedAt:Fe()}),c.id}}if(s.reference){const a=$e(Oe(Q,"userTransactions"),Me("userId","==",t),Me("reference","==",s.reference)),l=await Ke(a);if(!l.empty){const c=l.docs[0];return await In(Pe(Q,"userTransactions",c.id),{...s,uploadedAt:Fe()}),c.id}}}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Js(Oe(Q,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Fe(),uploadedAt:Fe()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Pe(Q,"userTransactions",e),a=await Xt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Vn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=$e(Oe(Q,"userTransactions"),Me("userId","==",t)),r=await Ke(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[$e(Oe(Q,"userTransactions"),Me("merchantUserId","==",t)),$e(Oe(Q,"userTransactions"),Me("createdBy","==",t))];for(const o of i)try{const l=(await Ke(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Vn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Pe(Q,"transactions",e);if((await Xt(a)).exists())console.log("     transactions   "),await Vn(a);else{const c=$e(Oe(Q,"transactions"),Me("transactionId","==",e)),d=await Ke(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Vn(m.ref))));const h=$e(Oe(Q,"transactions"),Me("originalTransactionId","==",e)),f=await Ke(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Vn(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},s_={async getToday(t){const e=Pe(Q,"dailyStats",t,"today","data"),n=await Xt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Pe(Q,"dailyStats",t,"today","data");await cn(n,{...al(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Pe(Q,"dailyStats",t,"history",e);await cn(r,al(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},nH={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Fe()};return(await Js(Oe(Q,"installments"),n)).id},listenByUser(t,e){const n=$e(Oe(Q,"installments"),Me("userId","==",t));return Oi(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await In(Pe(Q,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Vn(Pe(Q,"installments",t)),!0}},Mu=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:nH,auditLogService:tH,dailyReportsArchiveService:$O,dailyStatsService:s_,merchantWalletService:vo,profileService:sm,profileServiceExtra:UO,recordAutoTransaction:Xq,referralService:r_,sanitizeFirestoreData:al,systemSettingsService:jO,telegramNotifier:eH,transactionService:GE,userDataService:Br},Symbol.toStringTag,{value:"Module"}));var wa=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(wa||{});const rH=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Sf=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},sH=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},zG=async(t,e,n,r)=>{try{const s=new Date,i=rH(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Pe(Q,"users",t);if(await In(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},MA=async t=>{try{const e=Pe(Q,"users",t);await In(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},iH=async t=>{try{const e=Pe(Q,"users",t),n=await Xt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},WG=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},qG=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=sH(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},HG=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var $c;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})($c||($c={}));class Qy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const oH=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},aH=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:oH(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const S=s(),p=a(h);let v;const w=async()=>(!v&&S in f?v=typeof f[S]=="function"?v=await f[S]():v=f[S]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),y=(b,A)=>{var P,N;if(p){const O=p==null?void 0:p.methods.find(C=>A===C.name);if(O)return O.rtype==="promise"?C=>n.nativePromise(h,A.toString(),C):(C,$)=>n.nativeCallback(h,A.toString(),C,$);if(b)return(P=b[A])===null||P===void 0?void 0:P.bind(b)}else{if(b)return(N=b[A])===null||N===void 0?void 0:N.bind(b);throw new Qy(`"${h}" plugin is not implemented on ${S}`,$c.Unimplemented)}},E=b=>{let A;const P=(...N)=>{const O=w().then(C=>{const $=y(C,b);if($){const re=$(...N);return A=re==null?void 0:re.remove,re}else throw new Qy(`"${h}.${b}()" is not implemented on ${S}`,$c.Unimplemented)});return b==="addListener"&&(O.remove=async()=>A()),O};return P.toString=()=>`${b.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:b,writable:!1,configurable:!1}),P},R=E("addListener"),k=E("removeListener"),L=(b,A)=>{const P=R({eventName:b},A),N=async()=>{const C=await P;k({eventName:b,callbackId:C},A)},O=new Promise(C=>P.then(()=>C({remove:N})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},O},x=new Proxy({},{get(b,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?L:R;case"removeListener":return k;default:return E(A)}}});return r[h]=x,c.set(h,{name:h,proxy:x,platforms:new Set([...Object.keys(f),...p?[S]:[]])}),x};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Qy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},lH=t=>t.Capacitor=aH(t),_e=lH(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Dg=_e.registerPlugin;class BO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new _e.Exception(e,$c.Unimplemented)}unavailable(e="not available"){return new _e.Exception(e,$c.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const FA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),UA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class cH extends BO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=UA(s).trim(),i=UA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=FA(e.key),r=FA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Dg("CapacitorCookies",{web:()=>new cH});const uH=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),dH=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},hH=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,fH=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=dH(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class mH extends BO{async request(e){const n=fH(e,e.webFetchExtra),r=hH(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await uH(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Dg("CapacitorHttp",{web:()=>new mH});const _a=Dg("Preferences",{web:()=>ee(()=>import("./web-C9n7fXcQ.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Yy=Object.freeze(Object.defineProperty({__proto__:null,Preferences:_a},Symbol.toStringTag,{value:"Module"})),pH={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},zO=T.createContext(void 0);function ml(){const t=T.useContext(zO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const gH=({children:t})=>{var x,b;const[e,n]=T.useState(null),[r,s]=T.useState(null),[i,o]=T.useState(null),[a,l]=T.useState(!1),[c,d]=T.useState(!0),h=async A=>{var P,N,O,C,$,re,ne,fe,j,H,le,ge,J,M,Ee,De;try{const Qe=Pe(Q,"profiles",A);let Ce=!1;try{const Ge=await dO(Qe);if(Ge.exists()){const Ue=Ge.data(),Be={userId:Ge.id,shopId:Ue.shopId,role:Ue.role,fullName:Ue.fullName,phone:Ue.phone,shopName:Ue.shopName||null,approved:Ue.approved,avatarId:Ue.avatarId,bridgeLink:Ue.bridgeLink||null,bridgeDeviceId:Ue.bridgeDeviceId||null,showWithdrawNote:Ue.showWithdrawNote!==void 0?!!Ue.showWithdrawNote:!0,isReceiptNoteEnabled:Ue.isReceiptNoteEnabled!==void 0?!!Ue.isReceiptNoteEnabled:!0,smsReadingEnabled:Ue.smsReadingEnabled!==void 0?!!Ue.smsReadingEnabled:!1,smsAutoRegisterEnabled:Ue.smsAutoRegisterEnabled!==void 0?!!Ue.smsAutoRegisterEnabled:!1,createdAt:((N=(P=Ue.createdAt)==null?void 0:P.toDate)==null?void 0:N.call(P))||new Date,updatedAt:((C=(O=Ue.updatedAt)==null?void 0:O.toDate)==null?void 0:C.call(O))||new Date,trialStarted:Ue.trialStarted||!1,trialStartDate:(re=($=Ue.trialStartDate)==null?void 0:$.toDate)==null?void 0:re.call($),trialEndDate:(fe=(ne=Ue.trialEndDate)==null?void 0:ne.toDate)==null?void 0:fe.call(ne),trialExpired:Ue.trialExpired||!1};s(Be),Ce=!0,d(!1)}}catch(Ge){console.log("Cache profile not available:",(Ge==null?void 0:Ge.code)||Ge)}try{if(!Ce){const Ge=localStorage.getItem(`profile_cache_${A}`);if(Ge){const Ue=JSON.parse(Ge);s(Ue),Ce=!0,d(!1)}}}catch{}if(!Ce)for(let Ge=0;Ge<3;Ge++)try{const Ue=await Xt(Qe);if(Ue.exists()){const Be=Ue.data(),qt={userId:Ue.id,shopId:Be.shopId,role:Be.role,fullName:Be.fullName,phone:Be.phone,sim1Number:Be.sim1Number||null,sim2Number:Be.sim2Number||null,shopName:Be.shopName||null,approved:Be.approved,avatarId:Be.avatarId,bridgeLink:Be.bridgeLink||null,bridgeDeviceId:Be.bridgeDeviceId||null,showWithdrawNote:Be.showWithdrawNote!==void 0?!!Be.showWithdrawNote:!0,isReceiptNoteEnabled:Be.isReceiptNoteEnabled!==void 0?!!Be.isReceiptNoteEnabled:!0,smsReadingEnabled:Be.smsReadingEnabled!==void 0?!!Be.smsReadingEnabled:!1,smsAutoRegisterEnabled:Be.smsAutoRegisterEnabled!==void 0?!!Be.smsAutoRegisterEnabled:!1,createdAt:((H=(j=Be.createdAt)==null?void 0:j.toDate)==null?void 0:H.call(j))||new Date,updatedAt:((ge=(le=Be.updatedAt)==null?void 0:le.toDate)==null?void 0:ge.call(le))||new Date,trialStarted:Be.trialStarted||!1,trialStartDate:(M=(J=Be.trialStartDate)==null?void 0:J.toDate)==null?void 0:M.call(J),trialEndDate:(De=(Ee=Be.trialEndDate)==null?void 0:Ee.toDate)==null?void 0:De.call(Ee),trialExpired:Be.trialExpired||!1};s(qt);try{localStorage.setItem(`profile_cache_${Ue.id}`,JSON.stringify(qt))}catch{}Ce=!0,d(!1);break}}catch{}return Oi(Qe,async Ge=>{var Ue,Be,qt,Ht,Kn,Nr,yn,yr;if(Ge.exists()){const Ve=Ge.data(),lt={userId:Ge.id,shopId:Ve.shopId,role:Ve.role,fullName:Ve.fullName,phone:Ve.phone,sim1Number:Ve.sim1Number||null,sim2Number:Ve.sim2Number||null,shopName:Ve.shopName||null,approved:Ve.approved,avatarId:Ve.avatarId,bridgeLink:Ve.bridgeLink||null,bridgeDeviceId:Ve.bridgeDeviceId||null,showWithdrawNote:Ve.showWithdrawNote!==void 0?!!Ve.showWithdrawNote:!0,isReceiptNoteEnabled:Ve.isReceiptNoteEnabled!==void 0?!!Ve.isReceiptNoteEnabled:!0,smsReadingEnabled:Ve.smsReadingEnabled!==void 0?!!Ve.smsReadingEnabled:!1,smsAutoRegisterEnabled:Ve.smsAutoRegisterEnabled!==void 0?!!Ve.smsAutoRegisterEnabled:!1,createdAt:((Be=(Ue=Ve.createdAt)==null?void 0:Ue.toDate)==null?void 0:Be.call(Ue))||new Date,updatedAt:((Ht=(qt=Ve.updatedAt)==null?void 0:qt.toDate)==null?void 0:Ht.call(qt))||new Date,trialStarted:Ve.trialStarted||!1,trialStartDate:(Nr=(Kn=Ve.trialStartDate)==null?void 0:Kn.toDate)==null?void 0:Nr.call(Kn),trialEndDate:(yr=(yn=Ve.trialEndDate)==null?void 0:yn.toDate)==null?void 0:yr.call(yn),trialExpired:Ve.trialExpired||!1};s(lt);try{localStorage.setItem(`profile_cache_${Ge.id}`,JSON.stringify(lt)),lt.shopId&&localStorage.setItem("shopId",lt.shopId),localStorage.setItem(`smsReadingEnabled_${Ge.id}`,String(lt.smsReadingEnabled)),localStorage.setItem(`smsAutoRegisterEnabled_${Ge.id}`,String(lt.smsAutoRegisterEnabled))}catch{}Ce||(Ce=!0,d(!1))}else if(!Ce)try{const Ve=await UO.getByUserId(A);if(Ve){const lt={userId:A,shopId:Ve.shopId,role:Ve.role||"user",fullName:Ve.fullName||null,phone:Ve.phone||null,shopName:Ve.shopName||null,approved:Ve.approved??!1,avatarId:Ve.avatarId||void 0,bridgeLink:Ve.bridgeLink||null,bridgeDeviceId:Ve.bridgeDeviceId||null,createdAt:Fe(),updatedAt:Fe()};await cn(Pe(Q,"profiles",A),lt,{merge:!0}),s({...Ve,userId:A,createdAt:Ve.createdAt||new Date,updatedAt:Ve.updatedAt||new Date})}else await m(A)}catch(Ve){console.error("Profile migration/create error:",Ve)}finally{Ce=!0,d(!1)}},Ge=>{console.error("Profile listener error:",Ge);try{d(!1)}catch{}})}catch(Qe){return console.error("Error setting up profile listener:",Qe),await m(A),d(!1),()=>{}}},f=async A=>{try{const P=Pe(Q,"users",A.uid);(await Xt(P)).exists()?(await In(P,{lastLogin:Fe(),updatedAt:Fe()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",A.uid)):(await cn(P,{email:A.email||"",displayName:A.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Fe(),updatedAt:Fe(),lastLogin:Fe()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",A.uid))}catch(P){console.error(" ensureAdminUserDoc error:",P)}},m=async(A,P,N,O,C)=>{var $,re;try{console.log("Creating default profile for user:",A);const ne=r_.generateReferralCode(A);let fe=null;const j={userId:A,shopId:"default-shop",role:"user",fullName:P||" ",phone:N||null,shopName:O||null,approved:!1,referralCode:ne,referredBy:C||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(j),console.log("Created temporary profile:",j);try{const{doc:H,setDoc:le,serverTimestamp:ge}=await ee(async()=>{const{doc:De,setDoc:Qe,serverTimestamp:Ce}=await Promise.resolve().then(()=>Nn);return{doc:De,setDoc:Qe,serverTimestamp:Ce}},void 0,import.meta.url),{db:J}=await ee(async()=>{const{db:De}=await Promise.resolve().then(()=>Yt);return{db:De}},void 0,import.meta.url),M={email:(($=kt.currentUser)==null?void 0:$.email)||"",displayName:P||" ",phone:N||null,shopName:O||null,isActive:!1,referralCode:ne,referredBy:C||null,createdAt:ge(),lastLogin:null,updatedAt:ge()};if(console.log("Attempting to add user to admin collection with data:",M),await le(H(J,"users",A),M,{merge:!0}),console.log(" User successfully added to admin collection:",M),C)try{const{query:De,collection:Qe,where:Ce,limit:Rt,getDocs:Ge}=await ee(async()=>{const{query:Ht,collection:Kn,where:Nr,limit:yn,getDocs:yr}=await Promise.resolve().then(()=>Nn);return{query:Ht,collection:Kn,where:Nr,limit:yn,getDocs:yr}},void 0,import.meta.url),{db:Ue}=await ee(async()=>{const{db:Ht}=await Promise.resolve().then(()=>Yt);return{db:Ht}},void 0,import.meta.url),Be=De(Qe(Ue,"users"),Ce("referralCode","==",C),Rt(1)),qt=await Ge(Be);qt.empty?console.log(" Referral code not found in users collection:",C):(fe=qt.docs[0].id,await r_.create({referrerId:fe,referredUserId:A,referredUserEmail:((re=kt.currentUser)==null?void 0:re.email)||"",referralCode:C,status:"completed"}),console.log(" Referral record created successfully for referrer:",fe))}catch(De){console.error(" Error creating referral record:",De)}const Ee=await Xt(H(J,"users",A));Ee.exists()?console.log(" User document verified in Firestore:",Ee.data()):console.log(" User document not found after creation")}catch(H){console.error(" Error adding user to admin collection:",H)}try{const{addDoc:H,collection:le,serverTimestamp:ge}=await ee(async()=>{const{addDoc:Qe,collection:Ce,serverTimestamp:Rt}=await Promise.resolve().then(()=>Nn);return{addDoc:Qe,collection:Ce,serverTimestamp:Rt}},void 0,import.meta.url),{db:J}=await ee(async()=>{const{db:Qe}=await Promise.resolve().then(()=>Yt);return{db:Qe}},void 0,import.meta.url),Ee=(await H(le(J,"shops"),{name:O||" ",ownerId:A,createdAt:ge(),updatedAt:ge(),isActive:!0})).id;await sm.create({userId:A,shopId:Ee,role:"user",fullName:" ",phone:null});try{await sm.update(A,{referralCode:ne,referredBy:fe||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(Qe){console.warn(" Failed to update profile with referral fields:",Qe)}const De=await sm.getById(A);De&&(s(De),console.log("Updated with Firebase profile:",De))}catch(H){console.error("Error creating profile:",H),console.log("Using local profile - Firebase unavailable")}}catch(ne){console.error("Error creating default profile:",ne)}};T.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const A=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const P=localStorage.getItem("demoUser"),N=localStorage.getItem("demoProfile");if(P&&N){console.log(" Found demo user in localStorage");try{const C=JSON.parse(P),$=JSON.parse(N);n(C),s($),clearTimeout(A),d(!1);return}catch(C){console.error("Error parsing demo user data:",C),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const O=t9(kt,async C=>{if(console.log(" Auth state changed:",{uid:C==null?void 0:C.uid,email:C==null?void 0:C.email,emailVerified:C==null?void 0:C.emailVerified,timestamp:new Date().toISOString()}),n(C),C){console.log(" User authenticated, starting profile hydration for:",C.uid);try{await _a.set({key:"current_user_id",value:C.uid}),console.log(" Synced current_user_id to Native:",C.uid)}catch($){console.error("Failed to sync user ID to native:",$)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(C.uid),y(),f(C)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await _a.remove({key:"current_user_id"}),await _a.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(A)});return()=>{clearTimeout(A),O()}},[]),T.useEffect(()=>{const A=async()=>{try{await E(),await y()}catch{}};try{window.addEventListener("app:softRefresh",A)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",A)}catch{}}},[e==null?void 0:e.uid]),T.useEffect(()=>{if(!(e!=null&&e.uid))return;const A=i==null?void 0:i.subscription,P=A==null?void 0:A.endDate,N=P!=null&&P.toDate?P.toDate():P?new Date(P):null;let O=null;const C=async()=>{try{const $=new Date;A&&A.isActive===!0&&N&&!isNaN(N.getTime())&&$>N&&(await MA(e.uid),await y())}catch{}};return C(),O=setInterval(C,36e5),()=>{try{clearInterval(O)}catch{}}},[e==null?void 0:e.uid,(x=i==null?void 0:i.subscription)==null?void 0:x.endDate,(b=i==null?void 0:i.subscription)==null?void 0:b.isActive]),T.useEffect(()=>{if(!(e!=null&&e.uid))return;const A=Br.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{A==null||A()}catch{}}},[e==null?void 0:e.uid]);const S=async(A,P,N,O,C,$)=>{try{const re=(A||"").trim().toLowerCase(),ne=(P||"").trim();console.log(" Attempting to sign up user:",re);const fe=await JT(kt,re,ne);console.log(" Sign up successful:",fe.user.uid),await m(fe.user.uid,N,O,C,$),await f(fe.user);try{await h(fe.user.uid),await y()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(re){console.error(" Sign up error:",re);let ne="    ";return re.code==="auth/email-already-in-use"?ne="    ":re.code==="auth/weak-password"?ne="   ":re.code==="auth/invalid-email"&&(ne="   "),{error:{...re,message:ne}}}},p=async(A,P)=>{var C;const N=(A||"").trim().toLowerCase(),O=(P||"").trim();try{const $=ge=>ge.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),re=ge=>ge.replace(/[-]/g,J=>String("0123456789"["".indexOf(J)])).replace(/[-]/g,J=>String("0123456789"["".indexOf(J)])),ne=ge=>ge.replace(/[0-9]/g,J=>""[Number(J)]),fe=ge=>re($(ge));if(console.log(" Attempting to sign in user:",N),N==="test@example.com"&&O==="123456"){console.log(" Demo user login detected");const ge={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},J={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(ge)),localStorage.setItem("demoProfile",JSON.stringify(J)),n(ge),s(J),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let j;const H=[fe(O),$(O),ne($(O))];let le=null;for(const ge of H)try{ge!==O&&console.log(" Trying password variant"),j=await YB(kt,N,ge);break}catch(J){if(le=J,(J==null?void 0:J.code)!=="auth/wrong-password"&&(J==null?void 0:J.code)!=="auth/invalid-credential")throw J}if(!j)throw le||new Error("auth/invalid-credential");console.log(" Sign in successful:",j.user.uid);try{if((await Xt(Pe(Q,"deletedUsers",j.user.uid))).exists())return console.log(" User is deleted, signing out"),await XT(kt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(ge){console.error("Error checking deleted users:",ge)}await f(j.user);try{await h(j.user.uid),await y()}catch{}return{error:null}}catch($){if(console.error(" Sign in error:",$),N==="test@example.com"&&$.code==="auth/user-not-found"){console.log(" Creating test user...");try{const fe=await JT(kt,N,O);return console.log(" Test user created:",fe.user.uid),await m(fe.user.uid," ","01000000000"," "),{error:null}}catch(fe){return console.error(" Error creating test user:",fe),{error:fe}}}let re="    ",ne=$==null?void 0:$.code;if(ne==="auth/invalid-credential")try{const fe=await XB(kt,((C=$==null?void 0:$.customData)==null?void 0:C.email)||"");Array.isArray(fe)&&fe.length===0?(ne="auth/user-not-found",re="     "):(ne="auth/wrong-password",re="   ")}catch{re="      "}else ne==="auth/invalid-email"?re="    ":ne==="auth/user-not-found"?re="     ":ne==="auth/wrong-password"?re="   ":ne==="auth/too-many-requests"&&(re="      ");return{error:{...$,code:ne,message:re}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await XT(kt);try{await _a.remove({key:"selected_wallet_id"}),await _a.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const N=(()=>{try{const O=typeof window<"u"?window:null,C=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),$=typeof window<"u"&&window.location.protocol==="file:",re=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return C||$||re||typeof import.meta<"u"&&pH&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(N)}catch{window.location.href=N}}catch(A){console.error("Sign out error:",A)}},w=async A=>{try{return await QB(kt,A),{error:null}}catch(P){console.error("Reset password error:",P);let N="        ";return P.code==="auth/user-not-found"?N="     ":P.code==="auth/invalid-email"&&(N="   "),{error:{...P,message:N}}}},y=async()=>{var A,P;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{const N=Pe(Q,"users",e.uid);try{const C=await Xt(N);if(C.exists()){const $=C.data();o($);const re=((A=$==null?void 0:$.branchPackage)==null?void 0:A.status)==="active";let ne=!1;re?ne=!0:ne=Sf($.subscription),l(ne)}}catch{}return Oi(N,async C=>{var $,re,ne,fe,j,H,le,ge;if(C.exists()){const J=C.data();o(J),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:J.subscription,subscriptionExists:!!J.subscription,planType:($=J.subscription)==null?void 0:$.planType,isActive:(re=J.subscription)==null?void 0:re.isActive,startDate:(ne=J.subscription)==null?void 0:ne.startDate,endDate:(fe=J.subscription)==null?void 0:fe.endDate,activatedBy:(j=J.subscription)==null?void 0:j.activatedBy,activatedAt:(H=J.subscription)==null?void 0:H.activatedAt,isOnFreeTrial:J.isOnFreeTrial,freeTrialEndDate:J.freeTrialEndDate,branchPackageStatus:(le=J==null?void 0:J.branchPackage)==null?void 0:le.status});const M=((ge=J==null?void 0:J.branchPackage)==null?void 0:ge.status)==="active";let Ee=!1;M?(console.log(" Branch package is active, granting access"),Ee=!0):Ee=Sf(J.subscription),l(Ee),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:Ee,isOnFreeTrial:J.isOnFreeTrial,hasActiveBranchPackage:M,reason:M?"Branch package active":J.subscription?J.subscription.isActive?J.subscription.planType==="lifetime"?"Lifetime plan":J.subscription.endDate?new Date>new Date(J.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const De=J.subscription,Qe=De==null?void 0:De.planType,Ce=De==null?void 0:De.endDate,Rt=Ce!=null&&Ce.toDate?Ce.toDate():Ce?new Date(Ce):null,Ge=new Date;De&&De.isActive===!0&&Rt&&!isNaN(Rt.getTime())&&Ge>Rt&&(await MA(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:Qe,endDate:Rt}))}catch(De){console.warn("Failed to auto-deactivate expired subscription:",De)}}},C=>{console.error(" Subscription listener error:",C),(async()=>{var $;try{const re=await Xt(N);if(re.exists()){const ne=re.data();o(ne);const fe=(($=ne==null?void 0:ne.branchPackage)==null?void 0:$.status)==="active";let j=!1;fe?j=!0:j=Sf(ne.subscription),l(j)}}catch{}})()})}catch(N){console.error("Error setting up subscription listener:",N);try{const O=await Xt(Pe(Q,"users",e.uid));if(O.exists()){const C=O.data();o(C);const $=((P=C==null?void 0:C.branchPackage)==null?void 0:P.status)==="active";let re=!1;$?re=!0:re=Sf(C.subscription),l(re)}}catch{}}},E=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await y()}catch(A){console.error("Error refreshing profile:",A)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:S,signIn:p,signOut:v,resetPassword:w,updateUserProfile:async A=>{if(e)try{const P={updatedAt:Fe()};if(A.fullName!==void 0&&(P.fullName=A.fullName),A.phone!==void 0&&(P.phone=A.phone),A.sim1Number!==void 0){const N=(A.sim1Number||"").trim();P.sim1Number=N.length?N:null}if(A.sim2Number!==void 0){const N=(A.sim2Number||"").trim();P.sim2Number=N.length?N:null}if(A.bridgeLink!==void 0){const N=(A.bridgeLink||"").trim();P.bridgeLink=N.length?N:null}if(A.bridgeDeviceId!==void 0){const N=(A.bridgeDeviceId||"").trim();P.bridgeDeviceId=N.length?N:null}A.showWithdrawNote!==void 0&&(P.showWithdrawNote=!!A.showWithdrawNote),A.isReceiptNoteEnabled!==void 0&&(P.isReceiptNoteEnabled=!!A.isReceiptNoteEnabled),A.smsReadingEnabled!==void 0&&(P.smsReadingEnabled=!!A.smsReadingEnabled),A.smsAutoRegisterEnabled!==void 0&&(P.smsAutoRegisterEnabled=!!A.smsAutoRegisterEnabled),await In(Pe(Q,"profiles",e.uid),P),await h(e.uid)}catch(P){console.error("Error updating user profile:",P)}},updateAvatarId:async A=>{if(e)try{await In(Pe(Q,"profiles",e.uid),{avatarId:A,updatedAt:Fe()}),await h(e.uid)}catch(P){console.error("Error updating avatarId:",P)}},refreshProfile:E,checkSubscriptionStatus:y};return _.jsx(zO.Provider,{value:L,children:t})};function yH(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Og="Checkbox",[vH]=qc(Og),[wH,QE]=vH(Og);function _H(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,m]=l0({prop:n,defaultProp:s??!1,onChange:l,caller:Og}),[S,p]=T.useState(null),[v,w]=T.useState(null),y=T.useRef(!1),E=S?!!o||!!S.closest("form"):!0,R={checked:f,disabled:i,setChecked:m,control:S,setControl:p,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:Oo(s)?!1:s,isFormControl:E,bubbleInput:v,setBubbleInput:w};return _.jsx(wH,{scope:e,...R,children:EH(h)?h(R):r})}var WO="CheckboxTrigger",qO=T.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:S}=QE(WO,t),p=Wn(s,d),v=T.useRef(l);return T.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const y=()=>h(v.current);return w.addEventListener("reset",y),()=>w.removeEventListener("reset",y)}},[i,h]),_.jsx(tn.button,{type:"button",role:"checkbox","aria-checked":Oo(l)?"mixed":l,"aria-required":c,"data-state":YO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:p,onKeyDown:Nt(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Nt(n,w=>{h(y=>Oo(y)?!0:!y),S&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});qO.displayName=WO;var YE=T.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return _.jsx(_H,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>_.jsxs(_.Fragment,{children:[_.jsx(qO,{...h,ref:e,__scopeCheckbox:n}),f&&_.jsx(QO,{__scopeCheckbox:n})]})})});YE.displayName=Og;var HO="CheckboxIndicator",KO=T.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=QE(HO,n);return _.jsx(dl,{present:r||Oo(i.checked)||i.checked===!0,children:_.jsx(tn.span,{"data-state":YO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});KO.displayName=HO;var GO="CheckboxBubbleInput",QO=T.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:m}=QE(GO,t),S=Wn(n,m),p=yH(i),v=oC(r);T.useEffect(()=>{const y=f;if(!y)return;const E=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(E,"checked").set,L=!s.current;if(p!==i&&k){const x=new Event("click",{bubbles:L});y.indeterminate=Oo(i),k.call(y,Oo(i)?!1:i),y.dispatchEvent(x)}},[f,p,i,s]);const w=T.useRef(Oo(i)?!1:i);return _.jsx(tn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:S,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});QO.displayName=GO;function EH(t){return typeof t=="function"}function Oo(t){return t==="indeterminate"}function YO(t){return Oo(t)?"indeterminate":t?"checked":"unchecked"}const JO=T.forwardRef(({className:t,...e},n)=>_.jsx(YE,{ref:n,className:qn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:_.jsx(KO,{className:qn("flex items-center justify-center text-current"),children:_.jsx(UF,{className:"h-4 w-4"})})}));JO.displayName=YE.displayName;const Sp=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,i]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(typeof navigator<"u"?!navigator.onLine:!1);T.useEffect(()=>{const R=()=>c(!navigator.onLine);return window.addEventListener("online",R),window.addEventListener("offline",R),()=>{window.removeEventListener("online",R),window.removeEventListener("offline",R)}},[]);const[d,h]=T.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:S,loading:p}=ml(),v=Yc();T.useEffect(()=>{try{m&&!p&&v("/user/dashboard")}catch{}},[m,p,v]),T.useEffect(()=>{try{const R=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;R&&e(R)}catch{}try{const R=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;R==="true"?h(!0):R==="false"&&h(!1)}catch{}(async()=>{var R,k;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const L=await((k=(R=navigator.credentials).get)==null?void 0:k.call(R,{password:!0,mediation:"optional"}));L&&L.type==="password"&&(L.id&&e(L.id),L.password&&r(L.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const L=sessionStorage.getItem("cashy:rememberedPassword");L&&!n&&r(L)}catch{}}catch{}})()},[]);const w=async R=>{if(R.preventDefault(),o){Jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Jn.error("   .      .");return}const k=(t||"").trim().toLowerCase(),L=(n||"").trim();if(console.log("    :",{email:k,password:"***"}),!t||!n){Jn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(k)){Jn.error("    ");return}a(!0);try{try{await e9(kt,d?xk:s9);try{window.localStorage.setItem("cashy:rememberLogin",d?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:x}=await f(k,L);if(console.log(" SignIn result:",{error:x}),x){console.error("    :",x);const b=x==null?void 0:x.code;b==="auth/user-not-found"?Jn.error("     "):b==="auth/wrong-password"?Jn.error("   "):b==="auth/invalid-credential"?Jn.error("      "):b==="auth/too-many-requests"?Jn.error("      "):Jn.error((x==null?void 0:x.message)||"    ")}else{console.log("    !"),Jn.success("   !");try{if(d&&navigator.credentials&&window.PasswordCredential){const b=new window.PasswordCredential({id:k,name:k,password:L});await navigator.credentials.store(b)}if(d)try{sessionStorage.setItem("cashy:rememberedPassword",L)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(x){console.error("   :",x),Jn.error("   ")}finally{a(!1)}},y=R=>{if(o){R.preventDefault(),R.stopPropagation(),Jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){R.preventDefault(),R.stopPropagation(),Jn.error("   .      .");return}t||Jn.error("   "),n||Jn.error("   ");const k=(t||"").trim().toLowerCase();k&&!/^\S+@\S+\.\S+$/.test(k)&&Jn.error("    ")},E=()=>{v("/user/forgot-password")};return T.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const R=document.documentElement,k=document.body,L=R.style.overflow,x=k.style.overflow,b=R.style.overscrollBehaviorY,A=k.style.overscrollBehaviorY;return R.style.overflow="hidden",k.style.overflow="hidden",R.style.overscrollBehaviorY="none",k.style.overscrollBehaviorY="none",()=>{R.style.overflow=L||"",k.style.overflow=x||"",R.style.overscrollBehaviorY=b||"",k.style.overscrollBehaviorY=A||""}},[]),_.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&_.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:_.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),_.jsx("div",{className:"absolute inset-0 bg-black/40"}),_.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:_.jsx(vU,{className:"w-10 h-10 text-white"})}),_.jsx("div",{className:"flex items-center justify-center mb-2",children:_.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),_.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),_.jsx("p",{className:"text-white/80",children:"    "})]}),_.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[_.jsxs("form",{onSubmit:w,className:"space-y-6",autoComplete:"on",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),_.jsxs("div",{className:"relative",children:[_.jsx(KS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),_.jsx(yw,{id:"username",type:"email",placeholder:"  ",value:t,onChange:R=>{const k=R.target.value;e(k);try{window.localStorage.setItem("cashy:lastEmail",k)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),_.jsxs("div",{className:"relative",children:[_.jsx(ZF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),_.jsx(yw,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:R=>r(R.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),_.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?_.jsx(qF,{className:"w-5 h-5"}):_.jsx(KF,{className:"w-5 h-5"})})]}),_.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[_.jsx(JO,{id:"rememberLogin",checked:d,onCheckedChange:R=>h(!!R)}),_.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),_.jsx("div",{className:"flex justify-end",children:_.jsxs(ts,{type:"button",variant:"ghost",size:"sm",onClick:E,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[_.jsx(KS,{className:"w-4 h-4 ml-1"}),"  "]})}),_.jsx("button",{type:"submit",onClick:y,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?_.jsxs("div",{className:"flex items-center justify-center",children:[_.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):_.jsxs("div",{className:"flex items-center justify-center",children:[_.jsx(DF,{className:"w-5 h-5 ml-2"})," "]})})]}),_.jsxs("div",{className:"mt-6 text-center space-y-3",children:[_.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",_.jsx(h$,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),_.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",_.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",_.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),_.jsx("div",{className:"mt-6 text-center",children:_.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},IH=Object.freeze(Object.defineProperty({__proto__:null,default:Sp},Symbol.toStringTag,{value:"Module"})),SH=()=>{const t=Yc(),e=ri(),{signOut:n,user:r,userSubscription:s}=ml(),{toast:i}=o0(),[o,a]=T.useState(!1),[l,c]=T.useState(!1),d=[{id:"home",label:"",icon:JF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:QF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:LF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:GS,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:kF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:wy,path:"/transactions"},{id:"settings",label:"",icon:QS,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:MF,action:()=>{var w;a(!1);const v=(w=s==null?void 0:s.subscription)==null?void 0:w.planType;if(v===wa.TAHWEELA||v===wa.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:_U,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:zF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:pU,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:wy,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:LP,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:GS,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:$F,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:rU,action:()=>{a(!1);const w=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(w);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:HS,action:async()=>{a(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],m=[{id:"shop-expenses-settings",label:" ",icon:wy,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:QS,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:HS,action:async()=>{c(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],S=(v,w,y,E)=>{var b;const k=((b=s==null?void 0:s.subscription)==null?void 0:b.planType)===wa.TAHWEELA,L=A=>["/user/dashboard","/profile-settings"].includes(A),x=A=>A==="debts";if(y){if(k&&!x(E)&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}y()}else if(w&&v==="/add"){if(k){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!w){if(k&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}t(v)}},p=v=>e.pathname===v;return _.jsxs("div",{className:"mobile-bottom-nav",children:[o&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),_.jsx("div",{className:"quick-actions-bottomsheet",children:_.jsx("div",{className:"quick-actions-grid",children:f.map((v,w)=>_.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var E;if(((E=s==null?void 0:s.subscription)==null?void 0:E.planType)===wa.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":`${w*.06}s`},children:[_.jsx("div",{className:"quick-action-icon",children:_.jsx(v.icon,{className:"action-icon"})}),_.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),l&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),_.jsx("div",{className:"quick-actions-bottomsheet",children:_.jsx("div",{className:"quick-actions-grid",children:m.map((v,w)=>_.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var R;const y=(R=s==null?void 0:s.subscription)==null?void 0:R.planType,E=new Set(["logout","profile-settings"]);if(y===wa.TAHWEELA&&!E.has(v.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":`${w*.06}s`},children:[_.jsx("div",{className:"quick-action-icon",children:_.jsx(v.icon,{className:"action-icon"})}),_.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),_.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(v=>{const w=v.icon,y=p(v.path);return _.jsxs("button",{onClick:()=>S(v.path,v.isSpecial,v.action,v.id),className:`mobile-nav-item ${y?"active":""} ${v.isSpecial?"special":""}`,type:"button","aria-label":v.label,children:[_.jsx("div",{className:`nav-icon-container ${v.isSpecial?"special-icon":""} ${v.isSpecial&&v.id==="add"&&o?"special-open":""}`,children:_.jsx(w,{className:`nav-icon ${y?"active-icon":""} ${v.isSpecial?"special-icon-svg":""} ${v.isSpecial&&v.id==="settings"&&l?"rotated":""}`})}),!v.isSpecial&&_.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:v.label})]},v.id)})})]})};var Dx,Ox;const Ra=(Ox=(Dx=import.meta)==null?void 0:Dx.env)==null?void 0:Ox.VITE_ANDROID_DOWNLOAD_URL;var Lx,Vx;const Pa=(Vx=(Lx=import.meta)==null?void 0:Lx.env)==null?void 0:Vx.VITE_PC_DOWNLOAD_URL;var Mx,Fx;const Ca=(Fx=(Mx=import.meta)==null?void 0:Mx.env)==null?void 0:Fx.VITE_PC32_DOWNLOAD_URL;var Ux,jx;const ka=(jx=(Ux=import.meta)==null?void 0:Ux.env)==null?void 0:jx.VITE_ANDROID_VERSION;var $x,Bx;const Na=(Bx=($x=import.meta)==null?void 0:$x.env)==null?void 0:Bx.VITE_PC_VERSION;var zx,Wx;const Da=(Wx=(zx=import.meta)==null?void 0:zx.env)==null?void 0:Wx.VITE_PC32_VERSION;function fn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function TH(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Ho=["siteContent","appDownloads"],Tp=["siteContent","desktop_updates"],bp=["siteContent","android_updates"],oh="appDownloadsCache";function bH(){try{const e=localStorage.getItem(oh);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||Ra,pcUrl:(n==null?void 0:n.pcUrl)||Pa,pc32Url:(n==null?void 0:n.pc32Url)||Ca,androidVersion:(n==null?void 0:n.androidVersion)||ka,pcVersion:(n==null?void 0:n.pcVersion)||Na,pc32Version:(n==null?void 0:n.pc32Version)||Da,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=fn(r.pcUrl)),r.androidVersion||(r.androidVersion=fn(r.androidUrl)),r.pc32Version||(r.pc32Version=fn(r.pc32Url)),r}}catch{}const t={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:ka,pcVersion:Na,pc32Version:Da};return t.pcVersion||(t.pcVersion=fn(t.pcUrl)),t.androidVersion||(t.androidVersion=fn(t.androidUrl)),t.pc32Version||(t.pc32Version=fn(t.pc32Url)),t}async function AH(){try{const t=await Xt(Pe(Q,Ho[0],Ho[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(oh,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||Ra,pcUrl:(n==null?void 0:n.pcUrl)||Pa,pc32Url:(n==null?void 0:n.pc32Url)||Ca,androidVersion:(n==null?void 0:n.androidVersion)||ka,pcVersion:(n==null?void 0:n.pcVersion)||Na,pc32Version:(n==null?void 0:n.pc32Version)||Da,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=fn(r.pcUrl)),r.androidVersion||(r.androidVersion=fn(r.androidUrl)),r.pc32Version||(r.pc32Version=fn(r.pc32Url)),r}const e={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:ka,pcVersion:Na,pc32Version:Da};return e.pcVersion||(e.pcVersion=fn(e.pcUrl)),e.androidVersion||(e.androidVersion=fn(e.androidUrl)),e.pc32Version||(e.pc32Version=fn(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(oh);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||Ra,pcUrl:(i==null?void 0:i.pcUrl)||Pa,pc32Url:(i==null?void 0:i.pc32Url)||Ca,androidVersion:(i==null?void 0:i.androidVersion)||ka,pcVersion:(i==null?void 0:i.pcVersion)||Na,pc32Version:(i==null?void 0:i.pc32Version)||Da,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=fn(o.pcUrl)),o.androidVersion||(o.androidVersion=fn(o.androidUrl)),o.pc32Version||(o.pc32Version=fn(o.pc32Url)),o}}catch{}const r={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:ka,pcVersion:Na,pc32Version:Da};return r.pcVersion||(r.pcVersion=fn(r.pcUrl)),r.androidVersion||(r.androidVersion=fn(r.androidUrl)),r.pc32Version||(r.pc32Version=fn(r.pc32Url)),r}}function xH(t){try{const e=Pe(Q,Ho[0],Ho[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||Ra,pcUrl:(s==null?void 0:s.pcUrl)||Pa,pc32Url:(s==null?void 0:s.pc32Url)||Ca,androidVersion:(s==null?void 0:s.androidVersion)||ka,pcVersion:(s==null?void 0:s.pcVersion)||Na,pc32Version:(s==null?void 0:s.pc32Version)||Da,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=fn(i.pcUrl)),i.androidVersion||(i.androidVersion=fn(i.androidUrl)),i.pc32Version||(i.pc32Version=fn(i.pc32Url));try{localStorage.setItem(oh,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(oh);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function RH(t,e,n,r,s,i=12e4){const o=MO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=$q(o,l);return new Promise((d,h)=>{const f=Uq(c,t);let m=!1;const S=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",p=>{const v=Math.round(p.bytesTransferred/p.totalBytes*100);s&&s(v)},p=>{clearTimeout(S),h(p)},async()=>{try{if(clearTimeout(S),m)return;const p=await jq(c),v={updatedAt:Fe(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=p,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=p,r&&(v.pcVersion=r)):(v.pc32Url=p,r&&(v.pc32Version=r));const w=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=cn(Pe(Q,Ho[0],Ho[1]),v,{merge:!0});let E=!1;const R=new Promise(k=>setTimeout(()=>{E=!0,k()},w));try{await Promise.race([y,R])}catch(k){console.warn(" Firestore write error, proceeding with URL only:",k)}E&&console.warn(" Firestore update timed out;             ."),d(p)}catch(p){h(p)}})})}async function PH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Fe(),updatedBy:e||"admin"};await cn(Pe(Q,Ho[0],Ho[1]),r,{merge:!0})}async function CH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Fe(),updatedBy:e||"admin"};await cn(Pe(Q,Tp[0],Tp[1]),r,{merge:!0})}function XO(t){try{const e=Pe(Q,Tp[0],Tp[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function ZO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function kH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Fe(),updatedBy:e||"admin"};await cn(Pe(Q,bp[0],bp[1]),r,{merge:!0})}function NH(t){try{const e=Pe(Q,bp[0],bp[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const DH=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:AH,getCachedOrEnvAppDownloads:bH,listenAndroidUpdates:NH,listenAppDownloads:xH,listenDesktopUpdates:XO,resolveDownloadUrl:TH,selectDesktopUrl:ZO,setAndroidUpdateInfo:kH,setAppDownloadLinks:PH,setDesktopUpdateInfo:CH,uploadAppBinaryResumable:RH},Symbol.toStringTag,{value:"Module"})),OH=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=U.useState(!1),[s,i]=U.useState(!1),[o,a]=U.useState(!1),[l,c]=U.useState(0),[d,h]=U.useState(""),[f,m]=U.useState(!1),S=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(k){console.warn("failed to minimize",k)}},p=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(k){console.warn("failed to close",k)}},v=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(k){console.warn("failed to soft refresh",k),m(!1)}}};if(U.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(k=>{const L=(k==null?void 0:k.percent)==null?0:Number(k.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(k){console.warn("update init failed",k)}},[e,t]),U.useEffect(()=>{const k=XO(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const b=ZO({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(b)}});return()=>{try{k()}catch{}}},[]),!e)return null;const[y,E]=U.useState(!1),R=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),E(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),E(!0))}catch(k){console.warn("window toggle failed",k)}};return _.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[_.jsx("button",{type:"button","aria-label":"",title:"",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:_.jsx(f0,{className:"w-5 h-5"})}),_.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:_.jsx(h0,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),_.jsx("button",{type:"button","aria-label":"",title:"",onClick:S,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:_.jsx(iU,{className:"w-5 h-5"})}),_.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:R,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:_.jsx(fU,{className:"w-5 h-5"})})]})},i_=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=T.useState(`${n}logo.svg`),[i,o]=T.useState(0),a=T.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return _.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:_.jsxs("div",{className:"flex flex-col items-center justify-center",children:[_.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),_.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},jA=Dg("AppLauncher",{web:()=>ee(()=>import("./web-DlnDr3W3.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function LH(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{_e&&_e.getPlatform()!=="web"&&(jA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{_e&&_e.getPlatform()!=="web"&&jA.openUrl({url:n})}catch{}}}function e2(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function VH(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?e2(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function KG(t,e,n){const r=e2(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function MH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function FH(t){const e=MH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function GG(t,e,n){const r=VH(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=FH(t||e);LH(r,s)}async function UH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function JE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function jH(t,e,n=0){const r=JE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const Oa=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:JE,calculateProfit:jH},Symbol.toStringTag,{value:"Module"})),$H=t=>t==="withdraw"||t==="receive"?"receive":"send",BH=async t=>{if(!t)return null;const e=$e(Oe(Q,"transactions"),Me("reference","==",t),uu(1)),n=await Ke(e);return n.empty?null:n.docs[0].id},zH=async t=>{var e;try{const n=await _a.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return KH(t||((e=kt.currentUser)==null?void 0:e.uid)||"")||null},Jy=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await vo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},t2=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await BH(t.reference);if(e)return{id:e,duplicate:!0};const n=$H(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Jy(t.receiverMsisdn);if(o||(o=await Jy(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Jy(a))}r=o||await zH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await GE.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await UH(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=JE(t.amount,n);await Br.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},im=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},o_=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=kt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(p=>im(p)).filter(p=>!!p):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=p=>String(p||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:im(String((p==null?void 0:p.phone)||(p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn):[],d=new Map;for(const p of s){const v=l(p);for(const w of c){const y=l(w.msisdn);if(w.msisdn===p){d.set(w.walletId,w.msisdn);continue}if(y.slice(-5)===v.slice(-5)){d.set(w.walletId,w.msisdn);continue}}}if(d.size===1){const[p,v]=Array.from(d.entries())[0];return{walletId:p,msisdn:v}}const f=(await vo.getByMerchantId(r)||[]).map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:im(String((p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn),m=[...c,...f],S=new Map;for(const p of s){const v=l(p);for(const w of m){const y=l(w.msisdn);if(w.msisdn===p){S.set(w.walletId,w.msisdn);continue}if(y.slice(-5)===v.slice(-5)){S.set(w.walletId,w.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",S.size)}catch{}if(S.size===1){const[p,v]=Array.from(S.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:p,msisdn:v})}catch{}return{walletId:p,msisdn:v}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function WH(t,e){try{const n=i=>im(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function qH(t){var e;try{const n=t.userId||((e=kt.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await o_(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");if(a&&o[a]&&o[a].walletId)return{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")};if(l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId)return{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")};if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";if(t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||""),c){const d=await o_([c],n);if(d)return d}}return null}catch{return null}}function HH(t){var e;try{const r=`simWalletBindings_${t.userId||((e=kt.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const KH=t=>{var e,n;try{const r=t||((e=kt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function n2(){return typeof window>"u"?()=>{}:()=>{}}const Ea=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:HH,detectWalletFromSim:WH,identifyWalletBySim:o_,initMobileSmsBridge:n2,processMobileTransactionNotification:t2,resolveWalletBySimOrSlot:qH},Symbol.toStringTag,{value:"Module"})),GH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},QH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},YH=()=>{var t,e;try{const n=((t=kt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},JH=()=>{var t;try{const e=((t=kt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Xy=async(t,e)=>{var E;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=GH(n),d=QH(n);if(!c||c<=0)return;const h=((E=kt.currentUser)==null?void 0:E.uid)||"",f=YH()||void 0,m=JH()||"",S=f||"default-line";if(!h||!f||!m)return;try{const R=await iH(h);if((R==null?void 0:R.planType)===wa.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const p=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,v=`VF-${btoa(unescape(encodeURIComponent(p))).slice(0,24)}`,w=a?"withdraw":l?"transfer":"withdraw",y={type:w,amount:c,provider:"vodafone_cash",shopId:m,lineId:S,walletId:f,senderMsisdn:w==="transfer"&&d||void 0,receiverMsisdn:w==="withdraw"&&d||void 0,reference:v,createdBy:h,merchantUserId:h,note:"  "};try{await t2(y)}catch{}},ws={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Br.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Br.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Br.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=ws.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=ws.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Br.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=ws.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=ws.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=ws.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Br.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},XH=ws,QG=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:XH,reportsService:ws},Symbol.toStringTag,{value:"Module"})),Ap={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Pe(Q,"walletLimits",t),s={updatedAt:Fe(),ownerId:(n=kt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await cn(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);try{const s=await Xt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||ft.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:ft.now()};return await cn(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Fe(),ownerId:(e=kt.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);return await cn(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Fe(),updatedAt:Fe(),ownerId:(e=kt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);return await cn(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Fe(),updatedAt:Fe(),ownerId:(e=kt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Pe(Q,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Fe()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await cn(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=Pe(Q,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:Fe()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await cn(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Pe(Q,"walletLimits",t);return await cn(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Fe(),lastMonthlyReset:Fe(),updatedAt:Fe(),ownerId:(e=kt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},a_=Object.freeze(Object.defineProperty({__proto__:null,default:Ap,walletDailyLimitsService:Ap},Symbol.toStringTag,{value:"Module"}));class ZH{constructor(){_u(this,"intervalId",null);_u(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=kt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await s_.getToday(n);await s_.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await ws.syncReportsDataFromFirebase(e);const n=ws.getReportsData(e);if(!n.lastDailyResetDate||!ws.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Br.getUserTransactions(e),l=y=>{const E=String(y||"").toLowerCase();return["completed","confirmed","success"].includes(E)?"completed":["failed","error"].includes(E)?"failed":["cancelled","canceled"].includes(E)?"cancelled":"pending"},c=(a||[]).filter(y=>{var R,k;const E=(R=y==null?void 0:y.createdAt)!=null&&R.toDate?y.createdAt.toDate():(y==null?void 0:y.createdAt)instanceof Date?y.createdAt:new Date(y==null?void 0:y.createdAt);return((k=E==null?void 0:E.toDateString)==null?void 0:k.call(E))===o&&l(y==null?void 0:y.status)==="completed"}),d=c.length,h=c.reduce((y,E)=>y+Number(E.amount||0),0),f=y=>{const E=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return E==="withdraw"||E==="withdrawal"||E==="receive"},m=y=>{const E=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return E==="send"||E==="transfer"},S=c.filter(f).reduce((y,E)=>{const R=E.withdrawnAmount!==void 0?Number(E.withdrawnAmount):Number(E.amount||0);return y+R},0),p=c.filter(m).reduce((y,E)=>{const R=E.sentAmount!==void 0?Number(E.sentAmount):Number(E.amount||0);return y+R},0),v=c.reduce((y,E)=>y+Number(ws.calculateTransactionProfit(E)||0),0),w=new Date(i).toISOString().slice(0,10);await $O.add({userId:e,reportDate:w,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(S.toFixed(2)),totalSent:Number(p.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",w)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await vo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await Ap.resetDailyLimits(i)}catch{}if(r)try{await Ap.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const $A=new ZH,Zy=768;function eK(){const[t,e]=T.useState(void 0);return T.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Zy-1}px)`),r=()=>{e(window.innerWidth<Zy)};return n.addEventListener("change",r),e(window.innerWidth<Zy),()=>n.removeEventListener("change",r)},[]),!!t}function tK(){const[t,e]=T.useState("default"),[n,r]=T.useState(!1);return T.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const r2=T.createContext(void 0);function nK({children:t}){const{profile:e,user:n,loading:r}=ml(),[s,i]=T.useState(null),[o,a]=T.useState(null),[l,c]=T.useState(!0);T.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),T.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const S=localStorage.getItem(m);i(S||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const S=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==S))try{const p=localStorage.getItem(S);i(p||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return _.jsx(r2.Provider,{value:d,children:t})}function rK(){const t=T.useContext(r2);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var ev="focusScope.autoFocusOnMount",tv="focusScope.autoFocusOnUnmount",BA={bubbles:!1,cancelable:!0},sK="FocusScope",s2=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=T.useState(null),c=Xs(s),d=Xs(i),h=T.useRef(null),f=Wn(e,p=>l(p)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let p=function(E){if(m.paused||!a)return;const R=E.target;a.contains(R)?h.current=R:eo(h.current,{select:!0})},v=function(E){if(m.paused||!a)return;const R=E.relatedTarget;R!==null&&(a.contains(R)||eo(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&eo(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const y=new MutationObserver(w);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,m.paused]),T.useEffect(()=>{if(a){WA.add(m);const p=document.activeElement;if(!a.contains(p)){const w=new CustomEvent(ev,BA);a.addEventListener(ev,c),a.dispatchEvent(w),w.defaultPrevented||(iK(uK(i2(a)),{select:!0}),document.activeElement===p&&eo(a))}return()=>{a.removeEventListener(ev,c),setTimeout(()=>{const w=new CustomEvent(tv,BA);a.addEventListener(tv,d),a.dispatchEvent(w),w.defaultPrevented||eo(p??document.body,{select:!0}),a.removeEventListener(tv,d),WA.remove(m)},0)}}},[a,c,d,m]);const S=T.useCallback(p=>{if(!n&&!r||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(v&&w){const y=p.currentTarget,[E,R]=oK(y);E&&R?!p.shiftKey&&w===R?(p.preventDefault(),n&&eo(E,{select:!0})):p.shiftKey&&w===E&&(p.preventDefault(),n&&eo(R,{select:!0})):w===y&&p.preventDefault()}},[n,r,m.paused]);return _.jsx(tn.div,{tabIndex:-1,...o,ref:f,onKeyDown:S})});s2.displayName=sK;function iK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(eo(r,{select:e}),document.activeElement!==n)return}function oK(t){const e=i2(t),n=zA(e,t),r=zA(e.reverse(),t);return[n,r]}function i2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zA(t,e){for(const n of t)if(!aK(n,{upTo:e}))return n}function aK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lK(t){return t instanceof HTMLInputElement&&"select"in t}function eo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lK(t)&&e&&t.select()}}var WA=cK();function cK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=qA(t,e),t.unshift(e)},remove(e){var n;t=qA(t,e),(n=t[0])==null||n.resume()}}}function qA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function uK(t){return t.filter(e=>e.tagName!=="A")}var nv=0;function dK(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??HA()),document.body.insertAdjacentElement("beforeend",t[1]??HA()),nv++,()=>{nv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),nv--}},[])}function HA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var zs=function(){return zs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zs.apply(this,arguments)};function o2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function hK(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var om="right-scroll-bar-position",am="width-before-scroll-bar",fK="with-scroll-bars-hidden",mK="--removed-body-scroll-bar-size";function rv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pK(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var gK=typeof window<"u"?T.useLayoutEffect:T.useEffect,KA=new WeakMap;function yK(t,e){var n=pK(null,function(r){return t.forEach(function(s){return rv(s,r)})});return gK(function(){var r=KA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||rv(a,null)}),i.forEach(function(a){s.has(a)||rv(a,o)})}KA.set(n,t)},[t]),n}function vK(t){return t}function wK(t,e){e===void 0&&(e=vK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function _K(t){t===void 0&&(t={});var e=wK(null);return e.options=zs({async:!0,ssr:!1},t),e}var a2=function(t){var e=t.sideCar,n=o2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,zs({},n))};a2.isSideCarExport=!0;function EK(t,e){return t.useMedium(e),a2}var l2=_K(),sv=function(){},Lg=T.forwardRef(function(t,e){var n=T.useRef(null),r=T.useState({onScrollCapture:sv,onWheelCapture:sv,onTouchMoveCapture:sv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,S=t.noIsolation,p=t.inert,v=t.allowPinchZoom,w=t.as,y=w===void 0?"div":w,E=t.gapMode,R=o2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,L=yK([n,e]),x=zs(zs({},R),s);return T.createElement(T.Fragment,null,d&&T.createElement(k,{sideCar:l2,removeScrollBar:c,shards:h,noRelative:m,noIsolation:S,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:E}),o?T.cloneElement(T.Children.only(a),zs(zs({},x),{ref:L})):T.createElement(y,zs({},x,{className:l,ref:L}),a))});Lg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lg.classNames={fullWidth:am,zeroRight:om};var IK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=IK();return e&&t.setAttribute("nonce",e),t}function TK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function bK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var AK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=SK())&&(TK(e,n),bK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},xK=function(){var t=AK();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},c2=function(){var t=xK(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},RK={left:0,top:0,right:0,gap:0},iv=function(t){return parseInt(t||"",10)||0},PK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[iv(n),iv(r),iv(s)]},CK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return RK;var e=PK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},kK=c2(),rc="data-scroll-locked",NK=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(fK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(rc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(om,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(am,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(om," .").concat(om,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(am," .").concat(am,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rc,`] {
    `).concat(mK,": ").concat(a,`px;
  }
`)},GA=function(){var t=parseInt(document.body.getAttribute(rc)||"0",10);return isFinite(t)?t:0},DK=function(){T.useEffect(function(){return document.body.setAttribute(rc,(GA()+1).toString()),function(){var t=GA()-1;t<=0?document.body.removeAttribute(rc):document.body.setAttribute(rc,t.toString())}},[])},OK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;DK();var i=T.useMemo(function(){return CK(s)},[s]);return T.createElement(kK,{styles:NK(i,!e,s,n?"":"!important")})},l_=!1;if(typeof window<"u")try{var Tf=Object.defineProperty({},"passive",{get:function(){return l_=!0,!0}});window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{l_=!1}var Al=l_?{passive:!1}:!1,LK=function(t){return t.tagName==="TEXTAREA"},u2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!LK(t)&&n[e]==="visible")},VK=function(t){return u2(t,"overflowY")},MK=function(t){return u2(t,"overflowX")},QA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=d2(t,r);if(s){var i=h2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},FK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},UK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},d2=function(t,e){return t==="v"?VK(e):MK(e)},h2=function(t,e){return t==="v"?FK(e):UK(e)},jK=function(t,e){return t==="h"&&e==="rtl"?-1:1},$K=function(t,e,n,r,s){var i=jK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=h2(t,a),S=m[0],p=m[1],v=m[2],w=p-v-i*S;(S||w)&&d2(t,a)&&(h+=w,f+=S);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},bf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},YA=function(t){return[t.deltaX,t.deltaY]},JA=function(t){return t&&"current"in t?t.current:t},BK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},WK=0,xl=[];function qK(t){var e=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),s=T.useState(WK++)[0],i=T.useState(c2)[0],o=T.useRef(t);T.useEffect(function(){o.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=hK([t.lockRef.current],(t.shards||[]).map(JA),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=T.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var w=bf(p),y=n.current,E="deltaX"in p?p.deltaX:y[0]-w[0],R="deltaY"in p?p.deltaY:y[1]-w[1],k,L=p.target,x=Math.abs(E)>Math.abs(R)?"h":"v";if("touches"in p&&x==="h"&&L.type==="range")return!1;var b=QA(x,L);if(!b)return!0;if(b?k=x:(k=x==="v"?"h":"v",b=QA(x,L)),!b)return!1;if(!r.current&&"changedTouches"in p&&(E||R)&&(r.current=k),!k)return!0;var A=r.current||k;return $K(A,v,p,A==="h"?E:R)},[]),l=T.useCallback(function(p){var v=p;if(!(!xl.length||xl[xl.length-1]!==i)){var w="deltaY"in v?YA(v):bf(v),y=e.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&BK(k.delta,w)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var E=(o.current.shards||[]).map(JA).filter(Boolean).filter(function(k){return k.contains(v.target)}),R=E.length>0?a(v,E[0]):!o.current.noIsolation;R&&v.cancelable&&v.preventDefault()}}},[]),c=T.useCallback(function(p,v,w,y){var E={name:p,delta:v,target:w,should:y,shadowParent:HK(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(R){return R!==E})},1)},[]),d=T.useCallback(function(p){n.current=bf(p),r.current=void 0},[]),h=T.useCallback(function(p){c(p.type,YA(p),p.target,a(p,t.lockRef.current))},[]),f=T.useCallback(function(p){c(p.type,bf(p),p.target,a(p,t.lockRef.current))},[]);T.useEffect(function(){return xl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Al),document.addEventListener("touchmove",l,Al),document.addEventListener("touchstart",d,Al),function(){xl=xl.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,Al),document.removeEventListener("touchmove",l,Al),document.removeEventListener("touchstart",d,Al)}},[]);var m=t.removeScrollBar,S=t.inert;return T.createElement(T.Fragment,null,S?T.createElement(i,{styles:zK(s)}):null,m?T.createElement(OK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function HK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const KK=EK(l2,qK);var f2=T.forwardRef(function(t,e){return T.createElement(Lg,zs({},t,{ref:e,sideCar:KK}))});f2.classNames=Lg.classNames;var GK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Rl=new WeakMap,Af=new WeakMap,xf={},ov=0,m2=function(t){return t&&(t.host||m2(t.parentNode))},QK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=m2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},YK=function(t,e,n,r){var s=QK(e,Array.isArray(t)?t:[t]);xf[n]||(xf[n]=new WeakMap);var i=xf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),S=m!==null&&m!=="false",p=(Rl.get(f)||0)+1,v=(i.get(f)||0)+1;Rl.set(f,p),i.set(f,v),o.push(f),p===1&&S&&Af.set(f,!0),v===1&&f.setAttribute(n,"true"),S||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),a.clear(),ov++,function(){o.forEach(function(h){var f=Rl.get(h)-1,m=i.get(h)-1;Rl.set(h,f),i.set(h,m),f||(Af.has(h)||h.removeAttribute(r),Af.delete(h)),m||h.removeAttribute(n)}),ov--,ov||(Rl=new WeakMap,Rl=new WeakMap,Af=new WeakMap,xf={})}},JK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=GK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),YK(r,s,n,"aria-hidden")):function(){return null}},Vg="Dialog",[p2,YG]=qc(Vg),[XK,Ns]=p2(Vg),g2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=T.useRef(null),l=T.useRef(null),[c,d]=l0({prop:r,defaultProp:s??!1,onChange:i,caller:Vg});return _.jsx(XK,{scope:e,triggerRef:a,contentRef:l,contentId:Ey(),titleId:Ey(),descriptionId:Ey(),open:c,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};g2.displayName=Vg;var y2="DialogTrigger",v2=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(y2,n),i=Wn(e,s.triggerRef);return _.jsx(tn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":eI(s.open),...r,ref:i,onClick:Nt(t.onClick,s.onOpenToggle)})});v2.displayName=y2;var XE="DialogPortal",[ZK,w2]=p2(XE,{forceMount:void 0}),_2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Ns(XE,e);return _.jsx(ZK,{scope:e,forceMount:n,children:T.Children.map(r,o=>_.jsx(dl,{present:n||i.open,children:_.jsx(a0,{asChild:!0,container:s,children:o})}))})};_2.displayName=XE;var xp="DialogOverlay",E2=T.forwardRef((t,e)=>{const n=w2(xp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ns(xp,t.__scopeDialog);return i.modal?_.jsx(dl,{present:r||i.open,children:_.jsx(tG,{...s,ref:e})}):null});E2.displayName=xp;var eG=Vd("DialogOverlay.RemoveScroll"),tG=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(xp,n);return _.jsx(f2,{as:eG,allowPinchZoom:!0,shards:[s.contentRef],children:_.jsx(tn.div,{"data-state":eI(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ll="DialogContent",I2=T.forwardRef((t,e)=>{const n=w2(ll,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ns(ll,t.__scopeDialog);return _.jsx(dl,{present:r||i.open,children:i.modal?_.jsx(nG,{...s,ref:e}):_.jsx(rG,{...s,ref:e})})});I2.displayName=ll;var nG=T.forwardRef((t,e)=>{const n=Ns(ll,t.__scopeDialog),r=T.useRef(null),s=Wn(e,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return JK(i)},[]),_.jsx(S2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Nt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Nt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Nt(t.onFocusOutside,i=>i.preventDefault())})}),rG=T.forwardRef((t,e)=>{const n=Ns(ll,t.__scopeDialog),r=T.useRef(!1),s=T.useRef(!1);return _.jsx(S2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),S2=T.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Ns(ll,n),l=T.useRef(null),c=Wn(e,l);return dK(),_.jsxs(_.Fragment,{children:[_.jsx(s2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:_.jsx(Wp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":eI(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(sG,{titleId:a.titleId}),_.jsx(oG,{contentRef:l,descriptionId:a.descriptionId})]})]})}),ZE="DialogTitle",T2=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(ZE,n);return _.jsx(tn.h2,{id:s.titleId,...r,ref:e})});T2.displayName=ZE;var b2="DialogDescription",A2=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(b2,n);return _.jsx(tn.p,{id:s.descriptionId,...r,ref:e})});A2.displayName=b2;var x2="DialogClose",R2=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ns(x2,n);return _.jsx(tn.button,{type:"button",...r,ref:e,onClick:Nt(t.onClick,()=>s.onOpenChange(!1))})});R2.displayName=x2;function eI(t){return t?"open":"closed"}var P2="DialogTitleWarning",[JG,C2]=NM(P2,{contentName:ll,titleName:ZE,docsSlug:"dialog"}),sG=({titleId:t})=>{const e=C2(P2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},iG="DialogDescriptionWarning",oG=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${C2(iG).contentName}}.`;return T.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},aG=g2,lG=v2,cG=_2,k2=E2,N2=I2,D2=T2,O2=A2,uG=R2;const av=aG,XG=lG,dG=cG,L2=T.forwardRef(({className:t,...e},n)=>_.jsx(k2,{ref:n,className:qn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));L2.displayName=k2.displayName;const lm=T.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>_.jsxs(dG,{children:[_.jsx(L2,{}),_.jsxs(N2,{ref:o,className:qn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&_.jsxs(uG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[_.jsx(f0,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lm.displayName=N2.displayName;const cm=({className:t,...e})=>_.jsx("div",{className:qn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});cm.displayName="DialogHeader";const hG=({className:t,...e})=>_.jsx("div",{className:qn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});hG.displayName="DialogFooter";const um=T.forwardRef(({className:t,...e},n)=>_.jsx(D2,{ref:n,className:qn("text-lg font-semibold leading-none tracking-tight",t),...e}));um.displayName=D2.displayName;const c_=T.forwardRef(({className:t,...e},n)=>_.jsx(O2,{ref:n,className:qn("text-sm text-muted-foreground",t),...e}));c_.displayName=O2.displayName;const fG={},XA=U.lazy(()=>ee(()=>import("./Index-IUeaUprb.js"),[],import.meta.url)),Rf=U.lazy(()=>ee(()=>import("./LandingPage-DFf2Fasj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),ZA=U.lazy(()=>ee(()=>import("./SubscriptionsPage-DQizp7lf.js"),__vite__mapDeps([11,1,4,12]),import.meta.url)),ex=U.lazy(()=>ee(()=>import("./AuthPage-CdAghIZm.js"),__vite__mapDeps([13,1,2,3,8]),import.meta.url)),Pf=U.lazy(()=>ee(()=>import("./TopUpPage-BtNhLyQP.js"),__vite__mapDeps([14,1,15]),import.meta.url)),tx=U.lazy(()=>ee(()=>import("./AdminTopupsPage-DVQxh6qe.js"),__vite__mapDeps([16,15]),import.meta.url)),nx=U.lazy(()=>ee(()=>import("./AdminNotificationsPage-BN-0nhF2.js"),__vite__mapDeps([17,1,18,19,20]),import.meta.url)),Cf=U.lazy(()=>ee(()=>import("./UserRegisterPage-D0n-Vlbh.js"),__vite__mapDeps([21,1,18,22,23,24,25,26]),import.meta.url)),rx=U.lazy(()=>ee(()=>import("./UserAccountSetupPage-BkPgfSkZ.js"),__vite__mapDeps([27,1,18,22,26,25,10]),import.meta.url)),sx=U.lazy(()=>ee(()=>import("./ForgotPasswordCodePage-8JTVbtvR.js"),[],import.meta.url)),ix=U.lazy(()=>ee(()=>import("./DashboardLoginPage-CDIeAWV8.js"),__vite__mapDeps([28,1]),import.meta.url)),ox=U.lazy(()=>ee(()=>import("./ProtectedDashboard-Do-kwz4x.js"),__vite__mapDeps([29,1,15,30,18,31,32,33,23]),import.meta.url)),dm=U.lazy(()=>ee(()=>import("./ProtectedUserDashboard-dIQOkXWb.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url)),ax=U.lazy(()=>ee(()=>import("./MerchantDashboard-rEzXhDBM.js"),__vite__mapDeps([36,37,15,38,39,40,1,41,18,42]),import.meta.url)),lx=U.lazy(()=>ee(()=>import("./PendingApprovalPage-C5W5nXPN.js"),__vite__mapDeps([43,44]),import.meta.url)),cx=U.lazy(()=>ee(()=>import("./AdminLogin-BrkyLfKI.js"),[],import.meta.url)),ux=U.lazy(()=>ee(()=>import("./ProtectedAdminDashboard-IitlD4IP.js"),__vite__mapDeps([45,12,3,46,37,15,38,18,30,31,47,1,19,22,39,48,4,25,49,50,35,9,7,8,10,51]),import.meta.url)),dx=U.lazy(()=>ee(()=>import("./AuthTestPage-Ie2DdGhd.js"),__vite__mapDeps([52,1,18]),import.meta.url)),hx=U.lazy(()=>ee(()=>import("./ProfileSettingsPage-BsK0EQMt.js"),__vite__mapDeps([53,1,18,47,54,30,31,42,5,49,7]),import.meta.url)),fx=U.lazy(()=>ee(()=>import("./TransactionsPage-C6VBiazI.js"),__vite__mapDeps([55,1,15,39,38,56,48,30,18,31,4,41,10,8,32,33,5,51]),import.meta.url)),mx=U.lazy(()=>ee(()=>import("./WalletAdditionPage-B97uz4x_.js"),__vite__mapDeps([57,1,18,15,5,23,25,31]),import.meta.url)),px=U.lazy(()=>ee(()=>import("./ReferralsPage-8Z0hLPpA.js"),__vite__mapDeps([58,1,39,22,24,20,10,50,51]),import.meta.url)),gx=U.lazy(()=>ee(()=>import("./CPanelPage-1HM7mZBm.js"),__vite__mapDeps([59,1,18]),import.meta.url)),yx=U.lazy(()=>ee(()=>import("./CPanelLoginPage-DQUck7AY.js"),__vite__mapDeps([60,18,1]),import.meta.url)),vx=U.lazy(()=>ee(()=>import("./NotFound-Bfp5gEfi.js"),[],import.meta.url)),wx=U.lazy(()=>ee(()=>import("./PrivacyPolicyPage-D7Ddw-G4.js"),[],import.meta.url)),V2=new i6({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=d6({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});u6({queryClient:V2,persister:t,maxAge:24*60*60*1e3})}catch{}const mG=()=>{if(!((_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return _.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:_.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:_.jsx(h0,{className:"w-5 h-5"})})})},_x=()=>{const t=ri(),{user:e,loading:n}=ml(),r=(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?_.jsx(SH,{}):null},Ex=()=>{var Or;const t=eK(),e=(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android",{profile:n,user:r}=ml(),{shopId:s}=rK(),o=ri().pathname.startsWith("/user/dashboard"),a=Yc(),{toast:l}=o0(),[c,d]=U.useState(!1),[h,f]=U.useState(null),[m,S]=U.useState(!1),[p,v]=U.useState(null),[w,y]=U.useState(!1),[E,R]=U.useState(""),[k,L]=U.useState(""),[x,b]=U.useState(null),[A,P]=U.useState(null),N=U.useRef(null),O=U.useRef(null),C=U.useRef(!1),$=U.useRef(null),re=U.useRef(""),ne=U.useRef(""),fe=U.useRef(()=>{try{const Y=localStorage.getItem("sms_suppressed_ids")||"[]",B=Array.isArray(JSON.parse(Y))?JSON.parse(Y):[];return new Set(B.map(q=>String(q||"")))}catch{return new Set}}),[j,H]=U.useState(!1),le=U.useRef(n);U.useEffect(()=>{le.current=n},[n]),tK(),U.useEffect(()=>{const Y=B=>{B.detail&&typeof B.detail.enabled=="boolean"&&!B.detail.enabled&&r!=null&&r.uid&&l({title:"  ",description:"        ",action:_.jsx(zP,{altText:"",onClick:()=>{try{window.location.href="cashy://openNotificationSettings"}catch{}},children:""}),duration:1e4})};if(window.addEventListener("notificationListenerStatus",Y),r!=null&&r.uid&&e){const B=setTimeout(()=>{try{window.location.href="cashy://checkNotificationStatus"}catch{}},2e3);return()=>{window.removeEventListener("notificationListenerStatus",Y),clearTimeout(B)}}return()=>window.removeEventListener("notificationListenerStatus",Y)},[r==null?void 0:r.uid,l,e]);const[ge,J]=U.useState(!1),[M,Ee]=U.useState(null),[De,Qe]=U.useState(""),[Ce,Rt]=U.useState(!1),[Ge,Ue]=U.useState(!1),[Be,qt]=U.useState(""),[Ht,Kn]=U.useState(""),[Nr,yn]=U.useState(!1),[yr,Ve]=U.useState(0),[lt,rn]=U.useState(!1),[vr,$i]=U.useState(""),[wr,ta]=U.useState("");U.useEffect(()=>{try{const Y=(r==null?void 0:r.uid)||"default",B=localStorage.getItem(`sim1Number_${Y}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${Y}`)??localStorage.getItem("sim2Number")??"";$i(B),ta(q),re.current=B,ne.current=q}catch{}},[r==null?void 0:r.uid]);const Ds=async(Y,B)=>{if(!(!Y||!M))try{const{resolveWalletBySimOrSlot:q,merchantWalletService:te,detectWalletFromSim:oe}=await ee(async()=>{const{resolveWalletBySimOrSlot:X,merchantWalletService:we,detectWalletFromSim:xe}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:X,merchantWalletService:we,detectWalletFromSim:xe}},void 0,import.meta.url),se=(r==null?void 0:r.uid)||"";Ee(X=>X?{...X,simNumber:Y,simLabel:B}:null);let ye=await q({simNumbers:[Y],userId:se});if(!ye||!ye.walletId)try{const X=await te.getByMerchantId(se),we=localStorage.getItem(`wallets_${se}`),xe=we?JSON.parse(we):[],G=(Array.isArray(xe)?xe:[]).map(ce=>({id:String((ce==null?void 0:ce.id)||""),phone:String((ce==null?void 0:ce.phone)||(ce==null?void 0:ce.msisdn)||""),isDefault:!!(ce!=null&&ce.isDefault)})),ue=(Array.isArray(X)?X:[]).map(ce=>({id:String((ce==null?void 0:ce.id)||""),msisdn:String((ce==null?void 0:ce.msisdn)||""),isDefault:!!(ce!=null&&ce.isDefault)})),he=[...G,...ue],de=await oe([Y],he);de&&de.walletId&&(ye={walletId:de.walletId,msisdn:de.msisdn})}catch{}if(ye&&ye.walletId){Ee(X=>X?{...X,walletMsisdn:ye.msisdn}:null),localStorage.setItem(`selectedWallet_${se}`,ye.walletId);try{localStorage.setItem(`selectedWallet_${se}_${s||""}`,ye.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:ye.walletId}}))}catch{}try{const{Preferences:X}=await ee(async()=>{const{Preferences:we}=await Promise.resolve().then(()=>Yy);return{Preferences:we}},void 0,import.meta.url);await X.set({key:"selected_wallet_id",value:ye.walletId})}catch{}}}catch{}},Fn=U.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}rn(!1);try{a("/user/login")}catch{}},[a]);U.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&rn(!0)}catch{!r&&e&&rn(!0)}},[r,e]);const Dr=U.useCallback(()=>{try{const Y=window.AudioContext||window.webkitAudioContext;if(!Y)return;const B=new Y,q=B.createOscillator(),te=B.createGain();q.type="sine",te.gain.setValueAtTime(0,B.currentTime),q.connect(te),te.connect(B.destination);const oe=B.currentTime;q.frequency.setValueAtTime(800,oe),te.gain.linearRampToValueAtTime(.15,oe+.02),q.start(oe),q.frequency.exponentialRampToValueAtTime(1200,oe+.08),te.gain.exponentialRampToValueAtTime(1e-5,oe+.32),q.stop(oe+.35)}catch{}},[]),sn=Y=>{try{const B=String(Y||"").replace(/[^0-9+]/g,"");if(!B)return"";if(B.startsWith("+20")){const q=B.slice(3);return q.startsWith("1")?"0"+q:q}if(B.startsWith("0020")){const q=B.slice(4);return q.startsWith("1")?"0"+q:q}if(B.startsWith("20")){const q=B.slice(2);return q.startsWith("1")?"0"+q:q}return B.startsWith("0")?B:/^(10|11|12|15)/.test(B)?"0"+B:B}catch{return""}},pl=Y=>{try{const B=String(Y||""),q=B.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let te=q?parseFloat(String(q[1]).replace(",",".")):0;const oe=B.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let se=oe?sn(oe[1]):void 0;const ye=B.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),X=B.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),we=ye?String(ye[1]).trim():X?String(X[1]).trim():void 0,xe=B.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),G=B.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),ue=B.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!te||te<=0){const de=B.match(/Received\s*EGP\s*([0-9.,]+)/i)||B.match(/Received\s*EGP([0-9.,]+)/i);de&&(te=parseFloat(String(de[1]).replace(/,/g,"")))}if(!se){const de=B.match(/from\s+([0-9+]+)/i);de&&(se=sn(de[1]))}const he=xe?String(xe[1]).trim():G?String(G[1]).trim():ue?String(ue[1]).trim():void 0;return{amount:te,sender:se,senderName:we,reference:he}}catch{return{amount:0}}};U.useEffect(()=>{(async()=>{var Y;try{if(!ge||!M){Rt(!1);return}const{auth:B}=await ee(async()=>{const{auth:se}=await Promise.resolve().then(()=>Yt);return{auth:se}},void 0,import.meta.url),q=((Y=B.currentUser)==null?void 0:Y.uid)||"",te=q?`selectedWallet_${q}`:"selectedWallet_default",oe=localStorage.getItem(te)||"";if(!oe){Rt(!0);return}try{const{merchantWalletService:se}=await ee(async()=>{const{merchantWalletService:we}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:we}},void 0,import.meta.url),ye=await se.getById(oe),X=ye&&ye.defaultWithdrawCommission!=null;Rt(!X)}catch{Rt(!0)}}catch{Rt(!0)}})()},[ge,M]);const oi=async Y=>{try{const{merchantWalletService:B,detectWalletFromSim:q}=await ee(async()=>{const{merchantWalletService:G,detectWalletFromSim:ue}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:G,detectWalletFromSim:ue}},void 0,import.meta.url),te=(r==null?void 0:r.uid)||"";if(!te)return;const oe=`wallets_${te}`,se=typeof localStorage<"u"?localStorage.getItem(oe):null,ye=se?JSON.parse(se):[],X=await B.getByMerchantId(te),we=[...(Array.isArray(ye)?ye:[]).map(G=>({id:String((G==null?void 0:G.id)||""),phone:String((G==null?void 0:G.phone)||(G==null?void 0:G.msisdn)||""),isDefault:!!(G!=null&&G.isDefault)})),...(Array.isArray(X)?X:[]).map(G=>({id:String((G==null?void 0:G.id)||""),msisdn:String((G==null?void 0:G.msisdn)||""),isDefault:!!(G!=null&&G.isDefault)}))],xe=await q(Y||[],we);if(xe&&xe.walletId)try{localStorage.setItem(`selectedWallet_${te}`,xe.walletId)}catch{}}catch{}};T.useEffect(()=>{const Y=async B=>{var q;try{const te=(B==null?void 0:B.detail)||{},oe=String(te.text||"").trim(),se=String(te.title||"").trim();if(!oe)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*|instapay|received\s*egp|transaction/i.test(`${se} ${oe}`)){try{Xy(te,{toast:l})}catch{}return}const{auth:X}=await ee(async()=>{const{auth:je}=await Promise.resolve().then(()=>Yt);return{auth:je}},void 0,import.meta.url),we=((q=X.currentUser)==null?void 0:q.uid)||"";let xe=s||"";if(!we){try{l({title:"  ",description:"   "})}catch{}return}if(!xe)try{const{doc:je,getDoc:me}=await ee(async()=>{const{doc:jt,getDoc:Pt}=await Promise.resolve().then(()=>Nn);return{doc:jt,getDoc:Pt}},void 0,import.meta.url),{db:dt}=await ee(async()=>{const{db:jt}=await Promise.resolve().then(()=>Yt);return{db:jt}},void 0,import.meta.url),wt=await me(je(dt,"profiles",we));if(wt.exists()){const jt=wt.data(),Pt=String((jt==null?void 0:jt.shopId)||"").trim();Pt&&(xe=Pt)}}catch{}let G="",ue="",he=!1;try{const je=we||"default";G=(localStorage.getItem(`sim1Number_${je}`)??localStorage.getItem("sim1Number")??"").trim(),ue=(localStorage.getItem(`sim2Number_${je}`)??localStorage.getItem("sim2Number")??"").trim(),he=(localStorage.getItem(`smsAutoRegisterEnabled_${je}`)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"}catch{}try{const{Preferences:je}=await ee(async()=>{const{Preferences:wt}=await Promise.resolve().then(()=>Yy);return{Preferences:wt}},void 0,import.meta.url),me=await je.get({key:"sim1_number"}),dt=await je.get({key:"sim2_number"});!G&&(me!=null&&me.value)&&(G=String(me.value).trim()),!ue&&(dt!=null&&dt.value)&&(ue=String(dt.value).trim()),!G&&re.current&&(G=re.current),!ue&&ne.current&&(ue=ne.current)}catch{}let de=[];const ce=Array.isArray(((B==null?void 0:B.detail)||{}).activeSimMsisdns)?B.detail.activeSimMsisdns.map(je=>String(je||"")):[];ce.length>0?de=ce:de=[G,ue].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(de))}catch{}let Re="";try{const je=localStorage.getItem("lastSmsSimMsisdn")||"";je&&de.includes(je)&&(Re=je)}catch{}if(Re||(Re=de[0]||""),Re)try{localStorage.setItem("lastSmsSimMsisdn",Re)}catch{}const{resolveWalletBySimOrSlot:ot,bindSlotWalletMapping:Tt,merchantWalletService:bt}=await ee(async()=>{const{resolveWalletBySimOrSlot:je,bindSlotWalletMapping:me,merchantWalletService:dt}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:je,bindSlotWalletMapping:me,merchantWalletService:dt}},void 0,import.meta.url),gt=we;let qe=await ot({simNumbers:de,userId:gt});if(!qe&&de.length>0){try{await oi(de)}catch{}const je=localStorage.getItem(`selectedWallet_${gt}`)||"";if(je)try{const me=await bt.getById(je);qe={walletId:je,msisdn:String((me==null?void 0:me.msisdn)||"")}}catch{}}if(qe&&qe.walletId){try{localStorage.setItem(`selectedWallet_${gt}`,qe.walletId)}catch{}try{Tt({userId:gt,walletId:qe.walletId,msisdn:qe.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:qe.walletId}}))}catch{}try{const je=String(qe.msisdn||"").trim();je&&(Re=je,localStorage.setItem("lastSmsSimMsisdn",je))}catch{}}const Lt=pl(oe),Kt=Number(Lt.amount||0);if(!Kt||Kt<=0){try{Xy(te,{toast:l})}catch{}return}const He=(qe==null?void 0:qe.msisdn)||await lv(we),vt=Lt.reference||`VF-${Date.now()}`,tt={amount:Kt,sender:String(Lt.sender||""),senderName:Lt.senderName,text:oe,simNumber:Re};if(he)try{await ai({...tt,reference:vt,walletMsisdn:He})}catch{}else{try{const{addDoc:je,collection:me,serverTimestamp:dt}=await ee(async()=>{const{addDoc:_r,collection:yt,serverTimestamp:Sn}=await Promise.resolve().then(()=>Nn);return{addDoc:_r,collection:yt,serverTimestamp:Sn}},void 0,import.meta.url),{db:wt}=await ee(async()=>{const{db:_r}=await Promise.resolve().then(()=>Yt);return{db:_r}},void 0,import.meta.url),jt=await je(me(wt,"pendingSmsPopups"),{userId:we,shopId:xe,payload:{...tt,reference:vt,walletMsisdn:He,sim1Number:G,sim2Number:ue},status:"pending",createdAt:dt()}),Pt=/Received\s*EGP/i.test(String(oe))?"InstaPay":"VF-Cash";Ee({...tt,reference:vt,providerLabel:Pt,walletMsisdn:He,popupId:jt.id})}catch{const je=/Received\s*EGP/i.test(String(oe))?"InstaPay":"VF-Cash";Ee({...tt,reference:vt,providerLabel:je,walletMsisdn:He})}J(!0);try{Dr()}catch{}}}catch{try{Xy((B==null?void 0:B.detail)||{},{toast:l})}catch{}}};try{window.addEventListener("vfNotificationReceived",Y)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",Y)}catch{}}},[l,s]),T.useEffect(()=>{const Y=async B=>{try{const q=(B==null?void 0:B.detail)||{},te=String(q.text||"");if(!te||!((n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true"))return;const se=/Received\s*EGP/i.test(te),ye=gG(te,String(q.sender||q.msisdn||""));if(!se&&!ye)return;const X=(r==null?void 0:r.uid)||"";if(!X)return;let we=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const xe=le.current;let G=(xe==null?void 0:xe.sim1Number)||"",ue=(xe==null?void 0:xe.sim2Number)||"";G||(G=localStorage.getItem(`sim1Number_${X}`)||localStorage.getItem("sim1Number")||""),ue||(ue=localStorage.getItem(`sim2Number_${X}`)||localStorage.getItem("sim2Number")||""),!G&&re.current&&(G=re.current),!ue&&ne.current&&(ue=ne.current),G=String(G).trim(),ue=String(ue).trim();const he=String(q.msisdn||q.sender||""),de=sn(he),ce=pl(te);let Re=Number(ce.amount||0),ot=ce.sender||de||String(q.sender||""),Tt=ce.senderName,bt=ce.reference||"";if(se){const me=String(te).match(/Received\s*EGP\s*([0-9.,]+)/i);me&&(Re=parseFloat(String(me[1]).replace(/,/g,"")));const dt=String(te).match(/from\s+([0-9+]+)/i);dt&&(ot=sn(dt[1]));const wt=String(te).match(/Ref:\s*([A-Za-z0-9\-]+)/i);wt&&(bt=String(wt[1]).trim())}if(!Re||Re<=0)return;let gt="",qe="";const Lt=[G,ue].filter(Boolean).map(me=>sn(me));if(de&&Lt.includes(de)&&(gt=de,gt===sn(G)?qe="SIM 1":gt===sn(ue)&&(qe="SIM 2")),!qe){const me=q==null?void 0:q.slot,dt=me!=null?Number(me):-1;dt===0?(qe="SIM 1",gt=G?sn(G):""):dt===1&&(qe="SIM 2",gt=ue?sn(ue):"")}!qe&&gt&&(gt===sn(G)?qe="SIM 1":gt===sn(ue)&&(qe="SIM 2"));const Kt=se?"InstaPay":"VF-Cash",He={amount:Re,sender:ot,senderName:Tt,text:te,simNumber:gt,simLabel:qe},vt=X?`smsAutoRegisterEnabled_${X}`:"smsAutoRegisterEnabled",je=(localStorage.getItem(vt)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!je){Ee({...He,reference:bt,providerLabel:Kt,walletMsisdn:""}),J(!0);try{Dr()}catch{}}(async()=>{try{const{resolveWalletBySimOrSlot:me,bindSlotWalletMapping:dt,merchantWalletService:wt}=await ee(async()=>{const{resolveWalletBySimOrSlot:yt,bindSlotWalletMapping:Sn,merchantWalletService:be}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:yt,bindSlotWalletMapping:Sn,merchantWalletService:be}},void 0,import.meta.url);let jt=Array.isArray(q.activeSimMsisdns)&&q.activeSimMsisdns.length>0?q.activeSimMsisdns.map(yt=>sn(String(yt||""))):de?[de]:[];jt.length===0&&(jt=[sn(G),sn(ue)].filter(Boolean));let Pt=await me({simNumbers:jt,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),userId:X});if(!Pt&&jt.length>0){try{await oi(jt)}catch{}const yt=localStorage.getItem(`selectedWallet_${X}`)||"";if(yt)try{const Sn=await wt.getById(yt);Pt={walletId:yt,msisdn:String((Sn==null?void 0:Sn.msisdn)||"")}}catch{}}if(Pt&&Pt.walletId){try{localStorage.setItem(`selectedWallet_${X}`,Pt.walletId)}catch{}try{dt({userId:X,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),walletId:Pt.walletId,msisdn:Pt.msisdn})}catch{}}const _r=(Pt==null?void 0:Pt.msisdn)||(X?await lv(X):"");if(Ee(yt=>yt?{...yt,walletMsisdn:_r}:null),je)try{await ai({...He,reference:bt,walletMsisdn:_r})}catch{}else try{const{addDoc:yt,collection:Sn,serverTimestamp:be}=await ee(async()=>{const{addDoc:ht,collection:_t,serverTimestamp:Ct}=await Promise.resolve().then(()=>Nn);return{addDoc:ht,collection:_t,serverTimestamp:Ct}},void 0,import.meta.url),{db:Ye}=await ee(async()=>{const{db:ht}=await Promise.resolve().then(()=>Yt);return{db:ht}},void 0,import.meta.url),Gt=await yt(Sn(Ye,"pendingSmsPopups"),{userId:X,shopId:we,payload:{...He,reference:bt,walletMsisdn:_r,sim1Number:G,sim2Number:ue},status:"pending",createdAt:be()});Ee(ht=>ht?{...ht,popupId:Gt.id}:null)}catch{}}catch(me){console.error("Background SMS processing error",me)}})()}catch(q){console.error("SMS Handler Error",q)}};try{window.addEventListener("mobileSmsReceived",Y)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",Y)}catch{}}},[l,s,n,r]),T.useEffect(()=>{},[l,s]),T.useEffect(()=>{},[l,s]);const ai=async Y=>{var B,q,te,oe,se,ye,X;try{const we=Y||M;if(!we)return;const{amount:xe,sender:G,text:ue,simNumber:he,senderName:de}=we,ce=String(ue||"");let Re=Number(xe||0);const ot=typeof(Y==null?void 0:Y.deferredMode)=="boolean"?Y.deferredMode:Ge,Tt=(Y==null?void 0:Y.debtorName)??Be,bt=(Y==null?void 0:Y.debtorNote)??Ht;try{J(!1)}catch{}try{}catch{}const gt=/Received\s*EGP/i.test(ce)?"instapay":"vodafone_cash";if(!Re||Re<=0){const be=ce.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(be&&(Re=parseFloat(String(be[1]).replace(",","."))),!Re||Re<=0){const Ye=ce.match(/Received\s*EGP\s*([0-9.,]+)/i)||ce.match(/Received\s*EGP([0-9.,]+)/i);Ye&&(Re=parseFloat(String(Ye[1]).replace(/,/g,"")))}}let qe=String(G||"").trim();if(!qe){const be=ce.match(/\s+\s+(\d+)/i);qe=be?sn(be[1]):""}let Lt=String((we==null?void 0:we.reference)||"").trim();if(!Lt){const be=ce.match(/\s*\s*([\d\.]+)/i);Lt=be?String(be[1]).trim():String(Date.now())}if(!Re||Re<=0){try{l({title:"      ",variant:"destructive"})}catch{}return}const{auth:Kt}=await ee(async()=>{const{auth:be}=await Promise.resolve().then(()=>Yt);return{auth:be}},void 0,import.meta.url),He=((B=Kt.currentUser)==null?void 0:B.uid)||"";let vt=s||"";if(!He){try{l({title:"  ",description:"   "})}catch{}return}if(!vt)try{const{doc:be,getDoc:Ye}=await ee(async()=>{const{doc:_t,getDoc:Ct}=await Promise.resolve().then(()=>Nn);return{doc:_t,getDoc:Ct}},void 0,import.meta.url),{db:Gt}=await ee(async()=>{const{db:_t}=await Promise.resolve().then(()=>Yt);return{db:_t}},void 0,import.meta.url),ht=await Ye(be(Gt,"profiles",He));if(ht.exists()){const _t=ht.data(),Ct=String((_t==null?void 0:_t.shopId)||"").trim();Ct&&(vt=Ct)}}catch{}if(!vt){try{l({title:"  ",description:"   "})}catch{}return}let tt=await yG(He);if(!tt)try{const{doc:be,getDoc:Ye}=await ee(async()=>{const{doc:ke,getDoc:Lr}=await Promise.resolve().then(()=>Nn);return{doc:ke,getDoc:Lr}},void 0,import.meta.url),{db:Gt}=await ee(async()=>{const{db:ke}=await Promise.resolve().then(()=>Yt);return{db:ke}},void 0,import.meta.url);let ht="",_t="";try{const ke=await Ye(be(Gt,"profiles",He));if(ke.exists()){const Lr=ke.data();ht=String((Lr==null?void 0:Lr.sim1Number)||"").trim(),_t=String((Lr==null?void 0:Lr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:Ct}=await ee(async()=>{const{detectWalletFromSim:ke}=await Promise.resolve().then(()=>Ea);return{detectWalletFromSim:ke}},void 0,import.meta.url),{merchantWalletService:Tn}=await ee(async()=>{const{merchantWalletService:ke}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:ke}},void 0,import.meta.url),Un=`wallets_${He}`,Cn=localStorage.getItem(Un),or=Cn?JSON.parse(Cn):[],ar=await Tn.getByMerchantId(He),Er=(Array.isArray(or)?or:[]).map(ke=>({id:String((ke==null?void 0:ke.id)||""),phone:String((ke==null?void 0:ke.phone)||(ke==null?void 0:ke.msisdn)||""),isDefault:!!(ke!=null&&ke.isDefault)})),Qt=(Array.isArray(ar)?ar:[]).map(ke=>({id:String((ke==null?void 0:ke.id)||""),msisdn:String((ke==null?void 0:ke.msisdn)||""),isDefault:!!(ke!=null&&ke.isDefault)})),vn=[...Er,...Qt],us=he||String(localStorage.getItem("lastSmsSimMsisdn")||"");let li=(us?[us]:[]).filter(Boolean);li.length===0&&(li=[ht,_t].filter(Boolean));const ra=await Ct(li,vn);if(ra&&ra.walletId){tt=ra.walletId;try{localStorage.setItem(`selectedWallet_${He}`,tt)}catch{}}}catch{}if(!tt){try{l({title:"   ",description:"       "})}catch{}return}try{const be=He;try{localStorage.setItem(`selectedWallet_${be}`,tt)}catch{}try{localStorage.setItem(`selectedWallet_${be}_${vt}`,tt)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:tt}}))}catch{}try{const{Preferences:Ye}=await ee(async()=>{const{Preferences:Gt}=await Promise.resolve().then(()=>Yy);return{Preferences:Gt}},void 0,import.meta.url);await Ye.set({key:"selected_wallet_id",value:tt}),await Ye.set({key:"current_user_id",value:be})}catch{}}catch{}const{recordAutoTransaction:je,userDataService:me}=await ee(async()=>{const{recordAutoTransaction:be,userDataService:Ye}=await Promise.resolve().then(()=>Mu);return{recordAutoTransaction:be,userDataService:Ye}},void 0,import.meta.url),dt=De&&De.trim()!==""?Math.max(0,parseFloat(De)):null;let wt=0;if(dt!=null)wt=dt;else try{const{merchantWalletService:be}=await ee(async()=>{const{merchantWalletService:ht}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:ht}},void 0,import.meta.url),Ye=await be.getById(String(tt)),Gt=Ye&&Ye.defaultWithdrawCommission;if(Gt!=null)wt=Math.round((Number(Gt)||0)*Number(Re)/1e3*100)/100;else{const{calculateCommission:ht}=await ee(async()=>{const{calculateCommission:_t}=await Promise.resolve().then(()=>Oa);return{calculateCommission:_t}},void 0,import.meta.url);wt=ht(Number(Re),"receive")}}catch{const{calculateCommission:be}=await ee(async()=>{const{calculateCommission:Ye}=await Promise.resolve().then(()=>Oa);return{calculateCommission:Ye}},void 0,import.meta.url);wt=be(Number(Re),"receive")}try{const{walletDailyLimitsService:be}=await ee(async()=>{const{walletDailyLimitsService:Gt}=await Promise.resolve().then(()=>a_);return{walletDailyLimitsService:Gt}},void 0,import.meta.url),Ye=await be.canPerformOperation(String(tt),Math.max(0,Number(Re||0)),"withdraw");if(!Ye.canPerform)try{l({title:"  ",description:String(Ye.message||"      "),variant:"destructive"})}catch{}}catch{}const jt=Lt||`${ce}|${Date.now()}`,Pt=he||String(localStorage.getItem("lastSmsSimMsisdn")||""),yt=String((we==null?void 0:we.walletMsisdn)||"").trim()||Pt||await lv(He)||"",Sn=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(ot)try{const be=await me.getUserData(He),Ye=Array.isArray(be==null?void 0:be.debts)?be.debts:[],Gt=Sn==="add"?Number(Re)+Number(wt):Number(Re),ht={id:`DEBT-${Date.now()}`,debtorName:Tt||de||qe||"",amount:Math.round(Number(Gt)*100)/100,reason:bt||"  VodafoneCash",customerId:void 0,mobile:qe,status:"pending",createdAt:new Date},_t=[ht,...Ye];await me.updateUserData(He,{debts:_t});try{const Ct=wt;await me.saveUserTransaction(He,{type:"withdraw",amount:Re,withdrawnAmount:Re,commission:Ct,status:"pending",createdAt:new Date,senderMsisdn:qe,receiverMsisdn:yt,senderName:de,walletId:tt,fromWallet:tt,lineId:yt,provider:gt,reference:jt,transactionId:`DEFER-${Date.now()}`,linkedDebtId:ht.id})}catch{}try{const Ct=(Y==null?void 0:Y.popupId)||(M==null?void 0:M.popupId)||"";if(Ct){const{doc:Tn,updateDoc:Un,serverTimestamp:Cn}=await ee(async()=>{const{doc:ar,updateDoc:Er,serverTimestamp:Qt}=await Promise.resolve().then(()=>Nn);return{doc:ar,updateDoc:Er,serverTimestamp:Qt}},void 0,import.meta.url),{db:or}=await ee(async()=>{const{db:ar}=await Promise.resolve().then(()=>Yt);return{db:ar}},void 0,import.meta.url);try{await Un(Tn(or,"pendingSmsPopups",Ct),{status:"confirmed",confirmedAt:Cn()})}catch{}try{(te=(q=fe.current)==null?void 0:q.add)==null||te.call(q,Ct);const ar=Array.from(fe.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(ar))}catch{}}}catch{}try{l({title:"  ",description:"      "})}catch{}return}catch{}try{const be=await je({shopId:vt,lineId:yt,walletId:tt,amount:Re,note:"SMS-ManualConfirm",provider:gt,createdBy:He,senderMsisdn:qe,senderName:de,reference:jt,text:ce});try{const Ye=(Y==null?void 0:Y.popupId)||(M==null?void 0:M.popupId)||"";if(Ye){const{doc:Gt,updateDoc:ht,serverTimestamp:_t}=await ee(async()=>{const{doc:Tn,updateDoc:Un,serverTimestamp:Cn}=await Promise.resolve().then(()=>Nn);return{doc:Tn,updateDoc:Un,serverTimestamp:Cn}},void 0,import.meta.url),{db:Ct}=await ee(async()=>{const{db:Tn}=await Promise.resolve().then(()=>Yt);return{db:Tn}},void 0,import.meta.url);try{await ht(Gt(Ct,"pendingSmsPopups",Ye),{status:"confirmed",confirmedAt:_t()})}catch{}try{(se=(oe=fe.current)==null?void 0:oe.add)==null||se.call(oe,Ye);const Tn=Array.from(fe.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Tn))}catch{}}}catch{}try{const Ye=Math.max(0,Number(Re||0)),{doc:Gt,getDoc:ht,updateDoc:_t}=await ee(async()=>{const{doc:Er,getDoc:Qt,updateDoc:vn}=await Promise.resolve().then(()=>Nn);return{doc:Er,getDoc:Qt,updateDoc:vn}},void 0,import.meta.url),{db:Ct}=await ee(async()=>{const{db:Er}=await Promise.resolve().then(()=>Yt);return{db:Er}},void 0,import.meta.url),Tn=Gt(Ct,"dashboardData",vt),Un=await ht(Tn);let Cn=Un.exists()?Number(((ye=Un.data())==null?void 0:ye.cashBalance)||0):0;const or=Un.exists()?((X=Un.data())==null?void 0:X.walletBalances)||{}:{},ar=Number(or[tt]||0);or[tt]=ar+Ye,Cn=Cn-Ye+Math.max(0,wt),await _t(Tn,{cashBalance:Cn,walletBalances:or,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:Cn}}))}catch{}try{const{walletDailyLimitsService:Er}=await ee(async()=>{const{walletDailyLimitsService:Qt}=await Promise.resolve().then(()=>a_);return{walletDailyLimitsService:Qt}},void 0,import.meta.url);await Er.updateUsage(String(tt),Ye,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(tt)}}))}catch{}}catch{}}catch{}(async()=>{try{const Ye=wt;await me.saveUserTransaction(He,{type:"withdraw",amount:Re,withdrawnAmount:Re,commission:Ye,status:"completed",createdAt:new Date,senderMsisdn:qe,receiverMsisdn:yt,senderName:de,walletId:tt,fromWallet:tt,lineId:yt,provider:gt,reference:jt,transactionId:be})}catch{}})(),J(!1),Ee(null);try{l({title:`     ${be}`})}catch{}}catch(be){try{l({title:String((be==null?void 0:be.message)||"  "),variant:"destructive"})}catch{}}}catch{}};T.useEffect(()=>{try{$A.start()}catch{}return()=>{try{$A.stop()}catch{}}},[]),T.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const Y=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),B=String(localStorage.getItem("android_installed_version")||"").trim(),q=localStorage.getItem("android_last_ack_code"),te=localStorage.getItem("android_installed_code"),oe=q?Number(q):null,se=te?Number(te):null,ye=Y||B,X=oe??se??null;ye&&R(ye),X&&P(X);const{doc:we,getDoc:xe}=await ee(async()=>{const{doc:he,getDoc:de}=await Promise.resolve().then(()=>Nn);return{doc:he,getDoc:de}},void 0,import.meta.url),{db:G}=await ee(async()=>{const{db:he}=await Promise.resolve().then(()=>Yt);return{db:he}},void 0,import.meta.url),ue=await xe(we(G,"profiles",r.uid));if(ue.exists()){const he=ue.data(),de=String((he==null?void 0:he.lastAckAndroidVersion)||(he==null?void 0:he.androidInstalledVersion)||(he==null?void 0:he.lastAckUpdateId)||"").trim(),ce=typeof(he==null?void 0:he.lastAckAndroidCode)=="number"?he.lastAckAndroidCode:typeof(he==null?void 0:he.androidInstalledCode)=="number"?he.androidInstalledCode:null,Re=(Tt,bt)=>{const gt=String(Tt||"").replace(/^v/i,"").split(".").map(Lt=>parseInt(Lt,10)||0),qe=String(bt||"").replace(/^v/i,"").split(".").map(Lt=>parseInt(Lt,10)||0);for(let Lt=0;Lt<Math.max(gt.length,qe.length);Lt++){const Kt=gt[Lt]||0,He=qe[Lt]||0;if(Kt>He)return 1;if(Kt<He)return-1}return 0};let ot=!1;if(typeof ce=="number"&&typeof X=="number"?ot=ce>X:typeof ce=="number"&&X==null?ot=!0:de&&ye?ot=Re(de,ye)>0:de&&!ye&&(ot=!0),ot){if(de){try{localStorage.setItem("android_installed_version",de)}catch{}R(de)}if(typeof ce=="number"){try{localStorage.setItem("android_installed_code",String(ce))}catch{}P(ce)}}else if(typeof ce=="number"&&X==null){try{localStorage.setItem("android_installed_code",String(ce))}catch{}P(ce)}}}catch{}})()},[r==null?void 0:r.uid]),T.useEffect(()=>{try{const B=String((window==null?void 0:window.__nativeAppVersion)||"").trim();B&&L(B);const q=window==null?void 0:window.__nativeAppVersionCode;if(typeof q=="number"){b(q);try{localStorage.setItem("android_installed_code",String(q))}catch{}}try{B&&localStorage.setItem("android_installed_version",B)}catch{}}catch{}const Y=B=>{var q,te;try{const oe=String((((q=B==null?void 0:B.detail)==null?void 0:q.version)??"")||"").trim(),se=(te=B==null?void 0:B.detail)==null?void 0:te.code;oe&&L(oe);try{oe&&localStorage.setItem("android_installed_version",oe)}catch{}typeof se=="number"&&b(se)}catch{}};try{window.addEventListener("native-app-version",Y)}catch{}return()=>{try{window.removeEventListener("native-app-version",Y)}catch{}}},[]),T.useEffect(()=>{try{const Y=(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android",B=String(k||"").trim();if(!Y||!B||!(r!=null&&r.uid))return;(async()=>{try{const{doc:q,setDoc:te,serverTimestamp:oe}=await ee(async()=>{const{doc:ye,setDoc:X,serverTimestamp:we}=await Promise.resolve().then(()=>Nn);return{doc:ye,setDoc:X,serverTimestamp:we}},void 0,import.meta.url),{db:se}=await ee(async()=>{const{db:ye}=await Promise.resolve().then(()=>Yt);return{db:ye}},void 0,import.meta.url);await te(q(se,"profiles",r.uid),{androidInstalledVersion:B,androidInstalledAt:oe()},{merge:!0});try{localStorage.setItem("android_installed_version",B)}catch{}}catch{}})()}catch{}},[k,r==null?void 0:r.uid]),T.useEffect(()=>{_e!=null&&_e.isNativePlatform&&_e.getPlatform()==="android"&&(async()=>{try{await ee(()=>import("./ProtectedUserDashboard-dIQOkXWb.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url),await ee(()=>import("./UserDashboardPage-C_0DGTNn.js"),__vite__mapDeps([61,1,39,15,18,30,31,23,6,42,41,25,5,48,33,46,37,38,47,51,10,56,4,8,32,26,35,19,40,44,54,7]),import.meta.url),await ee(()=>Promise.resolve().then(()=>IH),void 0,import.meta.url),await ee(()=>import("./ProfileSettingsPage-BsK0EQMt.js"),__vite__mapDeps([53,1,18,47,54,30,31,42,5,49,7]),import.meta.url),await ee(()=>import("./TransactionsPage-C6VBiazI.js"),__vite__mapDeps([55,1,15,39,38,56,48,30,18,31,4,41,10,8,32,33,5,51]),import.meta.url)}catch{}})()},[]),T.useEffect(()=>{if(!t)return;const Y=document.createElement("style");Y.setAttribute("data-disable-pull-to-refresh","true"),Y.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(Y);let B=0,q=null;const te=se=>{var ye,X;B=((X=(ye=se.touches)==null?void 0:ye[0])==null?void 0:X.clientY)||0,q=se.target},oe=se=>{var he,de;const ye=((de=(he=se.touches)==null?void 0:he[0])==null?void 0:de.clientY)||0,X=document.scrollingElement||document.documentElement,we=X.scrollTop||window.scrollY||0,xe=X.scrollHeight-X.clientHeight||0,G=q||null,ue=(()=>{let ce=G;for(;ce&&ce!==document.body;){const ot=window.getComputedStyle(ce).overflowY;if((ot==="auto"||ot==="scroll")&&ce.scrollHeight>ce.clientHeight)return!0;ce=ce.parentElement}return!1})();!ue&&we<=0&&ye>B&&se.cancelable&&se.preventDefault(),!ue&&we>=xe&&ye<B&&se.cancelable&&se.preventDefault()};return document.addEventListener("touchstart",te,{passive:!0}),document.addEventListener("touchmove",oe,{passive:!1}),()=>{document.removeEventListener("touchstart",te),document.removeEventListener("touchmove",oe);try{document.head.removeChild(Y)}catch{}}},[t]),T.useEffect(()=>{if(!((_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android"))return;try{const te=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=te,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const te=(window.location.assign||(oe=>{})).bind(window.location);window.__originalAssign=te,window.location.assign=oe=>{try{if(String(oe||"").startsWith("/user/dashboard")){a("/user/dashboard");return}}catch{}try{te(oe)}catch{}}}catch{}let B=null,q=!1;return(async()=>{try{const{listenAndroidUpdates:te}=await ee(async()=>{const{listenAndroidUpdates:oe}=await Promise.resolve().then(()=>DH);return{listenAndroidUpdates:oe}},void 0,import.meta.url);B=te(oe=>{if(q)return;const se=String((oe==null?void 0:oe.version)||"").trim(),ye=String((oe==null?void 0:oe.url)||"").trim(),X=String((oe==null?void 0:oe.notes)||"").trim(),we=!!(oe!=null&&oe.force),xe=typeof(oe==null?void 0:oe.code)=="number"?oe.code:void 0,G=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),ue=String(E||G||"").trim(),he=(He,vt)=>{const tt=String(He||"").replace(/^v/i,"").split(".").map(me=>parseInt(me,10)||0),je=String(vt||"").replace(/^v/i,"").split(".").map(me=>parseInt(me,10)||0);for(let me=0;me<Math.max(tt.length,je.length);me++){const dt=tt[me]||0,wt=je[me]||0;if(dt>wt)return 1;if(dt<wt)return-1}return 0},de=String(k||"").trim(),ce=String(localStorage.getItem("android_installed_version")||"").trim(),Re=localStorage.getItem("android_installed_code"),ot=Re?Number(Re):null,Tt=[x,A,ot].filter(He=>typeof He=="number").reduce((He,vt)=>He===void 0?vt:Math.max(He,vt),void 0),bt=typeof xe=="number"&&typeof Tt=="number"?xe>Tt:void 0,gt=(()=>{const He=[de,ue,ce].filter(Boolean);return He.length===0?"":He.reduce((vt,tt)=>he(tt,vt)>0?tt:vt)})(),qe=he(se,gt)>0;if(!!ye&&(!!se||typeof xe=="number")&&(bt!==void 0?bt:qe)){const He="   ",vt=`${X?X+`
`:""} : ${se}`;f({title:He,message:vt,apkUrl:ye,force:we,versionId:se,versionCode:xe}),d(!0)}else try{d(!1)}catch{}})}catch{}})(),()=>{q=!0;try{typeof B=="function"&&B()}catch{}}},[E,k]),T.useEffect(()=>{const Y=q=>{const te=(q==null?void 0:q.detail)||{};try{N.current&&(clearTimeout(N.current),N.current=null)}catch{}try{O.current&&(clearInterval(O.current),O.current=null)}catch{}S(!0),v({percent:te.percent??null,downloaded:te.downloaded??0,total:te.total??0})},B=()=>{try{N.current&&(clearTimeout(N.current),N.current=null)}catch{}try{O.current&&(clearInterval(O.current),O.current=null)}catch{}S(!1),y(!0),v({percent:100,downloaded:((p==null?void 0:p.total)??(p==null?void 0:p.downloaded)??0)||0,total:(p==null?void 0:p.total)??0});try{const q=String((h==null?void 0:h.versionId)||"").trim();if(q){try{localStorage.setItem("android_last_ack_version_id",q)}catch{}try{localStorage.setItem("android_installed_version",q)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:te,setDoc:oe,serverTimestamp:se}=await ee(async()=>{const{doc:X,setDoc:we,serverTimestamp:xe}=await Promise.resolve().then(()=>Nn);return{doc:X,setDoc:we,serverTimestamp:xe}},void 0,import.meta.url),{db:ye}=await ee(async()=>{const{db:X}=await Promise.resolve().then(()=>Yt);return{db:X}},void 0,import.meta.url);await oe(te(ye,"profiles",r.uid),{lastAckAndroidVersion:q,androidInstalledVersion:q,lastAckAt:se(),androidInstalledAt:se()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",Y),window.addEventListener("androidUpdateDownloaded",B),()=>{window.removeEventListener("androidUpdateProgress",Y),window.removeEventListener("androidUpdateDownloaded",B)}},[]),T.useEffect(()=>((async()=>{var Y;try{const{auth:B}=await ee(async()=>{const{auth:ue}=await Promise.resolve().then(()=>Yt);return{auth:ue}},void 0,import.meta.url),q=((Y=B.currentUser)==null?void 0:Y.uid)||"";if(!q)return;const{db:te}=await ee(async()=>{const{db:ue}=await Promise.resolve().then(()=>Yt);return{db:ue}},void 0,import.meta.url),{collection:oe,query:se,where:ye,onSnapshot:X}=await ee(async()=>{const{collection:ue,query:he,where:de,onSnapshot:ce}=await Promise.resolve().then(()=>Nn);return{collection:ue,query:he,where:de,onSnapshot:ce}},void 0,import.meta.url),we=se(oe(te,"pendingSmsPopups"),ye("userId","==",q),ye("status","==","pending")),xe=Date.now(),G=X(we,ue=>{var he,de,ce,Re,ot,Tt,bt,gt,qe,Lt,Kt,He,vt;try{const tt=typeof ue.docChanges=="function"?ue.docChanges():[];for(const je of tt){if(je.type==="added"){const me=je.doc.data()||{},dt=je.doc.id;if((de=(he=fe.current)==null?void 0:he.has)!=null&&de.call(he,dt))continue;try{const Qt=me.createdAt||me.timestamp||(me.payload||{}).createdAt||(me.payload||{}).timestamp,vn=Qt&&typeof Qt.toMillis=="function"?Qt.toMillis():typeof me.createdAtMs=="number"?me.createdAtMs:typeof(me.payload||{}).createdAtMs=="number"?(me.payload||{}).createdAtMs:null;if(typeof vn=="number"&&vn<xe)continue}catch{}let wt=me.amount??((ce=me.payload)==null?void 0:ce.amount)??null,jt=me.sender??((Re=me.payload)==null?void 0:Re.sender)??"";const Pt=me.senderName??((ot=me.payload)==null?void 0:ot.senderName)??"";let _r=me.reference??((Tt=me.payload)==null?void 0:Tt.reference)??"";const yt=me.text??((bt=me.payload)==null?void 0:bt.text)??"";let Sn=me.simNumber??((gt=me.payload)==null?void 0:gt.simNumber)??"",be=me.simSlot??((qe=me.payload)==null?void 0:qe.simSlot);be==null&&(be=me.slot??((Lt=me.payload)==null?void 0:Lt.slot)),be==null&&(be=me.sim_slot??((Kt=me.payload)==null?void 0:Kt.sim_slot)),be==null&&(be=me.lineId??((He=me.payload)==null?void 0:He.lineId));const Ye=be!=null?String(be):"",Gt=(r==null?void 0:r.uid)||"default";let ht=localStorage.getItem(`sim1Number_${Gt}`)??localStorage.getItem("sim1Number")??"",_t=localStorage.getItem(`sim2Number_${Gt}`)??localStorage.getItem("sim2Number")??"";const Ct=me.payload||{},Tn=Ct.sim1Number||Ct.sim1||me.sim1Number||"",Un=Ct.sim2Number||Ct.sim2||me.sim2Number||"";Tn&&(ht=String(Tn).trim(),$i(ht)),Un&&(_t=String(Un).trim(),ta(_t));let Cn=Sn,or="";Ye==="1"?(or="SIM 2",_t&&(Cn=_t)):(Ye==="0"||!Ye)&&(or="SIM 1",ht&&(Cn=ht));const ar=me.walletMsisdn??((vt=me.payload)==null?void 0:vt.walletMsisdn)??"";let Er="VF-Cash";if(/Received\s*EGP/i.test(String(yt))){Er="InstaPay";const Qt=String(yt).match(/Received\s*EGP\s*([0-9.,]+)/i);Qt&&(wt=parseFloat(String(Qt[1]).replace(/,/g,"")));const vn=String(yt).match(/from\s+([0-9+]+)/i);vn&&(jt=sn(vn[1]));const us=String(yt).match(/Ref:\s*([A-Za-z0-9\-]+)/i);us&&(_r=String(us[1]).trim())}Ee({amount:Number(wt||0),sender:String(jt||""),senderName:Pt,reference:String(_r||""),text:yt,simNumber:Cn,simLabel:or,walletMsisdn:ar,providerLabel:Er,popupId:dt,sim1Number:ht,sim2Number:_t}),J(!0);try{Dr()}catch{}}if(je.type==="removed"){const me=je.doc.id,dt=(M==null?void 0:M.popupId)||"";dt&&dt===me&&(J(!1),Ee(null))}}}catch{}});$.current=G}catch{}})(),()=>{try{const Y=$.current;typeof Y=="function"&&Y()}catch{}}),[r==null?void 0:r.uid]),T.useEffect(()=>{const Y=(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android",B=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(Y||B)return;let q=!1;return(async()=>{try{const te="0.0.0",oe=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!oe.ok)return;const se=await oe.json(),ye=String((se==null?void 0:se.version)||"0.0.0"),X=!!(se!=null&&se.force);if(!q&&((xe,G)=>{const ue=String(xe).split(".").map(de=>parseInt(de,10)||0),he=String(G).split(".").map(de=>parseInt(de,10)||0);for(let de=0;de<Math.max(ue.length,he.length);de++){const ce=ue[de]||0,Re=he[de]||0;if(ce>Re)return 1;if(ce<Re)return-1}return 0})(ye,te)>0){if(X){try{window.location.reload()}catch{}return}try{l({title:"  ",description:` ${ye}      `})}catch{}}}catch{}})(),()=>{q=!0}},[]),T.useEffect(()=>{if(ge)try{const Y=(r==null?void 0:r.uid)||"default",B=localStorage.getItem(`sim1Number_${Y}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${Y}`)??localStorage.getItem("sim2Number")??"";$i(B),ta(q)}catch{}},[ge,r==null?void 0:r.uid]);const na=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),es=(()=>{const Y=(q,te)=>{const oe=String(q||"").replace(/^v/i,"").split(".").map(ye=>parseInt(ye,10)||0),se=String(te||"").replace(/^v/i,"").split(".").map(ye=>parseInt(ye,10)||0);for(let ye=0;ye<Math.max(oe.length,se.length);ye++){const X=oe[ye]||0,we=se[ye]||0;if(X>we)return 1;if(X<we)return-1}return 0},B=[k,E,na].filter(Boolean);return B.length===0?"":B.reduce((q,te)=>Y(te,q)>0?te:q)})();return _.jsxs(_.Fragment,{children:[_.jsx(av,{open:lt,onOpenChange:()=>{},children:_.jsxs(lm,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:Y=>{try{Y.preventDefault()}catch{}},onEscapeKeyDown:Y=>{try{Y.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[_.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),_.jsx(cm,{className:"text-center",children:_.jsxs("div",{className:"flex items-center justify-center gap-3",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:_.jsx(dU,{className:"w-6 h-6"})}),_.jsx(um,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),_.jsxs("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:[_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"1"}),_.jsx("div",{children:"  ( )                        ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"2"}),_.jsx("div",{children:"                         ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"3"}),_.jsx("div",{children:"       (   )        ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"4"}),_.jsx("div",{children:"                    ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"5"}),_.jsx("div",{children:"               ."})]})]}),_.jsx("div",{className:"mt-4",children:_.jsx(ts,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Fn,children:"  "})})]})}),U.useEffect(()=>{try{const Y=(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android",B=(r==null?void 0:r.uid)||"";if(!Y||!B)return;const q=`androidPermsRequested_${B}`;localStorage.getItem(q)==="true"||(localStorage.setItem(q,"true"),setTimeout(()=>{try{window.location.href="cashy://requestPerms"}catch{}},300))}catch{}},[r==null?void 0:r.uid]),(()=>{try{const Y=(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android",B=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),j&&(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android"&&_.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:_.jsx("span",{className:"text-2xl",children:"!"})}),_.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),_.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),_.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:_.jsx(ts,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),c&&h&&_.jsx(av,{open:c,onOpenChange:Y=>{h!=null&&h.force||d(Y)},children:_.jsxs(lm,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[_.jsxs(cm,{className:"text-center",children:[_.jsx(um,{className:"text-base md:text-lg font-bold text-gray-900",children:h.title}),_.jsx(c_,{className:"text-sm text-gray-700 whitespace-pre-line",children:h.message}),_.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:es?`  : v${es}`:""})]}),_.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!h.force&&!m&&!w&&_.jsx(ts,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>d(!1),children:""}),!w&&_.jsx(ts,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const Y=String((h==null?void 0:h.versionId)||"").trim(),B=h==null?void 0:h.versionCode;if(Y)try{localStorage.setItem("android_last_ack_version_id",Y)}catch{}if(typeof B=="number")try{localStorage.setItem("android_last_ack_code",String(B))}catch{}if((async()=>{try{if(r!=null&&r.uid&&Y){const{doc:te,setDoc:oe,serverTimestamp:se}=await ee(async()=>{const{doc:we,setDoc:xe,serverTimestamp:G}=await Promise.resolve().then(()=>Nn);return{doc:we,setDoc:xe,serverTimestamp:G}},void 0,import.meta.url),{db:ye}=await ee(async()=>{const{db:we}=await Promise.resolve().then(()=>Yt);return{db:we}},void 0,import.meta.url),X={lastAckAndroidVersion:Y,lastAckAt:se()};typeof B=="number"&&(X.lastAckAndroidCode=B),await oe(te(ye,"profiles",r.uid),X,{merge:!0})}}catch{}})(),(_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android"){const te=h.apkUrl,oe=`cashy://update?url=${encodeURIComponent(te)}`;S(!0),v({percent:0,downloaded:0,total:0});try{O.current&&clearInterval(O.current),O.current=setInterval(()=>{v(se=>{const ye=typeof(se==null?void 0:se.percent)=="number"?se.percent:0,X=C.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(ye+X))),downloaded:(se==null?void 0:se.downloaded)??0,total:(se==null?void 0:se.total)??0}})},600)}catch{}window.location.href=oe;try{N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{try{C.current=!1}catch{}try{N.current=null}catch{}},8e3)}catch{}}else{const te=h.apkUrl;try{window.open(te,"_blank")}catch{}}}catch{}},children:m?" ...":" "}),w&&_.jsx(ts,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((_e==null?void 0:_e.isNativePlatform)&&_e.getPlatform()==="android"){d(!1);try{const B=String((h==null?void 0:h.versionId)||"").trim();if(B){try{localStorage.setItem("android_last_ack_version_id",B)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:q,setDoc:te,serverTimestamp:oe}=await ee(async()=>{const{doc:we,setDoc:xe,serverTimestamp:G}=await Promise.resolve().then(()=>Nn);return{doc:we,setDoc:xe,serverTimestamp:G}},void 0,import.meta.url),{db:se}=await ee(async()=>{const{db:we}=await Promise.resolve().then(()=>Yt);return{db:we}},void 0,import.meta.url),ye={lastAckAndroidVersion:B,androidInstalledVersion:B,lastAckAt:oe(),androidInstalledAt:oe()},X=h==null?void 0:h.versionCode;if(typeof X=="number"){ye.lastAckAndroidCode=X,ye.androidInstalledCode=X;try{localStorage.setItem("android_installed_code",String(X)),localStorage.setItem("android_last_ack_code",String(X))}catch{}}await te(q(se,"profiles",r.uid),ye,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),m&&_.jsxs("div",{className:"mt-3 text-center",children:[_.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:_.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((p==null?void 0:p.percent)||0)))}%`}})}),_.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((p==null?void 0:p.percent)||0),"%"]})]})]})}),o&&_.jsx(av,{open:ge,onOpenChange:async Y=>{var B,q;if(J(Y),!Y){try{const te=(M==null?void 0:M.popupId)||"";if(te){const{db:oe}=await ee(async()=>{const{db:we}=await Promise.resolve().then(()=>Yt);return{db:we}},void 0,import.meta.url),{doc:se,updateDoc:ye,serverTimestamp:X}=await ee(async()=>{const{doc:we,updateDoc:xe,serverTimestamp:G}=await Promise.resolve().then(()=>Nn);return{doc:we,updateDoc:xe,serverTimestamp:G}},void 0,import.meta.url);try{await ye(se(oe,"pendingSmsPopups",te),{status:"dismissed",dismissedAt:X()})}catch{}try{(q=(B=fe.current)==null?void 0:B.add)==null||q.call(B,te);const we=Array.from(fe.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(we))}catch{}}}catch{}Ue(!1),Qe(""),qt(""),Kn(""),yn(!1),Ve(0)}},children:_.jsxs(lm,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[_.jsxs(cm,{children:[_.jsx(um,{children:M!=null&&M.providerLabel?_.jsxs(_.Fragment,{children:["   ",_.jsx("span",{className:"text-red-600",children:M.providerLabel})]}):"   "}),_.jsx(c_,{})]}),_.jsxs("div",{className:"text-sm",children:[_.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[_.jsx(ts,{variant:(M==null?void 0:M.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(M==null?void 0:M.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Ds((M==null?void 0:M.sim1Number)||vr,"SIM 1"),disabled:!(M!=null&&M.sim1Number||vr),children:(M==null?void 0:M.sim1Number)||vr||" "}),_.jsx(ts,{variant:(M==null?void 0:M.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(M==null?void 0:M.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Ds((M==null?void 0:M.sim2Number)||wr,"SIM 2"),disabled:!(M!=null&&M.sim2Number||wr),children:(M==null?void 0:M.sim2Number)||wr||" "})]}),_.jsx("div",{className:"border rounded-lg p-3",children:_.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"font-bold",children:[" ",(Or=M==null?void 0:M.amount)==null?void 0:Or.toLocaleString()]}),_.jsx("div",{className:"font-mono",children:(M==null?void 0:M.sender)||""}),_.jsxs("div",{className:"font-mono",children:[(M==null?void 0:M.simLabel)&&_.jsx("span",{className:`inline-flex items-center justify-center rounded-md px-1.5 py-0.5 text-xs font-bold mr-2 ${M.simLabel==="SIM 1"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:M.simLabel}),(M==null?void 0:M.simNumber)||"-"]}),(M==null?void 0:M.senderName)&&_.jsx("div",{children:M==null?void 0:M.senderName}),(M==null?void 0:M.reference)&&_.jsx("div",{className:"font-mono",children:M==null?void 0:M.reference}),(M==null?void 0:M.walletMsisdn)&&_.jsx("div",{className:"font-mono",children:M==null?void 0:M.walletMsisdn})]}),_.jsxs("div",{className:"space-y-2 text-right",children:[_.jsx("div",{children:"  "}),_.jsx("div",{children:" "}),_.jsx("div",{children:" "}),(M==null?void 0:M.senderName)&&_.jsx("div",{children:"  "}),(M==null?void 0:M.reference)&&_.jsx("div",{children:"  "}),(M==null?void 0:M.walletMsisdn)&&_.jsx("div",{children:"  "})]})]})}),Ce&&_.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[_.jsx("span",{className:"flex-1",children:"  ()"}),_.jsx("input",{type:"number",step:"0.01",min:"0",value:De,onChange:Y=>Qe(Y.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),Nr&&_.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("div",{className:"text-sm",children:" "}),_.jsxs("div",{className:"font-bold",children:[" ",yr.toLocaleString()]})]}),_.jsx("div",{className:"mt-3",children:_.jsx("input",{type:"text",value:Be,onChange:Y=>qt(Y.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),_.jsx("div",{className:"mt-3",children:_.jsx(ts,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Ue(!0),yn(!1)},children:""})})]}),Ge&&!Nr&&_.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),_.jsx("div",{className:"pt-2",children:_.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var Y;try{const q=String((M==null?void 0:M.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),te=q?parseFloat(String(q[1]).replace(",",".")):Number((M==null?void 0:M.amount)||0),{auth:oe}=await ee(async()=>{const{auth:he}=await Promise.resolve().then(()=>Yt);return{auth:he}},void 0,import.meta.url),se=((Y=oe.currentUser)==null?void 0:Y.uid)||"",ye=se?`selectedWallet_${se}`:"selectedWallet_default",X=localStorage.getItem(ye)||"",we=De&&De.trim()!==""?Math.max(0,parseFloat(De)):null;let xe=0;if(we!=null)xe=we;else try{const{merchantWalletService:he}=await ee(async()=>{const{merchantWalletService:Re}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:Re}},void 0,import.meta.url),de=await he.getById(String(X)),ce=de&&de.defaultWithdrawCommission;if(ce!=null)xe=Math.round((Number(ce)||0)*Number(te)/1e3*100)/100;else{const{calculateCommission:Re}=await ee(async()=>{const{calculateCommission:ot}=await Promise.resolve().then(()=>Oa);return{calculateCommission:ot}},void 0,import.meta.url);xe=Re(Number(te),"receive")}}catch{const{calculateCommission:he}=await ee(async()=>{const{calculateCommission:de}=await Promise.resolve().then(()=>Oa);return{calculateCommission:de}},void 0,import.meta.url);xe=he(Number(te),"receive")}const ue=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(te)+Number(xe):Number(te);Ve(Math.round(ue*100)/100),yn(!0)}catch{yn(!0)}},children:""})})]}),_.jsx("div",{className:"pt-3",children:_.jsx(ts,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const Y=String((M==null?void 0:M.text)||""),B=Y.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),q=B?parseFloat(String(B[1]).replace(",",".")):Number((M==null?void 0:M.amount)||0),te=Y.match(/\s+\s+(\d+)/i),oe=String((M==null?void 0:M.sender)||(te?te[1]:"")||""),se=Y.match(/\s*\s*([\d\.]+)/i),ye=String((M==null?void 0:M.reference)||(se?se[1]:String(Date.now())));ai({...M,amount:q,sender:oe,reference:ye,deferredMode:Ge,debtorName:Be,debtorNote:Ht})}catch{ai()}},children:" "})})]})})]})},Ix=()=>{const t=ri(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?_.jsxs(_.Fragment,{children:[_.jsx(n4,{}),_.jsx(M4,{})]}):null},Sx=()=>{const{user:t,loading:e}=ml();return e?_.jsx(i_,{}):t?_.jsx(dm,{}):_.jsx(Sp,{})},pG=()=>_.jsx(o6,{client:V2,children:_.jsx(m$,{children:_.jsxs(T3,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(_e!=null&&_e.isNativePlatform&&_e.getPlatform()==="android")&&_.jsx(OH,{}),_.jsx(mG,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&fG||_e!=null&&_e.isNativePlatform&&_e.getPlatform()==="android")?_.jsxs(c$,{children:[_.jsx(Ex,{}),_.jsx(Ix,{}),_.jsx(T.Suspense,{fallback:_.jsx(i_,{}),children:_.jsxs(PT,{children:[_.jsx(Ae,{path:"/",element:_e!=null&&_e.isNativePlatform&&_e.getPlatform()==="android"?_.jsx(Sx,{}):_.jsx(Rf,{})}),_.jsx(Ae,{path:"/dashboard-redirect",element:_.jsx(XA,{})}),_.jsx(Ae,{path:"/landing",element:_.jsx(Rf,{})}),_.jsx(Ae,{path:"/subscriptions",element:_.jsx(ZA,{})}),_.jsx(Ae,{path:"/auth",element:_.jsx(ex,{})}),_.jsx(Ae,{path:"/user/login",element:_.jsx(Sp,{})}),_.jsx(Ae,{path:"/user/forgot-password",element:_.jsx(sx,{})}),_.jsx(Ae,{path:"/user/register",element:_.jsx(Cf,{})}),_.jsx(Ae,{path:"/register",element:_.jsx(Cf,{})}),_.jsx(Ae,{path:"/user/account-setup",element:_.jsx(rx,{})}),_.jsx(Ae,{path:"/user/pending-approval",element:_.jsx(lx,{})}),_.jsx(Ae,{path:"/user/dashboard",element:_.jsx(dm,{})}),_.jsx(Ae,{path:"/branch/:shopId/dashboard",element:_.jsx(dm,{})}),_.jsx(Ae,{path:"/user/add-wallet",element:_.jsx(mx,{})}),_.jsx(Ae,{path:"/admin/login",element:_.jsx(cx,{})}),_.jsx(Ae,{path:"/admin/dashboard",element:_.jsx(ux,{})}),_.jsx(Ae,{path:"/admin/topups",element:_.jsx(tx,{})}),_.jsx(Ae,{path:"/admin/notifications",element:_.jsx(nx,{})}),_.jsx(Ae,{path:"/profile-settings",element:_.jsx(hx,{})}),_.jsx(Ae,{path:"/transactions",element:_.jsx(fx,{})}),_.jsx(Ae,{path:"/referrals",element:_.jsx(px,{})}),_.jsx(Ae,{path:"/privacy-policy",element:_.jsx(wx,{})}),_.jsx(Ae,{path:"/cpanel",element:_.jsx(gx,{})}),_.jsx(Ae,{path:"/cpanel/login",element:_.jsx(yx,{})}),_.jsx(Ae,{path:"/auth-test",element:_.jsx(dx,{})}),_.jsx(Ae,{path:"/topup",element:_.jsx(Pf,{})}),_.jsx(Ae,{path:"/recharge",element:_.jsx(Pf,{})}),_.jsx(Ae,{path:"/merchant/*",element:_.jsx(ax,{})}),_.jsx(Ae,{path:"/dashboard/login",element:_.jsx(ix,{})}),_.jsx(Ae,{path:"/dashboard",element:_.jsx(ox,{})}),_.jsx(Ae,{path:"*",element:_.jsx(vx,{})})]})}),_.jsx(_x,{})]}):_.jsxs(l$,{children:[_.jsx(Ex,{}),_.jsx(Ix,{}),_.jsx(T.Suspense,{fallback:_.jsx(i_,{}),children:_.jsxs(PT,{children:[_.jsx(Ae,{path:"/",element:_e!=null&&_e.isNativePlatform&&_e.getPlatform()==="android"?_.jsx(Sx,{}):_.jsx(Rf,{})}),_.jsx(Ae,{path:"/dashboard-redirect",element:_.jsx(XA,{})}),_.jsx(Ae,{path:"/landing",element:_.jsx(Rf,{})}),_.jsx(Ae,{path:"/subscriptions",element:_.jsx(ZA,{})}),_.jsx(Ae,{path:"/auth",element:_.jsx(ex,{})}),_.jsx(Ae,{path:"/user/login",element:_.jsx(Sp,{})}),_.jsx(Ae,{path:"/user/forgot-password",element:_.jsx(sx,{})}),_.jsx(Ae,{path:"/user/register",element:_.jsx(Cf,{})}),_.jsx(Ae,{path:"/register",element:_.jsx(Cf,{})}),_.jsx(Ae,{path:"/user/account-setup",element:_.jsx(rx,{})}),_.jsx(Ae,{path:"/user/pending-approval",element:_.jsx(lx,{})}),_.jsx(Ae,{path:"/user/dashboard",element:_.jsx(dm,{})}),_.jsx(Ae,{path:"/user/add-wallet",element:_.jsx(mx,{})}),_.jsx(Ae,{path:"/admin/login",element:_.jsx(cx,{})}),_.jsx(Ae,{path:"/admin/dashboard",element:_.jsx(ux,{})}),_.jsx(Ae,{path:"/admin/topups",element:_.jsx(tx,{})}),_.jsx(Ae,{path:"/admin/notifications",element:_.jsx(nx,{})}),_.jsx(Ae,{path:"/profile-settings",element:_.jsx(hx,{})}),_.jsx(Ae,{path:"/transactions",element:_.jsx(fx,{})}),_.jsx(Ae,{path:"/referrals",element:_.jsx(px,{})}),_.jsx(Ae,{path:"/privacy-policy",element:_.jsx(wx,{})}),_.jsx(Ae,{path:"/cpanel",element:_.jsx(gx,{})}),_.jsx(Ae,{path:"/cpanel/login",element:_.jsx(yx,{})}),_.jsx(Ae,{path:"/auth-test",element:_.jsx(dx,{})}),_.jsx(Ae,{path:"/topup",element:_.jsx(Pf,{})}),_.jsx(Ae,{path:"/recharge",element:_.jsx(Pf,{})}),_.jsx(Ae,{path:"/merchant/*",element:_.jsx(ax,{})}),_.jsx(Ae,{path:"/dashboard/login",element:_.jsx(ix,{})}),_.jsx(Ae,{path:"/dashboard",element:_.jsx(ox,{})}),_.jsx(Ae,{path:"*",element:_.jsx(vx,{})})]})}),_.jsx(_x,{})]})]})})}),gG=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},lv=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await ee(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},yG=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await ee(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},M2=T.createContext(void 0),vG=({children:t})=>{const[e,n]=T.useState(null),[r,s]=T.useState(!1),[i,o]=T.useState(null),{profile:a,user:l}=ml();T.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),S=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),m&&s(m==="true"),S&&o(Number(S))}catch{}},[]),T.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=Pe(Q,"cashierShift",a.shopId);let m=null;return(async()=>{try{(await Xt(f)).exists()||await cn(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),m=Oi(f,p=>{if(p.exists()){const v=p.data(),w=(v==null?void 0:v.shiftUser)||null,y=!!(v!=null&&v.isShiftActive),E=(v==null?void 0:v.shiftStartAt)??null;let R=w;if(!R)try{const k=localStorage.getItem("cashier_shift_user"),L=k?JSON.parse(k):null;L&&(R=L)}catch{}n(R),s(y),o(typeof E=="number"?E:E?Number(E):null);try{R?localStorage.setItem("cashier_shift_user",JSON.stringify(R)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",y?"true":"false"),E!=null&&localStorage.setItem("cashier_shift_start_at",String(E))}catch{}}},p=>{console.warn("cashierShift snapshot error:",p)})}catch(S){console.warn("Failed to init cashierShift doc:",S)}})(),()=>{m&&m()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const m=Pe(Q,"cashierShift",a.shopId);In(m,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const m=Pe(Q,"cashierShift",a.shopId);In(m,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const S=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,p=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(S);if(w==null){const E=localStorage.getItem(p);if(E!=null){w=E;try{localStorage.setItem(S,E),localStorage.removeItem(p)}catch{}}}if(w==null&&(l!=null&&l.uid)){const E=localStorage.getItem("cashBalance"),R=localStorage.getItem("userCashBalance");if(E!=null){try{localStorage.setItem(S,E),localStorage.removeItem("cashBalance")}catch{}w=E}else if(R!=null){try{localStorage.setItem(S,R),localStorage.removeItem("userCashBalance")}catch{}w=R}}const y=localStorage.getItem(v);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),y?localStorage.setItem("shiftStartWalletBalances",y):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=Pe(Q,"dashboardData",a.shopId),S=await Xt(m);if(S.exists()){const p=S.data(),v=Number((p==null?void 0:p.cashBalance)??0),w=(p==null?void 0:p.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),E=localStorage.getItem("shiftStartWalletBalances"),R=y?parseFloat(y):0,k=E?JSON.parse(E):{},L=!y||!Number.isFinite(R)||R===0,x=!E||Object.keys(k||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),x&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=Pe(Q,"cashierShift",a.shopId);In(f,{isShiftActive:!1})}}catch{}};return _.jsx(M2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},ZG=()=>{const t=T.useContext(M2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class wG extends T.Component{constructor(){super(...arguments);_u(this,"state",{hasError:!1,error:null});_u(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return _.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:_.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[_.jsx("div",{className:"flex justify-center",children:_.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:_.jsx(LP,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),_.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,_.jsxs(ts,{onClick:this.handleReload,className:"w-full gap-2",children:[_.jsx(h0,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{n2()}catch{}const _G=()=>{const{theme:t="system"}=KP();return T.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};iP(document.getElementById("root")).render(_.jsx(wG,{children:_.jsx(i4,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:_.jsx(gH,{children:_.jsx(vG,{children:_.jsxs(nK,{children:[_.jsx(pG,{}),_.jsx(_G,{})]})})})})}));export{ri as $,DF as A,ts as B,zG as C,wa as D,qF as E,Sf as F,YB as G,cn as H,yw as I,xt as J,Xt as K,h$ as L,KS as M,NG as N,In as O,r_ as P,$F as Q,U as R,dU as S,qn as T,vU as U,DP as V,av as W,lm as X,cm as Y,um as Z,hG as _,Yc as a,WG as a$,ws as a0,Br as a1,qc as a2,jM as a3,Ey as a4,tn as a5,Nt as a6,Wn as a7,l0 as a8,Xs as a9,jq as aA,Kq as aB,c_ as aC,Zc as aD,VG as aE,yH as aF,oC as aG,lC as aH,SG as aI,s3 as aJ,dl as aK,a0 as aL,JK as aM,lP as aN,dK as aO,f2 as aP,Vd as aQ,s2 as aR,Wp as aS,i3 as aT,o3 as aU,oP as aV,UF as aW,OG as aX,KP as aY,e2 as aZ,iU as a_,BO as aa,xH as ab,pU as ac,ee as ad,sm as ae,ZG as af,eK as ag,_e as ah,HS as ai,LF as aj,dO as ak,JE as al,i_ as am,QS as an,PT as ao,Ae as ap,vo as aq,GS as ar,zF as as,iH as at,Ap as au,Me as av,f0 as aw,l8 as ax,$q as ay,BG as az,DG as b,VH as b$,qG as b0,HG as b1,sH as b2,KG as b3,LH as b4,kM as b5,rK as b6,a8 as b7,tH as b8,MF as b9,Z3 as bA,L3 as bB,hr as bC,xG as bD,CG as bE,GE as bF,jH as bG,wy as bH,ft as bI,XG as bJ,eH as bK,YG as bL,aG as bM,cG as bN,JG as bO,N2 as bP,VM as bQ,D2 as bR,O2 as bS,uG as bT,k2 as bU,lG as bV,p$ as bW,kG as bX,$O as bY,_a as bZ,c8 as b_,QF as ba,_U as bb,Ri as bc,sF as bd,ph as be,MG as bf,XO as bg,ZO as bh,rU as bi,LP as bj,NH as bk,kH as bl,Vn as bm,MA as bn,CH as bo,Zp as bp,U3 as bq,N3 as br,AG as bs,dw as bt,dr as bu,eg as bv,C3 as bw,k3 as bx,$m as by,xC as bz,o0 as c,GG as c0,MO as c1,nH as c2,kF as c3,Nn as c4,Yt as c5,Mu as c6,Yy as c7,DH as c8,QG as c9,a_ as ca,AH as d,TH as e,kt as f,bH as g,Oe as h,Q as i,_ as j,Ke as k,uu as l,$G as m,Hq as n,Do as o,Js as p,$e as q,T as r,Fe as s,ZF as t,ml as u,KF as v,QB as w,Pe as x,Oi as y,Jn as z};
//# sourceMappingURL=index-BajlLdY5.js.map
