import{aO as X,S as a,bJ as Y,I as p,aP as z,aQ as k,aT as v,bi as H,aN as J,bD as Q}from"./index-C_crvORM.js";import{X as Z}from"./select-QKdc2TYn-CHN9ZvrB.js";var E="rovingFocusGroup.onEntryFocus",q={bubbles:!1,cancelable:!0},m="RovingFocusGroup",[D,j,V]=Y(m),[W,ie]=X(m,[V]),[ee,te]=W(m),G=a.forwardRef((e,o)=>p.jsx(D.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(D.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(re,{...e,ref:o})})}));G.displayName=m;var re=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:s,orientation:t,loop:S=!1,dir:y,currentTabStopId:b,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:T,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...w}=e,g=a.useRef(null),F=H(o,g),I=Z(y),[h,r]=J({prop:b,defaultProp:R??null,onChange:T,caller:m}),[l,c]=a.useState(!1),i=Q(d),M=j(s),x=a.useRef(!1),[O,C]=a.useState(0);return a.useEffect(()=>{const n=g.current;if(n)return n.addEventListener(E,i),()=>n.removeEventListener(E,i)},[i]),p.jsx(ee,{scope:s,orientation:t,dir:I,loop:S,currentTabStopId:h,onItemFocus:a.useCallback(n=>r(n),[r]),onItemShiftTab:a.useCallback(()=>c(!0),[]),onFocusableItemAdd:a.useCallback(()=>C(n=>n+1),[]),onFocusableItemRemove:a.useCallback(()=>C(n=>n-1),[]),children:p.jsx(k.div,{tabIndex:l||O===0?-1:0,"data-orientation":t,...w,ref:F,style:{outline:"none",...e.style},onMouseDown:v(e.onMouseDown,()=>{x.current=!0}),onFocus:v(e.onFocus,n=>{const B=!x.current;if(n.target===n.currentTarget&&B&&!l){const _=new CustomEvent(E,q);if(n.currentTarget.dispatchEvent(_),!_.defaultPrevented){const A=M().filter(f=>f.focusable),N=A.find(f=>f.active),U=A.find(f=>f.id===h),$=[N,U,...A].filter(Boolean).map(f=>f.ref.current);P($,u)}}x.current=!1}),onBlur:v(e.onBlur,()=>c(!1))})})}),K="RovingFocusGroupItem",L=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:s,focusable:t=!0,active:S=!1,tabStopId:y,children:b,...R}=e,T=z(),d=y||T,u=te(K,s),w=u.currentTabStopId===d,g=j(s),{onFocusableItemAdd:F,onFocusableItemRemove:I,currentTabStopId:h}=u;return a.useEffect(()=>{if(t)return F(),()=>I()},[t,F,I]),p.jsx(D.ItemSlot,{scope:s,id:d,focusable:t,active:S,children:p.jsx(k.span,{tabIndex:w?0:-1,"data-orientation":u.orientation,...R,ref:o,onMouseDown:v(e.onMouseDown,r=>{t?u.onItemFocus(d):r.preventDefault()}),onFocus:v(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:v(e.onKeyDown,r=>{if(r.key==="Tab"&&r.shiftKey){u.onItemShiftTab();return}if(r.target!==r.currentTarget)return;const l=ae(r,u.orientation,u.dir);if(l!==void 0){if(r.metaKey||r.ctrlKey||r.altKey||r.shiftKey)return;r.preventDefault();let c=g().filter(i=>i.focusable).map(i=>i.ref.current);if(l==="last")c.reverse();else if(l==="prev"||l==="next"){l==="prev"&&c.reverse();const i=c.indexOf(r.currentTarget);c=u.loop?se(c,i+1):c.slice(i+1)}setTimeout(()=>P(c))}}),children:typeof b=="function"?b({isCurrentTabStop:w,hasTabStop:h!=null}):b})})});L.displayName=K;var oe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ne(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ae(e,o,s){const t=ne(e.key,s);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return oe[t]}function P(e,o=!1){const s=document.activeElement;for(const t of e)if(t===s||(t.focus({preventScroll:o}),document.activeElement!==s))return}function se(e,o){return e.map((s,t)=>e[(o+t)%e.length])}var le=G,fe=L;export{fe as d,le as f,ie as l};
//# sourceMappingURL=index-CS8iiUxP-G3EfImZz.js.map
