import{X as E,S as o,W as H,d as L,C as R,I as e,l as U,t as m,V,N,P as j,m as b,a as W,n as X,k as K}from"./index-C_crvORM.js";import{o as M,c as _,i as q,l as z}from"./card-SlwaggFS-CAdsFCUe.js";import{u as c}from"./label-_mnIMROJ-DCx9a6ad.js";import{n as w,c as v}from"./alert-NHJmLZVr-DrufTycw.js";import{t as A}from"./wallet-MP5ofXFw-CDPV0DMK.js";import{r as B,c as G}from"./user-plus-ClfWlz3y-BefGpS5r.js";import{e as J}from"./phone-fkjnGVtI-D5yZCm03.js";import{h as O}from"./store-i3EEOQHb-BqQT5qw5.js";const re=()=>{const[y]=E(),i=y.get("ref"),[s,C]=o.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",shopName:""}),[x,F]=o.useState(!1),[p,$]=o.useState(!1),[t,u]=o.useState(!1),[f,l]=o.useState(""),[g,P]=o.useState(null),{signUp:S}=H(),{toast:h}=L(),k=R();o.useEffect(()=>{i&&(P(`تم استخدام رمز الإحالة: ${i}`),h({title:"رمز الإحالة مُطبق",description:`تم تطبيق رمز الإحالة: ${i}`}))},[i,h]);const d=(a,n)=>{C(r=>({...r,[a]:n}))},I=()=>{if(!s.name||!s.email||!s.password||!s.confirmPassword||!s.phone||!s.shopName)return l("يرجى ملء جميع الحقول"),!1;if(s.name.length<2)return l("يجب أن يكون الاسم أكثر من حرفين"),!1;if(s.shopName.length<2)return l("يجب أن يكون اسم المحل أكثر من حرفين"),!1;const a=s.phone.replace(/\D/g,"");return/^01(0|1|2|5)\d{8}$/.test(a)?s.password.length<6?(l("يجب أن تكون كلمة المرور 6 أحرف على الأقل"),!1):s.password!==s.confirmPassword?(l("كلمات المرور غير متطابقة"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?!0:(l("البريد الإلكتروني غير صالح"),!1):(l("رقم مصري غير صالح: 11 رقم ويبدأ بـ 010/011/012/015"),!1)},D=async a=>{if(a.preventDefault(),l(""),!!I()){u(!0);try{const n=(s.email||"").trim().toLowerCase(),r=(s.password||"").trim();await S(n,r,s.name,s.phone,s.shopName,i||void 0),h({title:"تم إنشاء الحساب بنجاح",description:i?"تم إنشاء الحساب بنجاح مع رمز الإحالة":"سيتم مراجعة حسابك من قبل الإدارة قبل تفعيله"}),k("/dashboard-redirect")}catch(n){console.error("Registration error:",n);let r="حدث خطأ أثناء إنشاء الحساب";n.code==="auth/email-already-in-use"?r="البريد الإلكتروني مستخدم بالفعل":n.code==="auth/invalid-email"?r="البريد الإلكتروني غير صالح":n.code==="auth/weak-password"?r="كلمة المرور ضعيفة جداً":n.code==="auth/operation-not-allowed"&&(r="إنشاء الحسابات غير مفعل حالياً"),l(r),h({title:"خطأ في إنشاء الحساب",description:r,variant:"destructive"})}finally{u(!1)}}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-4 shadow-lg",children:e.jsx(A,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"كاشي لينك"}),e.jsx("p",{className:"text-gray-600",children:"نظام إدارة المحافظ الإلكترونية"})]}),e.jsxs(M,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[e.jsxs(_,{className:"text-center pb-4",children:[e.jsxs(q,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[e.jsx(B,{className:"h-6 w-6 text-green-600"}),"إنشاء حساب جديد"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بياناتك لإنشاء حساب جديد"})]}),e.jsxs(z,{className:"space-y-6",children:[g&&e.jsxs(w,{className:"fade-in-up border-green-200 bg-green-50",children:[e.jsx(G,{className:"h-4 w-4 text-green-600"}),e.jsx(v,{className:"text-green-700",children:g})]}),f&&e.jsx(w,{variant:"destructive",className:"fade-in-up",children:e.jsx(v,{children:f})}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"الاسم الكامل"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"name",type:"text",value:s.name,onChange:a=>d("name",a.target.value),placeholder:"أدخل اسمك الكامل",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"رقم الجوال"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"phone",type:"tel",value:s.phone,onChange:a=>d("phone",a.target.value),placeholder:"أدخل رقم مصري (11 رقم يبدأ بـ 010/011/012/015)",dir:"ltr",inputMode:"numeric",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"shopName",className:"text-sm font-medium text-gray-700",children:"اسم المحل"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"shopName",type:"text",value:s.shopName,onChange:a=>d("shopName",a.target.value),placeholder:"أدخل اسم المحل الخاص بك",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"email",type:"email",value:s.email,onChange:a=>d("email",a.target.value),placeholder:"أدخل بريدك الإلكتروني",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:t})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"password",type:x?"text":"password",value:s.password,onChange:a=>d("password",a.target.value),placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",autoComplete:"new-password",disabled:t}),e.jsx("button",{type:"button",onClick:()=>F(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:t,children:x?e.jsx(j,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2 fade-in-up",children:[e.jsx(c,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"confirmPassword",type:p?"text":"password",value:s.confirmPassword,onChange:a=>d("confirmPassword",a.target.value),placeholder:"أعد إدخال كلمة المرور",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",autoComplete:"new-password",disabled:t}),e.jsx("button",{type:"button",onClick:()=>$(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:t,children:p?e.jsx(j,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})]}),e.jsx(W,{type:"submit",disabled:t||!s.name||!s.email||!s.password||!s.confirmPassword||!s.phone||!s.shopName,className:"w-full h-12 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:["إنشاء حساب جديد",e.jsx(X,{className:"h-4 w-4"})]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",e.jsx(K,{to:"/user/login",className:"text-green-600 hover:text-green-700 font-medium transition-colors hover:underline",children:"تسجيل الدخول"})]})})]})]}),e.jsx("div",{className:"text-center mt-8 fade-in-up",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})})};export{re as default};
//# sourceMappingURL=UserRegisterPage-BkStJ7GT-C5fh_Ph1.js.map
