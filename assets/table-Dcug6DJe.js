import{W as ne,r as o,j as e,a4 as Ue,a7 as Z,ab as Me,bp as X,Z as P,u as oe,i as ie,aC as ce,aD as le,aE as de,aF as ue,aG as Oe,v as K,I as W,B as E,E as z,D as q,aH as Fe,aI as Ve,aJ as Ge,bs as $e,a as He,ah as Be,bt as Ke,bu as We,ap as ze,O as qe,ak as Ye}from"./index-DCCNgGPW.js";import{D as Je,a as Xe,b as Ze,c as Qe,d as ae,e as Y}from"./dropdown-menu-Cnglh8kr.js";import{M as es}from"./MasterPinDialog-BxzQrVxp.js";import{L as ss,g as ts}from"./switch-BF7eo6Gr.js";import{FreeTrialService as as}from"./freeTrialService-CSiXFwUm.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Hs=ne("activity",rs);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],os=ne("cloud-download",ns);var fe={exports:{}},me={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=o;function is(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var cs=typeof Object.is=="function"?Object.is:is,ls=D.useState,ds=D.useEffect,us=D.useLayoutEffect,fs=D.useDebugValue;function ms(r,s){var t=s(),d=ls({inst:{value:t,getSnapshot:s}}),i=d[0].inst,l=d[1];return us(function(){i.value=t,i.getSnapshot=s,J(i)&&l({inst:i})},[r,t,s]),ds(function(){return J(i)&&l({inst:i}),r(function(){J(i)&&l({inst:i})})},[r]),fs(t),t}function J(r){var s=r.getSnapshot;r=r.value;try{var t=s();return!cs(r,t)}catch{return!0}}function hs(r,s){return s()}var ws=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hs:ms;me.useSyncExternalStore=D.useSyncExternalStore!==void 0?D.useSyncExternalStore:ws;fe.exports=me;var ps=fe.exports;function gs(){return ps.useSyncExternalStore(xs,()=>!0,()=>!1)}function xs(){return()=>{}}var Q="Avatar",[vs]=Ue(Q),[bs,he]=vs(Q),we=o.forwardRef((r,s)=>{const{__scopeAvatar:t,...d}=r,[i,l]=o.useState("idle");return e.jsx(bs,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:e.jsx(Z.span,{...d,ref:s})})});we.displayName=Q;var pe="AvatarImage",ge=o.forwardRef((r,s)=>{const{__scopeAvatar:t,src:d,onLoadingStatusChange:i=()=>{},...l}=r,y=he(pe,t),v=js(d,l),p=Me(f=>{i(f),y.onImageLoadingStatusChange(f)});return X(()=>{v!=="idle"&&p(v)},[v,p]),v==="loaded"?e.jsx(Z.img,{...l,ref:s,src:d}):null});ge.displayName=pe;var xe="AvatarFallback",ve=o.forwardRef((r,s)=>{const{__scopeAvatar:t,delayMs:d,...i}=r,l=he(xe,t),[y,v]=o.useState(d===void 0);return o.useEffect(()=>{if(d!==void 0){const p=window.setTimeout(()=>v(!0),d);return()=>window.clearTimeout(p)}},[d]),y&&l.imageLoadingStatus!=="loaded"?e.jsx(Z.span,{...i,ref:s}):null});ve.displayName=xe;function re(r,s){return r?s?(r.src!==s&&(r.src=s),r.complete&&r.naturalWidth>0?"loaded":"loading"):"error":"idle"}function js(r,{referrerPolicy:s,crossOrigin:t}){const d=gs(),i=o.useRef(null),l=d?(i.current||(i.current=new window.Image),i.current):null,[y,v]=o.useState(()=>re(l,r));return X(()=>{v(re(l,r))},[l,r]),X(()=>{const p=M=>()=>{v(M)};if(!l)return;const f=p("loaded"),A=p("error");return l.addEventListener("load",f),l.addEventListener("error",A),s&&(l.referrerPolicy=s),typeof t=="string"&&(l.crossOrigin=t),()=>{l.removeEventListener("load",f),l.removeEventListener("error",A)}},[l,t,s]),y}var be=we,je=ge,Ne=ve;const ye=o.forwardRef(({className:r,...s},t)=>e.jsx(be,{ref:t,className:P("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s}));ye.displayName=be.displayName;const Se=o.forwardRef(({className:r,...s},t)=>e.jsx(je,{ref:t,className:P("aspect-square h-full w-full",r),...s}));Se.displayName=je.displayName;const Pe=o.forwardRef(({className:r,...s},t)=>e.jsx(Ne,{ref:t,className:P("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s}));Pe.displayName=Ne.displayName;function Ns({open:r,onOpenChange:s}){const{user:t}=oe(),{toast:d}=ie(),[i,l]=o.useState(!1),[y,v]=o.useState(!1),[p,f]=o.useState(!1),[A,M]=o.useState(!1),[ee,L]=o.useState(!1),[se,_]=o.useState(!1),[b,O]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,w]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),U=()=>{const u={currentPassword:"",newPassword:"",confirmPassword:""};return b.currentPassword||(u.currentPassword="كلمة المرور الحالية مطلوبة"),b.newPassword?b.newPassword.length<6&&(u.newPassword="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):u.newPassword="كلمة المرور الجديدة مطلوبة",b.confirmPassword?b.newPassword!==b.confirmPassword&&(u.confirmPassword="كلمات المرور غير متطابقة"):u.confirmPassword="تأكيد كلمة المرور مطلوب",w(u),!Object.values(u).some(h=>h!=="")},j=async u=>{if(u.preventDefault(),!(!U()||!t||!t.email)){l(!0);try{const h=Ve.credential(t.email,b.currentPassword);await Ge(t,h),_(!0),L(!0),d({title:"تأكيد الهوية",description:"أدخل الرقم السري الرئيسي لتأكيد تغيير كلمة المرور"})}catch(h){console.error("خطأ في تغيير كلمة المرور:",h);let k="حدث خطأ أثناء تغيير كلمة المرور";if(h.code==="auth/wrong-password"){w(C=>({...C,currentPassword:"كلمة المرور الحالية غير صحيحة"}));return}else if(h.code==="auth/weak-password"){w(C=>({...C,newPassword:"كلمة المرور ضعيفة جداً"}));return}else h.code==="auth/requires-recent-login"&&(k="يجب تسجيل الدخول مرة أخرى لتغيير كلمة المرور");d({title:"خطأ في تغيير كلمة المرور",description:k,variant:"destructive"})}finally{l(!1)}}},$=async()=>{if(t){l(!0);try{await $e(t,b.newPassword),d({title:"تم تغيير كلمة المرور بنجاح",description:"تم تحديث كلمة المرور الخاصة بك بنجاح"}),O({currentPassword:"",newPassword:"",confirmPassword:""}),w({currentPassword:"",newPassword:"",confirmPassword:""}),L(!1),_(!1),s(!1)}catch(u){console.error("خطأ في تحديث كلمة المرور:",u);let h="حدث خطأ أثناء تغيير كلمة المرور";u.code==="auth/requires-recent-login"&&(h="انتهت جلسة المصادقة. يرجى إعادة إدخال كلمة المرور الحالية"),d({title:"خطأ في تغيير كلمة المرور",description:h,variant:"destructive"})}finally{l(!1)}}},S=u=>h=>{O(k=>({...k,[u]:h.target.value})),c[u]&&w(k=>({...k,[u]:""}))},g=()=>{O({currentPassword:"",newPassword:"",confirmPassword:""}),w({currentPassword:"",newPassword:"",confirmPassword:""}),L(!1),_(!1),s(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(ce,{open:r,onOpenChange:g,children:e.jsxs(le,{className:"sm:max-w-[425px]",children:[e.jsxs(de,{children:[e.jsx(ue,{children:"تغيير كلمة المرور"}),e.jsx(Oe,{children:"أدخل كلمة المرور الحالية وكلمة المرور الجديدة لتحديث حسابك"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"currentPassword",children:"كلمة المرور الحالية"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"currentPassword",type:y?"text":"password",value:b.currentPassword,onChange:S("currentPassword"),className:c.currentPassword?"border-red-500":"",autoComplete:"off",disabled:i}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>v(!y),disabled:i,children:y?e.jsx(z,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]}),c.currentPassword&&e.jsx("p",{className:"text-sm text-red-500",children:c.currentPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"newPassword",children:"كلمة المرور الجديدة"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"newPassword",type:p?"text":"password",value:b.newPassword,onChange:S("newPassword"),className:c.newPassword?"border-red-500":"",autoComplete:"new-password",disabled:i}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!p),disabled:i,children:p?e.jsx(z,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]}),c.newPassword&&e.jsx("p",{className:"text-sm text-red-500",children:c.newPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور الجديدة"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"confirmPassword",type:A?"text":"password",value:b.confirmPassword,onChange:S("confirmPassword"),className:c.confirmPassword?"border-red-500":"",autoComplete:"new-password",disabled:i}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>M(!A),disabled:i,children:A?e.jsx(z,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]}),c.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:c.confirmPassword})]}),e.jsxs(Fe,{children:[e.jsx(E,{type:"button",variant:"outline",onClick:g,disabled:i,children:"إلغاء"}),e.jsxs(E,{type:"submit",disabled:i,children:[i&&e.jsx(ss,{className:"mr-2 h-4 w-4 animate-spin"}),"تغيير كلمة المرور"]})]})]})]})}),e.jsx(es,{open:ee&&se,onOpenChange:u=>{L(u),u||_(!1)},mode:"verify",title:"التحقق من الرقم السري الرئيسي",description:"لا يمكن تغيير كلمة المرور إلا بعد التحقق من الرقم السري الرئيسي",onSuccess:$,onCancel:()=>{L(!1),_(!1)}})]})}const ys="cashy.google.accessToken",Ss="cashy.google.email",Ps="cashy.google.expiresAt";function ks(){try{const r=localStorage.getItem(ys),s=localStorage.getItem(Ss),t=localStorage.getItem(Ps),d=t?Number(t):null;return{token:r,email:s,expiresAt:d}}catch{return{token:null,email:null,expiresAt:null}}}async function Cs(r,s,t){try{const d=await fetch("/user/google-backup-token",{method:"POST",headers:{"Content-Type":"application/json","X-USER-ID":r},body:JSON.stringify({email:s,refresh_token:t})}),i=await d.json().catch(()=>({}));return!!(d.ok&&(i!=null&&i.ok))}catch{return!1}}function Bs({className:r}){const{user:s,profile:t,signOut:d,updateUserProfile:i}=oe(),l=He(),[y,v]=o.useState(!1),{isShiftActive:p}=Be(),{toast:f}=ie(),[A,M]=o.useState(!1),[ee,L]=o.useState(!1),[se,_]=o.useState(!1),[{token:b},O]=o.useState(()=>ks()),c=typeof window<"u"?window.electronAPI:void 0,w=!!c,[U,j]=o.useState(!1),[$,S]=o.useState(!1),[g,u]=o.useState(""),[h,k]=o.useState(""),[C,H]=o.useState(0),[B,F]=o.useState(!1),[ke,Ce]=o.useState(""),[I,Ee]=o.useState(""),[Us,Ms]=o.useState(!1),[V,Ie]=o.useState(0),[Ae,Le]=o.useState(!1);o.useEffect(()=>{(async()=>{if(!(s!=null&&s.uid))return;const n=await as.checkTrialValidity(s.uid);Le(n.isValid&&!n.isExpired),Ie(n.hoursRemaining)})()},[s==null?void 0:s.uid]);const R=(a,n)=>{const m=String(a||"").split(".").map(x=>parseInt(x,10)||0),N=String(n||"").split(".").map(x=>parseInt(x,10)||0);for(let x=0;x<Math.max(m.length,N.length);x++){const T=m[x]||0,G=N[x]||0;if(T>G)return 1;if(T<G)return-1}return 0};o.useEffect(()=>{if(!(!w||!c))try{c.onUpdateAvailable(a=>{var m,N;const n=String(((m=a==null?void 0:a.info)==null?void 0:m.version)||"");u(n),k(String(((N=a==null?void 0:a.info)==null?void 0:N.notes)||"")),R(n,I)>0?j(!0):j(!1)}),c.onUpdateDownloaded(a=>{var m,N;const n=String(((m=a==null?void 0:a.info)==null?void 0:m.version)||"");u(n),k(String(((N=a==null?void 0:a.info)==null?void 0:N.notes)||"")),F(!1),H(100),R(n,I)>0?j(!0):j(!1);try{w&&(s!=null&&s.uid)&&n&&(i==null||i({lastAckDesktopVersion:n}))}catch{}}),c.onUpdateError(a=>{try{f({title:"فشل التحديث",description:String((a==null?void 0:a.message)||(a==null?void 0:a.code)||"تعذر التحميل"),variant:"destructive"})}catch{}}),typeof c.onUpdateProgress=="function"&&c.onUpdateProgress(a=>{const n=(a==null?void 0:a.percent)==null?0:Number(a.percent);F(!0),H(Math.max(0,Math.min(100,isNaN(n)?0:n)))}),typeof c.appVersion=="function"&&c.appVersion().then(a=>{typeof a=="string"&&Ee(a);try{w&&(s!=null&&s.uid)&&typeof a=="string"&&a&&(i==null||i({desktopInstalledVersion:a}))}catch{}}).catch(()=>{})}catch{}},[w,c]),o.useEffect(()=>{w&&C>=100&&S(!0)},[w,C]),o.useEffect(()=>{const a=Ke(n=>{const m=String((n==null?void 0:n.version)||""),x=`desktop_update_seen_${String((s==null?void 0:s.uid)||"anon")}`;let T="";try{T=localStorage.getItem(x)||""}catch{}if(m&&m!==g){if(R(m,I)>0)if(T===m)j(!1),S(!1);else{j(!0),S(!0);try{localStorage.setItem(x,m)}catch{}}else j(!1);u(m),k(String((n==null?void 0:n.notes)||""));const G=We({downloadURL_64:n==null?void 0:n.downloadURL_64,downloadURL_32:n==null?void 0:n.downloadURL_32})||"";Ce(G)}});return()=>{try{a()}catch{}}},[g,I,s==null?void 0:s.uid]);const _e=async()=>{var a;try{if(c){try{await c.checkUpdate()}catch{}S(!0),F(!0),H(0);const n=await((a=c.downloadUpdate)==null?void 0:a.call(c,ke))??await c.downloadUpdate();if(typeof n=="string"&&n.startsWith("err:")){try{f({title:"فشل التحديث",description:n.slice(4),variant:"destructive"})}catch{}F(!1)}else if(n==="noop")try{f({title:"لا يوجد تحديث",description:"لا تتوفر نسخة أحدث حالياً."})}catch{}else if(n==="manual")try{f({title:"جارٍ تنزيل التحديث",description:"سيتم تطبيق التحديث تلقائيًا بعد اكتمال التنزيل."})}catch{}else if(n==="autoUpdater")try{f({title:"تنزيل تلقائي",description:"سيتم تطبيق التحديث تلقائياً بواسطة النظام."})}catch{}}}catch(n){try{f({title:"فشل التحديث",description:(n==null?void 0:n.message)||"حدث خطأ أثناء التنزيل",variant:"destructive"})}catch{}}},Re=async()=>{try{if(c){const a=await c.applyUpdate();if(typeof a=="string"&&a.startsWith("err:"))try{f({title:"فشل تطبيق التحديث",description:a.slice(4),variant:"destructive"})}catch{}}}catch(a){try{f({title:"فشل تطبيق التحديث",description:(a==null?void 0:a.message)||"حدث خطأ أثناء تطبيق التحديث",variant:"destructive"})}catch{}}},Te=()=>t!=null&&t.fullName?t==null?void 0:t.fullName.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2):s.email?s.email.charAt(0).toUpperCase():"U",te=t!=null&&t.avatarId?ts(t.avatarId):null;if(o.useEffect(()=>{console.log("Profile updated in ProfileIcon:",t==null?void 0:t.avatarId)},[t==null?void 0:t.avatarId]),o.useEffect(()=>{const a=async n=>{try{if(!(n!=null&&n.data)||typeof n.data!="object"||n.origin!=="https://cashy.link")return;const{type:m,email:N,refresh_token:x}=n.data||{};m==="cashy_oauth_token"&&(s!=null&&s.uid)&&N&&x&&await Cs(s.uid,String(N),String(x))&&f({title:"تم ربط جوجل",description:"تم حفظ توكن النسخ الاحتياطي عبر الخادم."})}catch{}};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[s==null?void 0:s.uid]),!s)return null;const De=async()=>{try{await d()}catch(a){console.error("خطأ في تسجيل الخروج:",a)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[w&&e.jsxs(E,{type:"button",onClick:()=>{S(!0),R(g,I)>0&&j(!0)},title:"تحديث التطبيق",className:"relative inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",variant:"ghost",children:[e.jsx(os,{className:"w-5 h-5"}),U&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 inline-block w-2 h-2 rounded-full bg-red-500"})]}),e.jsxs(Je,{children:[e.jsx(Xe,{asChild:!0,children:e.jsx(E,{variant:"ghost",disabled:p,title:p?"غير متاح أثناء وجود وردية كاشير نشطة":void 0,className:`relative h-8 w-8 rounded-full p-0 hover:bg-transparent focus:ring-1 focus:ring-primary focus:ring-offset-1 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed ${r}`,children:e.jsx(ye,{className:"h-8 w-8 border border-border shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105 bg-white",children:te?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white dark:bg-neutral-900/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center scale-[2.5]",children:te.component})}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{src:s.photoURL||void 0,alt:(t==null?void 0:t.fullName)||s.email||"المستخدم",className:"object-cover"}),e.jsx(Pe,{className:"bg-white text-gray-900 font-semibold text-lg border-0",children:Te()})]})})})}),e.jsxs(Ze,{className:"w-64",align:"end",forceMount:!0,children:[e.jsx(Qe,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:(t==null?void 0:t.fullName)||"المستخدم"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:s.email}),(t==null?void 0:t.role)&&e.jsxs("p",{className:"text-xs leading-none text-muted-foreground",children:["الدور: ",t.role==="staff"?"مدير":t.role==="merchant"?"تاجر":"مستخدم"]}),Ae&&e.jsx("div",{className:"mt-2 flex items-center justify-center gap-1 bg-emerald-50 border border-emerald-200 text-emerald-800 text-xs rounded-md py-1",children:e.jsxs("span",{className:"font-semibold",children:["تجربة: ",V," ",V>=3&&V<=10?"ساعات":V===2?"ساعتين":"ساعة"]})})]})}),e.jsx(ae,{}),e.jsxs(Y,{onClick:()=>l("/profile-settings"),className:"cursor-pointer",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"إعدادات البروفيل"})]}),((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="staff")&&e.jsxs(Y,{onClick:()=>l("/admin"),className:"cursor-pointer",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"لوحة الإدارة"})]}),e.jsx(ae,{}),e.jsxs(Y,{onClick:De,className:"cursor-pointer text-red-600 focus:text-red-600",children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"تسجيل الخروج"})]})]})]})]}),w&&e.jsx(ce,{open:$,onOpenChange:a=>{if(S(a),!a){const m=`desktop_update_seen_${String((s==null?void 0:s.uid)||"anon")}`;try{g&&localStorage.setItem(m,g)}catch{}j(!1)}},children:e.jsxs(le,{className:"sm:max-w-md",children:[e.jsx(de,{children:e.jsx(ue,{children:"يوجد تحديث جديد للبرنامج"})}),e.jsx("div",{className:"text-sm",children:B?"جارٍ تنزيل التحديث...":U&&R(g,I)>0?"هل ترغب في تنزيله الآن؟":"التطبيق مُحدَّث لآخر إصدار"}),g&&e.jsxs("div",{className:"mt-2 text-xs",children:["الإصدار الجديد: ",e.jsxs("span",{className:"font-semibold",children:["v",g]})]}),I&&e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["إصدار التطبيق لديك: ",e.jsxs("span",{className:"font-semibold",children:["v",I]})]}),h&&e.jsx("div",{className:"mt-2 text-xs text-muted-foreground whitespace-pre-line",children:h}),B&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:e.jsx("div",{className:"h-2 bg-blue-600 rounded",style:{width:`${C}%`}})}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[Math.round(C),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3",children:[e.jsx(E,{variant:"outline",onClick:()=>{const n=`desktop_update_seen_${String((s==null?void 0:s.uid)||"anon")}`;try{g&&localStorage.setItem(n,g)}catch{}j(!1),S(!1)},children:"إلغاء"}),!B&&C<100&&U&&R(g,I)>0&&e.jsx(E,{className:"bg-blue-600 hover:bg-blue-700",onClick:_e,children:"بدء التنزيل"}),C>=100&&e.jsx(E,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{if(c!=null&&c.openUpdateFolder){const a=await c.openUpdateFolder();typeof a=="string"&&a.startsWith("err:")?f({title:"تعذر فتح مجلد التحديث",description:a.slice(4),variant:"destructive"}):f({title:"افتح ملف التثبيت",description:"تم فتح مجلد التحديث — اضغط على الملف لتثبيت."})}else await Re()}catch(a){f({title:"تعذر فتح مجلد التحديث",description:(a==null?void 0:a.message)||"حدث خطأ غير متوقع",variant:"destructive"})}},children:"تحديث الآن"})]})]})}),e.jsx(Ns,{open:y,onOpenChange:v})]})}const Es=o.forwardRef(({className:r,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:P("w-full caption-bottom text-sm",r),...s})}));Es.displayName="Table";const Is=o.forwardRef(({className:r,...s},t)=>e.jsx("thead",{ref:t,className:P("[&_tr]:border-b",r),...s}));Is.displayName="TableHeader";const As=o.forwardRef(({className:r,...s},t)=>e.jsx("tbody",{ref:t,className:P("[&_tr:last-child]:border-0",r),...s}));As.displayName="TableBody";const Ls=o.forwardRef(({className:r,...s},t)=>e.jsx("tfoot",{ref:t,className:P("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s}));Ls.displayName="TableFooter";const _s=o.forwardRef(({className:r,...s},t)=>e.jsx("tr",{ref:t,className:P("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s}));_s.displayName="TableRow";const Rs=o.forwardRef(({className:r,...s},t)=>e.jsx("th",{ref:t,className:P("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s}));Rs.displayName="TableHead";const Ts=o.forwardRef(({className:r,...s},t)=>e.jsx("td",{ref:t,className:P("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s}));Ts.displayName="TableCell";const Ds=o.forwardRef(({className:r,...s},t)=>e.jsx("caption",{ref:t,className:P("mt-4 text-sm text-muted-foreground",r),...s}));Ds.displayName="TableCaption";export{Hs as A,Bs as P,Es as T,Is as a,_s as b,Rs as c,As as d,Ts as e};
//# sourceMappingURL=table-Dcug6DJe.js.map
