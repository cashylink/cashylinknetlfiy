{"version":3,"file":"MaintenanceDialog-DP7Ch7_c.js","sources":["../../node_modules/lucide-react/dist/esm/icons/truck.js","../../src/components/MaintenanceDialog.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2\", key: \"wrbu53\" }],\n  [\"path\", { d: \"M15 18H9\", key: \"1lyqi6\" }],\n  [\n    \"path\",\n    {\n      d: \"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14\",\n      key: \"lysw3i\"\n    }\n  ],\n  [\"circle\", { cx: \"17\", cy: \"18\", r: \"2\", key: \"332jqn\" }],\n  [\"circle\", { cx: \"7\", cy: \"18\", r: \"2\", key: \"19iecd\" }]\n];\nconst Truck = createLucideIcon(\"truck\", __iconNode);\n\nexport { __iconNode, Truck as default };\n//# sourceMappingURL=truck.js.map\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Wrench, CheckCircle, Clock, Trash2, Shield, X, RefreshCw, Truck, PlayCircle } from 'lucide-react';\nimport { VideoModal } from '@/components/VideoModal';\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\nimport { db } from '@/firebase';\nimport { addDoc, collection, deleteDoc, doc, orderBy, query, serverTimestamp, updateDoc, where, getDocs, limit } from 'firebase/firestore';\n\nimport { useShop } from '@/hooks/useShop';\nimport { userDataService, telegramNotifier } from '@/integrations/firebase/services';\nimport { ProfitService } from '@/utils/profitService';\nimport MasterPinDialog from './MasterPinDialog';\n\n\ntype MaintenanceItemStatus = 'in_progress' | 'waiting_for_delivery' | 'completed';\n\ninterface MaintenanceItem {\n  id: string;\n  productName: string;\n  faultType?: string;\n  customerName?: string;\n  mobile?: string;\n  repairPrice: number; // Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­\n  wholesalePrice?: number; // Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©\n  partialPayment?: number;\n  remainingDue?: number;\n  status: MaintenanceItemStatus;\n  createdAt: Date;\n  completedAt?: Date;\n  userId: string;\n  profit?: number;\n  profitAdded?: boolean;\n}\n\ninterface Props {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst MaintenanceDialog: React.FC<Props> = ({ open, onOpenChange }) => {\n  const { user } = useFirebaseAuth();\n  const { shopId: shopIdCtx, profile } = useShop() || ({} as any);\n\n  const [items, setItems] = useState<MaintenanceItem[]>([]);\n  const [productName, setProductName] = useState('');\n  const [faultType, setFaultType] = useState('');\n  const [isVideoModalOpen, setIsVideoModalOpen] = useState(false);\n  const [customerName, setCustomerName] = useState('');\n  const [mobile, setMobile] = useState('');\n  const [repairPrice, setRepairPrice] = useState<string>('');\n  const [wholesalePrice, setWholesalePrice] = useState<string>('');\n  const [partialPayment, setPartialPayment] = useState<string>('');\n  // Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø§Ù†Ø© Ù…Ù†ÙØµÙ„Ø© Ù„Ø³Ø¹Ø± Ø§Ù„Ø²Ø¨ÙˆÙ†Ø› Ø³Ø¹Ø± Ø§Ù„Ø²Ø¨ÙˆÙ† Ù‡Ùˆ Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­\n\n  const [formVisible, setFormVisible] = useState<boolean>(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [showProfit, setShowProfit] = useState(false);\n  const [pinDialogOpen, setPinDialogOpen] = useState(false);\n  const [maintenanceDailyProfit, setMaintenanceDailyProfit] = useState(0);\n  const [maintenanceMonthlyProfit, setMaintenanceMonthlyProfit] = useState(0);\n  const [monthlyWaste, setMonthlyWaste] = useState(0);\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false);\n  const [showWasteHistory, setShowWasteHistory] = useState(false);\n  const [wasteHistory, setWasteHistory] = useState<any[]>([]);\n\n  const [wasteDialogOpen, setWasteDialogOpen] = useState(false);\n  const [wasteDevice, setWasteDevice] = useState('');\n  const [wasteFault, setWasteFault] = useState('');\n  const [wasteAmount, setWasteAmount] = useState('');\n\n  // ØªÙ‡ÙŠØ¦Ø© ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ù„ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙˆÙ‚ÙŠØª\n  const getLocalDateString = () => {\n    const d = new Date();\n    const year = d.getFullYear();\n    const month = String(d.getMonth() + 1).padStart(2, '0');\n    const day = String(d.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  };\n\n  const [searchDate, setSearchDate] = useState<string>(getLocalDateString());\n  const [searchDateProfit, setSearchDateProfit] = useState<number>(0);\n\n  // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø¨Ø§Ù„Øº\n  const formatMoney = (n: number) => `${new Intl.NumberFormat('ar-EG', { maximumFractionDigits: 0 }).format(Number(n || 0))} Ø¬.Ù…`;\n\n  const formRef = useRef<HTMLDivElement | null>(null);\n  useEffect(() => {\n    if (formVisible) {\n      formRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    }\n  }, [formVisible]);\n\n  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­\n  const computeProfit = (items: MaintenanceItem[], targetDateStr?: string) => {\n    const now = new Date();\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    const thisMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\n    const sDate = targetDateStr || searchDate;\n    let targetDate: Date;\n    \n    if (sDate) {\n      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙƒÙ†Øµ Ù…Ø­Ù„ÙŠ (YYYY-MM-DD) Ù„Ø¶Ù…Ø§Ù† ØªØ·Ø§Ø¨Ù‚Ù‡ Ù…Ø¹ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ\n      const [y, m, d] = sDate.split('-').map(Number);\n      targetDate = new Date(y, m - 1, d);\n    } else {\n      targetDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    }\n    \n    // ØªØµÙÙŠØ± Ø§Ù„ÙˆÙ‚Øª Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø© (Ø§Ø­ØªÙŠØ§Ø·ÙŠ)\n    targetDate.setHours(0, 0, 0, 0);\n\n    let daily = 0;\n    let monthly = 0;\n    let searchProfit = 0;\n\n    items.forEach(item => {\n      if (item.status === 'completed') {\n        // Ù†Ø³ØªØ®Ø¯Ù… completedAt Ù„Ø£Ù†Ù‡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø±Ø¨Ø­\n        const itemDate = item.completedAt ? new Date(item.completedAt) : new Date(item.createdAt);\n        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙˆÙ‚Øª Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ø§Ù„Ø£ÙŠØ§Ù…\n        const itemDay = new Date(itemDate.getFullYear(), itemDate.getMonth(), itemDate.getDate());\n        \n        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¨Ø­ Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… ÙŠÙƒÙ† Ù…Ø®Ø²Ù†Ø§Ù‹\n        const profit = item.profit !== undefined ? item.profit : ((item.repairPrice || 0) - (item.wholesalePrice || 0));\n        const finalProfit = Number.isFinite(profit) ? profit : 0;\n        \n        // Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ… (ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø¬Ù‡Ø§Ø²)\n        if (itemDay.getTime() === today.getTime()) {\n          daily += finalProfit;\n        }\n        \n        // Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø± (ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø¬Ù‡Ø§Ø²)\n        if (itemDate >= thisMonth) {\n          monthly += finalProfit;\n        }\n\n        // Ø£Ø±Ø¨Ø§Ø­ ÙŠÙˆÙ… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ø¯Ø¯\n        if (itemDay.getTime() === targetDate.getTime()) {\n          searchProfit += finalProfit;\n        }\n      }\n    });\n\n    setMaintenanceDailyProfit(daily);\n    setMaintenanceMonthlyProfit(monthly);\n    setSearchDateProfit(searchProfit);\n  };\n\n  // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ onSnapshot Ø¨Ù€ getDocs Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª\n  const fetchItems = async () => {\n    if (!user?.uid) return;\n    setIsRefreshing(true);\n\n    const handleSnap = (snap: any) => {\n      const list: MaintenanceItem[] = snap.docs.map((d: any) => {\n        const data = d.data() as any;\n        return {\n          id: d.id,\n          productName: data.productName,\n          faultType: data.faultType,\n          customerName: data.customerName,\n          mobile: data.mobile,\n          // ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ customerPrice ÙÙ‚Ø·\n          repairPrice: Number((data.repairPrice ?? data.customerPrice ?? 0)),\n          wholesalePrice: data.wholesalePrice !== undefined ? Number(data.wholesalePrice) : undefined,\n          partialPayment: data.partialPayment !== undefined ? Number(data.partialPayment) : undefined,\n          remainingDue: data.remainingDue !== undefined\n            ? Number(data.remainingDue)\n            : (data.partialPayment !== undefined\n              ? Math.max(0, Math.round(((Number(data.repairPrice ?? data.customerPrice ?? 0)) - Number(data.partialPayment)) * 100) / 100)\n              : undefined),\n          status: (data.status as MaintenanceItemStatus) || 'in_progress',\n          createdAt: data.createdAt?.toDate?.() || new Date(),\n          completedAt: data.completedAt?.toDate?.(),\n          userId: data.userId || user.uid,\n          profit: data.profit !== undefined ? Number(data.profit) : undefined,\n          profitAdded: data.profitAdded || false,\n        };\n      });\n      setItems(list);\n      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¨Ø¹Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©\n      computeProfit(list);\n    };\n\n    try {\n      // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ù…Ø¹ ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ createdAt (Ø£ÙØ¶Ù„ÙŠØ©)\n      const q1 = query(\n        collection(db, 'maintenance_items'),\n        where('userId', '==', user.uid),\n        orderBy('createdAt', 'desc')\n      );\n      const snap = await getDocs(q1);\n      handleSnap(snap);\n    } catch (err) {\n      console.warn('Failed to fetch with ordering, falling back without orderBy:', err);\n      try {\n        const q2 = query(\n          collection(db, 'maintenance_items'),\n          where('userId', '==', user.uid)\n        );\n        const snap2 = await getDocs(q2);\n        // ØªØ±ØªÙŠØ¨ Ù…Ø­Ù„ÙŠ\n        const docs = snap2.docs.sort((a, b) => {\n          const da = a.data().createdAt?.toDate?.() || new Date(0);\n          const db = b.data().createdAt?.toDate?.() || new Date(0);\n          return db.getTime() - da.getTime();\n        });\n        handleSnap({ docs });\n      } catch (e) {\n        console.warn('Failed to fetch maintenance items (fallback):', e);\n      }\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  const fetchMonthlyWaste = async () => {\n    if (!user?.uid) return;\n    const now = new Date();\n    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n    \n    try {\n      // Fetch waste from user's subcollection\n      const q = query(\n        collection(db, 'users', user.uid, 'maintenance_waste')\n      );\n      const snap = await getDocs(q);\n      \n      const total = snap.docs.reduce((sum, doc) => {\n        const data = doc.data();\n        const createdAt = data.createdAt?.toDate ? data.createdAt.toDate() : new Date(data.createdAt || 0);\n        \n        if (createdAt >= startOfMonth) {\n          return sum + (Number(data.amount) || 0);\n        }\n        return sum;\n      }, 0);\n      \n      setMonthlyWaste(total);\n    } catch (e) {\n      console.error('Error fetching waste:', e);\n    }\n  };\n\n  const fetchWasteHistory = async () => {\n    if (!user?.uid) return;\n    try {\n      const q = query(\n        collection(db, 'users', user.uid, 'maintenance_waste')\n      );\n      const snap = await getDocs(q);\n      const history = snap.docs\n        .map(doc => ({ id: doc.id, ...doc.data() }))\n        .sort((a: any, b: any) => {\n           const dateA = a.createdAt?.toDate ? a.createdAt.toDate() : new Date(a.createdAt || 0);\n           const dateB = b.createdAt?.toDate ? b.createdAt.toDate() : new Date(b.createdAt || 0);\n           return dateB.getTime() - dateA.getTime();\n        });\n      setWasteHistory(history);\n    } catch (e) {\n      console.error('Error fetching waste history:', e);\n    }\n  };\n\n  useEffect(() => {\n    if (open) {\n      fetchItems();\n      fetchMonthlyWaste();\n      fetchWasteHistory();\n    }\n  }, [user?.uid, open]);\n\n  const resetForm = () => {\n    setProductName('');\n    setFaultType('');\n    setCustomerName('');\n    setMobile('');\n    setRepairPrice('');\n    setWholesalePrice('');\n    setPartialPayment('');\n  };\n\n  const addItem = async (status: MaintenanceItemStatus) => {\n    // ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ©\n    if (!user?.uid) {\n      alert('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©');\n      return;\n    }\n    const numericRepair = Number(repairPrice);\n    const numericWholesale = wholesalePrice ? Number(wholesalePrice) : undefined;\n    const numericPartial = partialPayment ? Number(partialPayment) : undefined;\n    if (!productName.trim() || !numericRepair || Number.isNaN(numericRepair) || numericRepair <= 0) {\n      alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');\n      return;\n    }\n    try {\n      // Ø§Ø¨Ù†Ù Ø§Ù„Ø­Ù…ÙˆÙ„Ø© Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø­Ù‚ÙˆÙ„ undefined\n      const payload: any = {\n        productName: productName.trim(),\n        repairPrice: numericRepair,\n        status,\n        createdAt: serverTimestamp(),\n        userId: user.uid,\n        profitAdded: status === 'completed',\n      };\n      \n      // Ø£Ø¶Ù Ø­Ù‚Ù„ Ø§Ù„Ø±Ø¨Ø­ ÙÙ‚Ø· Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ù„Ù„Ø¹Ù†ØµØ± Ø­Ø§Ù„Ø© Ù…ÙƒØªÙ…Ù„Ø©\n      if (status === 'completed') {\n        payload.profit = Math.round((numericRepair - (numericWholesale || 0)) * 100) / 100;\n      }\n      \n      const _fault = faultType.trim();\n      const _customer = customerName.trim();\n      const _mobile = mobile.trim();\n      if (_fault) payload.faultType = _fault;\n      if (_customer) payload.customerName = _customer;\n      if (_mobile) payload.mobile = _mobile;\n      if (numericWholesale !== undefined) payload.wholesalePrice = numericWholesale;\n      if (status === 'completed') payload.completedAt = serverTimestamp();\n      if (numericPartial !== undefined) payload.partialPayment = numericPartial;\n      if (numericPartial !== undefined) payload.remainingDue = Math.max(0, Math.round((numericRepair - numericPartial) * 100) / 100);\n\n      const docRef = await addDoc(collection(db, 'maintenance_items'), payload);\n\n      // ÙƒØªØ§Ø¨Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¨ÙˆØ§Ø³Ø·Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„/Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù…Ù† Ø¹Ø¨Ø± Ø§Ù„Ù…Ù†ØµØ§Øª\n      try {\n        const commonFields: any = {\n          linkedId: docRef.id,\n          productName: payload.productName,\n          faultType: payload.faultType,\n          customerName: payload.customerName,\n          mobile: payload.mobile,\n          repairPrice: payload.repairPrice,\n          wholesalePrice: payload.wholesalePrice,\n          partialPayment: payload.partialPayment,\n          remainingDue: payload.remainingDue,\n          userId: user.uid,\n          profitAdded: payload.profitAdded,\n        };\n        \n        // Ø£Ø¶Ù Ø­Ù‚Ù„ Ø§Ù„Ø±Ø¨Ø­ ÙÙ‚Ø· Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ù„Ù„Ø¹Ù†ØµØ± Ø­Ø§Ù„Ø© Ù…ÙƒØªÙ…Ù„Ø©\n        if (payload.profit !== undefined) {\n          commonFields.profit = payload.profit;\n        }\n        \n        if (status === 'in_progress') {\n          await addDoc(collection(db, 'maintenance_pending'), {\n            ...commonFields,\n            status: 'in_progress',\n            createdAt: serverTimestamp(),\n          });\n        } else {\n          await addDoc(collection(db, 'maintenance_done'), {\n            ...commonFields,\n            status: 'completed',\n            createdAt: serverTimestamp(),\n            completedAt: serverTimestamp(),\n          });\n        }\n      } catch (syncErr) {\n        console.warn('ØªØ¹Ø°Ø± Ù…Ø²Ø§Ù…Ù†Ø© Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø© Ù…Ø¹ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„/Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±:', syncErr);\n      }\n\n      // ØªØ­Ø¯ÙŠØ« ØªÙØ§Ø¤Ù„ÙŠ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø­ØªÙ‰ Ù„Ùˆ ØªØ£Ø®Ø± Ø§Ù„Ù€ snapshot\n      setItems(prev => [{\n        id: docRef.id,\n        productName: payload.productName,\n        faultType: payload.faultType,\n        customerName: payload.customerName,\n        mobile: payload.mobile,\n        repairPrice: payload.repairPrice,\n        wholesalePrice: payload.wholesalePrice,\n        partialPayment: payload.partialPayment,\n        remainingDue: payload.remainingDue,\n        status: payload.status,\n        createdAt: new Date(),\n        completedAt: payload.status === 'completed' ? new Date() : undefined,\n        userId: user.uid,\n        profit: payload.profit,\n        profitAdded: payload.profitAdded,\n      }, ...prev]);\n\n      // Ø¥Ø°Ø§ ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙƒÙ…ÙƒØªÙ…Ù„ØŒ Ø£Ø¶Ù Ù…Ø¨Ù„Øº Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯ Ø§Ù„Ø¯Ø±Ø¬ Ø§Ù„Ù†Ù‚Ø¯ÙŠ\n      if (status === 'completed') {\n        try {\n          const amount = Math.max(0, Number(numericRepair || 0));\n          const genericKey = `cashBalance_${user?.uid || 'default'}`;\n          const shopKey = `cashBalance_${user?.uid || 'default'}_${shopIdCtx || 'main'}`;\n          const saved = localStorage.getItem(shopKey) ?? localStorage.getItem(genericKey) ?? '0';\n          const currentCash = parseFloat(saved || '0') || 0;\n          const newCash = currentCash + amount;\n          try { localStorage.setItem(genericKey, String(newCash)); } catch {}\n          try { localStorage.setItem(shopKey, String(newCash)); } catch {}\n          try { await userDataService.updateUserData(user.uid, { cashBalance: newCash }); } catch {}\n          try { window.dispatchEvent(new CustomEvent('cashBalanceChanged', { detail: { value: newCash } })); } catch {}\n        } catch {}\n      }\n      resetForm();\n      try { if (user?.uid) { const paidPart = (payload.partialPayment !== undefined) ? `ØŒ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ù…Ù‚Ø¯Ù…Ù‹Ø§ ${payload.partialPayment} Ø¬Ù†ÙŠÙ‡` : ''; const mobileText = payload.mobile ? `ØŒ Ø±Ù‚Ù… ØªÙ„ÙŠÙÙˆÙ† ${payload.mobile}` : ''; await telegramNotifier.send(user.uid, `ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¬Ù‡Ø§Ø² ØµÙŠØ§Ù†Ø© Ø¨Ø§Ø³Ù… ${payload.customerName || 'Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…'}ØŒ Ø§Ù„Ø¬Ù‡Ø§Ø² ${payload.productName}${mobileText}ØŒ Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­ ${payload.repairPrice} Ø¬Ù†ÙŠÙ‡${paidPart}`); } } catch {}\n    } catch (e) {\n      console.error('Failed to add maintenance item:', e);\n      const err: any = e || {};\n      const msgParts = [err.code, err.message].filter(Boolean).join(' â€” ');\n      const msg = msgParts || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';\n      alert(`Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©: ${msg}`);\n    }\n  };\n\n  const markWaitingForDelivery = async (id: string) => {\n    try {\n      await updateDoc(doc(db, 'maintenance_items', id), {\n        status: 'waiting_for_delivery'\n      });\n\n      setItems(prev => prev.map(i => {\n        if (i.id === id) {\n          return { ...i, status: 'waiting_for_delivery' };\n        }\n        return i;\n      }));\n\n      try {\n        const q = query(collection(db, 'maintenance_pending'), where('linkedId', '==', id), limit(1));\n        const snap = await getDocs(q);\n        if (!snap.empty) {\n          await updateDoc(doc(db, 'maintenance_pending', snap.docs[0].id), {\n            status: 'waiting_for_delivery'\n          });\n        }\n      } catch (e) {\n        console.warn('Sync error', e);\n      }\n    } catch (e) {\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©');\n    }\n  };\n\n  const markCompleted = async (id: string) => {\n    try {\n      const item = items.find(i => i.id === id);\n      const profit = Math.round(((item?.repairPrice || 0) - (item?.wholesalePrice || 0)) * 100) / 100;\n      const updatePayload: any = {\n        status: 'completed',\n        completedAt: serverTimestamp(),\n        profit,\n        profitAdded: true,\n      };\n      // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­: ÙŠØ¹ØªØ¨Ø± Ø£Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø³Ø¯Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„ÙƒØ§Ù…Ù„\n      const fullPaid = Math.round(((item?.repairPrice || 0)) * 100) / 100;\n      updatePayload.partialPayment = fullPaid;\n      updatePayload.remainingDue = 0;\n      await updateDoc(doc(db, 'maintenance_items', id), updatePayload);\n\n      // ØªØ­Ø¯ÙŠØ« Ù…Ø­Ù„ÙŠ ÙÙˆØ±ÙŠ (Optimistic Update)\n      setItems(prev => prev.map(i => {\n        if (i.id === id) {\n          return {\n            ...i,\n            status: 'completed',\n            completedAt: new Date(),\n            profit,\n            profitAdded: true,\n            partialPayment: fullPaid,\n            remainingDue: 0\n          };\n        }\n        return i;\n      }));\n      // Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ù„ÙŠ\n      const updatedItems = items.map(i => i.id === id ? { ...i, status: 'completed' as const, profit } : i);\n      computeProfit(updatedItems);\n\n      try {\n        const amount = Math.max(0, Number(item?.repairPrice || 0));\n        const genericKey = `cashBalance_${user?.uid || 'default'}`;\n        const shopKey = `cashBalance_${user?.uid || 'default'}_${shopIdCtx || 'main'}`;\n        const saved = localStorage.getItem(shopKey) ?? localStorage.getItem(genericKey) ?? '0';\n        const currentCash = parseFloat(saved || '0') || 0;\n        const newCash = currentCash + amount;\n        try { localStorage.setItem(genericKey, String(newCash)); } catch {}\n        try { localStorage.setItem(shopKey, String(newCash)); } catch {}\n        if (user?.uid) {\n          try { await userDataService.updateUserData(user.uid, { cashBalance: newCash }); } catch {}\n        }\n        try {\n          const shopId = (profile as any)?.shopId || shopIdCtx;\n          if (shopId) {\n            await updateDoc(doc(db, 'dashboardData', shopId), { cashBalance: newCash, lastUpdated: new Date().toISOString() } as any);\n          }\n        } catch {}\n        try { window.dispatchEvent(new CustomEvent('cashBalanceChanged', { detail: { value: newCash } })); } catch {}\n      } catch {}\n\n      // Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„/Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±\n      try {\n        const commonFields: any = {\n          linkedId: id,\n          productName: item?.productName,\n          faultType: item?.faultType,\n          customerName: item?.customerName,\n          mobile: item?.mobile,\n          repairPrice: item?.repairPrice,\n          wholesalePrice: item?.wholesalePrice,\n          profit,\n          partialPayment: fullPaid,\n          remainingDue: 0,\n          userId: user?.uid || item?.userId,\n          status: 'completed',\n          createdAt: item?.createdAt ? item.createdAt : serverTimestamp(),\n          completedAt: serverTimestamp(),\n          profitAdded: profit !== undefined,\n        };\n        // Ø£Ø¶Ù Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„\n        await addDoc(collection(db, 'maintenance_done'), commonFields);\n        // Ø§Ø­Ø°Ù Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¥Ù† ÙˆØ¬Ø¯\n        try {\n          const q = query(collection(db, 'maintenance_pending'), where('linkedId', '==', id), limit(1));\n          const snap = await getDocs(q);\n          const pendingDoc = snap.docs[0];\n          if (pendingDoc?.id) {\n            await deleteDoc(doc(db, 'maintenance_pending', pendingDoc.id));\n          }\n        } catch (delErr) {\n          console.warn('ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­:', delErr);\n        }\n      } catch (syncErr) {\n        console.warn('ØªØ¹Ø°Ø± Ù…Ø²Ø§Ù…Ù†Ø© Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„/Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±:', syncErr);\n      }\n      try { if (user?.uid) { const mobileText = item?.mobile ? `ØŒ Ø±Ù‚Ù… ØªÙ„ÙŠÙÙˆÙ† ${item.mobile}` : ''; await telegramNotifier.send(user.uid, `ØªÙ… ØªØµÙ„ÙŠØ­ Ø§Ù„Ø¬Ù‡Ø§Ø² ${item?.productName || ''} Ù„Ù„Ø¹Ù…ÙŠÙ„ ${item?.customerName || 'Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…'}${mobileText}ØŒ Ù…Ø¨Ù„Øº Ø§Ù„ØªØµÙ„ÙŠØ­ Ø§Ù„ÙƒØ§Ù…Ù„ ${(item?.repairPrice || 0)} Ø¬Ù†ÙŠÙ‡`); } } catch {}\n      \n      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¨Ø­ Ø¥Ù„Ù‰ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±\n      try {\n        if (profit !== undefined && profit > 0) {\n          await ProfitService.addProfit(user?.uid || '', {\n            amount: profit,\n            source: 'maintenance',\n            description: `Ø±Ø¨Ø­ ØªØµÙ„ÙŠØ­ ${item?.productName || 'Ø¬Ù‡Ø§Ø²'}`,\n            itemId: id,\n            timestamp: new Date(),\n          });\n        }\n      } catch (profitError) {\n        console.warn('Failed to add profit to reports:', profitError);\n      }\n    } catch (e) {\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø¥Ù„Ù‰ ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­');\n    }\n  };\n\n  const removeItem = async (id: string) => {\n    try {\n      await deleteDoc(doc(db, 'maintenance_items', id));\n      // Ø­Ø§ÙˆÙ„ Ø£ÙŠØ¶Ø§Ù‹ Ø­Ø°Ù Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰\n      try {\n        const qPending = query(collection(db, 'maintenance_pending'), where('linkedId', '==', id), limit(1));\n        const snapPending = await getDocs(qPending);\n        if (snapPending.docs[0]?.id) await deleteDoc(doc(db, 'maintenance_pending', snapPending.docs[0].id));\n      } catch {}\n      try {\n        const qDone = query(collection(db, 'maintenance_done'), where('linkedId', '==', id), limit(1));\n        const snapDone = await getDocs(qDone);\n        if (snapDone.docs[0]?.id) await deleteDoc(doc(db, 'maintenance_done', snapDone.docs[0].id));\n      } catch {}\n\n      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ø­Ù„ÙŠØ§Ù‹\n      setItems(prev => prev.filter(i => i.id !== id));\n    } catch (e) {\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©');\n    }\n  };\n\n  const handleAddWaste = async () => {\n    if (!user?.uid || !wasteAmount) return;\n    try {\n      await addDoc(collection(db, 'users', user.uid, 'maintenance_waste'), {\n        userId: user.uid,\n        amount: Number(wasteAmount),\n        description: `Ø¬Ù‡Ø§Ø²: ${wasteDevice} - Ø¹Ø·Ù„: ${wasteFault}`,\n        note: `Ø¬Ù‡Ø§Ø²: ${wasteDevice} - Ø¹Ø·Ù„: ${wasteFault}`,\n        createdAt: serverTimestamp(),\n        shopId: shopIdCtx,\n      });\n      setWasteDialogOpen(false);\n      setWasteDevice('');\n      setWasteFault('');\n      setWasteAmount('');\n      fetchMonthlyWaste();\n      fetchWasteHistory();\n      setShowSuccessDialog(true);\n    } catch (e) {\n      console.error(e);\n      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ');\n    }\n  };\n\n  const inProgressItems = items.filter(it => it.status === 'in_progress');\n  const waitingItems = items.filter(it => it.status === 'waiting_for_delivery');\n  const completedItems = items.filter(it => it.status === 'completed');\n\n\n\n  return (\n    <>\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent \n        className=\"z-[10001] maintenance-dialog sm:max-w-3xl w-screen sm:w-auto h-[90vh] overflow-y-auto rounded-none sm:rounded-lg p-0 dark:bg-[#121212]\"\n        overlayClassName=\"backdrop-blur-[5px] bg-black/10 !dark:bg-black\"\n      >\n        <DialogHeader className=\"sticky top-0 bg-white dark:bg-[#0F0F0F] z-20 border-b border-gray-200 dark:border-[#333] px-4 py-3\">\n          <div className=\"flex items-center gap-2\">\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Wrench className=\"h-4 w-4 text-amber-600\" />\n              Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"mr-2 p-1 h-auto rounded-full\"\n                onClick={fetchItems}\n                disabled={isRefreshing}\n                title=\"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\"\n              >\n                <RefreshCw className={`h-4 w-4 ${isRefreshing ? 'animate-spin' : ''}`} />\n              </Button>\n            </DialogTitle>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setIsVideoModalOpen(true)}\n              className=\"gap-1 px-2 text-rose-600 hover:text-rose-700 hover:bg-rose-50 mx-2\"\n            >\n              <PlayCircle className=\"h-5 w-5\" />\n              <span className=\"font-medium\">Ø´Ø±Ø­ Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ§Ù†Ù‡</span>\n            </Button>\n            <Button\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"ml-auto\"\n              onClick={() => onOpenChange(false)}\n              title=\"Ø¥ØºÙ„Ø§Ù‚\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </DialogHeader>\n\n        \n        <div className=\"px-4 py-3 space-y-3\">\n        \n        <div className=\"flex items-center justify-between\">\n          \n          <div className=\"flex items-center gap-2\">\n            <Button \n              size=\"sm\" \n              variant=\"outline\" \n              className=\"text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 hover:shadow-md transition-all duration-200\"\n              onClick={() => setPinDialogOpen(true)}\n            >\n              ğŸ“Š Ø¹Ø±Ø¶ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ØµÙŠØ§Ù†Ø©\n            </Button>\n          </div>\n\n          \n          <div className=\"flex items-center gap-2\">\n            {!formVisible && (\n              <>\n                <Button \n                  className=\"bg-red-600 hover:bg-red-700 hover:shadow-md transition-all duration-200\"\n                  onClick={() => setWasteDialogOpen(true)}\n                >\n                  ğŸ—‘ï¸ Ù‡ÙˆØ§Ù„Ùƒ\n                </Button>\n                <Button \n                  className=\"bg-amber-600 hover:bg-amber-700 hover:shadow-md transition-all duration-200\"\n                  onClick={() => setFormVisible(true)}\n                >\n                  â• Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² ØµÙŠØ§Ù†Ø©\n                </Button>\n              </>\n            )}\n          </div>\n        </div>\n\n        \n        {formVisible && (\n        <div ref={formRef}>\n        <Card className=\"mb-3 border-2 border-blue-100 dark:border-blue-900/30 bg-gradient-to-br from-blue-50 to-white dark:from-blue-900/20 dark:to-[#1A1A1A]\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm flex items-center gap-2\">\n              <span className=\"text-lg\">ğŸ“</span>\n              <span className=\"font-bold text-blue-800 dark:text-blue-200\">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„ØµÙŠØ§Ù†Ø©</span>\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            \n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n              <div className=\"space-y-1\">\n                <label className=\"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1\">\n                  <span>ğŸ”§</span> Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬\n                </label>\n                <Input value={productName} onChange={e => setProductName(e.target.value)} placeholder=\"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬\" className=\"bg-white dark:bg-[#1A1A1A]\" />\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1\">\n                  <span>âš ï¸</span> Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø·Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n                </label>\n                <Input value={faultType} onChange={e => setFaultType(e.target.value)} placeholder=\"Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø·Ù„\" className=\"bg-white dark:bg-[#1A1A1A]\" />\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1\">\n                  <span>ğŸ‘¤</span> Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n                </label>\n                <Input value={customerName} onChange={e => setCustomerName(e.target.value)} placeholder=\"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„\" className=\"bg-white dark:bg-[#1A1A1A]\" />\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1\">\n                  <span>ğŸ“±</span> Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n                </label>\n                <Input value={mobile} onChange={e => setMobile(e.target.value)} placeholder=\"01xxxxxxxxx\" className=\"bg-white dark:bg-[#1A1A1A]\" />\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1\">\n                  <span>ğŸ’°</span> Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­\n                </label>\n                <Input value={repairPrice} onChange={e => setRepairPrice(e.target.value)} placeholder=\"Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡\" className=\"bg-white dark:bg-[#1A1A1A]\" />\n              </div>\n              <div className=\"space-y-1\">\n                <label className=\"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1\">\n                  <span>ğŸ·ï¸</span> Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©\n                </label>\n                <Input value={wholesalePrice} onChange={e => setWholesalePrice(e.target.value)} placeholder=\"Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø© Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡\" className=\"bg-white dark:bg-[#1A1A1A]\" />\n              </div>\n              <div className=\"space-y-1 sm:col-span-2\">\n                <label className=\"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1\">\n                  <span>ğŸ’³</span> Ø¯ÙØ¹ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„ØªØµÙ„ÙŠØ­ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)\n                </label>\n                <Input value={partialPayment} onChange={e => setPartialPayment(e.target.value)} placeholder=\"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ù…Ù‚Ø¯Ù…Ù‹Ø§\" className=\"bg-white dark:bg-[#1A1A1A]\" />\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2 pt-2\">\n              <Button className=\"bg-amber-600 hover:bg-amber-700 hover:shadow-md transition-all duration-200\" onClick={() => addItem('in_progress')}>\n                â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­\n              </Button>\n              <Button className=\"bg-green-600 hover:bg-green-700 hover:shadow-md transition-all duration-200\" onClick={() => addItem('completed')}>\n                âœ… ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­\n              </Button>\n              <Button variant=\"outline\" onClick={() => setFormVisible(false)} className=\"hover:bg-gray-50 dark:hover:bg-gray-800\">\n                Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n        </div>\n        )}\n\n        <Separator />\n\n        \n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3\">\n          <Card>\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <div className=\"flex items-center gap-2 bg-amber-50 dark:bg-amber-900/20 px-3 py-1 rounded-full\">\n                  <Clock className=\"h-4 w-4 text-amber-600\" />\n                  <span className=\"font-semibold text-amber-800 dark:text-amber-200\">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­</span>\n                </div>\n                <Badge variant=\"secondary\" className=\"ml-auto text-[10px] bg-amber-100 text-amber-800\">{inProgressItems.length}</Badge>\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 sm:max-h-[280px] sm:overflow-y-auto\">\n              {inProgressItems.length === 0 ? (\n                <div className=\"text-xs text-gray-500 dark:text-gray-400\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØªØµÙ„ÙŠØ­</div>\n              ) : (\n                inProgressItems.map(item => (\n                  <div key={item.id} className=\"flex items-center justify-between p-3 bg-white dark:bg-[#1A1A1A] rounded-lg border border-gray-200 dark:border-[#333] hover:shadow-sm transition-all duration-200\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"text-lg\">ğŸ”§</span>\n                        <p className=\"text-sm font-semibold\">{item.productName}</p>\n                        <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full\">{item.repairPrice} Ø¬</span>\n                      </div>\n                      <div className=\"text-[11px] text-gray-600 dark:text-gray-300 space-y-1\">\n                        {item.faultType && (\n                          <div className=\"flex items-center gap-1\">\n                            <span className=\"text-xs\">âš ï¸</span>\n                            <span>{item.faultType}</span>\n                          </div>\n                        )}\n                        {(item.customerName || item.mobile) && (\n                          <div className=\"flex items-center gap-1\">\n                            <span className=\"text-xs\">ğŸ‘¤</span>\n                            <span>\n                              {item.customerName}\n                              {item.customerName && item.mobile && ' â€¢ '}\n                              {item.mobile}\n                            </span>\n                          </div>\n                        )}\n                        {typeof (item as any).remainingDue === 'number' && (\n                          <div className=\"flex items-center gap-1 text-orange-700 dark:text-orange-400\">\n                            <span className=\"text-xs\">ğŸ’°</span>\n                            <span>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: {(item as any).remainingDue} Ø¬</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <Button size=\"sm\" variant=\"outline\" className=\"h-8 bg-blue-50 hover:bg-blue-100 text-blue-600 border-blue-200\" onClick={() => markWaitingForDelivery(item.id)} title=\"Ù†Ù‚Ù„ Ø¥Ù„Ù‰ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…\">\n                        <Truck className=\"h-3 w-3\" />\n                      </Button>\n                      <Button size=\"sm\" className=\"h-8 bg-green-600 hover:bg-green-700 text-xs\" onClick={() => markCompleted(item.id)}>\n                        âœ“ ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­\n                      </Button>\n                      <Button size=\"sm\" variant=\"outline\" className=\"h-8\" onClick={() => removeItem(item.id)}>\n                        <Trash2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </CardContent>\n          </Card>\n\n          <Card className=\"mb-3 border-2 border-blue-50 dark:border-blue-900/20\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <div className=\"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full\">\n                  <Truck className=\"h-4 w-4 text-blue-600\" />\n                  <span className=\"font-semibold text-blue-800 dark:text-blue-200\">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…</span>\n                </div>\n                <Badge variant=\"secondary\" className=\"ml-auto text-[10px] bg-blue-100 text-blue-800\">{waitingItems.length}</Badge>\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 sm:max-h-[280px] sm:overflow-y-auto\">\n              {waitingItems.length === 0 ? (\n                <div className=\"text-xs text-gray-500 dark:text-gray-400\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…</div>\n              ) : (\n                waitingItems.map(item => (\n                  <div key={item.id} className=\"flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-[#1A1A1A] border border-gray-100 dark:border-[#333]\">\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium text-sm text-gray-900 dark:text-gray-100\">{item.productName}</div>\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400 flex flex-wrap gap-2 mt-1\">\n                        {item.customerName && <span className=\"bg-white dark:bg-[#252525] px-1 rounded border border-gray-100 dark:border-[#333]\">{item.customerName}</span>}\n                        {item.mobile && <span className=\"bg-white dark:bg-[#252525] px-1 rounded border border-gray-100 dark:border-[#333]\">{item.mobile}</span>}\n                        <div className=\"flex items-center gap-1 text-green-700 dark:text-green-400 font-bold\">\n                          <span className=\"text-xs\">ğŸ’°</span>\n                          <span>{item.repairPrice} Ø¬</span>\n                        </div>\n                        {typeof (item as any).partialPayment === 'number' && (\n                          <div className=\"flex items-center gap-1 text-blue-700 dark:text-blue-400\">\n                            <span className=\"text-xs\">ğŸ’³</span>\n                            <span>Ù…Ø¯ÙÙˆØ¹: {(item as any).partialPayment} Ø¬</span>\n                          </div>\n                        )}\n                        {typeof (item as any).remainingDue === 'number' && (\n                          <div className=\"flex items-center gap-1 text-orange-700 dark:text-orange-400\">\n                            <span className=\"text-xs\">ğŸ’°</span>\n                            <span>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: {(item as any).remainingDue} Ø¬</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <Button size=\"sm\" className=\"h-8 bg-green-600 hover:bg-green-700 text-xs\" onClick={() => markCompleted(item.id)}>\n                        âœ“ ØªØ³Ù„ÙŠÙ…\n                      </Button>\n                      <Button size=\"sm\" variant=\"outline\" className=\"h-8\" onClick={() => removeItem(item.id)}>\n                        <Trash2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <div className=\"flex items-center gap-2 bg-green-50 dark:bg-green-900/20 px-3 py-1 rounded-full\">\n                  <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                  <span className=\"font-semibold text-green-800 dark:text-green-200\">ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­</span>\n                </div>\n                <Badge variant=\"secondary\" className=\"ml-auto text-[10px] bg-green-100 text-green-800\">{completedItems.length}</Badge>\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 sm:max-h-[280px] sm:overflow-y-auto\">\n              {completedItems.length === 0 ? (\n                <div className=\"text-xs text-gray-500 dark:text-gray-400\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…Ù†ØªÙ‡ÙŠØ©</div>\n              ) : (\n                completedItems.map(item => (\n                  <div key={item.id} className=\"flex items-center justify-between p-3 bg-white dark:bg-[#1A1A1A] rounded-lg border border-gray-200 dark:border-[#333] hover:shadow-sm transition-all duration-200\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"text-lg\">âœ…</span>\n                        <p className=\"text-sm font-semibold\">{item.productName}</p>\n                        <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full\">{item.repairPrice} Ø¬</span>\n                      </div>\n                      <div className=\"text-[11px] text-gray-600 dark:text-gray-300 space-y-1\">\n                        {item.faultType && (\n                          <div className=\"flex items-center gap-1\">\n                            <span className=\"text-xs\">ğŸ”§</span>\n                            <span>{item.faultType}</span>\n                          </div>\n                        )}\n                        {(item.customerName || item.mobile) && (\n                          <div className=\"flex items-center gap-1\">\n                            <span className=\"text-xs\">ğŸ‘¤</span>\n                            <span>\n                              {item.customerName}\n                              {item.customerName && item.mobile && ' â€¢ '}\n                              {item.mobile}\n                            </span>\n                          </div>\n                        )}\n                        {typeof (item as any).partialPayment === 'number' && (\n                          <div className=\"flex items-center gap-1 text-emerald-700 dark:text-emerald-400\">\n                            <span className=\"text-xs\">ğŸ’µ</span>\n                            <span>Ø§Ù„Ù…Ø¯ÙÙˆØ¹: {(item as any).partialPayment} Ø¬</span>\n                          </div>\n                        )}\n                        {typeof (item as any).remainingDue === 'number' && (\n                          <div className=\"flex items-center gap-1 text-orange-700 dark:text-orange-400\">\n                            <span className=\"text-xs\">â³</span>\n                            <span>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: {(item as any).remainingDue} Ø¬</span>\n                          </div>\n                        )}\n                        <div className=\"flex items-center gap-1 text-gray-500 dark:text-gray-400 mt-1\">\n                          <span className=\"text-xs\">ğŸ“…</span>\n                          <span className=\"text-[10px]\">\n                            {item.completedAt instanceof Date \n                              ? item.completedAt.toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }) \n                              : (item.createdAt instanceof Date \n                                ? item.createdAt.toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }) \n                                : 'ØªØ§Ø±ÙŠØ® ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ')}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <Badge className=\"text-[10px] bg-green-100 text-green-800 border border-green-200\">âœ“ Ù…ÙƒØªÙ…Ù„</Badge>\n                      <Button size=\"sm\" variant=\"outline\" className=\"h-8\" onClick={() => removeItem(item.id)} title=\"Ø­Ø°Ù\">\n                        <Trash2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </CardContent>\n          </Card>\n        </div>\n        \n        {/* Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØµÙŠØ§Ù†Ø© Ù…Ø«Ø¨Øª Ù„Ø£Ø³ÙÙ„ ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¸Ù‡ÙˆØ± */}\n        <div className=\"sm:hidden sticky bottom-0 left-0 right-0 bg-white dark:bg-[#0F0F0F] border-t border-gray-200 dark:border-[#333] p-3 z-20\">\n          <Button className=\"w-full bg-amber-600 hover:bg-amber-700\" onClick={() => setFormVisible(true)}>\n            Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² ØµÙŠØ§Ù†Ø©\n          </Button>\n        </div>\n        </div>\n\n      </DialogContent>\n    </Dialog>\n\n\n    <Dialog open={wasteDialogOpen} onOpenChange={setWasteDialogOpen}>\n      <DialogContent \n        className=\"sm:max-w-[425px] z-[10005]\"\n        overlayClassName=\"backdrop-blur-[5px] bg-black/10 !dark:bg-black\"\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <span className=\"text-xl\">ğŸ—‘ï¸</span>\n            Ø¥Ø¶Ø§ÙØ© Ù‡ÙˆØ§Ù„Ùƒ\n          </DialogTitle>\n        </DialogHeader>\n        \n        <Card className=\"border-0 shadow-none bg-transparent\">\n          <CardContent className=\"space-y-4 p-0 pt-2\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium leading-none flex items-center gap-2 text-gray-700 dark:text-gray-300\">\n                <span>ğŸ“±</span> Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²\n              </label>\n              <Input \n                value={wasteDevice} \n                onChange={(e) => setWasteDevice(e.target.value)} \n                placeholder=\"Ù…Ø«Ø§Ù„: iPhone 11\" \n                className=\"bg-white dark:bg-[#1A1A1A]\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium leading-none flex items-center gap-2 text-gray-700 dark:text-gray-300\">\n                <span>âš ï¸</span> Ø§Ù„Ø¹Ø·Ù„\n              </label>\n              <Input \n                value={wasteFault} \n                onChange={(e) => setWasteFault(e.target.value)} \n                placeholder=\"ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„\" \n                className=\"bg-white dark:bg-[#1A1A1A]\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium leading-none flex items-center gap-2 text-gray-700 dark:text-gray-300\">\n                <span>ğŸ’°</span> Ø³Ø¹Ø± Ø§Ù„Ø®Ø³Ø§Ø±Ø©\n              </label>\n              <Input \n                type=\"number\" \n                value={wasteAmount} \n                onChange={(e) => setWasteAmount(e.target.value)} \n                placeholder=\"Ø§Ù„Ù…Ø¨Ù„Øº\" \n                className=\"bg-white dark:bg-[#1A1A1A]\"\n              />\n            </div>\n\n            <Button onClick={handleAddWaste} className=\"bg-red-600 hover:bg-red-700 w-full mt-6 shadow-md transition-all h-10 text-md font-semibold\">\n              Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØµØ§Ù„ Ù‡ÙˆØ§Ù„Ùƒ\n            </Button>\n            \n            <Button \n              variant=\"outline\" \n              onClick={() => setShowWasteHistory(true)} \n              className=\"w-full mt-2 border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700 dark:border-red-900 dark:text-red-400 dark:hover:bg-red-900/20\"\n            >\n              Ø¹Ø±Ø¶ Ø¥ÙŠØµØ§Ù„Ø§Øª Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ\n            </Button>\n          </CardContent>\n        </Card>\n      </DialogContent>\n    </Dialog>\n\n    <Dialog open={showSuccessDialog} onOpenChange={setShowSuccessDialog}>\n      <DialogContent \n        className=\"sm:max-w-[350px] z-[10006] flex flex-col items-center justify-center text-center p-6 border-0 shadow-lg rounded-xl\"\n        overlayClassName=\"backdrop-blur-[5px] bg-black/10 !dark:bg-black/95\"\n      >\n        <div className=\"h-20 w-20 bg-green-100 rounded-full flex items-center justify-center mb-6 animate-in zoom-in duration-300\">\n          <CheckCircle className=\"h-12 w-12 text-green-600\" />\n        </div>\n        <h3 className=\"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2\">ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!</h3>\n        <p className=\"text-gray-500 dark:text-gray-400 mb-8\">ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>\n        <Button \n          onClick={() => setShowSuccessDialog(false)} \n          className=\"bg-green-600 hover:bg-green-700 w-full h-12 text-lg font-medium rounded-lg shadow-sm\"\n        >\n          Ø­Ø³Ù†Ø§Ù‹\n        </Button>\n      </DialogContent>\n    </Dialog>\n\n    <Dialog open={showWasteHistory} onOpenChange={setShowWasteHistory}>\n      <DialogContent \n        className=\"sm:max-w-[600px] z-[10007] max-h-[80vh] overflow-hidden flex flex-col\"\n        overlayClassName=\"backdrop-blur-[5px] bg-black/10 !dark:bg-black/95\"\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2 text-xl\">\n            <span>ğŸ“‹</span>\n            Ø³Ø¬Ù„ Ø¥ÙŠØµØ§Ù„Ø§Øª Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"flex-1 overflow-y-auto pr-2 mt-4 space-y-3 custom-scrollbar\">\n          {wasteHistory.length === 0 ? (\n            <div className=\"text-center text-gray-500 py-8\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥ÙŠØµØ§Ù„Ø§Øª Ù‡ÙˆØ§Ù„Ùƒ Ø³Ø§Ø¨Ù‚Ø©</div>\n          ) : (\n            wasteHistory.map((item) => (\n              <div key={item.id} className=\"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg border border-gray-100 dark:border-gray-800 flex justify-between items-start\">\n                <div>\n                  <div className=\"font-semibold text-gray-900 dark:text-gray-100\">{item.note?.split(' - ')[0] || 'Ø¬Ù‡Ø§Ø² ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>\n                  <div className=\"text-sm text-gray-500 mt-1\">{item.note?.split(' - ')[1] || 'Ø¹Ø·Ù„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>\n                  <div className=\"text-xs text-gray-400 mt-2 flex items-center gap-1\">\n                    <Clock className=\"h-3 w-3\" />\n                    {item.createdAt?.toDate ? item.createdAt.toDate().toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }) : 'ØªØ§Ø±ÙŠØ® ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\n                  </div>\n                </div>\n                <div className=\"text-red-600 font-bold text-lg dir-ltr\">\n                  -{formatMoney(item.amount)}\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n\n      <MasterPinDialog\n        open={pinDialogOpen}\n        onOpenChange={setPinDialogOpen}\n        userId={user?.uid}\n        userRole={profile?.role}\n        onSuccess={() => {\n          setPinDialogOpen(false); // Close PIN dialog after successful verification\n          // Small delay to ensure PIN dialog overlay is gone\n          setTimeout(() => {\n            setShowProfit(true);\n          }, 100);\n        }}\n        className=\"z-[10003]\"\n        overlayClassName=\"backdrop-blur-[5px] bg-black/10 !dark:bg-black/95\"\n      />\n      <Dialog open={showProfit} onOpenChange={(open) => {\n        if (!open) {\n          setShowProfit(false);\n          setPinDialogOpen(false);\n        }\n      }}>\n        <DialogContent \n          className=\"z-[50000] max-w-md rounded-lg\" \n          hideClose\n          overlayClassName=\"backdrop-blur-[5px] bg-black/10 !dark:bg-black\"\n        >\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold\">Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ØµÙŠØ§Ù†Ø©</h3>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => {\n                setShowProfit(false);\n                setPinDialogOpen(false);\n              }}\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n          <div className=\"space-y-4\">\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg\">\n              <div className=\"text-sm text-blue-600 dark:text-blue-400 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…</div>\n              <div className=\"text-2xl font-bold text-blue-800 dark:text-blue-200\">\n                {formatMoney(maintenanceDailyProfit)}\n              </div>\n            </div>\n            <div className=\"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg\">\n              <div className=\"text-sm text-green-600 dark:text-green-400 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±</div>\n              <div className=\"text-2xl font-bold text-green-800 dark:text-green-200\">\n                {formatMoney(maintenanceMonthlyProfit)}\n              </div>\n            </div>\n\n            <div className=\"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg\">\n              <div className=\"text-sm text-red-600 dark:text-red-400 mb-1\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</div>\n              <div className=\"text-2xl font-bold text-red-800 dark:text-red-200\">\n                {formatMoney(monthlyWaste)}\n              </div>\n            </div>\n            \n            <div className=\"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-sm text-purple-600 dark:text-purple-400\">Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</div>\n                <Input\n                  type=\"date\"\n                  value={searchDate}\n                  onChange={(e) => {\n                    setSearchDate(e.target.value);\n                    computeProfit(items, e.target.value);\n                  }}\n                  className=\"w-40 h-8 text-xs bg-white dark:bg-gray-800 border-purple-200\"\n                />\n              </div>\n              <div>\n                <div className=\"text-xs text-purple-600/70 dark:text-purple-400/70 mb-1\">\n                  Ø£Ø±Ø¨Ø§Ø­ ÙŠÙˆÙ… {new Date(searchDate).toLocaleDateString('ar-EG')}\n                </div>\n                <div className=\"text-xl font-bold text-purple-800 dark:text-purple-200\">\n                  {formatMoney(searchDateProfit)}\n                </div>\n              </div>\n            </div>\n            <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n              <Button \n                className=\"w-full bg-gray-600 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600\"\n                onClick={() => {\n                  setShowProfit(false);\n                  setPinDialogOpen(false);\n                }}\n              >\n                Ø¥ØºÙ„Ø§Ù‚\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n      <VideoModal\n        isOpen={isVideoModalOpen}\n        onClose={() => setIsVideoModalOpen(false)}\n        videoUrl=\"https://www.youtube.com/watch?v=i8xiGeUTTyc\"\n        title=\"Ø´Ø±Ø­ Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ§Ù†Ù‡\"\n        className=\"z-[10002]\"\n      />\n    </>\n  );\n};\n\nexport default MaintenanceDialog;\n"],"names":["__iconNode","Truck","createLucideIcon","MaintenanceDialog","open","onOpenChange","user","useFirebaseAuth","shopIdCtx","profile","useShop","items","setItems","useState","productName","setProductName","faultType","setFaultType","isVideoModalOpen","setIsVideoModalOpen","customerName","setCustomerName","mobile","setMobile","repairPrice","setRepairPrice","wholesalePrice","setWholesalePrice","partialPayment","setPartialPayment","formVisible","setFormVisible","isRefreshing","setIsRefreshing","showProfit","setShowProfit","pinDialogOpen","setPinDialogOpen","maintenanceDailyProfit","setMaintenanceDailyProfit","maintenanceMonthlyProfit","setMaintenanceMonthlyProfit","monthlyWaste","setMonthlyWaste","showSuccessDialog","setShowSuccessDialog","showWasteHistory","setShowWasteHistory","wasteHistory","setWasteHistory","wasteDialogOpen","setWasteDialogOpen","wasteDevice","setWasteDevice","wasteFault","setWasteFault","wasteAmount","setWasteAmount","getLocalDateString","d","year","month","day","searchDate","setSearchDate","searchDateProfit","setSearchDateProfit","formatMoney","n","formRef","useRef","useEffect","_a","computeProfit","targetDateStr","now","today","thisMonth","sDate","targetDate","y","m","daily","monthly","searchProfit","item","itemDate","itemDay","profit","finalProfit","fetchItems","handleSnap","snap","list","data","_b","_d","_c","q1","query","collection","db","where","orderBy","getDocs","err","q2","docs","a","b","da","e","fetchMonthlyWaste","startOfMonth","q","total","sum","doc","fetchWasteHistory","history","dateA","resetForm","addItem","status","numericRepair","numericWholesale","numericPartial","payload","serverTimestamp","_fault","_customer","_mobile","docRef","addDoc","commonFields","syncErr","prev","amount","genericKey","shopKey","saved","newCash","userDataService","paidPart","mobileText","telegramNotifier","msg","markWaitingForDelivery","id","updateDoc","i","limit","markCompleted","updatePayload","fullPaid","updatedItems","shopId","pendingDoc","deleteDoc","delErr","ProfitService","profitError","removeItem","qPending","snapPending","qDone","snapDone","handleAddWaste","inProgressItems","it","waitingItems","completedItems","jsxs","Fragment","jsx","Dialog","DialogContent","DialogHeader","DialogTitle","Wrench","Button","RefreshCw","PlayCircle","X","Card","CardHeader","CardTitle","CardContent","Input","Separator","Clock","Badge","Trash2","CheckCircle","MasterPinDialog","VideoModal"],"mappings":"ghBAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CACjB,CAAC,OAAQ,CAAE,EAAG,4DAA6D,IAAK,QAAQ,CAAE,EAC1F,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CACE,OACA,CACE,EAAG,kFACH,IAAK,QACX,CACA,EACE,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,IAAK,IAAK,SAAU,EACxD,CAAC,SAAU,CAAE,GAAI,IAAK,GAAI,KAAM,EAAG,IAAK,IAAK,QAAQ,CAAE,CACzD,EACMC,GAAQC,GAAiB,QAASF,EAAU,ECsB5CG,GAAqC,CAAC,CAAE,KAAAC,EAAM,aAAAC,MAAmB,CACrE,KAAM,CAAE,KAAAC,CAAA,EAASC,GAAA,EACX,CAAE,OAAQC,EAAW,QAAAC,GAAYC,GAAA,GAAc,CAAA,EAE/C,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAA4B,CAAA,CAAE,EAClD,CAACC,EAAaC,EAAc,EAAIF,EAAAA,SAAS,EAAE,EAC3C,CAACG,GAAWC,EAAY,EAAIJ,EAAAA,SAAS,EAAE,EACvC,CAACK,GAAkBC,EAAmB,EAAIN,EAAAA,SAAS,EAAK,EACxD,CAACO,GAAcC,EAAe,EAAIR,EAAAA,SAAS,EAAE,EAC7C,CAACS,GAAQC,EAAS,EAAIV,EAAAA,SAAS,EAAE,EACjC,CAACW,GAAaC,EAAc,EAAIZ,EAAAA,SAAiB,EAAE,EACnD,CAACa,EAAgBC,EAAiB,EAAId,EAAAA,SAAiB,EAAE,EACzD,CAACe,EAAgBC,EAAiB,EAAIhB,EAAAA,SAAiB,EAAE,EAGzD,CAACiB,EAAaC,CAAc,EAAIlB,EAAAA,SAAkB,EAAK,EACvD,CAACmB,GAAcC,EAAe,EAAIpB,EAAAA,SAAS,EAAK,EAChD,CAACqB,GAAYC,CAAa,EAAItB,EAAAA,SAAS,EAAK,EAC5C,CAACuB,GAAeC,CAAgB,EAAIxB,EAAAA,SAAS,EAAK,EAClD,CAACyB,GAAwBC,EAAyB,EAAI1B,EAAAA,SAAS,CAAC,EAChE,CAAC2B,GAA0BC,EAA2B,EAAI5B,EAAAA,SAAS,CAAC,EACpE,CAAC6B,GAAcC,EAAe,EAAI9B,EAAAA,SAAS,CAAC,EAC5C,CAAC+B,GAAmBC,CAAoB,EAAIhC,EAAAA,SAAS,EAAK,EAC1D,CAACiC,GAAkBC,EAAmB,EAAIlC,EAAAA,SAAS,EAAK,EACxD,CAACmC,GAAcC,EAAe,EAAIpC,EAAAA,SAAgB,CAAA,CAAE,EAEpD,CAACqC,GAAiBC,CAAkB,EAAItC,EAAAA,SAAS,EAAK,EACtD,CAACuC,EAAaC,EAAc,EAAIxC,EAAAA,SAAS,EAAE,EAC3C,CAACyC,EAAYC,EAAa,EAAI1C,EAAAA,SAAS,EAAE,EACzC,CAAC2C,GAAaC,EAAc,EAAI5C,EAAAA,SAAS,EAAE,EAG3C6C,GAAqB,IAAM,CAC/B,MAAMC,MAAQ,KACRC,EAAOD,EAAE,YAAA,EACTE,EAAQ,OAAOF,EAAE,SAAA,EAAa,CAAC,EAAE,SAAS,EAAG,GAAG,EAChDG,EAAM,OAAOH,EAAE,QAAA,CAAS,EAAE,SAAS,EAAG,GAAG,EAC/C,MAAO,GAAGC,CAAI,IAAIC,CAAK,IAAIC,CAAG,EAChC,EAEM,CAACC,GAAYC,EAAa,EAAInD,EAAAA,SAAiB6C,IAAoB,EACnE,CAACO,GAAkBC,EAAmB,EAAIrD,EAAAA,SAAiB,CAAC,EAG5DsD,EAAeC,GAAc,GAAG,IAAI,KAAK,aAAa,QAAS,CAAE,sBAAuB,CAAA,CAAG,EAAE,OAAO,OAAOA,GAAK,CAAC,CAAC,CAAC,OAEnHC,GAAUC,EAAAA,OAA8B,IAAI,EAClDC,EAAAA,UAAU,IAAM,OACVzC,KACF0C,EAAAH,GAAQ,UAAR,MAAAG,EAAiB,eAAe,CAAE,SAAU,SAAU,MAAO,UAEjE,EAAG,CAAC1C,CAAW,CAAC,EAGhB,MAAM2C,GAAgB,CAAC9D,EAA0B+D,IAA2B,CAC1E,MAAMC,MAAU,KACVC,EAAQ,IAAI,KAAKD,EAAI,YAAA,EAAeA,EAAI,SAAA,EAAYA,EAAI,SAAS,EACjEE,EAAY,IAAI,KAAKF,EAAI,cAAeA,EAAI,SAAA,EAAY,CAAC,EAEzDG,EAAQJ,GAAiBX,GAC/B,IAAIgB,EAEJ,GAAID,EAAO,CAET,KAAM,CAACE,EAAGC,EAAGtB,CAAC,EAAImB,EAAM,MAAM,GAAG,EAAE,IAAI,MAAM,EAC7CC,EAAa,IAAI,KAAKC,EAAGC,EAAI,EAAGtB,CAAC,CACnC,MACEoB,EAAa,IAAI,KAAKJ,EAAI,YAAA,EAAeA,EAAI,SAAA,EAAYA,EAAI,SAAS,EAIxEI,EAAW,SAAS,EAAG,EAAG,EAAG,CAAC,EAE9B,IAAIG,EAAQ,EACRC,EAAU,EACVC,EAAe,EAEnBzE,EAAM,QAAQ0E,GAAQ,CACpB,GAAIA,EAAK,SAAW,YAAa,CAE/B,MAAMC,EAAWD,EAAK,YAAc,IAAI,KAAKA,EAAK,WAAW,EAAI,IAAI,KAAKA,EAAK,SAAS,EAElFE,EAAU,IAAI,KAAKD,EAAS,YAAA,EAAeA,EAAS,SAAA,EAAYA,EAAS,SAAS,EAGlFE,GAASH,EAAK,SAAW,OAAYA,EAAK,QAAWA,EAAK,aAAe,IAAMA,EAAK,gBAAkB,GACtGI,EAAc,OAAO,SAASD,EAAM,EAAIA,GAAS,EAGnDD,EAAQ,QAAA,IAAcX,EAAM,YAC9BM,GAASO,GAIPH,GAAYT,IACdM,GAAWM,GAITF,EAAQ,QAAA,IAAcR,EAAW,YACnCK,GAAgBK,EAEpB,CACF,CAAC,EAEDlD,GAA0B2C,CAAK,EAC/BzC,GAA4B0C,CAAO,EACnCjB,GAAoBkB,CAAY,CAClC,EAGMM,GAAa,SAAY,CAC7B,GAAI,EAACpF,GAAA,MAAAA,EAAM,KAAK,OAChB2B,GAAgB,EAAI,EAEpB,MAAM0D,EAAcC,GAAc,CAChC,MAAMC,EAA0BD,EAAK,KAAK,IAAKjC,GAAW,aACxD,MAAMmC,EAAOnC,EAAE,KAAA,EACf,MAAO,CACL,GAAIA,EAAE,GACN,YAAamC,EAAK,YAClB,UAAWA,EAAK,UAChB,aAAcA,EAAK,aACnB,OAAQA,EAAK,OAEb,YAAa,OAAQA,EAAK,aAAeA,EAAK,eAAiB,CAAE,EACjE,eAAgBA,EAAK,iBAAmB,OAAY,OAAOA,EAAK,cAAc,EAAI,OAClF,eAAgBA,EAAK,iBAAmB,OAAY,OAAOA,EAAK,cAAc,EAAI,OAClF,aAAcA,EAAK,eAAiB,OAChC,OAAOA,EAAK,YAAY,EACvBA,EAAK,iBAAmB,OACvB,KAAK,IAAI,EAAG,KAAK,OAAQ,OAAOA,EAAK,aAAeA,EAAK,eAAiB,CAAC,EAAK,OAAOA,EAAK,cAAc,GAAK,GAAG,EAAI,GAAG,EACzH,OACN,OAASA,EAAK,QAAoC,cAClD,YAAWC,GAAAvB,EAAAsB,EAAK,YAAL,YAAAtB,EAAgB,SAAhB,YAAAuB,EAAA,KAAAvB,SAAkC,KAC7C,aAAawB,GAAAC,EAAAH,EAAK,cAAL,YAAAG,EAAkB,SAAlB,YAAAD,EAAA,KAAAC,GACb,OAAQH,EAAK,QAAUxF,EAAK,IAC5B,OAAQwF,EAAK,SAAW,OAAY,OAAOA,EAAK,MAAM,EAAI,OAC1D,YAAaA,EAAK,aAAe,EAAA,CAErC,CAAC,EACDlF,EAASiF,CAAI,EAEbpB,GAAcoB,CAAI,CACpB,EAEA,GAAI,CAEF,MAAMK,EAAKC,EACTC,EAAWC,EAAI,mBAAmB,EAClCC,EAAM,SAAU,KAAMhG,EAAK,GAAG,EAC9BiG,GAAQ,YAAa,MAAM,CAAA,EAEvBX,EAAO,MAAMY,EAAQN,CAAE,EAC7BP,EAAWC,CAAI,CACjB,OAASa,EAAK,CACZ,QAAQ,KAAK,+DAAgEA,CAAG,EAChF,GAAI,CACF,MAAMC,EAAKP,EACTC,EAAWC,EAAI,mBAAmB,EAClCC,EAAM,SAAU,KAAMhG,EAAK,GAAG,CAAA,EAI1BqG,GAFQ,MAAMH,EAAQE,CAAE,GAEX,KAAK,KAAK,CAACE,EAAGC,IAAM,aACrC,MAAMC,IAAKf,GAAAvB,EAAAoC,EAAE,KAAA,EAAO,YAAT,YAAApC,EAAoB,SAApB,YAAAuB,EAAA,KAAAvB,KAAkC,IAAI,KAAK,CAAC,EAEvD,SADWwB,GAAAC,EAAAY,EAAE,KAAA,EAAO,YAAT,YAAAZ,EAAoB,SAApB,YAAAD,EAAA,KAAAC,KAAkC,IAAI,KAAK,CAAC,GAC7C,UAAYa,EAAG,QAAA,CAC3B,CAAC,EACDnB,EAAW,CAAE,KAAAgB,EAAM,CACrB,OAASI,EAAG,CACV,QAAQ,KAAK,gDAAiDA,CAAC,CACjE,CACF,QAAA,CACE9E,GAAgB,EAAK,CACvB,CACF,EAEM+E,GAAoB,SAAY,CACpC,GAAI,EAAC1G,GAAA,MAAAA,EAAM,KAAK,OAChB,MAAMqE,MAAU,KACVsC,EAAe,IAAI,KAAKtC,EAAI,cAAeA,EAAI,SAAA,EAAY,CAAC,EAElE,GAAI,CAEF,MAAMuC,EAAIf,EACRC,EAAWC,EAAI,QAAS/F,EAAK,IAAK,mBAAmB,CAAA,EAIjD6G,GAFO,MAAMX,EAAQU,CAAC,GAET,KAAK,OAAO,CAACE,EAAKC,IAAQ,OAC3C,MAAMvB,EAAOuB,EAAI,KAAA,EAGjB,QAFkB7C,EAAAsB,EAAK,YAAL,MAAAtB,EAAgB,OAASsB,EAAK,UAAU,OAAA,EAAW,IAAI,KAAKA,EAAK,WAAa,CAAC,IAEhFmB,EACRG,GAAO,OAAOtB,EAAK,MAAM,GAAK,GAEhCsB,CACT,EAAG,CAAC,EAEJzE,GAAgBwE,CAAK,CACvB,OAASJ,EAAG,CACV,QAAQ,MAAM,wBAAyBA,CAAC,CAC1C,CACF,EAEMO,GAAoB,SAAY,CACpC,GAAKhH,GAAA,MAAAA,EAAM,IACX,GAAI,CACF,MAAM4G,EAAIf,EACRC,EAAWC,EAAI,QAAS/F,EAAK,IAAK,mBAAmB,CAAA,EAGjDiH,GADO,MAAMf,EAAQU,CAAC,GACP,KAClB,IAAIG,IAAQ,CAAE,GAAIA,EAAI,GAAI,GAAGA,EAAI,MAAK,EAAI,EAC1C,KAAK,CAACT,EAAQC,IAAW,SACvB,MAAMW,GAAQhD,EAAAoC,EAAE,YAAF,MAAApC,EAAa,OAASoC,EAAE,UAAU,OAAA,EAAW,IAAI,KAAKA,EAAE,WAAa,CAAC,EAEpF,QADcb,EAAAc,EAAE,YAAF,MAAAd,EAAa,OAASc,EAAE,UAAU,OAAA,EAAW,IAAI,KAAKA,EAAE,WAAa,CAAC,GACvE,UAAYW,EAAM,QAAA,CAClC,CAAC,EACHvE,GAAgBsE,CAAO,CACzB,OAASR,EAAG,CACV,QAAQ,MAAM,gCAAiCA,CAAC,CAClD,CACF,EAEAxC,EAAAA,UAAU,IAAM,CACVnE,IACFsF,GAAA,EACAsB,GAAA,EACAM,GAAA,EAEJ,EAAG,CAAChH,GAAA,YAAAA,EAAM,IAAKF,CAAI,CAAC,EAEpB,MAAMqH,GAAY,IAAM,CACtB1G,GAAe,EAAE,EACjBE,GAAa,EAAE,EACfI,GAAgB,EAAE,EAClBE,GAAU,EAAE,EACZE,GAAe,EAAE,EACjBE,GAAkB,EAAE,EACpBE,GAAkB,EAAE,CACtB,EAEM6F,GAAU,MAAOC,GAAkC,CAEvD,GAAI,EAACrH,GAAA,MAAAA,EAAM,KAAK,CACd,MAAM,0CAA0C,EAChD,MACF,CACA,MAAMsH,EAAgB,OAAOpG,EAAW,EAClCqG,EAAmBnG,EAAiB,OAAOA,CAAc,EAAI,OAC7DoG,EAAiBlG,EAAiB,OAAOA,CAAc,EAAI,OACjE,GAAI,CAACd,EAAY,KAAA,GAAU,CAAC8G,GAAiB,OAAO,MAAMA,CAAa,GAAKA,GAAiB,EAAG,CAC9F,MAAM,8CAA8C,EACpD,MACF,CACA,GAAI,CAEF,MAAMG,EAAe,CACnB,YAAajH,EAAY,KAAA,EACzB,YAAa8G,EACb,OAAAD,EACA,UAAWK,EAAA,EACX,OAAQ1H,EAAK,IACb,YAAaqH,IAAW,WAAA,EAItBA,IAAW,cACbI,EAAQ,OAAS,KAAK,OAAOH,GAAiBC,GAAoB,IAAM,GAAG,EAAI,KAGjF,MAAMI,EAASjH,GAAU,KAAA,EACnBkH,EAAY9G,GAAa,KAAA,EACzB+G,EAAU7G,GAAO,KAAA,EACnB2G,MAAgB,UAAYA,GAC5BC,MAAmB,aAAeA,GAClCC,MAAiB,OAASA,GAC1BN,IAAqB,SAAWE,EAAQ,eAAiBF,GACzDF,IAAW,cAAaI,EAAQ,YAAcC,EAAA,GAC9CF,IAAmB,SAAWC,EAAQ,eAAiBD,GACvDA,IAAmB,SAAWC,EAAQ,aAAe,KAAK,IAAI,EAAG,KAAK,OAAOH,EAAgBE,GAAkB,GAAG,EAAI,GAAG,GAE7H,MAAMM,EAAS,MAAMC,EAAOjC,EAAWC,EAAI,mBAAmB,EAAG0B,CAAO,EAGxE,GAAI,CACF,MAAMO,EAAoB,CACxB,SAAUF,EAAO,GACjB,YAAaL,EAAQ,YACrB,UAAWA,EAAQ,UACnB,aAAcA,EAAQ,aACtB,OAAQA,EAAQ,OAChB,YAAaA,EAAQ,YACrB,eAAgBA,EAAQ,eACxB,eAAgBA,EAAQ,eACxB,aAAcA,EAAQ,aACtB,OAAQzH,EAAK,IACb,YAAayH,EAAQ,WAAA,EAInBA,EAAQ,SAAW,SACrBO,EAAa,OAASP,EAAQ,QAG5BJ,IAAW,cACb,MAAMU,EAAOjC,EAAWC,EAAI,qBAAqB,EAAG,CAClD,GAAGiC,EACH,OAAQ,cACR,UAAWN,EAAA,CAAgB,CAC5B,EAED,MAAMK,EAAOjC,EAAWC,EAAI,kBAAkB,EAAG,CAC/C,GAAGiC,EACH,OAAQ,YACR,UAAWN,EAAA,EACX,YAAaA,EAAA,CAAgB,CAC9B,CAEL,OAASO,EAAS,CAChB,QAAQ,KAAK,0DAA2DA,CAAO,CACjF,CAsBA,GAnBA3H,KAAiB,CAAC,CAChB,GAAIwH,EAAO,GACX,YAAaL,EAAQ,YACrB,UAAWA,EAAQ,UACnB,aAAcA,EAAQ,aACtB,OAAQA,EAAQ,OAChB,YAAaA,EAAQ,YACrB,eAAgBA,EAAQ,eACxB,eAAgBA,EAAQ,eACxB,aAAcA,EAAQ,aACtB,OAAQA,EAAQ,OAChB,cAAe,KACf,YAAaA,EAAQ,SAAW,YAAc,IAAI,KAAS,OAC3D,OAAQzH,EAAK,IACb,OAAQyH,EAAQ,OAChB,YAAaA,EAAQ,WAAA,EACpB,GAAGS,CAAI,CAAC,EAGPb,IAAW,YACb,GAAI,CACF,MAAMc,EAAS,KAAK,IAAI,EAAG,OAAOb,GAAiB,CAAC,CAAC,EAC/Cc,EAAa,gBAAepI,GAAA,YAAAA,EAAM,MAAO,SAAS,GAClDqI,EAAU,gBAAerI,GAAA,YAAAA,EAAM,MAAO,SAAS,IAAIE,GAAa,MAAM,GACtEoI,EAAQ,aAAa,QAAQD,CAAO,GAAK,aAAa,QAAQD,CAAU,GAAK,IAE7EG,GADc,WAAWD,GAAS,GAAG,GAAK,GAClBH,EAC9B,GAAI,CAAE,aAAa,QAAQC,EAAY,OAAOG,CAAO,CAAC,CAAG,MAAQ,CAAC,CAClE,GAAI,CAAE,aAAa,QAAQF,EAAS,OAAOE,CAAO,CAAC,CAAG,MAAQ,CAAC,CAC/D,GAAI,CAAE,MAAMC,GAAgB,eAAexI,EAAK,IAAK,CAAE,YAAauI,EAAS,CAAG,MAAQ,CAAC,CACzF,GAAI,CAAE,OAAO,cAAc,IAAI,YAAY,qBAAsB,CAAE,OAAQ,CAAE,MAAOA,CAAA,CAAQ,CAAG,CAAC,CAAG,MAAQ,CAAC,CAC9G,MAAQ,CAAC,CAEXpB,GAAA,EACA,GAAI,CAAE,GAAInH,GAAA,MAAAA,EAAM,IAAK,CAAE,MAAMyI,EAAYhB,EAAQ,iBAAmB,OAAa,oBAAoBA,EAAQ,cAAc,QAAU,GAAUiB,EAAajB,EAAQ,OAAS,gBAAgBA,EAAQ,MAAM,GAAK,GAAI,MAAMkB,GAAiB,KAAK3I,EAAK,IAAK,6BAA6ByH,EAAQ,cAAgB,UAAU,YAAYA,EAAQ,WAAW,GAAGiB,CAAU,iBAAiBjB,EAAQ,WAAW,QAAQgB,CAAQ,EAAE,CAAG,CAAE,MAAQ,CAAC,CAC3a,OAAShC,EAAG,CACV,QAAQ,MAAM,kCAAmCA,CAAC,EAClD,MAAMN,EAAWM,GAAK,CAAA,EAEhBmC,EADW,CAACzC,EAAI,KAAMA,EAAI,OAAO,EAAE,OAAO,OAAO,EAAE,KAAK,KAAK,GAC3C,YACxB,MAAM,qCAAqCyC,CAAG,EAAE,CAClD,CACF,EAEMC,GAAyB,MAAOC,GAAe,CACnD,GAAI,CACF,MAAMC,EAAUhC,EAAIhB,EAAI,oBAAqB+C,CAAE,EAAG,CAChD,OAAQ,sBAAA,CACT,EAEDxI,EAAS4H,GAAQA,EAAK,IAAIc,GACpBA,EAAE,KAAOF,EACJ,CAAE,GAAGE,EAAG,OAAQ,sBAAA,EAElBA,CACR,CAAC,EAEF,GAAI,CACF,MAAMpC,EAAIf,EAAMC,EAAWC,EAAI,qBAAqB,EAAGC,EAAM,WAAY,KAAM8C,CAAE,EAAGG,EAAM,CAAC,CAAC,EACtF3D,EAAO,MAAMY,EAAQU,CAAC,EACvBtB,EAAK,OACR,MAAMyD,EAAUhC,EAAIhB,EAAI,sBAAuBT,EAAK,KAAK,CAAC,EAAE,EAAE,EAAG,CAC/D,OAAQ,sBAAA,CACT,CAEL,OAASmB,EAAG,CACV,QAAQ,KAAK,aAAcA,CAAC,CAC9B,CACF,MAAY,CACV,MAAM,4BAA4B,CACpC,CACF,EAEMyC,GAAgB,MAAOJ,GAAe,CAC1C,GAAI,CACF,MAAM/D,EAAO1E,EAAM,KAAK2I,GAAKA,EAAE,KAAOF,CAAE,EAClC5D,EAAS,KAAK,SAAQH,GAAA,YAAAA,EAAM,cAAe,KAAMA,GAAA,YAAAA,EAAM,iBAAkB,IAAM,GAAG,EAAI,IACtFoE,EAAqB,CACzB,OAAQ,YACR,YAAazB,EAAA,EACb,OAAAxC,EACA,YAAa,EAAA,EAGTkE,EAAW,KAAK,QAAQrE,GAAA,YAAAA,EAAM,cAAe,GAAM,GAAG,EAAI,IAChEoE,EAAc,eAAiBC,EAC/BD,EAAc,aAAe,EAC7B,MAAMJ,EAAUhC,EAAIhB,EAAI,oBAAqB+C,CAAE,EAAGK,CAAa,EAG/D7I,EAAS4H,GAAQA,EAAK,IAAI,GACpB,EAAE,KAAOY,EACJ,CACL,GAAG,EACH,OAAQ,YACR,gBAAiB,KACjB,OAAA5D,EACA,YAAa,GACb,eAAgBkE,EAChB,aAAc,CAAA,EAGX,CACR,CAAC,EAEF,MAAMC,EAAehJ,EAAM,IAAI2I,GAAKA,EAAE,KAAOF,EAAK,CAAE,GAAGE,EAAG,OAAQ,YAAsB,OAAA9D,CAAA,EAAW8D,CAAC,EACpG7E,GAAckF,CAAY,EAE1B,GAAI,CACF,MAAMlB,EAAS,KAAK,IAAI,EAAG,QAAOpD,GAAA,YAAAA,EAAM,cAAe,CAAC,CAAC,EACnDqD,EAAa,gBAAepI,GAAA,YAAAA,EAAM,MAAO,SAAS,GAClDqI,EAAU,gBAAerI,GAAA,YAAAA,EAAM,MAAO,SAAS,IAAIE,GAAa,MAAM,GACtEoI,EAAQ,aAAa,QAAQD,CAAO,GAAK,aAAa,QAAQD,CAAU,GAAK,IAE7EG,GADc,WAAWD,GAAS,GAAG,GAAK,GAClBH,EAC9B,GAAI,CAAE,aAAa,QAAQC,EAAY,OAAOG,CAAO,CAAC,CAAG,MAAQ,CAAC,CAClE,GAAI,CAAE,aAAa,QAAQF,EAAS,OAAOE,CAAO,CAAC,CAAG,MAAQ,CAAC,CAC/D,GAAIvI,GAAA,MAAAA,EAAM,IACR,GAAI,CAAE,MAAMwI,GAAgB,eAAexI,EAAK,IAAK,CAAE,YAAauI,EAAS,CAAG,MAAQ,CAAC,CAE3F,GAAI,CACF,MAAMe,GAAUnJ,GAAA,YAAAA,EAAiB,SAAUD,EACvCoJ,GACF,MAAMP,EAAUhC,EAAIhB,EAAI,gBAAiBuD,CAAM,EAAG,CAAE,YAAaf,EAAS,YAAa,IAAI,KAAA,EAAO,YAAA,EAAsB,CAE5H,MAAQ,CAAC,CACT,GAAI,CAAE,OAAO,cAAc,IAAI,YAAY,qBAAsB,CAAE,OAAQ,CAAE,MAAOA,CAAA,CAAQ,CAAG,CAAC,CAAG,MAAQ,CAAC,CAC9G,MAAQ,CAAC,CAGT,GAAI,CACF,MAAMP,EAAoB,CACxB,SAAUc,EACV,YAAa/D,GAAA,YAAAA,EAAM,YACnB,UAAWA,GAAA,YAAAA,EAAM,UACjB,aAAcA,GAAA,YAAAA,EAAM,aACpB,OAAQA,GAAA,YAAAA,EAAM,OACd,YAAaA,GAAA,YAAAA,EAAM,YACnB,eAAgBA,GAAA,YAAAA,EAAM,eACtB,OAAAG,EACA,eAAgBkE,EAChB,aAAc,EACd,QAAQpJ,GAAA,YAAAA,EAAM,OAAO+E,GAAA,YAAAA,EAAM,QAC3B,OAAQ,YACR,UAAWA,GAAA,MAAAA,EAAM,UAAYA,EAAK,UAAY2C,EAAA,EAC9C,YAAaA,EAAA,EACb,YAAaxC,IAAW,MAAA,EAG1B,MAAM6C,EAAOjC,EAAWC,EAAI,kBAAkB,EAAGiC,CAAY,EAE7D,GAAI,CACF,MAAMpB,EAAIf,EAAMC,EAAWC,EAAI,qBAAqB,EAAGC,EAAM,WAAY,KAAM8C,CAAE,EAAGG,EAAM,CAAC,CAAC,EAEtFM,GADO,MAAMrD,EAAQU,CAAC,GACJ,KAAK,CAAC,EAC1B2C,GAAA,MAAAA,EAAY,IACd,MAAMC,EAAUzC,EAAIhB,EAAI,sBAAuBwD,EAAW,EAAE,CAAC,CAEjE,OAASE,EAAQ,CACf,QAAQ,KAAK,0CAA2CA,CAAM,CAChE,CACF,OAASxB,EAAS,CAChB,QAAQ,KAAK,mEAAoEA,CAAO,CAC1F,CACA,GAAI,CAAE,GAAIjI,GAAA,MAAAA,EAAM,IAAK,CAAE,MAAM0I,EAAa3D,GAAA,MAAAA,EAAM,OAAS,gBAAgBA,EAAK,MAAM,GAAK,GAAI,MAAM4D,GAAiB,KAAK3I,EAAK,IAAK,oBAAmB+E,GAAA,YAAAA,EAAM,cAAe,EAAE,YAAWA,GAAA,YAAAA,EAAM,eAAgB,UAAU,GAAG2D,CAAU,0BAA0B3D,GAAA,YAAAA,EAAM,cAAe,CAAE,OAAO,CAAG,CAAE,MAAQ,CAAC,CAG3S,GAAI,CACEG,IAAW,QAAaA,EAAS,GACnC,MAAMwE,GAAc,WAAU1J,GAAA,YAAAA,EAAM,MAAO,GAAI,CAC7C,OAAQkF,EACR,OAAQ,cACR,YAAa,cAAaH,GAAA,YAAAA,EAAM,cAAe,MAAM,GACrD,OAAQ+D,EACR,cAAe,IAAK,CACrB,CAEL,OAASa,EAAa,CACpB,QAAQ,KAAK,mCAAoCA,CAAW,CAC9D,CACF,MAAY,CACV,MAAM,iDAAiD,CACzD,CACF,EAEMC,GAAa,MAAOd,GAAe,SACvC,GAAI,CACF,MAAMU,EAAUzC,EAAIhB,EAAI,oBAAqB+C,CAAE,CAAC,EAEhD,GAAI,CACF,MAAMe,EAAWhE,EAAMC,EAAWC,EAAI,qBAAqB,EAAGC,EAAM,WAAY,KAAM8C,CAAE,EAAGG,EAAM,CAAC,CAAC,EAC7Fa,EAAc,MAAM5D,EAAQ2D,CAAQ,GACtC3F,EAAA4F,EAAY,KAAK,CAAC,IAAlB,MAAA5F,EAAqB,IAAI,MAAMsF,EAAUzC,EAAIhB,EAAI,sBAAuB+D,EAAY,KAAK,CAAC,EAAE,EAAE,CAAC,CACrG,MAAQ,CAAC,CACT,GAAI,CACF,MAAMC,EAAQlE,EAAMC,EAAWC,EAAI,kBAAkB,EAAGC,EAAM,WAAY,KAAM8C,CAAE,EAAGG,EAAM,CAAC,CAAC,EACvFe,EAAW,MAAM9D,EAAQ6D,CAAK,GAChCtE,EAAAuE,EAAS,KAAK,CAAC,IAAf,MAAAvE,EAAkB,IAAI,MAAM+D,EAAUzC,EAAIhB,EAAI,mBAAoBiE,EAAS,KAAK,CAAC,EAAE,EAAE,CAAC,CAC5F,MAAQ,CAAC,CAGT1J,KAAiB4H,EAAK,UAAYc,EAAE,KAAOF,CAAE,CAAC,CAChD,MAAY,CACV,MAAM,gCAAgC,CACxC,CACF,EAEMmB,GAAiB,SAAY,CACjC,GAAI,IAACjK,GAAA,MAAAA,EAAM,MAAO,CAACkD,IACnB,GAAI,CACF,MAAM6E,EAAOjC,EAAWC,EAAI,QAAS/F,EAAK,IAAK,mBAAmB,EAAG,CACnE,OAAQA,EAAK,IACb,OAAQ,OAAOkD,EAAW,EAC1B,YAAa,SAASJ,CAAW,WAAWE,CAAU,GACtD,KAAM,SAASF,CAAW,WAAWE,CAAU,GAC/C,UAAW0E,EAAA,EACX,OAAQxH,CAAA,CACT,EACD2C,EAAmB,EAAK,EACxBE,GAAe,EAAE,EACjBE,GAAc,EAAE,EAChBE,GAAe,EAAE,EACjBuD,GAAA,EACAM,GAAA,EACAzE,EAAqB,EAAI,CAC3B,OAASkE,EAAG,CACV,QAAQ,MAAMA,CAAC,EACf,MAAM,mCAAmC,CAC3C,CACF,EAEMyD,GAAkB7J,EAAM,OAAO8J,GAAMA,EAAG,SAAW,aAAa,EAChEC,GAAe/J,EAAM,OAAO8J,GAAMA,EAAG,SAAW,sBAAsB,EACtEE,GAAiBhK,EAAM,OAAO8J,GAAMA,EAAG,SAAW,WAAW,EAInE,OACEG,EAAAA,KAAAC,WAAA,CACA,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAO,KAAA3K,EAAY,aAAAC,GAClB,SAAAuK,EAAAA,KAACI,EAAA,CACC,UAAU,yIACV,iBAAiB,iDAEjB,SAAA,CAAAF,EAAAA,IAACG,IAAa,UAAU,qGACtB,SAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAACM,GAAA,CAAY,UAAU,0BACrB,SAAA,CAAAJ,EAAAA,IAACK,GAAA,CAAO,UAAU,wBAAA,CAAyB,EAAE,gBAE7CL,EAAAA,IAACM,EAAA,CACC,KAAK,KACL,QAAQ,QACR,UAAU,+BACV,QAAS1F,GACT,SAAU1D,GACV,MAAM,iBAEN,eAACqJ,GAAA,CAAU,UAAW,WAAWrJ,GAAe,eAAiB,EAAE,EAAA,CAAI,CAAA,CAAA,CACzE,EACF,EACA4I,EAAAA,KAACQ,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IAAMjK,GAAoB,EAAI,EACvC,UAAU,qEAEV,SAAA,CAAA2J,EAAAA,IAACQ,GAAA,CAAW,UAAU,SAAA,CAAU,EAChCR,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,iBAAA,CAAe,CAAA,CAAA,CAAA,EAE/CA,EAAAA,IAACM,EAAA,CACC,KAAK,KACL,QAAQ,QACR,UAAU,UACV,QAAS,IAAM/K,GAAa,EAAK,EACjC,MAAM,QAEN,SAAAyK,EAAAA,IAACS,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,CAAA,CACF,CAAA,CACF,EAGAX,EAAAA,KAAC,MAAA,CAAI,UAAU,sBAEf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCAEb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,0BACb,SAAAA,EAAAA,IAACM,EAAA,CACC,KAAK,KACL,QAAQ,UACR,UAAU,iHACV,QAAS,IAAM/I,EAAiB,EAAI,EACrC,SAAA,sBAAA,CAAA,EAGH,QAGC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAACP,GACA8I,EAAAA,KAAAC,WAAA,CACE,SAAA,CAAAC,EAAAA,IAACM,EAAA,CACC,UAAU,0EACV,QAAS,IAAMjI,EAAmB,EAAI,EACvC,SAAA,WAAA,CAAA,EAGD2H,EAAAA,IAACM,EAAA,CACC,UAAU,8EACV,QAAS,IAAMrJ,EAAe,EAAI,EACnC,SAAA,oBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,EAGCD,SACA,MAAA,CAAI,IAAKuC,GACV,SAAAuG,EAAAA,KAACY,EAAA,CAAK,UAAU,wIACd,SAAA,CAAAV,EAAAA,IAACW,GAAW,UAAU,OACpB,SAAAb,EAAAA,KAACc,EAAA,CAAU,UAAU,kCACnB,SAAA,CAAAZ,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,EAC5BA,EAAAA,IAAC,OAAA,CAAK,UAAU,6CAA6C,SAAA,oBAAA,CAAkB,CAAA,CAAA,CACjF,CAAA,CACF,EACAF,EAAAA,KAACe,EAAA,CAAY,UAAU,YAErB,SAAA,CAAAf,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,mEACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,aAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CAAM,MAAO9K,EAAa,SAAUiG,GAAKhG,GAAegG,EAAE,OAAO,KAAK,EAAG,YAAY,aAAa,UAAU,4BAAA,CAA6B,CAAA,EAC5I,EACA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,mEACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,sBAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CAAM,MAAO5K,GAAW,SAAU+F,GAAK9F,GAAa8F,EAAE,OAAO,KAAK,EAAG,YAAY,YAAY,UAAU,4BAAA,CAA6B,CAAA,EACvI,EACA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,mEACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,uBAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CAAM,MAAOxK,GAAc,SAAU2F,GAAK1F,GAAgB0F,EAAE,OAAO,KAAK,EAAG,YAAY,aAAa,UAAU,4BAAA,CAA6B,CAAA,EAC9I,EACA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,mEACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,yBAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CAAM,MAAOtK,GAAQ,SAAUyF,GAAKxF,GAAUwF,EAAE,OAAO,KAAK,EAAG,YAAY,cAAc,UAAU,4BAAA,CAA6B,CAAA,EACnI,EACA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,mEACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,cAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CAAM,MAAOpK,GAAa,SAAUuF,GAAKtF,GAAesF,EAAE,OAAO,KAAK,EAAG,YAAY,sBAAsB,UAAU,4BAAA,CAA6B,CAAA,EACrJ,EACA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,mEACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,KAAA,CAAG,EAAO,aAAA,EAClB,EACAA,EAAAA,IAACc,EAAA,CAAM,MAAOlK,EAAgB,SAAUqF,GAAKpF,GAAkBoF,EAAE,OAAO,KAAK,EAAG,YAAY,qBAAqB,UAAU,4BAAA,CAA6B,CAAA,EAC1J,EACA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,mEACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,+BAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CAAM,MAAOhK,EAAgB,SAAUmF,GAAKlF,GAAkBkF,EAAE,OAAO,KAAK,EAAG,YAAY,wBAAwB,UAAU,4BAAA,CAA6B,CAAA,CAAA,CAC7J,CAAA,EACF,EAEA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAE,EAAAA,IAACM,EAAA,CAAO,UAAU,8EAA8E,QAAS,IAAM1D,GAAQ,aAAa,EAAG,SAAA,gBAAA,CAEvI,EACAoD,EAAAA,IAACM,GAAO,UAAU,8EAA8E,QAAS,IAAM1D,GAAQ,WAAW,EAAG,SAAA,cAAA,CAErI,EACAoD,EAAAA,IAACM,EAAA,CAAO,QAAQ,UAAU,QAAS,IAAMrJ,EAAe,EAAK,EAAG,UAAU,0CAA0C,SAAA,eAAA,CAEpH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACA,QAGC8J,GAAA,EAAU,EAGXjB,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,OAACY,EAAA,CACC,SAAA,CAAAV,EAAAA,IAACW,GAAW,UAAU,OACpB,SAAAb,EAAAA,KAACc,EAAA,CAAU,UAAU,kCACnB,SAAA,CAAAd,EAAAA,KAAC,MAAA,CAAI,UAAU,kFACb,SAAA,CAAAE,EAAAA,IAACgB,GAAA,CAAM,UAAU,wBAAA,CAAyB,EAC1ChB,EAAAA,IAAC,OAAA,CAAK,UAAU,mDAAmD,SAAA,cAAA,CAAY,CAAA,EACjF,QACCiB,EAAA,CAAM,QAAQ,YAAY,UAAU,kDAAmD,YAAgB,MAAA,CAAO,CAAA,CAAA,CACjH,CAAA,CACF,QACCJ,EAAA,CAAY,UAAU,gDACpB,SAAAnB,GAAgB,SAAW,EAC1BM,MAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,2BAAA,CAAyB,EAEnFN,GAAgB,OACdI,EAAAA,KAAC,MAAA,CAAkB,UAAU,oKAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,EAC5BA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAK,YAAY,EACvDF,EAAAA,KAAC,OAAA,CAAK,UAAU,2DAA4D,SAAA,CAAAvF,EAAK,YAAY,IAAA,CAAA,CAAE,CAAA,EACjG,EACAuF,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACZ,SAAA,CAAAvF,EAAK,WACJuF,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,EAC5BA,EAAAA,IAAC,OAAA,CAAM,SAAAzF,EAAK,SAAA,CAAU,CAAA,EACxB,GAEAA,EAAK,cAAgBA,EAAK,SAC1BuF,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,SAC3B,OAAA,CACE,SAAA,CAAAzF,EAAK,aACLA,EAAK,cAAgBA,EAAK,QAAU,MACpCA,EAAK,MAAA,CAAA,CACR,CAAA,EACF,EAED,OAAQA,EAAa,cAAiB,UACrCuF,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,SAC3B,OAAA,CAAK,SAAA,CAAA,YAAWzF,EAAa,aAAa,IAAA,CAAA,CAAE,CAAA,CAAA,CAC/C,CAAA,CAAA,CAEJ,CAAA,EACF,EACAuF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAACM,GAAO,KAAK,KAAK,QAAQ,UAAU,UAAU,iEAAiE,QAAS,IAAMjC,GAAuB9D,EAAK,EAAE,EAAG,MAAM,yBACnK,eAACpF,GAAA,CAAM,UAAU,UAAU,EAC7B,EACA6K,EAAAA,IAACM,EAAA,CAAO,KAAK,KAAK,UAAU,8CAA8C,QAAS,IAAM5B,GAAcnE,EAAK,EAAE,EAAG,SAAA,cAAA,CAEjH,QACC+F,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,UAAU,MAAM,QAAS,IAAMlB,GAAW7E,EAAK,EAAE,EACnF,eAAC2G,GAAA,CAAO,UAAU,UAAU,CAAA,CAC9B,CAAA,CAAA,CACF,CAAA,GA1CQ3G,EAAK,EA2Cf,CACD,CAAA,CAEL,CAAA,EACF,EAEAuF,EAAAA,KAACY,EAAA,CAAK,UAAU,uDACd,SAAA,CAAAV,EAAAA,IAACW,GAAW,UAAU,OACpB,SAAAb,EAAAA,KAACc,EAAA,CAAU,UAAU,kCACnB,SAAA,CAAAd,EAAAA,KAAC,MAAA,CAAI,UAAU,gFACb,SAAA,CAAAE,EAAAA,IAAC7K,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzC6K,EAAAA,IAAC,OAAA,CAAK,UAAU,iDAAiD,SAAA,mBAAA,CAAiB,CAAA,EACpF,QACCiB,EAAA,CAAM,QAAQ,YAAY,UAAU,gDAAiD,YAAa,MAAA,CAAO,CAAA,CAAA,CAC5G,CAAA,CACF,QACCJ,EAAA,CAAY,UAAU,gDACpB,SAAAjB,GAAa,SAAW,EACvBI,MAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,iCAAA,CAA+B,EAEzFJ,GAAa,OACXE,EAAAA,KAAC,MAAA,CAAkB,UAAU,0HAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,uDAAwD,SAAAzF,EAAK,YAAY,EACxFuF,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACZ,SAAA,CAAAvF,EAAK,cAAgByF,EAAAA,IAAC,OAAA,CAAK,UAAU,oFAAqF,WAAK,aAAa,EAC5IzF,EAAK,QAAUyF,EAAAA,IAAC,QAAK,UAAU,oFAAqF,WAAK,OAAO,EACjIF,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,SAC3B,OAAA,CAAM,SAAA,CAAAzF,EAAK,YAAY,IAAA,CAAA,CAAE,CAAA,EAC5B,EACC,OAAQA,EAAa,gBAAmB,UACvCuF,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,SAC3B,OAAA,CAAK,SAAA,CAAA,UAASzF,EAAa,eAAe,IAAA,CAAA,CAAE,CAAA,EAC/C,EAED,OAAQA,EAAa,cAAiB,UACrCuF,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,SAC3B,OAAA,CAAK,SAAA,CAAA,YAAWzF,EAAa,aAAa,IAAA,CAAA,CAAE,CAAA,CAAA,CAC/C,CAAA,CAAA,CAEJ,CAAA,EACF,EACAuF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAACM,EAAA,CAAO,KAAK,KAAK,UAAU,8CAA8C,QAAS,IAAM5B,GAAcnE,EAAK,EAAE,EAAG,SAAA,SAAA,CAEjH,QACC+F,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,UAAU,MAAM,QAAS,IAAMlB,GAAW7E,EAAK,EAAE,EACnF,eAAC2G,GAAA,CAAO,UAAU,UAAU,CAAA,CAC9B,CAAA,CAAA,CACF,CAAA,GA/BQ3G,EAAK,EAgCf,CACD,CAAA,CAEL,CAAA,EACF,SAECmG,EAAA,CACC,SAAA,CAAAV,EAAAA,IAACW,GAAW,UAAU,OACpB,SAAAb,EAAAA,KAACc,EAAA,CAAU,UAAU,kCACnB,SAAA,CAAAd,EAAAA,KAAC,MAAA,CAAI,UAAU,kFACb,SAAA,CAAAE,EAAAA,IAACmB,GAAA,CAAY,UAAU,wBAAA,CAAyB,EAChDnB,EAAAA,IAAC,OAAA,CAAK,UAAU,mDAAmD,SAAA,YAAA,CAAU,CAAA,EAC/E,QACCiB,EAAA,CAAM,QAAQ,YAAY,UAAU,kDAAmD,YAAe,MAAA,CAAO,CAAA,CAAA,CAChH,CAAA,CACF,QACCJ,EAAA,CAAY,UAAU,gDACpB,SAAAhB,GAAe,SAAW,EACzBG,MAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,sBAAA,CAAoB,EAE9EH,GAAe,OACbC,EAAAA,KAAC,MAAA,CAAkB,UAAU,oKAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,IAAC,EAC3BA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAK,YAAY,EACvDF,EAAAA,KAAC,OAAA,CAAK,UAAU,6DAA8D,SAAA,CAAAvF,EAAK,YAAY,IAAA,CAAA,CAAE,CAAA,EACnG,EACAuF,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACZ,SAAA,CAAAvF,EAAK,WACJuF,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,EAC5BA,EAAAA,IAAC,OAAA,CAAM,SAAAzF,EAAK,SAAA,CAAU,CAAA,EACxB,GAEAA,EAAK,cAAgBA,EAAK,SAC1BuF,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,SAC3B,OAAA,CACE,SAAA,CAAAzF,EAAK,aACLA,EAAK,cAAgBA,EAAK,QAAU,MACpCA,EAAK,MAAA,CAAA,CACR,CAAA,EACF,EAED,OAAQA,EAAa,gBAAmB,UACvCuF,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,SAC3B,OAAA,CAAK,SAAA,CAAA,YAAWzF,EAAa,eAAe,IAAA,CAAA,CAAE,CAAA,EACjD,EAED,OAAQA,EAAa,cAAiB,UACrCuF,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,IAAC,SAC1B,OAAA,CAAK,SAAA,CAAA,YAAWzF,EAAa,aAAa,IAAA,CAAA,CAAE,CAAA,EAC/C,EAEFuF,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,KAAE,EAC5BA,MAAC,QAAK,UAAU,cACb,WAAK,uBAAuB,KACzBzF,EAAK,YAAY,mBAAmB,QAAS,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,UAAW,KAAM,UAAW,OAAQ,UAAW,EAClIA,EAAK,qBAAqB,KACzBA,EAAK,UAAU,mBAAmB,QAAS,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,UAAW,KAAM,UAAW,OAAQ,UAAW,EACjI,iBAAA,CACR,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EACAuF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAACiB,EAAA,CAAM,UAAU,kEAAkE,SAAA,UAAO,EAC1FjB,MAACM,GAAO,KAAK,KAAK,QAAQ,UAAU,UAAU,MAAM,QAAS,IAAMlB,GAAW7E,EAAK,EAAE,EAAG,MAAM,MAC5F,eAAC2G,GAAA,CAAO,UAAU,UAAU,CAAA,CAC9B,CAAA,CAAA,CACF,CAAA,GArDQ3G,EAAK,EAsDf,CACD,CAAA,CAEL,CAAA,CAAA,CACF,CAAA,EACF,EAGAyF,EAAAA,IAAC,MAAA,CAAI,UAAU,2HACb,eAACM,EAAA,CAAO,UAAU,yCAAyC,QAAS,IAAMrJ,EAAe,EAAI,EAAG,4BAEhG,CAAA,CACF,CAAA,CAAA,CACA,CAAA,CAAA,CAAA,EAGJ,EAGA+I,EAAAA,IAACC,EAAA,CAAO,KAAM7H,GAAiB,aAAcC,EAC3C,SAAAyH,EAAAA,KAACI,EAAA,CACC,UAAU,6BACV,iBAAiB,iDAEjB,SAAA,CAAAF,MAACG,GAAA,CACC,SAAAL,EAAAA,KAACM,GAAA,CAAY,UAAU,0BACrB,SAAA,CAAAJ,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,MAAG,EAAO,aAAA,CAAA,CAEtC,CAAA,CACF,QAECU,EAAA,CAAK,UAAU,sCACd,SAAAZ,EAAAA,KAACe,EAAA,CAAY,UAAU,qBACrB,SAAA,CAAAf,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,4FACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,aAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CACC,MAAOxI,EACP,SAAW2D,GAAM1D,GAAe0D,EAAE,OAAO,KAAK,EAC9C,YAAY,kBACZ,UAAU,4BAAA,CAAA,CACZ,EACF,EAEA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,4FACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,QAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CACC,MAAOtI,EACP,SAAWyD,GAAMxD,GAAcwD,EAAE,OAAO,KAAK,EAC7C,YAAY,YACZ,UAAU,4BAAA,CAAA,CACZ,EACF,EAEA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,4FACf,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,cAAA,EACjB,EACAA,EAAAA,IAACc,EAAA,CACC,KAAK,SACL,MAAOpI,GACP,SAAWuD,GAAMtD,GAAesD,EAAE,OAAO,KAAK,EAC9C,YAAY,SACZ,UAAU,4BAAA,CAAA,CACZ,EACF,QAECqE,EAAA,CAAO,QAASb,GAAgB,UAAU,8FAA8F,SAAA,oBAEzI,EAEAO,EAAAA,IAACM,EAAA,CACC,QAAQ,UACR,QAAS,IAAMrI,GAAoB,EAAI,EACvC,UAAU,4IACX,SAAA,qBAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAAA,EAEJ,EAEA+H,EAAAA,IAACC,EAAA,CAAO,KAAMnI,GAAmB,aAAcC,EAC7C,SAAA+H,EAAAA,KAACI,EAAA,CACC,UAAU,qHACV,iBAAiB,oDAEjB,SAAA,CAAAF,EAAAA,IAAC,OAAI,UAAU,4GACb,eAACmB,GAAA,CAAY,UAAU,2BAA2B,CAAA,CACpD,EACAnB,EAAAA,IAAC,KAAA,CAAG,UAAU,0DAA0D,SAAA,qBAAkB,EAC1FA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,wCAAqC,EAC1FA,EAAAA,IAACM,EAAA,CACC,QAAS,IAAMvI,EAAqB,EAAK,EACzC,UAAU,uFACX,SAAA,OAAA,CAAA,CAED,CAAA,CAAA,EAEJ,EAEAiI,EAAAA,IAACC,EAAA,CAAO,KAAMjI,GAAkB,aAAcC,GAC5C,SAAA6H,EAAAA,KAACI,EAAA,CACC,UAAU,wEACV,iBAAiB,oDAEjB,SAAA,CAAAF,MAACG,GAAA,CACC,SAAAL,EAAAA,KAACM,GAAA,CAAY,UAAU,kCACrB,SAAA,CAAAJ,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EAAO,qBAAA,CAAA,CAEjB,CAAA,CACF,EAEAA,EAAAA,IAAC,OAAI,UAAU,8DACZ,YAAa,SAAW,QACtB,MAAA,CAAI,UAAU,iCAAiC,SAAA,6BAAA,CAA2B,EAE3E9H,GAAa,IAAKqC,cAChBuF,OAAAA,EAAAA,KAAC,MAAA,CAAkB,UAAU,6HAC3B,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,iDAAkD,WAAAtG,EAAAa,EAAK,OAAL,YAAAb,EAAW,MAAM,OAAO,KAAM,eAAA,CAAgB,EAC/GsG,EAAAA,IAAC,MAAA,CAAI,UAAU,6BAA8B,WAAA/E,EAAAV,EAAK,OAAL,YAAAU,EAAW,MAAM,OAAO,KAAM,cAAA,CAAe,EAC1F6E,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAACgB,GAAA,CAAM,UAAU,SAAA,CAAU,GAC1B7F,EAAAZ,EAAK,YAAL,MAAAY,EAAgB,OAASZ,EAAK,UAAU,OAAA,EAAS,mBAAmB,QAAS,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,UAAW,KAAM,UAAW,OAAQ,SAAA,CAAW,EAAI,iBAAA,CAAA,CAC1K,CAAA,EACF,EACAuF,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAAyC,SAAA,CAAA,IACpDzG,EAAYkB,EAAK,MAAM,CAAA,CAAA,CAC3B,CAAA,GAXQA,EAAK,EAYf,EACD,CAAA,CAEL,CAAA,CAAA,CAAA,EAEJ,EAEEyF,EAAAA,IAACoB,GAAA,CACC,KAAM9J,GACN,aAAcC,EACd,OAAQ/B,GAAA,YAAAA,EAAM,IACd,SAAUG,GAAA,YAAAA,EAAS,KACnB,UAAW,IAAM,CACf4B,EAAiB,EAAK,EAEtB,WAAW,IAAM,CACfF,EAAc,EAAI,CACpB,EAAG,GAAG,CACR,EACA,UAAU,YACV,iBAAiB,mDAAA,CAAA,QAElB4I,EAAA,CAAO,KAAM7I,GAAY,aAAe9B,GAAS,CAC3CA,IACH+B,EAAc,EAAK,EACnBE,EAAiB,EAAK,EAE1B,EACE,SAAAuI,EAAAA,KAACI,EAAA,CACC,UAAU,gCACV,UAAS,GACT,iBAAiB,iDAEjB,SAAA,CAAAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,gBAAa,EACnDA,EAAAA,IAACM,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IAAM,CACbjJ,EAAc,EAAK,EACnBE,EAAiB,EAAK,CACxB,EAEA,SAAAyI,EAAAA,IAACS,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EACAX,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,gDAAgD,SAAA,qBAAkB,QAChF,MAAA,CAAI,UAAU,sDACZ,SAAA3G,EAAY7B,EAAsB,CAAA,CACrC,CAAA,EACF,EACAsI,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,kDAAkD,SAAA,qBAAkB,QAClF,MAAA,CAAI,UAAU,wDACZ,SAAA3G,EAAY3B,EAAwB,CAAA,CACvC,CAAA,EACF,EAEAoI,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,8CAA8C,SAAA,yBAAsB,QAClF,MAAA,CAAI,UAAU,oDACZ,SAAA3G,EAAYzB,EAAY,CAAA,CAC3B,CAAA,EACF,EAEAkI,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,+CAA+C,SAAA,iBAAc,EAC5EA,EAAAA,IAACc,EAAA,CACC,KAAK,OACL,MAAO7H,GACP,SAAWgD,GAAM,CACf/C,GAAc+C,EAAE,OAAO,KAAK,EAC5BtC,GAAc9D,EAAOoG,EAAE,OAAO,KAAK,CACrC,EACA,UAAU,8DAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAA6D,EAAAA,KAAC,MAAA,CAAI,UAAU,0DAA0D,SAAA,CAAA,aAC5D,IAAI,KAAK7G,EAAU,EAAE,mBAAmB,OAAO,CAAA,EAC5D,QACC,MAAA,CAAI,UAAU,yDACZ,SAAAI,EAAYF,EAAgB,CAAA,CAC/B,CAAA,CAAA,CACF,CAAA,EACF,EACA6G,EAAAA,IAAC,MAAA,CAAI,UAAU,qDACb,SAAAA,EAAAA,IAACM,EAAA,CACC,UAAU,+EACV,QAAS,IAAM,CACbjJ,EAAc,EAAK,EACnBE,EAAiB,EAAK,CACxB,EACD,SAAA,OAAA,CAAA,CAED,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EAEJ,EACAyI,EAAAA,IAACqB,GAAA,CACC,OAAQjL,GACR,QAAS,IAAMC,GAAoB,EAAK,EACxC,SAAS,8CACT,MAAM,kBACN,UAAU,WAAA,CAAA,CACZ,EACF,CAEJ","x_google_ignoreList":[0]}