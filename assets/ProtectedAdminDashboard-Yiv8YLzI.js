const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CpSuNyR6.js","./index-Bmklj-Zt.css"])))=>i.map(i=>d[i]);
import{K as se,c as Da,r,j as e,bf as Ze,I as Ua,B as K,E as Ia,v as La,h as ae,i as B,q as ne,aw as Fe,k as Ee,D as h,ax as le,U as Rt,T as ee,bg as Je,R as Ke,ah as Pa,M as Fa,t as Ts,ak as kt,ao as Ra,bh as Ma,G as Va,P as Mt,x as Le,F as Oa,_ as I,bd as $a,bi as Ba,y as Ds,C as Et,S as Ha,b7 as qa,aj as Ya,as as At,e as Ne,bj as Wa,aY as Ct,s as za,m as Ga,n as Qa,bk as Ie,J as Za,bl as Ja,bm as Ka,a as Xa,u as er,an as sr,f as tr}from"./index-CpSuNyR6.js";import{u as ar,g as _t,s as rr,l as lr}from"./contentService-BouaVgum.js";import{A as Tt,P as nr}from"./ProfileIcon-D0q3G3qF.js";import{C as Ge,a as Ss,b as ks,d as Qe,c as ir}from"./card-BqRT_Nkf.js";import{L as Dt}from"./label-iAAbTejB.js";import{T as cr,B as Se}from"./textarea-_yvnJ6fE.js";import{S as or}from"./switch-CKdCGDFN.js";import{A as dr,a as mr}from"./alert-DwVnQuRo.js";import{B as Us}from"./badge-DVugqKes.js";import{a as xr,C as X,S as we,P as ur}from"./separator-DhSvPD57.js";import{u as hr,c as Vt,v as Ot}from"./whatsappService-BLnGfqC0.js";import{R as Ae}from"./refresh-cw-CyAu4JsZ.js";import{C as gr}from"./circle-alert-B72PReNB.js";import{P as $t}from"./phone-CmWt1at1.js";import{S as ve}from"./save-BRk9WicO.js";import{C as pr,G as re,U as Es}from"./users-BJTjoC3Y.js";import{E as br,p as fr}from"./broadcastService-C7pC-IsN.js";import{S as jr,a as yr,b as Nr,c as wr,d as me}from"./select-Bo6-5BCo.js";import{Z as Re}from"./zap-BDhfAbfo.js";import{C as Pe}from"./crown-Bse_egto.js";import{C as ke}from"./circle-check-big-Bv_dG87s.js";import{S as As,M as Ut}from"./smartphone-C0hoAvVP.js";import{D as Cs}from"./download-B-slC7b1.js";import{C as vr}from"./circle-x-Cp9nsv_j.js";import"./dropdown-menu-U82PPSq2.js";import"./index-oriu1PZ7.js";import"./MasterPinDialog-ycS94SJm.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kr=se("funnel",Sr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],It=se("git-branch",Er);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Lt=se("hard-drive",Ar);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],_r=se("infinity",Cr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Dr=se("menu",Tr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_s=se("upload",Ur);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pt=se("user-check",Ir);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Pr=se("user-x",Lr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Rr=se("volume-2",Fr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Vr=se("volume-x",Mr),Or=()=>{const{settings:i,loading:l,error:u,updateSettings:x,refreshSettings:b}=hr(),{toast:f}=Da(),[d,E]=r.useState({phoneNumber:"",defaultMessage:"",isEnabled:!0}),[g,N]=r.useState(!1),[j,C]=r.useState(!1),[U,L]=r.useState(""),[p,m]=r.useState({});r.useEffect(()=>{i&&E({phoneNumber:i.phoneNumber,defaultMessage:i.defaultMessage,isEnabled:i.isEnabled})},[i]);const R=()=>{var P,Q;const A={};return(P=d.phoneNumber)!=null&&P.trim()?Ot(d.phoneNumber)||(A.phoneNumber="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØºÙŠØ± ØµØ­ÙŠØ­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 10-15 Ø±Ù‚Ù…)"):A.phoneNumber="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø·Ù„ÙˆØ¨",(Q=d.defaultMessage)!=null&&Q.trim()?d.defaultMessage.length<10&&(A.defaultMessage="Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 10 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„"):A.defaultMessage="Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ø·Ù„ÙˆØ¨Ø©",m(A),Object.keys(A).length===0},M=async()=>{if(!R()){f({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",description:"ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸",variant:"destructive"});return}N(!0);try{if(await x(d))f({title:"ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­",variant:"default"});else throw new Error("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ÙØ¸")}catch{f({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",variant:"destructive"})}finally{N(!1)}},w=()=>{if(d.phoneNumber&&d.defaultMessage)try{const A=Vt(d.phoneNumber,d.defaultMessage);L(A),C(!0)}catch{f({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©",description:"ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨",variant:"destructive"})}},ie=async()=>{try{await navigator.clipboard.writeText(U),f({title:"ØªÙ… Ø§Ù„Ù†Ø³Ø®",description:"ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©",variant:"default"})}catch{f({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø³Ø®",description:"ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·",variant:"destructive"})}},xe=A=>{const P=A.replace(/[^\d+]/g,"");E(Q=>({...Q,phoneNumber:P})),p.phoneNumber&&m(Q=>({...Q,phoneNumber:""}))};return l?e.jsxs(Ge,{children:[e.jsx(Ss,{children:e.jsxs(ks,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]})}),e.jsx(Qe,{children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Ae,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"mr-2",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs(Ge,{children:[e.jsxs(Ss,{children:[e.jsxs(ks,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsx(ir,{children:"Ø¥Ø¯Ø§Ø±Ø© Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs(Qe,{className:"space-y-6",children:[u&&e.jsxs(dr,{variant:"destructive",children:[e.jsx(gr,{className:"h-4 w-4"}),e.jsx(mr,{children:u})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-3 w-3 rounded-full ${d.isEnabled?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Ø­Ø§Ù„Ø© Ø®Ø¯Ù…Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.isEnabled?"Ù…ÙØ¹Ù„Ø©":"Ù…Ø¹Ø·Ù„Ø©"})]})]}),e.jsx(or,{checked:d.isEnabled,onCheckedChange:A=>E(P=>({...P,isEnabled:A}))})]}),e.jsx(xr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Dt,{htmlFor:"phoneNumber",className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-4 w-4"}),"Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsx(Ua,{id:"phoneNumber",type:"tel",placeholder:"Ù…Ø«Ø§Ù„: 201000392539",value:d.phoneNumber,onChange:A=>xe(A.target.value),className:p.phoneNumber?"border-red-500":"",dir:"ltr"}),p.phoneNumber&&e.jsx("p",{className:"text-sm text-red-500",children:p.phoneNumber}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© (Ù…Ø«Ø§Ù„: 201000392539 Ù„Ù…ØµØ±)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Dt,{htmlFor:"defaultMessage",children:"Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©"}),e.jsx(cr,{id:"defaultMessage",placeholder:"Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø®Ø¯Ù…Ø§ØªÙƒÙ…",value:d.defaultMessage,onChange:A=>{E(P=>({...P,defaultMessage:A.target.value})),p.defaultMessage&&m(P=>({...P,defaultMessage:""}))},className:p.defaultMessage?"border-red-500":"",rows:4}),p.defaultMessage&&e.jsx("p",{className:"text-sm text-red-500",children:p.defaultMessage}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø³ØªØ¸Ù‡Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(K,{onClick:M,disabled:g,className:"flex items-center gap-2",children:[g?e.jsx(Ae,{className:"h-4 w-4 animate-spin"}):e.jsx(ve,{className:"h-4 w-4"}),g?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"]}),e.jsxs(K,{variant:"outline",onClick:w,disabled:!d.phoneNumber||!d.defaultMessage,className:"flex items-center gap-2",children:[j?e.jsx(Ia,{className:"h-4 w-4"}):e.jsx(La,{className:"h-4 w-4"}),"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø±Ø§Ø¨Ø·"]}),e.jsxs(K,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"ØªØ­Ø¯ÙŠØ«"]})]}),j&&U&&e.jsxs(Ge,{className:"bg-muted/50",children:[e.jsx(Ss,{children:e.jsx(ks,{className:"text-lg",children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"})}),e.jsxs(Qe,{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-background rounded border font-mono text-sm break-all",children:U}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(K,{variant:"outline",size:"sm",onClick:ie,className:"flex items-center gap-2",children:[e.jsx(pr,{className:"h-4 w-4"}),"Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·"]}),e.jsxs(K,{variant:"outline",size:"sm",onClick:()=>window.open(U,"_blank"),className:"flex items-center gap-2",children:[e.jsx(br,{className:"h-4 w-4"}),"ÙØªØ­ ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"]})]})]})]}),i&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:"}),e.jsxs(Us,{variant:"outline",className:"mr-2",children:[i.lastUpdated.toLocaleDateString("ar-EG")," - ",i.lastUpdated.toLocaleTimeString("ar-EG")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ø­Ø§Ù„Ø©:"}),e.jsx(Us,{variant:i.isEnabled?"default":"secondary",className:"mr-2",children:i.isEnabled?"Ù…ÙØ¹Ù„":"Ù…Ø¹Ø·Ù„"})]})]})]})]})]})})},Xe={enableVisualAlerts:!0,enableAudioAlerts:!0,criticalDays:1,warningDays:3,infoDays:7},$r=i=>{const l=new Date,x=new Date(i).getTime()-l.getTime();return Math.ceil(x/(1e3*60*60*24))},Br=(i,l=Xe)=>i<0?"expired":i<=l.criticalDays?"critical":i<=l.warningDays?"warning":(i<=l.infoDays,"info"),Hr=(i,l,u)=>{const x=qr(u);return l<0?`Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ø´ØªØ±Ø§Ùƒ ${x} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${i}`:l===0?`ÙŠÙ†ØªÙ‡ÙŠ Ø§Ø´ØªØ±Ø§Ùƒ ${x} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${i} Ø§Ù„ÙŠÙˆÙ…!`:l===1?`ÙŠÙ†ØªÙ‡ÙŠ Ø§Ø´ØªØ±Ø§Ùƒ ${x} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${i} ØºØ¯Ø§Ù‹`:`ÙŠÙ†ØªÙ‡ÙŠ Ø§Ø´ØªØ±Ø§Ùƒ ${x} Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${i} Ø®Ù„Ø§Ù„ ${l} Ø£ÙŠØ§Ù…`},qr=i=>{switch(i){case h.MONTHLY:return"Ø§Ù„Ø´Ù‡Ø±ÙŠ";case h.YEARLY:return"Ø§Ù„Ø³Ù†ÙˆÙŠ";case h.LIFETIME:return"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©";default:return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}},Yr=async()=>{try{const i=ae(B,"users"),l=ne(i,Fe("subscription","!=",null)),u=await Ee(l),x=[];return u.forEach(b=>{var d,E,g,N;const f=b.data();f.subscription&&(f.subscription.planType||f.subscription.plan)&&x.push({id:b.id,...f,subscription:{...f.subscription,startDate:((E=(d=f.subscription.startDate)==null?void 0:d.toDate)==null?void 0:E.call(d))||new Date(f.subscription.startDate),endDate:((N=(g=f.subscription.endDate)==null?void 0:g.toDate)==null?void 0:N.call(g))||new Date(f.subscription.endDate),planType:f.subscription.planType||f.subscription.plan}})}),x}catch(i){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©:",i),[]}},Wr=async(i=Xe)=>{try{const l=await Yr(),u=[];return l.forEach(x=>{if(!x.subscription||!x.subscription.endDate)return;const b=$r(x.subscription.endDate),f=Br(b,i);if(b<=i.infoDays||b<0){const d={id:`${x.id}_${Date.now()}`,userId:x.id,userName:x.displayName||x.email||"Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",userEmail:x.email||"",subscriptionPlan:x.subscription.planType,expiryDate:x.subscription.endDate,daysRemaining:b,type:f,message:Hr(x.displayName||x.email||"Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",b,x.subscription.planType),isRead:!1,createdAt:new Date};u.push(d)}}),u.sort((x,b)=>{const f={expired:0,critical:1,warning:2,info:3};return f[x.type]!==f[b.type]?f[x.type]-f[b.type]:x.daysRemaining-b.daysRemaining}),u}catch(l){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",l),[]}},zr=(i,l)=>l?i.filter(u=>u.type===l):i,Gr=i=>{localStorage.setItem("notificationSettings",JSON.stringify(i))},Qr=()=>{try{const i=localStorage.getItem("notificationSettings");if(i)return{...Xe,...JSON.parse(i)}}catch(i){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",i)}return Xe},Zr=({isOpen:i,onClose:l})=>{const[u,x]=r.useState([]),[b,f]=r.useState([]),[d,E]=r.useState("all"),[g,N]=r.useState(!0),[j,C]=r.useState(Qr());r.useEffect(()=>{i&&U()},[i]),r.useEffect(()=>{f(d==="all"?u:zr(u,d))},[u,d]);const U=async()=>{N(!0);try{const w=await Wr(j);x(w)}catch(w){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:",w)}finally{N(!1)}},L=w=>{switch(w){case"urgent":return e.jsx(Je,{className:"w-5 h-5 text-red-500"});case"warning":return e.jsx(ee,{className:"w-5 h-5 text-yellow-500"});case"info":return e.jsx(Se,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(Se,{className:"w-5 h-5 text-gray-500"})}},p=w=>{switch(w){case"urgent":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}},m=w=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(w),R=w=>{switch(w){case"all":return"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª";case"urgent":return"Ø¹Ø§Ø¬Ù„ (ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯)";case"warning":return"ØªØ­Ø°ÙŠØ± (3 Ø£ÙŠØ§Ù…)";case"info":return"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (7 Ø£ÙŠØ§Ù…)";default:return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}},M=w=>{const ie={...j,[w]:!j[w]};C(ie),Gr(ie)};return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-xl font-bold",children:"Ù…Ø±ÙƒØ² Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),u.length>0&&e.jsx("span",{className:"bg-white text-blue-600 px-2 py-1 rounded-full text-sm font-medium",children:u.length})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(le,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kr,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ØªØµÙÙŠØ© Ø­Ø³Ø¨:"})]}),["all","urgent","warning","info"].map(w=>e.jsx("button",{onClick:()=>E(w),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${d===w?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:R(w)},w))]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.visualAlerts,onChange:()=>M("visualAlerts"),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø±Ø¦ÙŠØ©"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.soundAlerts,onChange:()=>M("soundAlerts"),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.autoRefresh,onChange:()=>M("autoRefresh"),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto max-h-96",children:g?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"mr-3 text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª..."})]}):b.length===0?e.jsxs("div",{className:"text-center p-8",children:[e.jsx(Se,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),e.jsx("p",{className:"text-gray-500",children:d==="all"?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø­Ø§Ù„ÙŠÙ‹Ø§":`Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† Ù†ÙˆØ¹ "${R(d)}"`})]}):e.jsx("div",{className:"p-4 space-y-3",children:b.map(w=>e.jsx("div",{className:`p-4 rounded-lg border-r-4 ${p(w.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[L(w.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:w.message}),e.jsx("span",{className:"text-xs text-gray-500",children:m(w.createdAt)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:"})," ",w.userName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:"})," ",m(w.expiryDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{children:"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:"})," ",w.daysRemaining]})]})]})]})]})},w.id))})}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ",m(new Date)]}),e.jsx("button",{onClick:U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"})]})})]})}):null},Jr=({notification:i,onClose:l,soundEnabled:u,onToggleSound:x})=>{const[b,f]=r.useState(!1),[d,E]=r.useState(null);r.useEffect(()=>{if(i&&(f(!0),u&&g(i.type),i.type!=="urgent")){const L=setTimeout(()=>{N()},1e4);return()=>clearTimeout(L)}},[i,u]),r.useEffect(()=>{typeof window<"u"&&window.AudioContext&&E(new AudioContext)},[]);const g=L=>{if(!(!d||!u))try{const p=d.createOscillator(),m=d.createGain();switch(p.connect(m),m.connect(d.destination),L){case"urgent":p.frequency.setValueAtTime(800,d.currentTime),p.frequency.setValueAtTime(1e3,d.currentTime+.1),p.frequency.setValueAtTime(800,d.currentTime+.2),m.gain.setValueAtTime(.3,d.currentTime),m.gain.exponentialRampToValueAtTime(.01,d.currentTime+.5),p.start(d.currentTime),p.stop(d.currentTime+.5);break;case"warning":p.frequency.setValueAtTime(600,d.currentTime),p.frequency.setValueAtTime(700,d.currentTime+.15),m.gain.setValueAtTime(.2,d.currentTime),m.gain.exponentialRampToValueAtTime(.01,d.currentTime+.3),p.start(d.currentTime),p.stop(d.currentTime+.3);break;case"info":p.frequency.setValueAtTime(400,d.currentTime),m.gain.setValueAtTime(.1,d.currentTime),m.gain.exponentialRampToValueAtTime(.01,d.currentTime+.2),p.start(d.currentTime),p.stop(d.currentTime+.2);break}}catch(p){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:",p)}},N=()=>{f(!1),setTimeout(()=>{l()},300)},j=L=>{switch(L){case"urgent":return{bg:"bg-red-500",border:"border-red-600",text:"text-white",icon:e.jsx(Je,{className:"w-6 h-6"}),pulse:"animate-pulse"};case"warning":return{bg:"bg-yellow-500",border:"border-yellow-600",text:"text-white",icon:e.jsx(ee,{className:"w-6 h-6"}),pulse:""};case"info":return{bg:"bg-blue-500",border:"border-blue-600",text:"text-white",icon:e.jsx(Se,{className:"w-6 h-6"}),pulse:""};default:return{bg:"bg-gray-500",border:"border-gray-600",text:"text-white",icon:e.jsx(Se,{className:"w-6 h-6"}),pulse:""}}},C=L=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(L);if(!i)return null;const U=j(i.type);return e.jsxs("div",{className:"fixed top-4 right-4 z-[9999]",children:[e.jsxs("div",{className:`
          transform transition-all duration-300 ease-in-out
          ${b?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
          ${U.bg} ${U.border} ${U.text} ${U.pulse}
          border-2 rounded-lg shadow-2xl max-w-md min-w-80
          backdrop-blur-sm
        `,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white border-opacity-20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[U.icon,e.jsxs("h3",{className:"font-bold text-lg",children:[i.type==="urgent"&&"ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ø§Ø¬Ù„!",i.type==="warning"&&"ØªØ­Ø°ÙŠØ±",i.type==="info"&&"Ø¥Ø´Ø¹Ø§Ø±"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:x,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:u?"Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª":"ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª",children:u?e.jsx(Rr,{className:"w-4 h-4"}):e.jsx(Vr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:N,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",children:e.jsx(le,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-lg font-medium mb-3",children:i.message}),e.jsxs("div",{className:"space-y-2 text-sm opacity-90",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:"})," ",i.userName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:"})," ",C(i.expiryDate)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:"})," ",i.daysRemaining," ÙŠÙˆÙ…"]})]})]}),i.type==="urgent"&&e.jsx("div",{className:"h-1 bg-white bg-opacity-20",children:e.jsx("div",{className:"h-full bg-white animate-pulse",style:{animation:"progress 10s linear forwards"}})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes progress {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})},Kr=({user:i,onActivateSubscription:l,onRequestActivation:u,onDeactivateSubscription:x,onDeleteUser:b})=>{const[f,d]=r.useState(h.MONTHLY),[E,g]=r.useState(!1),N=Pa(),j=p=>{const m=p==null?void 0:p.displayName;if(typeof m=="string"&&m.trim())return m.trim();if(m&&typeof m=="object"){const R=m.full_name||m.name||m.ar||m.en;if(typeof R=="string"&&R.trim())return R.trim()}return typeof(p==null?void 0:p.email)=="string"&&p.email.includes("@")?p.email.split("@")[0]:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"},C=p=>{switch(p){case h.LIFETIME:return e.jsx(Pe,{className:"w-4 h-4 text-yellow-500"});case h.YEARLY:return e.jsx(re,{className:"w-4 h-4 text-blue-500"});case h.QUARTERLY:return e.jsx(X,{className:"w-4 h-4 text-purple-500"});case h.MONTHLY:return e.jsx(Re,{className:"w-4 h-4 text-green-500"});case h.FIVE_MINUTES:return e.jsx(ee,{className:"w-4 h-4 text-orange-500"});case h.ZERO:return e.jsx(Ts,{className:"w-4 h-4 text-gray-500"});case h.TAHWEELA:return e.jsx(kt,{className:"w-4 h-4 text-blue-600"});default:return null}},U=p=>{switch(p){case h.MONTHLY:return"Ø´Ù‡Ø±ÙŠØ©";case h.QUARTERLY:return"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©";case h.YEARLY:return"Ø³Ù†ÙˆÙŠØ©";case h.LIFETIME:return"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©";case h.FIVE_MINUTES:return"5 Ø¯Ù‚Ø§ÙŠÙ‚";case h.ZERO:return"Ø²ÙŠØ±Ùˆ";case h.TAHWEELA:return"ØªØ­ÙˆÙŠÙ„Ù‡";default:return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}},L=p=>{if(!p)return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";const m=Ma(p);return m?m.toLocaleDateString("ar-EG"):"ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ§Ù„Ø­"};return e.jsx(Ge,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(Qe,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Rt,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:j(i)}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Fa,{className:"w-3 h-3 ml-1"}),i.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[e.jsx($t,{className:"w-3 h-3 ml-1"}),i.phone||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]})]}),e.jsx("div",{className:`px-2 py-0.5 rounded-[8px] text-xs font-medium border ${i.isActive?"bg-green-50 text-green-700 border-green-200":"bg-secondary/10 text-secondary border-secondary/20"}`,children:i.isActive?"Ù†Ø´Ø·":"ØºÙŠØ± Ù†Ø´Ø·"})]}),i.subscription&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[C(i.subscription.planType),e.jsx("span",{className:"text-sm font-medium",children:U(i.subscription.planType)})]}),e.jsx(Us,{variant:i.subscription.isActive?"default":"destructive",children:i.subscription.isActive?"Ù…ÙØ¹Ù„":"Ù…Ù†ØªÙ‡ÙŠ"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(X,{className:"w-3 h-3 ml-1"}),"Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: ",L(i.subscription.startDate)]}),i.subscription.endDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"w-3 h-3 ml-1"}),"Ø§Ù„Ù†Ù‡Ø§ÙŠØ©: ",L(i.subscription.endDate)]})]})]}),e.jsxs("div",{className:"space-y-3",children:[l&&E&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø©:"}),N?e.jsxs("select",{className:"w-full h-10 border border-input bg-background rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-ring",value:f,onChange:p=>d(p.target.value),children:[e.jsx("option",{value:h.MONTHLY,children:"Ø´Ù‡Ø±ÙŠØ©"}),e.jsx("option",{value:h.QUARTERLY,children:"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"}),e.jsx("option",{value:h.YEARLY,children:"Ø³Ù†ÙˆÙŠØ©"}),e.jsx("option",{value:h.LIFETIME,children:"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"}),e.jsx("option",{value:h.FIVE_MINUTES,children:"5 Ø¯Ù‚Ø§ÙŠÙ‚"}),e.jsx("option",{value:h.ZERO,children:"Ø²ÙŠØ±Ùˆ"}),e.jsx("option",{value:h.TAHWEELA,children:"ØªØ­ÙˆÙŠÙ„Ù‡"})]}):e.jsxs(jr,{value:f,onValueChange:p=>d(p),children:[e.jsx(yr,{className:"w-full",children:e.jsx(Nr,{placeholder:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø©"})}),e.jsxs(wr,{children:[e.jsx(me,{value:h.MONTHLY,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø´Ù‡Ø±ÙŠØ©"})]})}),e.jsx(me,{value:h.QUARTERLY,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"})]})}),e.jsx(me,{value:h.YEARLY,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø³Ù†ÙˆÙŠØ©"})]})}),e.jsx(me,{value:h.LIFETIME,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(_r,{className:"w-4 h-4"}),e.jsx("span",{children:"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"})]})}),e.jsx(me,{value:h.FIVE_MINUTES,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"5 Ø¯Ù‚Ø§ÙŠÙ‚"})]})}),e.jsx(me,{value:h.ZERO,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Ts,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø²ÙŠØ±Ùˆ"})]})}),e.jsx(me,{value:h.TAHWEELA,children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(kt,{className:"w-4 h-4"}),e.jsx("span",{children:"ØªØ­ÙˆÙŠÙ„Ù‡"})]})})]})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(K,{size:"sm",onClick:()=>{l(i.id,f),g(!1)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„"}),e.jsx(K,{size:"sm",variant:"outline",onClick:()=>g(!1),className:"flex-1",children:"Ø¥Ù„ØºØ§Ø¡"})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[(l||u)&&!E&&e.jsx(K,{size:"sm",variant:"outline",onClick:()=>u?u(i):g(!0),className:"flex-1",children:"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),x&&e.jsx(K,{size:"sm",variant:"outline",onClick:()=>x(i.id),className:"flex-1",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),b&&e.jsx(K,{size:"sm",variant:"destructive",onClick:()=>b(i.id),children:e.jsx(Ra,{className:"w-4 h-4"})})]})]})]})})},Xr=Ke.memo(Kr),el=[{id:h.MONTHLY,name:"Ø´Ù‡Ø±ÙŠØ©",icon:Re,color:"text-green-600",bg:"bg-green-50",border:"border-green-200"},{id:h.QUARTERLY,name:"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©",icon:X,color:"text-purple-600",bg:"bg-purple-50",border:"border-purple-200"},{id:h.YEARLY,name:"Ø³Ù†ÙˆÙŠØ©",icon:re,color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-200"},{id:h.LIFETIME,name:"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©",icon:Pe,color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200"},{id:h.FIVE_MINUTES,name:"5 Ø¯Ù‚Ø§ÙŠÙ‚",icon:ee,color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-200"},{id:h.ZERO,name:"Ø²ÙŠØ±Ùˆ",icon:Ts,color:"text-gray-600",bg:"bg-gray-50",border:"border-gray-200"},{id:h.TAHWEELA,name:"ØªØ­ÙˆÙŠÙ„Ù‡",icon:Ae,color:"text-indigo-600",bg:"bg-indigo-50",border:"border-indigo-200"}],sl=i=>{const l=i==null?void 0:i.displayName;if(typeof l=="string"&&l.trim())return l.trim();if(l&&typeof l=="object"){const u=l.full_name||l.name||l.ar||l.en;if(typeof u=="string"&&u.trim())return u.trim()}return typeof(i==null?void 0:i.email)=="string"&&i.email.includes("@")?i.email.split("@")[0]:"Ù…Ø³ØªØ®Ø¯Ù…"},tl=({isOpen:i,onClose:l,user:u,onActivate:x})=>{const[b,f]=r.useState(h.MONTHLY),[d,E]=r.useState(!1);Ke.useEffect(()=>{i&&(f(h.MONTHLY),E(!1))},[i,u]);const g=async()=>{if(!d){E(!0);try{await x(u.id,b)}catch(N){console.error("Activation failed",N),E(!1)}}};return!i||!u?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 transition-opacity duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-xl transform transition-all flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Re,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:"ØªÙØ¹ÙŠÙ„ Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: ",sl(u)]})]})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100 p-1",children:e.jsx(le,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:el.map(N=>e.jsxs("div",{onClick:()=>f(N.id),className:`cursor-pointer rounded-xl border-2 p-4 transition-colors flex items-center gap-4 ${b===N.id?`${N.border} ${N.bg} ring-1 ring-offset-1 ${N.color.replace("text-","ring-")}`:"border-gray-100 hover:border-gray-200"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${N.bg} flex items-center justify-center flex-shrink-0`,children:e.jsx(N.icon,{className:`w-6 h-6 ${N.color}`})}),e.jsxs("div",{children:[e.jsx("h5",{className:`font-bold ${b===N.id?"text-gray-900":"text-gray-700"}`,children:N.name}),b===N.id&&e.jsx("span",{className:`text-xs font-medium ${N.color}`,children:"ØªÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±"})]}),b===N.id&&e.jsx("div",{className:"mr-auto",children:e.jsx(ke,{className:`w-6 h-6 ${N.color}`})})]},N.id))})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 bg-gray-50 rounded-b-xl border-t border-gray-100 flex-shrink-0",children:[e.jsx("button",{onClick:l,disabled:d,className:"px-5 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-700 font-medium hover:bg-gray-50 focus:ring-2 focus:ring-gray-200 transition-all disabled:opacity-50",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsxs("button",{onClick:g,disabled:d,className:"px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 shadow-lg shadow-blue-600/20 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[d?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(ke,{className:"w-5 h-5"}),d?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙØ¹ÙŠÙ„...":"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"]})]})]})})},Ft=(i,l)=>{console.log(`ğŸ“¢ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${i}: Ù…Ù„ØºÙ‰`);const u=new CustomEvent("userSubscriptionUpdated",{detail:{userId:i,isActive:l,timestamp:Date.now()}});window.dispatchEvent(u);const x=new CustomEvent(`subscriptionUpdated_${i}`,{detail:{isActive:l,timestamp:Date.now()}});window.dispatchEvent(x)},Is=async()=>{var l,u,x;const i={updated:0,errors:0,details:[]};try{console.log("ğŸ”„ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©...");const b=ne(ae(B,"users"),Fe("subscription.isActive","==",!0)),d=(await Ee(b)).docs.map(j=>({id:j.id,...j.data()}));console.log(`ğŸ“Š ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${d.length} Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¯ÙŠÙ‡Ù… Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ù†Ø´Ø·Ø©`);for(const j of d)try{!Va(j.subscription)&&((l=j.subscription)!=null&&l.isActive)&&(await Mt(Le(B,"users",j.id),{"subscription.isActive":!1,"subscription.deactivatedAt":new Date,"subscription.deactivatedBy":"system-auto-update","subscription.deactivationReason":"Ø§Ù†ØªÙ‡Ø§Ø¡ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹",updatedAt:new Date}),Ft(j.id,!1),i.updated++,i.details.push({userId:j.id,email:j.email||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",previousStatus:!0,newStatus:!1}),console.log(`âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${j.email}`))}catch(C){i.errors++,i.details.push({userId:j.id,email:j.email||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",previousStatus:((u=j.subscription)==null?void 0:u.isActive)||!1,newStatus:((x=j.subscription)==null?void 0:x.isActive)||!1,error:C instanceof Error?C.message:"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}),console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${j.email}:`,C)}const E=ne(ae(B,"users"),Fe("isOnFreeTrial","==",!0)),N=(await Ee(E)).docs.map(j=>({id:j.id,...j.data()}));console.log(`ğŸ“Š ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${N.length} Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¯ÙŠÙ‡Ù… ØªØ¬Ø±Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù†Ø´Ø·Ø©`);for(const j of N)try{(await Oa.checkTrialValidity(j.id)).isExpired&&(Ft(j.id,!1),i.updated++,i.details.push({userId:j.id,email:j.email||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",previousStatus:!0,newStatus:!1}),console.log(`âœ… ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${j.email}`))}catch(C){i.errors++,console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${j.email}:`,C)}return console.log(`âœ… Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ: ${i.updated} ØªØ­Ø¯ÙŠØ«ØŒ ${i.errors} Ø®Ø·Ø£`),i}catch(b){throw console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª:",b),b}},al={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"Ù…Ø­Ù„ ÙƒØ§Ø´ÙŠ Ù„ÙŠÙ†Ùƒ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},rl=({navigate:i,auth:l,devMode:u,setDevMode:x,error:b,setError:f,authLoading:d,setAuthLoading:E,activeTab:g,setActiveTab:N,setNotificationCenterOpen:j,setNotificationSettings:C,setNotifications:U,notificationCount:L,setNotificationCount:p,users:m,setUsers:R,loading:M,setLoading:w,setEditingPlan:ie,isSavingContent:xe,setIsSavingContent:A,lastUpdateInfo:P,loadContentFromFirebase:Q,saveContentToFirebase:Me})=>{var St;const[H,Ce]=r.useState(!0),[te,ue]=r.useState(m||[]),[$,he]=r.useState(""),[Ve,es]=r.useState(null),[Oe,y]=r.useState({}),[D,k]=r.useState(!1),[_,q]=r.useState(null),[Y,G]=r.useState({name:"",price:"",period:"",description:"",features:[]}),[Bt,Ls]=r.useState(!1),[ll,nl]=r.useState(!1),[il,cl]=r.useState(null),[ol,dl]=r.useState(!1),[Ht,qt]=r.useState({sound:!0}),[Yt,ml]=r.useState(!1),[Wt,zt]=r.useState(null),[$e,Gt]=r.useState([]),[Ps,ss]=r.useState(!1),[xl,ul]=r.useState(void 0),[hl,gl]=r.useState(""),[pl,bl]=r.useState(null),[fl,jl]=r.useState(!1),Fs=$e.filter(s=>!((s==null?void 0:s.contacted)===!0||(s==null?void 0:s.status)==="contacted")),Be=$e.filter(s=>(s==null?void 0:s.contacted)===!0||(s==null?void 0:s.status)==="contacted"),[yl,Nl]=r.useState(""),[wl,vl]=r.useState(""),[Sl,kl]=r.useState(""),[El,Al]=r.useState(""),[Cl,_l]=r.useState(!1),[Tl,Dl]=r.useState(!1),Qt=async s=>{try{await Mt(Le(B,"waiting_list",s),{contacted:!0,status:"contacted",contactedAt:za()})}catch(t){console.error("Failed to mark waiting item as contacted",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„.")}},[S,ce]=r.useState({}),[ts,Zt]=r.useState(null),[as,Jt]=r.useState(null),[rs,Kt]=r.useState(null),[Rs,Ms]=r.useState(!1),[Vs,Os]=r.useState(!1),[$s,Bs]=r.useState(!1),[ge,Hs]=r.useState(""),[_e,Xt]=r.useState(""),[Te,ea]=r.useState(""),[sa,ls]=r.useState(0),[ta,ns]=r.useState(0),[aa,is]=r.useState(0),[He,cs]=r.useState(""),[os,qs]=r.useState(""),[ds,Ys]=r.useState(""),[Ws,zs]=r.useState(""),[Gs,Qs]=r.useState(""),[Zs,Js]=r.useState(""),[qe,Ks]=r.useState(""),[Xs,et]=r.useState(""),[st,tt]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const{systemSettingsService:s}=await I(async()=>{const{systemSettingsService:a}=await import("./index-CpSuNyR6.js").then(n=>n.c7);return{systemSettingsService:a}},__vite__mapDeps([0,1]),import.meta.url),t=await s.getTelegramWorkerUrl();t&&et(t)}catch{}})()},[]);const[at,ra]=r.useState(!1),[Ye,oe]=r.useState("idle"),[rt,pe]=r.useState(""),[ms,lt]=r.useState(""),[xs,nt]=r.useState(!1),[us,be]=r.useState("idle"),[la,De]=r.useState(""),[de,hs]=r.useState(!1),[na,We]=r.useState(!1),[gs,ia]=r.useState(null),[it,ca]=r.useState("monthly"),[oa,ps]=r.useState(!1),[da,ma]=r.useState(null),[Ul,xa]=r.useState(h.MONTHLY),[bs,ua]=r.useState("");r.useEffect(()=>{const s=$a(t=>{zs(String((t==null?void 0:t.version)||"")),Qs(String((t==null?void 0:t.downloadURL_64)||"")),Js(String((t==null?void 0:t.downloadURL_32)||"")),Ks(String((t==null?void 0:t.notes)||""))});return()=>{try{s()}catch{}}},[]),r.useEffect(()=>{const s=Ba(t=>{Hs(String((t==null?void 0:t.version)||"")),cs(String((t==null?void 0:t.url)||"")),lt(String((t==null?void 0:t.notes)||"")),nt(!!(t!=null&&t.force))});return()=>{try{s()}catch{}}},[]);const ha=async()=>{var n;if(pe(""),!(l!=null&&l.currentUser)){oe("error"),pe("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ£Ø¯Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±");try{alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ£Ø¯Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±")}catch{}return}const s=Ws.trim(),t=Gs.trim(),a=Zs.trim();if(!s){oe("error"),pe("Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ù…Ø·Ù„ÙˆØ¨");return}try{new URL(t)}catch{oe("error"),pe("Ø±Ø§Ø¨Ø· 64-Ø¨Øª ØºÙŠØ± ØµØ§Ù„Ø­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† https://)");return}try{new URL(a)}catch{oe("error"),pe("Ø±Ø§Ø¨Ø· 32-Ø¨Øª ØºÙŠØ± ØµØ§Ù„Ø­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† https://)");return}try{oe("publishing");const c=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));let o="";if(await Ka({version:s,downloadURL_64:t,downloadURL_32:a,notes:qe.trim()},l.currentUser.uid),c&&((n=window.electronAPI)!=null&&n.publishDesktopVersion)){const v=await l.currentUser.getIdToken(),T={version:s,updateUrl64:t,updateUrli32:a,notes:qe.trim(),force:!!at};o=await window.electronAPI.publishDesktopVersion(v,T)}else o="";oe("done");try{localStorage.setItem("desktop_update_cache",JSON.stringify({version:s,downloadURL_64:t,downloadURL_32:a,notes:qe.trim()}))}catch{}}catch(c){oe("error");const o=(c==null?void 0:c.message)||"ÙØ´Ù„ Ø§Ù„Ù†Ø´Ø±: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„";pe(o);try{alert(o)}catch{}}},Ue=s=>{const t=s==null?void 0:s.displayName;let a="";typeof t=="string"?a=t:t&&typeof t=="object"&&(a=(t.ar||t.en||"").toString()),!a&&typeof(s==null?void 0:s.email)=="string"&&(a=s.email);const n=String(a).trim().charAt(0);return n?n.toUpperCase():"ØŸ"},Z=s=>{const t=s==null?void 0:s.displayName;if(typeof t=="string"&&t.trim())return t.trim();if(t&&typeof t=="object"){const a=t.full_name||t.name||t.ar||t.en;if(typeof a=="string"&&a.trim())return a.trim()}return typeof(s==null?void 0:s.email)=="string"&&s.email.includes("@")?s.email.split("@")[0]:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"},[fs,ct]=r.useState(""),[js,ot]=r.useState(""),[dt,mt]=r.useState(""),[ys,xt]=r.useState(""),[ut,ht]=r.useState(!1),[fe,Ns]=r.useState(""),[W,gt]=r.useState(24),[pt,bt]=r.useState("24"),[ft,jt]=r.useState(!1),[Il,yt]=r.useState(!1),[je,ws]=r.useState("active");r.useEffect(()=>{if($){const s=$.toLowerCase(),t=m.filter(a=>(a.displayName||"").toLowerCase().includes(s)||(a.email||"").toLowerCase().includes(s)||(a.phone||"").includes(s));ue(t)}else ue(m)},[m,$]),r.useEffect(()=>{g==="trials"&&(async()=>{try{yt(!0);const{FreeTrialService:s}=await I(async()=>{const{FreeTrialService:a}=await import("./index-CpSuNyR6.js").then(n=>n.c8);return{FreeTrialService:a}},__vite__mapDeps([0,1]),import.meta.url),t=await s.getTrialDurationHours();gt(t),bt(String(t))}catch(s){console.error("Failed to load trial duration",s)}finally{yt(!1)}})()},[g]),r.useEffect(()=>{g==="application"&&(async()=>{try{const{getAppDownloads:s}=await I(async()=>{const{getAppDownloads:a}=await import("./index-CpSuNyR6.js").then(n=>n.ca);return{getAppDownloads:a}},__vite__mapDeps([0,1]),import.meta.url),t=await s();ce(t||{}),cs((t==null?void 0:t.androidUrl)||""),qs((t==null?void 0:t.pcUrl)||""),Ys((t==null?void 0:t.pc32Url)||"")}catch(s){console.error("Failed to load app downloads",s)}})()},[g]),r.useEffect(()=>{if(g==="waitingList"){ss(!0);try{const s=ne(ae(B,"waiting_list")),t=Ds(s,a=>{const n=a.docs.map(c=>({id:c.id,...c.data()})).sort((c,o)=>{var F,V,z,O,J,ye;const v=((V=(F=c==null?void 0:c.createdAt)==null?void 0:F.toMillis)==null?void 0:V.call(F))??((z=c==null?void 0:c.createdAt)==null?void 0:z.seconds)*1e3??0;return(((J=(O=o==null?void 0:o.createdAt)==null?void 0:O.toMillis)==null?void 0:J.call(O))??((ye=o==null?void 0:o.createdAt)==null?void 0:ye.seconds)*1e3??0)-v});Gt(n),ss(!1)});return()=>t()}catch(s){console.error("Failed to subscribe to waiting_list:",s),ss(!1)}}},[g]),r.useEffect(()=>{g==="subscriptions"&&(async()=>{try{await Is()}catch(s){console.error("Failed to auto-update expired subscriptions:",s)}})()},[g]);const ga=async()=>{var s;if(!fs.trim()||!js.trim()){alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ù†ÙˆØ§Ù† ÙˆØ±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±");return}try{ht(!0);const t=ys.trim()?`user:${ys.trim()}`:"global";await fr({title:fs.trim(),message:js.trim(),audienceKey:t,createdBy:(s=l==null?void 0:l.currentUser)==null?void 0:s.uid,linkUrl:dt.trim()||void 0}),ct(""),ot(""),mt(""),xt(""),alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!")}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±")}finally{ht(!1)}},pa=()=>{l!=null&&l.signOut&&l.signOut(),i("/admin/login")},ba=Ke.useCallback(s=>{ma(s),xa(h.MONTHLY),ps(!0)},[]),Nt=Ke.useCallback(async(s,t,a=null)=>{var n;try{console.log("Activating subscription for user:",s,"with plan:",t,"and variant:",a);const c=((n=l==null?void 0:l.currentUser)==null?void 0:n.uid)||"admin-user-id";await Et(s,t,c,a),console.log("âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù†Ø¬Ø§Ø­")}catch(c){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",c),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}},[l]),wt=async s=>{try{console.log("Deactivating subscription for user:",s),await Ja(s),console.log("âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}},fa=async s=>{var t;try{if(!window.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ

Ø³ÙŠØªÙ… Ø­Ø°Ù:
- Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡
- Ø§Ø´ØªØ±Ø§ÙƒÙ‡
- Ù…Ø¹Ø§Ù…Ù„Ø§ØªÙ‡
- Ù…Ø­Ø§Ø¯Ø«Ø§ØªÙ‡

Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`))return;console.log("Ø¨Ø¯Ø¡ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",s);const n=((t=l==null?void 0:l.currentUser)==null?void 0:t.uid)||"unknown-admin";try{const o=await Ga(Qa,"deleteUserPermanently")({userId:s});console.log("Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¯Ø§Ù„Ø© Ø§Ù„Ø­Ø°Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:",o),R(v=>v.filter(T=>T.id!==s)),ue(v=>v.filter(T=>T.id!==s)),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©.");return}catch(c){console.warn("ØªØ¹Ø°Ø± ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø°Ù Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¹Ø¨Ø± Cloud FunctionsØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­Ø°Ù Ø§Ù„Ù…Ø­Ù„ÙŠ Ø§Ù„Ù…Ø¤Ù‚Øª:",(c==null?void 0:c.message)||c)}{const c=[];try{await Ie(Le(B,"profiles",s)),console.log("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ")}catch(o){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ:",o),c.push(`Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ: ${(o==null?void 0:o.message)||o}`)}try{await Ie(Le(B,"users",s)),console.log("ØªÙ… Ø­Ø°Ù ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© users")}catch(o){console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© users:",o),c.push(`users: ${(o==null?void 0:o.message)||o}`)}try{const o=ne(ae(B,"transactions"),Fe("userId","==",s)),v=await Ee(o),T=v.docs.map(z=>Ie(z.ref)),F=await Promise.allSettled(T),V=F.filter(z=>z.status==="rejected");V.length?(console.warn("ÙØ´Ù„ Ø­Ø°Ù Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª:",V.length),c.push(`Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: ÙØ´Ù„ Ø­Ø°Ù ${V.length} Ù…Ù† Ø£ØµÙ„ ${F.length}`)):console.log(`ØªÙ… Ø­Ø°Ù ${v.size} Ù…Ø¹Ø§Ù…Ù„Ø©`)}catch(o){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨/Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª:",o),c.push(`Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: ${(o==null?void 0:o.message)||o}`)}try{const o=ne(ae(B,"chatRooms"),Fe("participants","array-contains",s)),v=await Ee(o),T=v.docs.map(async F=>{try{const z=(await Ee(ae(F.ref,"messages"))).docs.map(O=>Ie(O.ref));await Promise.allSettled(z),await Ie(F.ref)}catch(V){console.error("ÙØ´Ù„ Ø­Ø°Ù Ù…Ø­Ø§Ø¯Ø«Ø©/Ø±Ø³Ø§Ø¦Ù„:",V),c.push(`Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª: ${F.id}`)}});await Promise.all(T),console.log(`ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© ${v.size} Ù…Ø­Ø§Ø¯Ø«Ø©`)}catch(o){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨/Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª:",o),c.push(`Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª: ${(o==null?void 0:o.message)||o}`)}try{await Za(Le(B,"deletedUsers",s),{deletedAt:new Date,deletedBy:n,reason:"Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"})}catch(o){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙ…Ø­Ø°ÙˆÙ:",o),c.push(`deletedUsers: ${(o==null?void 0:o.message)||o}`)}R(o=>o.filter(v=>v.id!==s)),ue(o=>o.filter(v=>v.id!==s)),c.length===0?alert("ØªÙ… Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¨Ù†Ø¬Ø§Ø­. Ù…Ù„Ø§Ø­Ø¸Ø©: Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ù„Ù… ÙŠÙØ­Ø°Ù."):alert(`ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:
- ${c.join(`
- `)}

Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ù‚Ø¯ Ù„Ù… ØªÙØ­Ø°Ù Ø¨Ø§Ù„ÙƒØ§Ù…Ù„. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.`)}}catch(a){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",a),alert(`Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${a.message||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}};r.useEffect(()=>{(async()=>{try{if(typeof Q=="function"){const t=await Q();t&&(t.monthly||t.yearly||t.lifetime)&&y(t)}}catch(t){console.warn("Failed to load content data:",t)}})()},[]);const ja=async()=>{var s;try{if(typeof Me!="function")return;A(!0);const t=((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin-user-id";await Me(Oe,t),alert("ØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰:",t),alert(`ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰: ${(t==null?void 0:t.message)||"Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}`)}finally{A(!1)}},ze=(s,t,a)=>{y(n=>({...n,[s]:{...(n==null?void 0:n[s])||{},[t]:a}}))},ya=s=>{y(t=>{var a;return{...t,[s]:{...(t==null?void 0:t[s])||{},features:[...((a=t==null?void 0:t[s])==null?void 0:a.features)||[],""]}}})},Na=(s,t,a)=>{y(n=>{var o;const c=[...((o=n==null?void 0:n[s])==null?void 0:o.features)||[]];return c[t]=a,{...n,[s]:{...(n==null?void 0:n[s])||{},features:c}}})},wa=(s,t)=>{y(a=>{var c;const n=[...((c=a==null?void 0:a[s])==null?void 0:c.features)||[]];return n.splice(t,1),{...a,[s]:{...(a==null?void 0:a[s])||{},features:n}}})},va=()=>{qt(s=>({...s,sound:!s.sound}))},Sa=()=>{zt(null)},ka=async()=>{try{const s=Number(pt);if(isNaN(s)||s<1){alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¯Ø© ØµØ­ÙŠØ­Ø© Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª");return}jt(!0);const{FreeTrialService:t}=await I(async()=>{const{FreeTrialService:n}=await import("./index-CpSuNyR6.js").then(c=>c.c8);return{FreeTrialService:n}},__vite__mapDeps([0,1]),import.meta.url),a=await t.updateTrialDurationHours(s);a.success?(gt(s),alert(a.message)):alert(a.message||"ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ù…Ø¯Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø©")}catch(s){console.error("Error updating trial duration:",s),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ù…Ø¯Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø©")}finally{jt(!1)}},vt=async s=>{try{const{FreeTrialService:t}=await I(async()=>{const{FreeTrialService:n}=await import("./index-CpSuNyR6.js").then(c=>c.c8);return{FreeTrialService:n}},__vite__mapDeps([0,1]),import.meta.url),a=await t.startFreeTrialFromAdmin(s);alert(a.message||`ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù…Ø¯Ø© ${W} ${W>=3&&W<=10?"Ø³Ø§Ø¹Ø§Øª":W===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"}`)}catch(t){console.error("Error activating free trial:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}},Ea=async s=>{try{const{FreeTrialService:t}=await I(async()=>{const{FreeTrialService:n}=await import("./index-CpSuNyR6.js").then(c=>c.c8);return{FreeTrialService:n}},__vite__mapDeps([0,1]),import.meta.url),a=await t.cancelActiveFreeTrial(s)}catch(t){console.error("Error cancelling free trial:",t)}},Aa=async s=>{try{const{FreeTrialService:t}=await I(async()=>{const{FreeTrialService:n}=await import("./index-CpSuNyR6.js").then(c=>c.c8);return{FreeTrialService:n}},__vite__mapDeps([0,1]),import.meta.url),a=await t.resetActiveTrialToCurrentDuration(s);alert(a.message)}catch(t){console.error("Error resetting user trial end:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¬Ø±Ø¨Ø©.")}},Ca=(s,t)=>{console.log("Toggling user status:",s,t)},vs=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit"}):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",_a=[{id:"users",label:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",icon:Es},{id:"subscriptions",label:"Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",icon:X},{id:"trials",label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",icon:re},{id:"content",label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰",icon:qa},{id:"application",label:"Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",icon:As},{id:"whatsapp",label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨",icon:Ze},{id:"branches",label:"Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹",icon:It},{id:"analytics",label:"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",icon:Tt}];return d?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©..."}),!1]})}):b?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-sm font-medium",children:b})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{f(null),i("/admin/login")},className:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"ğŸ”‘ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"}),!1,e.jsx("button",{onClick:()=>{console.log("ğŸ” Current error details:",b),console.log("ğŸ” Auth state:",l.currentUser),console.log("ğŸ” Dev mode:",u),console.log("ğŸ” Environment:",al)},className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"ğŸ› Ø·Ø¨Ø§Ø¹Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£ ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…"})]})]})}):!u&&!l.currentUser?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>i("/admin/login"),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"}),!1]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row overflow-x-hidden",children:[e.jsxs("div",{className:`bg-white shadow-lg transition-all duration-300 flex flex-col z-40 ${H?"translate-x-0 w-64 md:w-64":"translate-x-full w-64 md:w-16 md:translate-x-0"} fixed inset-y-0 right-0 md:static md:inset-auto`,children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[H&&e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Ha,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ…"})]})]}),e.jsx("button",{onClick:()=>Ce(!H),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:H?e.jsx(le,{className:"w-5 h-5"}):e.jsx(Dr,{className:"w-5 h-5"})})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:_a.map(s=>{const t=s.icon;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>{if(s.id==="externalNotifications"){i("/admin/notifications");return}N(s.id)},className:`w-full flex items-center space-x-3 space-x-reverse p-3 rounded-lg transition-colors ${g===s.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(t,{className:"w-5 h-5"}),H&&e.jsx("span",{className:"font-medium",children:s.label})]})},s.id)})})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("button",{onClick:pa,className:"w-full flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Ya,{className:"w-5 h-5"}),H&&e.jsx("span",{className:"font-medium",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"})]})})]}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/30 md:hidden",onClick:()=>Ce(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[!H&&e.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>Ce(!0),"aria-label":"ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",children:e.jsx(At,{className:"w-5 h-5"})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[g==="users"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",g==="waitingList"&&"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±",g==="subscriptions"&&"Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",g==="trials"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",g==="application"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",g==="analytics"&&"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",g==="branches"&&"Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹"]}),u&&e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"ğŸ”§ ÙˆØ¶Ø¹ Ø§Ù„ØªØ·ÙˆÙŠØ±"})]}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ",u?"Ø§Ù„Ù…Ø·ÙˆØ±":"Ø§Ù„Ù…Ø¯ÙŠØ±"]}),e.jsx(nr,{})]})]})}),e.jsxs("main",{className:"flex-1 p-3 sm:p-4 md:p-6 max-w-full overflow-x-hidden",children:[g==="waitingList"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø·Ù„Ø¨Ø§Øª Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±"}),e.jsx("div",{className:"text-sm text-gray-500 flex items-center gap-3",children:Ps?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...":e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",$e.length]}),e.jsxs("span",{className:"text-red-600",children:["Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ",Fs.length]}),e.jsxs("span",{className:"text-green-600",children:["ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„: ",Be.length]})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:Ps?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª..."})]}):$e.length===0?e.jsx("div",{className:"p-8 text-center text-gray-600",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ù…Ø¹Ø±Ù"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø³Ø¨Ø¨ Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Fs.map(s=>{var v;const t=(s.phone||"").toString(),a=t.replace(/\D/g,"");let n=null;const c="Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø·Ù„Ø¨Øª Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹Ù†Ø§. ÙƒÙŠÙ Ù†Ø³Ø§Ø¹Ø¯ÙƒØŸ";try{Ot(t)&&(n=Vt(t,c))}catch{n=null}const o=(v=s.createdAt)!=null&&v.toDate?s.createdAt.toDate():s.createdAt?new Date(s.createdAt):null;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:s.name||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:s.userId||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.reason||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a||"â€”"}),e.jsxs("td",{className:"px-4 py-3 flex items-center gap-2",children:[n?e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:e.jsx("button",{className:"px-3 py-1.5 rounded-md bg-green-600 text-white text-sm hover:bg-green-700",children:"ÙˆØ§ØªØ³Ø§Ø¨"})}):e.jsx("span",{className:"text-xs text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù…"}),e.jsx("button",{className:"px-3 py-1.5 rounded-md bg-indigo-600 text-white text-sm hover:bg-indigo-700",onClick:()=>Qt(s.id),title:"ØªÙ…ÙŠÙŠØ² ÙƒØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„",children:"ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:o?o.toLocaleString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]},s.id)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"}),e.jsx("div",{className:"text-sm text-gray-500",children:Be.length})]}),e.jsx("div",{className:"overflow-x-auto",children:Be.length===0?e.jsx("div",{className:"p-8 text-center text-gray-600",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ù‚Ø³Ù… ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ù…Ø¹Ø±Ù"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø³Ø¨Ø¨ Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØ§ØµÙ„"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Be.map(s=>{var c;const a=(s.phone||"").toString().replace(/\D/g,""),n=(c=s.contactedAt)!=null&&c.toDate?s.contactedAt.toDate():s.contactedAt?new Date(s.contactedAt):null;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800",children:s.name||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:s.userId||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.reason||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:a||"â€”"}),e.jsx("td",{className:"px-4 py-3 text-xs",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-green-100 text-green-700",children:"ØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:n?n.toLocaleString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]},s.id)})})]})})]})]}),g==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:m.length})]}),e.jsx(Es,{className:"w-8 h-8 text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:ys,onChange:s=>xt(s.target.value),placeholder:"Ø¶Ø¹ uid Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø¥Ø´Ø¹Ø§Ø± Ø´Ø®ØµÙŠ",className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºÙ‹Ø§ Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ø§Ù…Ø› Ø¥Ù† ÙˆØ¶Ø¹ØªÙ‡ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø·."})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>s.isActive).length})]}),e.jsx(Pt,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø¹Ø·Ù„ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.filter(s=>!s.isActive).length})]}),e.jsx(Pr,{className:"w-8 h-8 text-red-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù…...",value:$,onChange:s=>he(s.target.value),className:"pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]})]}),$&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Ø¹Ø±Ø¶ ",te.length," Ù…Ù† Ø£ØµÙ„ ",m.length," Ù…Ø³ØªØ®Ø¯Ù…",$&&e.jsx("button",{onClick:()=>he(""),className:"mr-2 text-purple-600 hover:text-purple-800 underline",children:"Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:M?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):te.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:$?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.map(s=>e.jsx(Xr,{user:s,onActivateSubscription:Nt,onRequestActivation:ba,onToggleUserStatus:Ca,onDeactivateSubscription:wt,onDeleteUser:fa},s.id))})})]})]}),g==="application"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5 text-green-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯"]}),(S==null?void 0:S.androidUrl)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ: ",e.jsx("a",{href:Ne(S.androidUrl),className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:"ØªÙ†Ø²ÙŠÙ„"}),S.androidVersion?` | Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${S.androidVersion}`:""]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 items-start lg:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù APK"}),e.jsx("input",{type:"file",accept:".apk",onChange:s=>{var t;return Zt(((t=s.target.files)==null?void 0:t[0])||null)},className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:ge,onChange:s=>Hs(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: 1.0.3",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:async()=>{var s;if(ts)try{Ms(!0),ls(0);const{uploadAppBinaryResumable:t}=await I(async()=>{const{uploadAppBinaryResumable:n}=await import("./index-CpSuNyR6.js").then(c=>c.ca);return{uploadAppBinaryResumable:n}},__vite__mapDeps([0,1]),import.meta.url),a=await t(ts,"android",((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin",ge||void 0,n=>ls(n),3e5);ce(n=>({...n,androidUrl:a,androidVersion:ge||n.androidVersion}))}catch(t){console.error("Android upload failed",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯: ${t.message}`:"ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯")}finally{Ms(!1),ls(0)}},disabled:Rs||!ts,className:"w-full sm:w-auto flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",children:[e.jsx(_s,{className:"w-4 h-4"}),Rs?`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... ${sa}%`:"Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯"]}),(S==null?void 0:S.androidUrl)&&e.jsxs("a",{href:Ne(S.androidUrl),className:"w-full sm:w-auto text-center flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Cs,{className:"w-4 h-4"})," ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ (APK)"}),e.jsx("input",{type:"url",value:He,onChange:s=>cs(s.target.value),placeholder:"https://example.com/app-release.apk",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsxs("button",{onClick:async()=>{var s;try{const{setAppDownloadLinks:t}=await I(async()=>{const{setAppDownloadLinks:a}=await import("./index-CpSuNyR6.js").then(n=>n.ca);return{setAppDownloadLinks:a}},__vite__mapDeps([0,1]),import.meta.url);await t({androidUrl:He||void 0,androidVersion:ge||void 0},((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin"),ce(a=>({...a,androidUrl:He||void 0,androidVersion:ge||(a==null?void 0:a.androidVersion)})),alert("ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("Failed to save android link",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·: ${t.message}`:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·")}},className:"w-full sm:w-auto flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700",children:[e.jsx(ve,{className:"w-4 h-4"})," Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:ms,onChange:s=>lt(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø¥ØµÙ„Ø§Ø­Ø§Øª ÙˆØªØ­Ø³ÙŠÙ†Ø§Øª",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:xs,onChange:s=>nt(s.target.checked)}),"ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ø¨Ø§Ø±ÙŠ"]})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("button",{onClick:async()=>{if(De(""),!(l!=null&&l.currentUser)){be("error"),De("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ£Ø¯Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±");try{alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ£Ø¯Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±")}catch{}return}const s=ge.trim(),t=He.trim();if(!s){be("error"),De("Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ù…Ø·Ù„ÙˆØ¨");return}try{new URL(t)}catch{be("error"),De("Ø±Ø§Ø¨Ø· APK ØºÙŠØ± ØµØ§Ù„Ø­ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† https://)");return}try{be("publishing"),await Wa({version:s,url:t,notes:ms.trim(),force:!!xs},l.currentUser.uid),be("done");try{localStorage.setItem("android_update_cache",JSON.stringify({version:s,url:t,notes:ms.trim(),force:!!xs}))}catch{}alert("ØªÙ… Ø­ÙØ¸ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}catch(a){be("error");const n=(a==null?void 0:a.message)||"ÙØ´Ù„ Ø§Ù„Ù†Ø´Ø±: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„";De(n);try{alert(n)}catch{}}},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Ù†Ø´Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯"}),us==="publishing"&&e.jsx("span",{className:"text-sm text-gray-600",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ø´Ø±..."}),us==="error"&&e.jsx("span",{className:"text-sm text-red-600",children:la}),us==="done"&&e.jsx("span",{className:"text-sm text-green-600",children:"ØªÙ… Ø§Ù„Ù†Ø´Ø±"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-indigo-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Windows) â€” 64 Ø¨Øª"]}),(S==null?void 0:S.pcUrl)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ: ",e.jsx("a",{href:Ne(S.pcUrl),className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:"ØªÙ†Ø²ÙŠÙ„"}),S.pcVersion?` | Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${S.pcVersion}`:""]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 items-start lg:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (EXE/ZIP)"}),e.jsx("input",{type:"file",accept:".exe,.zip",onChange:s=>{var t;return Jt(((t=s.target.files)==null?void 0:t[0])||null)},className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:_e,onChange:s=>Xt(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: 2.1.0",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:async()=>{var s;if(as)try{Os(!0),ns(0);const{uploadAppBinaryResumable:t}=await I(async()=>{const{uploadAppBinaryResumable:n}=await import("./index-CpSuNyR6.js").then(c=>c.ca);return{uploadAppBinaryResumable:n}},__vite__mapDeps([0,1]),import.meta.url),a=await t(as,"pc",((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin",_e||void 0,n=>ns(n),3e5);ce(n=>({...n,pcUrl:a,pcVersion:_e||n.pcVersion}))}catch(t){console.error("PC upload failed",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ${t.message}`:"ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±")}finally{Os(!1),ns(0)}},disabled:Vs||!as,className:"w-full sm:w-auto flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[e.jsx(_s,{className:"w-4 h-4"}),Vs?`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... ${ta}%`:"Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±"]}),(S==null?void 0:S.pcUrl)&&e.jsxs("a",{href:Ne(S.pcUrl),className:"w-full sm:w-auto text-center flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Cs,{className:"w-4 h-4"})," ØªÙ†Ø²ÙŠÙ„ Ù†Ø³Ø®Ø© 64 Ø¨Øª"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (EXE/ZIP)"}),e.jsx("input",{type:"url",value:os,onChange:s=>qs(s.target.value),placeholder:"https://example.com/cashy-setup.exe",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:async()=>{var s;try{const{setAppDownloadLinks:t}=await I(async()=>{const{setAppDownloadLinks:a}=await import("./index-CpSuNyR6.js").then(n=>n.ca);return{setAppDownloadLinks:a}},__vite__mapDeps([0,1]),import.meta.url);await t({pcUrl:os||void 0,pcVersion:_e||void 0},((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin"),ce(a=>({...a,pcUrl:os||void 0,pcVersion:_e||(a==null?void 0:a.pcVersion)})),alert("ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("Failed to save pc link",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·: ${t.message}`:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·")}},className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:[e.jsx(ve,{className:"w-4 h-4"})," Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-sky-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Windows) â€” 32 Ø¨Øª"]}),(S==null?void 0:S.pc32Url)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ: ",e.jsx("a",{href:Ne(S.pc32Url),className:"text-blue-600 underline",target:"_blank",rel:"noopener noreferrer",children:"ØªÙ†Ø²ÙŠÙ„"}),S.pc32Version?` | Ø§Ù„Ø¥ØµØ¯Ø§Ø±: ${S.pc32Version}`:""]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 items-start lg:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (EXE/ZIP)"}),e.jsx("input",{type:"file",accept:".exe,.zip",onChange:s=>{var t;return Kt(((t=s.target.files)==null?void 0:t[0])||null)},className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"text",value:Te,onChange:s=>ea(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: 2.1.0",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:async()=>{var s;if(rs)try{Bs(!0),is(0);const{uploadAppBinaryResumable:t}=await I(async()=>{const{uploadAppBinaryResumable:n}=await import("./index-CpSuNyR6.js").then(c=>c.ca);return{uploadAppBinaryResumable:n}},__vite__mapDeps([0,1]),import.meta.url),a=await t(rs,"pc32",((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin",Te||void 0,n=>is(n),3e5);ce(n=>({...n,pc32Url:a,pc32Version:Te||n.pc32Version}))}catch(t){console.error("PC32 upload failed",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ 32 Ø¨Øª: ${t.message}`:"ÙØ´Ù„ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ 32 Ø¨Øª")}finally{Bs(!1),is(0)}},disabled:$s||!rs,className:"w-full sm:w-auto flex items-center gap-2 bg-sky-600 text-white px-4 py-2 rounded-lg hover:bg-sky-700 disabled:opacity-50",children:[e.jsx(_s,{className:"w-4 h-4"}),$s?`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... ${aa}%`:"Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ 32 Ø¨Øª"]}),(S==null?void 0:S.pc32Url)&&e.jsxs("a",{href:Ne(S.pc32Url),className:"w-full sm:w-auto text-center flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Cs,{className:"w-4 h-4"})," ØªÙ†Ø²ÙŠÙ„ Ù†Ø³Ø®Ø© 32 Ø¨Øª"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù†Ø³Ø®Ø© 32 Ø¨Øª (EXE/ZIP)"}),e.jsx("input",{type:"url",value:ds,onChange:s=>Ys(s.target.value),placeholder:"https://example.com/cashy-setup-ia32.exe",className:"w-full p-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:async()=>{var s;try{const{setAppDownloadLinks:t}=await I(async()=>{const{setAppDownloadLinks:a}=await import("./index-CpSuNyR6.js").then(n=>n.ca);return{setAppDownloadLinks:a}},__vite__mapDeps([0,1]),import.meta.url);await t({pc32Url:ds||void 0,pc32Version:Te||void 0},((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin"),ce(a=>({...a,pc32Url:ds||void 0,pc32Version:Te||(a==null?void 0:a.pc32Version)})),alert("ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· 32 Ø¨Øª Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("Failed to save pc32 link",t),alert(t!=null&&t.message?`ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·: ${t.message}`:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·")}},className:"flex items-center gap-2 bg-sky-600 text-white px-4 py-2 rounded-lg hover:bg-sky-700",children:[e.jsx(ve,{className:"w-4 h-4"})," Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-indigo-600"})," Ø¥Ø¯Ø§Ø±Ø© ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ø¥ØµØ¯Ø§Ø± Ù…ÙˆØ­Ù‘Ø¯ Ù…Ø¹ Ø±ÙˆØ§Ø¨Ø· 64-Ø¨Øª Ùˆ32-Ø¨ØªØŒ ÙˆÙ…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ®ÙŠØ§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø±"}),e.jsx("input",{type:"text",value:Ws,onChange:s=>zs(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ù…Ø«Ø§Ù„: 1.4.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù†Ø³Ø®Ø© 64-Ø¨Øª"}),e.jsx("input",{type:"text",value:Gs,onChange:s=>Qs(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø«Ø¨Ù‘Øª x64"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Ù†Ø³Ø®Ø© 32-Ø¨Øª"}),e.jsx("input",{type:"text",value:Zs,onChange:s=>Js(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø«Ø¨Ù‘Øª ia32"})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ«"}),e.jsx("textarea",{value:qe,onChange:s=>Ks(s.target.value),className:"w-full p-2 border border-gray-300 rounded-md",rows:4,placeholder:"Ù†Øµ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª"})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:at,onChange:s=>ra(s.target.checked)}),"ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ø¨Ø§Ø±ÙŠ (Ù„Ù† ÙŠÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«)"]})})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("button",{onClick:ha,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-60",disabled:Ye==="publishing",children:"Ù†Ø´Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«"}),Ye==="publishing"&&e.jsx("span",{className:"text-sm text-gray-600",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ø´Ø±..."}),Ye==="done"&&e.jsx("span",{className:"text-sm text-green-600",children:"ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­"}),Ye==="error"&&e.jsx("span",{className:"text-sm text-red-600",children:"ÙØ´Ù„ Ø§Ù„Ù†Ø´Ø±"}),rt&&e.jsx("span",{className:"text-sm text-red-600",children:rt})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5 text-emerald-600"})," Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø´Ø¹Ø§Ø± ØªØ­Ø¯ÙŠØ« ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ (Firestore)"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"ÙŠÙ‚Ø±Ø£Ù‡ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ ÙˆÙŠØ¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„ØªÙ†Ø²ÙŠÙ„."})]})}),e.jsx("div",{className:"text-sm text-gray-600",children:"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¥Ø¯Ø§Ø±Ø© ØªØ­Ø¯ÙŠØ« ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†."})]})]}),g==="branches"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø·Ù„Ø¨Ø§Øª Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹ (Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:m.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.status)==="pending"||((a=s.branchPackage)==null?void 0:a.requested)}).length})]}),e.jsx(It,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„Ù…ÙØ¹Ù‘Ù„Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>{var t;return((t=s.branchPackage)==null?void 0:t.status)==="active"}).length})]}),e.jsx(ke,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).length})]}),e.jsx(Es,{className:"w-8 h-8 text-blue-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ù‚Ø³Ù… Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±ÙˆØ¹...",value:$,onChange:s=>he(s.target.value),className:"pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]})]}),$&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Ø¹Ø±Ø¶ ",te.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).length," Ù…Ù† Ø£ØµÙ„ ",m.filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).length," Ø­Ø³Ø§Ø¨",$&&e.jsx("button",{onClick:()=>he(""),className:"mr-2 text-purple-600 hover:text-purple-800 underline",children:"Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:M?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:($?te:m).filter(s=>{var t,a;return((t=s.branchPackage)==null?void 0:t.requested)||((a=s.branchPackage)==null?void 0:a.status)}).map(s=>{var a,n,c;const t=((a=s.branchPackage)==null?void 0:a.status)||((n=s.branchPackage)!=null&&n.requested?"pending":"none");return e.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-semibold",children:Ue(s)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:Z(s)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),((c=s.branchPackage)==null?void 0:c.requestedAt)&&e.jsxs("p",{className:"text-xs text-gray-400",children:["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨: ",vs(s.branchPackage.requestedAt)]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t==="active"?"bg-green-100 text-green-700":t==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:t==="active"?"Ù…ÙØ¹Ù‘Ù„":t==="pending"?"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„":"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),t==="active"&&e.jsx("button",{title:"Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹",onClick:async()=>{var v;if(window.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ"))try{const{doc:T,updateDoc:F}=await I(async()=>{const{doc:O,updateDoc:J}=await import("./index-CpSuNyR6.js").then(ye=>ye.c5);return{doc:O,updateDoc:J}},__vite__mapDeps([0,1]),import.meta.url),{db:V}=await I(async()=>{const{db:O}=await import("./index-CpSuNyR6.js").then(J=>J.c6);return{db:O}},__vite__mapDeps([0,1]),import.meta.url),z=((v=l==null?void 0:l.currentUser)==null?void 0:v.uid)||"admin-user-id";await F(T(V,"users",s.id),{branchPackage:{requested:!0,status:"canceled",canceledAt:new Date,canceledBy:z},isActive:!1,updatedAt:new Date}),alert("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨")}catch(T){console.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹:",T),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}},className:"p-1 rounded-md text-red-600 hover:bg-red-50",children:e.jsx(vr,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t!=="active"&&e.jsx("button",{onClick:async()=>{var o;try{const{doc:v,updateDoc:T,setDoc:F}=await I(async()=>{const{doc:O,updateDoc:J,setDoc:ye}=await import("./index-CpSuNyR6.js").then(Ta=>Ta.c5);return{doc:O,updateDoc:J,setDoc:ye}},__vite__mapDeps([0,1]),import.meta.url),{db:V}=await I(async()=>{const{db:O}=await import("./index-CpSuNyR6.js").then(J=>J.c6);return{db:O}},__vite__mapDeps([0,1]),import.meta.url),z=((o=l==null?void 0:l.currentUser)==null?void 0:o.uid)||"admin-user-id";await T(v(V,"users",s.id),{branchPackage:{requested:!0,status:"active",activatedAt:new Date,activatedBy:z},isActive:!0,approved:!0,role:"merchant",updatedAt:new Date}),await F(v(V,"profiles",s.id),{role:"merchant",approved:!0,updatedAt:new Date},{merge:!0}),alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨")}catch(v){console.error("ÙØ´Ù„ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹:",v),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}},className:"px-3 py-1 text-sm rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ±ÙˆØ¹"})})]})]},s.id)})})})]})]}),g==="subscriptions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>{var t;return(t=s.subscription)==null?void 0:t.isActive}).length})]}),e.jsx(ke,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ØªÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ 7 Ø£ÙŠØ§Ù…"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m.filter(s=>{var o,v;if(!((o=s.subscription)!=null&&o.endDate)||!((v=s.subscription)!=null&&v.isActive))return!1;const t=s.subscription.endDate.toDate?s.subscription.endDate.toDate():new Date(s.subscription.endDate),a=new Date,n=t.getTime()-a.getTime(),c=Math.ceil(n/(1e3*60*60*24));return c<=7&&c>0}).length})]}),e.jsx(Je,{className:"w-8 h-8 text-orange-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ù…Ù†ØªÙ‡ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.filter(s=>{var a;return(a=s.subscription)!=null&&a.endDate?(s.subscription.endDate.toDate?s.subscription.endDate.toDate():new Date(s.subscription.endDate))<new Date:!1}).length})]}),e.jsx(ee,{className:"w-8 h-8 text-red-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.filter(s=>{var t;return((t=s.subscription)==null?void 0:t.planType)===h.LIFETIME}).length})]}),e.jsx(Pe,{className:"w-8 h-8 text-yellow-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:de?"Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù…Ù„ØºÙŠØ©":"Ø¬Ø¯ÙˆÙ„ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:de?"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ø´ØªØ±Ø§ÙƒØ§ØªÙ‡Ù…":"Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ø¹ ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(we,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª...",value:bs,onChange:s=>ua(s.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>hs(!1),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${de?"text-gray-600 hover:text-gray-900":"bg-white text-blue-600 shadow-sm"}`,children:"Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©"}),e.jsx("button",{onClick:()=>hs(!0),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${de?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù…Ù„ØºÙŠØ©"}),e.jsx("button",{onClick:async()=>{try{w(!0),await Is(),alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø¨Ù†Ø¬Ø§Ø­")}catch{alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«")}finally{w(!1)}},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",title:"ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",children:e.jsx(Ae,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:M?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ø¥Ø¬Ø±Ø§Ø¡"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.filter(s=>{var a,n;if(!((a=s.subscription)!=null&&a.planType))return!1;const t=((n=s.subscription)==null?void 0:n.isActive)===!1||(s==null?void 0:s.isActive)===!1;if(bs){const c=bs.trim().toLowerCase();if(c){const o=Z(s).toLowerCase(),v=(s.email||"").toLowerCase();if(!o.includes(c)&&!v.includes(c))return!1}}return de?t:!t}).sort((s,t)=>{var c,o;if(!((c=s.subscription)!=null&&c.endDate)||!((o=t.subscription)!=null&&o.endDate))return 0;const a=s.subscription.endDate.toDate?s.subscription.endDate.toDate():new Date(s.subscription.endDate),n=t.subscription.endDate.toDate?t.subscription.endDate.toDate():new Date(t.subscription.endDate);return a.getTime()-n.getTime()}).map(s=>{const t=s.subscription;if(!t)return null;const a=t.startDate?t.startDate.toDate?t.startDate.toDate():new Date(t.startDate):null,n=t.endDate?t.endDate.toDate?t.endDate.toDate():new Date(t.endDate):null;let c=null,o="ØºÙŠØ± Ù…Ø­Ø¯Ø¯";const v=(t==null?void 0:t.isActive)===!1||(s==null?void 0:s.isActive)===!1;if(v)o="Ù…Ù„ØºÙŠ";else if(t.planType===h.LIFETIME)o="Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©";else if(n){const T=new Date,F=n.getTime()-T.getTime();c=Math.ceil(F/(1e3*60*60*24)),c<0?o="Ù…Ù†ØªÙ‡ÙŠ":c<=7?o="ÙŠÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹":o="Ù†Ø´Ø·"}return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-medium text-sm",children:Ue(s)})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z(s)}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[t.planType===h.LIFETIME&&e.jsx(Pe,{className:"w-4 h-4 text-yellow-500 ml-2"}),t.planType===h.YEARLY&&e.jsx(re,{className:"w-4 h-4 text-blue-500 ml-2"}),t.planType===h.QUARTERLY&&e.jsx(X,{className:"w-4 h-4 text-purple-500 ml-2"}),t.planType===h.MONTHLY&&e.jsx(Re,{className:"w-4 h-4 text-green-500 ml-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:Ct(t.planType)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a?a.toLocaleDateString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.planType===h.LIFETIME?"Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©":n?n.toLocaleDateString("ar-EG"):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${o==="Ù†Ø´Ø·"?"bg-green-100 text-green-800":o==="ÙŠÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹"?"bg-orange-100 text-orange-800":o==="Ù…Ù†ØªÙ‡ÙŠ"||o==="Ù…Ù„ØºÙŠ"?"bg-red-100 text-red-800":o==="Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:o})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v?"Ù…Ù„ØºÙŠ":t.planType===h.LIFETIME?"âˆ":c!==null?c<0?"Ù…Ù†ØªÙ‡ÙŠ":`${c} ÙŠÙˆÙ…`:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[!de&&e.jsx("button",{onClick:async()=>{try{await wt(s.id)}catch(T){console.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",T)}},className:"px-3 py-1 text-sm rounded-md bg-red-600 text-white hover:bg-red-700",children:"Ø§Ù„ØºØ§Ø¡"}),de&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:()=>{const T=t.planType||"monthly";ia(s),ca(T),We(!0)},className:"px-3 py-1 text-sm rounded-md bg-green-600 text-white hover:bg-green-700",children:"Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ·"})]})]})]},s.id)}).filter(Boolean)})]})})]})]}),g==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­ØªÙˆÙ‰ Ø®Ø·Ø· Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),P&&P.lastUpdated&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ",new Date(P.lastUpdated).toLocaleString("ar-SA"),P.updatedBy&&` Ø¨ÙˆØ§Ø³Ø·Ø©: ${P.updatedBy}`]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{Ls(!0),G({name:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©",price:"250 Ø¬Ù†ÙŠÙ‡",period:"ÙƒÙ„ 3 Ø£Ø´Ù‡Ø±",description:"Ø­Ù„ ÙˆØ³Ø· Ø¨ÙŠÙ† Ø§Ù„Ø´Ù‡Ø±ÙŠØ© ÙˆØ§Ù„Ø³Ù†ÙˆÙŠØ©",features:["Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ø§ÙØ¸ Ù…ØªØ¹Ø¯Ø¯Ø©","ØªÙ‚Ø§Ø±ÙŠØ± Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"]}),q("quarterly"),k(!0)},className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[e.jsx(At,{className:"w-4 h-4"}),"Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©"]}),e.jsxs("button",{onClick:ja,disabled:xe,className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[e.jsx(ve,{className:"w-4 h-4"}),xe?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Object.entries(Oe).map(([s,t])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[s==="monthly"&&e.jsx(Re,{className:"w-4 h-4 text-green-500"}),s==="quarterly"&&e.jsx(X,{className:"w-4 h-4 text-purple-500"}),s==="yearly"&&e.jsx(re,{className:"w-4 h-4 text-blue-500"}),s==="lifetime"&&e.jsx(Pe,{className:"w-4 h-4 text-yellow-500"}),t.name]}),e.jsx("button",{onClick:()=>{es(Ve===s?null:s),Ls(!1),q(s),G({...t,features:[...t.features||[]]}),k(!0)},className:"text-purple-600 hover:text-purple-800",children:e.jsx(ur,{className:"w-4 h-4"})})]}),Ve===s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>ze(s,"name",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx("input",{type:"text",value:t.price,onChange:a=>ze(s,"price",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("input",{type:"text",value:t.period,onChange:a=>ze(s,"period",a.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{value:t.description,onChange:a=>ze(s,"description",a.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª"}),e.jsx("button",{onClick:()=>ya(s),className:"text-sm text-purple-600 hover:text-purple-800",children:"+ Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø©"})]}),e.jsx("div",{className:"space-y-2",children:t.features.map((a,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:c=>Na(s,n,c.target.value),className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"}),e.jsx("button",{onClick:()=>wa(s,n),className:"text-red-500 hover:text-red-700",children:e.jsx(le,{className:"w-4 h-4"})})]},n))})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.price}),e.jsx("div",{className:"text-sm text-gray-600",children:t.period}),e.jsx("div",{className:"text-sm text-gray-700",children:t.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:"}),t.features.map((a,n)=>e.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3 text-green-500"}),a]},n))]})]})]},s))})]}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold",children:Bt?"Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©":`ØªØ¹Ø¯ÙŠÙ„ ${_==="monthly"?"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©":_==="yearly"?"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ©":_==="lifetime"?"Ø¨Ø§Ù‚Ø© Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©":"Ø¨Ø§Ù‚Ø© Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©"}`}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©"}),e.jsx("input",{type:"text",value:Y.name,onChange:s=>G(t=>({...t,name:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx("input",{type:"text",value:Y.price,onChange:s=>G(t=>({...t,price:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("input",{type:"text",value:Y.period,onChange:s=>G(t=>({...t,period:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("textarea",{rows:3,value:Y.description,onChange:s=>G(t=>({...t,description:s.target.value})),className:"w-full p-2 border rounded-md"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª"}),e.jsx("button",{onClick:()=>G(s=>({...s,features:[...s.features||[],""]})),className:"text-sm text-purple-600 hover:text-purple-800",children:"+ Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø©"})]}),e.jsx("div",{className:"space-y-2",children:(Y.features||[]).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:a=>{const n=a.target.value;G(c=>{const o=[...c.features||[]];return o[t]=n,{...c,features:o}})},className:"flex-1 p-2 border rounded-md text-sm"}),e.jsx("button",{onClick:()=>{G(a=>{const n=[...a.features||[]];return n.splice(t,1),{...a,features:n}})},className:"text-red-500 hover:text-red-700",children:e.jsx(le,{className:"w-4 h-4"})})]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:()=>{_&&(y(s=>({...s,[_]:{...Y}})),k(!1))},className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Ø­ÙØ¸ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©"}),e.jsx("button",{onClick:async()=>{var s;if(_)try{const t=((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin";await ar(_,Y,t),y(a=>({...a,[_]:{...Y}})),k(!1)}catch(t){console.error("Immediate save failed",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ÙÙˆØ±ÙŠ. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª.")}},className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Ø­ÙØ¸ ÙÙˆØ±ÙŠ"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙƒÙ…ÙˆØ¯Ø§Ù„ ØµØºÙŠØ± ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¹ Ø¶Ø¨Ø§Ø¨ Ø®ÙÙŠÙ."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"}),e.jsx("input",{type:"text",value:fs,onChange:s=>ct(s.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù†Ù‹Ø§ Ù‚ØµÙŠØ±Ù‹Ø§ ÙˆØ¬Ø°Ø§Ø¨Ù‹Ø§",className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"}),e.jsx("textarea",{value:js,onChange:s=>ot(s.target.value),placeholder:"Ø§ÙƒØªØ¨ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",rows:4,className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø±Ø§Ø¨Ø· Ø§Ø®ØªÙŠØ§Ø±ÙŠ"}),e.jsx("input",{type:"text",value:dt,onChange:s=>mt(s.target.value),placeholder:"Ù…Ø«Ø§Ù„: /user/dashboard Ø£Ùˆ https://example.com",className:"w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠÙ‹Ø§ Ø³ÙŠÙØªØ­ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙˆØ¥Ø°Ø§ ÙƒØ§Ù† Ø¯Ø§Ø®Ù„ÙŠÙ‹Ø§ Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹."})]}),e.jsx("div",{className:"flex items-center justify-end gap-3",children:e.jsx("button",{onClick:ga,disabled:ut,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:ut?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-slate-600"})," Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… â€” Telegram/Cloudflare Worker"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Worker Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ. Ø§Ù„ØªÙˆÙƒÙ† ÙŠØ¨Ù‚Ù‰ Ø³Ø± Ø¯Ø§Ø®Ù„ Cloudflare Secrets."})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start lg:items-end",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ø±Ø§Ø¨Ø· Cloudflare Worker"}),e.jsx("input",{type:"url",value:Xs,onChange:s=>et(s.target.value),placeholder:"https://summer-cake-5149.alkaptin2030.workers.dev",className:"w-full p-2 border border-gray-300 rounded-md"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ù…Ø³Ø§Ø± ÙŠØ¯Ø¹Ù… POST Ø¹Ù†Ø¯ "/notify" Ø£Ùˆ Ø§Ù„Ø¬Ø°Ø± Ø­Ø³Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ùƒ.'})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:async()=>{try{tt(!0);const{systemSettingsService:s}=await I(async()=>{const{systemSettingsService:a}=await import("./index-CpSuNyR6.js").then(n=>n.c7);return{systemSettingsService:a}},__vite__mapDeps([0,1]),import.meta.url),t=(Xs||"").trim();if(!t){alert("Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­");return}await s.setTelegramWorkerUrl(t),alert("ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· Cloudflare Worker Ø¨Ù†Ø¬Ø§Ø­")}catch(s){console.error("Failed to save worker url",s),alert(s!=null&&s.message?`ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·: ${s.message}`:"ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·")}finally{tt(!1)}},className:"flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-700 disabled:opacity-50",disabled:st,children:[e.jsx(ve,{className:"w-4 h-4"})," ",st?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·"]})})]})]})]})]})]}),g==="trials"&&e.jsxs("div",{className:"space-y-6",children:[console.log("ğŸ” Trials tab rendering - users data:",m),console.log("ğŸ” Users count:",(m==null?void 0:m.length)||0),console.log("ğŸ” Users on trial:",((St=m==null?void 0:m.filter(s=>s.isOnFreeTrial))==null?void 0:St.length)||0),M&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†..."})]})}),b&&!M&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Je,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"}),e.jsx("p",{className:"text-red-600 mb-4",children:b}),e.jsx("p",{className:"text-sm text-red-500",children:"ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase"})]}),!M&&!b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ¬Ø±Ø¨Ø©"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.filter(s=>s.isOnFreeTrial).length})]}),e.jsx(re,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.filter(s=>s.hasUsedFreeTrial&&!s.isOnFreeTrial).length})]}),e.jsx(ee,{className:"w-8 h-8 text-red-600"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ†"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(s=>!s.hasUsedFreeTrial&&!s.isOnFreeTrial&&!s.approved).length})]}),e.jsx(Pt,{className:"w-8 h-8 text-green-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¯Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÙŠØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ± ÙÙˆØ±ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø£ÙŠ ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯."})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„Ù…Ø¯Ø© Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª"}),e.jsx("input",{type:"number",min:1,max:336,value:pt,onChange:s=>bt(s.target.value),className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Ø§ÙƒØªØ¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ",W," ",W>=3&&W<=10?"Ø³Ø§Ø¹Ø§Øª":W===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"]})]}),e.jsx("div",{className:"flex items-center md:justify-end",children:e.jsx("button",{onClick:ka,disabled:ft,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium disabled:opacity-50",children:ft?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...":"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¯Ø©"})})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 border-b border-gray-200 mb-6",children:[e.jsxs("button",{onClick:()=>ws("eligible"),className:`pb-2 px-4 text-sm font-medium transition-colors relative whitespace-nowrap ${je==="eligible"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ù„ØªØ¬Ø±Ø¨Ø©",e.jsx("span",{className:"mr-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:m.filter(s=>!s.hasUsedFreeTrial&&!s.isOnFreeTrial&&!s.approved).length})]}),e.jsxs("button",{onClick:()=>ws("active"),className:`pb-2 px-4 text-sm font-medium transition-colors relative whitespace-nowrap ${je==="active"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù†Ø´Ø·Ø©",e.jsx("span",{className:"mr-2 bg-blue-100 text-blue-600 py-0.5 px-2 rounded-full text-xs",children:m.filter(s=>s.isOnFreeTrial).length})]}),e.jsxs("button",{onClick:()=>ws("expired"),className:`pb-2 px-4 text-sm font-medium transition-colors relative whitespace-nowrap ${je==="expired"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©",e.jsx("span",{className:"mr-2 bg-red-100 text-red-600 py-0.5 px-2 rounded-full text-xs",children:m.filter(s=>s.hasUsedFreeTrial&&!s.isOnFreeTrial).length})]})]}),je==="eligible"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù„Ù… ÙŠØ³ØªØ®Ø¯Ù…ÙˆØ§ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ù…Ù† Ù‚Ø¨Ù„"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:fe,onChange:s=>Ns(s.target.value),placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ù„ØªØ¬Ø±Ø¨Ø©",className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm"}),e.jsx(we,{className:"w-4 h-4 text-gray-400 absolute left-3 top-2.5"})]})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[m.filter(s=>!s.hasUsedFreeTrial&&!s.isOnFreeTrial&&!s.approved).filter(s=>{const t=fe.trim().toLowerCase();if(!t)return!0;const a=Z(s).toLowerCase(),n=(s.email||"").toLowerCase();return a.includes(t)||n.includes(t)}).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:Ue(s)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:Z(s)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-xs text-gray-400",children:["ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ",vs(s.createdAt)]})]})]}),e.jsx("div",{className:"flex items-center space-x-3 space-x-reverse",children:e.jsx("button",{onClick:()=>vt(s.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:`ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© ${W} ${W>=3&&W<=10?"Ø³Ø§Ø¹Ø§Øª":W===2?"Ø³Ø§Ø¹ØªÙŠÙ†":"Ø³Ø§Ø¹Ø©"}`})})]},s.id)),m.filter(s=>!s.hasUsedFreeTrial&&!s.isOnFreeTrial&&!s.approved).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(re,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¤Ù‡Ù„ÙŠÙ† Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]})})]}),je==="active"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:fe,onChange:s=>Ns(s.target.value),placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©",className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm"}),e.jsx(we,{className:"w-4 h-4 text-gray-400 absolute left-3 top-2.5"})]})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[m.filter(s=>s.isOnFreeTrial).filter(s=>{const t=fe.trim().toLowerCase();if(!t)return!0;const a=Z(s).toLowerCase(),n=(s.email||"").toLowerCase();return a.includes(t)||n.includes(t)}).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:Ue(s)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:Z(s)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("p",{className:"text-xs text-blue-600",children:["ØªÙ†ØªÙ‡ÙŠ ÙÙŠ: ",s.freeTrialEndDate?vs(s.freeTrialEndDate):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"Ù†Ø´Ø·"}),e.jsx("button",{onClick:()=>Aa(s.id),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-xs",children:"Ø¶Ø¨Ø· Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¬Ø±Ø¨Ø©"}),e.jsx("button",{onClick:()=>Ea(s.id),className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-xs",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¬Ø±Ø¨Ø©"})]})]},s.id)),m.filter(s=>s.isOnFreeTrial).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(re,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø§Ø±Ø¨ Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]})})]}),je==="expired"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ù†ØªÙ‡ÙŠÙ† Ù…Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ø§Ù†ØªÙ‡Øª ØªØ¬Ø±Ø¨ØªÙ‡Ù… Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:fe,onChange:s=>Ns(s.target.value),placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©",className:"w-full px-4 py-2 pl-10 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm"}),e.jsx(we,{className:"w-4 h-4 text-gray-400 absolute left-3 top-2.5"})]})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[m.filter(s=>s.hasUsedFreeTrial&&!s.isOnFreeTrial).filter(s=>{const t=fe.trim().toLowerCase();if(!t)return!0;const a=Z(s).toLowerCase(),n=(s.email||"").toLowerCase();return a.includes(t)||n.includes(t)}).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 font-semibold",children:Ue(s)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:Z(s)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsx("p",{className:"text-xs text-red-500",children:"Ø§Ù†ØªÙ‡Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø©"})]})]}),e.jsx("div",{className:"flex items-center space-x-3 space-x-reverse",children:e.jsx("button",{onClick:()=>vt(s.id),className:"px-3 py-1 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-xs",children:"ØªÙØ¹ÙŠÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"})})]},s.id)),m.filter(s=>s.hasUsedFreeTrial&&!s.isOnFreeTrial).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø§Ø±Ø¨ Ù…Ù†ØªÙ‡ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹"})]})]})})]})]})]}),g==="whatsapp"&&e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ze,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"})]}),e.jsx(Or,{})]}),g==="analytics"&&e.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-sm border border-gray-200 text-center",children:[e.jsx(Tt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª"}),e.jsx("p",{className:"text-gray-500",children:"Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹"})]})]})]}),na&&gs&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-2xl transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Ae,{className:"w-5 h-5 text-green-600"})}),e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:"ØªØ£ÙƒÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ·"})]}),e.jsx("button",{onClick:()=>We(!1),className:"text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100 p-1",children:e.jsx(le,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("p",{className:"text-gray-600 text-lg leading-relaxed",children:["Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ· Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ",e.jsx("span",{className:"font-bold text-gray-900 mx-1",children:Z(gs)}),"ØŸ"]}),e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©:"}),e.jsx("span",{className:"font-semibold text-purple-600 bg-purple-50 px-3 py-1 rounded-full text-sm",children:Ct(it)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:"}),e.jsx("span",{className:"font-semibold text-green-600 bg-green-50 px-3 py-1 rounded-full text-sm",children:"Ù†Ø´Ø·"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 bg-gray-50 rounded-b-xl border-t border-gray-100",children:[e.jsx("button",{onClick:()=>We(!1),className:"px-5 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-700 font-medium hover:bg-gray-50 focus:ring-2 focus:ring-gray-200 transition-all",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø£Ù…Ø±"}),e.jsxs("button",{onClick:async()=>{var s;try{const t=((s=l==null?void 0:l.currentUser)==null?void 0:s.uid)||"admin";await Et(gs.id,it,t),alert("ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ· Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù†Ø¬Ø§Ø­"),hs(!1),We(!1)}catch(t){console.error("ÙØ´Ù„ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ· Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ· Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ")}},className:"px-5 py-2.5 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 shadow-lg shadow-green-600/20 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙ†Ø´ÙŠØ·"]})]})]})}),e.jsx(tl,{isOpen:oa,onClose:()=>ps(!1),user:da,onActivate:async(s,t)=>{try{await Nt(s,t),alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù†Ø¬Ø§Ø­"),ps(!1)}catch(a){console.error("ÙØ´Ù„ ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:",a),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ")}}}),e.jsx(Zr,{isOpen:Yt,onClose:()=>j(!1)}),e.jsx(Jr,{notification:Wt,onClose:Sa,soundEnabled:Ht.soundAlerts,onToggleSound:va})]})},cn=()=>{const i=Xa(),{user:l,loading:u}=er(),[x,b]=r.useState(!1),[f,d]=r.useState(null),E=()=>{try{const y=localStorage.getItem("admin_users_cache");return y?JSON.parse(y):[]}catch{return[]}},g=()=>{try{const y=localStorage.getItem("admin_profiles_cache");return y?JSON.parse(y):{}}catch{return{}}},N=(y,D)=>y.map(k=>{const _=D[k.id]||{},q=typeof _.fullName=="string"?_.fullName:void 0,Y=typeof _.phone=="string"?_.phone:void 0,G=typeof k.displayName=="string"&&k.displayName.trim()?k.displayName:q||k.displayName||void 0;return{...k,displayName:G,phone:k.phone??Y??null}}),[j,C]=r.useState(()=>E().length===0),[U,L]=r.useState("users"),[p,m]=r.useState(0),[R,M]=r.useState(E),[w,ie]=r.useState(g),[xe,A]=r.useState(()=>N(E(),g())),[P,Q]=r.useState(()=>N(E(),g())),[Me,H]=r.useState(!1),[Ce,te]=r.useState(null);r.useEffect(()=>{const y=localStorage.getItem("admin_dev_mode")==="true";b(y)},[]),r.useEffect(()=>{l&&!x&&Is().then(y=>{y.updated>0&&console.log(`ØªÙ… ØªØ­Ø¯ÙŠØ« ${y.updated} Ø§Ø´ØªØ±Ø§Ùƒ/ØªØ¬Ø±Ø¨Ø© Ù…Ù†ØªÙ‡ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹`)}).catch(console.error)},[l,x]),r.useEffect(()=>{if(!x&&!l)return;R.length===0&&C(!0),d(null);const y=ne(ae(B,"users")),D=Ds(y,k=>{const _=k.docs.map(q=>({id:q.id,...q.data()}));M(_),localStorage.setItem("admin_users_cache",JSON.stringify(_)),C(!1),d(null)},k=>{console.error("Error loading users:",k),x?(C(!1),d(null)):(R.length===0&&d("ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"),C(!1))});return()=>D()},[l,x]),r.useEffect(()=>{if(!x&&!l)return;const y=ne(ae(B,"profiles")),D=Ds(y,k=>{const _={};k.forEach(q=>{_[q.id]=q.data()}),ie(_),localStorage.setItem("admin_profiles_cache",JSON.stringify(_))},k=>{console.error("Error loading profiles:",k)});return()=>D()},[l,x]),r.useEffect(()=>{const y=R.map(D=>{const k=w[D.id]||{},_=typeof k.fullName=="string"?k.fullName:void 0,q=typeof k.phone=="string"?k.phone:void 0,Y=typeof D.displayName=="string"&&D.displayName.trim()?D.displayName:_||D.displayName||void 0;return{...D,displayName:Y,phone:D.phone??q??null}});A(y)},[R,w]);const ue=y=>{console.log("Notification center:",y)},$=y=>{console.log("Notification settings:",y)},he=y=>{console.log("Notifications:",y)},Ve=y=>{console.log("Editing plan:",y)};r.useEffect(()=>{l&&(async()=>{try{const y=await _t();te(y)}catch(y){console.warn("Failed to load last update info:",y),te(null)}})()},[l]);const es=async()=>{try{return await lr()}catch(y){return console.error("Error loading content:",y),{}}},Oe=async y=>{try{H(!0),await rr(y,(l==null?void 0:l.uid)||"admin");const D=await _t();return te(D),!0}catch(D){return console.error("Error saving content:",D),!1}finally{H(!1)}};return u?e.jsx(sr,{}):e.jsx(rl,{navigate:i,auth:tr,devMode:x,setDevMode:b,error:f,setError:d,authLoading:u,setAuthLoading:()=>{},activeTab:U,setActiveTab:L,setNotificationCenterOpen:ue,setNotificationSettings:$,setNotifications:he,notificationCount:p,setNotificationCount:m,users:xe,setUsers:A,loading:j,setLoading:C,setEditingPlan:Ve,isSavingContent:Me,setIsSavingContent:H,lastUpdateInfo:Ce,loadContentFromFirebase:es,saveContentToFirebase:Oe})};export{cn as default};
//# sourceMappingURL=ProtectedAdminDashboard-Yiv8YLzI.js.map
