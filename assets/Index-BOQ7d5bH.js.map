{"version":3,"file":"Index-BOQ7d5bH.js","sources":["../../src/pages/Index.tsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useFirebaseAuth } from \"@/contexts/FirebaseAuthContext\";\n\nconst Index = () => {\n  const { user, profile, loading } = useFirebaseAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    console.log('Index: useEffect triggered', { loading, user: user?.uid, profile: profile?.role });\n    \n    if (!loading) {\n      if (!user) {\n        console.log('Index: No user, navigating to landing');\n        navigate(\"/landing\");\n      } else if (profile) {\n        console.log('Index: Profile found, navigating based on role:', profile.role);\n        \n        // التحقق من حالة الموافقة للمستخدمين العاديين\n        if (profile.role === \"user\") {\n          navigate(\"/user/dashboard\");\n          return;\n        }\n        \n        if (profile.role === \"merchant\") {\n          navigate(\"/merchant\");\n        } else {\n          navigate(\"/landing\");\n          console.log('User role not supported:', profile.role);\n        }\n      } else {\n        console.log('Index: User exists but no profile yet, waiting...');\n      }\n    }\n  }, [user, profile, loading, navigate]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <div className=\"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">جاري التحميل...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background\">\n      <div className=\"text-center\">\n        <div className=\"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4\"></div>\n        <p className=\"text-muted-foreground\">جاري إعداد الحساب...</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Index;\n"],"names":["Index","user","profile","loading","useFirebaseAuth","navigate","useNavigate","useEffect","jsxs","jsx"],"mappings":"6DAIA,MAAMA,EAAQ,IAAM,CAClB,KAAM,CAAE,KAAAC,EAAM,QAAAC,EAAS,QAAAC,CAAA,EAAYC,EAAA,EAC7BC,EAAWC,EAAA,EA8BjB,OA5BAC,EAAAA,UAAU,IAAM,CAGd,GAFA,QAAQ,IAAI,6BAA8B,CAAE,QAAAJ,EAAS,KAAMF,GAAA,YAAAA,EAAM,IAAK,QAASC,GAAA,YAAAA,EAAS,IAAA,CAAM,EAE1F,CAACC,EACH,GAAI,CAACF,EACH,QAAQ,IAAI,uCAAuC,EACnDI,EAAS,UAAU,UACVH,EAAS,CAIlB,GAHA,QAAQ,IAAI,kDAAmDA,EAAQ,IAAI,EAGvEA,EAAQ,OAAS,OAAQ,CAC3BG,EAAS,iBAAiB,EAC1B,MACF,CAEIH,EAAQ,OAAS,WACnBG,EAAS,WAAW,GAEpBA,EAAS,UAAU,EACnB,QAAQ,IAAI,2BAA4BH,EAAQ,IAAI,EAExD,MACE,QAAQ,IAAI,mDAAmD,CAGrE,EAAG,CAACD,EAAMC,EAASC,EAASE,CAAQ,CAAC,EAEjCF,QAEC,MAAA,CAAI,UAAU,8DACb,SAAAK,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6FAAA,CAA8F,EAC7GA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,CAAA,CACtD,CAAA,CACF,QAKD,MAAA,CAAI,UAAU,8DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,6FAAA,CAA8F,EAC7GA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAC3D,CAAA,CACF,CAEJ"}