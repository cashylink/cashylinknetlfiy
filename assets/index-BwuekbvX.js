const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-C4tRiJKf.js","./BrandLogo-DqN4Lxht.js","./smartphone-CGYvqYsE.js","./whatsappService-BZaqqZoF.js","./arrow-left-DivMceD5.js","./star-LQ-Hza1a.js","./crown-BIg8QPCv.js","./download-x4vtGEVa.js","./zap-Cz0JcJoQ.js","./circle-check-big-DNepi39w.js","./SubscriptionsPage-CCtg4T2Y.js","./contentService-Bc8CL-rC.js","./AuthPage-BAkcCHDZ.js","./TopUpPage-B2HpabT6.js","./select-BIyv3xLr.js","./AdminTopupsPage-CEKkNrAY.js","./AdminNotificationsPage-ClXcdEQc.js","./textarea-BzKY_bXc.js","./bell-DZ4uDfdO.js","./link-DMsvqf35.js","./UserRegisterPage-D6OsS0GE.js","./alert-6nFwCAoZ.js","./wallet-CAgFzrHe.js","./user-plus-ojwRWv79.js","./phone-_tSrlihK.js","./UserAccountSetupPage-EIQjSdiR.js","./ProtectedDashboard-DsHp05G-.js","./MasterPinDialog-DEq9IC9r.js","./circle-alert-BtdHnsi4.js","./profitService-BQtHSEJV.js","./dollar-sign-CiJ9TSKF.js","./ProtectedUserDashboard-CAuXbLOR.js","./broadcastService-Cj_znoms.js","./MerchantDashboard-uRJbyGRI.js","./dropdown-menu-DYS7z04i.js","./index-y0rFiiSx.js","./badge-DrEBT0VN.js","./WalletsManagement-DFkSq5vY.js","./progress-VPnhN6GK.js","./square-pen-CkBtvZ6S.js","./PendingApprovalPage-BS66WwVe.js","./freeTrialService-BgjrOWMH.js","./ProtectedAdminDashboard-DY7Gcwhs.js","./ProfileIcon-eHxFbD24.js","./switch-usASIx17.js","./separator-rcpIVb2w.js","./refresh-cw-Cmpmouf1.js","./save-N6zu0Vz-.js","./users-Cqe3CIWg.js","./circle-x-Dy0RiGTM.js","./ProfileSettingsPage-C5Zbs_B5.js","./walletSelectionPinService-B78ayfz2.js","./TransactionsPage-oyRuoFSp.js","./MaintenanceDialog-BXbfuQnN.js","./WalletAdditionPage-8luaX2ua.js","./ReferralsPage-CH-ICjhh.js","./UserDashboardPage-K7g7RnIK.js"])))=>i.map(i=>d[i]);
var pV=Object.defineProperty;var HT=t=>{throw TypeError(t)};var gV=(t,e,n)=>e in t?pV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var hd=(t,e,n)=>gV(t,typeof e!="symbol"?e+"":e,n),Uy=(t,e,n)=>e.has(t)||HT("Cannot "+n);var G=(t,e,n)=>(Uy(t,e,"read from private field"),n?n.call(t):e.get(t)),gt=(t,e,n)=>e.has(t)?HT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>(Uy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ur=(t,e,n)=>(Uy(t,e,"access private method"),n);var Ff=(t,e,n,r)=>({set _(s){qe(t,e,s,n)},get _(){return G(t,e,r)}});function yV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _P(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wP={exports:{}},_g={},EP={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef=Symbol.for("react.element"),vV=Symbol.for("react.portal"),_V=Symbol.for("react.fragment"),wV=Symbol.for("react.strict_mode"),EV=Symbol.for("react.profiler"),IV=Symbol.for("react.provider"),TV=Symbol.for("react.context"),SV=Symbol.for("react.forward_ref"),bV=Symbol.for("react.suspense"),AV=Symbol.for("react.memo"),xV=Symbol.for("react.lazy"),KT=Symbol.iterator;function RV(t){return t===null||typeof t!="object"?null:(t=KT&&t[KT]||t["@@iterator"],typeof t=="function"?t:null)}var IP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TP=Object.assign,SP={};function Mu(t,e,n){this.props=t,this.context=e,this.refs=SP,this.updater=n||IP}Mu.prototype.isReactComponent={};Mu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bP(){}bP.prototype=Mu.prototype;function l0(t,e,n){this.props=t,this.context=e,this.refs=SP,this.updater=n||IP}var c0=l0.prototype=new bP;c0.constructor=l0;TP(c0,Mu.prototype);c0.isPureReactComponent=!0;var GT=Array.isArray,AP=Object.prototype.hasOwnProperty,u0={current:null},xP={key:!0,ref:!0,__self:!0,__source:!0};function RP(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)AP.call(e,r)&&!xP.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ef,type:t,key:i,ref:o,props:s,_owner:u0.current}}function PV(t,e){return{$$typeof:ef,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function d0(t){return typeof t=="object"&&t!==null&&t.$$typeof===ef}function CV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var QT=/\/+/g;function jy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CV(""+t.key):e.toString(36)}function Am(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ef:case vV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jy(o,0):r,GT(s)?(n="",t!=null&&(n=t.replace(QT,"$&/")+"/"),Am(s,e,n,"",function(c){return c})):s!=null&&(d0(s)&&(s=PV(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(QT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",GT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+jy(i,a);o+=Am(i,e,n,l,s)}else if(l=RV(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+jy(i,a++),o+=Am(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Uf(t,e,n){if(t==null)return t;var r=[],s=0;return Am(t,r,"","",function(i){return e.call(n,i,s++)}),r}function kV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xr={current:null},xm={transition:null},NV={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:xm,ReactCurrentOwner:u0};function PP(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:Uf,forEach:function(t,e,n){Uf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uf(t,function(){e++}),e},toArray:function(t){return Uf(t,function(e){return e})||[]},only:function(t){if(!d0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=Mu;lt.Fragment=_V;lt.Profiler=EV;lt.PureComponent=l0;lt.StrictMode=wV;lt.Suspense=bV;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NV;lt.act=PP;lt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=TP({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=u0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)AP.call(e,l)&&!xP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ef,type:t.type,key:s,ref:i,props:r,_owner:o}};lt.createContext=function(t){return t={$$typeof:TV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IV,_context:t},t.Consumer=t};lt.createElement=RP;lt.createFactory=function(t){var e=RP.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:SV,render:t}};lt.isValidElement=d0;lt.lazy=function(t){return{$$typeof:xV,_payload:{_status:-1,_result:t},_init:kV}};lt.memo=function(t,e){return{$$typeof:AV,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=xm.transition;xm.transition={};try{t()}finally{xm.transition=e}};lt.unstable_act=PP;lt.useCallback=function(t,e){return xr.current.useCallback(t,e)};lt.useContext=function(t){return xr.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return xr.current.useDeferredValue(t)};lt.useEffect=function(t,e){return xr.current.useEffect(t,e)};lt.useId=function(){return xr.current.useId()};lt.useImperativeHandle=function(t,e,n){return xr.current.useImperativeHandle(t,e,n)};lt.useInsertionEffect=function(t,e){return xr.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return xr.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return xr.current.useMemo(t,e)};lt.useReducer=function(t,e,n){return xr.current.useReducer(t,e,n)};lt.useRef=function(t){return xr.current.useRef(t)};lt.useState=function(t){return xr.current.useState(t)};lt.useSyncExternalStore=function(t,e,n){return xr.current.useSyncExternalStore(t,e,n)};lt.useTransition=function(){return xr.current.useTransition()};lt.version="18.3.1";EP.exports=lt;var S=EP.exports;const F=_P(S),h0=yV({__proto__:null,default:F},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DV=S,OV=Symbol.for("react.element"),LV=Symbol.for("react.fragment"),MV=Object.prototype.hasOwnProperty,VV=DV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FV={key:!0,ref:!0,__self:!0,__source:!0};function CP(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)MV.call(e,r)&&!FV.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:OV,type:t,key:i,ref:o,props:s,_owner:VV.current}}_g.Fragment=LV;_g.jsx=CP;_g.jsxs=CP;wP.exports=_g;var y=wP.exports,kP={exports:{}},as={},NP={exports:{}},DP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,W){var Z=$.length;$.push(W);e:for(;0<Z;){var we=Z-1>>>1,Ee=$[we];if(0<s(Ee,W))$[we]=W,$[Z]=Ee,Z=we;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var W=$[0],Z=$.pop();if(Z!==W){$[0]=Z;e:for(var we=0,Ee=$.length,se=Ee>>>1;we<se;){var _e=2*(we+1)-1,j=$[_e],Qe=_e+1,Fe=$[Qe];if(0>s(j,Z))Qe<Ee&&0>s(Fe,j)?($[we]=Fe,$[Qe]=Z,we=Qe):($[we]=j,$[_e]=Z,we=_e);else if(Qe<Ee&&0>s(Fe,Z))$[we]=Fe,$[Qe]=Z,we=Qe;else break e}}return W}function s($,W){var Z=$.sortIndex-W.sortIndex;return Z!==0?Z:$.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,E=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=$)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function x($){if(p=!1,I($),!E)if(n(l)!==null)E=!0,de(P);else{var W=n(c);W!==null&&Se(x,W.startTime-$)}}function P($,W){E=!1,p&&(p=!1,w(T),T=-1),m=!0;var Z=f;try{for(I(W),h=n(l);h!==null&&(!(h.expirationTime>W)||$&&!D());){var we=h.callback;if(typeof we=="function"){h.callback=null,f=h.priorityLevel;var Ee=we(h.expirationTime<=W);W=t.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===n(l)&&r(l),I(W)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var _e=n(c);_e!==null&&Se(x,_e.startTime-W),se=!1}return se}finally{h=null,f=Z,m=!1}}var L=!1,A=null,T=-1,R=5,C=-1;function D(){return!(t.unstable_now()-C<R)}function O(){if(A!==null){var $=t.unstable_now();C=$;var W=!0;try{W=A(!0,$)}finally{W?k():(L=!1,A=null)}}else L=!1}var k;if(typeof _=="function")k=function(){_(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ce=B.port2;B.port1.onmessage=O,k=function(){ce.postMessage(null)}}else k=function(){v(O,0)};function de($){A=$,L||(L=!0,k())}function Se($,W){T=v(function(){$(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,de(P))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Z=f;f=W;try{return $()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,W){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=f;f=$;try{return W()}finally{f=Z}},t.unstable_scheduleCallback=function($,W,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Z+Ee,$={id:d++,callback:W,priorityLevel:$,startTime:Z,expirationTime:Ee,sortIndex:-1},Z>we?($.sortIndex=Z,e(c,$),n(l)===null&&$===n(c)&&(p?(w(T),T=-1):p=!0,Se(x,Z-we))):($.sortIndex=Ee,e(l,$),E||m||(E=!0,de(P))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var W=f;return function(){var Z=f;f=W;try{return $.apply(this,arguments)}finally{f=Z}}}})(DP);NP.exports=DP;var UV=NP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jV=S,ss=UV;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OP=new Set,dh={};function Ol(t,e){tu(t,e),tu(t+"Capture",e)}function tu(t,e){for(dh[t]=e,t=0;t<e.length;t++)OP.add(e[t])}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n_=Object.prototype.hasOwnProperty,$V=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YT={},JT={};function BV(t){return n_.call(JT,t)?!0:n_.call(YT,t)?!1:$V.test(t)?JT[t]=!0:(YT[t]=!0,!1)}function zV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WV(t,e,n,r){if(e===null||typeof e>"u"||zV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ar[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ar[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ar[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ar[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ar[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ar[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ar[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ar[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ar[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var f0=/[\-:]([a-z])/g;function m0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(f0,m0);ar[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(f0,m0);ar[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(f0,m0);ar[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ar[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});ar.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ar[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function p0(t,e,n,r){var s=ar.hasOwnProperty(e)?ar[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WV(e,n,s,r)&&(n=null),r||s===null?BV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yi=jV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jf=Symbol.for("react.element"),dc=Symbol.for("react.portal"),hc=Symbol.for("react.fragment"),g0=Symbol.for("react.strict_mode"),r_=Symbol.for("react.profiler"),LP=Symbol.for("react.provider"),MP=Symbol.for("react.context"),y0=Symbol.for("react.forward_ref"),s_=Symbol.for("react.suspense"),i_=Symbol.for("react.suspense_list"),v0=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),VP=Symbol.for("react.offscreen"),XT=Symbol.iterator;function fd(t){return t===null||typeof t!="object"?null:(t=XT&&t[XT]||t["@@iterator"],typeof t=="function"?t:null)}var ln=Object.assign,$y;function Pd(t){if($y===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$y=e&&e[1]||""}return`
`+$y+t}var By=!1;function zy(t,e){if(!t||By)return"";By=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{By=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pd(t):""}function qV(t){switch(t.tag){case 5:return Pd(t.type);case 16:return Pd("Lazy");case 13:return Pd("Suspense");case 19:return Pd("SuspenseList");case 0:case 2:case 15:return t=zy(t.type,!1),t;case 11:return t=zy(t.type.render,!1),t;case 1:return t=zy(t.type,!0),t;default:return""}}function o_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hc:return"Fragment";case dc:return"Portal";case r_:return"Profiler";case g0:return"StrictMode";case s_:return"Suspense";case i_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case MP:return(t.displayName||"Context")+".Consumer";case LP:return(t._context.displayName||"Context")+".Provider";case y0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case v0:return e=t.displayName||null,e!==null?e:o_(t.type)||"Memo";case _o:e=t._payload,t=t._init;try{return o_(t(e))}catch{}}return null}function HV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return o_(e);case 8:return e===g0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KV(t){var e=FP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $f(t){t._valueTracker||(t._valueTracker=KV(t))}function UP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function op(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function a_(t,e){var n=e.checked;return ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ZT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jP(t,e){e=e.checked,e!=null&&p0(t,"checked",e,!1)}function l_(t,e){jP(t,e);var n=sa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?c_(t,e.type,n):e.hasOwnProperty("defaultValue")&&c_(t,e.type,sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function c_(t,e,n){(e!=="number"||op(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cd=Array.isArray;function Cc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sa(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function u_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return ln({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Cd(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sa(n)}}function $P(t,e){var n=sa(e.value),r=sa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function d_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bf,zP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bf=Bf||document.createElement("div"),Bf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GV=["Webkit","ms","Moz","O"];Object.keys($d).forEach(function(t){GV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$d[e]=$d[t]})});function WP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$d.hasOwnProperty(t)&&$d[t]?(""+e).trim():e+"px"}function qP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=WP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var QV=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function h_(t,e){if(e){if(QV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function f_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m_=null;function _0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var p_=null,kc=null,Nc=null;function rS(t){if(t=rf(t)){if(typeof p_!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Sg(e),p_(t.stateNode,t.type,e))}}function HP(t){kc?Nc?Nc.push(t):Nc=[t]:kc=t}function KP(){if(kc){var t=kc,e=Nc;if(Nc=kc=null,rS(t),e)for(t=0;t<e.length;t++)rS(e[t])}}function GP(t,e){return t(e)}function QP(){}var Wy=!1;function YP(t,e,n){if(Wy)return t(e,n);Wy=!0;try{return GP(t,e,n)}finally{Wy=!1,(kc!==null||Nc!==null)&&(QP(),KP())}}function fh(t,e){var n=t.stateNode;if(n===null)return null;var r=Sg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var g_=!1;if(Ui)try{var md={};Object.defineProperty(md,"passive",{get:function(){g_=!0}}),window.addEventListener("test",md,md),window.removeEventListener("test",md,md)}catch{g_=!1}function YV(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Bd=!1,ap=null,lp=!1,y_=null,JV={onError:function(t){Bd=!0,ap=t}};function XV(t,e,n,r,s,i,o,a,l){Bd=!1,ap=null,YV.apply(JV,arguments)}function ZV(t,e,n,r,s,i,o,a,l){if(XV.apply(this,arguments),Bd){if(Bd){var c=ap;Bd=!1,ap=null}else throw Error(le(198));lp||(lp=!0,y_=c)}}function Ll(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function JP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sS(t){if(Ll(t)!==t)throw Error(le(188))}function eF(t){var e=t.alternate;if(!e){if(e=Ll(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sS(s),t;if(i===r)return sS(s),e;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function XP(t){return t=eF(t),t!==null?ZP(t):null}function ZP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ZP(t);if(e!==null)return e;t=t.sibling}return null}var e1=ss.unstable_scheduleCallback,iS=ss.unstable_cancelCallback,tF=ss.unstable_shouldYield,nF=ss.unstable_requestPaint,yn=ss.unstable_now,rF=ss.unstable_getCurrentPriorityLevel,w0=ss.unstable_ImmediatePriority,t1=ss.unstable_UserBlockingPriority,cp=ss.unstable_NormalPriority,sF=ss.unstable_LowPriority,n1=ss.unstable_IdlePriority,wg=null,ai=null;function iF(t){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(wg,t,void 0,(t.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:lF,oF=Math.log,aF=Math.LN2;function lF(t){return t>>>=0,t===0?32:31-(oF(t)/aF|0)|0}var zf=64,Wf=4194304;function kd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function up(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=kd(a):(i&=o,i!==0&&(r=kd(i)))}else o=n&~s,o!==0?r=kd(o):i!==0&&(r=kd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cs(e),s=1<<n,r|=t[n],e&=~s;return r}function cF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=cF(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function v_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function r1(){var t=zf;return zf<<=1,!(zf&4194240)&&(zf=64),t}function qy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cs(e),t[e]=n}function dF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function E0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xt=0;function s1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var i1,I0,o1,a1,l1,__=!1,qf=[],zo=null,Wo=null,qo=null,mh=new Map,ph=new Map,Io=[],hF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oS(t,e){switch(t){case"focusin":case"focusout":zo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":qo=null;break;case"pointerover":case"pointerout":mh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(e.pointerId)}}function pd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=rf(e),e!==null&&I0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fF(t,e,n,r,s){switch(e){case"focusin":return zo=pd(zo,t,e,n,r,s),!0;case"dragenter":return Wo=pd(Wo,t,e,n,r,s),!0;case"mouseover":return qo=pd(qo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return mh.set(i,pd(mh.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ph.set(i,pd(ph.get(i)||null,t,e,n,r,s)),!0}return!1}function c1(t){var e=Ya(t.target);if(e!==null){var n=Ll(e);if(n!==null){if(e=n.tag,e===13){if(e=JP(n),e!==null){t.blockedOn=e,l1(t.priority,function(){o1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=w_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);m_=r,n.target.dispatchEvent(r),m_=null}else return e=rf(n),e!==null&&I0(e),t.blockedOn=n,!1;e.shift()}return!0}function aS(t,e,n){Rm(t)&&n.delete(e)}function mF(){__=!1,zo!==null&&Rm(zo)&&(zo=null),Wo!==null&&Rm(Wo)&&(Wo=null),qo!==null&&Rm(qo)&&(qo=null),mh.forEach(aS),ph.forEach(aS)}function gd(t,e){t.blockedOn===e&&(t.blockedOn=null,__||(__=!0,ss.unstable_scheduleCallback(ss.unstable_NormalPriority,mF)))}function gh(t){function e(s){return gd(s,t)}if(0<qf.length){gd(qf[0],t);for(var n=1;n<qf.length;n++){var r=qf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zo!==null&&gd(zo,t),Wo!==null&&gd(Wo,t),qo!==null&&gd(qo,t),mh.forEach(e),ph.forEach(e),n=0;n<Io.length;n++)r=Io[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Io.length&&(n=Io[0],n.blockedOn===null);)c1(n),n.blockedOn===null&&Io.shift()}var Dc=Yi.ReactCurrentBatchConfig,dp=!0;function pF(t,e,n,r){var s=xt,i=Dc.transition;Dc.transition=null;try{xt=1,T0(t,e,n,r)}finally{xt=s,Dc.transition=i}}function gF(t,e,n,r){var s=xt,i=Dc.transition;Dc.transition=null;try{xt=4,T0(t,e,n,r)}finally{xt=s,Dc.transition=i}}function T0(t,e,n,r){if(dp){var s=w_(t,e,n,r);if(s===null)tv(t,e,r,hp,n),oS(t,r);else if(fF(s,t,e,n,r))r.stopPropagation();else if(oS(t,r),e&4&&-1<hF.indexOf(t)){for(;s!==null;){var i=rf(s);if(i!==null&&i1(i),i=w_(t,e,n,r),i===null&&tv(t,e,r,hp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else tv(t,e,r,null,n)}}var hp=null;function w_(t,e,n,r){if(hp=null,t=_0(r),t=Ya(t),t!==null)if(e=Ll(t),e===null)t=null;else if(n=e.tag,n===13){if(t=JP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hp=t,null}function u1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rF()){case w0:return 1;case t1:return 4;case cp:case sF:return 16;case n1:return 536870912;default:return 16}default:return 16}}var Mo=null,S0=null,Pm=null;function d1(){if(Pm)return Pm;var t,e=S0,n=e.length,r,s="value"in Mo?Mo.value:Mo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pm=s.slice(t,1<r?1-r:void 0)}function Cm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hf(){return!0}function lS(){return!1}function ls(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hf:lS,this.isPropagationStopped=lS,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hf)},persist:function(){},isPersistent:Hf}),e}var Vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b0=ls(Vu),nf=ln({},Vu,{view:0,detail:0}),yF=ls(nf),Hy,Ky,yd,Eg=ln({},nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yd&&(yd&&t.type==="mousemove"?(Hy=t.screenX-yd.screenX,Ky=t.screenY-yd.screenY):Ky=Hy=0,yd=t),Hy)},movementY:function(t){return"movementY"in t?t.movementY:Ky}}),cS=ls(Eg),vF=ln({},Eg,{dataTransfer:0}),_F=ls(vF),wF=ln({},nf,{relatedTarget:0}),Gy=ls(wF),EF=ln({},Vu,{animationName:0,elapsedTime:0,pseudoElement:0}),IF=ls(EF),TF=ln({},Vu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SF=ls(TF),bF=ln({},Vu,{data:0}),uS=ls(bF),AF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RF[t])?!!e[t]:!1}function A0(){return PF}var CF=ln({},nf,{key:function(t){if(t.key){var e=AF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A0,charCode:function(t){return t.type==="keypress"?Cm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kF=ls(CF),NF=ln({},Eg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dS=ls(NF),DF=ln({},nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A0}),OF=ls(DF),LF=ln({},Vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),MF=ls(LF),VF=ln({},Eg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FF=ls(VF),UF=[9,13,27,32],x0=Ui&&"CompositionEvent"in window,zd=null;Ui&&"documentMode"in document&&(zd=document.documentMode);var jF=Ui&&"TextEvent"in window&&!zd,h1=Ui&&(!x0||zd&&8<zd&&11>=zd),hS=" ",fS=!1;function f1(t,e){switch(t){case"keyup":return UF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fc=!1;function $F(t,e){switch(t){case"compositionend":return m1(e);case"keypress":return e.which!==32?null:(fS=!0,hS);case"textInput":return t=e.data,t===hS&&fS?null:t;default:return null}}function BF(t,e){if(fc)return t==="compositionend"||!x0&&f1(t,e)?(t=d1(),Pm=S0=Mo=null,fc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return h1&&e.locale!=="ko"?null:e.data;default:return null}}var zF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zF[t.type]:e==="textarea"}function p1(t,e,n,r){HP(r),e=fp(e,"onChange"),0<e.length&&(n=new b0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wd=null,yh=null;function WF(t){A1(t,0)}function Ig(t){var e=gc(t);if(UP(e))return t}function qF(t,e){if(t==="change")return e}var g1=!1;if(Ui){var Qy;if(Ui){var Yy="oninput"in document;if(!Yy){var pS=document.createElement("div");pS.setAttribute("oninput","return;"),Yy=typeof pS.oninput=="function"}Qy=Yy}else Qy=!1;g1=Qy&&(!document.documentMode||9<document.documentMode)}function gS(){Wd&&(Wd.detachEvent("onpropertychange",y1),yh=Wd=null)}function y1(t){if(t.propertyName==="value"&&Ig(yh)){var e=[];p1(e,yh,t,_0(t)),YP(WF,e)}}function HF(t,e,n){t==="focusin"?(gS(),Wd=e,yh=n,Wd.attachEvent("onpropertychange",y1)):t==="focusout"&&gS()}function KF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ig(yh)}function GF(t,e){if(t==="click")return Ig(e)}function QF(t,e){if(t==="input"||t==="change")return Ig(e)}function YF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Os=typeof Object.is=="function"?Object.is:YF;function vh(t,e){if(Os(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!n_.call(e,s)||!Os(t[s],e[s]))return!1}return!0}function yS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vS(t,e){var n=yS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yS(n)}}function v1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _1(){for(var t=window,e=op();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=op(t.document)}return e}function R0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JF(t){var e=_1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v1(n.ownerDocument.documentElement,n)){if(r!==null&&R0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vS(n,i);var o=vS(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XF=Ui&&"documentMode"in document&&11>=document.documentMode,mc=null,E_=null,qd=null,I_=!1;function _S(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;I_||mc==null||mc!==op(r)||(r=mc,"selectionStart"in r&&R0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qd&&vh(qd,r)||(qd=r,r=fp(E_,"onSelect"),0<r.length&&(e=new b0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mc)))}function Kf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pc={animationend:Kf("Animation","AnimationEnd"),animationiteration:Kf("Animation","AnimationIteration"),animationstart:Kf("Animation","AnimationStart"),transitionend:Kf("Transition","TransitionEnd")},Jy={},w1={};Ui&&(w1=document.createElement("div").style,"AnimationEvent"in window||(delete pc.animationend.animation,delete pc.animationiteration.animation,delete pc.animationstart.animation),"TransitionEvent"in window||delete pc.transitionend.transition);function Tg(t){if(Jy[t])return Jy[t];if(!pc[t])return t;var e=pc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w1)return Jy[t]=e[n];return t}var E1=Tg("animationend"),I1=Tg("animationiteration"),T1=Tg("animationstart"),S1=Tg("transitionend"),b1=new Map,wS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(t,e){b1.set(t,e),Ol(e,[t])}for(var Xy=0;Xy<wS.length;Xy++){var Zy=wS[Xy],ZF=Zy.toLowerCase(),eU=Zy[0].toUpperCase()+Zy.slice(1);ga(ZF,"on"+eU)}ga(E1,"onAnimationEnd");ga(I1,"onAnimationIteration");ga(T1,"onAnimationStart");ga("dblclick","onDoubleClick");ga("focusin","onFocus");ga("focusout","onBlur");ga(S1,"onTransitionEnd");tu("onMouseEnter",["mouseout","mouseover"]);tu("onMouseLeave",["mouseout","mouseover"]);tu("onPointerEnter",["pointerout","pointerover"]);tu("onPointerLeave",["pointerout","pointerover"]);Ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function ES(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ZV(r,e,void 0,t),t.currentTarget=null}function A1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;ES(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;ES(s,a,c),i=l}}}if(lp)throw t=y_,lp=!1,y_=null,t}function jt(t,e){var n=e[x_];n===void 0&&(n=e[x_]=new Set);var r=t+"__bubble";n.has(r)||(x1(e,t,2,!1),n.add(r))}function ev(t,e,n){var r=0;e&&(r|=4),x1(n,t,r,e)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function _h(t){if(!t[Gf]){t[Gf]=!0,OP.forEach(function(n){n!=="selectionchange"&&(tU.has(n)||ev(n,!1,t),ev(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gf]||(e[Gf]=!0,ev("selectionchange",!1,e))}}function x1(t,e,n,r){switch(u1(e)){case 1:var s=pF;break;case 4:s=gF;break;default:s=T0}n=s.bind(null,e,n,t),s=void 0,!g_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function tv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ya(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}YP(function(){var c=i,d=_0(n),h=[];e:{var f=b1.get(t);if(f!==void 0){var m=b0,E=t;switch(t){case"keypress":if(Cm(n)===0)break e;case"keydown":case"keyup":m=kF;break;case"focusin":E="focus",m=Gy;break;case"focusout":E="blur",m=Gy;break;case"beforeblur":case"afterblur":m=Gy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=_F;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=OF;break;case E1:case I1:case T1:m=IF;break;case S1:m=MF;break;case"scroll":m=yF;break;case"wheel":m=FF;break;case"copy":case"cut":case"paste":m=SF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=dS}var p=(e&4)!==0,v=!p&&t==="scroll",w=p?f!==null?f+"Capture":null:f;p=[];for(var _=c,I;_!==null;){I=_;var x=I.stateNode;if(I.tag===5&&x!==null&&(I=x,w!==null&&(x=fh(_,w),x!=null&&p.push(wh(_,x,I)))),v)break;_=_.return}0<p.length&&(f=new m(f,E,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==m_&&(E=n.relatedTarget||n.fromElement)&&(Ya(E)||E[ji]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=c,E=E?Ya(E):null,E!==null&&(v=Ll(E),E!==v||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=c),m!==E)){if(p=cS,x="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(p=dS,x="onPointerLeave",w="onPointerEnter",_="pointer"),v=m==null?f:gc(m),I=E==null?f:gc(E),f=new p(x,_+"leave",m,n,d),f.target=v,f.relatedTarget=I,x=null,Ya(d)===c&&(p=new p(w,_+"enter",E,n,d),p.target=I,p.relatedTarget=v,x=p),v=x,m&&E)t:{for(p=m,w=E,_=0,I=p;I;I=Gl(I))_++;for(I=0,x=w;x;x=Gl(x))I++;for(;0<_-I;)p=Gl(p),_--;for(;0<I-_;)w=Gl(w),I--;for(;_--;){if(p===w||w!==null&&p===w.alternate)break t;p=Gl(p),w=Gl(w)}p=null}else p=null;m!==null&&IS(h,f,m,p,!1),E!==null&&v!==null&&IS(h,v,E,p,!0)}}e:{if(f=c?gc(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=qF;else if(mS(f))if(g1)P=QF;else{P=KF;var L=HF}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=GF);if(P&&(P=P(t,c))){p1(h,P,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&c_(f,"number",f.value)}switch(L=c?gc(c):window,t){case"focusin":(mS(L)||L.contentEditable==="true")&&(mc=L,E_=c,qd=null);break;case"focusout":qd=E_=mc=null;break;case"mousedown":I_=!0;break;case"contextmenu":case"mouseup":case"dragend":I_=!1,_S(h,n,d);break;case"selectionchange":if(XF)break;case"keydown":case"keyup":_S(h,n,d)}var A;if(x0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else fc?f1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(h1&&n.locale!=="ko"&&(fc||T!=="onCompositionStart"?T==="onCompositionEnd"&&fc&&(A=d1()):(Mo=d,S0="value"in Mo?Mo.value:Mo.textContent,fc=!0)),L=fp(c,T),0<L.length&&(T=new uS(T,t,null,n,d),h.push({event:T,listeners:L}),A?T.data=A:(A=m1(n),A!==null&&(T.data=A)))),(A=jF?$F(t,n):BF(t,n))&&(c=fp(c,"onBeforeInput"),0<c.length&&(d=new uS("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=A))}A1(h,e)})}function wh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fh(t,n),i!=null&&r.unshift(wh(t,i,s)),i=fh(t,e),i!=null&&r.push(wh(t,i,s))),t=t.return}return r}function Gl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IS(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=fh(n,i),l!=null&&o.unshift(wh(n,l,a))):s||(l=fh(n,i),l!=null&&o.push(wh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nU=/\r\n?/g,rU=/\u0000|\uFFFD/g;function TS(t){return(typeof t=="string"?t:""+t).replace(nU,`
`).replace(rU,"")}function Qf(t,e,n){if(e=TS(e),TS(t)!==e&&n)throw Error(le(425))}function mp(){}var T_=null,S_=null;function b_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var A_=typeof setTimeout=="function"?setTimeout:void 0,sU=typeof clearTimeout=="function"?clearTimeout:void 0,SS=typeof Promise=="function"?Promise:void 0,iU=typeof queueMicrotask=="function"?queueMicrotask:typeof SS<"u"?function(t){return SS.resolve(null).then(t).catch(oU)}:A_;function oU(t){setTimeout(function(){throw t})}function nv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gh(e)}function Ho(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fu=Math.random().toString(36).slice(2),ei="__reactFiber$"+Fu,Eh="__reactProps$"+Fu,ji="__reactContainer$"+Fu,x_="__reactEvents$"+Fu,aU="__reactListeners$"+Fu,lU="__reactHandles$"+Fu;function Ya(t){var e=t[ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ji]||n[ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bS(t);t!==null;){if(n=t[ei])return n;t=bS(t)}return e}t=n,n=t.parentNode}return null}function rf(t){return t=t[ei]||t[ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Sg(t){return t[Eh]||null}var R_=[],yc=-1;function ya(t){return{current:t}}function zt(t){0>yc||(t.current=R_[yc],R_[yc]=null,yc--)}function Vt(t,e){yc++,R_[yc]=t.current,t.current=e}var ia={},vr=ya(ia),zr=ya(!1),ml=ia;function nu(t,e){var n=t.type.contextTypes;if(!n)return ia;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wr(t){return t=t.childContextTypes,t!=null}function pp(){zt(zr),zt(vr)}function AS(t,e,n){if(vr.current!==ia)throw Error(le(168));Vt(vr,e),Vt(zr,n)}function R1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(le(108,HV(t)||"Unknown",s));return ln({},n,r)}function gp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ia,ml=vr.current,Vt(vr,t),Vt(zr,zr.current),!0}function xS(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=R1(t,e,ml),r.__reactInternalMemoizedMergedChildContext=t,zt(zr),zt(vr),Vt(vr,t)):zt(zr),Vt(zr,n)}var Ai=null,bg=!1,rv=!1;function P1(t){Ai===null?Ai=[t]:Ai.push(t)}function cU(t){bg=!0,P1(t)}function va(){if(!rv&&Ai!==null){rv=!0;var t=0,e=xt;try{var n=Ai;for(xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ai=null,bg=!1}catch(s){throw Ai!==null&&(Ai=Ai.slice(t+1)),e1(w0,va),s}finally{xt=e,rv=!1}}return null}var vc=[],_c=0,yp=null,vp=0,hs=[],fs=0,pl=null,Pi=1,Ci="";function Ma(t,e){vc[_c++]=vp,vc[_c++]=yp,yp=t,vp=e}function C1(t,e,n){hs[fs++]=Pi,hs[fs++]=Ci,hs[fs++]=pl,pl=t;var r=Pi;t=Ci;var s=32-Cs(r)-1;r&=~(1<<s),n+=1;var i=32-Cs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pi=1<<32-Cs(e)+s|n<<s|r,Ci=i+t}else Pi=1<<i|n<<s|r,Ci=t}function P0(t){t.return!==null&&(Ma(t,1),C1(t,1,0))}function C0(t){for(;t===yp;)yp=vc[--_c],vc[_c]=null,vp=vc[--_c],vc[_c]=null;for(;t===pl;)pl=hs[--fs],hs[fs]=null,Ci=hs[--fs],hs[fs]=null,Pi=hs[--fs],hs[fs]=null}var ts=null,Zr=null,Gt=!1,xs=null;function k1(t,e){var n=ms(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function RS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,Zr=Ho(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,Zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pl!==null?{id:Pi,overflow:Ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ms(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ts=t,Zr=null,!0):!1;default:return!1}}function P_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function C_(t){if(Gt){var e=Zr;if(e){var n=e;if(!RS(t,e)){if(P_(t))throw Error(le(418));e=Ho(n.nextSibling);var r=ts;e&&RS(t,e)?k1(r,n):(t.flags=t.flags&-4097|2,Gt=!1,ts=t)}}else{if(P_(t))throw Error(le(418));t.flags=t.flags&-4097|2,Gt=!1,ts=t}}}function PS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function Yf(t){if(t!==ts)return!1;if(!Gt)return PS(t),Gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!b_(t.type,t.memoizedProps)),e&&(e=Zr)){if(P_(t))throw N1(),Error(le(418));for(;e;)k1(t,e),e=Ho(e.nextSibling)}if(PS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zr=Ho(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zr=null}}else Zr=ts?Ho(t.stateNode.nextSibling):null;return!0}function N1(){for(var t=Zr;t;)t=Ho(t.nextSibling)}function ru(){Zr=ts=null,Gt=!1}function k0(t){xs===null?xs=[t]:xs.push(t)}var uU=Yi.ReactCurrentBatchConfig;function vd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Jf(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function CS(t){var e=t._init;return e(t._payload)}function D1(t){function e(w,_){if(t){var I=w.deletions;I===null?(w.deletions=[_],w.flags|=16):I.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function s(w,_){return w=Yo(w,_),w.index=0,w.sibling=null,w}function i(w,_,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<_?(w.flags|=2,_):I):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,I,x){return _===null||_.tag!==6?(_=uv(I,w.mode,x),_.return=w,_):(_=s(_,I),_.return=w,_)}function l(w,_,I,x){var P=I.type;return P===hc?d(w,_,I.props.children,x,I.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===_o&&CS(P)===_.type)?(x=s(_,I.props),x.ref=vd(w,_,I),x.return=w,x):(x=Vm(I.type,I.key,I.props,null,w.mode,x),x.ref=vd(w,_,I),x.return=w,x)}function c(w,_,I,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=dv(I,w.mode,x),_.return=w,_):(_=s(_,I.children||[]),_.return=w,_)}function d(w,_,I,x,P){return _===null||_.tag!==7?(_=ll(I,w.mode,x,P),_.return=w,_):(_=s(_,I),_.return=w,_)}function h(w,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=uv(""+_,w.mode,I),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case jf:return I=Vm(_.type,_.key,_.props,null,w.mode,I),I.ref=vd(w,null,_),I.return=w,I;case dc:return _=dv(_,w.mode,I),_.return=w,_;case _o:var x=_._init;return h(w,x(_._payload),I)}if(Cd(_)||fd(_))return _=ll(_,w.mode,I,null),_.return=w,_;Jf(w,_)}return null}function f(w,_,I,x){var P=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return P!==null?null:a(w,_,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case jf:return I.key===P?l(w,_,I,x):null;case dc:return I.key===P?c(w,_,I,x):null;case _o:return P=I._init,f(w,_,P(I._payload),x)}if(Cd(I)||fd(I))return P!==null?null:d(w,_,I,x,null);Jf(w,I)}return null}function m(w,_,I,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(I)||null,a(_,w,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jf:return w=w.get(x.key===null?I:x.key)||null,l(_,w,x,P);case dc:return w=w.get(x.key===null?I:x.key)||null,c(_,w,x,P);case _o:var L=x._init;return m(w,_,I,L(x._payload),P)}if(Cd(x)||fd(x))return w=w.get(I)||null,d(_,w,x,P,null);Jf(_,x)}return null}function E(w,_,I,x){for(var P=null,L=null,A=_,T=_=0,R=null;A!==null&&T<I.length;T++){A.index>T?(R=A,A=null):R=A.sibling;var C=f(w,A,I[T],x);if(C===null){A===null&&(A=R);break}t&&A&&C.alternate===null&&e(w,A),_=i(C,_,T),L===null?P=C:L.sibling=C,L=C,A=R}if(T===I.length)return n(w,A),Gt&&Ma(w,T),P;if(A===null){for(;T<I.length;T++)A=h(w,I[T],x),A!==null&&(_=i(A,_,T),L===null?P=A:L.sibling=A,L=A);return Gt&&Ma(w,T),P}for(A=r(w,A);T<I.length;T++)R=m(A,w,T,I[T],x),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?T:R.key),_=i(R,_,T),L===null?P=R:L.sibling=R,L=R);return t&&A.forEach(function(D){return e(w,D)}),Gt&&Ma(w,T),P}function p(w,_,I,x){var P=fd(I);if(typeof P!="function")throw Error(le(150));if(I=P.call(I),I==null)throw Error(le(151));for(var L=P=null,A=_,T=_=0,R=null,C=I.next();A!==null&&!C.done;T++,C=I.next()){A.index>T?(R=A,A=null):R=A.sibling;var D=f(w,A,C.value,x);if(D===null){A===null&&(A=R);break}t&&A&&D.alternate===null&&e(w,A),_=i(D,_,T),L===null?P=D:L.sibling=D,L=D,A=R}if(C.done)return n(w,A),Gt&&Ma(w,T),P;if(A===null){for(;!C.done;T++,C=I.next())C=h(w,C.value,x),C!==null&&(_=i(C,_,T),L===null?P=C:L.sibling=C,L=C);return Gt&&Ma(w,T),P}for(A=r(w,A);!C.done;T++,C=I.next())C=m(A,w,T,C.value,x),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?T:C.key),_=i(C,_,T),L===null?P=C:L.sibling=C,L=C);return t&&A.forEach(function(O){return e(w,O)}),Gt&&Ma(w,T),P}function v(w,_,I,x){if(typeof I=="object"&&I!==null&&I.type===hc&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case jf:e:{for(var P=I.key,L=_;L!==null;){if(L.key===P){if(P=I.type,P===hc){if(L.tag===7){n(w,L.sibling),_=s(L,I.props.children),_.return=w,w=_;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===_o&&CS(P)===L.type){n(w,L.sibling),_=s(L,I.props),_.ref=vd(w,L,I),_.return=w,w=_;break e}n(w,L);break}else e(w,L);L=L.sibling}I.type===hc?(_=ll(I.props.children,w.mode,x,I.key),_.return=w,w=_):(x=Vm(I.type,I.key,I.props,null,w.mode,x),x.ref=vd(w,_,I),x.return=w,w=x)}return o(w);case dc:e:{for(L=I.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(w,_.sibling),_=s(_,I.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=dv(I,w.mode,x),_.return=w,w=_}return o(w);case _o:return L=I._init,v(w,_,L(I._payload),x)}if(Cd(I))return E(w,_,I,x);if(fd(I))return p(w,_,I,x);Jf(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(w,_.sibling),_=s(_,I),_.return=w,w=_):(n(w,_),_=uv(I,w.mode,x),_.return=w,w=_),o(w)):n(w,_)}return v}var su=D1(!0),O1=D1(!1),_p=ya(null),wp=null,wc=null,N0=null;function D0(){N0=wc=wp=null}function O0(t){var e=_p.current;zt(_p),t._currentValue=e}function k_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oc(t,e){wp=t,N0=wc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fr=!0),t.firstContext=null)}function ys(t){var e=t._currentValue;if(N0!==t)if(t={context:t,memoizedValue:e,next:null},wc===null){if(wp===null)throw Error(le(308));wc=t,wp.dependencies={lanes:0,firstContext:t}}else wc=wc.next=t;return e}var Ja=null;function L0(t){Ja===null?Ja=[t]:Ja.push(t)}function L1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,L0(e)):(n.next=s.next,s.next=n),e.interleaved=n,$i(t,r)}function $i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wo=!1;function M0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ko(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$i(t,n)}return s=r.interleaved,s===null?(e.next=e,L0(r)):(e.next=s.next,s.next=e),r.interleaved=e,$i(t,n)}function km(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E0(t,n)}}function kS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ep(t,e,n,r){var s=t.updateQueue;wo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,p=a;switch(f=e,m=n,p.tag){case 1:if(E=p.payload,typeof E=="function"){h=E.call(m,h,f);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=p.payload,f=typeof E=="function"?E.call(m,h,f):E,f==null)break e;h=ln({},h,f);break e;case 2:wo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yl|=o,t.lanes=o,t.memoizedState=h}}function NS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var sf={},li=ya(sf),Ih=ya(sf),Th=ya(sf);function Xa(t){if(t===sf)throw Error(le(174));return t}function V0(t,e){switch(Vt(Th,e),Vt(Ih,t),Vt(li,sf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:d_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=d_(e,t)}zt(li),Vt(li,e)}function iu(){zt(li),zt(Ih),zt(Th)}function V1(t){Xa(Th.current);var e=Xa(li.current),n=d_(e,t.type);e!==n&&(Vt(Ih,t),Vt(li,n))}function F0(t){Ih.current===t&&(zt(li),zt(Ih))}var sn=ya(0);function Ip(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sv=[];function U0(){for(var t=0;t<sv.length;t++)sv[t]._workInProgressVersionPrimary=null;sv.length=0}var Nm=Yi.ReactCurrentDispatcher,iv=Yi.ReactCurrentBatchConfig,gl=0,an=null,Vn=null,Qn=null,Tp=!1,Hd=!1,Sh=0,dU=0;function dr(){throw Error(le(321))}function j0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Os(t[n],e[n]))return!1;return!0}function $0(t,e,n,r,s,i){if(gl=i,an=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nm.current=t===null||t.memoizedState===null?pU:gU,t=n(r,s),Hd){i=0;do{if(Hd=!1,Sh=0,25<=i)throw Error(le(301));i+=1,Qn=Vn=null,e.updateQueue=null,Nm.current=yU,t=n(r,s)}while(Hd)}if(Nm.current=Sp,e=Vn!==null&&Vn.next!==null,gl=0,Qn=Vn=an=null,Tp=!1,e)throw Error(le(300));return t}function B0(){var t=Sh!==0;return Sh=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?an.memoizedState=Qn=t:Qn=Qn.next=t,Qn}function vs(){if(Vn===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=Vn.next;var e=Qn===null?an.memoizedState:Qn.next;if(e!==null)Qn=e,Vn=t;else{if(t===null)throw Error(le(310));Vn=t,t={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Qn===null?an.memoizedState=Qn=t:Qn=Qn.next=t}return Qn}function bh(t,e){return typeof e=="function"?e(t):e}function ov(t){var e=vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=Vn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((gl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,an.lanes|=d,yl|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Os(r,e.memoizedState)||(Fr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,an.lanes|=i,yl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function av(t){var e=vs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Os(i,e.memoizedState)||(Fr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function F1(){}function U1(t,e){var n=an,r=vs(),s=e(),i=!Os(r.memoizedState,s);if(i&&(r.memoizedState=s,Fr=!0),r=r.queue,z0(B1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qn!==null&&Qn.memoizedState.tag&1){if(n.flags|=2048,Ah(9,$1.bind(null,n,r,s,e),void 0,null),Xn===null)throw Error(le(349));gl&30||j1(n,e,s)}return s}function j1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $1(t,e,n,r){e.value=n,e.getSnapshot=r,z1(e)&&W1(t)}function B1(t,e,n){return n(function(){z1(e)&&W1(t)})}function z1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Os(t,n)}catch{return!0}}function W1(t){var e=$i(t,1);e!==null&&ks(e,t,1,-1)}function DS(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:t},e.queue=t,t=t.dispatch=mU.bind(null,an,t),[e.memoizedState,t]}function Ah(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function q1(){return vs().memoizedState}function Dm(t,e,n,r){var s=Gs();an.flags|=t,s.memoizedState=Ah(1|e,n,void 0,r===void 0?null:r)}function Ag(t,e,n,r){var s=vs();r=r===void 0?null:r;var i=void 0;if(Vn!==null){var o=Vn.memoizedState;if(i=o.destroy,r!==null&&j0(r,o.deps)){s.memoizedState=Ah(e,n,i,r);return}}an.flags|=t,s.memoizedState=Ah(1|e,n,i,r)}function OS(t,e){return Dm(8390656,8,t,e)}function z0(t,e){return Ag(2048,8,t,e)}function H1(t,e){return Ag(4,2,t,e)}function K1(t,e){return Ag(4,4,t,e)}function G1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Q1(t,e,n){return n=n!=null?n.concat([t]):null,Ag(4,4,G1.bind(null,e,t),n)}function W0(){}function Y1(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&j0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function J1(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&j0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function X1(t,e,n){return gl&21?(Os(n,e)||(n=r1(),an.lanes|=n,yl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fr=!0),t.memoizedState=n)}function hU(t,e){var n=xt;xt=n!==0&&4>n?n:4,t(!0);var r=iv.transition;iv.transition={};try{t(!1),e()}finally{xt=n,iv.transition=r}}function Z1(){return vs().memoizedState}function fU(t,e,n){var r=Qo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eC(t))tC(e,n);else if(n=L1(t,e,n,r),n!==null){var s=Ar();ks(n,t,r,s),nC(n,e,r)}}function mU(t,e,n){var r=Qo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eC(t))tC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Os(a,o)){var l=e.interleaved;l===null?(s.next=s,L0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=L1(t,e,s,r),n!==null&&(s=Ar(),ks(n,t,r,s),nC(n,e,r))}}function eC(t){var e=t.alternate;return t===an||e!==null&&e===an}function tC(t,e){Hd=Tp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E0(t,n)}}var Sp={readContext:ys,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useInsertionEffect:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useSyncExternalStore:dr,useId:dr,unstable_isNewReconciler:!1},pU={readContext:ys,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:ys,useEffect:OS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dm(4194308,4,G1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dm(4,2,t,e)},useMemo:function(t,e){var n=Gs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fU.bind(null,an,t),[r.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:DS,useDebugValue:W0,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=DS(!1),e=t[0];return t=hU.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=an,s=Gs();if(Gt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Xn===null)throw Error(le(349));gl&30||j1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,OS(B1.bind(null,r,i,t),[t]),r.flags|=2048,Ah(9,$1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gs(),e=Xn.identifierPrefix;if(Gt){var n=Ci,r=Pi;n=(r&~(1<<32-Cs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gU={readContext:ys,useCallback:Y1,useContext:ys,useEffect:z0,useImperativeHandle:Q1,useInsertionEffect:H1,useLayoutEffect:K1,useMemo:J1,useReducer:ov,useRef:q1,useState:function(){return ov(bh)},useDebugValue:W0,useDeferredValue:function(t){var e=vs();return X1(e,Vn.memoizedState,t)},useTransition:function(){var t=ov(bh)[0],e=vs().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:U1,useId:Z1,unstable_isNewReconciler:!1},yU={readContext:ys,useCallback:Y1,useContext:ys,useEffect:z0,useImperativeHandle:Q1,useInsertionEffect:H1,useLayoutEffect:K1,useMemo:J1,useReducer:av,useRef:q1,useState:function(){return av(bh)},useDebugValue:W0,useDeferredValue:function(t){var e=vs();return Vn===null?e.memoizedState=t:X1(e,Vn.memoizedState,t)},useTransition:function(){var t=av(bh)[0],e=vs().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:U1,useId:Z1,unstable_isNewReconciler:!1};function Is(t,e){if(t&&t.defaultProps){e=ln({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function N_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xg={isMounted:function(t){return(t=t._reactInternals)?Ll(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ar(),s=Qo(t),i=Mi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,s),e!==null&&(ks(e,t,s,r),km(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ar(),s=Qo(t),i=Mi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,s),e!==null&&(ks(e,t,s,r),km(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ar(),r=Qo(t),s=Mi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ko(t,s,r),e!==null&&(ks(e,t,r,n),km(e,t,r))}};function LS(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vh(n,r)||!vh(s,i):!0}function rC(t,e,n){var r=!1,s=ia,i=e.contextType;return typeof i=="object"&&i!==null?i=ys(i):(s=Wr(e)?ml:vr.current,r=e.contextTypes,i=(r=r!=null)?nu(t,s):ia),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function MS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xg.enqueueReplaceState(e,e.state,null)}function D_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},M0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ys(i):(i=Wr(e)?ml:vr.current,s.context=nu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(N_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xg.enqueueReplaceState(s,s.state,null),Ep(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ou(t,e){try{var n="",r=e;do n+=qV(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function lv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function O_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vU=typeof WeakMap=="function"?WeakMap:Map;function sC(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ap||(Ap=!0,W_=r),O_(t,e)},n}function iC(t,e,n){n=Mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){O_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){O_(t,e),typeof r!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function VS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vU;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=NU.bind(null,t,e,n),e.then(t,t))}function FS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function US(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,Ko(n,e,1))),n.lanes|=1),t)}var _U=Yi.ReactCurrentOwner,Fr=!1;function Tr(t,e,n,r){e.child=t===null?O1(e,null,n,r):su(e,t.child,n,r)}function jS(t,e,n,r,s){n=n.render;var i=e.ref;return Oc(e,s),r=$0(t,e,n,r,i,s),n=B0(),t!==null&&!Fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Gt&&n&&P0(e),e.flags|=1,Tr(t,e,r,s),e.child)}function $S(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!X0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,oC(t,e,i,r,s)):(t=Vm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vh,n(o,r)&&t.ref===e.ref)return Bi(t,e,s)}return e.flags|=1,t=Yo(i,r),t.ref=e.ref,t.return=e,e.child=t}function oC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vh(i,r)&&t.ref===e.ref)if(Fr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fr=!0);else return e.lanes=t.lanes,Bi(t,e,s)}return L_(t,e,n,r,s)}function aC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Ic,Qr),Qr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vt(Ic,Qr),Qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Vt(Ic,Qr),Qr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Vt(Ic,Qr),Qr|=r;return Tr(t,e,s,n),e.child}function lC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function L_(t,e,n,r,s){var i=Wr(n)?ml:vr.current;return i=nu(e,i),Oc(e,s),n=$0(t,e,n,r,i,s),r=B0(),t!==null&&!Fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bi(t,e,s)):(Gt&&r&&P0(e),e.flags|=1,Tr(t,e,n,s),e.child)}function BS(t,e,n,r,s){if(Wr(n)){var i=!0;gp(e)}else i=!1;if(Oc(e,s),e.stateNode===null)Om(t,e),rC(e,n,r),D_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ys(c):(c=Wr(n)?ml:vr.current,c=nu(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&MS(e,o,r,c),wo=!1;var f=e.memoizedState;o.state=f,Ep(e,r,o,s),l=e.memoizedState,a!==r||f!==l||zr.current||wo?(typeof d=="function"&&(N_(e,n,d,r),l=e.memoizedState),(a=wo||LS(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,M1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Is(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ys(l):(l=Wr(n)?ml:vr.current,l=nu(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&MS(e,o,r,l),wo=!1,f=e.memoizedState,o.state=f,Ep(e,r,o,s);var E=e.memoizedState;a!==h||f!==E||zr.current||wo?(typeof m=="function"&&(N_(e,n,m,r),E=e.memoizedState),(c=wo||LS(e,n,c,r,f,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return M_(t,e,n,r,i,s)}function M_(t,e,n,r,s,i){lC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xS(e,n,!1),Bi(t,e,i);r=e.stateNode,_U.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=su(e,t.child,null,i),e.child=su(e,null,a,i)):Tr(t,e,a,i),e.memoizedState=r.state,s&&xS(e,n,!0),e.child}function cC(t){var e=t.stateNode;e.pendingContext?AS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&AS(t,e.context,!1),V0(t,e.containerInfo)}function zS(t,e,n,r,s){return ru(),k0(s),e.flags|=256,Tr(t,e,n,r),e.child}var V_={dehydrated:null,treeContext:null,retryLane:0};function F_(t){return{baseLanes:t,cachePool:null,transitions:null}}function uC(t,e,n){var r=e.pendingProps,s=sn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Vt(sn,s&1),t===null)return C_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cg(o,r,0,null),t=ll(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=F_(n),e.memoizedState=V_,t):q0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return wU(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Yo(a,i):(i=ll(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?F_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=V_,r}return i=t.child,t=i.sibling,r=Yo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function q0(t,e){return e=Cg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xf(t,e,n,r){return r!==null&&k0(r),su(e,t.child,null,n),t=q0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wU(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=lv(Error(le(422))),Xf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cg({mode:"visible",children:r.children},s,0,null),i=ll(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&su(e,t.child,null,o),e.child.memoizedState=F_(o),e.memoizedState=V_,i);if(!(e.mode&1))return Xf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(le(419)),r=lv(i,r,void 0),Xf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fr||a){if(r=Xn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$i(t,s),ks(r,t,s,-1))}return J0(),r=lv(Error(le(421))),Xf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=DU.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Zr=Ho(s.nextSibling),ts=e,Gt=!0,xs=null,t!==null&&(hs[fs++]=Pi,hs[fs++]=Ci,hs[fs++]=pl,Pi=t.id,Ci=t.overflow,pl=e),e=q0(e,r.children),e.flags|=4096,e)}function WS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),k_(t.return,e,n)}function cv(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function dC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tr(t,e,r.children,n),r=sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&WS(t,n,e);else if(t.tag===19)WS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vt(sn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ip(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cv(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ip(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cv(e,!0,n,null,i);break;case"together":cv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Om(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=Yo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EU(t,e,n){switch(e.tag){case 3:cC(e),ru();break;case 5:V1(e);break;case 1:Wr(e.type)&&gp(e);break;case 4:V0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Vt(_p,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vt(sn,sn.current&1),e.flags|=128,null):n&e.child.childLanes?uC(t,e,n):(Vt(sn,sn.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);Vt(sn,sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vt(sn,sn.current),r)break;return null;case 22:case 23:return e.lanes=0,aC(t,e,n)}return Bi(t,e,n)}var hC,U_,fC,mC;hC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};U_=function(){};fC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xa(li.current);var i=null;switch(n){case"input":s=a_(t,s),r=a_(t,r),i=[];break;case"select":s=ln({},s,{value:void 0}),r=ln({},r,{value:void 0}),i=[];break;case"textarea":s=u_(t,s),r=u_(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mp)}h_(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(dh.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(dh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};mC=function(t,e,n,r){n!==r&&(e.flags|=4)};function _d(t,e){if(!Gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function hr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IU(t,e,n){var r=e.pendingProps;switch(C0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(e),null;case 1:return Wr(e.type)&&pp(),hr(e),null;case 3:return r=e.stateNode,iu(),zt(zr),zt(vr),U0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(K_(xs),xs=null))),U_(t,e),hr(e),null;case 5:F0(e);var s=Xa(Th.current);if(n=e.type,t!==null&&e.stateNode!=null)fC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return hr(e),null}if(t=Xa(li.current),Yf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ei]=e,r[Eh]=i,t=(e.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(s=0;s<Nd.length;s++)jt(Nd[s],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":ZT(r,i),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jt("invalid",r);break;case"textarea":tS(r,i),jt("invalid",r)}h_(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qf(r.textContent,a,t),s=["children",""+a]):dh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jt("scroll",r)}switch(n){case"input":$f(r),eS(r,i,!0);break;case"textarea":$f(r),nS(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ei]=e,t[Eh]=r,hC(t,e,!1,!1),e.stateNode=t;e:{switch(o=f_(n,r),n){case"dialog":jt("cancel",t),jt("close",t),s=r;break;case"iframe":case"object":case"embed":jt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Nd.length;s++)jt(Nd[s],t);s=r;break;case"source":jt("error",t),s=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),s=r;break;case"details":jt("toggle",t),s=r;break;case"input":ZT(t,r),s=a_(t,r),jt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ln({},r,{value:void 0}),jt("invalid",t);break;case"textarea":tS(t,r),s=u_(t,r),jt("invalid",t);break;default:s=r}h_(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?qP(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zP(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hh(t,l):typeof l=="number"&&hh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&jt("scroll",t):l!=null&&p0(t,i,l,o))}switch(n){case"input":$f(t),eS(t,r,!1);break;case"textarea":$f(t),nS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sa(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Cc(t,!!r.multiple,i,!1):r.defaultValue!=null&&Cc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hr(e),null;case 6:if(t&&e.stateNode!=null)mC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Xa(Th.current),Xa(li.current),Yf(e)){if(r=e.stateNode,n=e.memoizedProps,r[ei]=e,(i=r.nodeValue!==n)&&(t=ts,t!==null))switch(t.tag){case 3:Qf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ei]=e,e.stateNode=r}return hr(e),null;case 13:if(zt(sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gt&&Zr!==null&&e.mode&1&&!(e.flags&128))N1(),ru(),e.flags|=98560,i=!1;else if(i=Yf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(le(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[ei]=e}else ru(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hr(e),i=!1}else xs!==null&&(K_(xs),xs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||sn.current&1?Fn===0&&(Fn=3):J0())),e.updateQueue!==null&&(e.flags|=4),hr(e),null);case 4:return iu(),U_(t,e),t===null&&_h(e.stateNode.containerInfo),hr(e),null;case 10:return O0(e.type._context),hr(e),null;case 17:return Wr(e.type)&&pp(),hr(e),null;case 19:if(zt(sn),i=e.memoizedState,i===null)return hr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)_d(i,!1);else{if(Fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ip(t),o!==null){for(e.flags|=128,_d(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vt(sn,sn.current&1|2),e.child}t=t.sibling}i.tail!==null&&yn()>au&&(e.flags|=128,r=!0,_d(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ip(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_d(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Gt)return hr(e),null}else 2*yn()-i.renderingStartTime>au&&n!==1073741824&&(e.flags|=128,r=!0,_d(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yn(),e.sibling=null,n=sn.current,Vt(sn,r?n&1|2:n&1),e):(hr(e),null);case 22:case 23:return Y0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qr&1073741824&&(hr(e),e.subtreeFlags&6&&(e.flags|=8192)):hr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function TU(t,e){switch(C0(e),e.tag){case 1:return Wr(e.type)&&pp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return iu(),zt(zr),zt(vr),U0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return F0(e),null;case 13:if(zt(sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));ru()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(sn),null;case 4:return iu(),null;case 10:return O0(e.type._context),null;case 22:case 23:return Y0(),null;case 24:return null;default:return null}}var Zf=!1,pr=!1,SU=typeof WeakSet=="function"?WeakSet:Set,be=null;function Ec(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gn(t,e,r)}else n.current=null}function j_(t,e,n){try{n()}catch(r){gn(t,e,r)}}var qS=!1;function bU(t,e){if(T_=dp,t=_1(),R0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(S_={focusedElem:t,selectionRange:n},dp=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var p=E.memoizedProps,v=E.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?p:Is(e.type,p),v);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(x){gn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return E=qS,qS=!1,E}function Kd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&j_(e,n,i)}s=s.next}while(s!==r)}}function Rg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pC(t){var e=t.alternate;e!==null&&(t.alternate=null,pC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ei],delete e[Eh],delete e[x_],delete e[aU],delete e[lU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gC(t){return t.tag===5||t.tag===3||t.tag===4}function HS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function B_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mp));else if(r!==4&&(t=t.child,t!==null))for(B_(t,e,n),t=t.sibling;t!==null;)B_(t,e,n),t=t.sibling}function z_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(z_(t,e,n),t=t.sibling;t!==null;)z_(t,e,n),t=t.sibling}var rr=null,bs=!1;function co(t,e,n){for(n=n.child;n!==null;)yC(t,e,n),n=n.sibling}function yC(t,e,n){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(wg,n)}catch{}switch(n.tag){case 5:pr||Ec(n,e);case 6:var r=rr,s=bs;rr=null,co(t,e,n),rr=r,bs=s,rr!==null&&(bs?(t=rr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(bs?(t=rr,n=n.stateNode,t.nodeType===8?nv(t.parentNode,n):t.nodeType===1&&nv(t,n),gh(t)):nv(rr,n.stateNode));break;case 4:r=rr,s=bs,rr=n.stateNode.containerInfo,bs=!0,co(t,e,n),rr=r,bs=s;break;case 0:case 11:case 14:case 15:if(!pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&j_(n,e,o),s=s.next}while(s!==r)}co(t,e,n);break;case 1:if(!pr&&(Ec(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){gn(n,e,a)}co(t,e,n);break;case 21:co(t,e,n);break;case 22:n.mode&1?(pr=(r=pr)||n.memoizedState!==null,co(t,e,n),pr=r):co(t,e,n);break;default:co(t,e,n)}}function KS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SU),e.forEach(function(r){var s=OU.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ws(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rr=a.stateNode,bs=!1;break e;case 3:rr=a.stateNode.containerInfo,bs=!0;break e;case 4:rr=a.stateNode.containerInfo,bs=!0;break e}a=a.return}if(rr===null)throw Error(le(160));yC(i,o,s),rr=null,bs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){gn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vC(e,t),e=e.sibling}function vC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ws(e,t),Ks(t),r&4){try{Kd(3,t,t.return),Rg(3,t)}catch(p){gn(t,t.return,p)}try{Kd(5,t,t.return)}catch(p){gn(t,t.return,p)}}break;case 1:ws(e,t),Ks(t),r&512&&n!==null&&Ec(n,n.return);break;case 5:if(ws(e,t),Ks(t),r&512&&n!==null&&Ec(n,n.return),t.flags&32){var s=t.stateNode;try{hh(s,"")}catch(p){gn(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&jP(s,i),f_(a,o);var c=f_(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?qP(s,h):d==="dangerouslySetInnerHTML"?zP(s,h):d==="children"?hh(s,h):p0(s,d,h,c)}switch(a){case"input":l_(s,i);break;case"textarea":$P(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Cc(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Cc(s,!!i.multiple,i.defaultValue,!0):Cc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Eh]=i}catch(p){gn(t,t.return,p)}}break;case 6:if(ws(e,t),Ks(t),r&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){gn(t,t.return,p)}}break;case 3:if(ws(e,t),Ks(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gh(e.containerInfo)}catch(p){gn(t,t.return,p)}break;case 4:ws(e,t),Ks(t);break;case 13:ws(e,t),Ks(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(G0=yn())),r&4&&KS(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(pr=(c=pr)||d,ws(e,t),pr=c):ws(e,t),Ks(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(h=be=d;be!==null;){switch(f=be,m=f.child,f.tag){case 0:case 11:case 14:case 15:Kd(4,f,f.return);break;case 1:Ec(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(p){gn(r,n,p)}}break;case 5:Ec(f,f.return);break;case 22:if(f.memoizedState!==null){QS(h);continue}}m!==null?(m.return=f,be=m):QS(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WP("display",o))}catch(p){gn(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){gn(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ws(e,t),Ks(t),r&4&&KS(t);break;case 21:break;default:ws(e,t),Ks(t)}}function Ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gC(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hh(s,""),r.flags&=-33);var i=HS(t);z_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=HS(t);B_(t,a,o);break;default:throw Error(le(161))}}catch(l){gn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AU(t,e,n){be=t,_C(t)}function _C(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||pr;a=Zf;var c=pr;if(Zf=o,(pr=l)&&!c)for(be=s;be!==null;)o=be,l=o.child,o.tag===22&&o.memoizedState!==null?YS(s):l!==null?(l.return=o,be=l):YS(s);for(;i!==null;)be=i,_C(i),i=i.sibling;be=s,Zf=a,pr=c}GS(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):GS(t)}}function GS(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pr||Rg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Is(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&NS(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}NS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&gh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}pr||e.flags&512&&$_(e)}catch(f){gn(e,e.return,f)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function QS(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function YS(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rg(4,e)}catch(l){gn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){gn(e,s,l)}}var i=e.return;try{$_(e)}catch(l){gn(e,i,l)}break;case 5:var o=e.return;try{$_(e)}catch(l){gn(e,o,l)}}}catch(l){gn(e,e.return,l)}if(e===t){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var xU=Math.ceil,bp=Yi.ReactCurrentDispatcher,H0=Yi.ReactCurrentOwner,ps=Yi.ReactCurrentBatchConfig,_t=0,Xn=null,xn=null,or=0,Qr=0,Ic=ya(0),Fn=0,xh=null,yl=0,Pg=0,K0=0,Gd=null,Lr=null,G0=0,au=1/0,bi=null,Ap=!1,W_=null,Go=null,em=!1,Vo=null,xp=0,Qd=0,q_=null,Lm=-1,Mm=0;function Ar(){return _t&6?yn():Lm!==-1?Lm:Lm=yn()}function Qo(t){return t.mode&1?_t&2&&or!==0?or&-or:uU.transition!==null?(Mm===0&&(Mm=r1()),Mm):(t=xt,t!==0||(t=window.event,t=t===void 0?16:u1(t.type)),t):1}function ks(t,e,n,r){if(50<Qd)throw Qd=0,q_=null,Error(le(185));tf(t,n,r),(!(_t&2)||t!==Xn)&&(t===Xn&&(!(_t&2)&&(Pg|=n),Fn===4&&To(t,or)),qr(t,r),n===1&&_t===0&&!(e.mode&1)&&(au=yn()+500,bg&&va()))}function qr(t,e){var n=t.callbackNode;uF(t,e);var r=up(t,t===Xn?or:0);if(r===0)n!==null&&iS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iS(n),e===1)t.tag===0?cU(JS.bind(null,t)):P1(JS.bind(null,t)),iU(function(){!(_t&6)&&va()}),n=null;else{switch(s1(r)){case 1:n=w0;break;case 4:n=t1;break;case 16:n=cp;break;case 536870912:n=n1;break;default:n=cp}n=xC(n,wC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wC(t,e){if(Lm=-1,Mm=0,_t&6)throw Error(le(327));var n=t.callbackNode;if(Lc()&&t.callbackNode!==n)return null;var r=up(t,t===Xn?or:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rp(t,r);else{e=r;var s=_t;_t|=2;var i=IC();(Xn!==t||or!==e)&&(bi=null,au=yn()+500,al(t,e));do try{CU();break}catch(a){EC(t,a)}while(!0);D0(),bp.current=i,_t=s,xn!==null?e=0:(Xn=null,or=0,e=Fn)}if(e!==0){if(e===2&&(s=v_(t),s!==0&&(r=s,e=H_(t,s))),e===1)throw n=xh,al(t,0),To(t,r),qr(t,yn()),n;if(e===6)To(t,r);else{if(s=t.current.alternate,!(r&30)&&!RU(s)&&(e=Rp(t,r),e===2&&(i=v_(t),i!==0&&(r=i,e=H_(t,i))),e===1))throw n=xh,al(t,0),To(t,r),qr(t,yn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Va(t,Lr,bi);break;case 3:if(To(t,r),(r&130023424)===r&&(e=G0+500-yn(),10<e)){if(up(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ar(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=A_(Va.bind(null,t,Lr,bi),e);break}Va(t,Lr,bi);break;case 4:if(To(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=yn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xU(r/1960))-r,10<r){t.timeoutHandle=A_(Va.bind(null,t,Lr,bi),r);break}Va(t,Lr,bi);break;case 5:Va(t,Lr,bi);break;default:throw Error(le(329))}}}return qr(t,yn()),t.callbackNode===n?wC.bind(null,t):null}function H_(t,e){var n=Gd;return t.current.memoizedState.isDehydrated&&(al(t,e).flags|=256),t=Rp(t,e),t!==2&&(e=Lr,Lr=n,e!==null&&K_(e)),t}function K_(t){Lr===null?Lr=t:Lr.push.apply(Lr,t)}function RU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Os(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function To(t,e){for(e&=~K0,e&=~Pg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cs(e),r=1<<n;t[n]=-1,e&=~r}}function JS(t){if(_t&6)throw Error(le(327));Lc();var e=up(t,0);if(!(e&1))return qr(t,yn()),null;var n=Rp(t,e);if(t.tag!==0&&n===2){var r=v_(t);r!==0&&(e=r,n=H_(t,r))}if(n===1)throw n=xh,al(t,0),To(t,e),qr(t,yn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Va(t,Lr,bi),qr(t,yn()),null}function Q0(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(au=yn()+500,bg&&va())}}function vl(t){Vo!==null&&Vo.tag===0&&!(_t&6)&&Lc();var e=_t;_t|=1;var n=ps.transition,r=xt;try{if(ps.transition=null,xt=1,t)return t()}finally{xt=r,ps.transition=n,_t=e,!(_t&6)&&va()}}function Y0(){Qr=Ic.current,zt(Ic)}function al(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sU(n)),xn!==null)for(n=xn.return;n!==null;){var r=n;switch(C0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pp();break;case 3:iu(),zt(zr),zt(vr),U0();break;case 5:F0(r);break;case 4:iu();break;case 13:zt(sn);break;case 19:zt(sn);break;case 10:O0(r.type._context);break;case 22:case 23:Y0()}n=n.return}if(Xn=t,xn=t=Yo(t.current,null),or=Qr=e,Fn=0,xh=null,K0=Pg=yl=0,Lr=Gd=null,Ja!==null){for(e=0;e<Ja.length;e++)if(n=Ja[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ja=null}return t}function EC(t,e){do{var n=xn;try{if(D0(),Nm.current=Sp,Tp){for(var r=an.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Tp=!1}if(gl=0,Qn=Vn=an=null,Hd=!1,Sh=0,H0.current=null,n===null||n.return===null){Fn=1,xh=e,xn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=or,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=FS(o);if(m!==null){m.flags&=-257,US(m,o,a,i,e),m.mode&1&&VS(i,c,e),e=m,l=c;var E=e.updateQueue;if(E===null){var p=new Set;p.add(l),e.updateQueue=p}else E.add(l);break e}else{if(!(e&1)){VS(i,c,e),J0();break e}l=Error(le(426))}}else if(Gt&&a.mode&1){var v=FS(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),US(v,o,a,i,e),k0(ou(l,a));break e}}i=l=ou(l,a),Fn!==4&&(Fn=2),Gd===null?Gd=[i]:Gd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=sC(i,l,e);kS(i,w);break e;case 1:a=l;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Go===null||!Go.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=iC(i,a,e);kS(i,x);break e}}i=i.return}while(i!==null)}SC(n)}catch(P){e=P,xn===n&&n!==null&&(xn=n=n.return);continue}break}while(!0)}function IC(){var t=bp.current;return bp.current=Sp,t===null?Sp:t}function J0(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Xn===null||!(yl&268435455)&&!(Pg&268435455)||To(Xn,or)}function Rp(t,e){var n=_t;_t|=2;var r=IC();(Xn!==t||or!==e)&&(bi=null,al(t,e));do try{PU();break}catch(s){EC(t,s)}while(!0);if(D0(),_t=n,bp.current=r,xn!==null)throw Error(le(261));return Xn=null,or=0,Fn}function PU(){for(;xn!==null;)TC(xn)}function CU(){for(;xn!==null&&!tF();)TC(xn)}function TC(t){var e=AC(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,e===null?SC(t):xn=e,H0.current=null}function SC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TU(n,e),n!==null){n.flags&=32767,xn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fn=6,xn=null;return}}else if(n=IU(n,e,Qr),n!==null){xn=n;return}if(e=e.sibling,e!==null){xn=e;return}xn=e=t}while(e!==null);Fn===0&&(Fn=5)}function Va(t,e,n){var r=xt,s=ps.transition;try{ps.transition=null,xt=1,kU(t,e,n,r)}finally{ps.transition=s,xt=r}return null}function kU(t,e,n,r){do Lc();while(Vo!==null);if(_t&6)throw Error(le(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(dF(t,i),t===Xn&&(xn=Xn=null,or=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||em||(em=!0,xC(cp,function(){return Lc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var o=xt;xt=1;var a=_t;_t|=4,H0.current=null,bU(t,n),vC(n,t),JF(S_),dp=!!T_,S_=T_=null,t.current=n,AU(n),nF(),_t=a,xt=o,ps.transition=i}else t.current=n;if(em&&(em=!1,Vo=t,xp=s),i=t.pendingLanes,i===0&&(Go=null),iF(n.stateNode),qr(t,yn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ap)throw Ap=!1,t=W_,W_=null,t;return xp&1&&t.tag!==0&&Lc(),i=t.pendingLanes,i&1?t===q_?Qd++:(Qd=0,q_=t):Qd=0,va(),null}function Lc(){if(Vo!==null){var t=s1(xp),e=ps.transition,n=xt;try{if(ps.transition=null,xt=16>t?16:t,Vo===null)var r=!1;else{if(t=Vo,Vo=null,xp=0,_t&6)throw Error(le(331));var s=_t;for(_t|=4,be=t.current;be!==null;){var i=be,o=i.child;if(be.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:Kd(8,d,i)}var h=d.child;if(h!==null)h.return=d,be=h;else for(;be!==null;){d=be;var f=d.sibling,m=d.return;if(pC(d),d===c){be=null;break}if(f!==null){f.return=m,be=f;break}be=m}}}var E=i.alternate;if(E!==null){var p=E.child;if(p!==null){E.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}be=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,be=o;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Kd(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,be=w;break e}be=i.return}}var _=t.current;for(be=_;be!==null;){o=be;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,be=I;else e:for(o=_;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rg(9,a)}}catch(P){gn(a,a.return,P)}if(a===o){be=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,be=x;break e}be=a.return}}if(_t=s,va(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(wg,t)}catch{}r=!0}return r}finally{xt=n,ps.transition=e}}return!1}function XS(t,e,n){e=ou(n,e),e=sC(t,e,1),t=Ko(t,e,1),e=Ar(),t!==null&&(tf(t,1,e),qr(t,e))}function gn(t,e,n){if(t.tag===3)XS(t,t,n);else for(;e!==null;){if(e.tag===3){XS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Go===null||!Go.has(r))){t=ou(n,t),t=iC(e,t,1),e=Ko(e,t,1),t=Ar(),e!==null&&(tf(e,1,t),qr(e,t));break}}e=e.return}}function NU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ar(),t.pingedLanes|=t.suspendedLanes&n,Xn===t&&(or&n)===n&&(Fn===4||Fn===3&&(or&130023424)===or&&500>yn()-G0?al(t,0):K0|=n),qr(t,e)}function bC(t,e){e===0&&(t.mode&1?(e=Wf,Wf<<=1,!(Wf&130023424)&&(Wf=4194304)):e=1);var n=Ar();t=$i(t,e),t!==null&&(tf(t,e,n),qr(t,n))}function DU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bC(t,n)}function OU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),bC(t,n)}var AC;AC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zr.current)Fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fr=!1,EU(t,e,n);Fr=!!(t.flags&131072)}else Fr=!1,Gt&&e.flags&1048576&&C1(e,vp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Om(t,e),t=e.pendingProps;var s=nu(e,vr.current);Oc(e,n),s=$0(null,e,r,t,s,n);var i=B0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(r)?(i=!0,gp(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,M0(e),s.updater=xg,e.stateNode=s,s._reactInternals=e,D_(e,r,t,n),e=M_(null,e,r,!0,i,n)):(e.tag=0,Gt&&i&&P0(e),Tr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Om(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=MU(r),t=Is(r,t),s){case 0:e=L_(null,e,r,t,n);break e;case 1:e=BS(null,e,r,t,n);break e;case 11:e=jS(null,e,r,t,n);break e;case 14:e=$S(null,e,r,Is(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),L_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),BS(t,e,r,s,n);case 3:e:{if(cC(e),t===null)throw Error(le(387));r=e.pendingProps,i=e.memoizedState,s=i.element,M1(t,e),Ep(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ou(Error(le(423)),e),e=zS(t,e,r,n,s);break e}else if(r!==s){s=ou(Error(le(424)),e),e=zS(t,e,r,n,s);break e}else for(Zr=Ho(e.stateNode.containerInfo.firstChild),ts=e,Gt=!0,xs=null,n=O1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ru(),r===s){e=Bi(t,e,n);break e}Tr(t,e,r,n)}e=e.child}return e;case 5:return V1(e),t===null&&C_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,b_(r,s)?o=null:i!==null&&b_(r,i)&&(e.flags|=32),lC(t,e),Tr(t,e,o,n),e.child;case 6:return t===null&&C_(e),null;case 13:return uC(t,e,n);case 4:return V0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=su(e,null,r,n):Tr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),jS(t,e,r,s,n);case 7:return Tr(t,e,e.pendingProps,n),e.child;case 8:return Tr(t,e,e.pendingProps.children,n),e.child;case 12:return Tr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Vt(_p,r._currentValue),r._currentValue=o,i!==null)if(Os(i.value,o)){if(i.children===s.children&&!zr.current){e=Bi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Mi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),k_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),k_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Oc(e,n),s=ys(s),r=r(s),e.flags|=1,Tr(t,e,r,n),e.child;case 14:return r=e.type,s=Is(r,e.pendingProps),s=Is(r.type,s),$S(t,e,r,s,n);case 15:return oC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Is(r,s),Om(t,e),e.tag=1,Wr(r)?(t=!0,gp(e)):t=!1,Oc(e,n),rC(e,r,s),D_(e,r,s,n),M_(null,e,r,!0,t,n);case 19:return dC(t,e,n);case 22:return aC(t,e,n)}throw Error(le(156,e.tag))};function xC(t,e){return e1(t,e)}function LU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(t,e,n,r){return new LU(t,e,n,r)}function X0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MU(t){if(typeof t=="function")return X0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===y0)return 11;if(t===v0)return 14}return 2}function Yo(t,e){var n=t.alternate;return n===null?(n=ms(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vm(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")X0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hc:return ll(n.children,s,i,e);case g0:o=8,s|=8;break;case r_:return t=ms(12,n,e,s|2),t.elementType=r_,t.lanes=i,t;case s_:return t=ms(13,n,e,s),t.elementType=s_,t.lanes=i,t;case i_:return t=ms(19,n,e,s),t.elementType=i_,t.lanes=i,t;case VP:return Cg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LP:o=10;break e;case MP:o=9;break e;case y0:o=11;break e;case v0:o=14;break e;case _o:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=ms(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ll(t,e,n,r){return t=ms(7,t,r,e),t.lanes=n,t}function Cg(t,e,n,r){return t=ms(22,t,r,e),t.elementType=VP,t.lanes=n,t.stateNode={isHidden:!1},t}function uv(t,e,n){return t=ms(6,t,null,e),t.lanes=n,t}function dv(t,e,n){return e=ms(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VU(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qy(0),this.expirationTimes=qy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qy(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Z0(t,e,n,r,s,i,o,a,l){return t=new VU(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ms(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},M0(i),t}function FU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function RC(t){if(!t)return ia;t=t._reactInternals;e:{if(Ll(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Wr(n))return R1(t,n,e)}return e}function PC(t,e,n,r,s,i,o,a,l){return t=Z0(n,r,!0,t,s,i,o,a,l),t.context=RC(null),n=t.current,r=Ar(),s=Qo(n),i=Mi(r,s),i.callback=e??null,Ko(n,i,s),t.current.lanes=s,tf(t,s,r),qr(t,r),t}function kg(t,e,n,r){var s=e.current,i=Ar(),o=Qo(s);return n=RC(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ko(s,e,o),t!==null&&(ks(t,s,o,i),km(t,s,o)),o}function Pp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ZS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eE(t,e){ZS(t,e),(t=t.alternate)&&ZS(t,e)}function UU(){return null}var CC=typeof reportError=="function"?reportError:function(t){console.error(t)};function tE(t){this._internalRoot=t}Ng.prototype.render=tE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));kg(t,e,null,null)};Ng.prototype.unmount=tE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vl(function(){kg(null,t,null,null)}),e[ji]=null}};function Ng(t){this._internalRoot=t}Ng.prototype.unstable_scheduleHydration=function(t){if(t){var e=a1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Io.length&&e!==0&&e<Io[n].priority;n++);Io.splice(n,0,t),n===0&&c1(t)}};function nE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eb(){}function jU(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Pp(o);i.call(c)}}var o=PC(e,r,t,0,null,!1,!1,"",eb);return t._reactRootContainer=o,t[ji]=o.current,_h(t.nodeType===8?t.parentNode:t),vl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Pp(l);a.call(c)}}var l=Z0(t,0,!1,null,null,!1,!1,"",eb);return t._reactRootContainer=l,t[ji]=l.current,_h(t.nodeType===8?t.parentNode:t),vl(function(){kg(e,l,n,r)}),l}function Og(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Pp(o);a.call(l)}}kg(e,o,t,s)}else o=jU(n,e,t,s,r);return Pp(o)}i1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=kd(e.pendingLanes);n!==0&&(E0(e,n|1),qr(e,yn()),!(_t&6)&&(au=yn()+500,va()))}break;case 13:vl(function(){var r=$i(t,1);if(r!==null){var s=Ar();ks(r,t,1,s)}}),eE(t,1)}};I0=function(t){if(t.tag===13){var e=$i(t,134217728);if(e!==null){var n=Ar();ks(e,t,134217728,n)}eE(t,134217728)}};o1=function(t){if(t.tag===13){var e=Qo(t),n=$i(t,e);if(n!==null){var r=Ar();ks(n,t,e,r)}eE(t,e)}};a1=function(){return xt};l1=function(t,e){var n=xt;try{return xt=t,e()}finally{xt=n}};p_=function(t,e,n){switch(e){case"input":if(l_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Sg(r);if(!s)throw Error(le(90));UP(r),l_(r,s)}}}break;case"textarea":$P(t,n);break;case"select":e=n.value,e!=null&&Cc(t,!!n.multiple,e,!1)}};GP=Q0;QP=vl;var $U={usingClientEntryPoint:!1,Events:[rf,gc,Sg,HP,KP,Q0]},wd={findFiberByHostInstance:Ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BU={bundleType:wd.bundleType,version:wd.version,rendererPackageName:wd.rendererPackageName,rendererConfig:wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XP(t),t===null?null:t.stateNode},findFiberByHostInstance:wd.findFiberByHostInstance||UU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{wg=tm.inject(BU),ai=tm}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$U;as.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nE(e))throw Error(le(200));return FU(t,e,null,n)};as.createRoot=function(t,e){if(!nE(t))throw Error(le(299));var n=!1,r="",s=CC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Z0(t,1,!1,null,null,n,!1,r,s),t[ji]=e.current,_h(t.nodeType===8?t.parentNode:t),new tE(e)};as.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=XP(e),t=t===null?null:t.stateNode,t};as.flushSync=function(t){return vl(t)};as.hydrate=function(t,e,n){if(!Dg(e))throw Error(le(200));return Og(null,t,e,!0,n)};as.hydrateRoot=function(t,e,n){if(!nE(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=CC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PC(e,null,t,1,n??null,s,!1,i,o),t[ji]=e.current,_h(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ng(e)};as.render=function(t,e,n){if(!Dg(e))throw Error(le(200));return Og(null,t,e,!1,n)};as.unmountComponentAtNode=function(t){if(!Dg(t))throw Error(le(40));return t._reactRootContainer?(vl(function(){Og(null,null,t,!1,function(){t._reactRootContainer=null,t[ji]=null})}),!0):!1};as.unstable_batchedUpdates=Q0;as.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dg(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Og(t,e,n,!1,r)};as.version="18.3.1-next-f1338f8080-20240426";function kC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kC)}catch(t){console.error(t)}}kC(),kP.exports=as;var of=kP.exports;const NC=_P(of);var DC,tb=of;DC=tb.createRoot,tb.hydrateRoot;const zU="modulepreload",WU=function(t,e){return new URL(t,e).href},nb={},re=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=WU(c,r),c in nb)return;nb[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const p=o[E];if(p.href===c&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":zU,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((E,p)=>{m.addEventListener("load",E),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},qU=1,HU=1e6;let hv=0;function KU(){return hv=(hv+1)%Number.MAX_SAFE_INTEGER,hv.toString()}const fv=new Map,rb=t=>{if(fv.has(t))return;const e=setTimeout(()=>{fv.delete(t),Yd({type:"REMOVE_TOAST",toastId:t})},HU);fv.set(t,e)},GU=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,qU)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?rb(n):t.toasts.forEach(r=>{rb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Fm=[];let Um={toasts:[]};function Yd(t){Um=GU(Um,t),Fm.forEach(e=>{e(Um)})}function QU({...t}){const e=KU(),n=s=>Yd({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Yd({type:"DISMISS_TOAST",toastId:e});return Yd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function rE(){const[t,e]=S.useState(Um);return S.useEffect(()=>(Fm.push(e),()=>{const n=Fm.indexOf(e);n>-1&&Fm.splice(n,1)}),[t]),{...t,toast:QU,dismiss:n=>Yd({type:"DISMISS_TOAST",toastId:n})}}function Mt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function sb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function OC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=sb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():sb(t[s],null)}}}}function lr(...t){return S.useCallback(OC(...t),t)}function YU(t,e){const n=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return y.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Uu(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:f,children:m,...E}=h,p=((w=f==null?void 0:f[t])==null?void 0:w[l])||a,v=S.useMemo(()=>E,Object.values(E));return y.jsx(p.Provider,{value:v,children:m})};c.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[l])||a,E=S.useContext(m);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,JU(s,...e)]}function JU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Rh(t){const e=ZU(t),n=S.forwardRef((r,s)=>{const{children:i,...o}=r,a=S.Children.toArray(i),l=a.find(t4);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return y.jsx(e,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return y.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var XU=Rh("Slot");function ZU(t){const e=S.forwardRef((n,r)=>{const{children:s,...i}=n;if(S.isValidElement(s)){const o=r4(s),a=n4(i,s.props);return s.type!==S.Fragment&&(a.ref=r?OC(r,o):o),S.cloneElement(s,a)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var LC=Symbol("radix.slottable");function e4(t){const e=({children:n})=>y.jsx(y.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=LC,e}function t4(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===LC}function n4(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function r4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function s4(t){const e=t+"CollectionProvider",[n,r]=Uu(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:w}=p,_=F.useRef(null),I=F.useRef(new Map).current;return y.jsx(s,{scope:v,itemMap:I,collectionRef:_,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=Rh(a),c=F.forwardRef((p,v)=>{const{scope:w,children:_}=p,I=i(a,w),x=lr(v,I.collectionRef);return y.jsx(l,{ref:x,children:_})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Rh(d),m=F.forwardRef((p,v)=>{const{scope:w,children:_,...I}=p,x=F.useRef(null),P=lr(v,x),L=i(d,w);return F.useEffect(()=>(L.itemMap.set(x,{ref:x,...I}),()=>void L.itemMap.delete(x))),y.jsx(f,{[h]:"",ref:P,children:_})});m.displayName=d;function E(p){const v=i(t+"CollectionConsumer",p);return F.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const I=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((L,A)=>I.indexOf(L.ref.current)-I.indexOf(A.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},E,r]}var i4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xt=i4.reduce((t,e)=>{const n=Rh(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function MC(t,e){t&&of.flushSync(()=>t.dispatchEvent(e))}function pi(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function o4(t,e=globalThis==null?void 0:globalThis.document){const n=pi(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var a4="DismissableLayer",G_="dismissableLayer.update",l4="dismissableLayer.pointerDownOutside",c4="dismissableLayer.focusOutside",ib,VC=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lg=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(VC),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=S.useState({}),E=lr(e,A=>h(A)),p=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(v),_=d?p.indexOf(d):-1,I=c.layersWithOutsidePointerEventsDisabled.size>0,x=_>=w,P=d4(A=>{const T=A.target,R=[...c.branches].some(C=>C.contains(T));!x||R||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},f),L=h4(A=>{const T=A.target;[...c.branches].some(C=>C.contains(T))||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},f);return o4(A=>{_===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ib=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),ob(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ib)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),ob())},[d,c]),S.useEffect(()=>{const A=()=>m({});return document.addEventListener(G_,A),()=>document.removeEventListener(G_,A)},[]),y.jsx(Xt.div,{...l,ref:E,style:{pointerEvents:I?x?"auto":"none":void 0,...t.style},onFocusCapture:Mt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Mt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Mt(t.onPointerDownCapture,P.onPointerDownCapture)})});Lg.displayName=a4;var u4="DismissableLayerBranch",FC=S.forwardRef((t,e)=>{const n=S.useContext(VC),r=S.useRef(null),s=lr(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Xt.div,{...t,ref:s})});FC.displayName=u4;function d4(t,e=globalThis==null?void 0:globalThis.document){const n=pi(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){UC(l4,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function h4(t,e=globalThis==null?void 0:globalThis.document){const n=pi(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&UC(c4,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ob(){const t=new CustomEvent(G_);document.dispatchEvent(t)}function UC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?MC(s,i):s.dispatchEvent(i)}var f4=Lg,m4=FC,zi=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},p4="Portal",sE=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);zi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?NC.createPortal(y.jsx(Xt.div,{...r,ref:e}),o):null});sE.displayName=p4;function g4(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var Ml=t=>{const{present:e,children:n}=t,r=y4(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=lr(r.ref,v4(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};Ml.displayName="Presence";function y4(t){const[e,n]=S.useState(),r=S.useRef(null),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=g4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=nm(r.current);i.current=a==="mounted"?c:"none"},[a]),zi(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=nm(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),zi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const p=nm(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&p&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=m=>{m.target===e&&(i.current=nm(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function nm(t){return(t==null?void 0:t.animationName)||"none"}function v4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _4=h0[" useInsertionEffect ".trim().toString()]||zi;function iE({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=w4({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const f=E4(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function w4({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),s=S.useRef(n),i=S.useRef(e);return _4(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function E4(t){return typeof t=="function"}var I4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),T4="VisuallyHidden",Mg=S.forwardRef((t,e)=>y.jsx(Xt.span,{...t,ref:e,style:{...I4,...t.style}}));Mg.displayName=T4;var S4=Mg,oE="ToastProvider",[aE,b4,A4]=s4("Toast"),[jC]=Uu("Toast",[A4]),[x4,Vg]=jC(oE),$C=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=S.useState(null),[c,d]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${oE}\`. Expected non-empty \`string\`.`),y.jsx(aE.Provider,{scope:e,children:y.jsx(x4,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>d(m=>m+1),[]),onToastRemove:S.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};$C.displayName=oE;var BC="ToastViewport",R4=["F8"],Q_="toast.viewportPause",Y_="toast.viewportResume",zC=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=R4,label:s="Notifications ({hotkey})",...i}=t,o=Vg(BC,n),a=b4(n),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=lr(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;S.useEffect(()=>{const v=w=>{var I;r.length!==0&&r.every(x=>w[x]||w.code===x)&&((I=h.current)==null||I.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),S.useEffect(()=>{const v=l.current,w=h.current;if(E&&v&&w){const _=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(Q_);w.dispatchEvent(L),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(Y_);w.dispatchEvent(L),o.isClosePausedRef.current=!1}},x=L=>{!v.contains(L.relatedTarget)&&I()},P=()=>{v.contains(document.activeElement)||I()};return v.addEventListener("focusin",_),v.addEventListener("focusout",x),v.addEventListener("pointermove",_),v.addEventListener("pointerleave",P),window.addEventListener("blur",_),window.addEventListener("focus",I),()=>{v.removeEventListener("focusin",_),v.removeEventListener("focusout",x),v.removeEventListener("pointermove",_),v.removeEventListener("pointerleave",P),window.removeEventListener("blur",_),window.removeEventListener("focus",I)}}},[E,o.isClosePausedRef]);const p=S.useCallback(({tabbingDirection:v})=>{const _=a().map(I=>{const x=I.ref.current,P=[x,...$4(x)];return v==="forwards"?P:P.reverse()});return(v==="forwards"?_.reverse():_).flat()},[a]);return S.useEffect(()=>{const v=h.current;if(v){const w=_=>{var P,L,A;const I=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!I){const T=document.activeElement,R=_.shiftKey;if(_.target===v&&R){(P=c.current)==null||P.focus();return}const O=p({tabbingDirection:R?"backwards":"forwards"}),k=O.findIndex(B=>B===T);mv(O.slice(k+1))?_.preventDefault():R?(L=c.current)==null||L.focus():(A=d.current)==null||A.focus()}};return v.addEventListener("keydown",w),()=>v.removeEventListener("keydown",w)}},[a,p]),y.jsxs(m4,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&y.jsx(J_,{ref:c,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});mv(v)}}),y.jsx(aE.Slot,{scope:n,children:y.jsx(Xt.ol,{tabIndex:-1,...i,ref:f})}),E&&y.jsx(J_,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});mv(v)}})]})});zC.displayName=BC;var WC="ToastFocusProxy",J_=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Vg(WC,n);return y.jsx(Mg,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});J_.displayName=WC;var af="Toast",P4="toast.swipeStart",C4="toast.swipeMove",k4="toast.swipeCancel",N4="toast.swipeEnd",qC=S.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=iE({prop:r,defaultProp:s??!0,onChange:i,caller:af});return y.jsx(Ml,{present:n||a,children:y.jsx(L4,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:pi(t.onPause),onResume:pi(t.onResume),onSwipeStart:Mt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Mt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Mt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Mt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});qC.displayName=af;var[D4,O4]=jC(af,{onClose(){}}),L4=S.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...E}=t,p=Vg(af,n),[v,w]=S.useState(null),_=lr(e,B=>w(B)),I=S.useRef(null),x=S.useRef(null),P=s||p.duration,L=S.useRef(0),A=S.useRef(P),T=S.useRef(0),{onToastAdd:R,onToastRemove:C}=p,D=pi(()=>{var ce;(v==null?void 0:v.contains(document.activeElement))&&((ce=p.viewport)==null||ce.focus()),o()}),O=S.useCallback(B=>{!B||B===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(D,B))},[D]);S.useEffect(()=>{const B=p.viewport;if(B){const ce=()=>{O(A.current),c==null||c()},de=()=>{const Se=new Date().getTime()-L.current;A.current=A.current-Se,window.clearTimeout(T.current),l==null||l()};return B.addEventListener(Q_,de),B.addEventListener(Y_,ce),()=>{B.removeEventListener(Q_,de),B.removeEventListener(Y_,ce)}}},[p.viewport,P,l,c,O]),S.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(P)},[i,P,p.isClosePausedRef,O]),S.useEffect(()=>(R(),()=>C()),[R,C]);const k=S.useMemo(()=>v?XC(v):null,[v]);return p.viewport?y.jsxs(y.Fragment,{children:[k&&y.jsx(M4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:k}),y.jsx(D4,{scope:n,onClose:D,children:of.createPortal(y.jsx(aE.ItemSlot,{scope:n,children:y.jsx(f4,{asChild:!0,onEscapeKeyDown:Mt(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||D(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(Xt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...E,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Mt(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Mt(t.onPointerDown,B=>{B.button===0&&(I.current={x:B.clientX,y:B.clientY})}),onPointerMove:Mt(t.onPointerMove,B=>{if(!I.current)return;const ce=B.clientX-I.current.x,de=B.clientY-I.current.y,Se=!!x.current,$=["left","right"].includes(p.swipeDirection),W=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Z=$?W(0,ce):0,we=$?0:W(0,de),Ee=B.pointerType==="touch"?10:2,se={x:Z,y:we},_e={originalEvent:B,delta:se};Se?(x.current=se,rm(C4,h,_e,{discrete:!1})):ab(se,p.swipeDirection,Ee)?(x.current=se,rm(P4,d,_e,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(ce)>Ee||Math.abs(de)>Ee)&&(I.current=null)}),onPointerUp:Mt(t.onPointerUp,B=>{const ce=x.current,de=B.target;if(de.hasPointerCapture(B.pointerId)&&de.releasePointerCapture(B.pointerId),x.current=null,I.current=null,ce){const Se=B.currentTarget,$={originalEvent:B,delta:ce};ab(ce,p.swipeDirection,p.swipeThreshold)?rm(N4,m,$,{discrete:!0}):rm(k4,f,$,{discrete:!0}),Se.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),M4=t=>{const{__scopeToast:e,children:n,...r}=t,s=Vg(af,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return U4(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:y.jsx(sE,{asChild:!0,children:y.jsx(Mg,{...r,children:i&&y.jsxs(y.Fragment,{children:[s.label," ",n]})})})},V4="ToastTitle",HC=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return y.jsx(Xt.div,{...r,ref:e})});HC.displayName=V4;var F4="ToastDescription",KC=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return y.jsx(Xt.div,{...r,ref:e})});KC.displayName=F4;var GC="ToastAction",QC=S.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?y.jsx(JC,{altText:n,asChild:!0,children:y.jsx(lE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${GC}\`. Expected non-empty \`string\`.`),null)});QC.displayName=GC;var YC="ToastClose",lE=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=O4(YC,n);return y.jsx(JC,{asChild:!0,children:y.jsx(Xt.button,{type:"button",...r,ref:e,onClick:Mt(t.onClick,s.onClose)})})});lE.displayName=YC;var JC=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return y.jsx(Xt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function XC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),j4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...XC(r))}}),e}function rm(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?MC(s,i):s.dispatchEvent(i)}var ab=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function U4(t=()=>{}){const e=pi(t);zi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function j4(t){return t.nodeType===t.ELEMENT_NODE}function $4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function mv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var B4=$C,ZC=zC,ek=qC,tk=HC,nk=KC,rk=QC,sk=lE;function ik(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ik(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ok(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ik(t))&&(r&&(r+=" "),r+=e);return r}const lb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cb=ok,cE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return cb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=lb(d)||lb(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(E=>{let[p,v]=E;return Array.isArray(v)?v.includes({...i,...a}[p]):{...i,...a}[p]===v})?[...c,h,f]:c},[]);return cb(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),ub=t=>{const e=W4(t);return e.charAt(0).toUpperCase()+e.slice(1)},ak=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),q4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...H4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ak("lucide",s),...!i&&!q4(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=(t,e)=>{const n=S.forwardRef(({className:r,...s},i)=>S.createElement(K4,{ref:i,iconNode:e,className:ak(`lucide-${z4(ub(t))}`,`lucide-${t}`,r),...s}));return n.displayName=ub(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Q4=kt("arrow-down",G4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],lk=kt("arrow-right",Y4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],X4=kt("arrow-up-down",J4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],ej=kt("badge-percent",Z4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nj=kt("check",tj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sj=kt("clock",rj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],oj=kt("credit-card",ij);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ck=kt("eye-off",aj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uk=kt("eye",lj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],uj=kt("file-text",cj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hj=kt("house",dj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dk=kt("lock",fj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],db=kt("log-out",mj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],X_=kt("mail",pj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],yj=kt("message-circle",gj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M5 12h14",key:"1ays0h"}]],_j=kt("minus",vj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hb=kt("plus",wj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],fb=kt("receipt",Ej);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],uE=kt("refresh-ccw",Ij);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mb=kt("settings",Tj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],hk=kt("shield",Sj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Aj=kt("square",bj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Rj=kt("store",xj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pb=kt("trending-up",Pj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fk=kt("triangle-alert",Cj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Nj=kt("user",kj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Oj=kt("wrench",Dj);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dE=kt("x",Lj),hE="-",Mj=t=>{const e=Fj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(hE);return a[0]===""&&a.length!==1&&a.shift(),mk(a,e)||Vj(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},mk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?mk(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(hE);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},gb=/^\[(.+)\]$/,Vj=t=>{if(gb.test(t)){const e=gb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Fj=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return jj(Object.entries(t.classGroups),n).forEach(([i,o])=>{Z_(o,r,i,e)}),r},Z_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:yb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Uj(s)){Z_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Z_(o,yb(e,i),n,r)})})},yb=(t,e)=>{let n=t;return e.split(hE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Uj=t=>t.isThemeGetter,jj=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,$j=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},pk="!",Bj=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let w=a[v];if(c===0){if(w===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(w==="/"){h=v;continue}}w==="["?c++:w==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(pk),E=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:E,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:o}):o},zj=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Wj=t=>({cache:$j(t.cacheSize),parseClassName:Bj(t),...Mj(t)}),qj=/\s+/,Hj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(qj);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let E=!!m,p=r(E?f.substring(0,m):f);if(!p){if(!E){a=c+(a.length>0?" "+a:a);continue}if(p=r(f),!p){a=c+(a.length>0?" "+a:a);continue}E=!1}const v=zj(d).join(":"),w=h?v+pk:v,_=w+p;if(i.includes(_))continue;i.push(_);const I=s(p,E);for(let x=0;x<I.length;++x){const P=I[x];i.push(w+P)}a=c+(a.length>0?" "+a:a)}return a};function Kj(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=gk(e))&&(r&&(r+=" "),r+=n);return r}const gk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=gk(t[r]))&&(n&&(n+=" "),n+=e);return n};function Gj(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=Wj(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=Hj(l,n);return s(l,d),d}return function(){return i(Kj.apply(null,arguments))}}const Ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},yk=/^\[(?:([a-z-]+):)?(.+)\]$/i,Qj=/^\d+\/\d+$/,Yj=new Set(["px","full","screen"]),Jj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,e$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,t$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ti=t=>Mc(t)||Yj.has(t)||Qj.test(t),uo=t=>ju(t,"length",c$),Mc=t=>!!t&&!Number.isNaN(Number(t)),pv=t=>ju(t,"number",Mc),Ed=t=>!!t&&Number.isInteger(Number(t)),n$=t=>t.endsWith("%")&&Mc(t.slice(0,-1)),Xe=t=>yk.test(t),ho=t=>Jj.test(t),r$=new Set(["length","size","percentage"]),s$=t=>ju(t,r$,vk),i$=t=>ju(t,"position",vk),o$=new Set(["image","url"]),a$=t=>ju(t,o$,d$),l$=t=>ju(t,"",u$),Id=()=>!0,ju=(t,e,n)=>{const r=yk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},c$=t=>Xj.test(t)&&!Zj.test(t),vk=()=>!1,u$=t=>e$.test(t),d$=t=>t$.test(t),h$=()=>{const t=Ut("colors"),e=Ut("spacing"),n=Ut("blur"),r=Ut("brightness"),s=Ut("borderColor"),i=Ut("borderRadius"),o=Ut("borderSpacing"),a=Ut("borderWidth"),l=Ut("contrast"),c=Ut("grayscale"),d=Ut("hueRotate"),h=Ut("invert"),f=Ut("gap"),m=Ut("gradientColorStops"),E=Ut("gradientColorStopPositions"),p=Ut("inset"),v=Ut("margin"),w=Ut("opacity"),_=Ut("padding"),I=Ut("saturate"),x=Ut("scale"),P=Ut("sepia"),L=Ut("skew"),A=Ut("space"),T=Ut("translate"),R=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Xe,e],O=()=>[Xe,e],k=()=>["",Ti,uo],B=()=>["auto",Mc,Xe],ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["solid","dashed","dotted","double","none"],Se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Xe],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[Mc,Xe];return{cacheSize:500,separator:":",theme:{colors:[Id],spacing:[Ti,uo],blur:["none","",ho,Xe],brightness:we(),borderColor:[t],borderRadius:["none","","full",ho,Xe],borderSpacing:O(),borderWidth:k(),contrast:we(),grayscale:W(),hueRotate:we(),invert:W(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[n$,uo],inset:D(),margin:D(),opacity:we(),padding:O(),saturate:we(),scale:we(),sepia:W(),skew:we(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[ho]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ce(),Xe]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ed,Xe]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Ed,Xe]}],"grid-cols":[{"grid-cols":[Id]}],"col-start-end":[{col:["auto",{span:["full",Ed,Xe]},Xe]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Id]}],"row-start-end":[{row:["auto",{span:[Ed,Xe]},Xe]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,e]}],"min-w":[{"min-w":[Xe,e,"min","max","fit"]}],"max-w":[{"max-w":[Xe,e,"none","full","min","max","fit","prose",{screen:[ho]},ho]}],h:[{h:[Xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ho,uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pv]}],"font-family":[{font:[Id]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",Mc,pv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ti,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ti,uo]}],"underline-offset":[{"underline-offset":["auto",Ti,Xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ce(),i$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",s$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},a$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...de(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:de()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...de()]}],"outline-offset":[{"outline-offset":[Ti,Xe]}],"outline-w":[{outline:[Ti,uo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ti,uo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ho,l$]}],"shadow-color":[{shadow:[Id]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Se()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ho,Xe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[I]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Ed,Xe]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ti,uo,pv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},f$=Gj(h$);function Jt(...t){return f$(ok(t))}const m$=B4,_k=S.forwardRef(({className:t,...e},n)=>y.jsx(ZC,{ref:n,className:Jt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));_k.displayName=ZC.displayName;const p$=cE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wk=S.forwardRef(({className:t,variant:e,...n},r)=>y.jsx(ek,{ref:r,className:Jt(p$({variant:e}),t),...n}));wk.displayName=ek.displayName;const g$=S.forwardRef(({className:t,...e},n)=>y.jsx(rk,{ref:n,className:Jt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));g$.displayName=rk.displayName;const Ek=S.forwardRef(({className:t,...e},n)=>y.jsx(sk,{ref:n,className:Jt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:y.jsx(dE,{className:"h-4 w-4"})}));Ek.displayName=sk.displayName;const Ik=S.forwardRef(({className:t,...e},n)=>y.jsx(tk,{ref:n,className:Jt("text-sm font-semibold",t),...e}));Ik.displayName=tk.displayName;const Tk=S.forwardRef(({className:t,...e},n)=>y.jsx(nk,{ref:n,className:Jt("text-sm opacity-90",t),...e}));Tk.displayName=nk.displayName;function y$(){const{toasts:t}=rE();return y.jsxs(m$,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return y.jsxs(wk,{...i,children:[y.jsxs("div",{className:"grid gap-1",children:[n&&y.jsx(Ik,{children:n}),r&&y.jsx(Tk,{children:r})]}),s,y.jsx(Ek,{})]},e)}),y.jsx(_k,{})]})}var Cp=["light","dark"],fE="(prefers-color-scheme: dark)",v$=typeof window>"u",mE=S.createContext(void 0),_$={setTheme:t=>{},themes:[]},Sk=()=>{var t;return(t=S.useContext(mE))!=null?t:_$},w$=t=>S.useContext(mE)?t.children:S.createElement(I$,{...t}),E$=["light","dark"],I$=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=E$,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=S.useState(()=>vb(s,o)),[m,E]=S.useState(()=>vb(s)),p=l?Object.values(l):i,v=S.useCallback(x=>{let P=x;if(!P)return;x==="system"&&n&&(P=_b());let L=l?l[P]:P,A=e?S$():null,T=document.documentElement;if(a==="class"?(T.classList.remove(...p),L&&T.classList.add(L)):L?T.setAttribute(a,L):T.removeAttribute(a),r){let R=Cp.includes(o)?o:null,C=Cp.includes(P)?P:R;T.style.colorScheme=C}A==null||A()},[]),w=S.useCallback(x=>{let P=typeof x=="function"?x(x):x;f(P);try{localStorage.setItem(s,P)}catch{}},[t]),_=S.useCallback(x=>{let P=_b(x);E(P),h==="system"&&n&&!t&&v("system")},[h,t]);S.useEffect(()=>{let x=window.matchMedia(fE);return x.addListener(_),_(x),()=>x.removeListener(_)},[_]),S.useEffect(()=>{let x=P=>{if(P.key!==s)return;let L=P.newValue||o;w(L)};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[w]),S.useEffect(()=>{v(t??h)},[t,h]);let I=S.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,w,t,m,n,i]);return S.createElement(mE.Provider,{value:I},S.createElement(T$,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:p,nonce:d}),c)},T$=S.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Cp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(E,p=!1,v=!0)=>{let w=o?o[E]:E,_=p?E+"|| ''":`'${w}'`,I="";return s&&v&&!p&&Cp.includes(E)&&(I+=`d.style.colorScheme = '${E}';`),n==="class"?p||w?I+=`c.add(${_})`:I+="null":w&&(I+=`d[s](n,${_})`),I},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${fE}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),vb=(t,e)=>{if(v$)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},S$=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},_b=t=>(t||(t=window.matchMedia(fE)),t.matches?"dark":"light"),b$=t=>{switch(t){case"success":return R$;case"info":return C$;case"warning":return P$;case"error":return k$;default:return null}},A$=Array(12).fill(0),x$=({visible:t,className:e})=>F.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},F.createElement("div",{className:"sonner-spinner"},A$.map((n,r)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),R$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),P$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),C$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),k$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),N$=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),D$=()=>{let[t,e]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},ew=1,O$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ew++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],F.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(M$(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||ew++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Dr=new O$,L$=(t,e)=>{let n=(e==null?void 0:e.id)||ew++;return Dr.addToast({title:t,...e,id:n}),n},M$=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",V$=L$,F$=()=>Dr.toasts,U$=()=>Dr.getActiveToasts(),Et=Object.assign(V$,{success:Dr.success,info:Dr.info,warning:Dr.warning,error:Dr.error,custom:Dr.custom,message:Dr.message,promise:Dr.promise,dismiss:Dr.dismiss,loading:Dr.loading},{getHistory:F$,getToasts:U$});function j$(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}j$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function sm(t){return t.label!==void 0}var $$=3,B$="32px",z$="16px",wb=4e3,W$=356,q$=14,H$=20,K$=200;function Es(...t){return t.filter(Boolean).join(" ")}function G$(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Q$=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:E,interacting:p,setHeights:v,visibleToasts:w,heights:_,index:I,toasts:x,expanded:P,removeToast:L,defaultRichColors:A,closeButton:T,style:R,cancelButtonStyle:C,actionButtonStyle:D,className:O="",descriptionClassName:k="",duration:B,position:ce,gap:de,loadingIcon:Se,expandByDefault:$,classNames:W,icons:Z,closeButtonAriaLabel:we="Close toast",pauseWhenPageIsHidden:Ee}=t,[se,_e]=F.useState(null),[j,Qe]=F.useState(null),[Fe,Pn]=F.useState(!1),[Bn,In]=F.useState(!1),[Tn,Cn]=F.useState(!1),[Nt,ft]=F.useState(!1),[at,cr]=F.useState(!1),[_r,zn]=F.useState(0),[mt,en]=F.useState(0),wr=F.useRef(m.duration||B||wb),no=F.useRef(null),Pr=F.useRef(null),Pa=I===0,_s=I+1<=w,kn=m.type,cs=m.dismissible!==!1,Ca=m.className||"",ro=m.descriptionClassName||"",tn=F.useMemo(()=>_.findIndex(J=>J.toastId===m.id)||0,[_,m.id]),ka=F.useMemo(()=>{var J;return(J=m.closeButton)!=null?J:T},[m.closeButton,T]),so=F.useMemo(()=>m.duration||B||wb,[m.duration,B]),Cr=F.useRef(0),us=F.useRef(0),Ii=F.useRef(0),er=F.useRef(null),[Q,H]=ce.split("-"),q=F.useMemo(()=>_.reduce((J,oe,X)=>X>=tn?J:J+oe.height,0),[_,tn]),ie=D$(),te=m.invert||f,ee=kn==="loading";us.current=F.useMemo(()=>tn*de+q,[tn,q]),F.useEffect(()=>{wr.current=so},[so]),F.useEffect(()=>{Pn(!0)},[]),F.useEffect(()=>{let J=Pr.current;if(J){let oe=J.getBoundingClientRect().height;return en(oe),v(X=>[{toastId:m.id,height:oe,position:m.position},...X]),()=>v(X=>X.filter(ae=>ae.toastId!==m.id))}},[v,m.id]),F.useLayoutEffect(()=>{if(!Fe)return;let J=Pr.current,oe=J.style.height;J.style.height="auto";let X=J.getBoundingClientRect().height;J.style.height=oe,en(X),v(ae=>ae.find(ve=>ve.toastId===m.id)?ae.map(ve=>ve.toastId===m.id?{...ve,height:X}:ve):[{toastId:m.id,height:X,position:m.position},...ae])},[Fe,m.title,m.description,v,m.id]);let he=F.useCallback(()=>{In(!0),zn(us.current),v(J=>J.filter(oe=>oe.toastId!==m.id)),setTimeout(()=>{L(m)},K$)},[m,L,v,us]);F.useEffect(()=>{if(m.promise&&kn==="loading"||m.duration===1/0||m.type==="loading")return;let J;return P||p||Ee&&ie?(()=>{if(Ii.current<Cr.current){let oe=new Date().getTime()-Cr.current;wr.current=wr.current-oe}Ii.current=new Date().getTime()})():wr.current!==1/0&&(Cr.current=new Date().getTime(),J=setTimeout(()=>{var oe;(oe=m.onAutoClose)==null||oe.call(m,m),he()},wr.current)),()=>clearTimeout(J)},[P,p,m,kn,Ee,ie,he]),F.useEffect(()=>{m.delete&&he()},[he,m.delete]);function ue(){var J,oe,X;return Z!=null&&Z.loading?F.createElement("div",{className:Es(W==null?void 0:W.loader,(J=m==null?void 0:m.classNames)==null?void 0:J.loader,"sonner-loader"),"data-visible":kn==="loading"},Z.loading):Se?F.createElement("div",{className:Es(W==null?void 0:W.loader,(oe=m==null?void 0:m.classNames)==null?void 0:oe.loader,"sonner-loader"),"data-visible":kn==="loading"},Se):F.createElement(x$,{className:Es(W==null?void 0:W.loader,(X=m==null?void 0:m.classNames)==null?void 0:X.loader),visible:kn==="loading"})}return F.createElement("li",{tabIndex:0,ref:Pr,className:Es(O,Ca,W==null?void 0:W.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,W==null?void 0:W.default,W==null?void 0:W[kn],(n=m==null?void 0:m.classNames)==null?void 0:n[kn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:A,"data-styled":!(m.jsx||m.unstyled||E),"data-mounted":Fe,"data-promise":!!m.promise,"data-swiped":at,"data-removed":Bn,"data-visible":_s,"data-y-position":Q,"data-x-position":H,"data-index":I,"data-front":Pa,"data-swiping":Tn,"data-dismissible":cs,"data-type":kn,"data-invert":te,"data-swipe-out":Nt,"data-swipe-direction":j,"data-expanded":!!(P||$&&Fe),style:{"--index":I,"--toasts-before":I,"--z-index":x.length-I,"--offset":`${Bn?_r:us.current}px`,"--initial-height":$?"auto":`${mt}px`,...R,...m.style},onDragEnd:()=>{Cn(!1),_e(null),er.current=null},onPointerDown:J=>{ee||!cs||(no.current=new Date,zn(us.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(Cn(!0),er.current={x:J.clientX,y:J.clientY}))},onPointerUp:()=>{var J,oe,X,ae;if(Nt||!cs)return;er.current=null;let ve=Number(((J=Pr.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pe=Number(((oe=Pr.current)==null?void 0:oe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ge=new Date().getTime()-((X=no.current)==null?void 0:X.getTime()),Le=se==="x"?ve:pe,He=Math.abs(Le)/ge;if(Math.abs(Le)>=H$||He>.11){zn(us.current),(ae=m.onDismiss)==null||ae.call(m,m),Qe(se==="x"?ve>0?"right":"left":pe>0?"down":"up"),he(),ft(!0),cr(!1);return}Cn(!1),_e(null)},onPointerMove:J=>{var oe,X,ae,ve;if(!er.current||!cs||((oe=window.getSelection())==null?void 0:oe.toString().length)>0)return;let pe=J.clientY-er.current.y,ge=J.clientX-er.current.x,Le=(X=t.swipeDirections)!=null?X:G$(ce);!se&&(Math.abs(ge)>1||Math.abs(pe)>1)&&_e(Math.abs(ge)>Math.abs(pe)?"x":"y");let He={x:0,y:0};se==="y"?(Le.includes("top")||Le.includes("bottom"))&&(Le.includes("top")&&pe<0||Le.includes("bottom")&&pe>0)&&(He.y=pe):se==="x"&&(Le.includes("left")||Le.includes("right"))&&(Le.includes("left")&&ge<0||Le.includes("right")&&ge>0)&&(He.x=ge),(Math.abs(He.x)>0||Math.abs(He.y)>0)&&cr(!0),(ae=Pr.current)==null||ae.style.setProperty("--swipe-amount-x",`${He.x}px`),(ve=Pr.current)==null||ve.style.setProperty("--swipe-amount-y",`${He.y}px`)}},ka&&!m.jsx?F.createElement("button",{"aria-label":we,"data-disabled":ee,"data-close-button":!0,onClick:ee||!cs?()=>{}:()=>{var J;he(),(J=m.onDismiss)==null||J.call(m,m)},className:Es(W==null?void 0:W.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=Z==null?void 0:Z.close)!=null?i:N$):null,m.jsx||S.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:F.createElement(F.Fragment,null,kn||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:Es(W==null?void 0:W.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ue():null,m.type!=="loading"?m.icon||(Z==null?void 0:Z[kn])||b$(kn):null):null,F.createElement("div",{"data-content":"",className:Es(W==null?void 0:W.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},F.createElement("div",{"data-title":"",className:Es(W==null?void 0:W.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?F.createElement("div",{"data-description":"",className:Es(k,ro,W==null?void 0:W.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),S.isValidElement(m.cancel)?m.cancel:m.cancel&&sm(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||C,onClick:J=>{var oe,X;sm(m.cancel)&&cs&&((X=(oe=m.cancel).onClick)==null||X.call(oe,J),he())},className:Es(W==null?void 0:W.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,S.isValidElement(m.action)?m.action:m.action&&sm(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||D,onClick:J=>{var oe,X;sm(m.action)&&((X=(oe=m.action).onClick)==null||X.call(oe,J),!J.defaultPrevented&&he())},className:Es(W==null?void 0:W.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function Eb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Y$(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?z$:B$;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var J$=S.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:E=$$,toastOptions:p,dir:v=Eb(),gap:w=q$,loadingIcon:_,icons:I,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:P}=t,[L,A]=F.useState([]),T=F.useMemo(()=>Array.from(new Set([r].concat(L.filter(Ee=>Ee.position).map(Ee=>Ee.position)))),[L,r]),[R,C]=F.useState([]),[D,O]=F.useState(!1),[k,B]=F.useState(!1),[ce,de]=F.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Se=F.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=F.useRef(null),Z=F.useRef(!1),we=F.useCallback(Ee=>{A(se=>{var _e;return(_e=se.find(j=>j.id===Ee.id))!=null&&_e.delete||Dr.dismiss(Ee.id),se.filter(({id:j})=>j!==Ee.id)})},[]);return F.useEffect(()=>Dr.subscribe(Ee=>{if(Ee.dismiss){A(se=>se.map(_e=>_e.id===Ee.id?{..._e,delete:!0}:_e));return}setTimeout(()=>{NC.flushSync(()=>{A(se=>{let _e=se.findIndex(j=>j.id===Ee.id);return _e!==-1?[...se.slice(0,_e),{...se[_e],...Ee},...se.slice(_e+1)]:[Ee,...se]})})})}),[]),F.useEffect(()=>{if(d!=="system"){de(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?de("dark"):de("light")),typeof window>"u")return;let Ee=window.matchMedia("(prefers-color-scheme: dark)");try{Ee.addEventListener("change",({matches:se})=>{de(se?"dark":"light")})}catch{Ee.addListener(({matches:_e})=>{try{de(_e?"dark":"light")}catch(j){console.error(j)}})}},[d]),F.useEffect(()=>{L.length<=1&&O(!1)},[L]),F.useEffect(()=>{let Ee=se=>{var _e,j;s.every(Qe=>se[Qe]||se.code===Qe)&&(O(!0),(_e=Se.current)==null||_e.focus()),se.code==="Escape"&&(document.activeElement===Se.current||(j=Se.current)!=null&&j.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",Ee),()=>document.removeEventListener("keydown",Ee)},[s]),F.useEffect(()=>{if(Se.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,Z.current=!1)}},[Se.current]),F.createElement("section",{ref:e,"aria-label":`${x} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((Ee,se)=>{var _e;let[j,Qe]=Ee.split("-");return L.length?F.createElement("ol",{key:Ee,dir:v==="auto"?Eb():v,tabIndex:-1,ref:Se,className:a,"data-sonner-toaster":!0,"data-theme":ce,"data-y-position":j,"data-lifted":D&&L.length>1&&!i,"data-x-position":Qe,style:{"--front-toast-height":`${((_e=R[0])==null?void 0:_e.height)||0}px`,"--width":`${W$}px`,"--gap":`${w}px`,...m,...Y$(l,c)},onBlur:Fe=>{Z.current&&!Fe.currentTarget.contains(Fe.relatedTarget)&&(Z.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:Fe=>{Fe.target instanceof HTMLElement&&Fe.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,W.current=Fe.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{k||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Fe=>{Fe.target instanceof HTMLElement&&Fe.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},L.filter(Fe=>!Fe.position&&se===0||Fe.position===Ee).map((Fe,Pn)=>{var Bn,In;return F.createElement(Q$,{key:Fe.id,icons:I,index:Pn,toast:Fe,defaultRichColors:h,duration:(Bn=p==null?void 0:p.duration)!=null?Bn:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:E,closeButton:(In=p==null?void 0:p.closeButton)!=null?In:o,interacting:k,position:Ee,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:we,toasts:L.filter(Tn=>Tn.position==Fe.position),heights:R.filter(Tn=>Tn.position==Fe.position),setHeights:C,expandByDefault:i,gap:w,loadingIcon:_,expanded:D,pauseWhenPageIsHidden:P,swipeDirections:t.swipeDirections})})):null}))});const X$=({...t})=>{const{theme:e="system"}=Sk();return y.jsx(J$,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Z$=h0[" useId ".trim().toString()]||(()=>{}),e3=0;function gv(t){const[e,n]=S.useState(Z$());return zi(()=>{n(r=>r??String(e3++))},[t]),t||(e?`radix-${e}`:"")}const t3=["top","right","bottom","left"],oa=Math.min,Jr=Math.max,kp=Math.round,im=Math.floor,ci=t=>({x:t,y:t}),n3={left:"right",right:"left",bottom:"top",top:"bottom"},r3={start:"end",end:"start"};function tw(t,e,n){return Jr(t,oa(e,n))}function Wi(t,e){return typeof t=="function"?t(e):t}function qi(t){return t.split("-")[0]}function $u(t){return t.split("-")[1]}function pE(t){return t==="x"?"y":"x"}function gE(t){return t==="y"?"height":"width"}const s3=new Set(["top","bottom"]);function ni(t){return s3.has(qi(t))?"y":"x"}function yE(t){return pE(ni(t))}function i3(t,e,n){n===void 0&&(n=!1);const r=$u(t),s=yE(t),i=gE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Np(o)),[o,Np(o)]}function o3(t){const e=Np(t);return[nw(t),e,nw(e)]}function nw(t){return t.replace(/start|end/g,e=>r3[e])}const Ib=["left","right"],Tb=["right","left"],a3=["top","bottom"],l3=["bottom","top"];function c3(t,e,n){switch(t){case"top":case"bottom":return n?e?Tb:Ib:e?Ib:Tb;case"left":case"right":return e?a3:l3;default:return[]}}function u3(t,e,n,r){const s=$u(t);let i=c3(qi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(nw)))),i}function Np(t){return t.replace(/left|right|bottom|top/g,e=>n3[e])}function d3(t){return{top:0,right:0,bottom:0,left:0,...t}}function bk(t){return typeof t!="number"?d3(t):{top:t,right:t,bottom:t,left:t}}function Dp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Sb(t,e,n){let{reference:r,floating:s}=t;const i=ni(e),o=yE(e),a=gE(o),l=qi(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch($u(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const h3=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Sb(c,r,l),f=r,m={},E=0;for(let p=0;p<a.length;p++){const{name:v,fn:w}=a[p],{x:_,y:I,data:x,reset:P}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=_??d,h=I??h,m={...m,[v]:{...m[v],...x}},P&&E<=50&&(E++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(c=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:d,y:h}=Sb(c,f,l)),p=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Ph(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Wi(e,t),E=bk(m),v=a[f?h==="floating"?"reference":"floating":h],w=Dp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},P=Dp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:I,strategy:l}):_);return{top:(w.top-P.top+E.top)/x.y,bottom:(P.bottom-w.bottom+E.bottom)/x.y,left:(w.left-P.left+E.left)/x.x,right:(P.right-w.right+E.right)/x.x}}const f3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Wi(t,e)||{};if(c==null)return{};const h=bk(d),f={x:n,y:r},m=yE(s),E=gE(m),p=await o.getDimensions(c),v=m==="y",w=v?"top":"left",_=v?"bottom":"right",I=v?"clientHeight":"clientWidth",x=i.reference[E]+i.reference[m]-f[m]-i.floating[E],P=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=L?L[I]:0;(!A||!await(o.isElement==null?void 0:o.isElement(L)))&&(A=a.floating[I]||i.floating[E]);const T=x/2-P/2,R=A/2-p[E]/2-1,C=oa(h[w],R),D=oa(h[_],R),O=C,k=A-p[E]-D,B=A/2-p[E]/2+T,ce=tw(O,B,k),de=!l.arrow&&$u(s)!=null&&B!==ce&&i.reference[E]/2-(B<O?C:D)-p[E]/2<0,Se=de?B<O?B-O:B-k:0;return{[m]:f[m]+Se,data:{[m]:ce,centerOffset:B-ce-Se,...de&&{alignmentOffset:Se}},reset:de}}}),m3=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:p=!0,...v}=Wi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=qi(s),_=ni(a),I=qi(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=f||(I||!p?[Np(a)]:o3(a)),L=E!=="none";!f&&L&&P.push(...u3(a,p,E,x));const A=[a,...P],T=await Ph(e,v),R=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&R.push(T[w]),h){const B=i3(s,o,x);R.push(T[B[0]],T[B[1]])}if(C=[...C,{placement:s,overflows:R}],!R.every(B=>B<=0)){var D,O;const B=(((D=i.flip)==null?void 0:D.index)||0)+1,ce=A[B];if(ce&&(!(h==="alignment"?_!==ni(ce):!1)||C.every($=>ni($.placement)===_?$.overflows[0]>0:!0)))return{data:{index:B,overflows:C},reset:{placement:ce}};let de=(O=C.filter(Se=>Se.overflows[0]<=0).sort((Se,$)=>Se.overflows[1]-$.overflows[1])[0])==null?void 0:O.placement;if(!de)switch(m){case"bestFit":{var k;const Se=(k=C.filter($=>{if(L){const W=ni($.placement);return W===_||W==="y"}return!0}).map($=>[$.placement,$.overflows.filter(W=>W>0).reduce((W,Z)=>W+Z,0)]).sort(($,W)=>$[1]-W[1])[0])==null?void 0:k[0];Se&&(de=Se);break}case"initialPlacement":de=a;break}if(s!==de)return{reset:{placement:de}}}return{}}}};function bb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ab(t){return t3.some(e=>t[e]>=0)}const p3=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Wi(t,e);switch(r){case"referenceHidden":{const i=await Ph(e,{...s,elementContext:"reference"}),o=bb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Ab(o)}}}case"escaped":{const i=await Ph(e,{...s,altBoundary:!0}),o=bb(i,n.floating);return{data:{escapedOffsets:o,escaped:Ab(o)}}}default:return{}}}}},Ak=new Set(["left","top"]);async function g3(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=qi(n),a=$u(n),l=ni(n)==="y",c=Ak.has(o)?-1:1,d=i&&l?-1:1,h=Wi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:E}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof E=="number"&&(m=a==="end"?E*-1:E),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const y3=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await g3(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},v3=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:w,y:_}=v;return{x:w,y:_}}},...l}=Wi(t,e),c={x:n,y:r},d=await Ph(e,l),h=ni(qi(s)),f=pE(h);let m=c[f],E=c[h];if(i){const v=f==="y"?"top":"left",w=f==="y"?"bottom":"right",_=m+d[v],I=m-d[w];m=tw(_,m,I)}if(o){const v=h==="y"?"top":"left",w=h==="y"?"bottom":"right",_=E+d[v],I=E-d[w];E=tw(_,E,I)}const p=a.fn({...e,[f]:m,[h]:E});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:i,[h]:o}}}}}},_3=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Wi(t,e),d={x:n,y:r},h=ni(s),f=pE(h);let m=d[f],E=d[h];const p=Wi(a,e),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const I=f==="y"?"height":"width",x=i.reference[f]-i.floating[I]+v.mainAxis,P=i.reference[f]+i.reference[I]-v.mainAxis;m<x?m=x:m>P&&(m=P)}if(c){var w,_;const I=f==="y"?"width":"height",x=Ak.has(qi(s)),P=i.reference[h]-i.floating[I]+(x&&((w=o.offset)==null?void 0:w[h])||0)+(x?0:v.crossAxis),L=i.reference[h]+i.reference[I]+(x?0:((_=o.offset)==null?void 0:_[h])||0)-(x?v.crossAxis:0);E<P?E=P:E>L&&(E=L)}return{[f]:m,[h]:E}}}},w3=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Wi(t,e),d=await Ph(e,c),h=qi(s),f=$u(s),m=ni(s)==="y",{width:E,height:p}=i.floating;let v,w;h==="top"||h==="bottom"?(v=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,v=f==="end"?"top":"bottom");const _=p-d.top-d.bottom,I=E-d.left-d.right,x=oa(p-d[v],_),P=oa(E-d[w],I),L=!e.middlewareData.shift;let A=x,T=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=_),L&&!f){const C=Jr(d.left,0),D=Jr(d.right,0),O=Jr(d.top,0),k=Jr(d.bottom,0);m?T=E-2*(C!==0||D!==0?C+D:Jr(d.left,d.right)):A=p-2*(O!==0||k!==0?O+k:Jr(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:A});const R=await o.getDimensions(a.floating);return E!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function Fg(){return typeof window<"u"}function Bu(t){return xk(t)?(t.nodeName||"").toLowerCase():"#document"}function ns(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _i(t){var e;return(e=(xk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function xk(t){return Fg()?t instanceof Node||t instanceof ns(t).Node:!1}function Ls(t){return Fg()?t instanceof Element||t instanceof ns(t).Element:!1}function gi(t){return Fg()?t instanceof HTMLElement||t instanceof ns(t).HTMLElement:!1}function xb(t){return!Fg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ns(t).ShadowRoot}const E3=new Set(["inline","contents"]);function lf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ms(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!E3.has(s)}const I3=new Set(["table","td","th"]);function T3(t){return I3.has(Bu(t))}const S3=[":popover-open",":modal"];function Ug(t){return S3.some(e=>{try{return t.matches(e)}catch{return!1}})}const b3=["transform","translate","scale","rotate","perspective"],A3=["transform","translate","scale","rotate","perspective","filter"],x3=["paint","layout","strict","content"];function vE(t){const e=_E(),n=Ls(t)?Ms(t):t;return b3.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||A3.some(r=>(n.willChange||"").includes(r))||x3.some(r=>(n.contain||"").includes(r))}function R3(t){let e=aa(t);for(;gi(e)&&!lu(e);){if(vE(e))return e;if(Ug(e))return null;e=aa(e)}return null}function _E(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const P3=new Set(["html","body","#document"]);function lu(t){return P3.has(Bu(t))}function Ms(t){return ns(t).getComputedStyle(t)}function jg(t){return Ls(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function aa(t){if(Bu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xb(t)&&t.host||_i(t);return xb(e)?e.host:e}function Rk(t){const e=aa(t);return lu(e)?t.ownerDocument?t.ownerDocument.body:t.body:gi(e)&&lf(e)?e:Rk(e)}function Ch(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Rk(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=ns(s);if(i){const a=rw(o);return e.concat(o,o.visualViewport||[],lf(s)?s:[],a&&n?Ch(a):[])}return e.concat(s,Ch(s,[],n))}function rw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Pk(t){const e=Ms(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=gi(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=kp(n)!==i||kp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function wE(t){return Ls(t)?t:t.contextElement}function Vc(t){const e=wE(t);if(!gi(e))return ci(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Pk(e);let o=(i?kp(n.width):n.width)/r,a=(i?kp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const C3=ci(0);function Ck(t){const e=ns(t);return!_E()||!e.visualViewport?C3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function k3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ns(t)?!1:e}function _l(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=wE(t);let o=ci(1);e&&(r?Ls(r)&&(o=Vc(r)):o=Vc(t));const a=k3(i,n,r)?Ck(i):ci(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=ns(i),m=r&&Ls(r)?ns(r):r;let E=f,p=rw(E);for(;p&&r&&m!==E;){const v=Vc(p),w=p.getBoundingClientRect(),_=Ms(p),I=w.left+(p.clientLeft+parseFloat(_.paddingLeft))*v.x,x=w.top+(p.clientTop+parseFloat(_.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=I,c+=x,E=ns(p),p=rw(E)}}return Dp({width:d,height:h,x:l,y:c})}function $g(t,e){const n=jg(t).scrollLeft;return e?e.left+n:_l(_i(t)).left+n}function kk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-$g(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function N3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=_i(r),a=e?Ug(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ci(1);const d=ci(0),h=gi(r);if((h||!h&&!i)&&((Bu(r)!=="body"||lf(o))&&(l=jg(r)),gi(r))){const m=_l(r);c=Vc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?kk(o,l):ci(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function D3(t){return Array.from(t.getClientRects())}function O3(t){const e=_i(t),n=jg(t),r=t.ownerDocument.body,s=Jr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Jr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+$g(t);const a=-n.scrollTop;return Ms(r).direction==="rtl"&&(o+=Jr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const Rb=25;function L3(t,e){const n=ns(t),r=_i(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=_E();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=$g(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,E=Math.abs(r.clientWidth-h.clientWidth-m);E<=Rb&&(i-=E)}else c<=Rb&&(i+=c);return{width:i,height:o,x:a,y:l}}const M3=new Set(["absolute","fixed"]);function V3(t,e){const n=_l(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=gi(t)?Vc(t):ci(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function Pb(t,e,n){let r;if(e==="viewport")r=L3(t,n);else if(e==="document")r=O3(_i(t));else if(Ls(e))r=V3(e,n);else{const s=Ck(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Dp(r)}function Nk(t,e){const n=aa(t);return n===e||!Ls(n)||lu(n)?!1:Ms(n).position==="fixed"||Nk(n,e)}function F3(t,e){const n=e.get(t);if(n)return n;let r=Ch(t,[],!1).filter(a=>Ls(a)&&Bu(a)!=="body"),s=null;const i=Ms(t).position==="fixed";let o=i?aa(t):t;for(;Ls(o)&&!lu(o);){const a=Ms(o),l=vE(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&M3.has(s.position)||lf(o)&&!l&&Nk(t,o))?r=r.filter(d=>d!==o):s=a,o=aa(o)}return e.set(t,r),r}function U3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Ug(e)?[]:F3(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=Pb(e,d,s);return c.top=Jr(h.top,c.top),c.right=oa(h.right,c.right),c.bottom=oa(h.bottom,c.bottom),c.left=Jr(h.left,c.left),c},Pb(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function j3(t){const{width:e,height:n}=Pk(t);return{width:e,height:n}}function $3(t,e,n){const r=gi(e),s=_i(e),i=n==="fixed",o=_l(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ci(0);function c(){l.x=$g(s)}if(r||!r&&!i)if((Bu(e)!=="body"||lf(s))&&(a=jg(e)),r){const m=_l(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?kk(s,a):ci(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function yv(t){return Ms(t).position==="static"}function Cb(t,e){if(!gi(t)||Ms(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _i(t)===n&&(n=n.ownerDocument.body),n}function Dk(t,e){const n=ns(t);if(Ug(t))return n;if(!gi(t)){let s=aa(t);for(;s&&!lu(s);){if(Ls(s)&&!yv(s))return s;s=aa(s)}return n}let r=Cb(t,e);for(;r&&T3(r)&&yv(r);)r=Cb(r,e);return r&&lu(r)&&yv(r)&&!vE(r)?n:r||R3(t)||n}const B3=async function(t){const e=this.getOffsetParent||Dk,n=this.getDimensions,r=await n(t.floating);return{reference:$3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function z3(t){return Ms(t).direction==="rtl"}const W3={convertOffsetParentRelativeRectToViewportRelativeRect:N3,getDocumentElement:_i,getClippingRect:U3,getOffsetParent:Dk,getElementRects:B3,getClientRects:D3,getDimensions:j3,getScale:Vc,isElement:Ls,isRTL:z3};function Ok(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function q3(t,e){let n=null,r;const s=_i(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const E=im(h),p=im(s.clientWidth-(d+f)),v=im(s.clientHeight-(h+m)),w=im(d),I={rootMargin:-E+"px "+-p+"px "+-v+"px "+-w+"px",threshold:Jr(0,oa(1,l))||1};let x=!0;function P(L){const A=L[0].intersectionRatio;if(A!==l){if(!x)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!Ok(c,t.getBoundingClientRect())&&o(),x=!1}try{n=new IntersectionObserver(P,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,I)}n.observe(t)}return o(!0),i}function H3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=wE(t),d=s||i?[...c?Ch(c):[],...Ch(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?q3(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[_]=w;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var I;(I=m)==null||I.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let E,p=l?_l(t):null;l&&v();function v(){const w=_l(t);p&&!Ok(p,w)&&n(),p=w,E=requestAnimationFrame(v)}return n(),()=>{var w;d.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(E)}}const K3=y3,G3=v3,Q3=m3,Y3=w3,J3=p3,kb=f3,X3=_3,Z3=(t,e,n)=>{const r=new Map,s={platform:W3,...n},i={...s.platform,_c:r};return h3(t,e,{...s,platform:i})};var eB=typeof document<"u",tB=function(){},jm=eB?S.useLayoutEffect:tB;function Op(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Op(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Op(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Lk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nb(t,e){const n=Lk(t);return Math.round(e*n)/n}function vv(t){const e=S.useRef(t);return jm(()=>{e.current=t}),e}function nB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=S.useState(r);Op(f,r)||m(r);const[E,p]=S.useState(null),[v,w]=S.useState(null),_=S.useCallback($=>{$!==L.current&&(L.current=$,p($))},[]),I=S.useCallback($=>{$!==A.current&&(A.current=$,w($))},[]),x=i||E,P=o||v,L=S.useRef(null),A=S.useRef(null),T=S.useRef(d),R=l!=null,C=vv(l),D=vv(s),O=vv(c),k=S.useCallback(()=>{if(!L.current||!A.current)return;const $={placement:e,strategy:n,middleware:f};D.current&&($.platform=D.current),Z3(L.current,A.current,$).then(W=>{const Z={...W,isPositioned:O.current!==!1};B.current&&!Op(T.current,Z)&&(T.current=Z,of.flushSync(()=>{h(Z)}))})},[f,e,n,D,O]);jm(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[c]);const B=S.useRef(!1);jm(()=>(B.current=!0,()=>{B.current=!1}),[]),jm(()=>{if(x&&(L.current=x),P&&(A.current=P),x&&P){if(C.current)return C.current(x,P,k);k()}},[x,P,k,C,R]);const ce=S.useMemo(()=>({reference:L,floating:A,setReference:_,setFloating:I}),[_,I]),de=S.useMemo(()=>({reference:x,floating:P}),[x,P]),Se=S.useMemo(()=>{const $={position:n,left:0,top:0};if(!de.floating)return $;const W=Nb(de.floating,d.x),Z=Nb(de.floating,d.y);return a?{...$,transform:"translate("+W+"px, "+Z+"px)",...Lk(de.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:Z}},[n,a,de.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:k,refs:ce,elements:de,floatingStyles:Se}),[d,k,ce,de,Se])}const rB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?kb({element:r.current,padding:s}).fn(n):{}:r?kb({element:r,padding:s}).fn(n):{}}}},sB=(t,e)=>({...K3(t),options:[t,e]}),iB=(t,e)=>({...G3(t),options:[t,e]}),oB=(t,e)=>({...X3(t),options:[t,e]}),aB=(t,e)=>({...Q3(t),options:[t,e]}),lB=(t,e)=>({...Y3(t),options:[t,e]}),cB=(t,e)=>({...J3(t),options:[t,e]}),uB=(t,e)=>({...rB(t),options:[t,e]});var dB="Arrow",Mk=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return y.jsx(Xt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});Mk.displayName=dB;var hB=Mk;function Vk(t){const[e,n]=S.useState(void 0);return zi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var EE="Popper",[Fk,Uk]=Uu(EE),[fB,jk]=Fk(EE),$k=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return y.jsx(fB,{scope:e,anchor:r,onAnchorChange:s,children:n})};$k.displayName=EE;var Bk="PopperAnchor",zk=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=jk(Bk,n),o=S.useRef(null),a=lr(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:y.jsx(Xt.div,{...s,ref:a})});zk.displayName=Bk;var IE="PopperContent",[mB,pB]=Fk(IE),Wk=S.forwardRef((t,e)=>{var Fe,Pn,Bn,In,Tn,Cn;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:E,...p}=t,v=jk(IE,n),[w,_]=S.useState(null),I=lr(e,Nt=>_(Nt)),[x,P]=S.useState(null),L=Vk(x),A=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,R=r+(i!=="center"?"-"+i:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(c)?c:[c],O=D.length>0,k={padding:C,boundary:D.filter(yB),altBoundary:O},{refs:B,floatingStyles:ce,placement:de,isPositioned:Se,middlewareData:$}=nB({strategy:"fixed",placement:R,whileElementsMounted:(...Nt)=>H3(...Nt,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[sB({mainAxis:s+T,alignmentAxis:o}),l&&iB({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?oB():void 0,...k}),l&&aB({...k}),lB({...k,apply:({elements:Nt,rects:ft,availableWidth:at,availableHeight:cr})=>{const{width:_r,height:zn}=ft.reference,mt=Nt.floating.style;mt.setProperty("--radix-popper-available-width",`${at}px`),mt.setProperty("--radix-popper-available-height",`${cr}px`),mt.setProperty("--radix-popper-anchor-width",`${_r}px`),mt.setProperty("--radix-popper-anchor-height",`${zn}px`)}}),x&&uB({element:x,padding:a}),vB({arrowWidth:A,arrowHeight:T}),f&&cB({strategy:"referenceHidden",...k})]}),[W,Z]=Kk(de),we=pi(E);zi(()=>{Se&&(we==null||we())},[Se,we]);const Ee=(Fe=$.arrow)==null?void 0:Fe.x,se=(Pn=$.arrow)==null?void 0:Pn.y,_e=((Bn=$.arrow)==null?void 0:Bn.centerOffset)!==0,[j,Qe]=S.useState();return zi(()=>{w&&Qe(window.getComputedStyle(w).zIndex)},[w]),y.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:Se?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j,"--radix-popper-transform-origin":[(In=$.transformOrigin)==null?void 0:In.x,(Tn=$.transformOrigin)==null?void 0:Tn.y].join(" "),...((Cn=$.hide)==null?void 0:Cn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:y.jsx(mB,{scope:n,placedSide:W,onArrowChange:P,arrowX:Ee,arrowY:se,shouldHideArrow:_e,children:y.jsx(Xt.div,{"data-side":W,"data-align":Z,...p,ref:I,style:{...p.style,animation:Se?void 0:"none"}})})})});Wk.displayName=IE;var qk="PopperArrow",gB={top:"bottom",right:"left",bottom:"top",left:"right"},Hk=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=pB(qk,r),o=gB[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(hB,{...s,ref:n,style:{...s.style,display:"block"}})})});Hk.displayName=qk;function yB(t){return t!==null}var vB=t=>({name:"transformOrigin",options:t,fn(e){var v,w,_;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=Kk(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,m=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let E="",p="";return c==="bottom"?(E=o?h:`${f}px`,p=`${-l}px`):c==="top"?(E=o?h:`${f}px`,p=`${r.floating.height+l}px`):c==="right"?(E=`${-l}px`,p=o?h:`${m}px`):c==="left"&&(E=`${r.floating.width+l}px`,p=o?h:`${m}px`),{data:{x:E,y:p}}}});function Kk(t){const[e,n="center"]=t.split("-");return[e,n]}var $X=$k,_B=zk,wB=Wk,EB=Hk,[Bg]=Uu("Tooltip",[Uk]),TE=Uk(),Gk="TooltipProvider",IB=700,Db="tooltip.open",[TB,Qk]=Bg(Gk),Yk=t=>{const{__scopeTooltip:e,delayDuration:n=IB,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),y.jsx(TB,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};Yk.displayName=Gk;var Jk="Tooltip",[BX,zg]=Bg(Jk),sw="TooltipTrigger",SB=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=zg(sw,n),i=Qk(sw,n),o=TE(n),a=S.useRef(null),l=lr(e,a,s.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(_B,{asChild:!0,...o,children:y.jsx(Xt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Mt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Mt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Mt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Mt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Mt(t.onBlur,s.onClose),onClick:Mt(t.onClick,s.onClose)})})});SB.displayName=sw;var bB="TooltipPortal",[zX,AB]=Bg(bB,{forceMount:void 0}),cu="TooltipContent",Xk=S.forwardRef((t,e)=>{const n=AB(cu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=zg(cu,t.__scopeTooltip);return y.jsx(Ml,{present:r||o.open,children:o.disableHoverableContent?y.jsx(Zk,{side:s,...i,ref:e}):y.jsx(xB,{side:s,...i,ref:e})})}),xB=S.forwardRef((t,e)=>{const n=zg(cu,t.__scopeTooltip),r=Qk(cu,t.__scopeTooltip),s=S.useRef(null),i=lr(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=S.useCallback(()=>{a(null),h(!1)},[h]),m=S.useCallback((E,p)=>{const v=E.currentTarget,w={x:E.clientX,y:E.clientY},_=NB(w,v.getBoundingClientRect()),I=DB(w,_),x=OB(p.getBoundingClientRect()),P=MB([...I,...x]);a(P),h(!0)},[h]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&d){const E=v=>m(v,d),p=v=>m(v,l);return l.addEventListener("pointerleave",E),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",E),d.removeEventListener("pointerleave",p)}}},[l,d,m,f]),S.useEffect(()=>{if(o){const E=p=>{const v=p.target,w={x:p.clientX,y:p.clientY},_=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),I=!LB(w,o);_?f():I&&(f(),c())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[l,d,o,c,f]),y.jsx(Zk,{...t,ref:i})}),[RB,PB]=Bg(Jk,{isInside:!1}),CB=e4("TooltipContent"),Zk=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=zg(cu,n),c=TE(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(Db,d),()=>document.removeEventListener(Db,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),y.jsx(Lg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:y.jsxs(wB,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(CB,{children:r}),y.jsx(RB,{scope:n,isInside:!0,children:y.jsx(S4,{id:l.contentId,role:"tooltip",children:s||r})})]})})});Xk.displayName=cu;var eN="TooltipArrow",kB=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=TE(n);return PB(eN,n).isInside?null:y.jsx(EB,{...s,...r,ref:e})});kB.displayName=eN;function NB(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function DB(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function OB(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function LB(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function MB(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),VB(e)}function VB(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var FB=Yk,tN=Xk;const UB=FB,jB=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>y.jsx(tN,{ref:r,sideOffset:e,className:Jt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));jB.displayName=tN.displayName;var Wg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$B={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Co,a0,XR,BB=(XR=class{constructor(){gt(this,Co,$B);gt(this,a0,!1)}setTimeoutProvider(t){qe(this,Co,t)}setTimeout(t,e){return G(this,Co).setTimeout(t,e)}clearTimeout(t){G(this,Co).clearTimeout(t)}setInterval(t,e){return G(this,Co).setInterval(t,e)}clearInterval(t){G(this,Co).clearInterval(t)}},Co=new WeakMap,a0=new WeakMap,XR),Lp=new BB;function zB(t){setTimeout(t,0)}var qg=typeof window>"u"||"Deno"in globalThis;function Sr(){}function WB(t,e){return typeof t=="function"?t(e):t}function qB(t){return typeof t=="number"&&t>=0&&t!==1/0}function HB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function iw(t,e){return typeof t=="function"?t(e):t}function KB(t,e){return typeof t=="function"?t(e):t}function Ob(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==SE(o,e.options))return!1}else if(!Nh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Lb(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(kh(e.options.mutationKey)!==kh(i))return!1}else if(!Nh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function SE(t,e){return((e==null?void 0:e.queryKeyHashFn)||kh)(t)}function kh(t){return JSON.stringify(t,(e,n)=>ow(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Nh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Nh(t[n],e[n])):!1}var GB=Object.prototype.hasOwnProperty;function nN(t,e){if(t===e)return t;const n=Mb(t)&&Mb(e);if(!n&&!(ow(t)&&ow(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:GB.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=nN(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function WX(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Mb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ow(t){if(!Vb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Vb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Vb(t){return Object.prototype.toString.call(t)==="[object Object]"}function QB(t){return new Promise(e=>{Lp.setTimeout(e,t)})}function YB(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?nN(t,e):e}function JB(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function XB(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var bE=Symbol();function rN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===bE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function qX(t,e){return typeof t=="function"?t(...e):!!t}var tl,ko,Kc,ZR,ZB=(ZR=class extends Wg{constructor(){super();gt(this,tl);gt(this,ko);gt(this,Kc);qe(this,Kc,e=>{if(!qg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,ko)||this.setEventListener(G(this,Kc))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,ko))==null||e.call(this),qe(this,ko,void 0))}setEventListener(e){var n;qe(this,Kc,e),(n=G(this,ko))==null||n.call(this),qe(this,ko,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){G(this,tl)!==e&&(qe(this,tl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof G(this,tl)=="boolean"?G(this,tl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},tl=new WeakMap,ko=new WeakMap,Kc=new WeakMap,ZR),sN=new ZB;function e6(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function t6(t){var n;let e;if((n=t.then(r=>(e=r,r),Sr))==null||n.catch(Sr),e!==void 0)return{data:e}}function iN(t){return t}function n6(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function r6(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(Sr),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function s6(t){return t.state.isPaused}function i6(t){return t.state.status==="success"}function o6(t){return!0}function a6(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??s6,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[n6(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??i6,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??o6,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??iN,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[r6(f,o,i)]:[]);return{mutations:r,queries:a}}function l6(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??iN,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:m,promise:E,dehydratedAt:p})=>{var L,A;const v=E?t6(E):void 0,w=h.data===void 0?v==null?void 0:v.data:h.data,_=w===void 0?w:i(w);let I=s.get(f);const x=(I==null?void 0:I.state.status)==="pending",P=(I==null?void 0:I.state.fetchStatus)==="fetching";if(I){const T=v&&p!==void 0&&p>I.state.dataUpdatedAt;if(h.dataUpdatedAt>I.state.dataUpdatedAt||T){const{fetchStatus:R,...C}=h;I.setState({...C,data:_})}}else I=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(A=n==null?void 0:n.defaultOptions)==null?void 0:A.queries,queryKey:d,queryHash:f,meta:m},{...h,data:_,fetchStatus:"idle",status:_!==void 0?"success":h.status});E&&!x&&!P&&(p===void 0||p>I.state.dataUpdatedAt)&&I.fetch(void 0,{initialPromise:Promise.resolve(E).then(i)}).catch(Sr)})}var c6=zB;function u6(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=c6;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var br=u6(),Gc,No,Qc,eP,d6=(eP=class extends Wg{constructor(){super();gt(this,Gc,!0);gt(this,No);gt(this,Qc);qe(this,Qc,e=>{if(!qg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,No)||this.setEventListener(G(this,Qc))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,No))==null||e.call(this),qe(this,No,void 0))}setEventListener(e){var n;qe(this,Qc,e),(n=G(this,No))==null||n.call(this),qe(this,No,e(this.setOnline.bind(this)))}setOnline(e){G(this,Gc)!==e&&(qe(this,Gc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return G(this,Gc)}},Gc=new WeakMap,No=new WeakMap,Qc=new WeakMap,eP),Mp=new d6;function h6(t){return Math.min(1e3*2**t,3e4)}function oN(t){return(t??"online")==="online"?Mp.isOnline():!0}var aw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function aN(t){let e=!1,n=0,r;const s=e6(),i=()=>s.status!=="pending",o=p=>{var v;if(!i()){const w=new aw(p);f(w),(v=t.onCancel)==null||v.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>sN.isFocused()&&(t.networkMode==="always"||Mp.isOnline())&&t.canRun(),d=()=>oN(t.networkMode)&&t.canRun(),h=p=>{i()||(r==null||r(),s.resolve(p))},f=p=>{i()||(r==null||r(),s.reject(p))},m=()=>new Promise(p=>{var v;r=w=>{(i()||c())&&p(w)},(v=t.onPause)==null||v.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),E=()=>{if(i())return;let p;const v=n===0?t.initialPromise:void 0;try{p=v??t.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(h).catch(w=>{var L;if(i())return;const _=t.retry??(qg?0:3),I=t.retryDelay??h6,x=typeof I=="function"?I(n,w):I,P=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,w);if(e||!P){f(w);return}n++,(L=t.onFail)==null||L.call(t,n,w),QB(x).then(()=>c()?void 0:m()).then(()=>{e?f(w):E()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?E():m().then(E),s)}}var nl,tP,lN=(tP=class{constructor(){gt(this,nl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qB(this.gcTime)&&qe(this,nl,Lp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qg?1/0:5*60*1e3))}clearGcTimeout(){G(this,nl)&&(Lp.clearTimeout(G(this,nl)),qe(this,nl,void 0))}},nl=new WeakMap,tP),rl,Yc,ds,sl,Hn,Jh,il,Ts,Si,nP,f6=(nP=class extends lN{constructor(n){super();gt(this,Ts);gt(this,rl);gt(this,Yc);gt(this,ds);gt(this,sl);gt(this,Hn);gt(this,Jh);gt(this,il);qe(this,il,!1),qe(this,Jh,n.defaultOptions),this.setOptions(n.options),this.observers=[],qe(this,sl,n.client),qe(this,ds,G(this,sl).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,qe(this,rl,Ub(this.options)),this.state=n.state??G(this,rl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=G(this,Hn))==null?void 0:n.promise}setOptions(n){if(this.options={...G(this,Jh),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Ub(this.options);r.data!==void 0&&(this.setState(Fb(r.data,r.dataUpdatedAt)),qe(this,rl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,ds).remove(this)}setData(n,r){const s=YB(this.state.data,n,this.options);return ur(this,Ts,Si).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){ur(this,Ts,Si).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=G(this,Hn))==null?void 0:s.promise;return(i=G(this,Hn))==null||i.cancel(n),r?r.then(Sr).catch(Sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,rl))}isActive(){return this.observers.some(n=>KB(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>iw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!HB(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Hn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Hn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),G(this,ds).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(G(this,Hn)&&(G(this,il)?G(this,Hn).cancel({revert:!0}):G(this,Hn).cancelRetry()),this.scheduleGc()),G(this,ds).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ur(this,Ts,Si).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,E,p,v,w,_,I,x;if(this.state.fetchStatus!=="idle"&&((c=G(this,Hn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(G(this,Hn))return G(this,Hn).continueRetry(),G(this,Hn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const P=this.observers.find(L=>L.options.queryFn);P&&this.setOptions(P.options)}const s=new AbortController,i=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(qe(this,il,!0),s.signal)})},o=()=>{const P=rN(this.options,r),A=(()=>{const T={client:G(this,sl),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return qe(this,il,!1),this.options.persister?this.options.persister(P,A,this):P(A)},l=(()=>{const P={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:G(this,sl),state:this.state,fetchFn:o};return i(P),P})();(d=this.options.behavior)==null||d.onFetch(l,this),qe(this,Yc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ur(this,Ts,Si).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),qe(this,Hn,aN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:P=>{P instanceof aw&&P.revert&&this.setState({...G(this,Yc),fetchStatus:"idle"}),s.abort()},onFail:(P,L)=>{ur(this,Ts,Si).call(this,{type:"failed",failureCount:P,error:L})},onPause:()=>{ur(this,Ts,Si).call(this,{type:"pause"})},onContinue:()=>{ur(this,Ts,Si).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const P=await G(this,Hn).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(E=(m=G(this,ds).config).onSuccess)==null||E.call(m,P,this),(v=(p=G(this,ds).config).onSettled)==null||v.call(p,P,this.state.error,this),P}catch(P){if(P instanceof aw){if(P.silent)return G(this,Hn).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw ur(this,Ts,Si).call(this,{type:"error",error:P}),(_=(w=G(this,ds).config).onError)==null||_.call(w,P,this),(x=(I=G(this,ds).config).onSettled)==null||x.call(I,this.state.data,P,this),P}finally{this.scheduleGc()}}},rl=new WeakMap,Yc=new WeakMap,ds=new WeakMap,sl=new WeakMap,Hn=new WeakMap,Jh=new WeakMap,il=new WeakMap,Ts=new WeakSet,Si=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...m6(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...Fb(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return qe(this,Yc,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),br.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),G(this,ds).notify({query:this,type:"updated",action:n})})},nP);function m6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Fb(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ub(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function jb(t){return{onFetch:(e,n)=>{var d,h,f,m,E;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const v=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},w=rN(e.options,e.fetchOptions),_=async(I,x,P)=>{if(p)return Promise.reject();if(x==null&&I.pages.length)return Promise.resolve(I);const A=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:x,direction:P?"backward":"forward",meta:e.options.meta};return v(D),D})(),T=await w(A),{maxPages:R}=e.options,C=P?XB:JB;return{pages:C(I.pages,T,R),pageParams:C(I.pageParams,x,R)}};if(s&&i.length){const I=s==="backward",x=I?p6:$b,P={pages:i,pageParams:o},L=x(r,P);a=await _(P,L,I)}else{const I=t??i.length;do{const x=l===0?o[0]??r.initialPageParam:$b(r,a);if(l>0&&x==null)break;a=await _(a,x),l++}while(l<I)}return a};e.options.persister?e.fetchFn=()=>{var p,v;return(v=(p=e.options).persister)==null?void 0:v.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function $b(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function p6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Xh,Ys,Ir,ol,Js,yo,rP,g6=(rP=class extends lN{constructor(n){super();gt(this,Js);gt(this,Xh);gt(this,Ys);gt(this,Ir);gt(this,ol);qe(this,Xh,n.client),this.mutationId=n.mutationId,qe(this,Ir,n.mutationCache),qe(this,Ys,[]),this.state=n.state||y6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){G(this,Ys).includes(n)||(G(this,Ys).push(n),this.clearGcTimeout(),G(this,Ir).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){qe(this,Ys,G(this,Ys).filter(r=>r!==n)),this.scheduleGc(),G(this,Ir).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){G(this,Ys).length||(this.state.status==="pending"?this.scheduleGc():G(this,Ir).remove(this))}continue(){var n;return((n=G(this,ol))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,E,p,v,w,_,I,x,P,L,A,T,R,C;const r=()=>{ur(this,Js,yo).call(this,{type:"continue"})},s={client:G(this,Xh),meta:this.options.meta,mutationKey:this.options.mutationKey};qe(this,ol,aN({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,O)=>{ur(this,Js,yo).call(this,{type:"failed",failureCount:D,error:O})},onPause:()=>{ur(this,Js,yo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,Ir).canRun(this)}));const i=this.state.status==="pending",o=!G(this,ol).canStart();try{if(i)r();else{ur(this,Js,yo).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=G(this,Ir).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&ur(this,Js,yo).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const D=await G(this,ol).start();return await((f=(h=G(this,Ir).config).onSuccess)==null?void 0:f.call(h,D,n,this.state.context,this,s)),await((E=(m=this.options).onSuccess)==null?void 0:E.call(m,D,n,this.state.context,s)),await((v=(p=G(this,Ir).config).onSettled)==null?void 0:v.call(p,D,null,this.state.variables,this.state.context,this,s)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,D,null,n,this.state.context,s)),ur(this,Js,yo).call(this,{type:"success",data:D}),D}catch(D){try{throw await((x=(I=G(this,Ir).config).onError)==null?void 0:x.call(I,D,n,this.state.context,this,s)),await((L=(P=this.options).onError)==null?void 0:L.call(P,D,n,this.state.context,s)),await((T=(A=G(this,Ir).config).onSettled)==null?void 0:T.call(A,void 0,D,this.state.variables,this.state.context,this,s)),await((C=(R=this.options).onSettled)==null?void 0:C.call(R,void 0,D,n,this.state.context,s)),D}finally{ur(this,Js,yo).call(this,{type:"error",error:D})}}finally{G(this,Ir).runNext(this)}}},Xh=new WeakMap,Ys=new WeakMap,Ir=new WeakMap,ol=new WeakMap,Js=new WeakSet,yo=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),br.batch(()=>{G(this,Ys).forEach(s=>{s.onMutationUpdate(n)}),G(this,Ir).notify({mutation:this,type:"updated",action:n})})},rP);function y6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xi,Ss,Zh,sP,v6=(sP=class extends Wg{constructor(e={}){super();gt(this,xi);gt(this,Ss);gt(this,Zh);this.config=e,qe(this,xi,new Set),qe(this,Ss,new Map),qe(this,Zh,0)}build(e,n,r){const s=new g6({client:e,mutationCache:this,mutationId:++Ff(this,Zh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){G(this,xi).add(e);const n=om(e);if(typeof n=="string"){const r=G(this,Ss).get(n);r?r.push(e):G(this,Ss).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(G(this,xi).delete(e)){const n=om(e);if(typeof n=="string"){const r=G(this,Ss).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&G(this,Ss).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=om(e);if(typeof n=="string"){const r=G(this,Ss).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=om(e);if(typeof n=="string"){const s=(r=G(this,Ss).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){br.batch(()=>{G(this,xi).forEach(e=>{this.notify({type:"removed",mutation:e})}),G(this,xi).clear(),G(this,Ss).clear()})}getAll(){return Array.from(G(this,xi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Lb(n,r))}findAll(e={}){return this.getAll().filter(n=>Lb(e,n))}notify(e){br.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return br.batch(()=>Promise.all(e.map(n=>n.continue().catch(Sr))))}},xi=new WeakMap,Ss=new WeakMap,Zh=new WeakMap,sP);function om(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Xs,iP,_6=(iP=class extends Wg{constructor(e={}){super();gt(this,Xs);this.config=e,qe(this,Xs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??SE(s,n);let o=this.get(i);return o||(o=new f6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){G(this,Xs).has(e.queryHash)||(G(this,Xs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=G(this,Xs).get(e.queryHash);n&&(e.destroy(),n===e&&G(this,Xs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){br.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,Xs).get(e)}getAll(){return[...G(this,Xs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Ob(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Ob(e,r)):n}notify(e){br.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){br.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){br.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xs=new WeakMap,iP),pn,Do,Oo,Jc,Xc,Lo,Zc,eu,oP,w6=(oP=class{constructor(t={}){gt(this,pn);gt(this,Do);gt(this,Oo);gt(this,Jc);gt(this,Xc);gt(this,Lo);gt(this,Zc);gt(this,eu);qe(this,pn,t.queryCache||new _6),qe(this,Do,t.mutationCache||new v6),qe(this,Oo,t.defaultOptions||{}),qe(this,Jc,new Map),qe(this,Xc,new Map),qe(this,Lo,0)}mount(){Ff(this,Lo)._++,G(this,Lo)===1&&(qe(this,Zc,sN.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,pn).onFocus())})),qe(this,eu,Mp.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,pn).onOnline())})))}unmount(){var t,e;Ff(this,Lo)._--,G(this,Lo)===0&&((t=G(this,Zc))==null||t.call(this),qe(this,Zc,void 0),(e=G(this,eu))==null||e.call(this),qe(this,eu,void 0))}isFetching(t){return G(this,pn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return G(this,Do).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,pn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=G(this,pn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(iw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return G(this,pn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=G(this,pn).get(r.queryHash),i=s==null?void 0:s.state.data,o=WB(e,i);if(o!==void 0)return G(this,pn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return br.batch(()=>G(this,pn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,pn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=G(this,pn);br.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=G(this,pn);return br.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=br.batch(()=>G(this,pn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Sr).catch(Sr)}invalidateQueries(t,e={}){return br.batch(()=>(G(this,pn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=br.batch(()=>G(this,pn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Sr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Sr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=G(this,pn).build(this,e);return n.isStaleByTime(iw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Sr).catch(Sr)}fetchInfiniteQuery(t){return t.behavior=jb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Sr).catch(Sr)}ensureInfiniteQueryData(t){return t.behavior=jb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Mp.isOnline()?G(this,Do).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,pn)}getMutationCache(){return G(this,Do)}getDefaultOptions(){return G(this,Oo)}setDefaultOptions(t){qe(this,Oo,t)}setQueryDefaults(t,e){G(this,Jc).set(kh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...G(this,Jc).values()],n={};return e.forEach(r=>{Nh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){G(this,Xc).set(kh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...G(this,Xc).values()],n={};return e.forEach(r=>{Nh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...G(this,Oo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=SE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===bE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...G(this,Oo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){G(this,pn).clear(),G(this,Do).clear()}},pn=new WeakMap,Do=new WeakMap,Oo=new WeakMap,Jc=new WeakMap,Xc=new WeakMap,Lo=new WeakMap,Zc=new WeakMap,eu=new WeakMap,oP),cN=S.createContext(void 0),GX=t=>{const e=S.useContext(cN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},E6=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.jsx(cN.Provider,{value:t,children:e})),I6=["added","removed","updated"];function Bb(t){return I6.includes(t)}async function T6({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();l6(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function zb({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:a6(t,r)};await e.persistClient(s)}function S6(t){const e=t.queryClient.getQueryCache().subscribe(r=>{Bb(r.type)&&zb(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{Bb(r.type)&&zb(t)});return()=>{e(),n()}}function b6(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=T6(t).then(()=>{e||(n=S6(t))});return[r,s]}function _v(){}function A6({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:x6(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:_v,restoreClient:_v,removeClient:_v}}function x6(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Lp.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dh.apply(this,arguments)}var Fo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fo||(Fo={}));const Wb="popstate";function R6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Vp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Oh(s)}return uN(e,n,null,t)}function P6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Vl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Vp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Oh(i))}function r(s,i){AE(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return uN(e,n,r,t)}function _n(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C6(){return Math.random().toString(36).substr(2,8)}function qb(t,e){return{usr:t.state,key:t.key,idx:e}}function Vp(t,e,n,r){return n===void 0&&(n=null),Dh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vl(e):e,{state:n,key:e&&e.key||r||C6()})}function Oh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Fo.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Dh({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Fo.Pop;let v=d(),w=v==null?null:v-c;c=v,l&&l({action:a,location:p.location,delta:w})}function f(v,w){a=Fo.Push;let _=Vp(p.location,v,w);n&&n(_,v),c=d()+1;let I=qb(_,c),x=p.createHref(_);try{o.pushState(I,"",x)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(x)}i&&l&&l({action:a,location:p.location,delta:1})}function m(v,w){a=Fo.Replace;let _=Vp(p.location,v,w);n&&n(_,v),c=d();let I=qb(_,c),x=p.createHref(_);o.replaceState(I,"",x),i&&l&&l({action:a,location:p.location,delta:0})}function E(v){let w=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof v=="string"?v:Oh(v);return _=_.replace(/ $/,"%20"),_n(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let p={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Wb,h),l=v,()=>{s.removeEventListener(Wb,h),l=null}},createHref(v){return e(s,v)},createURL:E,encodeLocation(v){let w=E(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(v){return o.go(v)}};return p}var Hb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Hb||(Hb={}));function k6(t,e,n){return n===void 0&&(n="/"),N6(t,e,n)}function N6(t,e,n,r){let s=typeof e=="string"?Vl(e):e,i=xE(s.pathname||"/",n);if(i==null)return null;let o=dN(t);D6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=q6(i);a=B6(o[l],c)}return a}function dN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(_n(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Jo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(_n(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),dN(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:j6(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of hN(i.path))s(i,o,l)}),e}function hN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=hN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function D6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const O6=/^:[\w-]+$/,L6=3,M6=2,V6=1,F6=10,U6=-2,Kb=t=>t==="*";function j6(t,e){let n=t.split("/"),r=n.length;return n.some(Kb)&&(r+=U6),e&&(r+=M6),n.filter(s=>!Kb(s)).reduce((s,i)=>s+(O6.test(i)?L6:i===""?V6:F6),r)}function $6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function B6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=z6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Jo([i,h.pathname]),pathnameBase:Q6(Jo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Jo([i,h.pathnameBase]))}return o}function z6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=W6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const E=a[h];return m&&!E?c[f]=void 0:c[f]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function W6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),AE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function q6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function H6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Vl(t):t;return{pathname:n?n.startsWith("/")?n:K6(n,e):e,search:Y6(r),hash:J6(s)}}function K6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function wv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function RE(t,e){let n=G6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function PE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Vl(t):(s=Dh({},t),_n(!s.pathname||!s.pathname.includes("?"),wv("?","pathname","search",s)),_n(!s.pathname||!s.pathname.includes("#"),wv("#","pathname","hash",s)),_n(!s.search||!s.search.includes("#"),wv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=H6(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Jo=t=>t.join("/").replace(/\/\/+/g,"/"),Q6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,J6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function X6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fN=["post","put","patch","delete"];new Set(fN);const Z6=["get",...fN];new Set(Z6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lh(){return Lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lh.apply(this,arguments)}const CE=S.createContext(null),e5=S.createContext(null),_a=S.createContext(null),Hg=S.createContext(null),Ji=S.createContext({outlet:null,matches:[],isDataRoute:!1}),mN=S.createContext(null);function t5(t,e){let{relative:n}=e===void 0?{}:e;zu()||_n(!1);let{basename:r,navigator:s}=S.useContext(_a),{hash:i,pathname:o,search:a}=gN(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Jo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function zu(){return S.useContext(Hg)!=null}function wi(){return zu()||_n(!1),S.useContext(Hg).location}function pN(t){S.useContext(_a).static||S.useLayoutEffect(t)}function Fl(){let{isDataRoute:t}=S.useContext(Ji);return t?m5():n5()}function n5(){zu()||_n(!1);let t=S.useContext(CE),{basename:e,future:n,navigator:r}=S.useContext(_a),{matches:s}=S.useContext(Ji),{pathname:i}=wi(),o=JSON.stringify(RE(s,n.v7_relativeSplatPath)),a=S.useRef(!1);return pN(()=>{a.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=PE(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Jo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function QX(){let{matches:t}=S.useContext(Ji),e=t[t.length-1];return e?e.params:{}}function gN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(_a),{matches:s}=S.useContext(Ji),{pathname:i}=wi(),o=JSON.stringify(RE(s,r.v7_relativeSplatPath));return S.useMemo(()=>PE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function r5(t,e){return s5(t,e)}function s5(t,e,n,r){zu()||_n(!1);let{navigator:s}=S.useContext(_a),{matches:i}=S.useContext(Ji),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=wi(),d;if(e){var h;let v=typeof e=="string"?Vl(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||_n(!1),d=v}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let E=k6(t,{pathname:m}),p=c5(E&&E.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Jo([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Jo([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&p?S.createElement(Hg.Provider,{value:{location:Lh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Fo.Pop}},p):p}function i5(){let t=f5(),e=X6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const o5=S.createElement(i5,null);class a5 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ji.Provider,{value:this.props.routeContext},S.createElement(mN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function l5(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(CE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ji.Provider,{value:e},r)}function c5(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||_n(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,E=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,E=!1,p=null,v=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||o5,l&&(c<0&&f===0?(p5("route-fallback"),E=!0,v=null):c===f&&(E=!0,v=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),_=()=>{let I;return m?I=p:E?I=v:h.route.Component?I=S.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,S.createElement(l5,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(a5,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var yN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yN||{}),vN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vN||{});function u5(t){let e=S.useContext(CE);return e||_n(!1),e}function d5(t){let e=S.useContext(e5);return e||_n(!1),e}function h5(t){let e=S.useContext(Ji);return e||_n(!1),e}function _N(t){let e=h5(),n=e.matches[e.matches.length-1];return n.route.id||_n(!1),n.route.id}function f5(){var t;let e=S.useContext(mN),n=d5(),r=_N();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function m5(){let{router:t}=u5(yN.UseNavigateStable),e=_N(vN.UseNavigateStable),n=S.useRef(!1);return pN(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Lh({fromRouteId:e},i)))},[t,e])}const Gb={};function p5(t,e,n){Gb[t]||(Gb[t]=!0)}function wN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function YX(t){let{to:e,replace:n,state:r,relative:s}=t;zu()||_n(!1);let{future:i,static:o}=S.useContext(_a),{matches:a}=S.useContext(Ji),{pathname:l}=wi(),c=Fl(),d=PE(e,RE(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Re(t){_n(!1)}function EN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Fo.Pop,navigator:i,static:o=!1,future:a}=t;zu()&&_n(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Lh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Vl(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:E="default"}=r,p=S.useMemo(()=>{let v=xE(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:E},navigationType:s}},[l,d,h,f,m,E,s]);return p==null?null:S.createElement(_a.Provider,{value:c},S.createElement(Hg.Provider,{children:n,value:p}))}function Qb(t){let{children:e,location:n}=t;return r5(lw(e),n)}new Promise(()=>{});function lw(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,lw(r.props.children,i));return}r.type!==Re&&_n(!1),!r.props.index||!r.props.children||_n(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cw(){return cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cw.apply(this,arguments)}function g5(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function y5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function v5(t,e){return t.button===0&&(!e||e==="_self")&&!y5(t)}function uw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function _5(t,e){let n=uw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const w5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],E5="6";try{window.__reactRouterVersion=E5}catch{}const I5="startTransition",Fp=h0[I5];function T5(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=R6({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Fp?Fp(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>wN(r),[r]),S.createElement(EN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function S5(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=P6({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Fp?Fp(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>wN(r),[r]),S.createElement(EN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const b5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dw=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=g5(e,w5),{basename:m}=S.useContext(_a),E,p=!1;if(typeof c=="string"&&A5.test(c)&&(E=c,b5))try{let I=new URL(window.location.href),x=c.startsWith("//")?new URL(I.protocol+c):new URL(c),P=xE(x.pathname,m);x.origin===I.origin&&P!=null?c=P+x.search+x.hash:p=!0}catch{}let v=t5(c,{relative:s}),w=x5(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function _(I){r&&r(I),I.defaultPrevented||w(I)}return S.createElement("a",cw({},f,{href:E||v,onClick:p||i?r:_,ref:n,target:l}))});var Yb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yb||(Yb={}));var Jb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jb||(Jb={}));function x5(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Fl(),c=wi(),d=gN(t,{relative:o});return S.useCallback(h=>{if(v5(h,n)){h.preventDefault();let f=r!==void 0?r:Oh(c)===Oh(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function JX(t){let e=S.useRef(uw(t)),n=S.useRef(!1),r=wi(),s=S.useMemo(()=>_5(r.search,n.current?null:e.current),[r.search]),i=Fl(),o=S.useCallback((a,l)=>{const c=uw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const IN=S.createContext(void 0),R5=({children:t})=>{const[e,n]=S.useState("medium"),[r,s]=S.useState(!1),[i,o]=S.useState(!1);S.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),S.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),S.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),S.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return y.jsx(IN.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},XX=()=>{const t=S.useContext(IN);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},P5=cE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),Mn=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?XU:"button";return y.jsx(o,{className:Jt(P5({variant:e,size:n,className:t})),ref:i,...s})});Mn.displayName="Button";const ri=S.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),y.jsx("input",{type:e,className:Jt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});ri.displayName="Input";const C5=()=>{};var Xb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},k5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):k5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new N5;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D5=function(t){const e=TN(t);return kE.encodeByteArray(e,!0)},Up=function(t){return D5(t).replace(/\./g,"")},SN=function(t){try{return kE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=()=>bN().__FIREBASE_DEFAULTS__,L5=()=>{if(typeof process>"u"||typeof Xb>"u")return;const t=Xb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},M5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SN(t[1]);return e&&JSON.parse(e)},Kg=()=>{try{return C5()||O5()||L5()||M5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AN=t=>{var e,n;return(n=(e=Kg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},NE=t=>{const e=AN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xN=()=>{var t;return(t=Kg())==null?void 0:t.config},RN=t=>{var e;return(e=Kg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Up(JSON.stringify(n)),Up(JSON.stringify(o)),""].join(".")}const Jd={};function V5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jd))Jd[e]?t.emulator.push(e):t.prod.push(e);return t}function F5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zb=!1;function Gg(t,e){if(typeof window>"u"||typeof document>"u"||!$s(window.location.host)||Jd[t]===e||Jd[t]||Zb)return;Jd[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=V5().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Zb=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=F5(r),m=n("text"),E=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),v=document.getElementById(p)||document.createElement("a"),w=n("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;a(I),d(v,p);const x=c();l(_,w),I.append(_,E,v,x),document.body.appendChild(I)}i?(E.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function CN(){var e;const t=(e=Kg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function B5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z5(){const t=Un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kN(){return!CN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NN(){return!CN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function DE(){try{return typeof indexedDB=="object"}catch{return!1}}function W5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="FirebaseError";class Bs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=q5,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?H5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Bs(s,a,r)}}function H5(t,e){return t.replace(K5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const K5=/\{\$([^}]+)}/g;function G5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(eA(i)&&eA(o)){if(!Vs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function eA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Od(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Q5(t,e){const n=new Y5(t,e);return n.subscribe.bind(n)}class Y5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");J5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ev),s.error===void 0&&(s.error=Ev),s.complete===void 0&&(s.complete=Ev);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ev(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e9(e))try{this.getOrInitializeService({instanceIdentifier:Fa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fa){return this.instances.has(e)}getOptions(e=Fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fa){return this.component?this.component.multipleInstances?e:Fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z5(t){return t===Fa?void 0:t}function e9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new X5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(dt||(dt={}));const n9={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},r9=dt.INFO,s9={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},i9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=s9[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qg{constructor(e){this.name=e,this._logLevel=r9,this._logHandler=i9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const o9=(t,e)=>e.some(n=>t instanceof n);let tA,nA;function a9(){return tA||(tA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l9(){return nA||(nA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DN=new WeakMap,fw=new WeakMap,ON=new WeakMap,Iv=new WeakMap,OE=new WeakMap;function c9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DN.set(n,t)}).catch(()=>{}),OE.set(e,t),e}function u9(t){if(fw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});fw.set(t,e)}let mw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ON.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function d9(t){mw=t(mw)}function h9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Tv(this),e,...n);return ON.set(r,e.sort?e.sort():[e]),Xo(r)}:l9().includes(t)?function(...e){return t.apply(Tv(this),e),Xo(DN.get(this))}:function(...e){return Xo(t.apply(Tv(this),e))}}function f9(t){return typeof t=="function"?h9(t):(t instanceof IDBTransaction&&u9(t),o9(t,a9())?new Proxy(t,mw):t)}function Xo(t){if(t instanceof IDBRequest)return c9(t);if(Iv.has(t))return Iv.get(t);const e=f9(t);return e!==t&&(Iv.set(t,e),OE.set(e,t)),e}const Tv=t=>OE.get(t);function m9(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Xo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xo(o.result),l.oldVersion,l.newVersion,Xo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const p9=["get","getKey","getAll","getAllKeys","count"],g9=["put","add","delete","clear"],Sv=new Map;function rA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sv.get(e))return Sv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=g9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||p9.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Sv.set(e,i),i}d9(t=>({...t,get:(e,n,r)=>rA(e,n)||t.get(e,n,r),has:(e,n)=>!!rA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function v9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pw="@firebase/app",sA="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Qg("@firebase/app"),_9="@firebase/app-compat",w9="@firebase/analytics-compat",E9="@firebase/analytics",I9="@firebase/app-check-compat",T9="@firebase/app-check",S9="@firebase/auth",b9="@firebase/auth-compat",A9="@firebase/database",x9="@firebase/data-connect",R9="@firebase/database-compat",P9="@firebase/functions",C9="@firebase/functions-compat",k9="@firebase/installations",N9="@firebase/installations-compat",D9="@firebase/messaging",O9="@firebase/messaging-compat",L9="@firebase/performance",M9="@firebase/performance-compat",V9="@firebase/remote-config",F9="@firebase/remote-config-compat",U9="@firebase/storage",j9="@firebase/storage-compat",$9="@firebase/firestore",B9="@firebase/ai",z9="@firebase/firestore-compat",W9="firebase",q9="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="[DEFAULT]",H9={[pw]:"fire-core",[_9]:"fire-core-compat",[E9]:"fire-analytics",[w9]:"fire-analytics-compat",[T9]:"fire-app-check",[I9]:"fire-app-check-compat",[S9]:"fire-auth",[b9]:"fire-auth-compat",[A9]:"fire-rtdb",[x9]:"fire-data-connect",[R9]:"fire-rtdb-compat",[P9]:"fire-fn",[C9]:"fire-fn-compat",[k9]:"fire-iid",[N9]:"fire-iid-compat",[D9]:"fire-fcm",[O9]:"fire-fcm-compat",[L9]:"fire-perf",[M9]:"fire-perf-compat",[V9]:"fire-rc",[F9]:"fire-rc-compat",[U9]:"fire-gcs",[j9]:"fire-gcs-compat",[$9]:"fire-fst",[z9]:"fire-fst-compat",[B9]:"fire-vertex","fire-js":"fire-js",[W9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Map,gw=new Map,yw=new Map;function iA(t,e){try{t.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yi(t){const e=t.name;if(yw.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;yw.set(e,t);for(const n of uu.values())iA(n,t);for(const n of gw.values())iA(n,t);return!0}function Ul(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function K9(t,e,n=jp){Ul(t,e).clearInstance(n)}function Mr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zo=new Wu("app","Firebase",G9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=q9;function LN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:jp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zo.create("bad-app-name",{appName:String(s)});if(n||(n=xN()),!n)throw Zo.create("no-options");const i=uu.get(s);if(i){if(Vs(n,i.options)&&Vs(r,i.config))return i;throw Zo.create("duplicate-app",{appName:s})}const o=new t9(s);for(const l of yw.values())o.addComponent(l);const a=new Q9(n,r,o);return uu.set(s,a),a}function Yg(t=jp){const e=uu.get(t);if(!e&&t===jp&&xN())return LN();if(!e)throw Zo.create("no-app",{appName:t});return e}async function eZ(t){let e=!1;const n=t.name;uu.has(n)?(e=!0,uu.delete(n)):gw.has(n)&&t.decRefCount()<=0&&(gw.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function rs(t,e,n){let r=H9[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(o.join(" "));return}yi(new Fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="firebase-heartbeat-database",J9=1,Mh="firebase-heartbeat-store";let bv=null;function MN(){return bv||(bv=m9(Y9,J9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zo.create("idb-open",{originalErrorMessage:t.message})})),bv}async function X9(t){try{const n=(await MN()).transaction(Mh),r=await n.objectStore(Mh).get(VN(t));return await n.done,r}catch(e){if(e instanceof Bs)Hi.warn(e.message);else{const n=Zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(n.message)}}}async function oA(t,e){try{const r=(await MN()).transaction(Mh,"readwrite");await r.objectStore(Mh).put(e,VN(t)),await r.done}catch(n){if(n instanceof Bs)Hi.warn(n.message);else{const r=Zo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(r.message)}}}function VN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=1024,ez=30;class tz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=aA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>ez){const o=sz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=aA(),{heartbeatsToSend:r,unsentEntries:s}=nz(this._heartbeatsCache.heartbeats),i=Up(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hi.warn(n),""}}}function aA(){return new Date().toISOString().substring(0,10)}function nz(t,e=Z9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),lA(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DE()?W5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await X9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return oA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return oA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function lA(t){return Up(JSON.stringify({version:2,heartbeats:t})).length}function sz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(t){yi(new Fs("platform-logger",e=>new y9(e),"PRIVATE")),yi(new Fs("heartbeat",e=>new tz(e),"PRIVATE")),rs(pw,sA,t),rs(pw,sA,"esm2020"),rs("fire-js","")}iz("");function FN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oz=FN,UN=new Wu("auth","Firebase",FN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new Qg("@firebase/auth");function az(t,...e){$p.logLevel<=dt.WARN&&$p.warn(`Auth (${jl}): ${t}`,...e)}function $m(t,...e){$p.logLevel<=dt.ERROR&&$p.error(`Auth (${jl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t,...e){throw LE(t,...e)}function ui(t,...e){return LE(t,...e)}function jN(t,e,n){const r={...oz(),[e]:n};return new Wu("auth","Firebase",r).create(e,{appName:t.name})}function Vi(t){return jN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UN.create(t,...e)}function Ue(t,e,...n){if(!t)throw LE(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $m(e),new Error(e)}function Ki(t,e){t||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $N(){return cA()==="http:"||cA()==="https:"}function cA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($N()||$5()||"connection"in navigator)?navigator.onLine:!0}function cz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ki(n>e,"Short delay should be less than long delay!"),this.isMobile=U5()||B5()}get(){return lz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e){Ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hz=new df(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zs(t,e,n,r,s={}){return zN(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=uf({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return j5()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&$s(t.emulatorConfig.host)&&(c.credentials="include"),BN.fetch()(await WN(t,t.config.apiHost,n,a),c)})}async function zN(t,e,n){t._canInitEmulator=!1;const r={...uz,...e};try{const s=new mz(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw am(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw am(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw am(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw am(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jN(t,d,c);Us(t,d)}}catch(s){if(s instanceof Bs)throw s;Us(t,"network-request-failed",{message:String(s)})}}async function hf(t,e,n,r,s={}){const i=await zs(t,e,n,r,s);return"mfaPendingCredential"in i&&Us(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function WN(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?ME(t.config,s):`${t.config.apiScheme}://${s}`;return dz.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function fz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ui(this.auth,"network-request-failed")),hz.get())})}}function am(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ui(t,e,r);return s.customData._tokenResponse=n,s}function uA(t){return t!==void 0&&t.enterprise!==void 0}class pz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gz(t,e){return zs(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function zp(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vz(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=VE(r);Ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xd(Av(s.auth_time)),issuedAtTime:Xd(Av(s.iat)),expirationTime:Xd(Av(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Av(t){return Number(t)*1e3}function VE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $m("JWT malformed, contained fewer than 3 sections"),null;try{const s=SN(n);return s?JSON.parse(s):($m("Failed to decode base64 JWT payload"),null)}catch(s){return $m("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dA(t){const e=VE(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bs&&_z(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _z({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xd(this.lastLoginAt),this.creationTime=Xd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await du(t,zp(e,{idToken:n}));Ue(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?qN(s.providerUserInfo):[],o=Iz(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Ez(t){const e=tt(t);await Wp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Iz(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tz(t,e){const n=await zN(t,{},async()=>{const r=uf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await WN(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&$s(t.emulatorConfig.host)&&(l.credentials="include"),BN.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Sz(t,e){return zs(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=dA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Tz(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Fc;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fc,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ps{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new wz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await du(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vz(this,e)}reload(){return Ez(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ps({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject(Vi(this.auth));const e=await this.getIdToken();return await du(this,yz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:E,stsTokenManager:p}=n;Ue(h&&p,e,"internal-error");const v=Fc.fromJSON(this.name,p);Ue(typeof h=="string",e,"internal-error"),fo(r,e.name),fo(s,e.name),Ue(typeof f=="boolean",e,"internal-error"),Ue(typeof m=="boolean",e,"internal-error"),fo(i,e.name),fo(o,e.name),fo(a,e.name),fo(l,e.name),fo(c,e.name),fo(d,e.name);const w=new Ps({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return E&&Array.isArray(E)&&(w.providerData=E.map(_=>({..._}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fc;s.updateFromServerResponse(n);const i=new Ps({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?qN(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Fc;a.updateFromIdToken(r);const l=new Ps({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Map;function Ni(t){Ki(t instanceof Function,"Expected a class definition");let e=hA.get(t);return e?(Ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HN.type="NONE";const _w=HN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e,n){return`firebase:${t}:${e}:${n}`}class Uc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bm(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bm("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zp(this.auth,{idToken:e}).catch(()=>{});return n?Ps._fromGetAccountInfoResponse(this.auth,n,e):null}return Ps._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Uc(Ni(_w),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ni(_w);const o=Bm(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await zp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Ps._fromGetAccountInfoResponse(e,f,d)}else h=Ps._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Uc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Uc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XN(e))return"Blackberry";if(ZN(e))return"Webos";if(GN(e))return"Safari";if((e.includes("chrome/")||QN(e))&&!e.includes("edge/"))return"Chrome";if(JN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KN(t=Un()){return/firefox\//i.test(t)}function GN(t=Un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QN(t=Un()){return/crios\//i.test(t)}function YN(t=Un()){return/iemobile/i.test(t)}function JN(t=Un()){return/android/i.test(t)}function XN(t=Un()){return/blackberry/i.test(t)}function ZN(t=Un()){return/webos/i.test(t)}function FE(t=Un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bz(t=Un()){var e;return FE(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Az(){return z5()&&document.documentMode===10}function eD(t=Un()){return FE(t)||JN(t)||ZN(t)||XN(t)||/windows phone/i.test(t)||YN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e=[]){let n;switch(t){case"Browser":n=fA(Un());break;case"Worker":n=`${fA(Un())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rz(t,e={}){return zs(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=6;class Cz{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Pz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mA(this),this.idTokenSubscription=new mA(this),this.beforeStateQueue=new xz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Uc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zp(this,{idToken:e}),r=await Ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject(Vi(this));const n=e?tt(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Rz(this),n=new Cz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Sz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ni(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await Uc.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&az(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wa(t){return tt(t)}class mA{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q5(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nz(t){Jg=t}function nD(t){return Jg.loadJS(t)}function Dz(){return Jg.recaptchaEnterpriseScript}function Oz(){return Jg.gapiScript}function Lz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Mz{constructor(){this.enterprise=new Vz}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Vz{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Fz="recaptcha-enterprise",rD="NO_RECAPTCHA";class Uz{constructor(e){this.type=Fz,this.auth=wa(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{gz(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new pz(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;uA(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(rD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mz().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&uA(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Dz();l.length!==0&&(l+=a),nD(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function pA(t,e,n,r=!1,s=!1){const i=new Uz(t);let o;if(s)o=rD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function qp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await pA(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await pA(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e){const n=Ul(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Vs(i,e??{}))return s;Us(s,"already-initialized")}return n.initialize({options:e})}function jz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $z(t,e,n){const r=wa(t);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=iD(e),{host:o,port:a}=Bz(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(Vs(c,r.config.emulator)&&Vs(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,$s(o)?(cf(`${i}//${o}${l}`),Gg("Auth",!0)):zz()}function iD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Bz(t){const e=iD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:gA(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:gA(o)}}}function gA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function Wz(t,e){return zs(t,"POST","/v1/accounts:update",e)}async function qz(t,e){return zs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hz(t,e){return hf(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}async function Kz(t,e){return zs(t,"POST","/v1/accounts:sendOobCode",Ei(t,e))}async function Gz(t,e){return Kz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t,e){return hf(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function Yz(t,e){return hf(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends UE{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,n,"signInWithPassword",Hz);case"emailLink":return Qz(e,{email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,r,"signUpPassword",qz);case"emailLink":return Yz(e,{idToken:n,email:this._email,oobCode:this._password});default:Us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t,e){return hf(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz="http://localhost";class wl extends UE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new wl(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return jc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jc(e,n)}buildRequest(){const e={requestUri:Jz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zz(t){const e=Dd(Od(t)).link,n=e?Dd(Od(e)).deep_link_id:null,r=Dd(Od(t)).deep_link_id;return(r?Dd(Od(r)).link:null)||r||n||e||t}class jE{constructor(e){const n=Dd(Od(e)),r=n.apiKey??null,s=n.oobCode??null,i=Xz(n.mode??null);Ue(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Zz(e);try{return new jE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this.providerId=qu.PROVIDER_ID}static credential(e,n){return Vh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jE.parseLink(n);return Ue(r,"argument-error"),Vh._fromEmailAndCode(e,r.code,r.tenantId)}}qu.PROVIDER_ID="password";qu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends oD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends ff{constructor(){super("facebook.com")}static credential(e){return wl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return So.credential(e.oauthAccessToken)}catch{return null}}}So.FACEBOOK_SIGN_IN_METHOD="facebook.com";So.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends ff{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wl._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bo.credential(n,r)}catch{return null}}}bo.GOOGLE_SIGN_IN_METHOD="google.com";bo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends ff{constructor(){super("github.com")}static credential(e){return wl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ao.credential(e.oauthAccessToken)}catch{return null}}}Ao.GITHUB_SIGN_IN_METHOD="github.com";Ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends ff{constructor(){super("twitter.com")}static credential(e,n){return wl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xo.credential(n,r)}catch{return null}}}xo.TWITTER_SIGN_IN_METHOD="twitter.com";xo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eW(t,e){return hf(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ps._fromIdTokenResponse(e,r,s),o=yA(r);return new El({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yA(r);return new El({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends Bs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hp(e,n,r,s)}}function aD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hp._fromErrorAndOperation(t,i,e,r):i})}async function tW(t,e,n=!1){const r=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return El._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(t,e,n=!1){const{auth:r}=t;if(Mr(r.app))return Promise.reject(Vi(r));const s="reauthenticate";try{const i=await du(t,aD(r,s,e,t),n);Ue(i.idToken,r,"internal-error");const o=VE(i.idToken);Ue(o,r,"internal-error");const{sub:a}=o;return Ue(t.uid===a,r,"user-mismatch"),El._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Us(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t,e,n=!1){if(Mr(t.app))return Promise.reject(Vi(t));const r="signIn",s=await aD(t,r,e),i=await El._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function nW(t,e){return cD(wa(t),e)}async function tZ(t,e){return lD(tt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t){const e=wa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rW(t,e,n){const r=wa(t);await qp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Gz)}async function vA(t,e,n){if(Mr(t.app))return Promise.reject(Vi(t));const r=wa(t),o=await qp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eW).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&uD(t),l}),a=await El._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function sW(t,e,n){return Mr(t.app)?Promise.reject(Vi(t)):nW(tt(t),qu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iW(t,e){return zs(t,"POST","/v1/accounts:createAuthUri",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oW(t,e){const n=$N()?Bp():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await iW(tt(t),r);return s||[]}function nZ(t,e){return aW(tt(t),null,e)}async function aW(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await du(t,Wz(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(t,e){return tt(t).setPersistence(e)}function cW(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function uW(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function dW(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function _A(t){return tt(t).signOut()}const Kp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kp,"1"),this.storage.removeItem(Kp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=1e3,fW=10;class hD extends dD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Az()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fW):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hD.type="LOCAL";const $E=hD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD extends dD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fD.type="SESSION";const BE=fD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Xg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await mW(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=zE("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function gW(t){di().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function yW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function _W(){return mD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="firebaseLocalStorageDb",wW=1,Gp="firebaseLocalStorage",gD="fbase_key";class mf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zg(t,e){return t.transaction([Gp],e?"readwrite":"readonly").objectStore(Gp)}function EW(){const t=indexedDB.deleteDatabase(pD);return new mf(t).toPromise()}function ww(){const t=indexedDB.open(pD,wW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gp,{keyPath:gD})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gp)?e(r):(r.close(),await EW(),e(await ww()))})})}async function wA(t,e,n){const r=Zg(t,!0).put({[gD]:e,value:n});return new mf(r).toPromise()}async function IW(t,e){const n=Zg(t,!1).get(e),r=await new mf(n).toPromise();return r===void 0?null:r.value}function EA(t,e){const n=Zg(t,!0).delete(e);return new mf(n).toPromise()}const TW=800,SW=3;class yD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ww(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xg._getInstance(_W()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await yW(),!this.activeServiceWorker)return;this.sender=new pW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ww();return await wA(e,Kp,"1"),await EA(e,Kp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>IW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>EA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Zg(s,!1).getAll();return new mf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yD.type="LOCAL";const bW=yD;new df(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t,e){return e?Ni(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends UE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xW(t){return cD(t.auth,new WE(t),t.bypassAuthState)}function RW(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),lD(n,new WE(t),t.bypassAuthState)}async function PW(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),tW(n,new WE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xW;case"linkViaPopup":case"linkViaRedirect":return PW;case"reauthViaPopup":case"reauthViaRedirect":return RW;default:Us(this.auth,"internal-error")}}resolve(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW=new df(2e3,1e4);class Tc extends vD{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Tc.currentPopupAction&&Tc.currentPopupAction.cancel(),Tc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const e=zE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CW.get())};e()}}Tc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW="pendingRedirect",zm=new Map;class NW extends vD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zm.get(this.auth._key());if(!e){try{const r=await DW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zm.set(this.auth._key(),e)}return this.bypassAuthState||zm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DW(t,e){const n=MW(e),r=LW(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function OW(t,e){zm.set(t._key(),e)}function LW(t){return Ni(t._redirectPersistence)}function MW(t){return Bm(kW,t.config.apiKey,t.name)}async function VW(t,e,n=!1){if(Mr(t.app))return Promise.reject(Vi(t));const r=wa(t),s=AW(r,e),o=await new NW(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=10*60*1e3;class UW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_D(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ui(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FW&&this.cachedEventUids.clear(),this.cachedEventUids.has(IA(e))}saveEventToCache(e){this.cachedEventUids.add(IA(e)),this.lastProcessedEventTime=Date.now()}}function IA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _D({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _D(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $W(t,e={}){return zs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zW=/^https?/;async function WW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $W(t);for(const n of e)try{if(qW(n))return}catch{}Us(t,"unauthorized-domain")}function qW(t){const e=Bp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!zW.test(n))return!1;if(BW.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HW=new df(3e4,6e4);function TA(){const t=di().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KW(t){return new Promise((e,n)=>{var s,i,o;function r(){TA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TA(),n(ui(t,"network-request-failed"))},timeout:HW.get()})}if((i=(s=di().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=di().gapi)!=null&&o.load)r();else{const a=Lz("iframefcb");return di()[a]=()=>{gapi.load?r():n(ui(t,"network-request-failed"))},nD(`${Oz()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Wm=null,e})}let Wm=null;function GW(t){return Wm=Wm||KW(t),Wm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW=new df(5e3,15e3),YW="__/auth/iframe",JW="emulator/auth/iframe",XW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eq(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ME(e,JW):`https://${t.config.authDomain}/${YW}`,r={apiKey:e.apiKey,appName:t.name,v:jl},s=ZW.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${uf(r).slice(1)}`}async function tq(t){const e=await GW(t),n=di().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:eq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XW,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ui(t,"network-request-failed"),a=di().setTimeout(()=>{i(o)},QW.get());function l(){di().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rq=500,sq=600,iq="_blank",oq="http://localhost";class SA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aq(t,e,n,r=rq,s=sq){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...nq,width:r.toString(),height:s.toString(),top:i,left:o},c=Un().toLowerCase();n&&(a=QN(c)?iq:n),KN(c)&&(e=e||oq,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,E])=>`${f}${m}=${E},`,"");if(bz(c)&&a!=="_self")return lq(e||"",a),new SA(null);const h=window.open(e||"",a,d);Ue(h,t,"popup-blocked");try{h.focus()}catch{}return new SA(h)}function lq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq="__/auth/handler",uq="emulator/auth/handler",dq=encodeURIComponent("fac");async function bA(t,e,n,r,s,i){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jl,eventId:s};if(e instanceof oD){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",G5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof ff){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${dq}=${encodeURIComponent(l)}`:"";return`${hq(t)}?${uf(a).slice(1)}${c}`}function hq({config:t}){return t.emulator?ME(t,uq):`https://${t.authDomain}/${cq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="webStorageSupport";class fq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BE,this._completeRedirectFn=VW,this._overrideRedirectResult=OW}async _openPopup(e,n,r,s){var o;Ki((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await bA(e,n,r,Bp(),s);return aq(e,i,zE())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await bA(e,n,r,Bp(),s);return gW(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ki(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tq(e),r=new UW(e);return n.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xv,{type:xv},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[xv];i!==void 0&&n(!!i),Us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eD()||GN()||FE()}}const mq=fq;var AA="@firebase/auth",xA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yq(t){yi(new Fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tD(t)},c=new kz(r,s,i,l);return jz(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yi(new Fs("auth-internal",e=>{const n=wa(e.getProvider("auth").getImmediate());return(r=>new pq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(AA,xA,gq(t)),rs(AA,xA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq=5*60,_q=RN("authIdTokenMaxAge")||vq;let RA=null;const wq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_q)return;const s=n==null?void 0:n.token;RA!==s&&(RA=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rZ(t=Yg()){const e=Ul(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sD(t,{popupRedirectResolver:mq,persistence:[bW,$E,BE]}),r=RN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=wq(i.toString());uW(n,o,()=>o(n.currentUser)),cW(n,a=>o(a))}}const s=AN("auth");return s&&$z(n,`http://${s}`),n}function Eq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Nz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ui("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Eq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yq("Browser");var Iq="firebase",Tq="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(Iq,Tq,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=new Map,bq={activated:!1,tokenObservers:[]},Aq={initialized:!1,enabled:!1};function js(t){return Sq.get(t)||{...bq}}function wD(){return Aq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq="https://content-firebaseappcheck.googleapis.com/v1";const Rq="exchangeDebugToken",PA={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},sZ=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new hw,this.pending.promise.catch(n=>{}),await Cq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new hw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Cq(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Uo=new Wu("appCheck","AppCheck",kq);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){if(!js(t).activated)throw Uo.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw Uo.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw Uo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Uo.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Uo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function TD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${xq}/projects/${n}/apps/${r}:${Rq}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq="firebase-app-check-database",Dq=1,Ew="firebase-app-check-store";let lm=null;function Oq(){return lm||(lm=new Promise((t,e)=>{try{const n=indexedDB.open(Nq,Dq);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Uo.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Ew,{keyPath:"compositeKey"})}}}catch(n){e(Uo.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),lm)}function Lq(t,e){return Mq(Vq(t),e)}async function Mq(t,e){const r=(await Oq()).transaction(Ew,"readwrite"),i=r.objectStore(Ew).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Uo.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function Vq(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Qg("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t,e){return DE()?Lq(t,e).catch(n=>{Ld.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){return wD().enabled}async function bD(){const t=wD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq={error:"UNKNOWN_ERROR"};function Uq(t){return kE.encodeString(JSON.stringify(t),!1)}async function Iw(t,e=!1,n=!1){const r=t.app;ED(r);const s=js(r);let i=s.token,o;if(i&&!Md(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Md(c)?i=c:await Rv(r,void 0))}if(!e&&i&&Md(i))return{token:i.token};let a=!1;if(SD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=ID(TD(r,await bD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Rv(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Ld.warn(c.message):n&&Ld.error(c),Pv(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await js(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Ld.warn(c.message):n&&Ld.error(c),o=c}let l;return i?o?Md(i)?l={token:i.token,internalError:o}:l=Pv(o):(l={token:i.token},s.token=i,await Rv(r,i)):l=Pv(o),a&&zq(r,l),l}async function jq(t){const e=t.app;ED(e);const{provider:n}=js(e);if(SD()){const r=await bD(),{token:s}=await ID(TD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function $q(t,e,n,r){const{app:s}=t,i=js(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Md(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),CA(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>CA(t))}function AD(t,e){const n=js(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function CA(t){const{app:e}=t,n=js(e);let r=n.tokenRefresher;r||(r=Bq(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Bq(t){const{app:e}=t;return new Pq(async()=>{const n=js(e);let r;if(n.token?r=await Iw(t,!0):r=await Iw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=js(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},PA.RETRIAL_MIN_WAIT,PA.RETRIAL_MAX_WAIT)}function zq(t,e){const n=js(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Md(t){return t.expireTimeMillis-Date.now()>0}function Pv(t){return{token:Uq(Fq),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=js(this.app);for(const n of e)AD(this.app,n.next);return Promise.resolve()}}function qq(t,e){return new Wq(t,e)}function Hq(t){return{getToken:e=>Iw(t,e),getLimitedUseToken:()=>jq(t),addTokenListener:e=>$q(t,"INTERNAL",e),removeTokenListener:e=>AD(t.app,e)}}const Kq="@firebase/app-check",Gq="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq="app-check",kA="app-check-internal";function Yq(){yi(new Fs(Qq,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return qq(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(kA).initialize()})),yi(new Fs(kA,t=>{const e=t.getProvider("app-check").getImmediate();return Hq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),rs(Kq,Gq)}Yq();var NA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ea,xD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function R(){}R.prototype=T.prototype,A.F=T.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(C,D,O){for(var k=Array(arguments.length-2),B=2;B<arguments.length;B++)k[B-2]=arguments[B];return T.prototype[D].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,R){R||(R=0);const C=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)C[D]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(D=0;D<16;++D)C[D]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=A.g[0],R=A.g[1],D=A.g[2];let O=A.g[3],k;k=T+(O^R&(D^O))+C[0]+3614090360&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[1]+3905402710&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[2]+606105819&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[3]+3250441966&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(O^R&(D^O))+C[4]+4118548399&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[5]+1200080426&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[6]+2821735955&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[7]+4249261313&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(O^R&(D^O))+C[8]+1770035416&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[9]+2336552879&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[10]+4294925233&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[11]+2304563134&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(O^R&(D^O))+C[12]+1804603682&4294967295,T=R+(k<<7&4294967295|k>>>25),k=O+(D^T&(R^D))+C[13]+4254626195&4294967295,O=T+(k<<12&4294967295|k>>>20),k=D+(R^O&(T^R))+C[14]+2792965006&4294967295,D=O+(k<<17&4294967295|k>>>15),k=R+(T^D&(O^T))+C[15]+1236535329&4294967295,R=D+(k<<22&4294967295|k>>>10),k=T+(D^O&(R^D))+C[1]+4129170786&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[6]+3225465664&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[11]+643717713&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[0]+3921069994&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(D^O&(R^D))+C[5]+3593408605&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[10]+38016083&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[15]+3634488961&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[4]+3889429448&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(D^O&(R^D))+C[9]+568446438&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[14]+3275163606&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[3]+4107603335&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[8]+1163531501&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(D^O&(R^D))+C[13]+2850285829&4294967295,T=R+(k<<5&4294967295|k>>>27),k=O+(R^D&(T^R))+C[2]+4243563512&4294967295,O=T+(k<<9&4294967295|k>>>23),k=D+(T^R&(O^T))+C[7]+1735328473&4294967295,D=O+(k<<14&4294967295|k>>>18),k=R+(O^T&(D^O))+C[12]+2368359562&4294967295,R=D+(k<<20&4294967295|k>>>12),k=T+(R^D^O)+C[5]+4294588738&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[8]+2272392833&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[11]+1839030562&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[14]+4259657740&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(R^D^O)+C[1]+2763975236&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[4]+1272893353&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[7]+4139469664&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[10]+3200236656&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(R^D^O)+C[13]+681279174&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[0]+3936430074&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[3]+3572445317&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[6]+76029189&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(R^D^O)+C[9]+3654602809&4294967295,T=R+(k<<4&4294967295|k>>>28),k=O+(T^R^D)+C[12]+3873151461&4294967295,O=T+(k<<11&4294967295|k>>>21),k=D+(O^T^R)+C[15]+530742520&4294967295,D=O+(k<<16&4294967295|k>>>16),k=R+(D^O^T)+C[2]+3299628645&4294967295,R=D+(k<<23&4294967295|k>>>9),k=T+(D^(R|~O))+C[0]+4096336452&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[7]+1126891415&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[14]+2878612391&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[5]+4237533241&4294967295,R=D+(k<<21&4294967295|k>>>11),k=T+(D^(R|~O))+C[12]+1700485571&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[3]+2399980690&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[10]+4293915773&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[1]+2240044497&4294967295,R=D+(k<<21&4294967295|k>>>11),k=T+(D^(R|~O))+C[8]+1873313359&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[15]+4264355552&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[6]+2734768916&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[13]+1309151649&4294967295,R=D+(k<<21&4294967295|k>>>11),k=T+(D^(R|~O))+C[4]+4149444226&4294967295,T=R+(k<<6&4294967295|k>>>26),k=O+(R^(T|~D))+C[11]+3174756917&4294967295,O=T+(k<<10&4294967295|k>>>22),k=D+(T^(O|~R))+C[2]+718787259&4294967295,D=O+(k<<15&4294967295|k>>>17),k=R+(O^(D|~T))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+O&4294967295}r.prototype.v=function(A,T){T===void 0&&(T=A.length);const R=T-this.blockSize,C=this.C;let D=this.h,O=0;for(;O<T;){if(D==0)for(;O<=R;)s(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<T;)if(C[D++]=A.charCodeAt(O++),D==this.blockSize){s(this,C),D=0;break}}else for(;O<T;)if(C[D++]=A[O++],D==this.blockSize){s(this,C),D=0;break}}this.h=D,this.o+=T},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)A[T++]=this.g[R]>>>C&255;return A};function i(A,T){var R=a;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=T(A)}function o(A,T){this.h=T;const R=[];let C=!0;for(let D=A.length-1;D>=0;D--){const O=A[D]|0;C&&O==T||(R[D]=O,C=!1)}this.g=R}var a={};function l(A){return-128<=A&&A<128?i(A,function(T){return new o([T|0],T<0?-1:0)}):new o([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(A<0)return v(c(-A));const T=[];let R=1;for(let C=0;A>=R;C++)T[C]=A/R|0,R*=4294967296;return new o(T,0)}function d(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return v(d(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(T,8));let C=h;for(let O=0;O<A.length;O+=8){var D=Math.min(8,A.length-O);const k=parseInt(A.substring(O,O+D),T);D<8?(D=c(Math.pow(T,D)),C=C.j(D).add(c(k))):(C=C.j(R),C=C.add(c(k)))}return C}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(p(this))return-v(this).m();let A=0,T=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);A+=(C>=0?C:4294967296+C)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(E(this))return"0";if(p(this))return"-"+v(this).toString(A);const T=c(Math.pow(A,6));var R=this;let C="";for(;;){const D=x(R,T).g;R=w(R,D.j(T));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=D,E(R))return O+C;for(;O.length<6;)O="0"+O;C=O+C}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function E(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function p(A){return A.h==-1}t.l=function(A){return A=w(this,A),p(A)?-1:E(A)?0:1};function v(A){const T=A.g.length,R=[];for(let C=0;C<T;C++)R[C]=~A.g[C];return new o(R,~A.h).add(f)}t.abs=function(){return p(this)?v(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),R=[];let C=0;for(let D=0;D<=T;D++){let O=C+(this.i(D)&65535)+(A.i(D)&65535),k=(O>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);C=k>>>16,O&=65535,k&=65535,R[D]=k<<16|O}return new o(R,R[R.length-1]&-2147483648?-1:0)};function w(A,T){return A.add(v(T))}t.j=function(A){if(E(this)||E(A))return h;if(p(this))return p(A)?v(this).j(v(A)):v(v(this).j(A));if(p(A))return v(this.j(v(A)));if(this.l(m)<0&&A.l(m)<0)return c(this.m()*A.m());const T=this.g.length+A.g.length,R=[];for(var C=0;C<2*T;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let D=0;D<A.g.length;D++){const O=this.i(C)>>>16,k=this.i(C)&65535,B=A.i(D)>>>16,ce=A.i(D)&65535;R[2*C+2*D]+=k*ce,_(R,2*C+2*D),R[2*C+2*D+1]+=O*ce,_(R,2*C+2*D+1),R[2*C+2*D+1]+=k*B,_(R,2*C+2*D+1),R[2*C+2*D+2]+=O*B,_(R,2*C+2*D+2)}for(A=0;A<T;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=T;A<2*T;A++)R[A]=0;return new o(R,0)};function _(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function I(A,T){this.g=A,this.h=T}function x(A,T){if(E(T))throw Error("division by zero");if(E(A))return new I(h,h);if(p(A))return T=x(v(A),T),new I(v(T.g),v(T.h));if(p(T))return T=x(A,v(T)),new I(v(T.g),T.h);if(A.g.length>30){if(p(A)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=T;C.l(A)<=0;)R=P(R),C=P(C);var D=L(R,1),O=L(C,1);for(C=L(C,2),R=L(R,2);!E(C);){var k=O.add(C);k.l(A)<=0&&(D=D.add(R),O=k),C=L(C,1),R=L(R,1)}return T=w(A,D.j(T)),new I(D,T)}for(D=h;A.l(T)>=0;){for(R=Math.max(1,Math.floor(A.m()/T.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),O=c(R),k=O.j(T);p(k)||k.l(A)>0;)R-=C,O=c(R),k=O.j(T);E(O)&&(O=f),D=D.add(O),A=w(A,k)}return new I(D,A)}t.B=function(A){return x(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)&A.i(C);return new o(R,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)|A.i(C);return new o(R,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),R=[];for(let C=0;C<T;C++)R[C]=this.i(C)^A.i(C);return new o(R,this.h^A.h)};function P(A){const T=A.g.length+1,R=[];for(let C=0;C<T;C++)R[C]=A.i(C)<<1|A.i(C-1)>>>31;return new o(R,A.h)}function L(A,T){const R=T>>5;T%=32;const C=A.g.length-R,D=[];for(let O=0;O<C;O++)D[O]=T>0?A.i(O+R)>>>T|A.i(O+R+1)<<32-T:A.i(O+R);return new o(D,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ea=o}).apply(typeof NA<"u"?NA:typeof self<"u"?self:typeof window<"u"?window:{});var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RD,Vd,PD,qm,Tw,CD,kD,ND;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cm=="object"&&cm];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var b=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var V=u[N];if(!(V in b))break e;b=b[V]}u=u[u.length-1],N=b[u],g=g(N),g!=N&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var b=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&b.push([N,g[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,b){return u.call.apply(u.bind,arguments)}function c(u,g,b){return c=l,c.apply(null,arguments)}function d(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(N,V,z){for(var ye=Array(arguments.length-2),et=2;et<arguments.length;et++)ye[et-2]=arguments[et];return g.prototype[V].apply(N,ye)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const b=Array(g);for(let N=0;N<g;N++)b[N]=u[N];return b}return[]}function E(u,g){for(let N=1;N<arguments.length;N++){const V=arguments[N];var b=typeof V;if(b=b!="object"?b:V?Array.isArray(V)?"array":b:"null",b=="array"||b=="object"&&typeof V.length=="number"){b=u.length||0;const z=V.length||0;u.length=b+z;for(let ye=0;ye<z;ye++)u[b+ye]=V[ye]}else u.push(V)}}class p{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){o.setTimeout(()=>{throw u},0)}function w(){var u=A;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class _{constructor(){this.h=this.g=null}add(g,b){const N=I.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var I=new p(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let P,L=!1,A=new _,T=()=>{const u=Promise.resolve(void 0);P=()=>{u.then(R)}};function R(){for(var u;u=w();){try{u.h.call(u.g)}catch(b){v(b)}var g=I;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};o.addEventListener("test",b,g),o.removeEventListener("test",b,g)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function B(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(B,D),B.prototype.init=function(u,g){const b=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),de=0;function Se(u,g,b,N,V){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=V,this.key=++de,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function W(u,g,b){for(const N in u)g.call(b,u[N],N,u)}function Z(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function we(u){const g={};for(const b in u)g[b]=u[b];return g}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,g){let b,N;for(let V=1;V<arguments.length;V++){N=arguments[V];for(b in N)u[b]=N[b];for(let z=0;z<Ee.length;z++)b=Ee[z],Object.prototype.hasOwnProperty.call(N,b)&&(u[b]=N[b])}}function _e(u){this.src=u,this.g={},this.h=0}_e.prototype.add=function(u,g,b,N,V){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const ye=Qe(u,g,N,V);return ye>-1?(g=u[ye],b||(g.fa=!1)):(g=new Se(g,this.src,z,!!N,V),g.fa=b,u.push(g)),g};function j(u,g){const b=g.type;if(b in u.g){var N=u.g[b],V=Array.prototype.indexOf.call(N,g,void 0),z;(z=V>=0)&&Array.prototype.splice.call(N,V,1),z&&($(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Qe(u,g,b,N){for(let V=0;V<u.length;++V){const z=u[V];if(!z.da&&z.listener==g&&z.capture==!!b&&z.ha==N)return V}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Pn={};function Bn(u,g,b,N,V){if(Array.isArray(g)){for(let z=0;z<g.length;z++)Bn(u,g[z],b,N,V);return null}return b=zn(b),u&&u[ce]?u.J(g,b,a(N)?!!N.capture:!1,V):In(u,g,b,!1,N,V)}function In(u,g,b,N,V,z){if(!g)throw Error("Invalid event type");const ye=a(V)?!!V.capture:!!V;let et=cr(u);if(et||(u[Fe]=et=new _e(u)),b=et.add(g,b,N,ye,z),b.proxy)return b;if(N=Tn(),b.proxy=N,N.src=u,N.listener=b,u.addEventListener)O||(V=ye),V===void 0&&(V=!1),u.addEventListener(g.toString(),N,V);else if(u.attachEvent)u.attachEvent(ft(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Tn(){function u(b){return g.call(u.src,u.listener,b)}const g=at;return u}function Cn(u,g,b,N,V){if(Array.isArray(g))for(var z=0;z<g.length;z++)Cn(u,g[z],b,N,V);else N=a(N)?!!N.capture:!!N,b=zn(b),u&&u[ce]?(u=u.i,z=String(g).toString(),z in u.g&&(g=u.g[z],b=Qe(g,b,N,V),b>-1&&($(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[z],u.h--)))):u&&(u=cr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Qe(g,b,N,V)),(b=u>-1?g[u]:null)&&Nt(b))}function Nt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ce])j(g.i,u);else{var b=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(b,N,u.capture):g.detachEvent?g.detachEvent(ft(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=cr(g))?(j(b,u),b.h==0&&(b.src=null,g[Fe]=null)):$(u)}}}function ft(u){return u in Pn?Pn[u]:Pn[u]="on"+u}function at(u,g){if(u.da)u=!0;else{g=new B(g,this);const b=u.listener,N=u.ha||u.src;u.fa&&Nt(u),u=b.call(N,g)}return u}function cr(u){return u=u[Fe],u instanceof _e?u:null}var _r="__closure_events_fn_"+(Math.random()*1e9>>>0);function zn(u){return typeof u=="function"?u:(u[_r]||(u[_r]=function(g){return u.handleEvent(g)}),u[_r])}function mt(){C.call(this),this.i=new _e(this),this.M=this,this.G=null}h(mt,C),mt.prototype[ce]=!0,mt.prototype.removeEventListener=function(u,g,b,N){Cn(this,u,g,b,N)};function en(u,g){var b,N=u.G;if(N)for(b=[];N;N=N.G)b.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var V=g;g=new D(N,u),se(g,V)}V=!0;let z,ye;if(b)for(ye=b.length-1;ye>=0;ye--)z=g.g=b[ye],V=wr(z,N,!0,g)&&V;if(z=g.g=u,V=wr(z,N,!0,g)&&V,V=wr(z,N,!1,g)&&V,b)for(ye=0;ye<b.length;ye++)z=g.g=b[ye],V=wr(z,N,!1,g)&&V}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let N=0;N<b.length;N++)$(b[N]);delete u.g[g],u.h--}}this.G=null},mt.prototype.J=function(u,g,b,N){return this.i.add(String(u),g,!1,b,N)},mt.prototype.K=function(u,g,b,N){return this.i.add(String(u),g,!0,b,N)};function wr(u,g,b,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let z=0;z<g.length;++z){const ye=g[z];if(ye&&!ye.da&&ye.capture==b){const et=ye.listener,On=ye.ha||ye.src;ye.fa&&j(u.i,ye),V=et.call(On,N)!==!1&&V}}return V&&!N.defaultPrevented}function no(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Pr(u){u.g=no(()=>{u.g=null,u.i&&(u.i=!1,Pr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Pa extends C{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(u){C.call(this),this.h=u,this.g={}}h(_s,C);var kn=[];function cs(u){W(u.g,function(g,b){this.g.hasOwnProperty(b)&&Nt(g)},u),u.g={}}_s.prototype.N=function(){_s.Z.N.call(this),cs(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ca=o.JSON.stringify,ro=o.JSON.parse,tn=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ka(){}function so(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function us(){D.call(this,"d")}h(us,D);function Ii(){D.call(this,"c")}h(Ii,D);var er={},Q=null;function H(){return Q=Q||new mt}er.Ia="serverreachability";function q(u){D.call(this,er.Ia,u)}h(q,D);function ie(u){const g=H();en(g,new q(g))}er.STAT_EVENT="statevent";function te(u,g){D.call(this,er.STAT_EVENT,u),this.stat=g}h(te,D);function ee(u){const g=H();en(g,new te(g,u))}er.Ja="timingevent";function he(u,g){D.call(this,er.Ja,u),this.size=g}h(he,D);function ue(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function J(){this.g=!0}J.prototype.ua=function(){this.g=!1};function oe(u,g,b,N,V,z){u.info(function(){if(u.g)if(z){var ye="",et=z.split("&");for(let Dt=0;Dt<et.length;Dt++){var On=et[Dt].split("=");if(On.length>1){const qn=On[0];On=On[1];const Hs=qn.split("_");ye=Hs.length>=2&&Hs[1]=="type"?ye+(qn+"="+On+"&"):ye+(qn+"=redacted&")}}}else ye=null;else ye=z;return"XMLHTTP REQ ("+N+") [attempt "+V+"]: "+g+`
`+b+`
`+ye})}function X(u,g,b,N,V,z,ye){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+V+"]: "+g+`
`+b+`
`+z+" "+ye})}function ae(u,g,b,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+pe(u,b)+(N?" "+N:"")})}function ve(u,g){u.info(function(){return"TIMEOUT: "+g})}J.prototype.info=function(){};function pe(u,g){if(!u.g)return g;if(!g)return null;try{const z=JSON.parse(g);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var b=z[u];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(let ye=1;ye<N.length;ye++)N[ye]=""}}}}return Ca(z)}catch{return g}}var ge={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Le={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},He;function Nn(){}h(Nn,ka),Nn.prototype.g=function(){return new XMLHttpRequest},He=new Nn;function dn(u){return encodeURIComponent(String(u))}function Ke(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function $e(u,g,b,N){this.j=u,this.i=g,this.l=b,this.S=N||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}var tr={},pt={};function Lt(u,g,b){u.M=1,u.A=Ze(fn(g)),u.u=b,u.R=!0,Pt(u,null)}function Pt(u,g){u.F=Date.now(),yt(u),u.B=fn(u.A);var b=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),ST(b.i,"t",N),u.C=0,b=u.j.L,u.h=new Me,u.g=BT(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Pa(c(u.Y,u,u.g),u.P)),g=u.V,b=u.g,N=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(kn[0]=V.toString()),V=kn);for(let z=0;z<V.length;z++){const ye=Bn(b,V[z],N||g.handleEvent,!1,g.h||g);if(!ye)break;g.g[ye.key]=ye}g=u.J?we(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ie(),oe(u.i,u.v,u.B,u.l,u.S,u.u)}$e.prototype.ba=function(u){u=u.target;const g=this.O;g&&oo(u)==3?g.j():this.Y(u)},$e.prototype.Y=function(u){try{if(u==this.g)e:{const et=oo(this.g),On=this.g.ya(),Dt=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||kT(this.g)))){this.K||et!=4||On==7||(On==8||Dt<=0?ie(3):ie(2)),Tt(this);var g=this.g.ca();this.X=g;var b=We(this);if(this.o=g==200,X(this.i,this.v,this.B,this.l,this.S,et,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,V=this.g;if((N=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(N)){var z=N;break t}}z=null}if(u=z)ae(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xe(this,u);else{this.o=!1,this.m=3,ee(12),St(this),Sn(this);break e}}if(this.R){u=!0;let qn;for(;!this.K&&this.C<b.length;)if(qn=ke(this,b),qn==pt){et==4&&(this.m=4,ee(14),u=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==tr){this.m=4,ee(15),ae(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else ae(this.i,this.l,qn,null),xe(this,qn);if(Be(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||b.length!=0||this.h.h||(this.m=1,ee(16),u=!1),this.o=this.o&&u,!u)ae(this.i,this.l,b,"[Invalid Chunked Response]"),St(this),Sn(this);else if(b.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Vy(ye),ye.P=!0,ee(11))}}else ae(this.i,this.l,b,null),xe(this,b);et==4&&St(this),this.o&&!this.K&&(et==4?FT(this.j,this):(this.o=!1,yt(this)))}else fV(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,ee(12)):(this.m=0,ee(13)),St(this),Sn(this)}}}catch{}finally{}};function We(u){if(!Be(u))return u.g.la();const g=kT(u.g);if(g==="")return"";let b="";const N=g.length,V=oo(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return St(u),Sn(u),"";u.h.i=new o.TextDecoder}for(let z=0;z<N;z++)u.h.h=!0,b+=u.h.i.decode(g[z],{stream:!(V&&z==N-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Be(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function ke(u,g){var b=u.C,N=g.indexOf(`
`,b);return N==-1?pt:(b=Number(g.substring(b,N)),isNaN(b)?tr:(N+=1,N+b>g.length?pt:(g=g.slice(N,N+b),u.C=N+b,g)))}$e.prototype.cancel=function(){this.K=!0,St(this)};function yt(u){u.T=Date.now()+u.H,qt(u,u.H)}function qt(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ue(c(u.aa,u),g)}function Tt(u){u.D&&(o.clearTimeout(u.D),u.D=null)}$e.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ve(this.i,this.B),this.M!=2&&(ie(),ee(17)),St(this),this.m=2,Sn(this)):qt(this,this.T-u)};function Sn(u){u.j.I==0||u.K||FT(u.j,u)}function St(u){Tt(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,cs(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function xe(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Ye(b.h,u))){if(!u.L&&Ye(b.h,u)&&b.I==3){try{var N=b.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var V=N;if(V[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Lf(b),Df(b);else break e;My(b),ee(18)}}else b.xa=V[1],0<b.xa-b.K&&V[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ue(c(b.Va,b),6e3));ct(b.h)<=1&&b.ta&&(b.ta=void 0)}else Da(b,11)}else if((u.L||b.g==u)&&Lf(b),!k(g))for(V=b.Ba.g.parse(g),g=0;g<V.length;g++){let Dt=V[g];const qn=Dt[0];if(!(qn<=b.K))if(b.K=qn,Dt=Dt[1],b.I==2)if(Dt[0]=="c"){b.M=Dt[1],b.ba=Dt[2];const Hs=Dt[3];Hs!=null&&(b.ka=Hs,b.j.info("VER="+b.ka));const Oa=Dt[4];Oa!=null&&(b.za=Oa,b.j.info("SVER="+b.za));const ao=Dt[5];ao!=null&&typeof ao=="number"&&ao>0&&(N=1.5*ao,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const lo=u.g;if(lo){const Vf=lo.g?lo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vf){var z=N.h;z.g||Vf.indexOf("spdy")==-1&&Vf.indexOf("quic")==-1&&Vf.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(hn(z,z.h),z.h=null))}if(N.G){const Fy=lo.g?lo.g.getResponseHeader("X-HTTP-Session-Id"):null;Fy&&(N.wa=Fy,ut(N.J,N.G,Fy))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var ye=u;if(N.na=$T(N,N.L?N.ba:null,N.W),ye.L){nr(N.h,ye);var et=ye,On=N.O;On&&(et.H=On),et.D&&(Tt(et),yt(et)),N.g=ye}else MT(N);b.i.length>0&&Of(b)}else Dt[0]!="stop"&&Dt[0]!="close"||Da(b,7);else b.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Da(b,7):Ly(b):Dt[0]!="noop"&&b.l&&b.l.qa(Dt),b.A=0)}}ie(4)}catch{}}var rt=class{constructor(u,g){this.g=u,this.map=g}};function nt(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function It(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ct(u){return u.h?1:u.g?u.g.size:0}function Ye(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function hn(u,g){u.g?u.g.add(g):u.h=g}function nr(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}nt.prototype.cancel=function(){if(this.i=Wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return m(u.i)}var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nn(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const N=u[b].indexOf("=");let V,z=null;N>=0?(V=u[b].substring(0,N),z=u[b].substring(N+1)):V=u[b],g(V,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function rn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof rn?(this.l=u.l,kr(this,u.j),this.o=u.o,this.g=u.g,Dn(this,u.u),this.h=u.h,bn(this,bT(u.i)),this.m=u.m):u&&(g=String(u).match(Je))?(this.l=!1,kr(this,g[1]||"",!0),this.o=Nr(g[2]||""),this.g=Nr(g[3]||"",!0),Dn(this,g[4]),this.h=Nr(g[5]||"",!0),bn(this,g[6]||"",!0),this.m=Nr(g[7]||"")):(this.l=!1,this.i=new ad(null,this.l))}rn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(od(g,wT,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(od(g,wT,!0),"@"),u.push(dn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(od(b,b.charAt(0)=="/"?sV:rV,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",od(b,oV)),u.join("")},rn.prototype.resolve=function(u){const g=fn(this);let b=!!u.j;b?kr(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var N=u.h;if(b)Dn(g,u.u);else if(b=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var V=g.h.lastIndexOf("/");V!=-1&&(N=g.h.slice(0,V+1)+N)}if(V=N,V==".."||V==".")N="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){N=V.lastIndexOf("/",0)==0,V=V.split("/");const z=[];for(let ye=0;ye<V.length;){const et=V[ye++];et=="."?N&&ye==V.length&&z.push(""):et==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),N&&ye==V.length&&z.push("")):(z.push(et),N=!0)}N=z.join("/")}else N=V}return b?g.h=N:b=u.i.toString()!=="",b?bn(g,bT(u.i)):b=!!u.m,b&&(g.m=u.m),g};function fn(u){return new rn(u)}function kr(u,g,b){u.j=b?Nr(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Dn(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function bn(u,g,b){g instanceof ad?(u.i=g,aV(u.i,u.l)):(b||(g=od(g,iV)),u.i=new ad(g,u.l))}function ut(u,g,b){u.i.set(g,b)}function Ze(u){return ut(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Nr(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function od(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,nV),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nV(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wT=/[#\/\?@]/g,rV=/[#\?:]/g,sV=/[#\?]/g,iV=/[#\?@]/g,oV=/#/g;function ad(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Na(u){u.g||(u.g=new Map,u.h=0,u.i&&nn(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=ad.prototype,t.add=function(u,g){Na(this),this.i=null,u=Hl(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function ET(u,g){Na(u),g=Hl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function IT(u,g){return Na(u),g=Hl(u,g),u.g.has(g)}t.forEach=function(u,g){Na(this),this.g.forEach(function(b,N){b.forEach(function(V){u.call(g,V,N,this)},this)},this)};function TT(u,g){Na(u);let b=[];if(typeof g=="string")IT(u,g)&&(b=b.concat(u.g.get(Hl(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}t.set=function(u,g){return Na(this),this.i=null,u=Hl(this,u),IT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=TT(this,u),u.length>0?String(u[0]):g):g};function ST(u,g,b){ET(u,g),b.length>0&&(u.i=null,u.g.set(Hl(u,g),m(b)),u.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var b=g[N];const V=dn(b);b=TT(this,b);for(let z=0;z<b.length;z++){let ye=V;b[z]!==""&&(ye+="="+dn(b[z])),u.push(ye)}}return this.i=u.join("&")};function bT(u){const g=new ad;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Hl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function aV(u,g){g&&!u.j&&(Na(u),u.i=null,u.g.forEach(function(b,N){const V=N.toLowerCase();N!=V&&(ET(this,N),ST(this,V,b))},u)),u.j=g}function lV(u,g){const b=new J;if(o.Image){const N=new Image;N.onload=d(io,b,"TestLoadImage: loaded",!0,g,N),N.onerror=d(io,b,"TestLoadImage: error",!1,g,N),N.onabort=d(io,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=d(io,b,"TestLoadImage: timeout",!1,g,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function cV(u,g){const b=new J,N=new AbortController,V=setTimeout(()=>{N.abort(),io(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(z=>{clearTimeout(V),z.ok?io(b,"TestPingServer: ok",!0,g):io(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),io(b,"TestPingServer: error",!1,g)})}function io(u,g,b,N,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),N(b)}catch{}}function uV(){this.g=new tn}function Dy(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Dy,ka),Dy.prototype.g=function(){return new kf(this.i,this.h)};function kf(u,g){mt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(kf,mt),t=kf.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,cd(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ld(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,cd(this)),this.g&&(this.readyState=3,cd(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;AT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function AT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ld(this):cd(this),this.readyState==3&&AT(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ld(this))},t.Na=function(u){this.g&&(this.response=u,ld(this))},t.ga=function(){this.g&&ld(this)};function ld(u){u.readyState=4,u.l=null,u.j=null,u.B=null,cd(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function cd(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xT(u){let g="";return W(u,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function Oy(u,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=xT(b),typeof u=="string"?b!=null&&dn(b):ut(u,g,b))}function mn(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(mn,mt);var dV=/^https?$/i,hV=["POST","PUT"];t=mn.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():He.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(z){RT(this,z);return}if(u=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var V in N)b.set(V,N[V]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const z of N.keys())b.set(z,N.get(z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(z=>z.toLowerCase()=="content-type"),V=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(hV,g,void 0)>=0)||N||V||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ye]of b)this.g.setRequestHeader(z,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){RT(this,z)}};function RT(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,PT(u),Nf(u)}function PT(u){u.A||(u.A=!0,en(u,"complete"),en(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,en(this,"complete"),en(this,"abort"),Nf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nf(this,!0)),mn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?CT(this):this.Xa())},t.Xa=function(){CT(this)};function CT(u){if(u.h&&typeof i<"u"){if(u.v&&oo(u)==4)setTimeout(u.Ca.bind(u),0);else if(en(u,"readystatechange"),oo(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=z===0){let ye=String(u.D).match(Je)[1]||null;!ye&&o.self&&o.self.location&&(ye=o.self.location.protocol.slice(0,-1)),N=!dV.test(ye?ye.toLowerCase():"")}b=N}if(b)en(u,"complete"),en(u,"success");else{u.o=6;try{var V=oo(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",PT(u)}}finally{Nf(u)}}}}function Nf(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||en(u,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function oo(u){return u.g?u.g.readyState:0}t.ca=function(){try{return oo(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ro(g)}};function kT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fV(u){const g={};u=(u.g&&oo(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(k(u[N]))continue;var b=Ke(u[N]);const V=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const z=g[V]||[];g[V]=z,z.push(b)}Z(g,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ud(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function NT(u){this.za=0,this.i=[],this.j=new J,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ud("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ud("baseRetryDelayMs",5e3,u),this.Za=ud("retryDelaySeedMs",1e4,u),this.Ta=ud("forwardChannelMaxRetries",2,u),this.va=ud("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new nt(u&&u.concurrentRequestLimit),this.Ba=new uV,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=NT.prototype,t.ka=8,t.I=1,t.connect=function(u,g,b,N){ee(0),this.W=u,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=$T(this,null,this.W),Of(this)};function Ly(u){if(DT(u),u.I==3){var g=u.V++,b=fn(u.J);if(ut(b,"SID",u.M),ut(b,"RID",g),ut(b,"TYPE","terminate"),dd(u,b),g=new $e(u,u.j,g),g.M=2,g.A=Ze(fn(b)),b=!1,o.navigator&&o.navigator.sendBeacon)try{b=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&o.Image&&(new Image().src=g.A,b=!0),b||(g.g=BT(g.j,null),g.g.ea(g.A)),g.F=Date.now(),yt(g)}jT(u)}function Df(u){u.g&&(Vy(u),u.g.cancel(),u.g=null)}function DT(u){Df(u),u.v&&(o.clearTimeout(u.v),u.v=null),Lf(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Of(u){if(!It(u.h)&&!u.m){u.m=!0;var g=u.Ea;P||T(),L||(P(),L=!0),A.add(g,u),u.D=0}}function mV(u,g){return ct(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ue(c(u.Ea,u,g),UT(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new $e(this,this.j,u);let z=this.o;if(this.U&&(z?(z=we(z),se(z,this.U)):z=this.U),this.u!==null||this.R||(V.J=z,z=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=LT(this,V,g),b=fn(this.J),ut(b,"RID",u),ut(b,"CVER",22),this.G&&ut(b,"X-HTTP-Session-Id",this.G),dd(this,b),z&&(this.R?g="headers="+dn(xT(z))+"&"+g:this.u&&Oy(b,this.u,z)),hn(this.h,V),this.Ra&&ut(b,"TYPE","init"),this.S?(ut(b,"$req",g),ut(b,"SID","null"),V.U=!0,Lt(V,b,null)):Lt(V,b,g),this.I=2}}else this.I==3&&(u?OT(this,u):this.i.length==0||It(this.h)||OT(this))};function OT(u,g){var b;g?b=g.l:b=u.V++;const N=fn(u.J);ut(N,"SID",u.M),ut(N,"RID",b),ut(N,"AID",u.K),dd(u,N),u.u&&u.o&&Oy(N,u.u,u.o),b=new $e(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=LT(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),hn(u.h,b),Lt(b,N,g)}function dd(u,g){u.H&&W(u.H,function(b,N){ut(g,N,b)}),u.l&&W({},function(b,N){ut(g,N,b)})}function LT(u,g,b){b=Math.min(u.i.length,b);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var V=u.i;let et=-1;for(;;){const On=["count="+b];et==-1?b>0?(et=V[0].g,On.push("ofs="+et)):et=0:On.push("ofs="+et);let Dt=!0;for(let qn=0;qn<b;qn++){var z=V[qn].g;const Hs=V[qn].map;if(z-=et,z<0)et=Math.max(0,V[qn].g-100),Dt=!1;else try{z="req"+z+"_"||"";try{var ye=Hs instanceof Map?Hs:Object.entries(Hs);for(const[Oa,ao]of ye){let lo=ao;a(ao)&&(lo=Ca(ao)),On.push(z+Oa+"="+encodeURIComponent(lo))}}catch(Oa){throw On.push(z+"type="+encodeURIComponent("_badmap")),Oa}}catch{N&&N(Hs)}}if(Dt){ye=On.join("&");break e}}ye=void 0}return u=u.i.splice(0,b),g.G=u,ye}function MT(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;P||T(),L||(P(),L=!0),A.add(g,u),u.A=0}}function My(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ue(c(u.Da,u),UT(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,VT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ue(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ee(10),Df(this),VT(this))};function Vy(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function VT(u){u.g=new $e(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=fn(u.na);ut(g,"RID","rpc"),ut(g,"SID",u.M),ut(g,"AID",u.K),ut(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ut(g,"TO",u.ia),ut(g,"TYPE","xmlhttp"),dd(u,g),u.u&&u.o&&Oy(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Ze(fn(g)),b.u=null,b.R=!0,Pt(b,u)}t.Va=function(){this.C!=null&&(this.C=null,Df(this),My(this),ee(19))};function Lf(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function FT(u,g){var b=null;if(u.g==g){Lf(u),Vy(u),u.g=null;var N=2}else if(Ye(u.h,g))b=g.G,nr(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var V=u.D;N=H(),en(N,new he(N,b)),Of(u)}else MT(u);else if(V=g.m,V==3||V==0&&g.X>0||!(N==1&&mV(u,g)||N==2&&My(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),V){case 1:Da(u,5);break;case 4:Da(u,10);break;case 3:Da(u,6);break;default:Da(u,2)}}}function UT(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Da(u,g){if(u.j.info("Error code "+g),g==2){var b=c(u.bb,u),N=u.Ua;const V=!N;N=new rn(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||kr(N,"https"),Ze(N),V?lV(N.toString(),b):cV(N.toString(),b)}else ee(2);u.I=0,u.l&&u.l.pa(g),jT(u),DT(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function jT(u){if(u.I=0,u.ja=[],u.l){const g=Wn(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ja,g),E(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function $T(u,g,b){var N=b instanceof rn?fn(b):new rn(b);if(N.g!="")g&&(N.g=g+"."+N.g),Dn(N,N.u);else{var V=o.location;N=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const z=new rn(null);N&&kr(z,N),g&&(z.g=g),V&&Dn(z,V),b&&(z.h=b),N=z}return b=u.G,g=u.wa,b&&g&&ut(N,b,g),ut(N,"VER",u.ka),dd(u,N),N}function BT(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new mn(new Dy({ab:b})):new mn(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zT(){}t=zT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mf(){}Mf.prototype.g=function(u,g){return new Gr(u,g)};function Gr(u,g){mt.call(this),this.g=new NT(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!k(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Kl(this)}h(Gr,mt),Gr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gr.prototype.close=function(){Ly(this.g)},Gr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Ca(u),u=b);g.i.push(new rt(g.Ya++,u)),g.I==3&&Of(g)},Gr.prototype.N=function(){this.g.l=null,delete this.j,Ly(this.g),delete this.g,Gr.Z.N.call(this)};function WT(u){us.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(WT,us);function qT(){Ii.call(this),this.status=1}h(qT,Ii);function Kl(u){this.g=u}h(Kl,zT),Kl.prototype.ra=function(){en(this.g,"a")},Kl.prototype.qa=function(u){en(this.g,new WT(u))},Kl.prototype.pa=function(u){en(this.g,new qT)},Kl.prototype.oa=function(){en(this.g,"b")},Mf.prototype.createWebChannel=Mf.prototype.g,Gr.prototype.send=Gr.prototype.o,Gr.prototype.open=Gr.prototype.m,Gr.prototype.close=Gr.prototype.close,ND=function(){return new Mf},kD=function(){return H()},CD=er,Tw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ge.NO_ERROR=0,ge.TIMEOUT=8,ge.HTTP_ERROR=6,qm=ge,Le.COMPLETE="complete",PD=Le,so.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Vd=so,mn.prototype.listenOnce=mn.prototype.K,mn.prototype.getLastError=mn.prototype.Ha,mn.prototype.getLastErrorCode=mn.prototype.ya,mn.prototype.getStatus=mn.prototype.ca,mn.prototype.getResponseJson=mn.prototype.La,mn.prototype.getResponseText=mn.prototype.la,mn.prototype.send=mn.prototype.ea,mn.prototype.setWithCredentials=mn.prototype.Fa,RD=mn}).apply(typeof cm<"u"?cm:typeof self<"u"?self:typeof window<"u"?window:{});const DA="@firebase/firestore",OA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new Qg("@firebase/firestore");function oc(){return la.logLevel}function DD(t){la.setLogLevel(t)}function ne(t,...e){if(la.logLevel<=dt.DEBUG){const n=e.map(qE);la.debug(`Firestore (${Hu}): ${t}`,...n)}}function vn(t,...e){if(la.logLevel<=dt.ERROR){const n=e.map(qE);la.error(`Firestore (${Hu}): ${t}`,...n)}}function is(t,...e){if(la.logLevel<=dt.WARN){const n=e.map(qE);la.warn(`Firestore (${Hu}): ${t}`,...n)}}function qE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,OD(t,r,n)}function OD(t,e,n){let r=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vn(r),new Error(r)}function Ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||OD(e,s,r)}function Jq(t,e){t||Te(57014,e)}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yn.UNAUTHENTICATED))}shutdown(){}}class Xq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Zq{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new LD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class e8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new e8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class r8{getToken(){return Promise.resolve(new Sw(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=s8(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function bw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Cv(s)===Cv(i)?je(s,i):Cv(s)?1:-1}return je(t.length,e.length)}const i8=55296,o8=57343;function Cv(t){const e=t.charCodeAt(0);return e>=i8&&e<=o8}function hu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function VD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="__name__";class Qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Qs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return je(e.length,n.length)}static compareSegments(e,n){const r=Qs.isNumericId(e),s=Qs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Qs.extractNumericId(e).compare(Qs.extractNumericId(n)):bw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class it extends Qs{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new it(n)}static emptyPath(){return new it([])}}const a8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends Qs{construct(e,n,r){return new Bt(e,n,r)}static isValidIdentifier(e){return a8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Aw}static keyField(){return new Bt([Aw])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(it.fromString(e))}static fromName(e){return new fe(it.fromString(e).popFirst(5))}static empty(){return new fe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FD(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LA(t){if(!fe.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function MA(t){if(fe.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function UD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ty(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ty(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jD(t,e){if(e<=0)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,e){const n={typeString:t};return e&&(n.value=e),n}function $l(t,e){if(!UD(t))throw new Y(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=-62135596800,FA=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*FA);return new wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<VA)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FA}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($l(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-VA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Rn("string",wt._jsonSchemaVersion),seconds:Rn("number"),nanoseconds:Rn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new wt(0,0))}static max(){return new Ne(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=-1;class mu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function xw(t){return t.fields.find(e=>e.kind===2)}function Ua(t){return t.fields.filter(e=>e.kind!==2)}function l8(t,e){let n=je(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=c8(t.fields[r],e.fields[r]),n!==0)return n;return je(t.fields.length,e.fields.length)}mu.UNKNOWN_ID=-1;class cl{constructor(e,n){this.fieldPath=e,this.kind=n}}function c8(t,e){const n=Bt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:je(t.kind,e.kind)}class pu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new pu(0,os.min())}}function $D(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new os(s,fe.empty(),e)}function BD(t){return new os(t.readTime,t.key,fu)}class os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new os(Ne.min(),fe.empty(),fu)}static max(){return new os(Ne.max(),fe.empty(),fu)}}function KE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==zD)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="SimpleDb";class ny{static open(e,n,r,s){try{return new ny(n,e.transaction(s,r))}catch(i){throw new Zd(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Zn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Zd(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=GE(r.target.error);this.S.reject(new Zd(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(Yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new d8(n)}}class hi{static delete(e){return ne(Yr,"Removing database:",e),Ba(bN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!DE())return!1;if(hi.F())return!0;const e=Un(),n=hi.M(e),r=0<n&&n<10,s=qD(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,hi.M(Un())===12.2&&vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ne(Yr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Zd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Y(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Zd(e,o))},s.onupgradeneeded=i=>{ne(Yr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{ne(Yr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=ny.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ne(Yr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class u8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ba(this.U.delete())}}class Zd extends Y{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ia(t){return t.name==="IndexedDbTransactionError"}class d8{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ne(Yr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne(Yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ba(r)}add(e){return ne(Yr,"ADD",this.store.name,e,e),Ba(this.store.add(e))}get(e){return Ba(this.store.get(e)).next(n=>(n===void 0&&(n=null),ne(Yr,"GET",this.store.name,e,n),n))}delete(e){return ne(Yr,"DELETE",this.store.name,e),Ba(this.store.delete(e))}count(){return ne(Yr,"COUNT",this.store.name),Ba(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){ne(Yr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=GE(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new u8(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ba(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=GE(r.target.error);n(s)}})}let UA=!1;function GE(t){const e=hi.M(Un());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UA||(UA=!0,setTimeout(()=>{throw r},0)),r}}return t}const eh="IndexBackfiller";class h8{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ne(eh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();ne(eh,`Documents written: ${n}`)}catch(n){Ia(n)?ne(eh,"Ignoring IndexedDB error during index backfill: ",n):await Ea(n)}await this.re(6e4)})}}class f8{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return ne(eh,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(ne(eh,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=BD(i);KE(o,r)>0&&(r=o)}),new os(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ur.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=-1;function pf(t){return t==null}function Fh(t){return t===0&&1/t==-1/0}function HD(t){return typeof t=="number"&&Number.isInteger(t)&&!Fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="";function gr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jA(e)),e=m8(t.get(n),e);return jA(e)}function m8(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Qp:n+="";break;default:n+=i}}return n}function jA(t){return t+Qp+""}function si(t){const e=t.length;if(Ae(e>=2,64408,{path:t}),e===2)return Ae(t.charAt(0)===Qp&&t.charAt(1)==="",56145,{path:t}),it.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Qp,i);switch((o<0||o>n)&&Te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Te(61167,{path:t})}i=o+2}return new it(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="remoteDocuments",gf="owner",Ql="owner",Uh="mutationQueues",p8="userId",As="mutations",$A="batchId",Za="userMutationsIndex",BA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){return[t,gr(e)]}function KD(t,e,n){return[t,gr(e),n]}const g8={},gu="documentMutations",Yp="remoteDocumentsV14",y8=["prefixPath","collectionGroup","readTime","documentId"],Km="documentKeyIndex",v8=["prefixPath","collectionGroup","documentId"],GD="collectionGroupIndex",_8=["collectionGroup","readTime","prefixPath","documentId"],jh="remoteDocumentGlobal",Rw="remoteDocumentGlobalKey",yu="targets",QD="queryTargetsIndex",w8=["canonicalId","targetId"],vu="targetDocuments",E8=["targetId","path"],QE="documentTargetsIndex",I8=["path","targetId"],Jp="targetGlobalKey",ul="targetGlobal",$h="collectionParents",T8=["collectionId","parent"],_u="clientMetadata",S8="clientId",ry="bundles",b8="bundleId",sy="namedQueries",A8="name",YE="indexConfiguration",x8="indexId",Pw="collectionGroupIndex",R8="collectionGroup",th="indexState",P8=["indexId","uid"],YD="sequenceNumberIndex",C8=["uid","sequenceNumber"],nh="indexEntries",k8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],JD="documentKeyIndex",N8=["indexId","uid","orderedDocumentKey"],iy="documentOverlays",D8=["userId","collectionPath","documentId"],Cw="collectionPathOverlayIndex",O8=["userId","collectionPath","largestBatchId"],XD="collectionGroupOverlayIndex",L8=["userId","collectionGroup","largestBatchId"],JE="globals",M8="name",ZD=[Uh,As,gu,ja,yu,gf,ul,vu,_u,jh,$h,ry,sy],V8=[...ZD,iy],eO=[Uh,As,gu,Yp,yu,gf,ul,vu,_u,jh,$h,ry,sy,iy],tO=eO,XE=[...tO,YE,th,nh],F8=XE,nO=[...XE,JE],U8=nO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends WD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function $n(t,e){const n=me(t);return hi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rO(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function sO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){this.comparator=e,this.root=n||sr.EMPTY}insert(e,n){return new Ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new um(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new um(this.root,e,this.comparator,!1)}getReverseIterator(){return new um(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new um(this.root,e,this.comparator,!0)}}class um{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??sr.RED,this.left=s??sr.EMPTY,this.right=i??sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new sr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return sr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new WA(this.data.getIterator())}getIteratorFrom(e){return new WA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class WA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new jr([])}unionWith(e){let n=new Rt(Bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iO("Invalid base64 string: "+i):i}}(e);return new cn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const $8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=$8.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kt(t.seconds),nanos:Kt(t.nanos)}}function Kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qi(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="server_timestamp",aO="__type__",lO="__previous_value__",cO="__local_write_time__";function oy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aO])==null?void 0:r.stringValue)===oO}function ay(t){const e=t.mapValue.fields[lO];return oy(e)?ay(e):e}function Bh(t){const e=Gi(t.mapValue.fields[cO].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const zh="(default)";class ca{constructor(e,n){this.projectId=e,this.database=n||zh}static empty(){return new ca("","")}get isDefaultDatabase(){return this.database===zh}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="__type__",uO="__max__",jo={mapValue:{fields:{__type__:{stringValue:uO}}}},eI="__vector__",wu="value",Gm={nullValue:"NULL_VALUE"};function ua(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oy(t)?4:dO(t)?9007199254740991:ly(t)?10:11:Te(28295,{value:t})}function vi(t,e){if(t===e)return!0;const n=ua(t);if(n!==ua(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bh(t).isEqual(Bh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Gi(s.timestampValue),a=Gi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qi(s.bytesValue).isEqual(Qi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Kt(s.geoPointValue.latitude)===Kt(i.geoPointValue.latitude)&&Kt(s.geoPointValue.longitude)===Kt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Kt(s.integerValue)===Kt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Kt(s.doubleValue),a=Kt(i.doubleValue);return o===a?Fh(o)===Fh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return hu(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(zA(o)!==zA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vi(o[l],a[l])))return!1;return!0}(t,e);default:return Te(52216,{left:t})}}function Wh(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function da(t,e){if(t===e)return 0;const n=ua(t),r=ua(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Kt(i.integerValue||i.doubleValue),l=Kt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return qA(t.timestampValue,e.timestampValue);case 4:return qA(Bh(t),Bh(e));case 5:return bw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Qi(i),l=Qi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=je(a[c],l[c]);if(d!==0)return d}return je(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=je(Kt(i.latitude),Kt(o.latitude));return a!==0?a:je(Kt(i.longitude),Kt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HA(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,E,p;const a=i.fields||{},l=o.fields||{},c=(f=a[wu])==null?void 0:f.arrayValue,d=(m=l[wu])==null?void 0:m.arrayValue,h=je(((E=c==null?void 0:c.values)==null?void 0:E.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:HA(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===jo.mapValue&&o===jo.mapValue)return 0;if(i===jo.mapValue)return 1;if(o===jo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=bw(l[h],d[h]);if(f!==0)return f;const m=da(a[l[h]],c[d[h]]);if(m!==0)return m}return je(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function qA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Gi(t),r=Gi(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function HA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=da(n[s],r[s]);if(i)return i}return je(n.length,r.length)}function Eu(t){return Nw(t)}function Nw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nw(n.fields[o])}`;return s+"}"}(t.mapValue):Te(61005,{value:t})}function Qm(t){switch(ua(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ay(t);return e?16+Qm(e):16;case 5:return 2*t.stringValue.length;case 6:return Qi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Qm(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ta(r.fields,(i,o)=>{s+=i.length+Qm(o)}),s}(t.mapValue);default:throw Te(13486,{value:t})}}function Il(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dw(t){return!!t&&"integerValue"in t}function qh(t){return!!t&&"arrayValue"in t}function KA(t){return!!t&&"nullValue"in t}function GA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ym(t){return!!t&&"mapValue"in t}function ly(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ZE])==null?void 0:r.stringValue)===eI}function rh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ta(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=rh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rh(t.arrayValue.values[n]);return e}return{...t}}function dO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uO}const hO={mapValue:{fields:{[ZE]:{stringValue:eI},[wu]:{arrayValue:{}}}}};function z8(t){return"nullValue"in t?Gm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Il(ca.empty(),fe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ly(t)?hO:{mapValue:{}}:Te(35942,{value:t})}function W8(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Il(ca.empty(),fe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?hO:"mapValue"in t?ly(t)?{mapValue:{}}:jo:Te(61959,{value:t})}function QA(t,e){const n=da(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function YA(t,e){const n=da(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ym(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rh(n)}setAll(e){let n=Bt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=rh(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ym(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ym(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ta(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ir(rh(this.value))}}function fO(t){const e=[];return Ta(t.fields,(n,r)=>{const s=new Bt([n]);if(Ym(r)){const i=fO(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $t(e,0,Ne.min(),Ne.min(),Ne.min(),ir.empty(),0)}static newFoundDocument(e,n,r,s){return new $t(e,1,n,Ne.min(),r,s,0)}static newNoDocument(e,n){return new $t(e,2,n,Ne.min(),Ne.min(),ir.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Ne.min(),Ne.min(),ir.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n){this.position=e,this.inclusive=n}}function JA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=da(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function XA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function q8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{}class ht extends mO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H8(e,n,r):n==="array-contains"?new Q8(e,r):n==="in"?new wO(e,r):n==="not-in"?new Y8(e,r):n==="array-contains-any"?new J8(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new K8(e,r):new G8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(da(n,this.value)):n!==null&&ua(this.value)===ua(n)&&this.matchesComparison(da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bt extends mO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bt(e,n)}matches(e){return Iu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Iu(t){return t.op==="and"}function Ow(t){return t.op==="or"}function tI(t){return pO(t)&&Iu(t)}function pO(t){for(const e of t.filters)if(e instanceof bt)return!1;return!0}function Lw(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Eu(t.value);if(tI(t))return t.filters.map(e=>Lw(e)).join(",");{const e=t.filters.map(n=>Lw(n)).join(",");return`${t.op}(${e})`}}function gO(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&vi(r.value,s.value)}(t,e):t instanceof bt?function(r,s){return s instanceof bt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&gO(o,s.filters[a]),!0):!1}(t,e):void Te(19439)}function yO(t,e){const n=t.filters.concat(e);return bt.create(n,t.op)}function vO(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Eu(n.value)}`}(t):t instanceof bt?function(n){return n.op.toString()+" {"+n.getFilters().map(vO).join(" ,")+"}"}(t):"Filter"}class H8 extends ht{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class K8 extends ht{constructor(e,n){super(e,"in",n),this.keys=_O("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class G8 extends ht{constructor(e,n){super(e,"not-in",n),this.keys=_O("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _O(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class Q8 extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qh(n)&&Wh(n.arrayValue,this.value)}}class wO extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wh(this.value.arrayValue,n)}}class Y8 extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wh(this.value.arrayValue,n)}}class J8 extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Mw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new X8(t,e,n,r,s,i,o)}function Tl(t){const e=me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Eu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Eu(r)).join(",")),e.Te=n}return e.Te}function yf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!q8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XA(t.startAt,e.startAt)&&XA(t.endAt,e.endAt)}function Xp(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zp(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function ZA(t,e,n){let r=Gm,s=!0;for(const i of Zp(t,e)){let o=Gm,a=!0;switch(i.op){case"<":case"<=":o=z8(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Gm}QA({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];QA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function ex(t,e,n){let r=jo,s=!0;for(const i of Zp(t,e)){let o=jo,a=!0;switch(i.op){case">=":case">":o=W8(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=jo}YA({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];YA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EO(t,e,n,r,s,i,o,a){return new Xi(t,e,n,r,s,i,o,a)}function Ku(t){return new Xi(t)}function tx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nI(t){return t.collectionGroup!==null}function $c(t){const e=me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(Bt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Hh(i,r))}),n.has(Bt.keyField().canonicalString())||e.Ie.push(new Hh(Bt.keyField(),r))}return e.Ie}function yr(t){const e=me(t);return e.Ee||(e.Ee=TO(e,$c(t))),e.Ee}function IO(t){const e=me(t);return e.de||(e.de=TO(e,t.explicitOrderBy)),e.de}function TO(t,e){if(t.limitType==="F")return Mw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Hh(s.field,i)});const n=t.endAt?new ha(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ha(t.startAt.position,t.startAt.inclusive):null;return Mw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vw(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eg(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vf(t,e){return yf(yr(t),yr(e))&&t.limitType===e.limitType}function SO(t){return`${Tl(yr(t))}|lt:${t.limitType}`}function ac(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>vO(s)).join(", ")}]`),pf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Eu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Eu(s)).join(",")),`Target(${r})`}(yr(t))}; limitType=${t.limitType})`}function _f(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of $c(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=JA(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,$c(r),s)||r.endAt&&!function(o,a,l){const c=JA(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,$c(r),s))}(t,e)}function bO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AO(t){return(e,n)=>{let r=!1;for(const s of $c(t)){const i=Z8(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Z8(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?da(l,c):Te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return sO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=new Ft(fe.comparator);function $r(){return e7}const xO=new Ft(fe.comparator);function Fd(...t){let e=xO;for(const n of t)e=e.insert(n.key,n);return e}function RO(t){let e=xO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ii(){return sh()}function PO(){return sh()}function sh(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const t7=new Ft(fe.comparator),n7=new Rt(fe.comparator);function Ge(...t){let e=n7;for(const n of t)e=e.add(n);return e}const r7=new Rt(je);function rI(){return r7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function CO(t){return{integerValue:""+t}}function kO(t,e){return HD(e)?CO(e):sI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(){this._=void 0}}function s7(t,e,n){return t instanceof Tu?function(s,i){const o={fields:{[aO]:{stringValue:oO},[cO]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&oy(i)&&(i=ay(i)),i&&(o.fields[lO]=i),{mapValue:o}}(n,e):t instanceof Sl?DO(t,e):t instanceof bl?OO(t,e):function(s,i){const o=NO(s,i),a=nx(o)+nx(s.Ae);return Dw(o)&&Dw(s.Ae)?CO(a):sI(s.serializer,a)}(t,e)}function i7(t,e,n){return t instanceof Sl?DO(t,e):t instanceof bl?OO(t,e):n}function NO(t,e){return t instanceof Su?function(r){return Dw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Tu extends cy{}class Sl extends cy{constructor(e){super(),this.elements=e}}function DO(t,e){const n=LO(e);for(const r of t.elements)n.some(s=>vi(s,r))||n.push(r);return{arrayValue:{values:n}}}class bl extends cy{constructor(e){super(),this.elements=e}}function OO(t,e){let n=LO(e);for(const r of t.elements)n=n.filter(s=>!vi(s,r));return{arrayValue:{values:n}}}class Su extends cy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nx(t){return Kt(t.integerValue||t.doubleValue)}function LO(t){return qh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.field=e,this.transform=n}}function o7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Sl&&s instanceof Sl||r instanceof bl&&s instanceof bl?hu(r.elements,s.elements,vi):r instanceof Su&&s instanceof Su?vi(r.Ae,s.Ae):r instanceof Tu&&s instanceof Tu}(t.transform,e.transform)}class a7{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uy{}function MO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qu(t.key,Qt.none()):new Gu(t.key,t.data,Qt.none());{const n=t.data,r=ir.empty();let s=new Rt(Bt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new eo(t.key,r,new jr(s.toArray()),Qt.none())}}function l7(t,e,n){t instanceof Gu?function(s,i,o){const a=s.value.clone(),l=sx(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof eo?function(s,i,o){if(!Jm(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=sx(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(VO(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ih(t,e,n,r){return t instanceof Gu?function(i,o,a,l){if(!Jm(i.precondition,o))return a;const c=i.value.clone(),d=ix(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof eo?function(i,o,a,l){if(!Jm(i.precondition,o))return a;const c=ix(i.fieldTransforms,l,o),d=o.data;return d.setAll(VO(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Jm(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function c7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=NO(r.transform,s||null);i!=null&&(n===null&&(n=ir.empty()),n.set(r.field,i))}return n||null}function rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&hu(r,s,(i,o)=>o7(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gu extends uy{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class eo extends uy{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sx(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,i7(o,a,n[s]))}return r}function ix(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,s7(i,o,e))}return r}class Qu extends uy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iI extends uy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&l7(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ih(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ih(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PO();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=MO(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&hu(this.mutations,e.mutations,(n,r)=>rx(n,r))&&hu(this.baseMutations,e.baseMutations,(n,r)=>rx(n,r))}}class aI{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return t7}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new aI(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,vt;function UO(t){switch(t){case U.OK:return Te(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function jO(t){if(t===void 0)return vn("GRPC error has no .code"),U.UNKNOWN;switch(t){case An.OK:return U.OK;case An.CANCELLED:return U.CANCELLED;case An.UNKNOWN:return U.UNKNOWN;case An.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case An.INTERNAL:return U.INTERNAL;case An.UNAVAILABLE:return U.UNAVAILABLE;case An.UNAUTHENTICATED:return U.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case An.NOT_FOUND:return U.NOT_FOUND;case An.ALREADY_EXISTS:return U.ALREADY_EXISTS;case An.PERMISSION_DENIED:return U.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case An.ABORTED:return U.ABORTED;case An.OUT_OF_RANGE:return U.OUT_OF_RANGE;case An.UNIMPLEMENTED:return U.UNIMPLEMENTED;case An.DATA_LOSS:return U.DATA_LOSS;default:return Te(39323,{code:t})}}(vt=An||(An={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=new ea([4294967295,4294967295],0);function ox(t){const e=$O().encode(t),n=new xD;return n.update(e),new Uint8Array(n.digest())}function ax(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ea([n,r],0),new ea([s,i],0)]}class cI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ud(`Invalid padding: ${n}`);if(r<0)throw new Ud(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ud(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ud(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ea.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ea.fromNumber(r)));return s.compare(d7)===1&&(s=new ea([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ox(e),[r,s]=ax(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new cI(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=ox(e),[r,s]=ax(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,If.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ef(Ne.min(),s,new Ft(je),$r(),Ge())}}class If{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new If(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class BO{constructor(e,n){this.targetId=e,this.Ce=n}}class zO{constructor(e,n,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class lx{constructor(){this.ve=0,this.Fe=cx(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),r=Ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:i})}}),new If(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=cx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class h7{constructor(e){this.Ge=e,this.ze=new Map,this.je=$r(),this.Je=dm(),this.He=dm(),this.Ye=new Ft(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Xp(i))if(r===0){const o=new fe(i.path);this.et(n,o,$t.newNoDocument(o,Ne.min()))}else Ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}oh==null||oh.lt(function(d,h,f,m,E){var w,_,I;const p={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},v=h.unchangedNames;return v&&(p.bloomFilter={applied:E===0,hashCount:(v==null?void 0:v.hashCount)??0,bitmapLength:((_=(w=v==null?void 0:v.bits)==null?void 0:w.bitmap)==null?void 0:_.length)??0,padding:((I=v==null?void 0:v.bits)==null?void 0:I.padding)??0,mightContain:x=>(m==null?void 0:m.mightContain(x))??!1}),p}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Qi(r).toUint8Array()}catch(l){if(l instanceof iO)return is("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cI(o,s,i)}catch(l){return is(l instanceof Ud?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Xp(a.target)){const l=new fe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,$t.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ge();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Ef(e,n,this.Ye,this.je,r);return this.je=$r(),this.Je=dm(),this.He=dm(),this.Ye=new Ft(je),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new lx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Rt(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Rt(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dm(){return new Ft(fe.comparator)}function cx(){return new Ft(fe.comparator)}const f7={asc:"ASCENDING",desc:"DESCENDING"},m7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p7={and:"AND",or:"OR"};class g7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fw(t,e){return t.useProto3Json||pf(e)?e:{value:e}}function bu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y7(t,e){return bu(t,e.toTimestamp())}function wn(t){return Ae(!!t,49232),Ne.fromTimestamp(function(n){const r=Gi(n);return new wt(r.seconds,r.nanos)}(t))}function uI(t,e){return Uw(t,e).canonicalString()}function Uw(t,e){const n=function(s){return new it(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qO(t){const e=it.fromString(t);return Ae(e2(e),10190,{key:e.toString()}),e}function Kh(t,e){return uI(t.databaseId,e.path)}function fi(t,e){const n=qO(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(GO(n))}function HO(t,e){return uI(t.databaseId,e)}function KO(t){const e=qO(t);return e.length===4?it.emptyPath():GO(e)}function jw(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GO(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ux(t,e,n){return{name:Kh(t,e),fields:n.value.mapValue.fields}}function dy(t,e,n){const r=fi(t,e.name),s=wn(e.updateTime),i=e.createTime?wn(e.createTime):Ne.min(),o=new ir({mapValue:{fields:e.fields}}),a=$t.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function v7(t,e){return"found"in e?function(r,s){Ae(!!s.found,43571),s.found.name,s.found.updateTime;const i=fi(r,s.found.name),o=wn(s.found.updateTime),a=s.found.createTime?wn(s.found.createTime):Ne.min(),l=new ir({mapValue:{fields:s.found.fields}});return $t.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){Ae(!!s.missing,3894),Ae(!!s.readTime,22933);const i=fi(r,s.missing),o=wn(s.readTime);return $t.newNoDocument(i,o)}(t,e):Te(7234,{result:e})}function _7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ae(d===void 0||typeof d=="string",58123),cn.fromBase64String(d||"")):(Ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),cn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?U.UNKNOWN:jO(c.code);return new Y(d,c.message||"")}(o);n=new zO(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fi(t,r.document.name),i=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):Ne.min(),a=new ir({mapValue:{fields:r.document.fields}}),l=$t.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Xm(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fi(t,r.document),i=r.readTime?wn(r.readTime):Ne.min(),o=$t.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Xm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fi(t,r.document),i=r.removedTargetIds||[];n=new Xm([],i,s,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new u7(s,i),a=r.targetId;n=new BO(a,o)}}return n}function Gh(t,e){let n;if(e instanceof Gu)n={update:ux(t,e.key,e.value)};else if(e instanceof Qu)n={delete:Kh(t,e.key)};else if(e instanceof eo)n={update:ux(t,e.key,e.data),updateMask:b7(e.fieldMask)};else{if(!(e instanceof iI))return Te(16599,{Vt:e.type});n={verify:Kh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Tu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Su)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:y7(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Te(27497)}(t,e.precondition)),n}function $w(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Qt.updateTime(wn(i.updateTime)):i.exists!==void 0?Qt.exists(i.exists):Qt.none()}(e.currentDocument):Qt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Ae(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Tu;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Sl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new bl(d)}else"increment"in a?l=new Su(o,a.increment):Te(16584,{proto:a});const c=Bt.fromServerFormat(a.fieldPath);return new wf(c,l)}(t,s)):[];if(e.update){e.update.name;const s=fi(t,e.update.name),i=new ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new jr(c.map(d=>Bt.fromServerFormat(d)))}(e.updateMask);return new eo(s,i,o,n,r)}return new Gu(s,i,n,r)}if(e.delete){const s=fi(t,e.delete);return new Qu(s,n)}if(e.verify){const s=fi(t,e.verify);return new iI(s,n)}return Te(1463,{proto:e})}function w7(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?wn(s.updateTime):wn(i);return o.isEqual(Ne.min())&&(o=wn(i)),new a7(o,s.transformResults||[])}(n,e))):[]}function QO(t,e){return{documents:[HO(t,e.path)]}}function hy(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HO(t,s);const i=function(c){if(c.length!==0)return ZO(bt.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ro(f.field),direction:I7(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Fw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function YO(t,e,n,r){const{ft:s,parent:i}=hy(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Ro(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Ro(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function JO(t){let e=KO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=XO(h);return f instanceof bt&&tI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Hh(lc(E.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,pf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new ha(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new ha(m,f)}(n.endAt)),EO(e,s,o,i,a,"F",l,c)}function E7(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lc(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=lc(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lc(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lc(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(lc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bt.create(n.compositeFilter.filters.map(r=>XO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(t):Te(30097,{filter:t})}function I7(t){return f7[t]}function T7(t){return m7[t]}function S7(t){return p7[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function lc(t){return Bt.fromServerFormat(t.fieldPath)}function ZO(t){return t instanceof ht?function(n){if(n.op==="=="){if(GA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(KA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(KA(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:T7(n.op),value:n.value}}}(t):t instanceof bt?function(n){const r=n.getFilters().map(s=>ZO(s));return r.length===1?r[0]:{compositeFilter:{op:S7(n.op),filters:r}}}(t):Te(54877,{filter:t})}function b7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function e2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,r,s,i=Ne.min(),o=Ne.min(),a=cn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.yt=e}}function A7(t,e){let n;if(e.document)n=dy(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),s=xl(e.noDocument.readTime);n=$t.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const r=fe.fromSegments(e.unknownDocument.path),s=xl(e.unknownDocument.version);n=$t.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new wt(s[0],s[1]);return Ne.fromTimestamp(i)}(e.readTime)),n}function dx(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Kh(i,o.key),fields:o.data.value.mapValue.fields,updateTime:bu(i,o.version.toTimestamp()),createTime:bu(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Al(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Al(e.version)}}return r}function tg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Al(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xl(t){const e=new wt(t.seconds,t.nanoseconds);return Ne.fromTimestamp(e)}function za(t,e){const n=(e.baseMutations||[]).map(i=>$w(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>$w(t.yt,i)),s=wt.fromMillis(e.localWriteTimeMs);return new oI(e.batchId,s,n,r)}function jd(t){const e=xl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?xl(t.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Ae(o===1,1966,{count:o}),yr(Ku(KO(i.documents[0])))}(t.query):function(i){return yr(JO(i))}(t.query),new Di(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,cn.fromBase64String(t.resumeToken))}function n2(t,e){const n=Al(e.snapshotVersion),r=Al(e.lastLimboFreeSnapshotVersion);let s;s=Xp(e.target)?QO(t.yt,e.target):hy(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tl(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function fy(t){const e=JO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eg(e,e.limit,"L"):e}function kv(t,e){return new lI(e.largestBatchId,$w(t.yt,e.overlayMutation))}function hx(t,e){const n=e.path.lastSegment();return[t,gr(e.path.popLast()),n]}function fx(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Al(r.readTime),documentKey:gr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{getBundleMetadata(e,n){return mx(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:xl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return mx(e).put(function(s){return{bundleId:s.id,createTime:Al(wn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return px(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:fy(i.bundledQuery),readTime:xl(i.readTime)}}(r)})}saveNamedQuery(e,n){return px(e).put(function(s){return{name:s.name,readTime:Al(wn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function mx(t){return $n(t,ry)}function px(t){return $n(t,sy)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new my(e,r)}getOverlay(e,n){return Td(e).get(hx(this.userId,n)).next(r=>r?kv(this.serializer,r):null)}getOverlays(e,n){const r=ii();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new lI(n,o);s.push(this.St(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(gr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Td(e).Z(Cw,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=ii(),i=gr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Td(e).J(Cw,o).next(a=>{for(const l of a){const c=kv(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=ii();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Td(e).ee({index:XD,range:a},(l,c,d)=>{const h=kv(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return Td(e).put(function(s,i,o){const[a,l,c]=hx(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Gh(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Td(t){return $n(t,iy)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{bt(e){return $n(e,JE)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?cn.fromUint8Array(r):cn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Kt(e.integerValue));else if("doubleValue"in e){const r=Kt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Fh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Gi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Qi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?dO(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ly(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=wu,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Kt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),fe.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Wa.Kt=new Wa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=255;function P7(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function gx(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=P7(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class C7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=gx(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=gx(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Jl),this.sn(255)}_n(){this.an(Jl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Jl?(this.sn(Jl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Jl?(this.an(Jl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class k7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class N7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Sd{constructor(){this.cn=new C7,this.ln=new k7(this.cn),this.hn=new N7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new qa(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Zm(this.En),directionalValue:Zm(this.dn),orderedDocumentKey:Zm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function mo(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=yx(t.En,e.En),n!==0?n:(n=yx(t.dn,e.dn),n!==0?n:fe.comparator(t.In,e.In)))}function yx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Zm(t){return NN()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function vx(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class _x{constructor(e){this.mn=new Rt((n,r)=>Bt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=xw(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ua(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Rt(Bt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new cl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new cl(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new cl(r.field,r.dir==="asc"?0:1)));return new mu(mu.UNKNOWN_ID,this.collectionId,n,pu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){var n,r;if(Ae(t instanceof ht||t instanceof bt,20012),t instanceof ht){if(t instanceof wO){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ht.create(t.field,"==",i)))||[];return bt.create(s,"or")}return t}const e=t.filters.map(s=>r2(s));return bt.create(e,t.op)}function D7(t){if(t.getFilters().length===0)return[];const e=Ww(r2(t));return Ae(s2(e),7391),Bw(e)||zw(e)?[e]:e.getFilters()}function Bw(t){return t instanceof ht}function zw(t){return t instanceof bt&&tI(t)}function s2(t){return Bw(t)||zw(t)||function(n){if(n instanceof bt&&Ow(n)){for(const r of n.getFilters())if(!Bw(r)&&!zw(r))return!1;return!0}return!1}(t)}function Ww(t){if(Ae(t instanceof ht||t instanceof bt,34018),t instanceof ht)return t;if(t.filters.length===1)return Ww(t.filters[0]);const e=t.filters.map(r=>Ww(r));let n=bt.create(e,t.op);return n=ng(n),s2(n)?n:(Ae(n instanceof bt,64498),Ae(Iu(n),40251),Ae(n.filters.length>1,57927),n.filters.reduce((r,s)=>dI(r,s)))}function dI(t,e){let n;return Ae(t instanceof ht||t instanceof bt,38388),Ae(e instanceof ht||e instanceof bt,25473),n=t instanceof ht?e instanceof ht?function(s,i){return bt.create([s,i],"and")}(t,e):wx(t,e):e instanceof ht?wx(e,t):function(s,i){if(Ae(s.filters.length>0&&i.filters.length>0,48005),Iu(s)&&Iu(i))return yO(s,i.getFilters());const o=Ow(s)?s:i,a=Ow(s)?i:s,l=o.filters.map(c=>dI(c,a));return bt.create(l,"or")}(t,e),ng(n)}function wx(t,e){if(Iu(e))return yO(e,t.getFilters());{const n=e.filters.map(r=>dI(t,r));return bt.create(n,"or")}}function ng(t){if(Ae(t instanceof ht||t instanceof bt,11850),t instanceof ht)return t;const e=t.getFilters();if(e.length===1)return ng(e[0]);if(pO(t))return t;const n=e.map(s=>ng(s)),r=[];return n.forEach(s=>{s instanceof ht?r.push(s):s instanceof bt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:bt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(){this.Cn=new hI}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(os.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class hI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Rt(it.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="IndexedDbIndexManager",hm=new Uint8Array(0);class L7{constructor(e,n){this.databaseId=n,this.vn=new hI,this.Fn=new Zi(r=>Tl(r),(r,s)=>yf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:gr(s)};return Ix(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[VD(n),""],!1,!0);return Ix(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(si(o.parent))}return r})}addFieldIndex(e,n){const r=bd(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Zl(e);return i.next(a=>{o.put(fx(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=bd(e),s=Zl(e),i=Xl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=bd(e),r=Xl(e),s=Zl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new _x(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Xl(e);let s=!0;const i=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ge();const a=[];return M.forEach(i,(l,c)=>{ne(Ex,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${Tl(n)}`);const d=function(I,x){const P=xw(x);if(P===void 0)return null;for(const L of Zp(I,P.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(I,x){const P=new Map;for(const L of Ua(x))for(const A of Zp(I,L.fieldPath))switch(A.op){case"==":case"in":P.set(L.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return P.set(L.fieldPath.canonicalString(),A.value),Array.from(P.values())}return null}(c,l),f=function(I,x){const P=[];let L=!0;for(const A of Ua(x)){const T=A.kind===0?ZA(I,A.fieldPath,I.startAt):ex(I,A.fieldPath,I.startAt);P.push(T.value),L&&(L=T.inclusive)}return new ha(P,L)}(c,l),m=function(I,x){const P=[];let L=!0;for(const A of Ua(x)){const T=A.kind===0?ex(I,A.fieldPath,I.endAt):ZA(I,A.fieldPath,I.endAt);P.push(T.value),L&&(L=T.inclusive)}return new ha(P,L)}(c,l),E=this.On(l,c,f),p=this.On(l,c,m),v=this.Nn(l,c,h),w=this.Bn(l.indexId,d,E,f.inclusive,p,m.inclusive,v);return M.forEach(w,_=>r.Y(_,n.limit).next(I=>{I.forEach(x=>{const P=fe.fromSegments(x.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=D7(bt.create(e.filters,"and")).map(r=>Mw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):hm,m=this.kn(e,f,r[h%c],s),E=this.qn(e,f,i[h%c],o),p=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(m,E,p))}return d}kn(e,n,r,s){const i=new qa(e,fe.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new qa(e,fe.empty(),n,r);return s?i.An():i}xn(e,n){const r=new _x(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return M.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Rt(Bt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Sd;for(const s of Ua(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Wa.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Sd;return Wa.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Sd;return Wa.Kt.Dt(Il(this.databaseId,n),r.Pn(function(i){const o=Ua(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Sd);let i=0;for(const o of Ua(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&qh(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);Wa.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Sd;l.seed(a.un()),Wa.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=bd(e),s=Zl(e);return(n?r.J(Pw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new pu(h.sequenceNumber,new os(xl(h.readTime),new fe(si(h.documentKey)),h.largestBatchId)):pu.empty(),m=d.fields.map(([E,p])=>new cl(Bt.fromServerFormat(E),p));return new mu(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:je(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=bd(e),i=Zl(e);return this.Gn(e).next(o=>s.J(Pw,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(fx(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?M.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Xl(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Xl(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Xl(e);let i=new Rt(mo);return s.ee({index:JD,range:IDBKeyRange.only([r.indexId,this.uid,Zm(this.$n(r,n))])},(o,a)=>{i=i.add(new qa(r.indexId,n,vx(a.arrayValue),vx(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new Rt(mo);const s=this.Qn(n,e);if(s==null)return r;const i=xw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(qh(o))for(const a of o.arrayValue.values||[])r=r.add(new qa(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new qa(n.indexId,e.key,hm,s));return r}Jn(e,n,r,s,i){ne(Ex,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),E=c.getIterator();let p=Yl(m),v=Yl(E);for(;p||v;){let w=!1,_=!1;if(p&&v){const I=d(p,v);I<0?_=!0:I>0&&(w=!0)}else p!=null?_=!0:w=!0;w?(h(v),v=Yl(E)):_?(f(p),p=Yl(m)):(p=Yl(m),v=Yl(E))}}(s,i,mo,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return Zl(e).ee({index:YD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>mo(o,a)).filter((o,a,l)=>!a||mo(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=mo(o,e),l=mo(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,hm,fe.empty()),l=s[o+1].Vn(this.uid,hm,fe.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return mo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Tx)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Te(44426))).next(Tx)}}function Ix(t){return $n(t,$h)}function Xl(t){return $n(t,nh)}function bd(t){return $n(t,YE)}function Zl(t){return $n(t,th)}function Tx(t){Ae(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;KE(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new os(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},i2=41943040;class mr{static withCacheSize(e){return new mr(e,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e,n){const r=t.store(As),s=t.store(gu),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Ae(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=KD(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return M.waitFor(i).next(()=>c)}function rg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(i2,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);class py{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Ae(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new py(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return po(e).ee({index:Za,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=cc(e),o=po(e);return o.add({}).next(a=>{Ae(typeof a=="number",49019);const l=new oI(a,n,r,s),c=function(m,E,p){const v=p.baseMutations.map(_=>Gh(m.yt,_)),w=p.mutations.map(_=>Gh(m.yt,_));return{userId:E,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:v,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new Rt((f,m)=>je(f.canonicalString(),m.canonicalString()));for(const f of s){const m=KD(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,g8))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return po(e).get(n).next(r=>r?(Ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),za(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return po(e).ee({index:Za,range:s},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=r,47524,{tr:r}),i=za(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ta;return po(e).ee({index:Za,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ta],[this.userId,Number.POSITIVE_INFINITY]);return po(e).J(Za,n).next(r=>r.map(s=>za(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Hm(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return cc(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=si(d);if(c===this.userId&&n.path.isEqual(f))return po(e).get(h).next(m=>{if(!m)throw Te(61480,{nr:o,batchId:h});Ae(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(za(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(je);const s=[];return n.forEach(i=>{const o=Hm(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=cc(e).ee({range:a},(c,d,h)=>{const[f,m,E]=c,p=si(m);f===this.userId&&i.path.isEqual(p)?r=r.add(E):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Hm(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Rt(je);return cc(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,E=si(f);h===this.userId&&r.isPrefixOf(E)?E.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(po(e).get(i).next(o=>{if(o===null)throw Te(35274,{batchId:i});Ae(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(za(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return o2(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return cc(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=si(i[1]);s.push(l)}else a.done()}).next(()=>{Ae(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return a2(e,this.userId,n)}_r(e){return l2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:ta,lastStreamToken:""})}}function a2(t,e,n){const r=Hm(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return cc(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function po(t){return $n(t,As)}function cc(t){return $n(t,gu)}function l2(t){return $n(t,Uh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rl(0)}static cr(){return new Rl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Rl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Ne.fromTimestamp(new wt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ec(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Ae(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return ec(e).ee((o,a)=>{const l=jd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return ec(e).ee((r,s)=>{const i=jd(s);n(i)})}lr(e){return bx(e).get(Jp).next(n=>(Ae(n!==null,2888),n))}hr(e,n){return bx(e).put(Jp,n)}Pr(e,n){return ec(e).put(n2(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Tl(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ec(e).ee({range:s,index:QD},(o,a,l)=>{const c=jd(a);yf(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Po(e);return n.forEach(o=>{const a=gr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Po(e);return M.forEach(n,i=>{const o=gr(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Po(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Po(e);let i=Ge();return s.ee({range:r,X:!0},(o,a,l)=>{const c=si(o[1]),d=new fe(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=gr(n.path),s=IDBKeyRange.bound([r],[VD(r)],!1,!0);let i=0;return Po(e).ee({index:QE,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return ec(e).get(n).next(r=>r?jd(r):null)}}function ec(t){return $n(t,yu)}function bx(t){return $n(t,ul)}function Po(t){return $n(t,vu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="LruGarbageCollector",c2=1048576;function xx([t,e],[n,r]){const s=je(t,n);return s===0?je(e,r):s}class V7{constructor(e){this.Ir=e,this.buffer=new Rt(xx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class u2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(Ax,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ia(n)?ne(Ax,"Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Vr(3e5)})}}class F7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Ur.ce);const r=new V7(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Sx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),oc()<=dt.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function d2(t,e){return new F7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,n){this.db=e,this.garbageCollector=d2(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return fm(e,r)}removeReference(e,n,r){return fm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return fm(e,n)}br(e,n){return function(s,i){let o=!1;return l2(s).te(a=>a2(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ne.min()),Po(e).delete(function(h){return[0,gr(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return fm(e,n)}Sr(e,n){const r=Po(e);let s,i=Ur.ce;return r.ee({index:QE},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Ur.ce&&n(new fe(si(s)),i),i=c,s=l):i=Ur.ce}).next(()=>{i!==Ur.ce&&n(new fe(si(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fm(t,e){return Po(t).put(function(r,s){return{targetId:0,path:gr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.changes=new Zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return La(e).put(r)}removeEntry(e,n,r){return La(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=$t.newInvalidDocument(n);return La(e).ee({index:Km,range:IDBKeyRange.only(Ad(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:$t.newInvalidDocument(n)};return La(e).ee({index:Km,range:IDBKeyRange.only(Ad(n))},(s,i)=>{r={document:this.Cr(n,i),size:rg(i)}}).next(()=>r)}getEntries(e,n){let r=$r();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=$r(),s=new Ft(fe.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,rg(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let s=new Rt(Cx);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ad(s.first()),Ad(s.last())),o=s.getIterator();let a=o.getNext();return La(e).ee({index:Km,range:i},(l,c,d)=>{const h=fe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Cx(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ad(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),tg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return La(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=$r();for(const h of c){const f=this.Cr(fe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(_f(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=$r();const o=Px(n,r),a=Px(n,os.max());return La(e).ee({index:GD,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(fe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new $7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Rx(e).get(Rw).next(n=>(Ae(!!n,20021),n))}Dr(e,n){return Rx(e).put(Rw,n)}Cr(e,n){if(n){const r=A7(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return $t.newInvalidDocument(e)}}function f2(t){return new j7(t)}class $7 extends h2{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Zi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Rt((i,o)=>je(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=dx(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=rg(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=dx(this.Nr.serializer,o.convertToNoDocument(Ne.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Rx(t){return $n(t,jh)}function La(t){return $n(t,Yp)}function Ad(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Px(t,e){const n=e.documentKey.path.toArray();return[t,tg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Cx(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=je(n[i],r[i]),s)return s;return s=je(n.length,r.length),s||(s=je(n[n.length-2],r[r.length-2]),s||je(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ih(r.mutation,s,jr.empty(),wt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ge()){const s=ii();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Fd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=$r();const o=sh(),a=function(){return sh()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof eo)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ih(d.mutation,c,d.mutation.getFieldMask(),wt.now())):o.set(c.key,jr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new B7(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=sh();let s=new Ft((o,a)=>o-a),i=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||jr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Ge()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=PO();d.forEach(f=>{if(!i.has(f)){const m=MO(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(ii());let a=fu,l=i;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ge())).next(d=>({batchId:a,changes:RO(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=Fd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Fd();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,f){return new Xi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,$t.newInvalidDocument(d)))});let a=Fd();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&ih(d.mutation,c,jr.empty(),wt.now()),_f(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wn(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:fy(s.bundledQuery),readTime:wn(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.overlays=new Ft(fe.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ii();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=ii(),i=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ft((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ii(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ii(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lI(n,r));let i=this.qr.get(n);i===void 0&&(i=Ge(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.Qr=new Rt(Gn.$r),this.Ur=new Rt(Gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Gn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Gn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new fe(new it([])),r=new Gn(n,e),s=new Gn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new fe(new it([])),r=new Gn(n,e),s=new Gn(n,e+1);let i=Ge();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Gn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return fe.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Rt(Gn.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oI(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Gn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ta:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gn(n,0),s=new Gn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(je);return n.forEach(s=>{const i=new Gn(s,0),o=new Gn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new Gn(new fe(i),0);let a=new Rt(je);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new Gn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Gn(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.ri=e,this.docs=function(){return new Ft(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$t.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$r();const o=n.path,a=new fe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||KE(BD(d),r)<=0||(s.has(d.key)||_f(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Te(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G7(this)}getSize(e){return M.resolve(this.size)}}class G7 extends h2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e){this.persistence=e,this.si=new Zi(n=>Tl(n),yf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new fI,this.targetCount=0,this.ai=Rl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Rl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ur(0),this.li=!1,this.li=!0,this.hi=new q7,this.referenceDelegate=e(this),this.Pi=new Q7(this),this.indexManager=new O7,this.remoteDocumentCache=function(s){return new K7(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new t2(n),this.Ii=new z7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new H7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new Y7(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Y7 extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class gy{constructor(e){this.persistence=e,this.Ri=new fI,this.Vi=null}static mi(e){return new gy(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=fe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class sg{constructor(e,n){this.persistence=e,this.pi=new Zi(r=>gr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=d2(this,n)}static mi(e,n){return new sg(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qm(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.serializer=e}k(e,n,r,s){const i=new ny("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(gf)}(e),function(l){l.createObjectStore(Uh,{keyPath:p8}),l.createObjectStore(As,{keyPath:$A,autoIncrement:!0}).createIndex(Za,BA,{unique:!0}),l.createObjectStore(gu)}(e),kx(e),function(l){l.createObjectStore(ja)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(vu),l.deleteObjectStore(yu),l.deleteObjectStore(ul)}(e),kx(e)),o=o.next(()=>function(l){const c=l.store(ul),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return c.put(Jp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(As).J().next(h=>{l.deleteObjectStore(As),l.createObjectStore(As,{keyPath:$A,autoIncrement:!0}).createIndex(Za,BA,{unique:!0});const f=c.store(As),m=h.map(E=>f.put(E));return M.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(_u,{keyPath:S8})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(jh)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(ry,{keyPath:b8})})(e),function(l){l.createObjectStore(sy,{keyPath:A8})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(iy,{keyPath:D8});c.createIndex(Cw,O8,{unique:!1}),c.createIndex(XD,L8,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Yp,{keyPath:y8});c.createIndex(Km,v8),c.createIndex(GD,_8)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ja))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(YE,{keyPath:x8,autoIncrement:!0}).createIndex(Pw,R8,{unique:!1}),l.createObjectStore(th,{keyPath:P8}).createIndex(YD,C8,{unique:!1}),l.createObjectStore(nh,{keyPath:k8}).createIndex(JD,N8,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(th).clear()}).next(()=>{n.objectStore(nh).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(JE,{keyPath:M8})})(e)})),r<18&&s>=18&&NN()&&(o=o.next(()=>{n.objectStore(th).clear()}).next(()=>{n.objectStore(nh).clear()})),o}wi(e){let n=0;return e.store(ja).ee((r,s)=>{n+=rg(s)}).next(()=>{const r={byteSize:n};return e.store(jh).put(Rw,r)})}yi(e){const n=e.store(Uh),r=e.store(As);return n.J().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,ta],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Za,o).next(a=>M.forEach(a,l=>{Ae(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=za(this.serializer,l);return o2(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(vu),r=e.store(ja);return e.store(ul).get(Jp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new it(o),c=function(h){return[0,gr(h)]}(l);i.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:gr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}bi(e,n){e.createObjectStore($h,{keyPath:T8});const r=n.store($h),s=new hI,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:gr(l)})}};return n.store(ja).ee({X:!0},(o,a)=>{const l=new it(o);return i(l.popLast())}).next(()=>n.store(gu).ee({X:!0},([o,a,l],c)=>{const d=si(a);return i(d.popLast())}))}Di(e){const n=e.store(yu);return n.ee((r,s)=>{const i=jd(s),o=n2(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ja),s=[];return r.ee((i,o)=>{const a=n.store(Yp),l=function(h){return h.document?new fe(it.fromString(h.document.name).popFirst(5)):h.noDocument?fe.fromSegments(h.noDocument.path):h.unknownDocument?fe.fromSegments(h.unknownDocument.path):Te(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Fi(e,n){const r=n.store(As),s=f2(this.serializer),i=new mI(gy.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Ge();za(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),M.forEach(a,(l,c)=>{const d=new Yn(c),h=my.wt(this.serializer,d),f=i.getIndexManager(d),m=py.wt(d,this.serializer,f,i.referenceDelegate);return new m2(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new kw(n,Ur.ce),l).next()})})}}function kx(t){t.createObjectStore(vu,{keyPath:E8}).createIndex(QE,I8,{unique:!0}),t.createObjectStore(yu,{keyPath:"targetId"}).createIndex(QD,w8,{unique:!0}),t.createObjectStore(ul)}const go="IndexedDbPersistence",Nv=18e5,Dv=5e3,Ov="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",p2="main";class pI{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!pI.v())throw new Y(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new U7(this,s),this.$i=n+p2,this.serializer=new t2(l),this.Ui=new hi(this.$i,this.Ni,new J7(this.serializer)),this.hi=new R7,this.Pi=new M7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=f2(this.serializer),this.Ii=new x7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&vn(go,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,Ov);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ur(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ia(e))return ne(go,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(go,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return xd(e).get(Ql).next(n=>M.resolve(this.es(n)))}ts(e){return mm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Nv)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=$n(n,_u);return r.J().next(s=>{const i=this.ss(s,Nv),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):xd(e).get(Ql).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dv)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,Ov);return!1}}return!(!this.networkEnabled||!this.inForeground)||mm(e).J().next(r=>this.ss(r,Dv).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ne(go,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[gf,_u],e=>{const n=new kw(e,Ur.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>mm(e).J().next(n=>this.ss(n,Nv).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return py.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new L7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return my.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ne(go,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?U8:l===17?nO:l===16?F8:l===15?XE:l===14?tO:l===13?eO:l===12?V8:l===11?ZD:void Te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new kw(a,this.ci?this.ci.next():Ur.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Y(U.FAILED_PRECONDITION,zD);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return xd(e).get(Ql).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dv)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y(U.FAILED_PRECONDITION,Ov)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xd(e).put(Ql,n)}static v(){return hi.v()}Zi(e){const n=xd(e);return n.get(Ql).next(r=>this.es(r)?(ne(go,"Releasing primary lease."),n.delete(Ql)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(vn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;kN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ne(go,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vn(go,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){vn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xd(t){return $n(t,gf)}function mm(t){return $n(t,_u)}function gI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ge(),s=Ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new yI(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return kN()?8:qD(Un())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new X7;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(oc()<=dt.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ac(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(oc()<=dt.DEBUG&&ne("QueryEngine","Query:",ac(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(oc()<=dt.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ac(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):M.resolve())}ys(e,n){if(tx(n))return M.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=eg(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ge(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,eg(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return tx(n)||s.isEqual(Ne.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(oc()<=dt.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ac(n)),this.vs(e,o,n,$D(s,fu)).next(a=>a))})}Ds(e,n){let r=new Rt(AO(e));return n.forEach((s,i)=>{_f(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return oc()<=dt.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ac(n)),this.ps.getDocumentsMatchingQuery(e,n,os.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="LocalStore",Z7=3e8;class eH{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ft(je),this.xs=new Zi(i=>Tl(i),yf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function y2(t,e,n,r){return new eH(t,e,n,r)}async function v2(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ge();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function tH(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(E=>{m=m.next(()=>d.getEntry(l,E)).next(p=>{const v=c.docVersions.get(E);Ae(v!==null,48541),p.version.compareTo(v)<0&&(h.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),d.addEntry(p)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _2(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function nH(t,e){const n=me(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(cn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(p,v,w){return p.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=Z7?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=$r(),c=Ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(w2(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Ne.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function w2(t,e,n){let r=Ge(),s=Ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=$r();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne(vI,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function rH(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ta),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Au(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Di(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function xu(t,e,n){const r=me(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ia(o))throw o;ne(vI,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ig(t,e,n){const r=me(t);let s=Ne.min(),i=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=me(l),f=h.xs.get(d);return f!==void 0?M.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,yr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ne.min(),n?i:Ge())).next(a=>(T2(r,bO(e),a),{documents:a,Qs:i})))}function E2(t,e){const n=me(t),r=me(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function I2(t,e){const n=me(t),r=n.Os.get(e)||Ne.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,$D(r,fu),Number.MAX_SAFE_INTEGER)).then(s=>(T2(n,e,s),s))}function T2(t,e,n){let r=t.Os.get(e)||Ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}async function sH(t,e,n,r){const s=me(t);let i=Ge(),o=$r();for(const c of n){const d=e.$s(c.metadata.name);c.document&&(i=i.add(d));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(d,h)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),l=await Au(s,function(d){return yr(Ku(it.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>w2(c,a,o).next(d=>(a.apply(c),d)).next(d=>s.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Pi.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.ks,d.qs)).next(()=>d.ks)))}async function iH(t,e,n=Ge()){const r=await Au(t,yr(fy(e.bundledQuery))),s=me(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=wn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const a=r.withResumeToken(cn.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(i,a).next(()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Pi.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ii.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="firestore_clients";function Nx(t,e){return`${S2}_${t}_${e}`}const b2="firestore_mutations";function Dx(t,e,n){let r=`${b2}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const A2="firestore_targets";function Lv(t,e){return`${A2}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="SharedClientState";class og{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Y(s.error.code,s.error.message))),o?new og(e,n,s.state,i):(vn(Zs,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ah{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Y(r.error.code,r.error.message))),i?new ah(e,r.state,s):(vn(Zs,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ag{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=rI();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=HD(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new ag(e,i):(vn(Zs,`Failed to parse client data for instance '${e}': ${n}`),null)}}class _I{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new _I(n.clientId,n.onlineState):(vn(Zs,`Failed to parse online state: ${e}`),null)}}class qw{constructor(){this.activeTargetIds=rI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mv{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ft(je),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Nx(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new qw),this.ro=new RegExp(`^${S2}_${o}_([^_]*)$`),this.io=new RegExp(`^${b2}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${A2}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Nx(this.persistenceKey,r));if(s){const i=ag.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Lv(this.persistenceKey,e));if(s){const i=ah.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lv(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ne(Zs,"READ",e,n),n}setItem(e,n){ne(Zs,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ne(Zs,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ne(Zs,"EVENT",n.key,n.newValue),n.key===this.eo)return void vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Ur.ce;if(i!=null)try{const a=JSON.parse(i);Ae(typeof a=="number",30636,{So:i}),o=a}catch(a){vn(Zs,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Ur.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new og(this.currentUser,e,n,r),i=Dx(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=Dx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Lv(this.persistenceKey,e),i=new ah(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return ag.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return og.Ws(new Yn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return ah.Ws(s,n)}uo(e){return _I.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ne(Zs,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=rI();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class x2{constructor(){this.Mo=new qw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="ConnectivityMonitor";class Lx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Ox,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(Ox,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm=null;function Hw(){return pm===null?pm=function(){return 268435456+Math.round(2147483648*Math.random())}():pm++,"0x"+pm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="RestConnection",aH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lH{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===zh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Hw(),a=this.zo(e,n.toUriEncodedString());ne(Vv,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=$s(c);return this.Jo(e,a,l,r,d).then(h=>(ne(Vv,`Received RPC '${e}' ${o}: `,h),h),h=>{throw is(Vv,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=aH[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="WebChannelConnection";class uH extends lH{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Hw();return new Promise((a,l)=>{const c=new RD;c.setWithCredentials(!0),c.listenOnce(PD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qm.NO_ERROR:const h=c.getResponseJson();ne(fr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case qm.TIMEOUT:ne(fr,`RPC '${e}' ${o} timed out`),l(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case qm.HTTP_ERROR:const f=c.getStatus();if(ne(fr,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const p=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_)>=0?_:U.UNKNOWN}(E.status);l(new Y(p,E.message))}else l(new Y(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y(U.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ne(fr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ne(fr,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Hw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ND(),a=kD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ne(fr,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const E=new cH({Yo:v=>{m?ne(fr,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(ne(fr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ne(fr,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),p=(v,w,_)=>{v.listen(w,I=>{try{_(I)}catch(x){setTimeout(()=>{throw x},0)}})};return p(h,Vd.EventType.OPEN,()=>{m||(ne(fr,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),p(h,Vd.EventType.CLOSE,()=>{m||(m=!0,ne(fr,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(h))}),p(h,Vd.EventType.ERROR,v=>{m||(m=!0,is(fr,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),E.a_(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),p(h,Vd.EventType.MESSAGE,v=>{var w;if(!m){const _=v.data[0];Ae(!!_,16349);const I=_,x=(I==null?void 0:I.error)||((w=I[0])==null?void 0:w.error);if(x){ne(fr,`RPC '${e}' stream ${s} received error:`,x);const P=x.status;let L=function(R){const C=An[R];if(C!==void 0)return jO(C)}(P),A=x.message;L===void 0&&(L=U.INTERNAL,A="Unknown error status: "+P+" with message "+x.message),m=!0,E.a_(new Y(L,A)),h.close()}else ne(fr,`RPC '${e}' stream ${s} received:`,_),E.u_(_)}}),p(a,CD.STAT_EVENT,v=>{v.stat===Tw.PROXY?ne(fr,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Tw.NOPROXY&&ne(fr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){return typeof window<"u"?window:null}function ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){return new g7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="PersistentStream";class P2{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(vn(n.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ne(Mx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ne(Mx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dH extends P2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_7(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?wn(o.readTime):Ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Xp(l)?{documents:QO(i,l)}:{query:hy(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WO(i,o.resumeToken);const c=Fw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=bu(i,o.snapshotVersion.toTimestamp());const c=Fw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=E7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jw(this.serializer),n.removeTarget=e,this.q_(n)}}class hH extends P2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=w7(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Gh(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{}class mH extends fH{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Uw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Uw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vn(n),this.aa=!1):ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl="RemoteStore";class gH{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Sa(this)&&(ne(Pl,"Restarting streams for network reachability change."),await async function(l){const c=me(l);c.Ea.add(4),await Yu(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Tf(c)}(this))})}),this.Ra=new pH(r,s)}}async function Tf(t){if(Sa(t))for(const e of t.da)await e(!0)}async function Yu(t){for(const e of t.da)await e(!1)}function yy(t,e){const n=me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),TI(n)?II(n):Xu(n).O_()&&EI(n,e))}function Ru(t,e){const n=me(t),r=Xu(n);n.Ia.delete(e),r.O_()&&C2(n,e),n.Ia.size===0&&(r.O_()?r.L_():Sa(n)&&n.Ra.set("Unknown"))}function EI(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xu(t).Y_(e)}function C2(t,e){t.Va.Ue(e),Xu(t).Z_(e)}function II(t){t.Va=new h7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xu(t).start(),t.Ra.ua()}function TI(t){return Sa(t)&&!Xu(t).x_()&&t.Ia.size>0}function Sa(t){return me(t).Ea.size===0}function k2(t){t.Va=void 0}async function yH(t){t.Ra.set("Online")}async function vH(t){t.Ia.forEach((e,n)=>{EI(t,e)})}async function _H(t,e){k2(t),TI(t)?(t.Ra.ha(e),II(t)):t.Ra.set("Unknown")}async function wH(t,e,n){if(t.Ra.set("Online"),e instanceof zO&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){ne(Pl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lg(t,r)}else if(e instanceof Xm?t.Va.Ze(e):e instanceof BO?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ne.min()))try{const r=await _2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(cn.EMPTY_BYTE_STRING,d.snapshotVersion)),C2(i,l);const h=new Di(d.target,l,c,d.sequenceNumber);EI(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne(Pl,"Failed to raise snapshot:",r),await lg(t,r)}}async function lg(t,e,n){if(!Ia(e))throw e;t.Ea.add(1),await Yu(t),t.Ra.set("Offline"),n||(n=()=>_2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(Pl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Tf(t)})}function N2(t,e){return e().catch(n=>lg(t,n,e))}async function Ju(t){const e=me(t),n=fa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ta;for(;EH(e);)try{const s=await rH(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,IH(e,s)}catch(s){await lg(e,s)}D2(e)&&O2(e)}function EH(t){return Sa(t)&&t.Ta.length<10}function IH(t,e){t.Ta.push(e);const n=fa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function D2(t){return Sa(t)&&!fa(t).x_()&&t.Ta.length>0}function O2(t){fa(t).start()}async function TH(t){fa(t).ra()}async function SH(t){const e=fa(t);for(const n of t.Ta)e.ea(n.mutations)}async function bH(t,e,n){const r=t.Ta.shift(),s=aI.from(r,e,n);await N2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ju(t)}async function AH(t,e){e&&fa(t).X_&&await async function(r,s){if(function(o){return UO(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();fa(r).B_(),await N2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ju(r)}}(t,e),D2(t)&&O2(t)}async function Vx(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ne(Pl,"RemoteStore received new credentials");const r=Sa(n);n.Ea.add(3),await Yu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Tf(n)}async function Kw(t,e){const n=me(t);e?(n.Ea.delete(2),await Tf(n)):e||(n.Ea.add(2),await Yu(n),n.Ra.set("Unknown"))}function Xu(t){return t.ma||(t.ma=function(n,r,s){const i=me(n);return i.sa(),new dH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:yH.bind(null,t),t_:vH.bind(null,t),r_:_H.bind(null,t),H_:wH.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),TI(t)?II(t):t.Ra.set("Unknown")):(await t.ma.stop(),k2(t))})),t.ma}function fa(t){return t.fa||(t.fa=function(n,r,s){const i=me(n);return i.sa(),new hH(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:TH.bind(null,t),r_:AH.bind(null,t),ta:SH.bind(null,t),na:bH.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ju(t)):(await t.fa.stop(),t.Ta.length>0&&(ne(Pl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new SI(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zu(t,e){if(vn("AsyncQueue",`${e}: ${t}`),Ia(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Fd(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.ga=new Ft(fe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cl{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Cl(e,n,dl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class RH{constructor(){this.queries=Ux(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=me(n),i=s.queries;s.queries=Ux(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function Ux(){return new Zi(t=>SO(t),vf)}async function bI(t,e){const n=me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new xH,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Zu(o,`Initialization of query '${ac(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&xI(n)}async function AI(t,e){const n=me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PH(t,e){const n=me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&xI(n)}function CH(t,e,n){const r=me(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function xI(t){t.Ca.forEach(e=>{e.next()})}var Gw,jx;(jx=Gw||(Gw={})).Ma="default",jx.Cache="cache";class RI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.serializer=e}$s(e){return fi(this.serializer,e)}Us(e){return e.metadata.exists?dy(this.serializer,e.document,!1):$t.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return wn(e)}}class PI{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=M2(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=it.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new $x(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Ge()).add(i);n.set(o,a)}}return n}async ja(e){const n=await sH(e,new $x(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await iH(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function M2(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.key=e}}class F2{constructor(e){this.key=e}}class U2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=AO(e),this.tu=new dl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Fx,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=_f(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;f&&m?f.data.isEqual(m.data)?E!==p&&(r.track({type:3,doc:m}),v=!0):this.su(f,m)||(r.track({type:2,doc:m}),v=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),v=!0):f&&!m&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(m?(o=o.add(m),i=p?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,E){const p=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:v})}};return p(m)-p(E)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Cl(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new F2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new V2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ba="SyncEngine";class kH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NH{constructor(e){this.key=e,this.hu=!1}}class DH{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zi(a=>SO(a),vf),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(fe.comparator),this.Au=new Map,this.Ru=new fI,this.Vu={},this.mu=new Map,this.fu=Rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OH(t,e,n=!0){const r=vy(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await j2(r,e,n,!0),s}async function LH(t,e){const n=vy(t);await j2(n,e,!0,!1)}async function j2(t,e,n,r){const s=await Au(t.localStore,yr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await CI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&yy(t.remoteStore,s),a}async function CI(t,e,n,r,s){t.pu=(h,f,m)=>async function(p,v,w,_){let I=v.view.ru(w);I.Cs&&(I=await ig(p.localStore,v.query,!1).then(({documents:A})=>v.view.ru(A,I)));const x=_&&_.targetChanges.get(v.targetId),P=_&&_.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(I,p.isPrimaryClient,x,P);return Qw(p,v.targetId,L.au),L.snapshot}(t,h,f,m);const i=await ig(t.localStore,e,!0),o=new U2(e,i.Qs),a=o.ru(i.documents),l=If.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Qw(t,n,c.au);const d=new kH(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function MH(t,e,n){const r=me(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!vf(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ru(r.remoteStore,s.targetId),Pu(r,s.targetId)}).catch(Ea)):(Pu(r,s.targetId),await xu(r.localStore,s.targetId,!0))}async function VH(t,e){const n=me(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ru(n.remoteStore,r.targetId))}async function FH(t,e,n){const r=OI(t);try{const s=await function(o,a){const l=me(o),c=wt.now(),d=a.reduce((m,E)=>m.add(E.key),Ge());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=$r(),p=Ge();return l.Ns.getEntries(m,d).next(v=>{E=v,E.forEach((w,_)=>{_.isValidDocument()||(p=p.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(v=>{h=v;const w=[];for(const _ of a){const I=c7(_,h.get(_.key).overlayedDocument);I!=null&&w.push(new eo(_.key,I,fO(I.value.mapValue),Qt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(v=>{f=v;const w=v.applyToLocalDocumentSet(h,p);return l.documentOverlayCache.saveOverlays(m,v.batchId,w)})}).then(()=>({batchId:f.batchId,changes:RO(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ft(je)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await to(r,s.changes),await Ju(r.remoteStore)}catch(s){const i=Zu(s,"Failed to persist write");n.reject(i)}}async function $2(t,e){const n=me(t);try{const r=await nH(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ae(o.hu,14607):s.removedDocuments.size>0&&(Ae(o.hu,42227),o.hu=!1))}),await to(n,r,e)}catch(r){await Ea(r)}}function Bx(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=me(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&xI(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UH(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ft(fe.comparator);o=o.insert(i,$t.newNoDocument(i,Ne.min()));const a=Ge().add(i),l=new Ef(Ne.min(),new Map,new Ft(je),o,a);await $2(r,l),r.du=r.du.remove(i),r.Au.delete(e),DI(r)}else await xu(r.localStore,e,!1).then(()=>Pu(r,e,n)).catch(Ea)}async function jH(t,e){const n=me(t),r=e.batch.batchId;try{const s=await tH(n.localStore,e);NI(n,r,null),kI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await to(n,s)}catch(s){await Ea(s)}}async function $H(t,e,n){const r=me(t);try{const s=await function(o,a){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ae(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);NI(r,e,n),kI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await to(r,s)}catch(s){await Ea(s)}}async function BH(t,e){const n=me(t);Sa(n.remoteStore)||ne(ba,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=me(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===ta)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=Zu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function kI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function NI(t,e,n){const r=me(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Pu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||B2(t,r)})}function B2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ru(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),DI(t))}function Qw(t,e,n){for(const r of n)r instanceof V2?(t.Ru.addReference(r.key,e),zH(t,r)):r instanceof F2?(ne(ba,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||B2(t,r.key)):Te(19791,{wu:r})}function zH(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ne(ba,"New document in limbo: "+n),t.Eu.add(r),DI(t))}function DI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new fe(it.fromString(e)),r=t.fu.next();t.Au.set(r,new NH(n)),t.du=t.du.insert(n,r),yy(t.remoteStore,new Di(yr(Ku(n.path)),r,"TargetPurposeLimboResolution",Ur.ce))}}async function to(t,e,n){const r=me(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=yI.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=me(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Ia(h))throw h;ne(vI,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),E=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(f,p)}}}(r.localStore,i))}async function WH(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ne(ba,"User change. New user:",e.toKey());const r=await v2(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Y(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await to(n,r.Ls)}}function qH(t,e){const n=me(t),r=n.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let s=Ge();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function HH(t,e){const n=me(t),r=await ig(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Qw(n,e.targetId,s.au),s}async function KH(t,e){const n=me(t);return I2(n.localStore,e).then(r=>to(n,r))}async function GH(t,e,n,r){const s=me(t),i=await function(a,l){const c=me(a),d=me(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Ju(s.remoteStore):n==="acknowledged"||n==="rejected"?(NI(s,e,r||null),kI(s,e),function(a,l){me(me(a).mutationQueue).ir(l)}(s.localStore,e)):Te(6720,"Unknown batchState",{Su:n}),await to(s,i)):ne(ba,"Cannot apply mutation batch with id: "+e)}async function QH(t,e){const n=me(t);if(vy(n),OI(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await zx(n,r.toArray());n.gu=!0,await Kw(n.remoteStore,!0);for(const i of s)yy(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Pu(n,o),xu(n.localStore,o,!0))),Ru(n.remoteStore,o)}),await s,await zx(n,r),function(o){const a=me(o);a.Au.forEach((l,c)=>{Ru(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ft(fe.comparator)}(n),n.gu=!1,await Kw(n.remoteStore,!1)}}async function zx(t,e,n){const r=me(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Au(r.localStore,yr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await HH(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await E2(r.localStore,o);a=await Au(r.localStore,c),await CI(r,z2(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function z2(t){return EO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function YH(t){return function(n){return me(me(n).persistence).Ts()}(me(t).localStore)}async function JH(t,e,n,r){const s=me(t);if(s.gu)return void ne(ba,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await I2(s.localStore,bO(i[0])),a=Ef.createSynthesizedRemoteEventForCurrentChange(e,n==="current",cn.EMPTY_BYTE_STRING);await to(s,o,a);break}case"rejected":await xu(s.localStore,e,!0),Pu(s,e,r);break;default:Te(64155,n)}}async function XH(t,e,n){const r=vy(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ne(ba,"Adding an already active target "+s);continue}const i=await E2(r.localStore,s),o=await Au(r.localStore,i);await CI(r,z2(i),o.targetId,!1,o.resumeToken),yy(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await xu(r.localStore,s,!1).then(()=>{Ru(r.remoteStore,s),Pu(r,s)}).catch(Ea)}}function vy(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UH.bind(null,e),e.Pu.H_=PH.bind(null,e.eventManager),e.Pu.yu=CH.bind(null,e.eventManager),e}function OI(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$H.bind(null,e),e}function ZH(t,e,n){const r=me(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(m,E){const p=me(m),v=wn(E.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",w=>p.Ii.getBundleMetadata(w,E.id)).then(w=>!!w&&w.createTime.compareTo(v)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(M2(l));const c=new PI(l,o.serializer);let d=await o.bu();for(;d;){const f=await c.Ga(d);f&&a._updateProgress(f),d=await o.bu()}const h=await c.ja(i.localStore);return await to(i,h.Ha,void 0),await function(m,E){const p=me(m);return p.persistence.runTransaction("Save bundle","readwrite",v=>p.Ii.saveBundleMetadata(v,E))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return is(ba,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return y2(this.persistence,new g2,e.initialUser,this.serializer)}Cu(e){return new mI(gy.mi,this.serializer)}Du(e){return new x2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cu.provider={build:()=>new Cu};class LI extends Cu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ae(this.persistence.referenceDelegate instanceof sg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new u2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new mI(r=>sg.mi(r,n),this.serializer)}}class MI extends Cu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await OI(this.xu.syncEngine),await Ju(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return y2(this.persistence,new g2,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new u2(r,e.asyncQueue,n)}Mu(e,n){const r=new f8(n,this.persistence);return new h8(e.asyncQueue,r)}Cu(e){const n=gI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new pI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,R2(),ep(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new x2}}class W2 extends MI{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Mv&&(this.sharedClientState.syncEngine={Co:GH.bind(null,n),vo:JH.bind(null,n),Fo:XH.bind(null,n),Ts:YH.bind(null,n),Do:KH.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await QH(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=R2();if(!Mv.v(n))throw new Y(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mv(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ma{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WH.bind(null,this.syncEngine),await Kw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RH}()}createDatastore(e){const n=Bl(e.databaseInfo.databaseId),r=function(i){return new uH(i)}(e.databaseInfo);return function(i,o,a,l){return new mH(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new gH(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Bx(this.syncEngine,n,0),function(){return Lx.v()?new Lx:new oH}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new DH(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=me(s);ne(Pl,"RemoteStore shutting down."),i.Ea.add(5),await Yu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ma.provider={build:()=>new ma};function Wx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Zn,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const s=await this.$u(r);return new L2(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new L2(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new Y(U.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=me(s),a={documents:i.map(h=>Kh(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,it.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const f=v7(o.serializer,h);c.set(f.key.toString(),f)});const d=[];return i.forEach(h=>{const f=c.get(h.toString());Ae(!!f,55234,{key:h}),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=fe.fromPath(r);this.mutations.push(new iI(s,this.precondition(s)))}),await async function(r,s){const i=me(r),o={writes:s.map(a=>Gh(i.serializer,a))};await i.Go("Commit",i.serializer.databaseId,it.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});n=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Y(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ne.min())?Qt.exists(!1):Qt.updateTime(n):Qt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ne.min()))throw new Y(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qt.updateTime(n)}return Qt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new wI(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new nK(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Yu(s)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!pf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!UO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class sK{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yn.UNAUTHENTICATED,this.clientId=ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ne(pa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne(pa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fv(t,e){t.asyncQueue.verifyOperationInProgress(),ne(pa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await v2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VI(t);ne(pa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Vx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Vx(e.remoteStore,s)),t._onlineComponents=e}async function VI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(pa,"Using user provided OfflineComponentProvider");try{await Fv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;is("Error using user provided cache. Falling back to memory cache: "+n),await Fv(t,new Cu)}}else ne(pa,"Using default OfflineComponentProvider"),await Fv(t,new LI(void 0));return t._offlineComponents}async function wy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(pa,"Using user provided OnlineComponentProvider"),await qx(t,t._uninitializedComponentsProvider._online)):(ne(pa,"Using default OnlineComponentProvider"),await qx(t,new ma))),t._onlineComponents}function q2(t){return VI(t).then(e=>e.persistence)}function ed(t){return VI(t).then(e=>e.localStore)}function H2(t){return wy(t).then(e=>e.remoteStore)}function FI(t){return wy(t).then(e=>e.syncEngine)}function K2(t){return wy(t).then(e=>e.datastore)}async function ku(t){const e=await wy(t),n=e.eventManager;return n.onListen=OH.bind(null,e.syncEngine),n.onUnlisten=MH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VH.bind(null,e.syncEngine),n}function iK(t){return t.asyncQueue.enqueue(async()=>{const e=await q2(t),n=await H2(t);return e.setNetworkEnabled(!0),function(s){const i=me(s);return i.Ea.delete(0),Tf(i)}(n)})}function oK(t){return t.asyncQueue.enqueue(async()=>{const e=await q2(t),n=await H2(t);return e.setNetworkEnabled(!1),async function(s){const i=me(s);i.Ea.add(0),await Yu(i),i.Ra.set("Offline")}(n)})}function aK(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=me(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Y(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Zu(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await ed(t),e,n)),n.promise}function G2(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new _y({next:f=>{d.Nu(),o.enqueueAndForget(()=>AI(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new RI(Ku(a.path),d,{includeMetadataChanges:!0,qa:!0});return bI(i,h)}(await ku(t),t.asyncQueue,e,n,r)),r.promise}function lK(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await ig(s,i,!0),l=new U2(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Zu(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await ed(t),e,n)),n.promise}function Q2(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new _y({next:f=>{d.Nu(),o.enqueueAndForget(()=>AI(i,h)),f.fromCache&&l.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new RI(a,d,{includeMetadataChanges:!0,qa:!0});return bI(i,h)}(await ku(t),t.asyncQueue,e,n,r)),r.promise}function cK(t,e,n){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await K2(t);r.resolve(async function(o,a,l){var p;const c=me(o),{request:d,gt:h,parent:f}=YO(c.serializer,IO(a),l);c.connection.$o||delete d.parent;const m=(await c.Ho("RunAggregationQuery",c.serializer.databaseId,f,d,1)).filter(v=>!!v.result);Ae(m.length===1,64727);const E=(p=m[0].result)==null?void 0:p.aggregateFields;return Object.keys(E).reduce((v,w)=>(v[h[w]]=E[w],v),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function uK(t,e){const n=new _y(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){me(s).Ca.add(i),i.next()}(await ku(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){me(s).Ca.delete(i)}(await ku(t),n))}}function dK(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?$O().encode(o):o,function(d,h){return new eK(d,h)}(function(d,h){if(d instanceof Uint8Array)return Wx(d,h);if(d instanceof ArrayBuffer)return Wx(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Bl(e));t.asyncQueue.enqueueAndForget(async()=>{ZH(await FI(t),s,r)})}function hK(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=me(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ii.getNamedQuery(o,s))}(await ed(t),e))}function Y2(t,e){return function(r,s){return new tK(r,s)}(t,e)}function fK(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=me(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,f,m,E,p){h=[...h],f=[...f],h.sort(m),f.sort(m);const v=h.length,w=f.length;let _=0,I=0;for(;_<w&&I<v;){const x=m(h[I],f[_]);x<0?p(h[I++]):x>0?E(f[_++]):(_++,I++)}for(;_<w;)E(f[_++]);for(;I<v;)p(h[I++])}(c,s,l8,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>M.waitFor(a)))}(await ed(t),e))}function mK(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){me(r).Fs.Vs=s}(await ed(t),e))}function pK(t){return t.asyncQueue.enqueue(async()=>function(n){const r=me(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await ed(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="firestore.googleapis.com",Kx=!0;class Gx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X2,this.ssl=Kx}else this.host=e.host,this.ssl=e.ssl??Kx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=i2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c2)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MD;switch(r.type){case"firstParty":return new t8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Hx.get(n);r&&(ne("ComponentProvider","Removing Datastore"),Hx.delete(n),r.terminate())}(this),Promise.resolve()}}function Z2(t,e,n,r={}){var c;t=ot(t,Sf);const s=$s(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(cf(`https://${a}`),Gg("Firestore",!0)),i.host!==X2&&i.host!==a&&is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Vs(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Yn.MOCK_USER;else{d=PN(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Yn(f)}t._authCredentials=new Xq(new LD(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jn(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($l(n,At._jsonSchema))return new At(e,r||null,new fe(it.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Rn("string",At._jsonSchemaVersion),referencePath:Rn("string")};class Ns extends jn{constructor(e,n,r){super(e,n,Ku(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new fe(e))}withConverter(e){return new Ns(this.firestore,e,this._path)}}function Ce(t,e,...n){if(t=tt(t),HE("collection","path",e),t instanceof Sf){const r=it.fromString(e,...n);return MA(r),new Ns(t,null,r)}{if(!(t instanceof At||t instanceof Ns))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return MA(r),new Ns(t.firestore,null,r)}}function gK(t,e){if(t=ot(t,Sf),HE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jn(t,null,function(r){return new Xi(it.emptyPath(),r)}(e))}function Pe(t,e,...n){if(t=tt(t),arguments.length===1&&(e=ey.newId()),HE("doc","path",e),t instanceof Sf){const r=it.fromString(e,...n);return LA(r),new At(t,null,new fe(r))}{if(!(t instanceof At||t instanceof Ns))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return LA(r),new At(t.firestore,t instanceof Ns?t.converter:null,new fe(r))}}function yK(t,e){return t=tt(t),e=tt(e),(t instanceof At||t instanceof Ns)&&(e instanceof At||e instanceof Ns)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function UI(t,e){return t=tt(t),e=tt(e),t instanceof jn&&e instanceof jn&&t.firestore===e.firestore&&vf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="AsyncQueue";class Yx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wI(this,"async_queue_retry"),this._c=()=>{const r=ep();r&&ne(Qx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ep();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ep();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ia(e))throw e;ne(Qx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vn("INTERNAL UNHANDLED ERROR: ",Jx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=SI.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:Jx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class eL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK=-1;class Ct extends Sf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Yx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yx(e),this._firestoreClient=void 0,await e}}}function tL(t,e,n){n||(n=zh);const r=Ul(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Vs(i,e))return s;throw new Y(U.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y(U.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c2)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&$s(e.host)&&cf(e.host),r.initialize({options:e,instanceIdentifier:n})}function _K(t,e){const n=typeof t=="object"?t:Yg(),r=typeof t=="string"?t:e||zh,s=Ul(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=NE("firestore");i&&Z2(s,...i)}return s}function Zt(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nL(t),t._firestoreClient}function nL(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new B8(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,J2(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function wK(t,e){is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return rL(t,ma.provider,{build:r=>new MI(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function EK(t){is("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();rL(t,ma.provider,{build:n=>new W2(n,e.cacheSizeBytes)})}function rL(t,e,n){if((t=ot(t,Ct))._firestoreClient||t._terminated)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},nL(t)}function IK(t){if(t._initialized&&!t._terminated)throw new Y(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!hi.v())return Promise.resolve();const s=r+p2;await hi.delete(s)}(gI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function TK(t){return function(n){const r=new Zn;return n.asyncQueue.enqueueAndForget(async()=>BH(await FI(n),r)),r.promise}(Zt(t=ot(t,Ct)))}function jI(t){return iK(Zt(t=ot(t,Ct)))}function $I(t){return oK(Zt(t=ot(t,Ct)))}function SK(t){return K9(t.app,"firestore",t._databaseId.database),t._delete()}function Yw(t,e){const n=Zt(t=ot(t,Ct)),r=new eL;return dK(n,t._databaseId,e,r),r}function sL(t,e){return hK(Zt(t=ot(t,Ct)),e).then(n=>n?new jn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class iL{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(cn.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vr(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($l(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:Rn("string",Vr._jsonSchemaVersion),bytes:Rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function bK(){return new Aa(Aw)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(e){if($l(e,Ds._jsonSchema))return new Ds(e.latitude,e.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:Rn("string",Ds._jsonSchemaVersion),latitude:Rn("number"),longitude:Rn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($l(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gs(e.vectorValues);throw new Y(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:Rn("string",gs._jsonSchemaVersion),vectorValues:Rn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=/^__.*__$/;class xK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gu(e,this.data,n,this.fieldTransforms)}}class oL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new eo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:t})}}class Ey{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aL(this.Ac)&&AK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bl(e)}Cc(e,n,r,s=!1){return new Ey({Ac:e,methodName:n,Dc:r,path:Bt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zl(t){const e=t._freezeSettings(),n=Bl(t._databaseId);return new RK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Iy(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);GI("Data must be an object, but it was:",o,r);const a=uL(r,o);let l,c;if(i.merge)l=new jr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Qh(e,h,n);if(!o.contains(f))throw new Y(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);hL(d,f)||d.push(f)}l=new jr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new xK(new ir(a),l,c)}class bf extends xa{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bf}}function lL(t,e,n){return new Ey({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class BI extends xa{_toFieldTransform(e){return new wf(e.path,new Tu)}isEqual(e){return e instanceof BI}}class zI extends xa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=lL(this,e,!0),r=this.vc.map(i=>Wl(i,n)),s=new Sl(r);return new wf(e.path,s)}isEqual(e){return e instanceof zI&&Vs(this.vc,e.vc)}}class WI extends xa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=lL(this,e,!0),r=this.vc.map(i=>Wl(i,n)),s=new bl(r);return new wf(e.path,s)}isEqual(e){return e instanceof WI&&Vs(this.vc,e.vc)}}class qI extends xa{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Su(e.serializer,kO(e.serializer,this.Fc));return new wf(e.path,n)}isEqual(e){return e instanceof qI&&this.Fc===e.Fc}}function HI(t,e,n,r){const s=t.Cc(1,e,n);GI("Data must be an object, but it was:",s,r);const i=[],o=ir.empty();Ta(r,(l,c)=>{const d=Ty(e,l,n);c=tt(c);const h=s.yc(d);if(c instanceof bf)i.push(d);else{const f=Wl(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new jr(i);return new oL(o,a,s.fieldTransforms)}function KI(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Qh(e,r,n)],l=[s];if(i.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Qh(e,i[f])),l.push(i[f+1]);const c=[],d=ir.empty();for(let f=a.length-1;f>=0;--f)if(!hL(c,a[f])){const m=a[f];let E=l[f];E=tt(E);const p=o.yc(m);if(E instanceof bf)c.push(m);else{const v=Wl(E,p);v!=null&&(c.push(m),d.set(m,v))}}const h=new jr(c);return new oL(d,h,o.fieldTransforms)}function cL(t,e,n,r=!1){return Wl(n,t.Cc(r?4:3,e))}function Wl(t,e){if(dL(t=tt(t)))return GI("Unsupported field value:",e,t),uL(t,e);if(t instanceof xa)return function(r,s){if(!aL(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Wl(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=wt.fromDate(r);return{timestampValue:bu(s.serializer,i)}}if(r instanceof wt){const i=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bu(s.serializer,i)}}if(r instanceof Ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:WO(s.serializer,r._byteString)};if(r instanceof At){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uI(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gs)return function(o,a){return{mapValue:{fields:{[ZE]:{stringValue:eI},[wu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return sI(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ty(r)}`)}(t,e)}function uL(t,e){const n={};return sO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(t,(r,s)=>{const i=Wl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function dL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof Ds||t instanceof Vr||t instanceof At||t instanceof xa||t instanceof gs)}function GI(t,e,n){if(!dL(n)||!UD(n)){const r=ty(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Qh(t,e,n){if((e=tt(e))instanceof Aa)return e._internalPath;if(typeof e=="string")return Ty(t,e);throw cg("Field path arguments must be of type string or ",t,!1,void 0,n)}const PK=new RegExp("[~\\*/\\[\\]]");function Ty(t,e,n){if(e.search(PK)>=0)throw cg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Aa(...e.split("."))._internalPath}catch{throw cg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cg(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(U.INVALID_ARGUMENT,a+t+l)}function hL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CK extends Yh{data(){return super.data()}}function Sy(t,e){return typeof e=="string"?Ty(t,e):e instanceof Aa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QI{}class td extends QI{}function Ve(t,e,...n){let r=[];e instanceof QI&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof ql).length,a=i.filter(l=>l instanceof nd).length;if(o>1||o>0&&a>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class nd extends td{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new nd(e,n,r)}_apply(e){const n=this._parse(e);return pL(e._query,n),new jn(e.firestore,e.converter,Vw(e._query,n))}_parse(e){const n=zl(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Zx(h,d);const E=[];for(const p of h)E.push(Xx(l,i,p));f={arrayValue:{values:E}}}else f=Xx(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Zx(h,d),f=cL(a,o,h,d==="in"||d==="not-in");return ht.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function De(t,e,n){const r=e,s=Sy("where",t);return nd._create(s,r,n)}class ql extends QI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ql(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)pL(o,l),o=Vw(o,l)}(e._query,n),new jn(e.firestore,e.converter,Vw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kK(...t){return t.forEach(e=>gL("or",e)),ql._create("or",t)}function NK(...t){return t.forEach(e=>gL("and",e)),ql._create("and",t)}class by extends td{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new by(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hh(i,o)}(e._query,this._field,this._direction);return new jn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function na(t,e="asc"){const n=e,r=Sy("orderBy",t);return by._create(r,n)}class Af extends td{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Af(e,n,r)}_apply(e){return new jn(e.firestore,e.converter,eg(e._query,this._limit,this._limitType))}}function rd(t){return jD("limit",t),Af._create("limit",t,"F")}function DK(t){return jD("limitToLast",t),Af._create("limitToLast",t,"L")}class xf extends td{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new xf(e,n,r)}_apply(e){const n=mL(e,this.type,this._docOrFields,this._inclusive);return new jn(e.firestore,e.converter,function(s,i){return new Xi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function OK(...t){return xf._create("startAt",t,!0)}function LK(...t){return xf._create("startAfter",t,!1)}class Rf extends td{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Rf(e,n,r)}_apply(e){const n=mL(e,this.type,this._docOrFields,this._inclusive);return new jn(e.firestore,e.converter,function(s,i){return new Xi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function MK(...t){return Rf._create("endBefore",t,!1)}function VK(...t){return Rf._create("endAt",t,!0)}function mL(t,e,n,r){if(n[0]=tt(n[0]),n[0]instanceof Yh)return function(i,o,a,l,c){if(!l)throw new Y(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of $c(i))if(h.field.isKeyField())d.push(Il(o,l.key));else{const f=l.data.field(h.field);if(oy(f))throw new Y(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new Y(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new ha(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=zl(t.firestore);return function(o,a,l,c,d,h){const f=o.explicitOrderBy;if(d.length>f.length)throw new Y(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let E=0;E<d.length;E++){const p=d[E];if(f[E].field.isKeyField()){if(typeof p!="string")throw new Y(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof p}`);if(!nI(o)&&p.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${p}' contains a slash.`);const v=o.path.child(it.fromString(p));if(!fe.isDocumentKey(v))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const w=new fe(v);m.push(Il(a,w))}else{const v=cL(l,c,p);m.push(v)}}return new ha(m,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Xx(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nI(e)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!fe.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Il(t,new fe(r))}if(n instanceof At)return Il(t,n._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ty(n)}.`)}function Zx(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pL(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function gL(t,e){if(!(e instanceof nd||e instanceof ql))throw new Y(U.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class YI{convertValue(e,n="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ta(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[wu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Kt(o.doubleValue));return new gs(n)}convertGeoPoint(e){return new Ds(Kt(e.latitude),Kt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ay(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bh(e));default:return null}}convertTimestamp(e){const n=Gi(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Ae(e2(r),9688,{name:e});const s=new ca(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||vn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class JI extends YI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FK(t){return new Nu("sum",Qh("sum",t))}function UK(t){return new Nu("avg",Qh("average",t))}function yL(){return new Nu("count")}function jK(t,e){var n,r;return t instanceof Nu&&e instanceof Nu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function $K(t,e){return UI(t.query,e.query)&&Vs(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="NOT SUPPORTED";class Oi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hr extends Yh{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Hr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function BK(t,e,n){if($l(e,Hr._jsonSchema)){if(e.bundle===vL)throw new Y(U.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Bl(t._databaseId),s=Y2(e.bundle,r),i=s.Wu(),o=new PI(s.getMetadata(),r);for(const d of i)o.Ga(d);const a=o.documents;if(a.length!==1)throw new Y(U.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=dy(r,a[0].document),c=new fe(it.fromString(e.bundleName));return new Hr(t,new JI(t),c,l,new Oi(!1,!1),n||null)}}Hr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hr._jsonSchema={type:Rn("string",Hr._jsonSchemaVersion),bundleSource:Rn("string","DocumentSnapshot"),bundleName:Rn("string"),bundle:Rn("string")};class lh extends Hr{data(e={}){return super.data(e)}}class Kr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Oi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lh(this._firestore,this._userDataWriter,r.key,r,new Oi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new lh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new lh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:WK(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zK(t,e,n){if($l(e,Kr._jsonSchema)){if(e.bundle===vL)throw new Y(U.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Bl(t._databaseId),s=Y2(e.bundle,r),i=s.Wu(),o=new PI(s.getMetadata(),r);for(const f of i)o.Ga(f);if(o.queries.length!==1)throw new Y(U.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=fy(o.queries[0].bundledQuery),l=o.documents;let c=new dl;l.map(f=>{const m=dy(r,f.document);c=c.add(m)});const d=Cl.fromInitialDocuments(a,c,Ge(),!1,!1),h=new jn(t,n||null,a);return new Kr(t,new JI(t),h,d)}}function WK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}function qK(t,e){return t instanceof Hr&&e instanceof Hr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Kr&&e instanceof Kr&&t._firestore===e._firestore&&UI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){t=ot(t,At);const e=ot(t.firestore,Ct);return G2(Zt(e),t._key).then(n=>XI(e,t,n))}Kr._jsonSchemaVersion="firestore/querySnapshot/1.0",Kr._jsonSchema={type:Rn("string",Kr._jsonSchemaVersion),bundleSource:Rn("string","QuerySnapshot"),bundleName:Rn("string"),bundle:Rn("string")};class Ra extends YI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function HK(t){t=ot(t,At);const e=ot(t.firestore,Ct),n=Zt(e),r=new Ra(e);return aK(n,t._key).then(s=>new Hr(e,r,t._key,s,new Oi(s!==null&&s.hasLocalMutations,!0),t.converter))}function KK(t){t=ot(t,At);const e=ot(t.firestore,Ct);return G2(Zt(e),t._key,{source:"server"}).then(n=>XI(e,t,n))}function ze(t){t=ot(t,jn);const e=ot(t.firestore,Ct),n=Zt(e),r=new Ra(e);return fL(t._query),Q2(n,t._query).then(s=>new Kr(e,r,t,s))}function GK(t){t=ot(t,jn);const e=ot(t.firestore,Ct),n=Zt(e),r=new Ra(e);return lK(n,t._query).then(s=>new Kr(e,r,t,s))}function QK(t){t=ot(t,jn);const e=ot(t.firestore,Ct),n=Zt(e),r=new Ra(e);return Q2(n,t._query,{source:"server"}).then(s=>new Kr(e,r,t,s))}function on(t,e,n){t=ot(t,At);const r=ot(t.firestore,Ct),s=Ay(t.converter,e,n);return sd(r,[Iy(zl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qt.none())])}function En(t,e,n,...r){t=ot(t,At);const s=ot(t.firestore,Ct),i=zl(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof Aa?KI(i,"updateDoc",t._key,e,n,r):HI(i,"updateDoc",t._key,e),sd(s,[o.toMutation(t._key,Qt.exists(!0))])}function Jn(t){return sd(ot(t.firestore,Ct),[new Qu(t._key,Qt.none())])}function mi(t,e){const n=ot(t.firestore,Ct),r=Pe(t),s=Ay(t.converter,e);return sd(n,[Iy(zl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function Jw(t,...e){var l,c,d;t=tt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Bc(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Bc(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof At)o=ot(t.firestore,Ct),a=Ku(t._key.path),i={next:h=>{e[r]&&e[r](XI(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=ot(t,jn);o=ot(h.firestore,Ct),a=h._query;const f=new Ra(o);i={next:m=>{e[r]&&e[r](new Kr(o,f,h,m))},error:e[r+1],complete:e[r+2]},fL(t._query)}return function(f,m,E,p){const v=new _y(p),w=new RI(m,v,E);return f.asyncQueue.enqueueAndForget(async()=>bI(await ku(f),w)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>AI(await ku(f),w))}}(Zt(o),a,s,i)}function YK(t,e,...n){const r=tt(t),s=function(l){const c={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const h of d){if(!(h in l)){c.error=`snapshotJson missing required field: ${h}`;break}const f=l[h];if(typeof f!="string"){c.error=`snapshotJson field '${h}' must be a string.`;break}if(f.length===0){c.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?c.bundle=f:h==="bundleName"?c.bundleName=f:h==="bundleSource"&&(c.bundleSource=f)}return c}(e);if(s.error)throw new Y(U.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||Bc(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Bc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,f,m){let E,p=!1;return Yw(c,d.bundle).then(()=>sL(c,d.bundleName)).then(w=>{w&&!p&&(m&&w.withConverter(m),E=Jw(w,h||{},f))}).catch(w=>(f.error&&f.error(w),()=>{})),()=>{p||(p=!0,E&&E())}}(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Bc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,f,m){let E,p=!1;return Yw(c,d.bundle).then(()=>{if(!p){const w=new At(c,m||null,fe.fromPath(d.bundleName));E=Jw(w,h||{},f)}}).catch(w=>(f.error&&f.error(w),()=>{})),()=>{p||(p=!0,E&&E())}}(r,s,i,a,n[o])}throw new Y(U.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function JK(t,e){return uK(Zt(t=ot(t,Ct)),Bc(e)?e:{next:e})}function sd(t,e){return function(r,s){const i=new Zn;return r.asyncQueue.enqueueAndForget(async()=>FH(await FI(r),s,i)),i.promise}(Zt(t),e)}function XI(t,e,n){const r=n.docs.get(e._key),s=new Ra(t);return new Hr(t,s,e._key,r,new Oi(n.hasPendingWrites,n.fromCache),e.converter)}function _L(t){return wL(t,{count:yL()})}function wL(t,e){const n=ot(t.firestore,Ct),r=Zt(n),s=rO(e,(i,o)=>new FO(o,i.aggregateType,i._internalFieldPath));return cK(r,t._query,s).then(i=>function(a,l,c){const d=new Ra(a);return new iL(l,d,c)}(n,t,i))}class XK{constructor(e){this.kind="memory",this._onlineComponentProvider=ma.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new LI(void 0)}}toJSON(){return{kind:this.kind}}}class ZK{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=EL(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class eG{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Cu.provider}toJSON(){return{kind:this.kind}}}class tG{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new LI(e)}}toJSON(){return{kind:this.kind}}}function nG(){return new eG}function rG(t){return new tG(t==null?void 0:t.cacheSizeBytes)}function sG(t){return new XK(t)}function iG(t){return new ZK(t)}class oG{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ma.provider,this._offlineComponentProvider={build:n=>new MI(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class aG{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ma.provider,this._offlineComponentProvider={build:n=>new W2(n,e==null?void 0:e.cacheSizeBytes)}}}function EL(t){return new oG(t==null?void 0:t.forceOwnership)}function lG(){return new aG}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cG={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zl(e)}set(e,n,r){this._verifyNotCommitted();const s=$o(e,this._firestore),i=Ay(s.converter,n,r),o=Iy(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Qt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=$o(e,this._firestore);let o;return o=typeof(n=tt(n))=="string"||n instanceof Aa?KI(this._dataReader,"WriteBatch.update",i._key,n,r,s):HI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Qt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$o(e,this._firestore);return this._mutations=this._mutations.concat(new Qu(n._key,Qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $o(t,e){if((t=tt(t)).firestore!==e)throw new Y(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=zl(e)}get(e){const n=$o(e,this._firestore),r=new JI(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Te(24041);const i=s[0];if(i.isFoundDocument())return new Yh(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Yh(this._firestore,r,n._key,null,n.converter);throw Te(18433,{doc:i})})}set(e,n,r){const s=$o(e,this._firestore),i=Ay(s.converter,n,r),o=Iy(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=$o(e,this._firestore);let o;return o=typeof(n=tt(n))=="string"||n instanceof Aa?KI(this._dataReader,"Transaction.update",i._key,n,r,s):HI(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=$o(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL extends uG{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$o(e,this._firestore),r=new Ra(this._firestore);return super.get(e).then(s=>new Hr(this._firestore,r,n._key,s._document,new Oi(!1,!1),n.converter))}}function dG(t,e,n){t=ot(t,Ct);const r={...cG,...n};return function(i){if(i.maxAttempts<1)throw new Y(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new Zn;return i.asyncQueue.enqueueAndForget(async()=>{const c=await K2(i);new rK(i.asyncQueue,c,a,o,l).ju()}),l.promise}(Zt(t),s=>e(new TL(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(){return new bf("deleteField")}function Oe(){return new BI("serverTimestamp")}function fG(...t){return new zI("arrayUnion",t)}function mG(...t){return new WI("arrayRemove",t)}function pG(t){return new qI("increment",t)}function gG(t){return new gs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){return Zt(t=ot(t,Ct)),new IL(t,e=>sd(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yG(t,e){const n=Zt(t=ot(t,Ct));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return is("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new Y(U.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=eR(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const f=Ty("setIndexConfiguration",eR(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new cl(f,2)):h.order==="ASCENDING"?d.push(new cl(f,0)):h.order==="DESCENDING"&&d.push(new cl(f,1))}a.push(new mu(mu.UNKNOWN_ID,c,d,pu.empty()))}return a}(e);return fK(n,r)}function eR(t,e){if(typeof t[e]!="string")throw new Y(U.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function vG(t){var s;t=ot(t,Ct);const e=tR.get(t);if(e)return e;if(((s=Zt(t)._uninitializedComponentsProvider)==null?void 0:s._offline.kind)!=="persistent")return null;const r=new SL(t);return tR.set(t,r),r}function _G(t){bL(t,!0)}function wG(t){bL(t,!1)}function EG(t){pK(Zt(t._firestore)).then(e=>ne("deleting all persistent cache indexes succeeded")).catch(e=>is("deleting all persistent cache indexes failed",e))}function bL(t,e){mK(Zt(t._firestore),e).then(n=>ne(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>is(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const tR=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IG(t){var r;const e=Zt(ot(t.firestore,Ct)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:hy(n,yr(t._query)).ft}function TG(t,e){var i;const n=rO(e,(o,a)=>new FO(a,o.aggregateType,o._internalFieldPath)),r=Zt(ot(t.firestore,Ct)),s=(i=r._onlineComponents)==null?void 0:i.datastore.serializer;return s===void 0?null:YO(s,IO(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return eT.instance.onExistenceFilterMismatch(e)}}class eT{constructor(){this.Mc=new Map}static get instance(){return gm||(gm=new eT,function(n){if(oh)throw new Error("a TestingHooksSpi instance is already set");oh=n}(gm)),gm}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let gm=null;(function(e,n=!0){(function(s){Hu=s})(jl),yi(new Fs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ct(new Zq(r.getProvider("auth-internal")),new n8(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),rs(DA,OA,e),rs(DA,OA,"esm2020")})();const Ln=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:YI,AggregateField:Nu,AggregateQuerySnapshot:iL,Bytes:Vr,CACHE_SIZE_UNLIMITED:vK,CollectionReference:Ns,DocumentReference:At,DocumentSnapshot:Hr,FieldPath:Aa,FieldValue:xa,Firestore:Ct,FirestoreError:Y,GeoPoint:Ds,LoadBundleTask:eL,PersistentCacheIndexManager:SL,Query:jn,QueryCompositeFilterConstraint:ql,QueryConstraint:td,QueryDocumentSnapshot:lh,QueryEndAtConstraint:Rf,QueryFieldFilterConstraint:nd,QueryLimitConstraint:Af,QueryOrderByConstraint:by,QuerySnapshot:Kr,QueryStartAtConstraint:xf,SnapshotMetadata:Oi,Timestamp:wt,Transaction:TL,VectorValue:gs,WriteBatch:IL,_AutoId:ey,_ByteString:cn,_DatabaseId:ca,_DocumentKey:fe,_EmptyAppCheckTokenProvider:r8,_EmptyAuthCredentialsProvider:MD,_FieldPath:Bt,_TestingHooks:SG,_cast:ot,_debugAssert:Jq,_internalAggregationQueryToProtoRunAggregationQueryRequest:TG,_internalQueryToProtoQueryTarget:IG,_isBase64Available:j8,_logWarn:is,_validateIsNotUsedTogether:FD,addDoc:mi,aggregateFieldEqual:jK,aggregateQuerySnapshotEqual:$K,and:NK,arrayRemove:mG,arrayUnion:fG,average:UK,clearIndexedDbPersistence:IK,collection:Ce,collectionGroup:gK,connectFirestoreEmulator:Z2,count:yL,deleteAllPersistentCacheIndexes:EG,deleteDoc:Jn,deleteField:hG,disableNetwork:$I,disablePersistentCacheIndexAutoCreation:wG,doc:Pe,documentId:bK,documentSnapshotFromJSON:BK,enableIndexedDbPersistence:wK,enableMultiTabIndexedDbPersistence:EK,enableNetwork:jI,enablePersistentCacheIndexAutoCreation:_G,endAt:VK,endBefore:MK,ensureFirestoreConfigured:Zt,executeWrite:sd,getAggregateFromServer:wL,getCountFromServer:_L,getDoc:Yt,getDocFromCache:HK,getDocFromServer:KK,getDocs:ze,getDocsFromCache:GK,getDocsFromServer:QK,getFirestore:_K,getPersistentCacheIndexManager:vG,increment:pG,initializeFirestore:tL,limit:rd,limitToLast:DK,loadBundle:Yw,memoryEagerGarbageCollector:nG,memoryLocalCache:sG,memoryLruGarbageCollector:rG,namedQuery:sL,onSnapshot:Jw,onSnapshotResume:YK,onSnapshotsInSync:JK,or:kK,orderBy:na,persistentLocalCache:iG,persistentMultipleTabManager:lG,persistentSingleTabManager:EL,query:Ve,queryEqual:UI,querySnapshotFromJSON:zK,refEqual:yK,runTransaction:dG,serverTimestamp:Oe,setDoc:on,setIndexConfiguration:yG,setLogLevel:DD,snapshotEqual:qK,startAfter:LK,startAt:OK,sum:FK,terminate:SK,updateDoc:En,vector:gG,waitForPendingWrites:TK,where:De,writeBatch:ZI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG="type.googleapis.com/google.protobuf.Int64Value",AG="type.googleapis.com/google.protobuf.UInt64Value";function AL(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ug(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ug(e));if(typeof t=="function"||typeof t=="object")return AL(t,e=>ug(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Du(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case bG:case AG:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Du(e)):typeof t=="function"||typeof t=="object"?AL(t,e=>Du(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Br extends Bs{constructor(e,n,r){super(`${tT}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Br.prototype)}}function xG(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function dg(t,e){let n=xG(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!nR[o])return new Br("internal","internal");n=nR[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Du(s))}}catch{}return n==="ok"?null:new Br(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Mr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="us-central1",PG=/^data: (.*?)(?:\n|$)/;function CG(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Br("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class kG{constructor(e,n,r,s,i=Xw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new RG(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Xw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function NG(t,e,n){const r=$s(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(cf(t.emulatorOrigin+"/backends"),Gg("Functions",!0))}function DG(t,e,n){const r=s=>LG(t,e,s,{});return r.stream=(s,i)=>VG(t,e,s,i),r}function xL(t){return t.emulatorOrigin&&$s(t.emulatorOrigin)?"include":void 0}async function OG(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:xL(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function RL(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function LG(t,e,n,r){const s=t._url(e);return MG(t,s,n,r)}async function MG(t,e,n,r){n=ug(n);const s={data:n},i=await RL(t,r),o=r.timeout||7e4,a=CG(o),l=await Promise.race([OG(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Br("cancelled","Firebase Functions instance was deleted.");const c=dg(l.status,l.json);if(c)throw c;if(!l.json)throw new Br("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Br("internal","Response is missing data field.");return{data:Du(d)}}function VG(t,e,n,r){const s=t._url(e);return FG(t,s,n,r||{})}async function FG(t,e,n,r){var f;n=ug(n);const s={data:n},i=await RL(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:xL(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new Br("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const E=dg(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let a,l;const c=new Promise((m,E)=>{a=m,l=E});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Br("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=UG(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:E,done:p}=await m.read();return{value:E,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function UG(t,e,n,r){const s=(o,a)=>{const l=o.match(PG);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Du(d.result));return}if("message"in d){a.enqueue(Du(d.message));return}if("error"in d){const h=dg(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Br){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Br("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Br("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Br?c:dg(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const rR="@firebase/functions",sR="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG="auth-internal",$G="app-check-internal",BG="messaging-internal";function zG(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(jG),o=n.getProvider(BG),a=n.getProvider($G);return new kG(s,i,o,a,r)};yi(new Fs(tT,e,"PUBLIC").setMultipleInstances(!0)),rs(rR,sR,t),rs(rR,sR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(t=Yg(),e=Xw){const r=Ul(tt(t),tT).getImmediate({identifier:e}),s=NE("functions");return s&&qG(r,...s),r}function qG(t,e,n){NG(tt(t),e,n)}function HG(t,e,n){return DG(tt(t),e)}zG();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="firebasestorage.googleapis.com",CL="storageBucket",KG=2*60*1e3,GG=10*60*1e3,QG=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends Bs{constructor(e,n,r=0){super(Uv(e),`Firebase Storage: ${n} (${Uv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function Uv(t){return"storage/"+t}function nT(){const t="An unknown error occurred, please check the error payload for server response.";return new un(Wt.UNKNOWN,t)}function YG(t){return new un(Wt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JG(t){return new un(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XG(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(Wt.UNAUTHENTICATED,t)}function ZG(){return new un(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function eQ(t){return new un(Wt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function kL(){return new un(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NL(){return new un(Wt.CANCELED,"User canceled the upload/download.")}function tQ(t){return new un(Wt.INVALID_URL,"Invalid URL '"+t+"'.")}function nQ(t){return new un(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function rQ(){return new un(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CL+"' property when initializing the app?")}function DL(){return new un(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sQ(){return new un(Wt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function iQ(){return new un(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oQ(t){return new un(Wt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zw(t){return new un(Wt.INVALID_ARGUMENT,t)}function OL(){return new un(Wt.APP_DELETED,"The Firebase app was deleted.")}function aQ(t){return new un(Wt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ch(t,e){return new un(Wt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Rd(t){throw new un(Wt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=es.makeFromUrl(e,n)}catch{return new es(e,"")}if(r.path==="")return r;throw nQ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),E={bucket:1,path:3},p=n===PL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",w=new RegExp(`^https?://${p}/${s}/${v}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:m,indices:E,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<I.length;x++){const P=I[x],L=P.regex.exec(e);if(L){const A=L[P.indices.bucket];let T=L[P.indices.path];T||(T=""),r=new es(A,T),P.postModify(r);break}}if(r==null)throw tQ(e);return r}}class lQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(m,l())},v)}function f(){i&&clearTimeout(i)}function m(v,...w){if(c){f();return}if(v){f(),d.call(null,v,...w);return}if(l()||o){f(),d.call(null,v,...w);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let E=!1;function p(v){E||(E=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}function uQ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t){return t!==void 0}function hQ(t){return typeof t=="function"}function fQ(t){return typeof t=="object"&&!Array.isArray(t)}function xy(t){return typeof t=="string"||t instanceof String}function iR(t){return rT()&&t instanceof Blob}function rT(){return typeof Blob<"u"}function oR(t,e,n,r){if(r<e)throw Zw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function LL(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var hl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hl||(hl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,p)=>{this.resolve_=E,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ym(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===hl.NO_ERROR,l=i.getStatus();if(!a||ML(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===hl.ABORT;r(!1,new ym(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ym(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());dQ(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=nT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?OL():NL();o(l)}else{const l=kL();o(l)}};this.canceled_?n(!1,new ym(!1,null,!0)):this.backoffId_=cQ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ym{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function pQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function gQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yQ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function vQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _Q(t,e,n,r,s,i,o=!0,a=!1){const l=LL(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return yQ(d,e),pQ(d,n),gQ(d,i),vQ(d,r),new mQ(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EQ(...t){const e=wQ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(rT())return new Blob(t);throw new un(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function IQ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TQ(t){if(typeof atob>"u")throw oQ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jv{constructor(e,n){this.data=e,this.contentType=n||null}}function SQ(t,e){switch(t){case oi.RAW:return new jv(VL(e));case oi.BASE64:case oi.BASE64URL:return new jv(FL(t,e));case oi.DATA_URL:return new jv(AQ(e),xQ(e))}throw nT()}function VL(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function bQ(t){let e;try{e=decodeURIComponent(t)}catch{throw ch(oi.DATA_URL,"Malformed data URL.")}return VL(e)}function FL(t,e){switch(t){case oi.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ch(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case oi.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ch(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=TQ(e)}catch(s){throw s.message.includes("polyfill")?s:ch(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class UL{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ch(oi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=RQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function AQ(t){const e=new UL(t);return e.base64?FL(oi.BASE64,e.rest):bQ(e.rest)}function xQ(t){return new UL(t).contentType}function RQ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){let r=0,s="";iR(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(iR(this.data_)){const r=this.data_,s=IQ(r,e,n);return s===null?null:new Ri(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ri(r,!0)}}static getBlob(...e){if(rT()){const n=e.map(r=>r instanceof Ri?r.data_:r);return new Ri(EQ.apply(null,n))}else{const n=e.map(o=>xy(o)?SQ(oi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ri(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){let e;try{e=JSON.parse(t)}catch{return null}return fQ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CQ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $L(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(t,e){return e}class Er{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||kQ}}let vm=null;function NQ(t){return!xy(t)||t.length<2?t:$L(t)}function sT(){if(vm)return vm;const t=[];t.push(new Er("bucket")),t.push(new Er("generation")),t.push(new Er("metageneration")),t.push(new Er("name","fullPath",!0));function e(i,o){return NQ(o)}const n=new Er("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Er("size");return s.xform=r,t.push(s),t.push(new Er("timeCreated")),t.push(new Er("updated")),t.push(new Er("md5Hash",null,!0)),t.push(new Er("cacheControl",null,!0)),t.push(new Er("contentDisposition",null,!0)),t.push(new Er("contentEncoding",null,!0)),t.push(new Er("contentLanguage",null,!0)),t.push(new Er("contentType",null,!0)),t.push(new Er("metadata","customMetadata",!0)),vm=t,vm}function DQ(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new es(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function OQ(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return DQ(r,t),r}function BL(t,e,n){const r=jL(e);return r===null?null:OQ(t,r,n)}function LQ(t,e,n,r){const s=jL(e);if(s===null||!xy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=Pf(f,n,r),E=LL({alt:"media",token:c});return m+E})[0]}function zL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class id{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(!t)throw nT()}function iT(t,e){function n(r,s){const i=BL(t,s,e);return Fi(i!==null),i}return n}function MQ(t,e){function n(r,s){const i=BL(t,s,e);return Fi(i!==null),LQ(i,s,t.host,t._protocol)}return n}function Cf(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=ZG():s=XG():n.getStatus()===402?s=JG(t.bucket):n.getStatus()===403?s=eQ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function WL(t){const e=Cf(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=YG(t.path)),i.serverResponse=s.serverResponse,i}return n}function VQ(t,e,n){const r=e.fullServerUrl(),s=Pf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new id(s,i,iT(t,n),o);return a.errorHandler=WL(e),a}function FQ(t,e,n){const r=e.fullServerUrl(),s=Pf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new id(s,i,MQ(t,n),o);return a.errorHandler=WL(e),a}function UQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function qL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=UQ(null,e)),r}function HL(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let x=0;x<2;x++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=qL(e,r,s),d=zL(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=Ri.getBlob(h,r,f);if(m===null)throw DL();const E={name:c.fullPath},p=Pf(i,t.host,t._protocol),v="POST",w=t.maxUploadRetryTime,_=new id(p,v,iT(t,n),w);return _.urlParams=E,_.headers=o,_.body=m.uploadData(),_.errorHandler=Cf(e),_}class hg{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function oT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Fi(!1)}return Fi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function jQ(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=qL(e,r,s),a={name:o.fullPath},l=Pf(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=zL(o,n),f=t.maxUploadRetryTime;function m(p){oT(p);let v;try{v=p.getResponseHeader("X-Goog-Upload-URL")}catch{Fi(!1)}return Fi(xy(v)),v}const E=new id(l,c,m,f);return E.urlParams=a,E.headers=d,E.body=h,E.errorHandler=Cf(e),E}function $Q(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=oT(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fi(!1)}h||Fi(!1);const f=Number(h);return Fi(!isNaN(f)),new hg(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new id(n,o,i,a);return l.headers=s,l.errorHandler=Cf(e),l}const aR=256*1024;function BQ(t,e,n,r,s,i,o,a){const l=new hg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw sQ();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const E={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,f);if(p===null)throw DL();function v(x,P){const L=oT(x,["active","final"]),A=l.current+d,T=r.size();let R;return L==="final"?R=iT(e,i)(x,P):R=null,new hg(A,T,L==="final",R)}const w="POST",_=e.maxUploadRetryTime,I=new id(n,w,v,_);return I.headers=E,I.body=p.uploadData(),I.progressCallback=a||null,I.errorHandler=Cf(t),I}const Or={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $v(t){switch(t){case"running":case"pausing":case"canceling":return Or.RUNNING;case"paused":return Or.PAUSED;case"success":return Or.SUCCESS;case"canceled":return Or.CANCELED;case"error":return Or.ERROR;default:return Or.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e,n,r){if(hQ(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class WQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Rd("cannot .send() more than once");if($s(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qQ extends WQ{initXhr(){this.xhr_.responseType="text"}}function Ha(){return new qQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=sT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Wt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(ML(s.status,[]))if(i)s=kL();else{this.sleepTime=Math.max(this.sleepTime*2,QG),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Wt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=jQ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ha,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=$Q(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Ha,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=aR*this._chunkMultiplier,n=new hg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=BQ(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ha,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){aR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=VQ(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ha,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=HL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ha,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=NL(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=$v(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new zQ(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch($v(this._state)){case Or.SUCCESS:tc(this._resolve.bind(null,this.snapshot))();break;case Or.CANCELED:case Or.ERROR:const n=this._reject;tc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($v(this._state)){case Or.RUNNING:case Or.PAUSED:e.next&&tc(e.next.bind(e,this.snapshot))();break;case Or.SUCCESS:e.complete&&tc(e.complete.bind(e))();break;case Or.CANCELED:case Or.ERROR:e.error&&tc(e.error.bind(e,this._error))();break;default:e.error&&tc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this._service=e,n instanceof es?this._location=n:this._location=es.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new kl(e,n)}get root(){const e=new es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $L(this._location.path)}get storage(){return this._service}get parent(){const e=PQ(this._location.path);if(e===null)return null;const n=new es(this._location.bucket,e);return new kl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw aQ(e)}}function KQ(t,e,n){t._throwIfRoot("uploadBytes");const r=HL(t.storage,t._location,sT(),new Ri(e,!0),n);return t.storage.makeRequestWithTokens(r,Ha).then(s=>({metadata:s,ref:t}))}function GQ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new HQ(t,new Ri(e),n)}function QQ(t){t._throwIfRoot("getDownloadURL");const e=FQ(t.storage,t._location,sT());return t.storage.makeRequestWithTokens(e,Ha).then(n=>{if(n===null)throw iQ();return n})}function YQ(t,e){const n=CQ(t._location.path,e),r=new es(t._location.bucket,n);return new kl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQ(t){return/^[A-Za-z]+:\/\//.test(t)}function XQ(t,e){return new kl(t,e)}function KL(t,e){if(t instanceof aT){const n=t;if(n._bucket==null)throw rQ();const r=new kl(n,n._bucket);return e!=null?KL(r,e):r}else return e!==void 0?YQ(t,e):t}function ZQ(t,e){if(e&&JQ(e)){if(t instanceof aT)return XQ(t,e);throw Zw("To use ref(service, url), the first argument must be a Storage instance.")}else return KL(t,e)}function lR(t,e){const n=e==null?void 0:e[CL];return n==null?null:es.makeFromBucketSpec(n,t)}function eY(t,e,n,r={}){t.host=`${e}:${n}`;const s=$s(e);s&&(cf(`https://${t.host}/b`),Gg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:PN(i,t.app.options.projectId))}class aT{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=PL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KG,this._maxUploadRetryTime=GG,this._requests=new Set,s!=null?this._bucket=es.makeFromBucketSpec(s,this._host):this._bucket=lR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=es.makeFromBucketSpec(this._url,e):this._bucket=lR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new kl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new lQ(OL());{const o=_Q(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const cR="@firebase/storage",uR="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="storage";function aZ(t,e,n){return t=tt(t),KQ(t,e,n)}function tY(t,e,n){return t=tt(t),GQ(t,e,n)}function nY(t){return t=tt(t),QQ(t)}function rY(t,e){return t=tt(t),ZQ(t,e)}function QL(t=Yg(),e){t=tt(t);const r=Ul(t,GL).getImmediate({identifier:e}),s=NE("storage");return s&&sY(r,...s),r}function sY(t,e,n,r={}){eY(t,e,n,r)}function iY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new aT(n,r,s,e,jl)}function oY(){yi(new Fs(GL,iY,"PUBLIC").setMultipleInstances(!0)),rs(cR,uR,""),rs(cR,uR,"esm2020")}oY();const aY={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},fg={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:fg.projectId,authDomain:fg.authDomain,emulatorMode:!1});const Ry=LN(fg);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Ot=sD(Ry,{persistence:[$E,_w]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const K=tL(Ry,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{DD("error")}catch{}const YL=WG(Ry,"us-central1");QL(Ry);console.log(" Firebase initialized successfully");const lY=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(lY,100);let $a=0;const Bv=3,cY=1e3,JL=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&$a<Bv){$a++;const r=Math.min(cY*Math.pow(2,$a-1),1e4);console.log(` Attempting to reconnect (${$a}/${Bv}) in ${r}ms...`);try{await $I(K),await new Promise(s=>setTimeout(s,r)),await jI(K),console.log(" Firestore reconnected successfully"),$a=0}catch(s){console.error(" Failed to reconnect:",s),$a>=Bv&&(console.error(" Maximum reconnection attempts reached."),uY())}}},uY=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await jI(K),$a=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await $I(K),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(JL(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Ht=Object.freeze(Object.defineProperty({__proto__:null,auth:Ot,db:K,firebaseConfig:fg,functions:YL,handleFirestoreError:JL},Symbol.toStringTag,{value:"Module"})),st=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},dY=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Nl=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Nl(n)).filter(n=>n!==void 0);if(t instanceof Date||!dY(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Nl(r);s!==void 0&&(e[n]=s)}return e},tp={async create(t){await on(Pe(K,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Oe()})},async getById(t){const e=Pe(K,"profiles",t),n=await Yt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:st(r.createdAt)}}return null},async update(t,e){const n=Pe(K,"profiles",t);await En(n,{...e,updatedAt:Oe()})},async getByShopId(t){const e=Ve(Ce(K,"profiles"),De("shopId","==",t));return(await ze(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:st(s.createdAt)}})}},e0={async create(t){return(await mi(Ce(K,"referrals"),{...t,createdAt:Oe(),updatedAt:Oe()})).id},async getByReferrerId(t){try{const e=Ve(Ce(K,"referrals"),De("referrerId","==",t),na("createdAt","desc"));return(await ze(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt),updatedAt:st(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Ve(Ce(K,"referrals"),De("referrerId","==",t));return(await ze(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:st(i.data().createdAt),updatedAt:st(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Ve(Ce(K,"referrals"),De("referralCode","==",t),rd(1)),n=await ze(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:st(r.data().createdAt),updatedAt:st(r.data().updatedAt)}},async updateStatus(t,e){await En(Pe(K,"referrals",t),{status:e,updatedAt:Oe()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},XL={async getByUserId(t){const e=Ve(Ce(K,"profiles"),De("userId","==",t)),n=await ze(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:st(s.createdAt),updatedAt:st(s.updatedAt)}}return null},async update(t,e){const n=Ve(Ce(K,"profiles"),De("userId","==",t)),r=await ze(n);if(!r.empty){const s=Pe(K,"profiles",r.docs[0].id);await En(s,{...e,updatedAt:Oe()})}}},Bo={async create(t){return(await mi(Ce(K,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Oe(),updatedAt:Oe()})).id},async getByMerchantId(t){const e=Ve(Ce(K,"merchantWallets"),De("merchantUserId","==",t)),r=(await ze(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Ve(Ce(K,"wallets"),De("userId","==",t));return(await ze(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=Pe(K,"merchantWallets",t),n=await Yt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:st(r.createdAt),updatedAt:st(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=Ve(Ce(K,"merchantWallets"),De("iccid","==",t)),n=await ze(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:st(s.createdAt),updatedAt:st(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=Ve(Ce(K,"merchantWallets"),De("msisdn","==",t)),r=await ze(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}}const s=Ve(Ce(K,"merchantWallets")),i=await ze(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:st(l.createdAt),updatedAt:st(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Pe(K,"merchantWallets",t);await En(n,{...e,updatedAt:Oe()})},async updateUsage(t,e,n){const r=Pe(K,"merchantWallets",t),s={updatedAt:Oe()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await En(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Ve(Ce(K,"merchantWallets"),De("msisdn","in",o)),c=(await ze(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await En(d.ref,{merchantUserId:e,updatedAt:Oe()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Pe(K,"merchantWallets",t);await Jn(e)}},lT={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await re(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>el);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Oe(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await mi(Ce(K,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await re(async()=>{const{ProfitService:d}=await import("./profitService-BQtHSEJV.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await Bo.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),m=Number(t.amount||0),E=String((t==null?void 0:t.originType)||"").trim()==="withdraw",p=String(t.txnType||"")==="receive";E||p?await Bo.updateUsage(c,void 0,f+m):await Bo.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const p=await Bo.getById(h);m=String((p==null?void 0:p.msisdn)||(p==null?void 0:p.label)||h).trim()}catch{}let E="";f==="withdraw"?E=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?E=`   ${c}   ${m||" "}   ${d||""}    ${r}`:E=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Ve(Ce(K,"transactions"),De("shopId","==",t),na("createdAt","desc"));return(await ze(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt),confirmedAt:r.data().confirmedAt?st(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Ve(Ce(K,"transactions"),De("merchantUserId","==",t),na("createdAt","desc"));return(await ze(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt),confirmedAt:r.data().confirmedAt?st(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Ve(Ce(K,"transactions"),De("merchantUserId","==",t)),n=Ve(Ce(K,"transactions"),De("userId","==",t)),[r,s]=await Promise.all([ze(e),ze(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:st(c.createdAt),confirmedAt:c.confirmedAt?st(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=Pe(K,"transactions",t);await En(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function hY(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await lT.create(e);try{const{calculateCommission:r}=await re(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>el);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Xr.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await re(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>el);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Xr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Xr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await re(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>o0);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const fY="https://summer-cake-5149.alkaptin2030.workers.dev",ZL={async getTelegramWorkerUrl(){var t;try{const e=Pe(K,"systemSettings","core"),n=await Yt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Pe(K,"systemSettings","core");await on(e,{telegramWorkerUrl:t,updatedAt:Oe()},{merge:!0})}},mY={async send(t,e){try{const n=await Xr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await ZL.getTelegramWorkerUrl()||fY).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},pY={async log(t,e,n,r,s){await mi(Ce(K,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Oe()})},async getLogs(t=100){const e=Ve(Ce(K,"auditLogs"),na("createdAt","desc"),rd(t));return(await ze(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:st(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Ve(Ce(K,"deletedTransactions"),na("deletedAt","desc"));return(await ze(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:st(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Ve(Ce(K,"deletedTransactions"),De("userId","==",t),na("deletedAt","desc"));return(await ze(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:st(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Ve(Ce(K,"deletedTransactions"),De("userId","==",t));return(await ze(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:st(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Oe(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await mi(Ce(K,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Ve(Ce(K,"deletedTransactions"),De("originalTransactionId","==",t),De("userId","==",e)),r=await ze(n);r.empty?await mi(Ce(K,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Oe()}):await Promise.all(r.docs.map(s=>En(s.ref,{permanent:!0,deletedAt:Oe()}))),console.log("    :",t);try{const s=Ve(Ce(K,"userTransactions"),De("userId","==",e)),o=(await ze(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Jn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Pe(K,"transactions",t);(await Yt(s)).exists()&&(console.log("     transactions  "),await Jn(s));const o=Ve(Ce(K,"transactions"),De("transactionId","==",t)),a=await ze(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Jn(d.ref))));const l=Ve(Ce(K,"transactions"),De("originalTransactionId","==",t)),c=await ze(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Jn(d.ref))));try{const d=Ve(Ce(K,"deletedTransactions"),De("userId","==",e),De("originalTransactionId","==",t)),h=await ze(d),f=h.docs.map(E=>{var p;return String(((p=E.data())==null?void 0:p.reference)||"")}).filter(Boolean),m=h.docs.map(E=>{var p;return String(((p=E.data())==null?void 0:p.transactionId)||"")}).filter(Boolean);for(const E of f){const p=Ve(Ce(K,"transactions"),De("reference","==",E)),v=await ze(p);v.empty||(console.log(`  ${v.size}   transactions  reference=${E}`),await Promise.all(v.docs.map(w=>Jn(w.ref))))}for(const E of m){try{const w=Pe(K,"transactions",E);(await Yt(w)).exists()&&(console.log("     transactions  :",E),await Jn(w))}catch{}const p=Ve(Ce(K,"transactions"),De("transactionId","==",E)),v=await ze(p);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${E}`),await Promise.all(v.docs.map(w=>Jn(w.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},eM={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=Pe(K,"daily_reports_archive",e);return await on(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Oe()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=Ve(Ce(K,"daily_reports_archive"),De("userId","==",t),rd(e)),a=await ze(o);let l=[];try{l=(await ze(Ve(Ce(K,"deletedDailyArchives"),De("userId","==",t)))).docs.map(E=>{var p,v;return{id:E.id,reportDate:String(((p=E.data())==null?void 0:p.reportDate)||""),archiveId:String(((v=E.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(m,E)=>l.some(p=>p.archiveId&&p.archiveId===m||p.reportDate&&p.reportDate===E),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:st(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const E=h.get(m.reportDate);(!E||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=E.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,E)=>m.reportDate<E.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Ve(Ce(K,"daily_reports_archive"),De("userId","==",t)),s=await ze(r);let i=0;for(const o of s.docs){const a=st(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Jn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Ve(Ce(K,"daily_reports_archive"),De("userId","==",t)),s=(await ze(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:st(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Jn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=Ve(Ce(K,"daily_reports_archive"),De("userId","==",t)),n=await ze(e);let r=0;for(const s of n.docs)try{await Jn(s.ref),r++}catch{const o=s.data();try{await mi(Ce(K,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Oe()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Xr={async getUserData(t){try{console.log("     :",{userId:t});const e=Pe(K,"users",t),n=await Yt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:st(r.createdAt),updatedAt:st(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},async syncDeletedTransactionsLocal(t){try{const e=Ve(Ce(K,"deletedTransactions"),De("userId","==",t));(await ze(e)).docs.forEach(r=>{const s=r.data();if(!((s==null?void 0:s.permanent)===!0))return;const o=String((s==null?void 0:s.originalTransactionId)||""),a=String((s==null?void 0:s.transactionId)||""),l=String((s==null?void 0:s.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch(e){console.warn("syncDeletedTransactionsLocal failed:",e)}},async saveUserData(t,e){try{const n=Pe(K,"users",t),r=Nl(e);await on(n,{...r||{},updatedAt:Oe()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Pe(K,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Nl(r);let i={};try{const l=await Yt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Oe()};console.log("   :",o);let a=3;for(;a>0;)try{await on(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=Ve(Ce(K,"userTransactions"),De("userId","==",t),na("createdAt","desc"),rd(200));e=await ze(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=Ve(Ce(K,"userTransactions"),De("userId","==",t));e=await ze(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:st(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=Ve(Ce(K,"deletedTransactions"),De("userId","==",t),De("reference","==",o));if(!(await ze(a)).empty)return console.log("          ."),"skip-deleted"}{const a=Ve(Ce(K,"deletedTransactions"),De("userId","==",t),De("permanent","==",!0)),l=await ze(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),m=String(f.originalTransactionId||f.transactionId||h.id||""),E=String(f.reference||"");return m&&c.includes(m)||E&&c.includes(E)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=Ve(Ce(K,"userTransactions"),De("userId","==",t));if(s.transactionId){const a=Ve(Ce(K,"userTransactions"),De("userId","==",t),De("transactionId","==",s.transactionId)),l=await ze(a);if(!l.empty){const c=l.docs[0];return await En(Pe(K,"userTransactions",c.id),{...s,uploadedAt:Oe()}),c.id}}if(s.reference){const a=Ve(Ce(K,"userTransactions"),De("userId","==",t),De("reference","==",s.reference)),l=await ze(a);if(!l.empty){const c=l.docs[0];return await En(Pe(K,"userTransactions",c.id),{...s,uploadedAt:Oe()}),c.id}}}catch(o){console.warn("      saveUserTransaction  :",o)}return(await mi(Ce(K,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Oe(),uploadedAt:Oe()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Pe(K,"userTransactions",e),a=await Yt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Jn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=Ve(Ce(K,"userTransactions"),De("userId","==",t)),r=await ze(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[Ve(Ce(K,"userTransactions"),De("merchantUserId","==",t)),Ve(Ce(K,"userTransactions"),De("createdBy","==",t))];for(const o of i)try{const l=(await ze(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Jn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Pe(K,"transactions",e);if((await Yt(a)).exists())console.log("     transactions   "),await Jn(a);else{const c=Ve(Ce(K,"transactions"),De("transactionId","==",e)),d=await ze(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Jn(m.ref))));const h=Ve(Ce(K,"transactions"),De("originalTransactionId","==",e)),f=await ze(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Jn(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},t0={async getToday(t){const e=Pe(K,"dailyStats",t,"today","data"),n=await Yt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Pe(K,"dailyStats",t,"today","data");await on(n,{...Nl(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Pe(K,"dailyStats",t,"history",e);await on(r,Nl(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},gY={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Oe()};return(await mi(Ce(K,"installments"),n)).id},async getByUser(t){try{const e=Ve(Ce(K,"installments"),De("userId","==",t));return(await ze(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("installments fetch error",e),[]}},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await En(Pe(K,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Jn(Pe(K,"installments",t)),!0}},nc=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:gY,auditLogService:pY,dailyReportsArchiveService:eM,dailyStatsService:t0,merchantWalletService:Bo,profileService:tp,profileServiceExtra:XL,recordAutoTransaction:hY,referralService:e0,sanitizeFirestoreData:Nl,systemSettingsService:ZL,telegramNotifier:mY,transactionService:lT,userDataService:Xr},Symbol.toStringTag,{value:"Module"}));var Ka=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t.BRANCH="branch",t))(Ka||{});const fl=t=>{if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();if(t.seconds!==void 0&&typeof t.seconds=="number")return new Date(t.seconds*1e3);const e=new Date(t);return isNaN(e.getTime())?null:e},yY=(t,e=new Date)=>{const n=fl(e)||new Date;switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},dR=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const r=new Date,s=fl(t.activatedAt);return s&&r.getTime()-s.getTime()<4*60*60*1e3,!0}const e=new Date,n=fl(t.endDate);if(!n){const r=fl(t.activatedAt);return r&&e.getTime()-r.getTime()<4*60*60*1e3,!0}return e<=n},vY=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=fl(t.endDate);if(!n)return null;const r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},lZ=async(t,e,n,r)=>{try{const s=new Date,i=yY(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Pe(K,"users",t);await En(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});try{const l=await Yt(a);if(l.exists()){const c=l.data();if(c.ownerId){const d=c.ownerId;try{const h=Pe(K,"users",d,"branches",t);await En(h,{isActive:!0,updatedAt:new Date})}catch(h){console.warn("Could not update branch reference in parent subcollection",h)}}}}catch(l){console.warn("Error syncing branch status to parent:",l)}if(console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},cZ=async t=>{try{const e=ZI(K),n=Pe(K,"users",t);e.update(n,{"subscription.isActive":!1,isActive:!1,"branchPackage.status":"canceled","branchPackage.canceledAt":new Date,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});const r=Ve(Ce(K,"users"),De("ownerId","==",t)),s=await ze(r);s.forEach(i=>{e.update(i.ref,{isActive:!1,"subscription.isActive":!1,updatedAt:new Date})}),await e.commit(),console.log(`      ${t}   (${s.size})`)}catch(e){throw console.error("     :",e),new Error("    ")}},_Y=async t=>{try{const e=ZI(K),n=Pe(K,"users",t);e.update(n,{"branchPackage.status":"expired","branchPackage.expiredAt":new Date,updatedAt:new Date});const r=Ve(Ce(K,"users"),De("ownerId","==",t));(await ze(r)).forEach(i=>{e.update(i.ref,{isActive:!1,updatedAt:new Date})}),await e.commit(),console.log(` Branch package expired for user ${t}`)}catch(e){console.error("Failed to expire branch package:",e)}},wY=async(t,e)=>{if((e==null?void 0:e.status)!=="active"||!e.endDate)return;const n=fl(e.endDate);n&&new Date>n&&(console.log(`Branch package expired for user ${t}. Deactivating...`),await _Y(t))},EY=async t=>{try{const e=Pe(K,"users",t),n=await Yt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},uZ=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";case"branch":return" ";default:return" "}},dZ=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=vY(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},hZ=t=>{const e=fl(t);return e?e.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" "};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ou;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ou||(Ou={}));class zv extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const IY=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},TY=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:IY(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const E=s(),p=a(h);let v;const w=async()=>(!v&&E in f?v=typeof f[E]=="function"?v=await f[E]():v=f[E]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),_=(T,R)=>{var C,D;if(p){const O=p==null?void 0:p.methods.find(k=>R===k.name);if(O)return O.rtype==="promise"?k=>n.nativePromise(h,R.toString(),k):(k,B)=>n.nativeCallback(h,R.toString(),k,B);if(T)return(C=T[R])===null||C===void 0?void 0:C.bind(T)}else{if(T)return(D=T[R])===null||D===void 0?void 0:D.bind(T);throw new zv(`"${h}" plugin is not implemented on ${E}`,Ou.Unimplemented)}},I=T=>{let R;const C=(...D)=>{const O=w().then(k=>{const B=_(k,T);if(B){const ce=B(...D);return R=ce==null?void 0:ce.remove,ce}else throw new zv(`"${h}.${T}()" is not implemented on ${E}`,Ou.Unimplemented)});return T==="addListener"&&(O.remove=async()=>R()),O};return C.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:T,writable:!1,configurable:!1}),C},x=I("addListener"),P=I("removeListener"),L=(T,R)=>{const C=x({eventName:T},R),D=async()=>{const k=await C;P({eventName:T,callbackId:k},R)},O=new Promise(k=>C.then(()=>k({remove:D})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},O},A=new Proxy({},{get(T,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?L:x;case"removeListener":return P;default:return I(R)}}});return r[h]=A,c.set(h,{name:h,proxy:A,platforms:new Set([...Object.keys(f),...p?[E]:[]])}),A};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=zv,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},SY=t=>t.Capacitor=TY(t),Ie=SY(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Py=Ie.registerPlugin;class tM{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Ie.Exception(e,Ou.Unimplemented)}unavailable(e="not available"){return new Ie.Exception(e,Ou.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const hR=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),fR=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class bY extends tM{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=fR(s).trim(),i=fR(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=hR(e.key),r=hR(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Py("CapacitorCookies",{web:()=>new bY});const AY=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),xY=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},RY=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,PY=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=xY(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class CY extends tM{async request(e){const n=PY(e,e.webFetchExtra),r=RY(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await AY(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Py("CapacitorHttp",{web:()=>new CY});const Ga=Py("Preferences",{web:()=>re(()=>import("./web-CUcsRWBA.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Wv=Object.freeze(Object.defineProperty({__proto__:null,Preferences:Ga},Symbol.toStringTag,{value:"Module"})),kY={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},nM=S.createContext(void 0);function Ws(){const t=S.useContext(nM);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const NY=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(null),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,d]=S.useState(!0),h=S.useRef(null);S.useEffect(()=>{const T=()=>{console.log(" Received userSubscriptionUpdated event - Refreshing profile..."),e&&(f(e.uid,!0),I())};return window.addEventListener("userSubscriptionUpdated",T),()=>{window.removeEventListener("userSubscriptionUpdated",T)}},[e]);const f=async(T,R=!1)=>{var C,D,O,k,B,ce,de,Se;try{const $=Pe(K,"profiles",T),W=`profile_cache_v2_${T}`,Z=Date.now(),we=1e3*60*60*24;if(!R)try{const se=localStorage.getItem(W);if(se){const{data:_e,timestamp:j}=JSON.parse(se);if(Z-j<we&&(s(_e),d(!1),console.log(" Profile loaded from cache (valid)"),!(Z-j>1e3*60*60)))return}}catch(se){console.warn("Cache parse error:",se)}const Ee=await Yt($);if(Ee.exists()){const se=Ee.data(),_e={userId:Ee.id,shopId:se.shopId,role:se.role,fullName:se.fullName,phone:se.phone,sim1Number:se.sim1Number||null,sim2Number:se.sim2Number||null,shopName:se.shopName||null,approved:se.approved,avatarId:se.avatarId,bridgeLink:se.bridgeLink||null,bridgeDeviceId:se.bridgeDeviceId||null,showWithdrawNote:se.showWithdrawNote!==void 0?!!se.showWithdrawNote:!0,isReceiptNoteEnabled:se.isReceiptNoteEnabled!==void 0?!!se.isReceiptNoteEnabled:!0,smsReadingEnabled:se.smsReadingEnabled!==void 0?!!se.smsReadingEnabled:!1,smsAutoRegisterEnabled:se.smsAutoRegisterEnabled!==void 0?!!se.smsAutoRegisterEnabled:!1,createdAt:((D=(C=se.createdAt)==null?void 0:C.toDate)==null?void 0:D.call(C))||new Date,updatedAt:((k=(O=se.updatedAt)==null?void 0:O.toDate)==null?void 0:k.call(O))||new Date,trialStarted:se.trialStarted||!1,trialStartDate:(ce=(B=se.trialStartDate)==null?void 0:B.toDate)==null?void 0:ce.call(B),trialEndDate:(Se=(de=se.trialEndDate)==null?void 0:de.toDate)==null?void 0:Se.call(de),trialExpired:se.trialExpired||!1,referralCode:se.referralCode||null,referredBy:se.referredBy||null};s(_e);try{localStorage.setItem(W,JSON.stringify({data:_e,timestamp:Z})),_e.shopId&&localStorage.setItem("shopId",_e.shopId)}catch{}}else try{const se=await XL.getByUserId(T);if(se){const _e={userId:T,shopId:se.shopId,role:se.role||"user",fullName:se.fullName||null,phone:se.phone||null,shopName:se.shopName||null,approved:se.approved??!1,avatarId:se.avatarId||void 0,bridgeLink:se.bridgeLink||null,bridgeDeviceId:se.bridgeDeviceId||null,createdAt:Oe(),updatedAt:Oe()};await on(Pe(K,"profiles",T),_e,{merge:!0}),s({...se,userId:T})}else await E(T)}catch(se){console.error("Profile migration error:",se)}d(!1)}catch($){console.error("Error fetching profile:",$),d(!1)}},m=async T=>{try{const R=Pe(K,"users",T.uid);(await Yt(R)).exists()?(await En(R,{lastLogin:Oe(),updatedAt:Oe()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",T.uid)):(await on(R,{email:T.email||"",displayName:T.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Oe(),updatedAt:Oe(),lastLogin:Oe()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",T.uid))}catch(R){console.error(" ensureAdminUserDoc error:",R)}},E=async(T,R,C,D,O)=>{var k,B;try{console.log("Creating default profile for user:",T);const ce=e0.generateReferralCode(T);let de=null;const Se={userId:T,shopId:"default-shop",role:"user",fullName:R||" ",phone:C||null,shopName:D||null,approved:!1,referralCode:ce,referredBy:O||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(Se),console.log("Created temporary profile:",Se);try{const{doc:$,setDoc:W,serverTimestamp:Z}=await re(async()=>{const{doc:_e,setDoc:j,serverTimestamp:Qe}=await Promise.resolve().then(()=>Ln);return{doc:_e,setDoc:j,serverTimestamp:Qe}},void 0,import.meta.url),{db:we}=await re(async()=>{const{db:_e}=await Promise.resolve().then(()=>Ht);return{db:_e}},void 0,import.meta.url),Ee={email:((k=Ot.currentUser)==null?void 0:k.email)||"",displayName:R||" ",phone:C||null,shopName:D||null,isActive:!1,referralCode:ce,referredBy:O||null,createdAt:Z(),lastLogin:null,updatedAt:Z()};if(console.log("Attempting to add user to admin collection with data:",Ee),await W($(we,"users",T),Ee,{merge:!0}),console.log(" User successfully added to admin collection:",Ee),O)try{const{query:_e,collection:j,where:Qe,limit:Fe,getDocs:Pn}=await re(async()=>{const{query:Cn,collection:Nt,where:ft,limit:at,getDocs:cr}=await Promise.resolve().then(()=>Ln);return{query:Cn,collection:Nt,where:ft,limit:at,getDocs:cr}},void 0,import.meta.url),{db:Bn}=await re(async()=>{const{db:Cn}=await Promise.resolve().then(()=>Ht);return{db:Cn}},void 0,import.meta.url),In=_e(j(Bn,"users"),Qe("referralCode","==",O),Fe(1)),Tn=await Pn(In);Tn.empty?console.log(" Referral code not found in users collection:",O):(de=Tn.docs[0].id,await e0.create({referrerId:de,referredUserId:T,referredUserEmail:((B=Ot.currentUser)==null?void 0:B.email)||"",referralCode:O,status:"completed"}),console.log(" Referral record created successfully for referrer:",de))}catch(_e){console.error(" Error creating referral record:",_e)}const se=await Yt($(we,"users",T));se.exists()?console.log(" User document verified in Firestore:",se.data()):console.log(" User document not found after creation")}catch($){console.error(" Error adding user to admin collection:",$)}try{const{addDoc:$,collection:W,serverTimestamp:Z}=await re(async()=>{const{addDoc:j,collection:Qe,serverTimestamp:Fe}=await Promise.resolve().then(()=>Ln);return{addDoc:j,collection:Qe,serverTimestamp:Fe}},void 0,import.meta.url),{db:we}=await re(async()=>{const{db:j}=await Promise.resolve().then(()=>Ht);return{db:j}},void 0,import.meta.url),se=(await $(W(we,"shops"),{name:D||" ",ownerId:T,createdAt:Z(),updatedAt:Z(),isActive:!0})).id;await tp.create({userId:T,shopId:se,role:"user",fullName:" ",phone:null});try{await tp.update(T,{referralCode:ce,referredBy:de||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(j){console.warn(" Failed to update profile with referral fields:",j)}const _e=await tp.getById(T);_e&&(s(_e),console.log("Updated with Firebase profile:",_e))}catch($){console.error("Error creating profile:",$),console.log("Using local profile - Firebase unavailable")}}catch(ce){console.error("Error creating default profile:",ce)}};S.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const T=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const R=localStorage.getItem("demoUser"),C=localStorage.getItem("demoProfile");if(R&&C){console.log(" Found demo user in localStorage");try{const O=JSON.parse(R),k=JSON.parse(C);n(O),s(k),clearTimeout(T),d(!1);return}catch(O){console.error("Error parsing demo user data:",O),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const D=dW(Ot,async O=>{if(console.log(" Auth state changed:",{uid:O==null?void 0:O.uid,email:O==null?void 0:O.email,emailVerified:O==null?void 0:O.emailVerified,timestamp:new Date().toISOString()}),n(O),O){console.log(" User authenticated, starting profile hydration for:",O.uid);try{await Ga.set({key:"current_user_id",value:O.uid}),console.log(" Synced current_user_id to Native:",O.uid)}catch(k){console.error("Failed to sync user ID to native:",k)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}f(O.uid),I(),m(O)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await Ga.remove({key:"current_user_id"}),await Ga.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(T)});return()=>{clearTimeout(T),D()}},[]),S.useEffect(()=>{const T=async()=>{try{await x(),await I(!0)}catch{}};try{window.addEventListener("app:softRefresh",T)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",T)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{const T=()=>{try{I(!0)}catch{}};try{window.addEventListener("userSubscriptionUpdated",T),window.addEventListener("subscriptionActivated",T)}catch{}return()=>{try{window.removeEventListener("userSubscriptionUpdated",T),window.removeEventListener("subscriptionActivated",T)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{e!=null&&e.uid&&Xr.syncDeletedTransactionsLocal(e.uid)},[e==null?void 0:e.uid]);const p=async(T,R,C,D,O,k)=>{try{const B=(T||"").trim().toLowerCase(),ce=(R||"").trim();console.log(" Attempting to sign up user:",B);const de=await vA(Ot,B,ce);console.log(" Sign up successful:",de.user.uid),await E(de.user.uid,C,D,O,k),await m(de.user);try{await f(de.user.uid),await I()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(B){console.error(" Sign up error:",B);let ce="    ";return B.code==="auth/email-already-in-use"?ce="    ":B.code==="auth/weak-password"?ce="   ":B.code==="auth/invalid-email"&&(ce="   "),{error:{...B,message:ce}}}},v=async(T,R)=>{var O;const C=(T||"").trim().toLowerCase(),D=(R||"").trim();try{const k=Z=>Z.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),B=Z=>Z.replace(/[-]/g,we=>String("0123456789"["".indexOf(we)])).replace(/[-]/g,we=>String("0123456789"["".indexOf(we)])),ce=Z=>Z.replace(/[0-9]/g,we=>""[Number(we)]),de=Z=>B(k(Z));if(console.log(" Attempting to sign in user:",C),C==="test@example.com"&&D==="123456"){console.log(" Demo user login detected");const Z={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},we={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(Z)),localStorage.setItem("demoProfile",JSON.stringify(we)),n(Z),s(we),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let Se;const $=[de(D),k(D),ce(k(D))];let W=null;for(const Z of $)try{Z!==D&&console.log(" Trying password variant"),Se=await sW(Ot,C,Z);break}catch(we){if(W=we,(we==null?void 0:we.code)!=="auth/wrong-password"&&(we==null?void 0:we.code)!=="auth/invalid-credential")throw we}if(!Se)throw W||new Error("auth/invalid-credential");console.log(" Sign in successful:",Se.user.uid);try{if((await Yt(Pe(K,"deletedUsers",Se.user.uid))).exists())return console.log(" User is deleted, signing out"),await _A(Ot),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(Z){console.error("Error checking deleted users:",Z)}await m(Se.user);try{await f(Se.user.uid),await I()}catch{}return{error:null}}catch(k){if(console.error(" Sign in error:",k),C==="test@example.com"&&k.code==="auth/user-not-found"){console.log(" Creating test user...");try{const de=await vA(Ot,C,D);return console.log(" Test user created:",de.user.uid),await E(de.user.uid," ","01000000000"," "),{error:null}}catch(de){return console.error(" Error creating test user:",de),{error:de}}}let B="    ",ce=k==null?void 0:k.code;if(ce==="auth/invalid-credential")try{const de=await oW(Ot,((O=k==null?void 0:k.customData)==null?void 0:O.email)||"");Array.isArray(de)&&de.length===0?(ce="auth/user-not-found",B="     "):(ce="auth/wrong-password",B="   ")}catch{B="      "}else ce==="auth/invalid-email"?B="    ":ce==="auth/user-not-found"?B="     ":ce==="auth/wrong-password"?B="   ":ce==="auth/too-many-requests"&&(B="      ");return{error:{...k,code:ce,message:B}}}},w=async()=>{try{const T=e==null?void 0:e.uid;localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await _A(Ot),T&&(localStorage.removeItem(`sub_cache_${T}`),localStorage.removeItem(`profile_cache_v2_${T}`),console.log(" Cleared user caches for:",T));try{await Ga.remove({key:"selected_wallet_id"}),await Ga.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const D=(()=>{try{const O=typeof window<"u"?window:null,k=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),B=typeof window<"u"&&window.location.protocol==="file:",ce=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return k||B||ce||typeof import.meta<"u"&&kY&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(D)}catch{window.location.href=D}}catch(T){console.error("Sign out error:",T)}},_=async T=>{try{return await rW(Ot,T),{error:null}}catch(R){console.error("Reset password error:",R);let C="        ";return R.code==="auth/user-not-found"?C="     ":R.code==="auth/invalid-email"&&(C="   "),{error:{...R,message:C}}}},I=async(T=!1)=>{var O,k,B,ce,de,Se,$,W,Z,we,Ee,se,_e,j,Qe,Fe,Pn,Bn,In,Tn,Cn;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}h.current&&(h.current(),h.current=null),console.log("Checking subscription status for user:",e.uid,{force:T});const R=`sub_cache_${e.uid}`,C=Date.now(),D=1e3*60*60*24;if(!T)try{const Nt=localStorage.getItem(R);if(Nt){const{data:ft,timestamp:at}=JSON.parse(Nt);if(C-at<D){const cr={...ft,subscription:ft.subscription?{...ft.subscription,activatedAt:ft.subscription.activatedAt?{toDate:()=>new Date(ft.subscription.activatedAt)}:null,endDate:ft.subscription.endDate?{toDate:()=>new Date(ft.subscription.endDate)}:null}:null,branchPackage:ft.branchPackage?{...ft.branchPackage,activatedAt:ft.branchPackage.activatedAt?{toDate:()=>new Date(ft.branchPackage.activatedAt)}:null,endDate:ft.branchPackage.endDate?{toDate:()=>new Date(ft.branchPackage.endDate)}:null}:null,freeTrialStartDate:ft.freeTrialStartDate?{toDate:()=>new Date(ft.freeTrialStartDate)}:null,freeTrialEndDate:ft.freeTrialEndDate?{toDate:()=>new Date(ft.freeTrialEndDate)}:null};o(cr);const _r=((O=ft==null?void 0:ft.branchPackage)==null?void 0:O.status)==="active";let zn=!1;if(_r)zn=!0;else{const mt=cr.subscription;zn=dR(mt)}l(zn),console.log(" Subscription loaded from cache (Client-side validity check applied)");return}}}catch(Nt){console.warn("Subscription Cache parse error:",Nt)}try{const Nt=Pe(K,"users",e.uid),ft=await Yt(Nt);if(ft.exists()){const at=ft.data();o(at);try{const mt={...at,subscription:at.subscription?{...at.subscription,activatedAt:((ce=(B=(k=at.subscription.activatedAt)==null?void 0:k.toDate)==null?void 0:B.call(k))==null?void 0:ce.toISOString())||at.subscription.activatedAt,endDate:(($=(Se=(de=at.subscription.endDate)==null?void 0:de.toDate)==null?void 0:Se.call(de))==null?void 0:$.toISOString())||at.subscription.endDate}:null,branchPackage:at.branchPackage?{...at.branchPackage,activatedAt:((we=(Z=(W=at.branchPackage.activatedAt)==null?void 0:W.toDate)==null?void 0:Z.call(W))==null?void 0:we.toISOString())||at.branchPackage.activatedAt,endDate:((_e=(se=(Ee=at.branchPackage.endDate)==null?void 0:Ee.toDate)==null?void 0:se.call(Ee))==null?void 0:_e.toISOString())||at.branchPackage.endDate}:null,freeTrialStartDate:((Fe=(Qe=(j=at.freeTrialStartDate)==null?void 0:j.toDate)==null?void 0:Qe.call(j))==null?void 0:Fe.toISOString())||at.freeTrialStartDate,freeTrialEndDate:((In=(Bn=(Pn=at.freeTrialEndDate)==null?void 0:Pn.toDate)==null?void 0:Bn.call(Pn))==null?void 0:In.toISOString())||at.freeTrialEndDate};localStorage.setItem(R,JSON.stringify({data:mt,timestamp:C}))}catch{}console.log(" Subscription Data Details (Fetched):",{userId:e.uid,isActive:(Tn=at.subscription)==null?void 0:Tn.isActive});const cr=((Cn=at==null?void 0:at.branchPackage)==null?void 0:Cn.status)==="active";let _r=!1;if(cr){const mt=at.branchPackage;let en=!1;if(mt.endDate){const wr=mt.endDate.toDate?mt.endDate.toDate():new Date(mt.endDate);!isNaN(wr.getTime())&&new Date>wr&&(en=!0,wY(e.uid,mt).catch(console.error))}_r=!en}const zn=_r||dR(at.subscription);l(zn)}}catch(Nt){console.error("Error checking subscription status:",Nt)}},x=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await f(e.uid,!0),await I(!0)}catch(T){console.error("Error refreshing profile:",T)}},A={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:p,signIn:v,signOut:w,resetPassword:_,updateUserProfile:async T=>{if(e)try{const R={updatedAt:Oe()};if(T.fullName!==void 0&&(R.fullName=T.fullName),T.phone!==void 0&&(R.phone=T.phone),T.sim1Number!==void 0){const C=(T.sim1Number||"").trim();R.sim1Number=C.length?C:null}if(T.sim2Number!==void 0){const C=(T.sim2Number||"").trim();R.sim2Number=C.length?C:null}if(T.bridgeLink!==void 0){const C=(T.bridgeLink||"").trim();R.bridgeLink=C.length?C:null}if(T.bridgeDeviceId!==void 0){const C=(T.bridgeDeviceId||"").trim();R.bridgeDeviceId=C.length?C:null}T.showWithdrawNote!==void 0&&(R.showWithdrawNote=!!T.showWithdrawNote),T.isReceiptNoteEnabled!==void 0&&(R.isReceiptNoteEnabled=!!T.isReceiptNoteEnabled),T.smsReadingEnabled!==void 0&&(R.smsReadingEnabled=!!T.smsReadingEnabled),T.smsAutoRegisterEnabled!==void 0&&(R.smsAutoRegisterEnabled=!!T.smsAutoRegisterEnabled),await En(Pe(K,"profiles",e.uid),R),await f(e.uid,!0)}catch(R){console.error("Error updating user profile:",R)}},updateAvatarId:async T=>{if(e)try{await En(Pe(K,"profiles",e.uid),{avatarId:T,updatedAt:Oe()}),await f(e.uid)}catch(R){console.error("Error updating avatarId:",R)}},refreshProfile:x,checkSubscriptionStatus:I};return y.jsx(nM.Provider,{value:A,children:t})};function DY(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Cy="Checkbox",[OY]=Uu(Cy),[LY,cT]=OY(Cy);function MY(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,m]=iE({prop:n,defaultProp:s??!1,onChange:l,caller:Cy}),[E,p]=S.useState(null),[v,w]=S.useState(null),_=S.useRef(!1),I=E?!!o||!!E.closest("form"):!0,x={checked:f,disabled:i,setChecked:m,control:E,setControl:p,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:_,required:c,defaultChecked:ra(s)?!1:s,isFormControl:I,bubbleInput:v,setBubbleInput:w};return y.jsx(LY,{scope:e,...x,children:VY(h)?h(x):r})}var rM="CheckboxTrigger",sM=S.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:E}=cT(rM,t),p=lr(s,d),v=S.useRef(l);return S.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const _=()=>h(v.current);return w.addEventListener("reset",_),()=>w.removeEventListener("reset",_)}},[i,h]),y.jsx(Xt.button,{type:"button",role:"checkbox","aria-checked":ra(l)?"mixed":l,"aria-required":c,"data-state":cM(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:p,onKeyDown:Mt(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Mt(n,w=>{h(_=>ra(_)?!0:!_),E&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});sM.displayName=rM;var uT=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return y.jsx(MY,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>y.jsxs(y.Fragment,{children:[y.jsx(sM,{...h,ref:e,__scopeCheckbox:n}),f&&y.jsx(lM,{__scopeCheckbox:n})]})})});uT.displayName=Cy;var iM="CheckboxIndicator",oM=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=cT(iM,n);return y.jsx(Ml,{present:r||ra(i.checked)||i.checked===!0,children:y.jsx(Xt.span,{"data-state":cM(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});oM.displayName=iM;var aM="CheckboxBubbleInput",lM=S.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:m}=cT(aM,t),E=lr(n,m),p=DY(i),v=Vk(r);S.useEffect(()=>{const _=f;if(!_)return;const I=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(I,"checked").set,L=!s.current;if(p!==i&&P){const A=new Event("click",{bubbles:L});_.indeterminate=ra(i),P.call(_,ra(i)?!1:i),_.dispatchEvent(A)}},[f,p,i,s]);const w=S.useRef(ra(i)?!1:i);return y.jsx(Xt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:E,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});lM.displayName=aM;function VY(t){return typeof t=="function"}function ra(t){return t==="indeterminate"}function cM(t){return ra(t)?"indeterminate":t?"checked":"unchecked"}const uM=S.forwardRef(({className:t,...e},n)=>y.jsx(uT,{ref:n,className:Jt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:y.jsx(oM,{className:Jt("flex items-center justify-center text-current"),children:y.jsx(nj,{className:"h-4 w-4"})})}));uM.displayName=uT.displayName;const mg=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(typeof navigator<"u"?!navigator.onLine:!1);S.useEffect(()=>{const x=()=>c(!navigator.onLine);return window.addEventListener("online",x),window.addEventListener("offline",x),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",x)}},[]);const[d,h]=S.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:E,loading:p}=Ws(),v=Fl();S.useEffect(()=>{try{m&&!p&&v("/user/dashboard")}catch{}},[m,p,v]),S.useEffect(()=>{try{const x=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;x&&e(x)}catch{}try{const x=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;x==="true"?h(!0):x==="false"&&h(!1)}catch{}(async()=>{var x,P;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const L=await((P=(x=navigator.credentials).get)==null?void 0:P.call(x,{password:!0,mediation:"optional"}));L&&L.type==="password"&&(L.id&&e(L.id),L.password&&r(L.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const L=sessionStorage.getItem("cashy:rememberedPassword");L&&!n&&r(L)}catch{}}catch{}})()},[]);const w=async x=>{if(x.preventDefault(),o){Et.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Et.error("   .      .");return}const P=(t||"").trim().toLowerCase(),L=(n||"").trim();if(console.log("    :",{email:P,password:"***"}),!t||!n){Et.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(P)){Et.error("    ");return}a(!0);try{try{await lW(Ot,d?$E:BE);try{window.localStorage.setItem("cashy:rememberLogin",d?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:A}=await f(P,L);if(console.log(" SignIn result:",{error:A}),A){console.error("    :",A);const T=A==null?void 0:A.code;T==="auth/user-not-found"?Et.error("     "):T==="auth/wrong-password"?Et.error("   "):T==="auth/invalid-credential"?Et.error("      "):T==="auth/too-many-requests"?Et.error("      "):Et.error((A==null?void 0:A.message)||"    ")}else{console.log("    !"),Et.success("   !");try{if(d&&navigator.credentials&&window.PasswordCredential){const T=new window.PasswordCredential({id:P,name:P,password:L});await navigator.credentials.store(T)}if(d)try{sessionStorage.setItem("cashy:rememberedPassword",L)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(A){console.error("   :",A),Et.error("   ")}finally{a(!1)}},_=x=>{if(o){x.preventDefault(),x.stopPropagation(),Et.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){x.preventDefault(),x.stopPropagation(),Et.error("   .      .");return}t||Et.error("   "),n||Et.error("   ");const P=(t||"").trim().toLowerCase();P&&!/^\S+@\S+\.\S+$/.test(P)&&Et.error("    ")},I=()=>{v("/user/forgot-password")};return S.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const x=document.documentElement,P=document.body,L=x.style.overflow,A=P.style.overflow,T=x.style.overscrollBehaviorY,R=P.style.overscrollBehaviorY;return x.style.overflow="hidden",P.style.overflow="hidden",x.style.overscrollBehaviorY="none",P.style.overscrollBehaviorY="none",()=>{x.style.overflow=L||"",P.style.overflow=A||"",x.style.overscrollBehaviorY=T||"",P.style.overscrollBehaviorY=R||""}},[]),y.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&y.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:y.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),y.jsx("div",{className:"absolute inset-0 bg-black/40"}),y.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:y.jsx(Nj,{className:"w-10 h-10 text-white"})}),y.jsx("div",{className:"flex items-center justify-center mb-2",children:y.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),y.jsx("p",{className:"text-white/80",children:"    "})]}),y.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[y.jsxs("form",{onSubmit:w,className:"space-y-6",autoComplete:"on",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),y.jsxs("div",{className:"relative",children:[y.jsx(X_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),y.jsx(ri,{id:"username",type:"email",placeholder:"  ",value:t,onChange:x=>{const P=x.target.value;e(P);try{window.localStorage.setItem("cashy:lastEmail",P)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),y.jsxs("div",{className:"relative",children:[y.jsx(dk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),y.jsx(ri,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:x=>r(x.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),y.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?y.jsx(ck,{className:"w-5 h-5"}):y.jsx(uk,{className:"w-5 h-5"})})]}),y.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[y.jsx(uM,{id:"rememberLogin",checked:d,onCheckedChange:x=>h(!!x)}),y.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),y.jsx("div",{className:"flex justify-end",children:y.jsxs(Mn,{type:"button",variant:"ghost",size:"sm",onClick:I,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[y.jsx(X_,{className:"w-4 h-4 ml-1"}),"  "]})}),y.jsx("button",{type:"submit",onClick:_,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?y.jsxs("div",{className:"flex items-center justify-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):y.jsxs("div",{className:"flex items-center justify-center",children:[y.jsx(lk,{className:"w-5 h-5 ml-2"})," "]})})]}),y.jsxs("div",{className:"mt-6 text-center space-y-3",children:[y.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",y.jsx(dw,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),y.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",y.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",y.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),y.jsx("div",{className:"mt-6 text-center",children:y.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},FY=Object.freeze(Object.defineProperty({__proto__:null,default:mg},Symbol.toStringTag,{value:"Module"})),dT=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Jt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));dT.displayName="Card";const hT=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Jt("flex flex-col space-y-1.5 p-6",t),...e}));hT.displayName="CardHeader";const fT=S.forwardRef(({className:t,...e},n)=>y.jsx("h3",{ref:n,className:Jt("text-2xl font-semibold leading-none tracking-tight",t),...e}));fT.displayName="CardTitle";const dM=S.forwardRef(({className:t,...e},n)=>y.jsx("p",{ref:n,className:Jt("text-sm text-muted-foreground",t),...e}));dM.displayName="CardDescription";const mT=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Jt("p-6 pt-0",t),...e}));mT.displayName="CardContent";const UY=S.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:Jt("flex items-center p-6 pt-0",t),...e}));UY.displayName="CardFooter";var jY="Label",hM=S.forwardRef((t,e)=>y.jsx(Xt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));hM.displayName=jY;var fM=hM;const $Y=cE("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Li=S.forwardRef(({className:t,...e},n)=>y.jsx(fM,{ref:n,className:Jt($Y(),t),...e}));Li.displayName=fM.displayName;var qv="focusScope.autoFocusOnMount",Hv="focusScope.autoFocusOnUnmount",mR={bubbles:!1,cancelable:!0},BY="FocusScope",mM=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=pi(s),d=pi(i),h=S.useRef(null),f=lr(e,p=>l(p)),m=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let p=function(I){if(m.paused||!a)return;const x=I.target;a.contains(x)?h.current=x:vo(h.current,{select:!0})},v=function(I){if(m.paused||!a)return;const x=I.relatedTarget;x!==null&&(a.contains(x)||vo(h.current,{select:!0}))},w=function(I){if(document.activeElement===document.body)for(const P of I)P.removedNodes.length>0&&vo(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const _=new MutationObserver(w);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),_.disconnect()}}},[r,a,m.paused]),S.useEffect(()=>{if(a){gR.add(m);const p=document.activeElement;if(!a.contains(p)){const w=new CustomEvent(qv,mR);a.addEventListener(qv,c),a.dispatchEvent(w),w.defaultPrevented||(zY(GY(pM(a)),{select:!0}),document.activeElement===p&&vo(a))}return()=>{a.removeEventListener(qv,c),setTimeout(()=>{const w=new CustomEvent(Hv,mR);a.addEventListener(Hv,d),a.dispatchEvent(w),w.defaultPrevented||vo(p??document.body,{select:!0}),a.removeEventListener(Hv,d),gR.remove(m)},0)}}},[a,c,d,m]);const E=S.useCallback(p=>{if(!n&&!r||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(v&&w){const _=p.currentTarget,[I,x]=WY(_);I&&x?!p.shiftKey&&w===x?(p.preventDefault(),n&&vo(I,{select:!0})):p.shiftKey&&w===I&&(p.preventDefault(),n&&vo(x,{select:!0})):w===_&&p.preventDefault()}},[n,r,m.paused]);return y.jsx(Xt.div,{tabIndex:-1,...o,ref:f,onKeyDown:E})});mM.displayName=BY;function zY(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vo(r,{select:e}),document.activeElement!==n)return}function WY(t){const e=pM(t),n=pR(e,t),r=pR(e.reverse(),t);return[n,r]}function pM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function pR(t,e){for(const n of t)if(!qY(n,{upTo:e}))return n}function qY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function HY(t){return t instanceof HTMLInputElement&&"select"in t}function vo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&HY(t)&&e&&t.select()}}var gR=KY();function KY(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=yR(t,e),t.unshift(e)},remove(e){var n;t=yR(t,e),(n=t[0])==null||n.resume()}}}function yR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function GY(t){return t.filter(e=>e.tagName!=="A")}var Kv=0;function QY(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??vR()),document.body.insertAdjacentElement("beforeend",t[1]??vR()),Kv++,()=>{Kv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kv--}},[])}function vR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ti=function(){return ti=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ti.apply(this,arguments)};function gM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function YY(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var np="right-scroll-bar-position",rp="width-before-scroll-bar",JY="with-scroll-bars-hidden",XY="--removed-body-scroll-bar-size";function Gv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ZY(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var eJ=typeof window<"u"?S.useLayoutEffect:S.useEffect,_R=new WeakMap;function tJ(t,e){var n=ZY(null,function(r){return t.forEach(function(s){return Gv(s,r)})});return eJ(function(){var r=_R.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Gv(a,null)}),i.forEach(function(a){s.has(a)||Gv(a,o)})}_R.set(n,t)},[t]),n}function nJ(t){return t}function rJ(t,e){e===void 0&&(e=nJ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function sJ(t){t===void 0&&(t={});var e=rJ(null);return e.options=ti({async:!0,ssr:!1},t),e}var yM=function(t){var e=t.sideCar,n=gM(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,ti({},n))};yM.isSideCarExport=!0;function iJ(t,e){return t.useMedium(e),yM}var vM=sJ(),Qv=function(){},ky=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:Qv,onWheelCapture:Qv,onTouchMoveCapture:Qv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,E=t.noIsolation,p=t.inert,v=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,I=t.gapMode,x=gM(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=f,L=tJ([n,e]),A=ti(ti({},x),s);return S.createElement(S.Fragment,null,d&&S.createElement(P,{sideCar:vM,removeScrollBar:c,shards:h,noRelative:m,noIsolation:E,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:I}),o?S.cloneElement(S.Children.only(a),ti(ti({},A),{ref:L})):S.createElement(_,ti({},A,{className:l,ref:L}),a))});ky.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ky.classNames={fullWidth:rp,zeroRight:np};var oJ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aJ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=oJ();return e&&t.setAttribute("nonce",e),t}function lJ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function cJ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var uJ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=aJ())&&(lJ(e,n),cJ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},dJ=function(){var t=uJ();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_M=function(){var t=dJ(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},hJ={left:0,top:0,right:0,gap:0},Yv=function(t){return parseInt(t||"",10)||0},fJ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Yv(n),Yv(r),Yv(s)]},mJ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return hJ;var e=fJ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},pJ=_M(),zc="data-scroll-locked",gJ=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(JY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(zc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(np,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(rp,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(np," .").concat(np,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(rp," .").concat(rp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zc,`] {
    `).concat(XY,": ").concat(a,`px;
  }
`)},wR=function(){var t=parseInt(document.body.getAttribute(zc)||"0",10);return isFinite(t)?t:0},yJ=function(){S.useEffect(function(){return document.body.setAttribute(zc,(wR()+1).toString()),function(){var t=wR()-1;t<=0?document.body.removeAttribute(zc):document.body.setAttribute(zc,t.toString())}},[])},vJ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;yJ();var i=S.useMemo(function(){return mJ(s)},[s]);return S.createElement(pJ,{styles:gJ(i,!e,s,n?"":"!important")})},n0=!1;if(typeof window<"u")try{var _m=Object.defineProperty({},"passive",{get:function(){return n0=!0,!0}});window.addEventListener("test",_m,_m),window.removeEventListener("test",_m,_m)}catch{n0=!1}var rc=n0?{passive:!1}:!1,_J=function(t){return t.tagName==="TEXTAREA"},wM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_J(t)&&n[e]==="visible")},wJ=function(t){return wM(t,"overflowY")},EJ=function(t){return wM(t,"overflowX")},ER=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=EM(t,r);if(s){var i=IM(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},IJ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},TJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},EM=function(t,e){return t==="v"?wJ(e):EJ(e)},IM=function(t,e){return t==="v"?IJ(e):TJ(e)},SJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},bJ=function(t,e,n,r,s){var i=SJ(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=IM(t,a),E=m[0],p=m[1],v=m[2],w=p-v-i*E;(E||w)&&EM(t,a)&&(h+=w,f+=E);var _=a.parentNode;a=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},wm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},IR=function(t){return[t.deltaX,t.deltaY]},TR=function(t){return t&&"current"in t?t.current:t},AJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},xJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},RJ=0,sc=[];function PJ(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(RJ++)[0],i=S.useState(_M)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=YY([t.lockRef.current],(t.shards||[]).map(TR),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var w=wm(p),_=n.current,I="deltaX"in p?p.deltaX:_[0]-w[0],x="deltaY"in p?p.deltaY:_[1]-w[1],P,L=p.target,A=Math.abs(I)>Math.abs(x)?"h":"v";if("touches"in p&&A==="h"&&L.type==="range")return!1;var T=ER(A,L);if(!T)return!0;if(T?P=A:(P=A==="v"?"h":"v",T=ER(A,L)),!T)return!1;if(!r.current&&"changedTouches"in p&&(I||x)&&(r.current=P),!P)return!0;var R=r.current||P;return bJ(R,v,p,R==="h"?I:x)},[]),l=S.useCallback(function(p){var v=p;if(!(!sc.length||sc[sc.length-1]!==i)){var w="deltaY"in v?IR(v):wm(v),_=e.current.filter(function(P){return P.name===v.type&&(P.target===v.target||v.target===P.shadowParent)&&AJ(P.delta,w)})[0];if(_&&_.should){v.cancelable&&v.preventDefault();return}if(!_){var I=(o.current.shards||[]).map(TR).filter(Boolean).filter(function(P){return P.contains(v.target)}),x=I.length>0?a(v,I[0]):!o.current.noIsolation;x&&v.cancelable&&v.preventDefault()}}},[]),c=S.useCallback(function(p,v,w,_){var I={name:p,delta:v,target:w,should:_,shadowParent:CJ(w)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(x){return x!==I})},1)},[]),d=S.useCallback(function(p){n.current=wm(p),r.current=void 0},[]),h=S.useCallback(function(p){c(p.type,IR(p),p.target,a(p,t.lockRef.current))},[]),f=S.useCallback(function(p){c(p.type,wm(p),p.target,a(p,t.lockRef.current))},[]);S.useEffect(function(){return sc.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,rc),document.addEventListener("touchmove",l,rc),document.addEventListener("touchstart",d,rc),function(){sc=sc.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,rc),document.removeEventListener("touchmove",l,rc),document.removeEventListener("touchstart",d,rc)}},[]);var m=t.removeScrollBar,E=t.inert;return S.createElement(S.Fragment,null,E?S.createElement(i,{styles:xJ(s)}):null,m?S.createElement(vJ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function CJ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const kJ=iJ(vM,PJ);var TM=S.forwardRef(function(t,e){return S.createElement(ky,ti({},t,{ref:e,sideCar:kJ}))});TM.classNames=ky.classNames;var NJ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ic=new WeakMap,Em=new WeakMap,Im={},Jv=0,SM=function(t){return t&&(t.host||SM(t.parentNode))},DJ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=SM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},OJ=function(t,e,n,r){var s=DJ(e,Array.isArray(t)?t:[t]);Im[n]||(Im[n]=new WeakMap);var i=Im[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),E=m!==null&&m!=="false",p=(ic.get(f)||0)+1,v=(i.get(f)||0)+1;ic.set(f,p),i.set(f,v),o.push(f),p===1&&E&&Em.set(f,!0),v===1&&f.setAttribute(n,"true"),E||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),a.clear(),Jv++,function(){o.forEach(function(h){var f=ic.get(h)-1,m=i.get(h)-1;ic.set(h,f),i.set(h,m),f||(Em.has(h)||h.removeAttribute(r),Em.delete(h)),m||h.removeAttribute(n)}),Jv--,Jv||(ic=new WeakMap,ic=new WeakMap,Em=new WeakMap,Im={})}},LJ=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=NJ(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),OJ(r,s,n,"aria-hidden")):function(){return null}},Ny="Dialog",[bM,fZ]=Uu(Ny),[MJ,qs]=bM(Ny),AM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=iE({prop:r,defaultProp:s??!1,onChange:i,caller:Ny});return y.jsx(MJ,{scope:e,triggerRef:a,contentRef:l,contentId:gv(),titleId:gv(),descriptionId:gv(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};AM.displayName=Ny;var xM="DialogTrigger",RM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(xM,n),i=lr(e,s.triggerRef);return y.jsx(Xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":yT(s.open),...r,ref:i,onClick:Mt(t.onClick,s.onOpenToggle)})});RM.displayName=xM;var pT="DialogPortal",[VJ,PM]=bM(pT,{forceMount:void 0}),CM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=qs(pT,e);return y.jsx(VJ,{scope:e,forceMount:n,children:S.Children.map(r,o=>y.jsx(Ml,{present:n||i.open,children:y.jsx(sE,{asChild:!0,container:s,children:o})}))})};CM.displayName=pT;var pg="DialogOverlay",kM=S.forwardRef((t,e)=>{const n=PM(pg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qs(pg,t.__scopeDialog);return i.modal?y.jsx(Ml,{present:r||i.open,children:y.jsx(UJ,{...s,ref:e})}):null});kM.displayName=pg;var FJ=Rh("DialogOverlay.RemoveScroll"),UJ=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(pg,n);return y.jsx(TM,{as:FJ,allowPinchZoom:!0,shards:[s.contentRef],children:y.jsx(Xt.div,{"data-state":yT(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Dl="DialogContent",NM=S.forwardRef((t,e)=>{const n=PM(Dl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=qs(Dl,t.__scopeDialog);return y.jsx(Ml,{present:r||i.open,children:i.modal?y.jsx(jJ,{...s,ref:e}):y.jsx($J,{...s,ref:e})})});NM.displayName=Dl;var jJ=S.forwardRef((t,e)=>{const n=qs(Dl,t.__scopeDialog),r=S.useRef(null),s=lr(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return LJ(i)},[]),y.jsx(DM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Mt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Mt(t.onFocusOutside,i=>i.preventDefault())})}),$J=S.forwardRef((t,e)=>{const n=qs(Dl,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return y.jsx(DM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),DM=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=qs(Dl,n),l=S.useRef(null),c=lr(e,l);return QY(),y.jsxs(y.Fragment,{children:[y.jsx(mM,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:y.jsx(Lg,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":yT(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(BJ,{titleId:a.titleId}),y.jsx(WJ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),gT="DialogTitle",OM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(gT,n);return y.jsx(Xt.h2,{id:s.titleId,...r,ref:e})});OM.displayName=gT;var LM="DialogDescription",MM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(LM,n);return y.jsx(Xt.p,{id:s.descriptionId,...r,ref:e})});MM.displayName=LM;var VM="DialogClose",FM=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=qs(VM,n);return y.jsx(Xt.button,{type:"button",...r,ref:e,onClick:Mt(t.onClick,()=>s.onOpenChange(!1))})});FM.displayName=VM;function yT(t){return t?"open":"closed"}var UM="DialogTitleWarning",[mZ,jM]=YU(UM,{contentName:Dl,titleName:gT,docsSlug:"dialog"}),BJ=({titleId:t})=>{const e=jM(UM),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},zJ="DialogDescriptionWarning",WJ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jM(zJ).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},qJ=AM,pZ=RM,HJ=CM,$M=kM,BM=NM,zM=OM,WM=MM,KJ=FM;const uh=qJ,GJ=HJ,qM=S.forwardRef(({className:t,...e},n)=>y.jsx($M,{ref:n,className:Jt("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));qM.displayName=$M.displayName;const Wc=S.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>y.jsxs(GJ,{children:[y.jsx(qM,{}),y.jsxs(BM,{ref:o,className:Jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&y.jsxs(KJ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(dE,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wc.displayName=BM.displayName;const qc=({className:t,...e})=>y.jsx("div",{className:Jt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});qc.displayName="DialogHeader";const vT=({className:t,...e})=>y.jsx("div",{className:Jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});vT.displayName="DialogFooter";const Hc=S.forwardRef(({className:t,...e},n)=>y.jsx(zM,{ref:n,className:Jt("text-lg font-semibold leading-none tracking-tight",t),...e}));Hc.displayName=zM.displayName;const r0=S.forwardRef(({className:t,...e},n)=>y.jsx(WM,{ref:n,className:Jt("text-sm text-muted-foreground",t),...e}));r0.displayName=WM.displayName;function QJ({open:t,onOpenChange:e,onSuccess:n}){const{user:r,userSubscription:s}=Ws(),[i,o]=S.useState("1"),[a,l]=S.useState("basic"),[c,d]=S.useState(!1),[h,f]=S.useState(null),m=async()=>{var E;if(r){d(!0),f(null);try{const p=((E=s==null?void 0:s.branchPackage)==null?void 0:E.limit)||0;await En(Pe(K,"users",r.uid),{branchPackage:{status:"pending",requested:!0,limit:p+parseInt(i),packageType:a,requestedAt:new Date().toISOString()}}),f("       ."),window.dispatchEvent(new Event("userSubscriptionUpdated")),setTimeout(()=>{e(!1),n&&n()},1500)}catch(p){f("  : "+p.message)}finally{d(!1)}}};return y.jsx(uh,{open:t,onOpenChange:e,children:y.jsxs(Wc,{children:[y.jsx(qc,{children:y.jsx(Hc,{children:" "})}),y.jsxs("div",{className:"grid gap-4 py-2",children:[y.jsxs("div",{className:"grid gap-2",children:[y.jsx(Li,{children:"   "}),y.jsx(ri,{type:"number",min:"1",value:i,onChange:E=>o(E.target.value),placeholder:"   "})]}),y.jsxs("div",{className:"grid gap-2",children:[y.jsx(Li,{children:" "}),y.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a,onChange:E=>l(E.target.value),children:[y.jsx("option",{value:"basic",children:"  ()"}),y.jsx("option",{value:"quarterly",children:"   (3 )"}),y.jsx("option",{value:"pro",children:"  ()"}),y.jsx("option",{value:"enterprise",children:"  ( )"})]})]}),h&&y.jsx("p",{className:`text-sm ${h.includes("")?"text-green-600":"text-red-600"}`,children:h})]}),y.jsxs(vT,{children:[y.jsx(Mn,{variant:"outline",onClick:()=>e(!1),children:""}),y.jsx(Mn,{onClick:m,disabled:c,className:"bg-black text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200",children:c?" ...":" "})]})]})})}function SR(){var C,D,O,k;const{user:t,profile:e,isSubscriptionActive:n,userSubscription:r}=Ws(),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(""),[d,h]=S.useState(""),[f,m]=S.useState(""),[E,p]=S.useState(""),[v,w]=S.useState(!1),[_,I]=S.useState(null),[x,P]=S.useState(0),L=((C=r==null?void 0:r.branchPackage)==null?void 0:C.status)==="active",A=((D=r==null?void 0:r.branchPackage)==null?void 0:D.limit)||0;F.useEffect(()=>{t&&(async()=>{try{const ce=Ve(Ce(K,"shops"),De("ownerId","==",t.uid)),de=await _L(ce);P(de.data().count)}catch(ce){console.error("Error fetching shops count:",ce)}})()},[t]),(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="merchant"||n||L&&x<A;const T=()=>{c(""),h(""),m(""),p("")},R=async()=>{I(null);const B=l.trim(),ce=d.trim(),de=f.trim(),Se=E;if(L&&x>=A&&(e==null?void 0:e.role)!=="admin"&&(e==null?void 0:e.role)!=="merchant"){I(`        (${A}).   .`);return}if(!B||!ce||!de||!Se){I("    .");return}try{w(!0);const W=await HG(YL,"createShopAndManager")({shopName:B,managerName:ce,email:de,password:Se,branchCode:null}),Z=W==null?void 0:W.data;Z!=null&&Z.success?(I(`   (${Z.shopId})   .`),T(),i(!1)):I("     .")}catch($){const W=($==null?void 0:$.message)||"     ";I(W)}finally{w(!1)}};return y.jsxs("div",{className:"container mx-auto p-4",children:[y.jsxs(dT,{children:[y.jsx(hT,{children:y.jsx(fT,{children:"  (CPanel)"})}),y.jsxs(mT,{children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{children:y.jsx("p",{className:"text-sm text-muted-foreground",children:"           ."})}),y.jsxs("div",{className:"flex gap-2",children:[!L&&((O=r==null?void 0:r.branchPackage)==null?void 0:O.status)!=="pending"&&y.jsx(Mn,{onClick:()=>a(!0),variant:"outline",children:"  "}),((k=r==null?void 0:r.branchPackage)==null?void 0:k.status)==="pending"&&y.jsx(Mn,{disabled:!0,variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50",children:"  "}),y.jsx(Mn,{onClick:()=>i(!0),disabled:!1,children:" "})]})]}),!t&&y.jsx("p",{className:"mt-3 text-sm text-red-600",children:"      ."}),L&&y.jsxs("p",{className:"mt-3 text-sm text-green-600 font-medium",children:["  :  ",x,"   ",A," ."]}),t&&!1]})]}),y.jsx(uh,{open:s,onOpenChange:i,children:y.jsxs(Wc,{children:[y.jsx(qc,{children:y.jsx(Hc,{children:"  "})}),y.jsxs("div",{className:"grid gap-4 py-2",children:[y.jsxs("div",{className:"grid gap-2",children:[y.jsx(Li,{htmlFor:"shopName",children:" "}),y.jsx(ri,{id:"shopName",value:l,onChange:B=>c(B.target.value),placeholder:":  "})]}),y.jsxs("div",{className:"grid gap-2",children:[y.jsx(Li,{htmlFor:"managerName",children:" "}),y.jsx(ri,{id:"managerName",value:d,onChange:B=>h(B.target.value),placeholder:":  "})]}),y.jsxs("div",{className:"grid gap-2",children:[y.jsx(Li,{htmlFor:"email",children:""}),y.jsx(ri,{id:"email",type:"email",value:f,onChange:B=>m(B.target.value),placeholder:"example@mail.com"})]}),y.jsxs("div",{className:"grid gap-2",children:[y.jsx(Li,{htmlFor:"password",children:""}),y.jsx(ri,{id:"password",type:"password",value:E,onChange:B=>p(B.target.value),placeholder:""})]}),_&&y.jsx("p",{className:"text-sm text-muted-foreground",children:_})]}),y.jsxs(vT,{children:[y.jsx(Mn,{variant:"outline",onClick:()=>i(!1),disabled:v,children:""}),y.jsx(Mn,{onClick:R,disabled:v||!1,children:v?" ...":" "})]})]})}),y.jsx(QJ,{open:o,onOpenChange:a})]})}const bR=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),{signIn:l}=Ws(),c=Fl();S.useEffect(()=>{try{const h=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;h&&e(h)}catch{}},[]);const d=async h=>{var f;if(h.preventDefault(),o){Et.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Et.error("   .      .");return}if(!t||!n){Et.error("     ");return}a(!0);try{const{error:m}=await l(t,n);if(m){const E=m==null?void 0:m.code;E==="auth/invalid-email"?Et.error("    "):E==="auth/user-not-found"?Et.error("     "):E==="auth/wrong-password"?Et.error("   "):E==="auth/invalid-credential"?Et.error("      "):E==="auth/too-many-requests"?Et.error("      "):Et.error((m==null?void 0:m.message)||"    ");return}try{const E=(f=Ot.currentUser)==null?void 0:f.uid;E&&await on(Pe(K,"users",E),{branchPackage:{requested:!0,status:"pending",requestedAt:Oe()},updatedAt:Oe()},{merge:!0})}catch(E){console.warn("    :",E)}Et.success("   "),c("/cpanel")}catch(m){Et.error((m==null?void 0:m.message)||"     ")}finally{a(!1)}};return y.jsx("div",{className:"min-h-screen bg-background px-4 py-8 flex items-center justify-center",children:y.jsxs(dT,{className:"w-full max-w-md",children:[y.jsxs(hT,{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(hk,{className:"w-6 h-6"}),y.jsx(fT,{children:"   "})]}),y.jsx(dM,{children:"     "})]}),y.jsx(mT,{children:y.jsxs("form",{onSubmit:d,className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(Li,{htmlFor:"email",children:" "}),y.jsxs("div",{className:"relative",children:[y.jsx(X_,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),y.jsx(ri,{id:"email",type:"email",value:t,onChange:h=>{const f=h.target.value;e(f);try{window.localStorage.setItem("cashy:lastEmail",f)}catch{}},placeholder:"example@mail.com",className:"pr-10"})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(Li,{htmlFor:"password",children:" "}),y.jsxs("div",{className:"relative",children:[y.jsx(dk,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),y.jsx(ri,{id:"password",type:s?"text":"password",value:n,onChange:h=>r(h.target.value),placeholder:"",className:"pr-10"}),y.jsx("button",{type:"button",onClick:()=>i(h=>!h),className:"absolute left-3 top-2.5 text-muted-foreground","aria-label":s?"  ":"  ",children:s?y.jsx(ck,{className:"w-5 h-5"}):y.jsx(uk,{className:"w-5 h-5"})})]})]}),y.jsx("button",{type:"submit",onClick:h=>{o?(h.preventDefault(),h.stopPropagation(),Et.info("     ...")):typeof navigator<"u"&&navigator.onLine===!1?(h.preventDefault(),h.stopPropagation(),Et.error("   .      .")):(t||Et.error("   "),n||Et.error("   "))},className:"w-full inline-flex items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-white hover:opacity-90",children:o?y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):y.jsxs("div",{className:"flex items-center justify-center",children:[y.jsx(lk,{className:"w-5 h-5 ml-2"})," "]})}),y.jsxs("div",{className:"mt-4 text-center space-y-3",children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"  "}),y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx(dw,{to:"/user/forgot-password",className:"text-primary text-sm",children:"   "}),y.jsx("span",{className:"text-muted-foreground",children:""}),y.jsx(dw,{to:"/auth?mode=signup",className:"text-primary text-sm",children:"  "})]})]})]})})]})})},YJ=()=>{const t=Fl(),e=wi(),{signOut:n,user:r,userSubscription:s}=Ws(),{toast:i}=rE(),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=[{id:"home",label:"",icon:hj,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:uj,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:X4,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:hb,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:Q4,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"sales",label:"",icon:pb,path:"/user/dashboard",action:()=>{t("/user/dashboard",{state:{openSalesDialog:!0}})}},{id:"settings",label:"",icon:mb,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:ej,action:()=>{var w;a(!1);const v=(w=s==null?void 0:s.subscription)==null?void 0:w.planType;if(v===Ka.TAHWEELA||v===Ka.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:Oj,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:oj,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:pb,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:fb,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:fk,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"branch-management",label:" ",icon:Rj,action:()=>{a(!1),t("/user/dashboard",{state:{openBranchManagement:!0}})},color:"#14b8a6"},{id:"add-wallet",label:" ",icon:hb,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:sj,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:yj,action:()=>{a(!1);const w=`   
  : ${(r==null?void 0:r.email)||" "}`,_=encodeURIComponent(w);window.open(`https://wa.me/201000392539?text=${_}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:db,action:async()=>{a(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],m=[{id:"shop-expenses-settings",label:" ",icon:fb,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:mb,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:db,action:async()=>{c(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],E=(v,w,_,I)=>{var T;const P=((T=s==null?void 0:s.subscription)==null?void 0:T.planType)===Ka.TAHWEELA,L=R=>["/user/dashboard","/profile-settings"].includes(R),A=R=>R==="debts";if(_){if(P&&!A(I)&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}_()}else if(w&&v==="/add"){if(P){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!w){if(P&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}t(v)}},p=v=>e.pathname===v;return y.jsxs("div",{className:"mobile-bottom-nav",children:[o&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),y.jsx("div",{className:"quick-actions-bottomsheet",children:y.jsx("div",{className:"quick-actions-grid",children:f.map((v,w)=>y.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var I;if(((I=s==null?void 0:s.subscription)==null?void 0:I.planType)===Ka.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":"0s"},children:[y.jsx("div",{className:"quick-action-icon",children:y.jsx(v.icon,{className:"action-icon"})}),y.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),l&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),y.jsx("div",{className:"quick-actions-bottomsheet",children:y.jsx("div",{className:"quick-actions-grid",children:m.map((v,w)=>y.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var x;const _=(x=s==null?void 0:s.subscription)==null?void 0:x.planType,I=new Set(["logout","profile-settings"]);if(_===Ka.TAHWEELA&&!I.has(v.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":`${w*.06}s`},children:[y.jsx("div",{className:"quick-action-icon",children:y.jsx(v.icon,{className:"action-icon"})}),y.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),y.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(v=>{const w=v.icon,_=p(v.path);return y.jsxs("button",{onClick:()=>E(v.path,v.isSpecial,v.action,v.id),className:`mobile-nav-item ${_?"active":""} ${v.isSpecial?"special":""}`,type:"button","aria-label":v.label,style:{backgroundColor:"transparent"},children:[y.jsx("div",{className:`nav-icon-container ${v.isSpecial?"special-icon":""} ${v.isSpecial&&v.id==="add"&&o?"special-open":""}`,children:y.jsx(w,{className:`nav-icon ${_?"active-icon":""} ${v.isSpecial?"special-icon-svg":""} ${v.isSpecial&&v.id==="settings"&&l?"rotated":""}`})}),!v.isSpecial&&y.jsx("span",{className:`nav-label ${_?"active-label":""}`,children:v.label})]},v.id)})})]})};var aP,lP;const Sc=(lP=(aP=import.meta)==null?void 0:aP.env)==null?void 0:lP.VITE_ANDROID_DOWNLOAD_URL;var cP,uP;const bc=(uP=(cP=import.meta)==null?void 0:cP.env)==null?void 0:uP.VITE_PC_DOWNLOAD_URL;var dP,hP;const Ac=(hP=(dP=import.meta)==null?void 0:dP.env)==null?void 0:hP.VITE_PC32_DOWNLOAD_URL;var fP,mP;const xc=(mP=(fP=import.meta)==null?void 0:fP.env)==null?void 0:mP.VITE_ANDROID_VERSION;var pP,gP;const Rc=(gP=(pP=import.meta)==null?void 0:pP.env)==null?void 0:gP.VITE_PC_VERSION;var yP,vP;const Pc=(vP=(yP=import.meta)==null?void 0:yP.env)==null?void 0:vP.VITE_PC32_VERSION;function Kn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function JJ(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Lu=["siteContent","appDownloads"],gg=["siteContent","desktop_updates"],yg=["siteContent","android_updates"],uc="appDownloadsCache",XJ=6*60*60*1e3;function ZJ(){try{const e=localStorage.getItem(uc);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||Sc,pcUrl:(n==null?void 0:n.pcUrl)||bc,pc32Url:(n==null?void 0:n.pc32Url)||Ac,androidVersion:(n==null?void 0:n.androidVersion)||xc,pcVersion:(n==null?void 0:n.pcVersion)||Rc,pc32Version:(n==null?void 0:n.pc32Version)||Pc,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=Kn(r.pcUrl)),r.androidVersion||(r.androidVersion=Kn(r.androidUrl)),r.pc32Version||(r.pc32Version=Kn(r.pc32Url)),r}}catch{}const t={androidUrl:Sc,pcUrl:bc,pc32Url:Ac,androidVersion:xc,pcVersion:Rc,pc32Version:Pc};return t.pcVersion||(t.pcVersion=Kn(t.pcUrl)),t.androidVersion||(t.androidVersion=Kn(t.androidUrl)),t.pc32Version||(t.pc32Version=Kn(t.pc32Url)),t}async function HM(t=!1){try{if(!t)try{const r=localStorage.getItem(uc),s=localStorage.getItem(uc+"_ts");if(r&&s&&Date.now()-Number(s)<XJ)return JSON.parse(r)}catch{}const e=await Yt(Pe(K,Lu[0],Lu[1]));if(e.exists()){const r=e.data();try{localStorage.setItem(uc,JSON.stringify(r)),localStorage.setItem(uc+"_ts",String(Date.now()))}catch{}const s={androidUrl:(r==null?void 0:r.androidUrl)||Sc,pcUrl:(r==null?void 0:r.pcUrl)||bc,pc32Url:(r==null?void 0:r.pc32Url)||Ac,androidVersion:(r==null?void 0:r.androidVersion)||xc,pcVersion:(r==null?void 0:r.pcVersion)||Rc,pc32Version:(r==null?void 0:r.pc32Version)||Pc,updatedAt:r==null?void 0:r.updatedAt,updatedBy:r==null?void 0:r.updatedBy};return s.pcVersion||(s.pcVersion=Kn(s.pcUrl)),s.androidVersion||(s.androidVersion=Kn(s.androidUrl)),s.pc32Version||(s.pc32Version=Kn(s.pc32Url)),s}const n={androidUrl:Sc,pcUrl:bc,pc32Url:Ac,androidVersion:xc,pcVersion:Rc,pc32Version:Pc};return n.pcVersion||(n.pcVersion=Kn(n.pcUrl)),n.androidVersion||(n.androidVersion=Kn(n.androidUrl)),n.pc32Version||(n.pc32Version=Kn(n.pc32Url)),n}catch(e){const n=(e==null?void 0:e.message)||"";((e==null?void 0:e.code)||"")==="permission-denied"||n.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",e):console.error(" Error loading app downloads:",e);try{const i=localStorage.getItem(uc);if(i){const o=JSON.parse(i),a={androidUrl:(o==null?void 0:o.androidUrl)||Sc,pcUrl:(o==null?void 0:o.pcUrl)||bc,pc32Url:(o==null?void 0:o.pc32Url)||Ac,androidVersion:(o==null?void 0:o.androidVersion)||xc,pcVersion:(o==null?void 0:o.pcVersion)||Rc,pc32Version:(o==null?void 0:o.pc32Version)||Pc,updatedAt:o==null?void 0:o.updatedAt,updatedBy:o==null?void 0:o.updatedBy};return a.pcVersion||(a.pcVersion=Kn(a.pcUrl)),a.androidVersion||(a.androidVersion=Kn(a.androidUrl)),a.pc32Version||(a.pc32Version=Kn(a.pc32Url)),a}}catch{}const s={androidUrl:Sc,pcUrl:bc,pc32Url:Ac,androidVersion:xc,pcVersion:Rc,pc32Version:Pc};return s.pcVersion||(s.pcVersion=Kn(s.pcUrl)),s.androidVersion||(s.androidVersion=Kn(s.androidUrl)),s.pc32Version||(s.pc32Version=Kn(s.pc32Url)),s}}function eX(t){return HM().then(t),()=>{}}async function tX(t,e,n,r,s,i=12e4){const o=QL(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=rY(o,l);return new Promise((d,h)=>{const f=tY(c,t);let m=!1;const E=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",p=>{const v=Math.round(p.bytesTransferred/p.totalBytes*100);s&&s(v)},p=>{clearTimeout(E),h(p)},async()=>{try{if(clearTimeout(E),m)return;const p=await nY(c),v={updatedAt:Oe(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=p,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=p,r&&(v.pcVersion=r)):(v.pc32Url=p,r&&(v.pc32Version=r));const w=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),_=on(Pe(K,Lu[0],Lu[1]),v,{merge:!0});let I=!1;const x=new Promise(P=>setTimeout(()=>{I=!0,P()},w));try{await Promise.race([_,x])}catch(P){console.warn(" Firestore write error, proceeding with URL only:",P)}I&&console.warn(" Firestore update timed out;             ."),d(p)}catch(p){h(p)}})})}async function nX(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Oe(),updatedBy:e||"admin"};await on(Pe(K,Lu[0],Lu[1]),r,{merge:!0})}async function rX(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Oe(),updatedBy:e||"admin"};await on(Pe(K,gg[0],gg[1]),r,{merge:!0})}async function KM(){try{try{const s=localStorage.getItem("desktop_update_cache");if(s){const i=JSON.parse(s)}}catch{}const t=Pe(K,gg[0],gg[1]),e=await Yt(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,downloadURL_64:n!=null&&n.downloadURL_64?String(n.downloadURL_64):void 0,downloadURL_32:n!=null&&n.downloadURL_32?String(n.downloadURL_32):void 0,notes:n!=null&&n.notes?String(n.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching desktop updates:",t);try{const e=localStorage.getItem("desktop_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function GM(t){return KM().then(t),()=>{}}function QM(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function sX(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Oe(),updatedBy:e||"admin"};await on(Pe(K,yg[0],yg[1]),r,{merge:!0})}async function YM(){try{const t=Pe(K,yg[0],yg[1]),e=await Yt(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,url:n!=null&&n.url?String(n.url):void 0,notes:n!=null&&n.notes?String(n.notes):void 0,force:!!(n!=null&&n.force),code:typeof(n==null?void 0:n.code)=="number"?n.code:typeof(n==null?void 0:n.versionCode)=="number"?n.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching android updates:",t);try{const e=localStorage.getItem("android_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function iX(t){return YM().then(t),()=>{}}const oX=Object.freeze(Object.defineProperty({__proto__:null,fetchAndroidUpdates:YM,fetchDesktopUpdates:KM,getAppDownloads:HM,getCachedOrEnvAppDownloads:ZJ,listenAndroidUpdates:iX,listenAppDownloads:eX,listenDesktopUpdates:GM,resolveDownloadUrl:JJ,selectDesktopUrl:QM,setAndroidUpdateInfo:sX,setAppDownloadLinks:nX,setDesktopUpdateInfo:rX,uploadAppBinaryResumable:tX},Symbol.toStringTag,{value:"Module"})),aX=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=F.useState(!1),[s,i]=F.useState(!1),[o,a]=F.useState(!1),[l,c]=F.useState(0),[d,h]=F.useState(""),[f,m]=F.useState(!1),E=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(P){console.warn("failed to minimize",P)}},p=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(P){console.warn("failed to close",P)}},v=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(P){console.warn("failed to soft refresh",P),m(!1)}}};if(F.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(P=>{const L=(P==null?void 0:P.percent)==null?0:Number(P.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(P){console.warn("update init failed",P)}},[e,t]),F.useEffect(()=>{const P=GM(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const T=QM({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(T)}});return()=>{try{P()}catch{}}},[]),!e)return null;const[_,I]=F.useState(!1),x=async()=>{try{if(!t)return;_?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),I(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),I(!0))}catch(P){console.warn("window toggle failed",P)}};return y.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[y.jsx("button",{type:"button","aria-label":"",title:"",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:y.jsx(dE,{className:"w-5 h-5"})}),y.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:y.jsx(uE,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),y.jsx("button",{type:"button","aria-label":"",title:"",onClick:E,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:y.jsx(_j,{className:"w-5 h-5"})}),y.jsx("button",{type:"button","aria-label":"/",title:_?"  ":"   ",onClick:x,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:y.jsx(Aj,{className:"w-5 h-5"})})]})},s0=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=S.useState(`${n}logo.svg`),[i,o]=S.useState(0),a=S.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return y.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:y.jsxs("div",{className:"flex flex-col items-center justify-center",children:[y.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),y.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},AR=Py("AppLauncher",{web:()=>re(()=>import("./web-DBA51Ubu.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function lX(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Ie&&Ie.getPlatform()!=="web"&&(AR.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Ie&&Ie.getPlatform()!=="web"&&AR.openUrl({url:n})}catch{}}}function JM(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function cX(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?JM(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function gZ(t,e,n){const r=JM(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function uX(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function dX(t){const e=uX(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function yZ(t,e,n){const r=cX(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=dX(t||e);lX(r,s)}async function hX(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function _T(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function fX(t,e,n=0){const r=_T(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const el=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:_T,calculateProfit:fX},Symbol.toStringTag,{value:"Module"})),mX=t=>t==="withdraw"||t==="receive"?"receive":"send",pX=async t=>{if(!t)return null;const e=Ve(Ce(K,"transactions"),De("reference","==",t),rd(1)),n=await ze(e);return n.empty?null:n.docs[0].id},gX=async t=>{var e;try{const n=await Ga.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return wX(t||((e=Ot.currentUser)==null?void 0:e.uid)||"")||null},Xv=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await Bo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},XM=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await pX(t.reference);if(e)return{id:e,duplicate:!0};const n=mX(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Xv(t.receiverMsisdn);if(o||(o=await Xv(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Xv(a))}r=o||await gX(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await lT.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await hX(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=_T(t.amount,n);await Xr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},sp=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},i0=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Ot.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(p=>sp(p)).filter(p=>!!p):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=p=>String(p||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:sp(String((p==null?void 0:p.phone)||(p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn):[],d=new Map;for(const p of s){const v=l(p);for(const w of c){const _=l(w.msisdn);if(w.msisdn===p){d.set(w.walletId,w.msisdn);continue}if(_.slice(-5)===v.slice(-5)){d.set(w.walletId,w.msisdn);continue}}}if(d.size===1){const[p,v]=Array.from(d.entries())[0];return{walletId:p,msisdn:v}}const f=(await Bo.getByMerchantId(r)||[]).map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:sp(String((p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn),m=[...c,...f],E=new Map;for(const p of s){const v=l(p);for(const w of m){const _=l(w.msisdn);if(w.msisdn===p){E.set(w.walletId,w.msisdn);continue}if(_.slice(-5)===v.slice(-5)){E.set(w.walletId,w.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",E.size)}catch{}if(E.size===1){const[p,v]=Array.from(E.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:p,msisdn:v})}catch{}return{walletId:p,msisdn:v}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function yX(t,e){try{const n=i=>sp(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function vX(t){var e;try{const n=t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await i0(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");if(a&&o[a]&&o[a].walletId)return{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")};if(l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId)return{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")};if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";if(t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||""),c){const d=await i0([c],n);if(d)return d}}return null}catch{return null}}function _X(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const wX=t=>{var e,n;try{const r=t||((e=Ot.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function ZM(){return typeof window>"u"?()=>{}:()=>{}}const Eo=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:_X,detectWalletFromSim:yX,identifyWalletBySim:i0,initMobileSmsBridge:ZM,processMobileTransactionNotification:XM,resolveWalletBySimOrSlot:vX},Symbol.toStringTag,{value:"Module"})),EX=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},IX=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},TX=()=>{var t,e;try{const n=((t=Ot.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},SX=()=>{var t;try{const e=((t=Ot.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Zv=async(t,e)=>{var I;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=EX(n),d=IX(n);if(!c||c<=0)return;const h=((I=Ot.currentUser)==null?void 0:I.uid)||"",f=TX()||void 0,m=SX()||"",E=f||"default-line";if(!h||!f||!m)return;try{const x=await EY(h);if((x==null?void 0:x.planType)===Ka.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const p=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,v=`VF-${btoa(unescape(encodeURIComponent(p))).slice(0,24)}`,w=a?"withdraw":l?"transfer":"withdraw",_={type:w,amount:c,provider:"vodafone_cash",shopId:m,lineId:E,walletId:f,senderMsisdn:w==="transfer"&&d||void 0,receiverMsisdn:w==="withdraw"&&d||void 0,reference:v,createdBy:h,merchantUserId:h,note:"  "};try{await XM(_)}catch{}},Rs={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Xr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Xr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Xr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=Rs.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=Rs.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Xr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=Rs.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=Rs.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=Rs.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Xr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},bX=Rs,vZ=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:bX,reportsService:Rs},Symbol.toStringTag,{value:"Module"})),vg={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Pe(K,"walletLimits",t),s={updatedAt:Oe(),ownerId:(n=Ot.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await on(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Pe(K,"walletLimits",t);let r;try{r=await Yt(n)}catch(i){return console.error("     (     ):",i),null}if(r.exists()){const i=r.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||wt.now()}}const s={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:wt.now()};return await on(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Oe(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid}),s}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Pe(K,"walletLimits",t);return await on(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Oe(),updatedAt:Oe(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Pe(K,"walletLimits",t);return await on(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Oe(),updatedAt:Oe(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Pe(K,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Oe()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await on(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n,r){try{const s=Pe(K,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Oe()},a=new Date,l=r?new Date(r):a,c=l.getDate()===a.getDate()&&l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear(),d=l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear();return n==="transfer"?(c&&(o.dailyTransferUsed=Math.max(0,(i.dailyTransferUsed||0)-e)),d&&(o.monthlyTransferUsed=Math.max(0,(i.monthlyTransferUsed||0)-e))):(c&&(o.dailyWithdrawUsed=Math.max(0,(i.dailyWithdrawUsed||0)-e)),d&&(o.monthlyWithdrawUsed=Math.max(0,(i.monthlyWithdrawUsed||0)-e))),Object.keys(o).length<=1?i:(await on(s,{...o},{merge:!0}),await this.getWalletLimits(t))}catch(s){throw console.error("      :",s),s}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Pe(K,"walletLimits",t);return await on(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Oe(),lastMonthlyReset:Oe(),updatedAt:Oe(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},o0=Object.freeze(Object.defineProperty({__proto__:null,default:vg,walletDailyLimitsService:vg},Symbol.toStringTag,{value:"Module"}));class AX{constructor(){hd(this,"intervalId",null);hd(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Ot.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await t0.getToday(n);await t0.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await Rs.syncReportsDataFromFirebase(e);const n=Rs.getReportsData(e);if(!n.lastDailyResetDate||!Rs.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Xr.getUserTransactions(e),l=_=>{const I=String(_||"").toLowerCase();return["completed","confirmed","success"].includes(I)?"completed":["failed","error"].includes(I)?"failed":["cancelled","canceled"].includes(I)?"cancelled":"pending"},c=(a||[]).filter(_=>{var x,P;const I=(x=_==null?void 0:_.createdAt)!=null&&x.toDate?_.createdAt.toDate():(_==null?void 0:_.createdAt)instanceof Date?_.createdAt:new Date(_==null?void 0:_.createdAt);return((P=I==null?void 0:I.toDateString)==null?void 0:P.call(I))===o&&l(_==null?void 0:_.status)==="completed"}),d=c.length,h=c.reduce((_,I)=>_+Number(I.amount||0),0),f=_=>{const I=String(((_==null?void 0:_.type)??(_==null?void 0:_.txnType))||"").toLowerCase();return I==="withdraw"||I==="withdrawal"||I==="receive"},m=_=>{const I=String(((_==null?void 0:_.type)??(_==null?void 0:_.txnType))||"").toLowerCase();return I==="send"||I==="transfer"},E=c.filter(f).reduce((_,I)=>{const x=I.withdrawnAmount!==void 0?Number(I.withdrawnAmount):Number(I.amount||0);return _+x},0),p=c.filter(m).reduce((_,I)=>{const x=I.sentAmount!==void 0?Number(I.sentAmount):Number(I.amount||0);return _+x},0),v=c.reduce((_,I)=>_+Number(Rs.calculateTransactionProfit(I)||0),0),w=new Date(i).toISOString().slice(0,10);await eM.add({userId:e,reportDate:w,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(E.toFixed(2)),totalSent:Number(p.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",w)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await Bo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await vg.resetDailyLimits(i)}catch{}if(r)try{await vg.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const xR=new AX,e_=768;function xX(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${e_-1}px)`),r=()=>{e(window.innerWidth<e_)};return n.addEventListener("change",r),e(window.innerWidth<e_),()=>n.removeEventListener("change",r)},[]),!!t}function RX(){const[t,e]=S.useState("default"),[n,r]=S.useState(!1);return S.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const eV=S.createContext(void 0);function PX({children:t}){const{profile:e,user:n,loading:r}=Ws(),[s,i]=S.useState(null),[o,a]=S.useState(null),[l,c]=S.useState(!0);S.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),S.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const E=localStorage.getItem(m);i(E||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const E=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==E))try{const p=localStorage.getItem(E);i(p||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return y.jsx(eV.Provider,{value:d,children:t})}function CX(){const t=S.useContext(eV);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}const kX={},RR=F.lazy(()=>re(()=>import("./Index-CTLC0Aj-.js"),[],import.meta.url)),Tm=F.lazy(()=>re(()=>import("./LandingPage-C4tRiJKf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),PR=F.lazy(()=>re(()=>import("./SubscriptionsPage-CCtg4T2Y.js"),__vite__mapDeps([10,3,11]),import.meta.url)),CR=F.lazy(()=>re(()=>import("./AuthPage-BAkcCHDZ.js"),__vite__mapDeps([12,1,2,7]),import.meta.url)),Sm=F.lazy(()=>re(()=>import("./TopUpPage-B2HpabT6.js"),__vite__mapDeps([13,14]),import.meta.url)),kR=F.lazy(()=>re(()=>import("./AdminTopupsPage-CEKkNrAY.js"),__vite__mapDeps([15,14]),import.meta.url)),NR=F.lazy(()=>re(()=>import("./AdminNotificationsPage-ClXcdEQc.js"),__vite__mapDeps([16,17,18,19]),import.meta.url)),bm=F.lazy(()=>re(()=>import("./UserRegisterPage-D6OsS0GE.js"),__vite__mapDeps([20,21,22,23,24]),import.meta.url)),DR=F.lazy(()=>re(()=>import("./UserAccountSetupPage-EIQjSdiR.js"),__vite__mapDeps([25,21,24,9]),import.meta.url)),OR=F.lazy(()=>re(()=>import("./ForgotPasswordCodePage-BPv_dl2I.js"),[],import.meta.url)),LR=F.lazy(()=>re(()=>import("./DashboardLoginPage-B3Lqpfih.js"),[],import.meta.url)),MR=F.lazy(()=>re(()=>import("./ProtectedDashboard-DsHp05G-.js"),__vite__mapDeps([26,14,27,28,29,30,22]),import.meta.url)),ip=F.lazy(()=>re(()=>import("./ProtectedUserDashboard-CAuXbLOR.js"),__vite__mapDeps([31,32,19,27,28]),import.meta.url)),VR=F.lazy(()=>re(()=>import("./MerchantDashboard-uRJbyGRI.js"),__vite__mapDeps([33,34,14,35,36,37,38,39]),import.meta.url)),FR=F.lazy(()=>re(()=>import("./PendingApprovalPage-BS66WwVe.js"),__vite__mapDeps([40,41]),import.meta.url)),UR=F.lazy(()=>re(()=>import("./AdminLogin-Crc7Cbtd.js"),[],import.meta.url)),jR=F.lazy(()=>re(()=>import("./ProtectedAdminDashboard-DY7Gcwhs.js"),__vite__mapDeps([42,11,43,34,14,35,27,28,44,41,17,21,36,45,3,46,24,47,48,32,18,8,6,9,2,7,49]),import.meta.url)),$R=F.lazy(()=>re(()=>import("./AuthTestPage-B7h8EKK1.js"),[],import.meta.url)),BR=F.lazy(()=>re(()=>import("./ProfileSettingsPage-C5Zbs_B5.js"),__vite__mapDeps([50,44,51,27,28,39,4,47,9,6,46]),import.meta.url)),zR=F.lazy(()=>re(()=>import("./TransactionsPage-oyRuoFSp.js"),__vite__mapDeps([52,14,36,53,35,45,27,28,3,38,9,7,29,46,30,4,49]),import.meta.url)),WR=F.lazy(()=>re(()=>import("./WalletAdditionPage-8luaX2ua.js"),__vite__mapDeps([54,14,4,22,24,28]),import.meta.url)),qR=F.lazy(()=>re(()=>import("./ReferralsPage-CH-ICjhh.js"),__vite__mapDeps([55,36,21,23,19,9,48,49]),import.meta.url)),HR=F.lazy(()=>re(()=>import("./NotFound-BEcWIfcZ.js"),[],import.meta.url)),KR=F.lazy(()=>re(()=>import("./PrivacyPolicyPage-DMrAHPSE.js"),[],import.meta.url)),Qa=new w6({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=A6({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});b6({queryClient:Qa,persister:t,maxAge:24*60*60*1e3})}catch{}const NX=()=>{if(!((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return y.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:y.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:y.jsx(uE,{className:"w-5 h-5"})})})},GR=()=>{const t=wi(),{user:e,loading:n}=Ws(),r=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?y.jsx(YJ,{}):null},DX=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},t_=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await re(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>Eo);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},OX=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await re(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>Eo);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},QR=()=>{var er;const t=xX(),e=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",{profile:n,user:r}=Ws(),{shopId:s}=CX(),i=wi(),o=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"&&i.pathname==="/"&&!!r,a=i.pathname.startsWith("/user/login")||i.pathname.startsWith("/auth")||i.pathname.startsWith("/landing")||i.pathname==="/"&&!o&&!r,l=!!r&&!a||i.pathname.startsWith("/user/dashboard")||o;F.useEffect(()=>{r&&console.log("Dashboard State Check:",{path:i.pathname,isUserDashboard:l,isAuthOrLanding:a,userUid:r.uid})},[i.pathname,l,r]);const c=Fl(),{toast:d}=rE(),[h,f]=F.useState(!1),[m,E]=F.useState(null),[p,v]=F.useState(!1),[w,_]=F.useState(null),[I,x]=F.useState(!1),[P,L]=F.useState(""),[A,T]=F.useState(""),[R,C]=F.useState(null),[D,O]=F.useState(null),k=F.useRef(null),B=F.useRef(null),ce=F.useRef(!1),de=F.useRef(null),Se=F.useRef(""),$=F.useRef(""),W=F.useRef(new Set);F.useEffect(()=>{try{const Q=localStorage.getItem("sms_suppressed_ids")||"[]",H=Array.isArray(JSON.parse(Q))?JSON.parse(Q):[];W.current=new Set(H.map(q=>String(q||"")))}catch{}},[]);const[Z,we]=F.useState(!1),Ee=F.useRef(n);F.useEffect(()=>{Ee.current=n},[n]),RX(),F.useEffect(()=>{(async()=>{if(e)try{localStorage.getItem("hasCheckedNotificationPermission_v1")||localStorage.setItem("hasCheckedNotificationPermission_v1","true")}catch{}})();const H=q=>{};return window.addEventListener("notificationListenerStatus",H),()=>window.removeEventListener("notificationListenerStatus",H)},[d,e]),F.useEffect(()=>{if(!r)return;let Q;return(async()=>{try{const{collection:q,query:ie,where:te,onSnapshot:ee}=await re(async()=>{const{collection:J,query:oe,where:X,onSnapshot:ae}=await Promise.resolve().then(()=>Ln);return{collection:J,query:oe,where:X,onSnapshot:ae}},void 0,import.meta.url),{db:he}=await re(async()=>{const{db:J}=await Promise.resolve().then(()=>Ht);return{db:J}},void 0,import.meta.url),ue=ie(q(he,"pendingSmsPopups"),te("userId","==",r.uid),te("status","==","pending"));Q=ee(ue,J=>{J.docChanges().forEach(oe=>{var X,ae;if(oe.type==="added"){if(oe.doc.metadata.hasPendingWrites)return;const ve=oe.doc.data(),pe=((ae=(X=ve.createdAt)==null?void 0:X.toMillis)==null?void 0:ae.call(X))||Date.now();if(Date.now()-pe>5*60*1e3)return;const ge=ve.payload;if(ge){if(ge.popupId&&W.current.has(ge.popupId))return;Qe({...ge,popupId:oe.doc.id}),_e(!0);try{ro()}catch{}}}else oe.type==="modified"?oe.doc.data().status!=="pending"&&Qe(pe=>(pe==null?void 0:pe.popupId)===oe.doc.id?(_e(!1),null):pe):oe.type==="removed"&&Qe(ve=>(ve==null?void 0:ve.popupId)===oe.doc.id?(_e(!1),null):ve)})})}catch(q){console.error("Error setting up popup listener:",q)}})(),()=>{Q&&Q()}},[r]);const[se,_e]=F.useState(!1),[j,Qe]=F.useState(null),[Fe,Pn]=F.useState(""),[Bn,In]=F.useState(!1),[Tn,Cn]=F.useState(!1),[Nt,ft]=F.useState(""),[at,cr]=F.useState(""),[_r,zn]=F.useState(!1),[mt,en]=F.useState(0),[wr,no]=F.useState(!1),[Pr,Pa]=F.useState(""),[_s,kn]=F.useState("");F.useEffect(()=>{try{const Q=(r==null?void 0:r.uid)||"default",H=localStorage.getItem(`sim1Number_${Q}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${Q}`)??localStorage.getItem("sim2Number")??"";Pa(H),kn(q),Se.current=H,$.current=q}catch{}},[r==null?void 0:r.uid]);const cs=async(Q,H)=>{if(!(!Q||!j))try{const{resolveWalletBySimOrSlot:q,merchantWalletService:ie,detectWalletFromSim:te}=await re(async()=>{const{resolveWalletBySimOrSlot:ue,merchantWalletService:J,detectWalletFromSim:oe}=await Promise.resolve().then(()=>Eo);return{resolveWalletBySimOrSlot:ue,merchantWalletService:J,detectWalletFromSim:oe}},void 0,import.meta.url),ee=(r==null?void 0:r.uid)||"";Qe(ue=>ue?{...ue,simNumber:Q,simLabel:H}:null);let he=await q({simNumbers:[Q],userId:ee});if(!he||!he.walletId)try{const ue=await ie.getByMerchantId(ee),J=localStorage.getItem(`wallets_${ee}`),oe=J?JSON.parse(J):[],X=(Array.isArray(oe)?oe:[]).map(ge=>({id:String((ge==null?void 0:ge.id)||""),phone:String((ge==null?void 0:ge.phone)||(ge==null?void 0:ge.msisdn)||""),isDefault:!!(ge!=null&&ge.isDefault)})),ae=(Array.isArray(ue)?ue:[]).map(ge=>({id:String((ge==null?void 0:ge.id)||""),msisdn:String((ge==null?void 0:ge.msisdn)||""),isDefault:!!(ge!=null&&ge.isDefault)})),ve=[...X,...ae],pe=await te([Q],ve);pe&&pe.walletId&&(he={walletId:pe.walletId,msisdn:pe.msisdn})}catch{}if(he&&he.walletId){Qe(ue=>ue?{...ue,walletMsisdn:he.msisdn}:null),localStorage.setItem(`selectedWallet_${ee}`,he.walletId);try{localStorage.setItem(`selectedWallet_${ee}_${s||""}`,he.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:he.walletId}}))}catch{}try{const{Preferences:ue}=await re(async()=>{const{Preferences:J}=await Promise.resolve().then(()=>Wv);return{Preferences:J}},void 0,import.meta.url);await ue.set({key:"selected_wallet_id",value:he.walletId})}catch{}}}catch{}},Ca=F.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}no(!1);try{c("/user/login")}catch{}},[c]);F.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&no(!0)}catch{!r&&e&&no(!0)}},[r,e]);const ro=F.useCallback(()=>{try{const Q=window.AudioContext||window.webkitAudioContext;if(!Q)return;const H=new Q,q=H.createOscillator(),ie=H.createGain();q.type="sine",ie.gain.setValueAtTime(0,H.currentTime),q.connect(ie),ie.connect(H.destination);const te=H.currentTime;q.frequency.setValueAtTime(800,te),ie.gain.linearRampToValueAtTime(.15,te+.02),q.start(te),q.frequency.exponentialRampToValueAtTime(1200,te+.08),ie.gain.exponentialRampToValueAtTime(1e-5,te+.32),q.stop(te+.35)}catch{}},[]),tn=Q=>{try{const H=String(Q||"").replace(/[^0-9+]/g,"");if(!H)return"";if(H.startsWith("+20")){const q=H.slice(3);return q.startsWith("1")?"0"+q:q}if(H.startsWith("0020")){const q=H.slice(4);return q.startsWith("1")?"0"+q:q}if(H.startsWith("20")){const q=H.slice(2);return q.startsWith("1")?"0"+q:q}return H.startsWith("0")?H:/^(10|11|12|15)/.test(H)?"0"+H:H}catch{return""}},ka=Q=>{try{const H=String(Q||""),q=H.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let ie=q?parseFloat(String(q[1]).replace(",",".")):0;const te=H.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let ee=te?tn(te[1]):void 0;const he=H.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),ue=H.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),J=he?String(he[1]).trim():ue?String(ue[1]).trim():void 0,oe=H.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),X=H.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),ae=H.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!ie||ie<=0){const pe=H.match(/Received\s*EGP\s*([0-9.,]+)/i)||H.match(/Received\s*EGP([0-9.,]+)/i);pe&&(ie=parseFloat(String(pe[1]).replace(/,/g,"")))}if(!ee){const pe=H.match(/from\s+([0-9+]+)/i);pe&&(ee=tn(pe[1]))}const ve=oe?String(oe[1]).trim():X?String(X[1]).trim():ae?String(ae[1]).trim():void 0;return{amount:ie,sender:ee,senderName:J,reference:ve}}catch{return{amount:0}}};F.useEffect(()=>{(async()=>{var Q;try{if(!se||!j){In(!1);return}const{auth:H}=await re(async()=>{const{auth:ee}=await Promise.resolve().then(()=>Ht);return{auth:ee}},void 0,import.meta.url),q=((Q=H.currentUser)==null?void 0:Q.uid)||"",ie=q?`selectedWallet_${q}`:"selectedWallet_default",te=localStorage.getItem(ie)||"";if(!te){In(!0);return}try{const{merchantWalletService:ee}=await re(async()=>{const{merchantWalletService:J}=await Promise.resolve().then(()=>nc);return{merchantWalletService:J}},void 0,import.meta.url),he=await ee.getById(te),ue=he&&he.defaultWithdrawCommission!=null;In(!ue)}catch{In(!0)}}catch{In(!0)}})()},[se,j]);const so=async Q=>{try{const{merchantWalletService:H,detectWalletFromSim:q}=await re(async()=>{const{merchantWalletService:X,detectWalletFromSim:ae}=await Promise.resolve().then(()=>Eo);return{merchantWalletService:X,detectWalletFromSim:ae}},void 0,import.meta.url),ie=(r==null?void 0:r.uid)||"";if(!ie)return;const te=`wallets_${ie}`,ee=typeof localStorage<"u"?localStorage.getItem(te):null,he=ee?JSON.parse(ee):[],ue=await H.getByMerchantId(ie),J=[...(Array.isArray(he)?he:[]).map(X=>({id:String((X==null?void 0:X.id)||""),phone:String((X==null?void 0:X.phone)||(X==null?void 0:X.msisdn)||""),isDefault:!!(X!=null&&X.isDefault)})),...(Array.isArray(ue)?ue:[]).map(X=>({id:String((X==null?void 0:X.id)||""),msisdn:String((X==null?void 0:X.msisdn)||""),isDefault:!!(X!=null&&X.isDefault)}))],oe=await q(Q||[],J);if(oe&&oe.walletId)try{localStorage.setItem(`selectedWallet_${ie}`,oe.walletId)}catch{}}catch{}};S.useEffect(()=>{const Q=async H=>{var q;try{const ie=(H==null?void 0:H.detail)||{},te=String(ie.text||"").trim(),ee=String(ie.title||"").trim();if(!te)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*|instapay|received\s*egp|transaction/i.test(`${ee} ${te}`)){try{Zv(ie,{toast:d})}catch{}return}const{auth:ue}=await re(async()=>{const{auth:We}=await Promise.resolve().then(()=>Ht);return{auth:We}},void 0,import.meta.url),J=((q=ue.currentUser)==null?void 0:q.uid)||"";let oe=s||"";if(!J){try{d({title:"  ",description:"   "})}catch{}return}if(!oe)try{const{doc:We,getDoc:Be}=await re(async()=>{const{doc:qt,getDoc:Tt}=await Promise.resolve().then(()=>Ln);return{doc:qt,getDoc:Tt}},void 0,import.meta.url),{db:ke}=await re(async()=>{const{db:qt}=await Promise.resolve().then(()=>Ht);return{db:qt}},void 0,import.meta.url),yt=await Be(We(ke,"profiles",J));if(yt.exists()){const qt=yt.data(),Tt=String((qt==null?void 0:qt.shopId)||"").trim();Tt&&(oe=Tt)}}catch{}let X="",ae="",ve=!1;try{const We=J||"default";X=(localStorage.getItem(`sim1Number_${We}`)??localStorage.getItem("sim1Number")??"").trim(),ae=(localStorage.getItem(`sim2Number_${We}`)??localStorage.getItem("sim2Number")??"").trim(),ve=(localStorage.getItem(`smsAutoRegisterEnabled_${We}`)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"}catch{}try{const{Preferences:We}=await re(async()=>{const{Preferences:yt}=await Promise.resolve().then(()=>Wv);return{Preferences:yt}},void 0,import.meta.url),Be=await We.get({key:"sim1_number"}),ke=await We.get({key:"sim2_number"});!X&&(Be!=null&&Be.value)&&(X=String(Be.value).trim()),!ae&&(ke!=null&&ke.value)&&(ae=String(ke.value).trim()),!X&&Se.current&&(X=Se.current),!ae&&$.current&&(ae=$.current)}catch{}let pe=[];const ge=Array.isArray(((H==null?void 0:H.detail)||{}).activeSimMsisdns)?H.detail.activeSimMsisdns.map(We=>String(We||"")):[];ge.length>0?pe=ge:pe=[X,ae].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(pe))}catch{}let Le="";try{const We=localStorage.getItem("lastSmsSimMsisdn")||"";We&&pe.includes(We)&&(Le=We)}catch{}if(Le||(Le=pe[0]||""),Le)try{localStorage.setItem("lastSmsSimMsisdn",Le)}catch{}const{resolveWalletBySimOrSlot:He,bindSlotWalletMapping:Nn,merchantWalletService:dn}=await re(async()=>{const{resolveWalletBySimOrSlot:We,bindSlotWalletMapping:Be,merchantWalletService:ke}=await Promise.resolve().then(()=>Eo);return{resolveWalletBySimOrSlot:We,bindSlotWalletMapping:Be,merchantWalletService:ke}},void 0,import.meta.url),Ke=J;let $e=await He({simNumbers:pe,userId:Ke});if(!$e&&pe.length>0){try{await so(pe)}catch{}const We=localStorage.getItem(`selectedWallet_${Ke}`)||"";if(We)try{const Be=await dn.getById(We);$e={walletId:We,msisdn:String((Be==null?void 0:Be.msisdn)||"")}}catch{}}if($e&&$e.walletId){try{localStorage.setItem(`selectedWallet_${Ke}`,$e.walletId)}catch{}try{Nn({userId:Ke,walletId:$e.walletId,msisdn:$e.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:$e.walletId}}))}catch{}try{const We=String($e.msisdn||"").trim();We&&(Le=We,localStorage.setItem("lastSmsSimMsisdn",We))}catch{}}const Me=ka(te),tr=Number(Me.amount||0);if(!tr||tr<=0){try{Zv(ie,{toast:d})}catch{}return}const pt=($e==null?void 0:$e.msisdn)||await t_(J),Lt=Me.reference||`VF-${Date.now()}`,Pt={amount:tr,sender:String(Me.sender||""),senderName:Me.senderName,text:te,simNumber:Le};if(ve)try{await Cr({...Pt,reference:Lt,walletMsisdn:pt})}catch{}else{try{const{addDoc:We,collection:Be,serverTimestamp:ke}=await re(async()=>{const{addDoc:Sn,collection:St,serverTimestamp:xe}=await Promise.resolve().then(()=>Ln);return{addDoc:Sn,collection:St,serverTimestamp:xe}},void 0,import.meta.url),{db:yt}=await re(async()=>{const{db:Sn}=await Promise.resolve().then(()=>Ht);return{db:Sn}},void 0,import.meta.url),qt=await We(Be(yt,"pendingSmsPopups"),{userId:J,shopId:oe,payload:{...Pt,reference:Lt,walletMsisdn:pt,sim1Number:X,sim2Number:ae},status:"pending",createdAt:ke()}),Tt=/Received\s*EGP/i.test(String(te))?"InstaPay":"VF-Cash";Qe({...Pt,reference:Lt,providerLabel:Tt,walletMsisdn:pt,popupId:qt.id})}catch{const We=/Received\s*EGP/i.test(String(te))?"InstaPay":"VF-Cash";Qe({...Pt,reference:Lt,providerLabel:We,walletMsisdn:pt})}_e(!0);try{ro()}catch{}}}catch{try{Zv((H==null?void 0:H.detail)||{},{toast:d})}catch{}}};try{window.addEventListener("vfNotificationReceived",Q)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",Q)}catch{}}},[d,s]),S.useEffect(()=>{const Q=async H=>{try{const q=(H==null?void 0:H.detail)||{},ie=String(q.text||"");if(!ie||!((n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true"))return;const ee=/Received\s*EGP/i.test(ie),he=DX(ie,String(q.sender||q.msisdn||""));if(!ee&&!he)return;const ue=(r==null?void 0:r.uid)||"";if(!ue)return;let J=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const oe=Ee.current;let X=(oe==null?void 0:oe.sim1Number)||"",ae=(oe==null?void 0:oe.sim2Number)||"";X||(X=localStorage.getItem(`sim1Number_${ue}`)||localStorage.getItem("sim1Number")||""),ae||(ae=localStorage.getItem(`sim2Number_${ue}`)||localStorage.getItem("sim2Number")||""),!X&&Se.current&&(X=Se.current),!ae&&$.current&&(ae=$.current),X=String(X).trim(),ae=String(ae).trim();const ve=String(q.msisdn||q.sender||""),pe=tn(ve),ge=ka(ie);let Le=Number(ge.amount||0),He=ge.sender||pe||String(q.sender||""),Nn=ge.senderName,dn=ge.reference||"";if(ee){const Be=String(ie).match(/Received\s*EGP\s*([0-9.,]+)/i);Be&&(Le=parseFloat(String(Be[1]).replace(/,/g,"")));const ke=String(ie).match(/from\s+([0-9+]+)/i);ke&&(He=tn(ke[1]));const yt=String(ie).match(/Ref:\s*([A-Za-z0-9\-]+)/i);yt&&(dn=String(yt[1]).trim())}if(!Le||Le<=0)return;let Ke="",$e="";const Me=[X,ae].filter(Boolean).map(Be=>tn(Be));if(pe&&Me.includes(pe)&&(Ke=pe,Ke===tn(X)?$e="SIM 1":Ke===tn(ae)&&($e="SIM 2")),!$e){const Be=q==null?void 0:q.slot,ke=Be!=null?Number(Be):-1;ke===0?($e="SIM 1",Ke=X?tn(X):""):ke===1&&($e="SIM 2",Ke=ae?tn(ae):"")}!$e&&Ke&&(Ke===tn(X)?$e="SIM 1":Ke===tn(ae)&&($e="SIM 2"));const tr=ee?"InstaPay":"VF-Cash",pt={amount:Le,sender:He,senderName:Nn,text:ie,simNumber:Ke,simLabel:$e},Lt=ue?`smsAutoRegisterEnabled_${ue}`:"smsAutoRegisterEnabled",We=(localStorage.getItem(Lt)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!We){Qe({...pt,reference:dn,providerLabel:tr,walletMsisdn:""}),_e(!0);try{ro()}catch{}}(async()=>{try{const{resolveWalletBySimOrSlot:Be,bindSlotWalletMapping:ke,merchantWalletService:yt}=await re(async()=>{const{resolveWalletBySimOrSlot:St,bindSlotWalletMapping:xe,merchantWalletService:rt}=await Promise.resolve().then(()=>Eo);return{resolveWalletBySimOrSlot:St,bindSlotWalletMapping:xe,merchantWalletService:rt}},void 0,import.meta.url);let qt=Array.isArray(q.activeSimMsisdns)&&q.activeSimMsisdns.length>0?q.activeSimMsisdns.map(St=>tn(String(St||""))):pe?[pe]:[];qt.length===0&&(qt=[tn(X),tn(ae)].filter(Boolean));let Tt=await Be({simNumbers:qt,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),userId:ue});if(!Tt&&qt.length>0){try{await so(qt)}catch{}const St=localStorage.getItem(`selectedWallet_${ue}`)||"";if(St)try{const xe=await yt.getById(St);Tt={walletId:St,msisdn:String((xe==null?void 0:xe.msisdn)||"")}}catch{}}if(Tt&&Tt.walletId){try{localStorage.setItem(`selectedWallet_${ue}`,Tt.walletId)}catch{}try{ke({userId:ue,subId:Number((q==null?void 0:q.subId)||-1),slotIndex:Number((q==null?void 0:q.slot)||-1),walletId:Tt.walletId,msisdn:Tt.msisdn})}catch{}}const Sn=(Tt==null?void 0:Tt.msisdn)||(ue?await t_(ue):"");if(Qe(St=>St?{...St,walletMsisdn:Sn}:null),We)try{await Cr({...pt,reference:dn,walletMsisdn:Sn})}catch{}else try{const{addDoc:St,collection:xe,serverTimestamp:rt}=await re(async()=>{const{addDoc:ct,collection:Ye,serverTimestamp:hn}=await Promise.resolve().then(()=>Ln);return{addDoc:ct,collection:Ye,serverTimestamp:hn}},void 0,import.meta.url),{db:nt}=await re(async()=>{const{db:ct}=await Promise.resolve().then(()=>Ht);return{db:ct}},void 0,import.meta.url),It=await St(xe(nt,"pendingSmsPopups"),{userId:ue,shopId:J,payload:{...pt,reference:dn,walletMsisdn:Sn,sim1Number:X,sim2Number:ae},status:"pending",createdAt:rt()});Qe(ct=>ct?{...ct,popupId:It.id}:null)}catch{}}catch(Be){console.error("Background SMS processing error",Be)}})()}catch(q){console.error("SMS Handler Error",q)}};try{window.addEventListener("mobileSmsReceived",Q)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",Q)}catch{}}},[d,s,n,r]),S.useEffect(()=>{},[d,s]),S.useEffect(()=>{},[d,s]);const Cr=async Q=>{var H,q,ie;try{const te=Q||j;if(!te)return;const{amount:ee,sender:he,text:ue,simNumber:J,senderName:oe}=te,X=String(ue||"");let ae=Number(ee||0);const ve=typeof(Q==null?void 0:Q.deferredMode)=="boolean"?Q.deferredMode:Tn,pe=(Q==null?void 0:Q.debtorName)??Nt,ge=(Q==null?void 0:Q.debtorNote)??at;try{_e(!1)}catch{}try{}catch{}const Le=/Received\s*EGP/i.test(X)?"instapay":"vodafone_cash";if(!ae||ae<=0){const xe=X.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(xe&&(ae=parseFloat(String(xe[1]).replace(",","."))),!ae||ae<=0){const rt=X.match(/Received\s*EGP\s*([0-9.,]+)/i)||X.match(/Received\s*EGP([0-9.,]+)/i);rt&&(ae=parseFloat(String(rt[1]).replace(/,/g,"")))}}let He=String(he||"").trim();if(!He){const xe=X.match(/\s+\s+(\d+)/i);He=xe?tn(xe[1]):""}let Nn=String((te==null?void 0:te.reference)||"").trim();if(!Nn){const xe=X.match(/\s*\s*([\d\.]+)/i);Nn=xe?String(xe[1]).trim():String(Date.now())}if(!ae||ae<=0){try{d({title:"      ",variant:"destructive"})}catch{}return}const{auth:dn}=await re(async()=>{const{auth:xe}=await Promise.resolve().then(()=>Ht);return{auth:xe}},void 0,import.meta.url),Ke=((H=dn.currentUser)==null?void 0:H.uid)||"";let $e=s||"";if(!Ke){try{d({title:"  ",description:"   "})}catch{}return}if(!$e)try{const{doc:xe,getDoc:rt}=await re(async()=>{const{doc:ct,getDoc:Ye}=await Promise.resolve().then(()=>Ln);return{doc:ct,getDoc:Ye}},void 0,import.meta.url),{db:nt}=await re(async()=>{const{db:ct}=await Promise.resolve().then(()=>Ht);return{db:ct}},void 0,import.meta.url),It=await rt(xe(nt,"profiles",Ke));if(It.exists()){const ct=It.data(),Ye=String((ct==null?void 0:ct.shopId)||"").trim();Ye&&($e=Ye)}}catch{}if(!$e){try{d({title:"  ",description:"   "})}catch{}return}let Me="";if(J)try{const{detectWalletFromSim:xe}=await re(async()=>{const{detectWalletFromSim:Je}=await Promise.resolve().then(()=>Eo);return{detectWalletFromSim:Je}},void 0,import.meta.url),{merchantWalletService:rt}=await re(async()=>{const{merchantWalletService:Je}=await Promise.resolve().then(()=>nc);return{merchantWalletService:Je}},void 0,import.meta.url),nt=await rt.getByMerchantId(Ke),It=localStorage.getItem(`wallets_${Ke}`),ct=It?JSON.parse(It):[],Ye=(Array.isArray(ct)?ct:[]).map(Je=>({id:String((Je==null?void 0:Je.id)||""),phone:String((Je==null?void 0:Je.phone)||(Je==null?void 0:Je.msisdn)||""),isDefault:!!(Je!=null&&Je.isDefault)})),hn=(Array.isArray(nt)?nt:[]).map(Je=>({id:String((Je==null?void 0:Je.id)||""),msisdn:String((Je==null?void 0:Je.msisdn)||""),isDefault:!!(Je!=null&&Je.isDefault)})),nr=[...Ye,...hn],Wn=await xe([J],nr);Wn&&Wn.walletId&&(Me=Wn.walletId)}catch{}if(Me||(Me=await OX(Ke)),!Me)try{const{doc:xe,getDoc:rt}=await re(async()=>{const{doc:Ze,getDoc:Nr}=await Promise.resolve().then(()=>Ln);return{doc:Ze,getDoc:Nr}},void 0,import.meta.url),{db:nt}=await re(async()=>{const{db:Ze}=await Promise.resolve().then(()=>Ht);return{db:Ze}},void 0,import.meta.url);let It="",ct="";try{const Ze=await rt(xe(nt,"profiles",Ke));if(Ze.exists()){const Nr=Ze.data();It=String((Nr==null?void 0:Nr.sim1Number)||"").trim(),ct=String((Nr==null?void 0:Nr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:Ye}=await re(async()=>{const{detectWalletFromSim:Ze}=await Promise.resolve().then(()=>Eo);return{detectWalletFromSim:Ze}},void 0,import.meta.url),{merchantWalletService:hn}=await re(async()=>{const{merchantWalletService:Ze}=await Promise.resolve().then(()=>nc);return{merchantWalletService:Ze}},void 0,import.meta.url),nr=`wallets_${Ke}`,Wn=localStorage.getItem(nr),Je=Wn?JSON.parse(Wn):[],nn=await hn.getByMerchantId(Ke),rn=(Array.isArray(Je)?Je:[]).map(Ze=>({id:String((Ze==null?void 0:Ze.id)||""),phone:String((Ze==null?void 0:Ze.phone)||(Ze==null?void 0:Ze.msisdn)||""),isDefault:!!(Ze!=null&&Ze.isDefault)})),fn=(Array.isArray(nn)?nn:[]).map(Ze=>({id:String((Ze==null?void 0:Ze.id)||""),msisdn:String((Ze==null?void 0:Ze.msisdn)||""),isDefault:!!(Ze!=null&&Ze.isDefault)})),kr=[...rn,...fn],Dn=J||String(localStorage.getItem("lastSmsSimMsisdn")||"");let bn=(Dn?[Dn]:[]).filter(Boolean);bn.length===0&&(bn=[It,ct].filter(Boolean));const ut=await Ye(bn,kr);if(ut&&ut.walletId){Me=ut.walletId;try{localStorage.setItem(`selectedWallet_${Ke}`,Me)}catch{}}}catch{}if(!Me){try{d({title:"   ",description:"       "})}catch{}return}try{const xe=Ke;try{localStorage.setItem(`selectedWallet_${xe}`,Me)}catch{}try{localStorage.setItem(`selectedWallet_${xe}_${$e}`,Me)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Me}}))}catch{}try{const{Preferences:rt}=await re(async()=>{const{Preferences:nt}=await Promise.resolve().then(()=>Wv);return{Preferences:nt}},void 0,import.meta.url);await rt.set({key:"selected_wallet_id",value:Me}),await rt.set({key:"current_user_id",value:xe})}catch{}}catch{}const{recordAutoTransaction:tr,userDataService:pt}=await re(async()=>{const{recordAutoTransaction:xe,userDataService:rt}=await Promise.resolve().then(()=>nc);return{recordAutoTransaction:xe,userDataService:rt}},void 0,import.meta.url),Lt=Fe&&Fe.trim()!==""?Math.max(0,parseFloat(Fe)):null;let Pt=0;if(Lt!=null)Pt=Lt;else try{const{merchantWalletService:xe}=await re(async()=>{const{merchantWalletService:It}=await Promise.resolve().then(()=>nc);return{merchantWalletService:It}},void 0,import.meta.url),rt=await xe.getById(String(Me)),nt=rt&&rt.defaultWithdrawCommission;if(nt!=null)Pt=Math.round((Number(nt)||0)*Number(ae)/1e3*100)/100;else{const{calculateCommission:It}=await re(async()=>{const{calculateCommission:ct}=await Promise.resolve().then(()=>el);return{calculateCommission:ct}},void 0,import.meta.url);Pt=It(Number(ae),"receive")}}catch{const{calculateCommission:xe}=await re(async()=>{const{calculateCommission:rt}=await Promise.resolve().then(()=>el);return{calculateCommission:rt}},void 0,import.meta.url);Pt=xe(Number(ae),"receive")}try{const{walletDailyLimitsService:xe}=await re(async()=>{const{walletDailyLimitsService:nt}=await Promise.resolve().then(()=>o0);return{walletDailyLimitsService:nt}},void 0,import.meta.url),rt=await xe.canPerformOperation(String(Me),Math.max(0,Number(ae||0)),"withdraw");if(!rt.canPerform)try{d({title:"  ",description:String(rt.message||"      "),variant:"destructive"})}catch{}}catch{}const We=Nn||`${X}|${Date.now()}`,Be=J||String(localStorage.getItem("lastSmsSimMsisdn")||""),yt=String((te==null?void 0:te.walletMsisdn)||"").trim()||Be||await t_(Ke)||"",qt=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(ve)try{const xe=await pt.getUserData(Ke),rt=Array.isArray(xe==null?void 0:xe.debts)?xe.debts:[],nt=qt==="add"?Number(ae)+Number(Pt):Number(ae),It={id:`DEBT-${Date.now()}`,debtorName:pe||oe||He||"",amount:Math.round(Number(nt)*100)/100,reason:ge||"  VodafoneCash",customerId:void 0,mobile:He,status:"pending",createdAt:new Date},ct=[It,...rt];await pt.updateUserData(Ke,{debts:ct});try{const Ye=Pt;await pt.saveUserTransaction(Ke,{type:"withdraw",amount:ae,withdrawnAmount:ae,commission:Ye,status:"pending",createdAt:new Date,senderMsisdn:He,receiverMsisdn:yt,senderName:oe,walletId:Me,fromWallet:Me,lineId:yt,provider:Le,reference:We,transactionId:`DEFER-${Date.now()}`,linkedDebtId:It.id})}catch{}try{const Ye=(Q==null?void 0:Q.popupId)||(j==null?void 0:j.popupId)||"";if(Ye){const{doc:hn,updateDoc:nr,serverTimestamp:Wn}=await re(async()=>{const{doc:nn,updateDoc:rn,serverTimestamp:fn}=await Promise.resolve().then(()=>Ln);return{doc:nn,updateDoc:rn,serverTimestamp:fn}},void 0,import.meta.url),{db:Je}=await re(async()=>{const{db:nn}=await Promise.resolve().then(()=>Ht);return{db:nn}},void 0,import.meta.url);try{await nr(hn(Je,"pendingSmsPopups",Ye),{status:"confirmed",confirmedAt:Wn()})}catch{}try{(ie=(q=W.current)==null?void 0:q.add)==null||ie.call(q,Ye);const nn=Array.from(W.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(nn))}catch{}}}catch{}try{d({title:"  ",description:"      "})}catch{}return}catch{}_e(!1),Qe(null);try{d({title:"  ..."})}catch{}const Tt=`TX-${Date.now()}`,Sn=Math.max(0,Number(ae||0)),St=Math.max(0,Pt);try{const xe=`cashBalance_${Ke}_${$e||"main"}`,rt=`walletBalances_${Ke}_${$e||"main"}`,nt=localStorage.getItem(xe),It=localStorage.getItem(rt);let ct=nt?parseFloat(nt):0,Ye=It?JSON.parse(It):{};Ye[Me]=(Number(Ye[Me])||0)+Sn,ct=ct-Sn+St;const hn={id:Tt,type:"withdraw",senderPhone:He,receiverPhone:yt,amount:ae,status:"completed",createdAt:new Date,withdrawnAmount:ae,commission:St,fromWallet:Me,senderName:oe,provider:Le,reference:We,shopName:"  ()"};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{delta:{amount:Sn,commission:St,walletId:Me,type:"withdraw"},limitUpdate:{walletId:Me,amount:Sn,type:"withdraw"}}}))}catch(xe){console.error("Optimistic update failed",xe)}(async()=>{var rt,nt,It,ct;let xe="";try{xe=await tr({shopId:$e,lineId:yt,walletId:Me,amount:ae,note:"SMS-ManualConfirm",provider:Le,createdBy:Ke,senderMsisdn:He,senderName:oe,reference:We,text:X});try{const Ye=(Q==null?void 0:Q.popupId)||(j==null?void 0:j.popupId)||"";if(Ye){const{doc:hn,updateDoc:nr,serverTimestamp:Wn}=await re(async()=>{const{doc:nn,updateDoc:rn,serverTimestamp:fn}=await Promise.resolve().then(()=>Ln);return{doc:nn,updateDoc:rn,serverTimestamp:fn}},void 0,import.meta.url),{db:Je}=await re(async()=>{const{db:nn}=await Promise.resolve().then(()=>Ht);return{db:nn}},void 0,import.meta.url);try{await nr(hn(Je,"pendingSmsPopups",Ye),{status:"confirmed",confirmedAt:Wn()})}catch{}try{(nt=(rt=W.current)==null?void 0:rt.add)==null||nt.call(rt,Ye);const nn=Array.from(W.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(nn))}catch{}}}catch{}}catch(Ye){console.error(Ye)}try{const Ye=Math.max(0,Number(ae||0)),{doc:hn,getDoc:nr,updateDoc:Wn}=await re(async()=>{const{doc:bn,getDoc:ut,updateDoc:Ze}=await Promise.resolve().then(()=>Ln);return{doc:bn,getDoc:ut,updateDoc:Ze}},void 0,import.meta.url),{db:Je}=await re(async()=>{const{db:bn}=await Promise.resolve().then(()=>Ht);return{db:bn}},void 0,import.meta.url),nn=hn(Je,"dashboardData",$e),rn=await nr(nn);let fn=rn.exists()?Number(((It=rn.data())==null?void 0:It.cashBalance)||0):0;const kr=rn.exists()?((ct=rn.data())==null?void 0:ct.walletBalances)||{}:{},Dn=Number(kr[Me]||0);kr[Me]=Dn+Ye,fn=fn-Ye+Math.max(0,Pt),await Wn(nn,{cashBalance:fn,walletBalances:kr,lastUpdated:new Date().toISOString()});try{const bn={id:xe||`TX-${Date.now()}`,type:"withdraw",senderPhone:He,receiverPhone:yt,amount:ae,status:"completed",createdAt:new Date,withdrawnAmount:ae,commission:Pt,fromWallet:Me,senderName:oe,provider:Le,reference:We,shopName:" "};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{}}))}catch{}try{const{walletDailyLimitsService:bn}=await re(async()=>{const{walletDailyLimitsService:ut}=await Promise.resolve().then(()=>o0);return{walletDailyLimitsService:ut}},void 0,import.meta.url);await bn.updateUsage(String(Me),Ye,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Me)}}))}catch{}}catch{}}catch{}(async()=>{try{const Ye=Pt;await pt.saveUserTransaction(Ke,{type:"withdraw",amount:ae,withdrawnAmount:ae,commission:Ye,status:"completed",createdAt:new Date,senderMsisdn:He,receiverMsisdn:yt,senderName:oe,walletId:Me,fromWallet:Me,lineId:yt,provider:Le,reference:We,transactionId:xe||Tt});try{window.dispatchEvent(new CustomEvent("transaction-created"))}catch{}}catch{}})(),Qa.invalidateQueries({queryKey:["dashboardData"]}),Qa.invalidateQueries({queryKey:["transactions"]}),Qa.invalidateQueries({queryKey:["walletDailyLimits"]}),Qa.invalidateQueries({queryKey:["wallets"]}),Qa.invalidateQueries({queryKey:["user-stats"]});try{d({title:`     ${xe||Tt}`})}catch{}})()}catch(te){try{d({title:String((te==null?void 0:te.message)||"  "),variant:"destructive"})}catch{}}};S.useEffect(()=>{try{xR.start()}catch{}return()=>{try{xR.stop()}catch{}}},[]),S.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const Q=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),H=String(localStorage.getItem("android_installed_version")||"").trim(),q=localStorage.getItem("android_last_ack_code"),ie=localStorage.getItem("android_installed_code"),te=q?Number(q):null,ee=ie?Number(ie):null,he=Q||H,ue=te??ee??null;he&&L(he),ue&&O(ue);const{doc:J,getDoc:oe}=await re(async()=>{const{doc:ve,getDoc:pe}=await Promise.resolve().then(()=>Ln);return{doc:ve,getDoc:pe}},void 0,import.meta.url),{db:X}=await re(async()=>{const{db:ve}=await Promise.resolve().then(()=>Ht);return{db:ve}},void 0,import.meta.url),ae=await oe(J(X,"profiles",r.uid));if(ae.exists()){const ve=ae.data(),pe=String((ve==null?void 0:ve.lastAckAndroidVersion)||(ve==null?void 0:ve.androidInstalledVersion)||(ve==null?void 0:ve.lastAckUpdateId)||"").trim(),ge=typeof(ve==null?void 0:ve.lastAckAndroidCode)=="number"?ve.lastAckAndroidCode:typeof(ve==null?void 0:ve.androidInstalledCode)=="number"?ve.androidInstalledCode:null,Le=(Nn,dn)=>{const Ke=String(Nn||"").replace(/^v/i,"").split(".").map(Me=>parseInt(Me,10)||0),$e=String(dn||"").replace(/^v/i,"").split(".").map(Me=>parseInt(Me,10)||0);for(let Me=0;Me<Math.max(Ke.length,$e.length);Me++){const tr=Ke[Me]||0,pt=$e[Me]||0;if(tr>pt)return 1;if(tr<pt)return-1}return 0};let He=!1;if(typeof ge=="number"&&typeof ue=="number"?He=ge>ue:typeof ge=="number"&&ue==null?He=!0:pe&&he?He=Le(pe,he)>0:pe&&!he&&(He=!0),He){if(pe){try{localStorage.setItem("android_installed_version",pe)}catch{}L(pe)}if(typeof ge=="number"){try{localStorage.setItem("android_installed_code",String(ge))}catch{}O(ge)}}else if(typeof ge=="number"&&ue==null){try{localStorage.setItem("android_installed_code",String(ge))}catch{}O(ge)}}}catch{}})()},[r==null?void 0:r.uid]),S.useEffect(()=>{try{const H=String((window==null?void 0:window.__nativeAppVersion)||"").trim();H&&T(H);const q=window==null?void 0:window.__nativeAppVersionCode;if(typeof q=="number"){C(q);try{localStorage.setItem("android_installed_code",String(q))}catch{}}try{H&&localStorage.setItem("android_installed_version",H)}catch{}}catch{}const Q=H=>{var q,ie;try{const te=String((((q=H==null?void 0:H.detail)==null?void 0:q.version)??"")||"").trim(),ee=(ie=H==null?void 0:H.detail)==null?void 0:ie.code;te&&T(te);try{te&&localStorage.setItem("android_installed_version",te)}catch{}typeof ee=="number"&&C(ee)}catch{}};try{window.addEventListener("native-app-version",Q)}catch{}return()=>{try{window.removeEventListener("native-app-version",Q)}catch{}}},[]),S.useEffect(()=>{try{const Q=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",H=String(A||"").trim();if(!Q||!H||!(r!=null&&r.uid))return;(async()=>{try{const{doc:q,setDoc:ie,serverTimestamp:te}=await re(async()=>{const{doc:he,setDoc:ue,serverTimestamp:J}=await Promise.resolve().then(()=>Ln);return{doc:he,setDoc:ue,serverTimestamp:J}},void 0,import.meta.url),{db:ee}=await re(async()=>{const{db:he}=await Promise.resolve().then(()=>Ht);return{db:he}},void 0,import.meta.url);await ie(q(ee,"profiles",r.uid),{androidInstalledVersion:H,androidInstalledAt:te()},{merge:!0});try{localStorage.setItem("android_installed_version",H)}catch{}}catch{}})()}catch{}},[A,r==null?void 0:r.uid]),S.useEffect(()=>{Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"&&(async()=>{try{await re(()=>import("./ProtectedUserDashboard-CAuXbLOR.js"),__vite__mapDeps([31,32,19,27,28]),import.meta.url),await re(()=>import("./UserDashboardPage-K7g7RnIK.js"),__vite__mapDeps([56,36,14,27,28,22,5,39,38,24,4,45,30,43,34,35,44,41,49,9,53,3,7,29,46,32,18,37,51,6]),import.meta.url),await re(()=>Promise.resolve().then(()=>FY),void 0,import.meta.url),await re(()=>import("./ProfileSettingsPage-C5Zbs_B5.js"),__vite__mapDeps([50,44,51,27,28,39,4,47,9,6,46]),import.meta.url),await re(()=>import("./TransactionsPage-oyRuoFSp.js"),__vite__mapDeps([52,14,36,53,35,45,27,28,3,38,9,7,29,46,30,4,49]),import.meta.url)}catch{}})()},[]),S.useEffect(()=>{if(!t)return;const Q=document.createElement("style");Q.setAttribute("data-disable-pull-to-refresh","true"),Q.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(Q);let H=0,q=null;const ie=ee=>{var he,ue;H=((ue=(he=ee.touches)==null?void 0:he[0])==null?void 0:ue.clientY)||0,q=ee.target},te=ee=>{var ve,pe;const he=((pe=(ve=ee.touches)==null?void 0:ve[0])==null?void 0:pe.clientY)||0,ue=document.scrollingElement||document.documentElement,J=ue.scrollTop||window.scrollY||0,oe=ue.scrollHeight-ue.clientHeight||0,X=q||null,ae=(()=>{let ge=X;for(;ge&&ge!==document.body;){const He=window.getComputedStyle(ge).overflowY;if((He==="auto"||He==="scroll")&&ge.scrollHeight>ge.clientHeight)return!0;ge=ge.parentElement}return!1})();!ae&&J<=0&&he>H&&ee.cancelable&&ee.preventDefault(),!ae&&J>=oe&&he<H&&ee.cancelable&&ee.preventDefault()};return document.addEventListener("touchstart",ie,{passive:!0}),document.addEventListener("touchmove",te,{passive:!1}),()=>{document.removeEventListener("touchstart",ie),document.removeEventListener("touchmove",te);try{document.head.removeChild(Q)}catch{}}},[t]),S.useEffect(()=>{if(!((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"))return;try{const ie=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=ie,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const ie=(window.location.assign||(te=>{})).bind(window.location);window.__originalAssign=ie,window.location.assign=te=>{try{if(String(te||"").startsWith("/user/dashboard")){c("/user/dashboard");return}}catch{}try{ie(te)}catch{}}}catch{}let H=null,q=!1;return(async()=>{try{const{listenAndroidUpdates:ie}=await re(async()=>{const{listenAndroidUpdates:te}=await Promise.resolve().then(()=>oX);return{listenAndroidUpdates:te}},void 0,import.meta.url);H=ie(te=>{if(q)return;const ee=String((te==null?void 0:te.version)||"").trim(),he=String((te==null?void 0:te.url)||"").trim(),ue=String((te==null?void 0:te.notes)||"").trim(),J=!!(te!=null&&te.force),oe=typeof(te==null?void 0:te.code)=="number"?te.code:void 0,X=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),ae=String(P||X||"").trim(),ve=(pt,Lt)=>{const Pt=String(pt||"").replace(/^v/i,"").split(".").map(Be=>parseInt(Be,10)||0),We=String(Lt||"").replace(/^v/i,"").split(".").map(Be=>parseInt(Be,10)||0);for(let Be=0;Be<Math.max(Pt.length,We.length);Be++){const ke=Pt[Be]||0,yt=We[Be]||0;if(ke>yt)return 1;if(ke<yt)return-1}return 0},pe=String(A||"").trim(),ge=String(localStorage.getItem("android_installed_version")||"").trim(),Le=localStorage.getItem("android_installed_code"),He=Le?Number(Le):null,Nn=[R,D,He].filter(pt=>typeof pt=="number").reduce((pt,Lt)=>pt===void 0?Lt:Math.max(pt,Lt),void 0),dn=typeof oe=="number"&&typeof Nn=="number"?oe>Nn:void 0,Ke=(()=>{const pt=[pe,ae,ge].filter(Boolean);return pt.length===0?"":pt.reduce((Lt,Pt)=>ve(Pt,Lt)>0?Pt:Lt)})(),$e=ve(ee,Ke)>0;if(!!he&&(!!ee||typeof oe=="number")&&(dn!==void 0?dn:$e)){const pt="   ",Lt=`${ue?ue+`
`:""} : ${ee}`;E({title:pt,message:Lt,apkUrl:he,force:J,versionId:ee,versionCode:oe}),f(!0)}else try{f(!1)}catch{}})}catch{}})(),()=>{q=!0;try{typeof H=="function"&&H()}catch{}}},[P,A]),S.useEffect(()=>{const Q=q=>{const ie=(q==null?void 0:q.detail)||{};try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{B.current&&(clearInterval(B.current),B.current=null)}catch{}v(!0),_({percent:ie.percent??null,downloaded:ie.downloaded??0,total:ie.total??0})},H=()=>{try{k.current&&(clearTimeout(k.current),k.current=null)}catch{}try{B.current&&(clearInterval(B.current),B.current=null)}catch{}v(!1),x(!0),_({percent:100,downloaded:((w==null?void 0:w.total)??(w==null?void 0:w.downloaded)??0)||0,total:(w==null?void 0:w.total)??0});try{const q=String((m==null?void 0:m.versionId)||"").trim();if(q){try{localStorage.setItem("android_last_ack_version_id",q)}catch{}try{localStorage.setItem("android_installed_version",q)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:ie,setDoc:te,serverTimestamp:ee}=await re(async()=>{const{doc:ue,setDoc:J,serverTimestamp:oe}=await Promise.resolve().then(()=>Ln);return{doc:ue,setDoc:J,serverTimestamp:oe}},void 0,import.meta.url),{db:he}=await re(async()=>{const{db:ue}=await Promise.resolve().then(()=>Ht);return{db:ue}},void 0,import.meta.url);await te(ie(he,"profiles",r.uid),{lastAckAndroidVersion:q,androidInstalledVersion:q,lastAckAt:ee(),androidInstalledAt:ee()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",Q),window.addEventListener("androidUpdateDownloaded",H),()=>{window.removeEventListener("androidUpdateProgress",Q),window.removeEventListener("androidUpdateDownloaded",H)}},[]),S.useEffect(()=>{let Q=!0;return(async()=>{var H;try{const{auth:q}=await re(async()=>{const{auth:ve}=await Promise.resolve().then(()=>Ht);return{auth:ve}},void 0,import.meta.url),ie=((H=q.currentUser)==null?void 0:H.uid)||"";if(!ie)return;const{db:te}=await re(async()=>{const{db:ve}=await Promise.resolve().then(()=>Ht);return{db:ve}},void 0,import.meta.url),{collection:ee,query:he,where:ue,onSnapshot:J,deleteDoc:oe}=await re(async()=>{const{collection:ve,query:pe,where:ge,onSnapshot:Le,deleteDoc:He}=await Promise.resolve().then(()=>Ln);return{collection:ve,query:pe,where:ge,onSnapshot:Le,deleteDoc:He}},void 0,import.meta.url),X=he(ee(te,"pendingSmsPopups"),ue("userId","==",ie),ue("status","==","pending"),limit(20)),ae=J(X,ve=>{var pe,ge,Le,He,Nn,dn,Ke,$e,Me,tr,pt,Lt,Pt;if(Q)try{const We=typeof ve.docChanges=="function"?ve.docChanges():[];console.log("Web Popup: Snapshot received",We.length,"changes");for(const Be of We){if(Be.type==="added"){const ke=Be.doc.data()||{},yt=Be.doc.id;console.log("Web Popup: Received document",yt,ke),(ge=(pe=W.current)==null?void 0:pe.has)!=null&&ge.call(pe,yt)&&console.log("Web Popup: ID is in suppressed list",yt);try{const Dn=ke.createdAt||ke.timestamp||(ke.payload||{}).createdAt||(ke.payload||{}).timestamp,bn=Dn&&typeof Dn.toMillis=="function"?Dn.toMillis():typeof ke.createdAtMs=="number"?ke.createdAtMs:typeof(ke.payload||{}).createdAtMs=="number"?(ke.payload||{}).createdAtMs:null;if(typeof bn=="number"&&bn<Date.now()-36e5){console.log("Web Popup: Cleaning up old popup",yt),oe(Be.doc.ref).catch(()=>{});continue}}catch{}let qt=ke.amount??((Le=ke.payload)==null?void 0:Le.amount)??null,Tt=ke.sender??((He=ke.payload)==null?void 0:He.sender)??"";const Sn=ke.senderName??((Nn=ke.payload)==null?void 0:Nn.senderName)??"";let St=ke.reference??((dn=ke.payload)==null?void 0:dn.reference)??"";const xe=ke.text??((Ke=ke.payload)==null?void 0:Ke.text)??"";let rt=ke.simNumber??(($e=ke.payload)==null?void 0:$e.simNumber)??"",nt=ke.simSlot??((Me=ke.payload)==null?void 0:Me.simSlot);nt==null&&(nt=ke.slot??((tr=ke.payload)==null?void 0:tr.slot)),nt==null&&(nt=ke.sim_slot??((pt=ke.payload)==null?void 0:pt.sim_slot)),nt==null&&(nt=ke.lineId??((Lt=ke.payload)==null?void 0:Lt.lineId));const It=nt!=null?String(nt):"",ct=(r==null?void 0:r.uid)||"default";let Ye=localStorage.getItem(`sim1Number_${ct}`)??localStorage.getItem("sim1Number")??"",hn=localStorage.getItem(`sim2Number_${ct}`)??localStorage.getItem("sim2Number")??"";const nr=ke.payload||{},Wn=nr.sim1Number||nr.sim1||ke.sim1Number||"",Je=nr.sim2Number||nr.sim2||ke.sim2Number||"";Wn&&(Ye=String(Wn).trim(),Pa(Ye)),Je&&(hn=String(Je).trim(),kn(hn));let nn=rt,rn="";It==="1"?(rn="SIM 2",hn&&(nn=hn)):(It==="0"||!It)&&(rn="SIM 1",Ye&&(nn=Ye));const fn=ke.walletMsisdn??((Pt=ke.payload)==null?void 0:Pt.walletMsisdn)??"";let kr="VF-Cash";if(/Received\s*EGP/i.test(String(xe))){kr="InstaPay";const Dn=String(xe).match(/Received\s*EGP\s*([0-9.,]+)/i);Dn&&(qt=parseFloat(String(Dn[1]).replace(/,/g,"")));const bn=String(xe).match(/from\s+([0-9+]+)/i);bn&&(Tt=tn(bn[1]));const ut=String(xe).match(/Ref:\s*([A-Za-z0-9\-]+)/i);ut&&(St=String(ut[1]).trim())}if(Q){console.log("Web Popup: Opening modal for",yt),Qe({amount:Number(qt||0),sender:String(Tt||""),senderName:Sn,reference:String(St||""),text:xe,simNumber:nn,simLabel:rn,walletMsisdn:fn,providerLabel:kr,popupId:yt,sim1Number:Ye,sim2Number:hn}),_e(!0);try{d({title:" ",description:`   ${qt}  ${Tt}`})}catch{}try{ro()}catch(Dn){console.error("PlayBell failed",Dn)}}}Be.type}}catch{}});de.current=ae}catch{}})(),()=>{Q=!1;try{const H=de.current;typeof H=="function"&&H()}catch{}}},[r==null?void 0:r.uid]),S.useEffect(()=>{const Q=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",H=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(Q||H)return;let q=!1;return(async()=>{try{const ie="0.0.0",te=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!te.ok)return;const ee=await te.json(),he=String((ee==null?void 0:ee.version)||"0.0.0"),ue=!!(ee!=null&&ee.force);if(!q&&((oe,X)=>{const ae=String(oe).split(".").map(pe=>parseInt(pe,10)||0),ve=String(X).split(".").map(pe=>parseInt(pe,10)||0);for(let pe=0;pe<Math.max(ae.length,ve.length);pe++){const ge=ae[pe]||0,Le=ve[pe]||0;if(ge>Le)return 1;if(ge<Le)return-1}return 0})(he,ie)>0){if(ue){try{window.location.reload()}catch{}return}try{d({title:"  ",description:` ${he}      `})}catch{}}}catch{}})(),()=>{q=!0}},[]),S.useEffect(()=>{if(se)try{const Q=(r==null?void 0:r.uid)||"default",H=localStorage.getItem(`sim1Number_${Q}`)??localStorage.getItem("sim1Number")??"",q=localStorage.getItem(`sim2Number_${Q}`)??localStorage.getItem("sim2Number")??"";Pa(H),kn(q)}catch{}},[se,r==null?void 0:r.uid]);const us=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),Ii=(()=>{const Q=(q,ie)=>{const te=String(q||"").replace(/^v/i,"").split(".").map(he=>parseInt(he,10)||0),ee=String(ie||"").replace(/^v/i,"").split(".").map(he=>parseInt(he,10)||0);for(let he=0;he<Math.max(te.length,ee.length);he++){const ue=te[he]||0,J=ee[he]||0;if(ue>J)return 1;if(ue<J)return-1}return 0},H=[A,P,us].filter(Boolean);return H.length===0?"":H.reduce((q,ie)=>Q(ie,q)>0?ie:q)})();return y.jsxs(y.Fragment,{children:[y.jsx(uh,{open:wr,onOpenChange:()=>{},children:y.jsxs(Wc,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:Q=>{try{Q.preventDefault()}catch{}},onEscapeKeyDown:Q=>{try{Q.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[y.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),y.jsx(qc,{className:"text-center",children:y.jsxs("div",{className:"flex items-center justify-center gap-3",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:y.jsx(hk,{className:"w-6 h-6"})}),y.jsx(Hc,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),y.jsx("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:y.jsxs("div",{className:"mt-4 text-center text-gray-700 leading-relaxed",children:[y.jsx("p",{children:"   .                    ."}),y.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"        ."})]})}),y.jsx("div",{className:"mt-4",children:y.jsx(Mn,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Ca,children:"  "})})]})}),(()=>{try{const Q=(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android",H=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),Z&&(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"&&y.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:y.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[y.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:y.jsx("span",{className:"text-2xl",children:"!"})}),y.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),y.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),y.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:y.jsx(Mn,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),h&&m&&y.jsx(uh,{open:h,onOpenChange:Q=>{m!=null&&m.force||f(Q)},children:y.jsxs(Wc,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[y.jsxs(qc,{className:"text-center",children:[y.jsx(Hc,{className:"text-base md:text-lg font-bold text-gray-900",children:m.title}),y.jsx(r0,{className:"text-sm text-gray-700 whitespace-pre-line",children:m.message}),y.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:Ii?`  : v${Ii}`:""})]}),y.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!m.force&&!p&&!I&&y.jsx(Mn,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>f(!1),children:""}),!I&&y.jsx(Mn,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const Q=String((m==null?void 0:m.versionId)||"").trim(),H=m==null?void 0:m.versionCode;if(Q)try{localStorage.setItem("android_last_ack_version_id",Q)}catch{}if(typeof H=="number")try{localStorage.setItem("android_last_ack_code",String(H))}catch{}if((async()=>{try{if(r!=null&&r.uid&&Q){const{doc:ie,setDoc:te,serverTimestamp:ee}=await re(async()=>{const{doc:J,setDoc:oe,serverTimestamp:X}=await Promise.resolve().then(()=>Ln);return{doc:J,setDoc:oe,serverTimestamp:X}},void 0,import.meta.url),{db:he}=await re(async()=>{const{db:J}=await Promise.resolve().then(()=>Ht);return{db:J}},void 0,import.meta.url),ue={lastAckAndroidVersion:Q,lastAckAt:ee()};typeof H=="number"&&(ue.lastAckAndroidCode=H),await te(ie(he,"profiles",r.uid),ue,{merge:!0})}}catch{}})(),(Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"){const ie=m.apkUrl,te=`cashy://update?url=${encodeURIComponent(ie)}`;v(!0),_({percent:0,downloaded:0,total:0});try{B.current&&clearInterval(B.current),B.current=setInterval(()=>{_(ee=>{const he=typeof(ee==null?void 0:ee.percent)=="number"?ee.percent:0,ue=ce.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(he+ue))),downloaded:(ee==null?void 0:ee.downloaded)??0,total:(ee==null?void 0:ee.total)??0}})},600)}catch{}window.location.href=te;try{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{try{ce.current=!1}catch{}try{k.current=null}catch{}},8e3)}catch{}}else{const ie=m.apkUrl;try{window.open(ie,"_blank")}catch{}}}catch{}},children:p?" ...":" "}),I&&y.jsx(Mn,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((Ie==null?void 0:Ie.isNativePlatform)&&Ie.getPlatform()==="android"){f(!1);try{const H=String((m==null?void 0:m.versionId)||"").trim();if(H){try{localStorage.setItem("android_last_ack_version_id",H)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:q,setDoc:ie,serverTimestamp:te}=await re(async()=>{const{doc:J,setDoc:oe,serverTimestamp:X}=await Promise.resolve().then(()=>Ln);return{doc:J,setDoc:oe,serverTimestamp:X}},void 0,import.meta.url),{db:ee}=await re(async()=>{const{db:J}=await Promise.resolve().then(()=>Ht);return{db:J}},void 0,import.meta.url),he={lastAckAndroidVersion:H,androidInstalledVersion:H,lastAckAt:te(),androidInstalledAt:te()},ue=m==null?void 0:m.versionCode;if(typeof ue=="number"){he.lastAckAndroidCode=ue,he.androidInstalledCode=ue;try{localStorage.setItem("android_installed_code",String(ue)),localStorage.setItem("android_last_ack_code",String(ue))}catch{}}await ie(q(ee,"profiles",r.uid),he,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),p&&y.jsxs("div",{className:"mt-3 text-center",children:[y.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:y.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((w==null?void 0:w.percent)||0)))}%`}})}),y.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((w==null?void 0:w.percent)||0),"%"]})]})]})}),!!r&&se&&y.jsx(uh,{open:se,onOpenChange:async Q=>{Q&&_e(!0)},children:y.jsxs(Wc,{className:"sm:max-w-[420px] rounded-2xl shadow-xl z-[9999]",onInteractOutside:Q=>{Q.preventDefault()},onEscapeKeyDown:Q=>{Q.preventDefault()},hideClose:!0,children:[y.jsxs("div",{className:"absolute left-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground cursor-pointer z-50",onClick:async()=>{if(_e(!1),j!=null&&j.popupId)try{const{db:Q}=await re(async()=>{const{db:te}=await Promise.resolve().then(()=>Ht);return{db:te}},void 0,import.meta.url),{doc:H,updateDoc:q,serverTimestamp:ie}=await re(async()=>{const{doc:te,updateDoc:ee,serverTimestamp:he}=await Promise.resolve().then(()=>Ln);return{doc:te,updateDoc:ee,serverTimestamp:he}},void 0,import.meta.url);await q(H(Q,"pendingSmsPopups",j.popupId),{status:"dismissed",dismissedAt:ie()})}catch{}},children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",children:[y.jsx("path",{d:"M18 6 6 18"}),y.jsx("path",{d:"m6 6 12 12"})]}),y.jsx("span",{className:"sr-only",children:"Close"})]}),y.jsxs(qc,{children:[y.jsx(Hc,{children:j!=null&&j.providerLabel?y.jsxs(y.Fragment,{children:["   ",y.jsx("span",{className:"text-red-600",children:j.providerLabel})]}):"   "}),y.jsx(r0,{})]}),y.jsxs("div",{className:"text-sm",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[y.jsx(Mn,{variant:(j==null?void 0:j.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(j==null?void 0:j.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>cs((j==null?void 0:j.sim1Number)||Pr,"SIM 1"),disabled:!(j!=null&&j.sim1Number||Pr),children:(j==null?void 0:j.sim1Number)||Pr||" "}),y.jsx(Mn,{variant:(j==null?void 0:j.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(j==null?void 0:j.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>cs((j==null?void 0:j.sim2Number)||_s,"SIM 2"),disabled:!(j!=null&&j.sim2Number||_s),children:(j==null?void 0:j.sim2Number)||_s||" "})]}),y.jsx("div",{className:"border rounded-lg p-3",children:y.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"font-bold",children:[" ",(er=j==null?void 0:j.amount)==null?void 0:er.toLocaleString()]}),y.jsx("div",{className:"font-mono",children:(j==null?void 0:j.sender)||""}),y.jsxs("div",{className:"font-mono",children:[(j==null?void 0:j.simLabel)&&y.jsx("span",{className:`inline-flex items-center justify-center rounded-md px-1.5 py-0.5 text-xs font-bold mr-2 ${j.simLabel==="SIM 1"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:j.simLabel}),(j==null?void 0:j.simNumber)||"-"]}),(j==null?void 0:j.senderName)&&y.jsx("div",{children:j==null?void 0:j.senderName}),(j==null?void 0:j.reference)&&y.jsx("div",{className:"font-mono",children:j==null?void 0:j.reference}),(j==null?void 0:j.walletMsisdn)&&y.jsx("div",{className:"font-mono",children:j==null?void 0:j.walletMsisdn})]}),y.jsxs("div",{className:"space-y-2 text-right",children:[y.jsx("div",{children:"  "}),y.jsx("div",{children:" "}),y.jsx("div",{children:" "}),(j==null?void 0:j.senderName)&&y.jsx("div",{children:"  "}),(j==null?void 0:j.reference)&&y.jsx("div",{children:"  "}),(j==null?void 0:j.walletMsisdn)&&y.jsx("div",{children:"  "})]})]})}),Bn&&y.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[y.jsx("span",{className:"flex-1",children:"  ()"}),y.jsx("input",{type:"number",step:"0.01",min:"0",value:Fe,onChange:Q=>Pn(Q.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),_r&&y.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"text-sm",children:" "}),y.jsxs("div",{className:"font-bold",children:[" ",mt.toLocaleString()]})]}),y.jsx("div",{className:"mt-3",children:y.jsx("input",{type:"text",value:Nt,onChange:Q=>ft(Q.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),y.jsx("div",{className:"mt-3",children:y.jsx(Mn,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Cn(!0),zn(!1)},children:""})})]}),Tn&&!_r&&y.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),y.jsx("div",{className:"pt-2",children:y.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var Q;try{const q=String((j==null?void 0:j.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),ie=q?parseFloat(String(q[1]).replace(",",".")):Number((j==null?void 0:j.amount)||0),{auth:te}=await re(async()=>{const{auth:ve}=await Promise.resolve().then(()=>Ht);return{auth:ve}},void 0,import.meta.url),ee=((Q=te.currentUser)==null?void 0:Q.uid)||"",he=ee?`selectedWallet_${ee}`:"selectedWallet_default",ue=localStorage.getItem(he)||"",J=Fe&&Fe.trim()!==""?Math.max(0,parseFloat(Fe)):null;let oe=0;if(J!=null)oe=J;else try{const{merchantWalletService:ve}=await re(async()=>{const{merchantWalletService:Le}=await Promise.resolve().then(()=>nc);return{merchantWalletService:Le}},void 0,import.meta.url),pe=await ve.getById(String(ue)),ge=pe&&pe.defaultWithdrawCommission;if(ge!=null)oe=Math.round((Number(ge)||0)*Number(ie)/1e3*100)/100;else{const{calculateCommission:Le}=await re(async()=>{const{calculateCommission:He}=await Promise.resolve().then(()=>el);return{calculateCommission:He}},void 0,import.meta.url);oe=Le(Number(ie),"receive")}}catch{const{calculateCommission:ve}=await re(async()=>{const{calculateCommission:pe}=await Promise.resolve().then(()=>el);return{calculateCommission:pe}},void 0,import.meta.url);oe=ve(Number(ie),"receive")}const ae=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(ie)+Number(oe):Number(ie);en(Math.round(ae*100)/100),zn(!0)}catch{zn(!0)}},children:""})})]}),y.jsx("div",{className:"pt-3",children:y.jsx(Mn,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const Q=String((j==null?void 0:j.text)||""),H=Q.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),q=H?parseFloat(String(H[1]).replace(",",".")):Number((j==null?void 0:j.amount)||0),ie=Q.match(/\s+\s+(\d+)/i),te=String((j==null?void 0:j.sender)||(ie?ie[1]:"")||""),ee=Q.match(/\s*\s*([\d\.]+)/i),he=String((j==null?void 0:j.reference)||(ee?ee[1]:String(Date.now())));Cr({...j,amount:q,sender:te,reference:he,deferredMode:Tn,debtorName:Nt,debtorNote:at})}catch{Cr()}},children:" "})})]})})]})},YR=()=>{const t=wi(),{user:e}=Ws(),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login")||t.pathname==="/"||t.pathname.startsWith("/landing");return e&&!n?y.jsxs(y.Fragment,{children:[y.jsx(y$,{}),y.jsx(X$,{})]}):null},JR=()=>{const{user:t,loading:e}=Ws();return e?y.jsx(s0,{}):t?y.jsx(ip,{}):y.jsx(mg,{})},LX=()=>(S.useEffect(()=>{const t=document.getElementById("app-loading-screen");t&&setTimeout(()=>{t.style.opacity="0",t.style.transition="opacity 0.5s ease",setTimeout(()=>t.remove(),500)},500)},[]),y.jsx(E6,{client:Qa,children:y.jsx(R5,{children:y.jsxs(UB,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android")&&y.jsx(aX,{}),y.jsx(NX,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&kX||Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android")?y.jsxs(S5,{children:[y.jsx(QR,{}),y.jsx(YR,{}),y.jsx(S.Suspense,{fallback:y.jsx(s0,{}),children:y.jsxs(Qb,{children:[y.jsx(Re,{path:"/",element:Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"?y.jsx(JR,{}):y.jsx(Tm,{})}),y.jsx(Re,{path:"/dashboard-redirect",element:y.jsx(RR,{})}),y.jsx(Re,{path:"/landing",element:y.jsx(Tm,{})}),y.jsx(Re,{path:"/subscriptions",element:y.jsx(PR,{})}),y.jsx(Re,{path:"/auth",element:y.jsx(CR,{})}),y.jsx(Re,{path:"/user/login",element:y.jsx(mg,{})}),y.jsx(Re,{path:"/user/forgot-password",element:y.jsx(OR,{})}),y.jsx(Re,{path:"/user/register",element:y.jsx(bm,{})}),y.jsx(Re,{path:"/register",element:y.jsx(bm,{})}),y.jsx(Re,{path:"/user/account-setup",element:y.jsx(DR,{})}),y.jsx(Re,{path:"/user/pending-approval",element:y.jsx(FR,{})}),y.jsx(Re,{path:"/user/dashboard",element:y.jsx(ip,{})}),y.jsx(Re,{path:"/branch/:shopId/dashboard",element:y.jsx(ip,{})}),y.jsx(Re,{path:"/user/add-wallet",element:y.jsx(WR,{})}),y.jsx(Re,{path:"/admin/login",element:y.jsx(UR,{})}),y.jsx(Re,{path:"/admin/dashboard",element:y.jsx(jR,{})}),y.jsx(Re,{path:"/admin/topups",element:y.jsx(kR,{})}),y.jsx(Re,{path:"/admin/notifications",element:y.jsx(NR,{})}),y.jsx(Re,{path:"/profile-settings",element:y.jsx(BR,{})}),y.jsx(Re,{path:"/transactions",element:y.jsx(zR,{})}),y.jsx(Re,{path:"/referrals",element:y.jsx(qR,{})}),y.jsx(Re,{path:"/privacy-policy",element:y.jsx(KR,{})}),y.jsx(Re,{path:"/cpanel",element:y.jsx(SR,{})}),y.jsx(Re,{path:"/cpanel/login",element:y.jsx(bR,{})}),y.jsx(Re,{path:"/auth-test",element:y.jsx($R,{})}),y.jsx(Re,{path:"/topup",element:y.jsx(Sm,{})}),y.jsx(Re,{path:"/recharge",element:y.jsx(Sm,{})}),y.jsx(Re,{path:"/merchant/*",element:y.jsx(VR,{})}),y.jsx(Re,{path:"/dashboard/login",element:y.jsx(LR,{})}),y.jsx(Re,{path:"/dashboard",element:y.jsx(MR,{})}),y.jsx(Re,{path:"*",element:y.jsx(HR,{})})]})}),y.jsx(GR,{})]}):y.jsxs(T5,{children:[y.jsx(QR,{}),y.jsx(YR,{}),y.jsx(S.Suspense,{fallback:y.jsx(s0,{}),children:y.jsxs(Qb,{children:[y.jsx(Re,{path:"/",element:Ie!=null&&Ie.isNativePlatform&&Ie.getPlatform()==="android"?y.jsx(JR,{}):y.jsx(Tm,{})}),y.jsx(Re,{path:"/dashboard-redirect",element:y.jsx(RR,{})}),y.jsx(Re,{path:"/landing",element:y.jsx(Tm,{})}),y.jsx(Re,{path:"/subscriptions",element:y.jsx(PR,{})}),y.jsx(Re,{path:"/auth",element:y.jsx(CR,{})}),y.jsx(Re,{path:"/user/login",element:y.jsx(mg,{})}),y.jsx(Re,{path:"/user/forgot-password",element:y.jsx(OR,{})}),y.jsx(Re,{path:"/user/register",element:y.jsx(bm,{})}),y.jsx(Re,{path:"/register",element:y.jsx(bm,{})}),y.jsx(Re,{path:"/user/account-setup",element:y.jsx(DR,{})}),y.jsx(Re,{path:"/user/pending-approval",element:y.jsx(FR,{})}),y.jsx(Re,{path:"/user/dashboard",element:y.jsx(ip,{})}),y.jsx(Re,{path:"/user/add-wallet",element:y.jsx(WR,{})}),y.jsx(Re,{path:"/admin/login",element:y.jsx(UR,{})}),y.jsx(Re,{path:"/admin/dashboard",element:y.jsx(jR,{})}),y.jsx(Re,{path:"/admin/topups",element:y.jsx(kR,{})}),y.jsx(Re,{path:"/admin/notifications",element:y.jsx(NR,{})}),y.jsx(Re,{path:"/profile-settings",element:y.jsx(BR,{})}),y.jsx(Re,{path:"/transactions",element:y.jsx(zR,{})}),y.jsx(Re,{path:"/referrals",element:y.jsx(qR,{})}),y.jsx(Re,{path:"/privacy-policy",element:y.jsx(KR,{})}),y.jsx(Re,{path:"/cpanel",element:y.jsx(SR,{})}),y.jsx(Re,{path:"/cpanel/login",element:y.jsx(bR,{})}),y.jsx(Re,{path:"/auth-test",element:y.jsx($R,{})}),y.jsx(Re,{path:"/topup",element:y.jsx(Sm,{})}),y.jsx(Re,{path:"/recharge",element:y.jsx(Sm,{})}),y.jsx(Re,{path:"/merchant/*",element:y.jsx(VR,{})}),y.jsx(Re,{path:"/dashboard/login",element:y.jsx(LR,{})}),y.jsx(Re,{path:"/dashboard",element:y.jsx(MR,{})}),y.jsx(Re,{path:"*",element:y.jsx(HR,{})})]})}),y.jsx(GR,{})]})]})})})),tV=S.createContext(void 0),MX=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!1),[i,o]=S.useState(null),{profile:a,user:l}=Ws();S.useEffect(()=>{try{const m=localStorage.getItem("cashier_shift_user"),E=localStorage.getItem("cashier_shift_active"),p=localStorage.getItem("cashier_shift_start_at");m&&n(JSON.parse(m)),E&&s(E==="true"),p&&o(Number(p))}catch{}},[]);const c=async()=>{if(a!=null&&a.shopId)try{const m=Pe(K,"cashierShift",a.shopId),E=await Yt(m);if(E.exists()){const p=E.data(),v=(p==null?void 0:p.shiftUser)||null,w=!!(p!=null&&p.isShiftActive),_=(p==null?void 0:p.shiftStartAt)??null;let I=v;if(!I)try{const x=localStorage.getItem("cashier_shift_user"),P=x?JSON.parse(x):null;P&&(I=P)}catch{}n(I),s(w),o(typeof _=="number"?_:_?Number(_):null);try{I?localStorage.setItem("cashier_shift_user",JSON.stringify(I)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",w?"true":"false"),_!=null&&localStorage.setItem("cashier_shift_start_at",String(_))}catch{}}else await on(m,{isShiftActive:!1,shiftStartAt:null,shiftUser:null})}catch(m){console.warn("Failed to refresh shift status:",m)}};S.useEffect(()=>{c()},[a==null?void 0:a.shopId]);const d=m=>{n(m);try{m?localStorage.setItem("cashier_shift_user",JSON.stringify(m)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const E=Pe(K,"cashierShift",a.shopId);En(E,{shiftUser:m||null})}}catch{}},h=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const m=Date.now();o(m);try{localStorage.setItem("cashier_shift_start_at",String(m))}catch{}try{if(a!=null&&a.shopId){const E=Pe(K,"cashierShift",a.shopId);En(E,{isShiftActive:!0,shiftStartAt:m})}}catch{}try{const p=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,w=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let _=localStorage.getItem(p);if(_==null){const x=localStorage.getItem(v);if(x!=null){_=x;try{localStorage.setItem(p,x),localStorage.removeItem(v)}catch{}}}if(_==null&&(l!=null&&l.uid)){const x=localStorage.getItem("cashBalance"),P=localStorage.getItem("userCashBalance");if(x!=null){try{localStorage.setItem(p,x),localStorage.removeItem("cashBalance")}catch{}_=x}else if(P!=null){try{localStorage.setItem(p,P),localStorage.removeItem("userCashBalance")}catch{}_=P}}const I=localStorage.getItem(w);_?localStorage.setItem("shiftStartDrawerFunds",_):localStorage.setItem("shiftStartDrawerFunds","0"),I?localStorage.setItem("shiftStartWalletBalances",I):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const E=Pe(K,"dashboardData",a.shopId),p=await Yt(E);if(p.exists()){const v=p.data(),w=Number((v==null?void 0:v.cashBalance)??0),_=(v==null?void 0:v.walletBalances)??{};try{const I=localStorage.getItem("shiftStartDrawerFunds"),x=localStorage.getItem("shiftStartWalletBalances"),P=I?parseFloat(I):0,L=x?JSON.parse(x):{},A=!I||!Number.isFinite(P)||P===0,T=!x||Object.keys(L||{}).length===0;A&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(w)?w:0)),T&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(_||{}))}catch{}}}catch(E){console.warn("Shift start Firebase read failed:",E)}})()}catch{}},f=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const m=Pe(K,"cashierShift",a.shopId);En(m,{isShiftActive:!1})}}catch{}};return y.jsx(tV.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:d,startShift:h,endShift:f,refreshShiftStatus:c},children:t})},_Z=()=>{const t=S.useContext(tV);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class VX extends S.Component{constructor(){super(...arguments);hd(this,"state",{hasError:!1,error:null});hd(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return y.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx(fk,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,y.jsxs(Mn,{onClick:this.handleReload,className:"w-full gap-2",children:[y.jsx(uE,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{ZM()}catch{}const FX=()=>{const{theme:t="system"}=Sk();return S.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};DC(document.getElementById("root")).render(y.jsx(VX,{children:y.jsx(w$,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:y.jsx(NY,{children:y.jsx(MX,{children:y.jsxs(PX,{children:[y.jsx(LX,{}),y.jsx(FX,{})]})})})})}));export{sj as $,dk as A,Mn as B,dT as C,uk as D,ck as E,lk as F,rW as G,Jw as H,ri as I,Pe as J,dR as K,dw as L,X_ as M,YX as N,hk as O,_A as P,Et as Q,F as R,Rj as S,sW as T,Nj as U,on as V,kt as W,Yt as X,En as Y,Jt as Z,e0 as _,Fl as a,TM as a$,cE as a0,wi as a1,Rs as a2,Xr as a3,Uu as a4,s4 as a5,gv as a6,Xt as a7,Mt as a8,lr as a9,dE as aA,fG as aB,uh as aC,Wc as aD,qc as aE,Hc as aF,r0 as aG,vT as aH,qu as aI,tZ as aJ,DY as aK,Vk as aL,QU as aM,CX as aN,pY as aO,ej as aP,uj as aQ,Oj as aR,nj as aS,Uk as aT,$X as aU,_B as aV,Ml as aW,sE as aX,LJ as aY,MC as aZ,QY as a_,iE as aa,pi as ab,tM as ac,eX as ad,pb as ae,re as af,tp as ag,_Z as ah,xX as ai,Ie as aj,db as ak,X4 as al,HK as am,_T as an,s0 as ao,mb as ap,QJ as aq,Qb as ar,Re as as,Bo as at,hb as au,oj as av,Ka as aw,EY as ax,vg as ay,De as az,hT as b,KB as b$,Rh as b0,mM as b1,Lg as b2,wB as b3,EB as b4,OC as b5,XX as b6,Sk as b7,JM as b8,_j as b9,fZ as bA,qJ as bB,HJ as bC,mZ as bD,BM as bE,e4 as bF,zM as bG,WM as bH,KJ as bI,$M as bJ,pZ as bK,P5 as bL,QX as bM,GX as bN,eM as bO,Ga as bP,LN as bQ,fg as bR,rZ as bS,_K as bT,vA as bU,eZ as bV,ZI as bW,cX as bX,yZ as bY,Wg as bZ,e6 as b_,uZ as ba,dZ as bb,hZ as bc,vY as bd,gZ as be,lX as bf,zi as bg,I4 as bh,of as bi,nZ as bj,GM as bk,QM as bl,yj as bm,fk as bn,fl as bo,iX as bp,lZ as bq,sX as br,Jn as bs,cZ as bt,rX as bu,lT as bv,fX as bw,fb as bx,wt as by,mY as bz,fT as c,WX as c0,iw as c1,Sr as c2,qg as c3,qB as c4,HB as c5,Lp as c6,sN as c7,m6 as c8,YB as c9,br as ca,qX as cb,QL as cc,rY as cd,aZ as ce,nY as cf,gY as cg,Q4 as ch,Ln as ci,Ht as cj,nc as ck,Wv as cl,oX as cm,vZ as cn,o0 as co,dM as d,mT as e,UY as f,JX as g,ZJ as h,rE as i,y as j,HM as k,JJ as l,Ot as m,Ce as n,K as o,na as p,Ve as q,S as r,rd as s,ze as t,Ws as u,Li as v,HG as w,YL as x,mi as y,Oe as z};
//# sourceMappingURL=index-BwuekbvX.js.map
