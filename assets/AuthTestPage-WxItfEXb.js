import{u as F,r as o,j as s,c as S,d as T,e as A,g as I,y as h,I as x,B as p,p as r,V as f,t as w,a0 as j,_ as v}from"./index-F79wE54_.js";function E(){const{user:t,profile:i,loading:a,signIn:y}=F(),[U,C]=o.useState(null),[n,N]=o.useState("alkaptin7878@mail.ru"),[c,b]=o.useState("01123456");o.useEffect(()=>{const e=()=>{C({contextUser:t?{uid:t.uid,email:t.email,emailVerified:t.emailVerified}:null,contextProfile:i,contextLoading:a,firebaseCurrentUser:r.currentUser?{uid:r.currentUser.uid,email:r.currentUser.email,emailVerified:r.currentUser.emailVerified}:null,timestamp:new Date().toISOString()})};e();const l=setInterval(e,2e3);return()=>clearInterval(l)},[t,i,a]);const d=async()=>{console.log("ðŸ§ª Testing login with:",{email:n,password:"***"});try{const e=await y(n,c);console.log("ðŸ§ª Login result:",e)}catch(e){console.error("ðŸ§ª Login error:",e)}},D=async()=>{console.log("ðŸ”¥ Testing Firestore connection..."),console.log("ðŸ” Current auth state:",{user:t?{uid:t.uid,email:t.email}:null,firebaseCurrentUser:r.currentUser?{uid:r.currentUser.uid,email:r.currentUser.email}:null});try{if(!t&&!r.currentUser){console.log("âŒ No user logged in - please login first"),alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore");return}const e=t||r.currentUser;console.log("âœ… Using user:",e==null?void 0:e.email),console.log("ðŸ“– Testing user document read...");const l=f(w,"users",e.uid),u=await j(l);u.exists()?console.log("âœ… User document exists:",u.data()):(console.log("âš ï¸ User document does not exist, creating..."),await v(l,{email:e.email,uid:e.uid,createdAt:new Date,role:"user",isActive:!0}),console.log("âœ… User document created")),console.log("ðŸ“– Testing merchant wallet read...");const m=f(w,"merchantWallets",`test_${e.uid}`),g=await j(m);g.exists()?console.log("âœ… Wallet document exists:",g.data()):(console.log("âš ï¸ Wallet document does not exist, creating test wallet..."),await v(m,{merchantUserId:e.uid,walletName:"Ù…Ø­ÙØ¸Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©",balance:0,createdAt:new Date}),console.log("âœ… Test wallet created")),console.log("ðŸŽ‰ Firestore connection test completed successfully!"),alert("ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore Ø¨Ù†Ø¬Ø§Ø­! ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„ØªÙØ§ØµÙŠÙ„")}catch(e){console.error("âŒ Firestore connection error:",e),alert(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore: ${e.message}`)}};return s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:s.jsxs(S,{children:[s.jsx(T,{children:s.jsx(A,{children:"ðŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©"})}),s.jsxs(I,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"email",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),s.jsx(x,{id:"email",type:"email",value:n,onChange:e=>N(e.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"password",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),s.jsx(x,{id:"password",type:"password",value:c,onChange:e=>b(e.target.value),onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),d())},placeholder:"Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"})]}),s.jsx(p,{onClick:d,className:"w-full",disabled:a,children:a?"Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...":"ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ"}),t&&s.jsx(p,{onClick:D,className:"w-full",variant:"outline",children:"Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Firestore"}),s.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-bold mb-2",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:"}),s.jsx("pre",{className:"text-sm overflow-auto",children:JSON.stringify(U,null,2)})]})]})]})})})}export{E as default};
//# sourceMappingURL=AuthTestPage-WxItfEXb.js.map
