const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-kLNzuBGB.js","./card-nd4SlYrT.js","./BrandLogo-BkiHtnAT.js","./brandingService-Bxfz1yqW.js","./whatsappService-Dq7rWnTk.js","./arrow-left-DwSkNlVW.js","./star-EbqfWrHm.js","./crown-DjmmTdqc.js","./download-CP89e6Ql.js","./zap-BHLdx3bn.js","./shield-BonwKoNE.js","./chart-column-S2Jb8oWL.js","./circle-check-big-BsQTWwyl.js","./SubscriptionsPage-CcTmL88p.js","./contentService-CopjKIuh.js","./calendar-WsoZKrlB.js","./AuthPage-Bbx-BIhm.js","./TopUpPage-HqQ7OYe-.js","./select-BkivO7Br.js","./AdminTopupsPage-DnB7fnWb.js","./AdminNotificationsPage-UeUMDz8Q.js","./label-1gjWFhmG.js","./textarea-BB52aJZL.js","./link-DA5qzns_.js","./UserRegisterPage-nGkgUYVd.js","./alert-F7vxX6pq.js","./wallet-5l6GeTGr.js","./user-plus-BsvFyKLs.js","./phone-CHJ3W-6B.js","./store-CYR3kn2a.js","./UserAccountSetupPage-CvTg5r5O.js","./DashboardLoginPage-auulEUFe.js","./ProtectedDashboard-BJj9jZ1t.js","./badge-B6GMvlT7.js","./MasterPinDialog-7KHcTdCn.js","./circle-alert-DztmhCKF.js","./profitService-B2f_fkQK.js","./dollar-sign-DSF2Fcu8.js","./circle-x-DZqS8Rti.js","./ProtectedUserDashboard-bO8wCs8P.js","./broadcastService-EdXZNKjP.js","./MerchantDashboard-CQ0Hu--p.js","./dropdown-menu-BHkWtM19.js","./index-BRp4Mnyy.js","./WalletsManagement-BYMVEVgb.js","./progress-CJdzzRuj.js","./square-pen-C2Vf6hnY.js","./PendingApprovalPage-CKSUULZB.js","./freeTrialService--n9KBDUg.js","./AdminLogin-DB0XRTiB.js","./ProtectedAdminDashboard-BgWFsLWg.js","./ProfileIcon-BWBuBz5A.js","./switch-Ds4DkPiv.js","./separator-claVx2aj.js","./save-DVqEuCCV.js","./users-BopmQ2T8.js","./AuthTestPage-C-kLB_1b.js","./ProfileSettingsPage-YEAVop1f.js","./walletSelectionPinService-BxJ0013E.js","./TransactionsPage-B8JCFYlT.js","./MaintenanceDialog-C8t0EsQc.js","./WalletAdditionPage-B7E4E4U3.js","./ReferralsPage-C5SDpPYC.js","./CPanelPage-CyC65jdS.js","./CPanelLoginPage-CjJu877g.js","./UserDashboardPage-BzYEvmUK.js"])))=>i.map(i=>d[i]);
var W2=Object.defineProperty;var _T=t=>{throw TypeError(t)};var q2=(t,e,n)=>e in t?W2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Lg=(t,e,n)=>q2(t,typeof e!="symbol"?e+"":e,n),Vg=(t,e,n)=>e.has(t)||_T("Cannot "+n);var W=(t,e,n)=>(Vg(t,e,"read from private field"),n?n.call(t):e.get(t)),pt=(t,e,n)=>e.has(t)?_T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),He=(t,e,n,r)=>(Vg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),zn=(t,e,n)=>(Vg(t,e,"access private method"),n);var Nh=(t,e,n,r)=>({set _(s){He(t,e,s,n)},get _(){return W(t,e,r)}});function H2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ux={exports:{}},gm={},jx={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=Symbol.for("react.element"),K2=Symbol.for("react.portal"),G2=Symbol.for("react.fragment"),Q2=Symbol.for("react.strict_mode"),Y2=Symbol.for("react.profiler"),J2=Symbol.for("react.provider"),X2=Symbol.for("react.context"),Z2=Symbol.for("react.forward_ref"),eL=Symbol.for("react.suspense"),tL=Symbol.for("react.memo"),nL=Symbol.for("react.lazy"),ET=Symbol.iterator;function rL(t){return t===null||typeof t!="object"?null:(t=ET&&t[ET]||t["@@iterator"],typeof t=="function"?t:null)}var $x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bx=Object.assign,zx={};function Nc(t,e,n){this.props=t,this.context=e,this.refs=zx,this.updater=n||$x}Nc.prototype.isReactComponent={};Nc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wx(){}Wx.prototype=Nc.prototype;function s_(t,e,n){this.props=t,this.context=e,this.refs=zx,this.updater=n||$x}var i_=s_.prototype=new Wx;i_.constructor=s_;Bx(i_,Nc.prototype);i_.isPureReactComponent=!0;var TT=Array.isArray,qx=Object.prototype.hasOwnProperty,o_={current:null},Hx={key:!0,ref:!0,__self:!0,__source:!0};function Kx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qx.call(e,r)&&!Hx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Zd,type:t,key:i,ref:o,props:s,_owner:o_.current}}function sL(t,e){return{$$typeof:Zd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function a_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zd}function iL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var IT=/\/+/g;function Mg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iL(""+t.key):e.toString(36)}function Tf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zd:case K2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Mg(o,0):r,TT(s)?(n="",t!=null&&(n=t.replace(IT,"$&/")+"/"),Tf(s,e,n,"",function(c){return c})):s!=null&&(a_(s)&&(s=sL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(IT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",TT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Mg(i,a);o+=Tf(i,e,n,l,s)}else if(l=rL(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Mg(i,a++),o+=Tf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oh(t,e,n){if(t==null)return t;var r=[],s=0;return Tf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function oL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},If={transition:null},aL={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:If,ReactCurrentOwner:o_};function Gx(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:Oh,forEach:function(t,e,n){Oh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oh(t,function(){e++}),e},toArray:function(t){return Oh(t,function(e){return e})||[]},only:function(t){if(!a_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=Nc;it.Fragment=G2;it.Profiler=Y2;it.PureComponent=s_;it.StrictMode=Q2;it.Suspense=eL;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aL;it.act=Gx;it.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Bx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=o_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)qx.call(e,l)&&!Hx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Zd,type:t.type,key:s,ref:i,props:r,_owner:o}};it.createContext=function(t){return t={$$typeof:X2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:J2,_context:t},t.Consumer=t};it.createElement=Kx;it.createFactory=function(t){var e=Kx.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:Z2,render:t}};it.isValidElement=a_;it.lazy=function(t){return{$$typeof:nL,_payload:{_status:-1,_result:t},_init:oL}};it.memo=function(t,e){return{$$typeof:tL,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=If.transition;If.transition={};try{t()}finally{If.transition=e}};it.unstable_act=Gx;it.useCallback=function(t,e){return hr.current.useCallback(t,e)};it.useContext=function(t){return hr.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};it.useEffect=function(t,e){return hr.current.useEffect(t,e)};it.useId=function(){return hr.current.useId()};it.useImperativeHandle=function(t,e,n){return hr.current.useImperativeHandle(t,e,n)};it.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return hr.current.useMemo(t,e)};it.useReducer=function(t,e,n){return hr.current.useReducer(t,e,n)};it.useRef=function(t){return hr.current.useRef(t)};it.useState=function(t){return hr.current.useState(t)};it.useSyncExternalStore=function(t,e,n){return hr.current.useSyncExternalStore(t,e,n)};it.useTransition=function(){return hr.current.useTransition()};it.version="18.3.1";jx.exports=it;var S=jx.exports;const $=Fx(S),l_=H2({__proto__:null,default:$},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lL=S,cL=Symbol.for("react.element"),uL=Symbol.for("react.fragment"),dL=Object.prototype.hasOwnProperty,hL=lL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fL={key:!0,ref:!0,__self:!0,__source:!0};function Qx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dL.call(e,r)&&!fL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cL,type:t,key:i,ref:o,props:s,_owner:hL.current}}gm.Fragment=uL;gm.jsx=Qx;gm.jsxs=Qx;Ux.exports=gm;var I=Ux.exports,Yx={exports:{}},zr={},Jx={exports:{}},Xx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,V){var ee=U.length;U.push(V);e:for(;0<ee;){var ae=ee-1>>>1,H=U[ae];if(0<s(H,V))U[ae]=V,U[ee]=H,ee=ae;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],ee=U.pop();if(ee!==V){U[0]=ee;e:for(var ae=0,H=U.length,Ne=H>>>1;ae<Ne;){var Te=2*(ae+1)-1,Oe=U[Te],Je=Te+1,Se=U[Je];if(0>s(Oe,ee))Je<H&&0>s(Se,Oe)?(U[ae]=Se,U[Je]=ee,ae=Je):(U[ae]=Oe,U[Te]=ee,ae=Te);else if(Je<H&&0>s(Se,ee))U[ae]=Se,U[Je]=ee,ae=Je;else break e}}return V}function s(U,V){var ee=U.sortIndex-V.sortIndex;return ee!==0?ee:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,w=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=U)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function R(U){if(g=!1,_(U),!w)if(n(l)!==null)w=!0,ie(k);else{var V=n(c);V!==null&&ue(R,V.startTime-U)}}function k(U,V){w=!1,g&&(g=!1,E(A),A=-1),p=!0;var ee=f;try{for(_(V),h=n(l);h!==null&&(!(h.expirationTime>V)||U&&!D());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,f=h.priorityLevel;var H=ae(h.expirationTime<=V);V=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&r(l),_(V)}else r(l);h=n(l)}if(h!==null)var Ne=!0;else{var Te=n(c);Te!==null&&ue(R,Te.startTime-V),Ne=!1}return Ne}finally{h=null,f=ee,p=!1}}var L=!1,x=null,A=-1,b=5,P=-1;function D(){return!(t.unstable_now()-P<b)}function O(){if(x!==null){var U=t.unstable_now();P=U;var V=!0;try{V=x(!0,U)}finally{V?C():(L=!1,x=null)}}else L=!1}var C;if(typeof y=="function")C=function(){y(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,se=j.port2;j.port1.onmessage=O,C=function(){se.postMessage(null)}}else C=function(){v(O,0)};function ie(U){x=U,L||(L=!0,C())}function ue(U,V){A=v(function(){U(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,ie(k))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var ee=f;f=V;try{return U()}finally{f=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ee=f;f=U;try{return V()}finally{f=ee}},t.unstable_scheduleCallback=function(U,V,ee){var ae=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ae+ee:ae):ee=ae,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ee+H,U={id:d++,callback:V,priorityLevel:U,startTime:ee,expirationTime:H,sortIndex:-1},ee>ae?(U.sortIndex=ee,e(c,U),n(l)===null&&U===n(c)&&(g?(E(A),A=-1):g=!0,ue(R,ee-ae))):(U.sortIndex=H,e(l,U),w||p||(w=!0,ie(k))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var V=f;return function(){var ee=f;f=V;try{return U.apply(this,arguments)}finally{f=ee}}}})(Xx);Jx.exports=Xx;var pL=Jx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL=S,$r=pL;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zx=new Set,ld={};function Ya(t,e){rc(t,e),rc(t+"Capture",e)}function rc(t,e){for(ld[t]=e,t=0;t<e.length;t++)Zx.add(e[t])}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ev=Object.prototype.hasOwnProperty,gL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ST={},bT={};function yL(t){return ev.call(bT,t)?!0:ev.call(ST,t)?!1:gL.test(t)?bT[t]=!0:(ST[t]=!0,!1)}function vL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wL(t,e,n,r){if(e===null||typeof e>"u"||vL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fn[t]=new fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fn[e]=new fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fn[t]=new fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fn[t]=new fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fn[t]=new fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fn[t]=new fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fn[t]=new fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fn[t]=new fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fn[t]=new fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var c_=/[\-:]([a-z])/g;function u_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(c_,u_);Fn[e]=new fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(c_,u_);Fn[e]=new fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(c_,u_);Fn[e]=new fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fn[t]=new fr(t,1,!1,t.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fn[t]=new fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function d_(t,e,n,r){var s=Fn.hasOwnProperty(e)?Fn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wL(e,n,s,r)&&(n=null),r||s===null?yL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Si=mL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lh=Symbol.for("react.element"),Il=Symbol.for("react.portal"),Sl=Symbol.for("react.fragment"),h_=Symbol.for("react.strict_mode"),tv=Symbol.for("react.profiler"),eR=Symbol.for("react.provider"),tR=Symbol.for("react.context"),f_=Symbol.for("react.forward_ref"),nv=Symbol.for("react.suspense"),rv=Symbol.for("react.suspense_list"),p_=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),nR=Symbol.for("react.offscreen"),AT=Symbol.iterator;function uu(t){return t===null||typeof t!="object"?null:(t=AT&&t[AT]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Fg;function xu(t){if(Fg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fg=e&&e[1]||""}return`
`+Fg+t}var Ug=!1;function jg(t,e){if(!t||Ug)return"";Ug=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ug=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xu(t):""}function _L(t){switch(t.tag){case 5:return xu(t.type);case 16:return xu("Lazy");case 13:return xu("Suspense");case 19:return xu("SuspenseList");case 0:case 2:case 15:return t=jg(t.type,!1),t;case 11:return t=jg(t.type.render,!1),t;case 1:return t=jg(t.type,!0),t;default:return""}}function sv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sl:return"Fragment";case Il:return"Portal";case tv:return"Profiler";case h_:return"StrictMode";case nv:return"Suspense";case rv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tR:return(t.displayName||"Context")+".Consumer";case eR:return(t._context.displayName||"Context")+".Provider";case f_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case p_:return e=t.displayName||null,e!==null?e:sv(t.type)||"Memo";case qi:e=t._payload,t=t._init;try{return sv(t(e))}catch{}}return null}function EL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sv(e);case 8:return e===h_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ao(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TL(t){var e=rR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vh(t){t._valueTracker||(t._valueTracker=TL(t))}function sR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ep(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iv(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ao(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iR(t,e){e=e.checked,e!=null&&d_(t,"checked",e,!1)}function ov(t,e){iR(t,e);var n=Ao(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?av(t,e.type,n):e.hasOwnProperty("defaultValue")&&av(t,e.type,Ao(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function RT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function av(t,e,n){(e!=="number"||ep(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ru=Array.isArray;function Ml(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ao(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function PT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Ru(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ao(n)}}function oR(t,e){var n=Ao(e.value),r=Ao(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function CT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mh,lR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mh=Mh||document.createElement("div"),Mh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IL=["Webkit","ms","Moz","O"];Object.keys(Uu).forEach(function(t){IL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Uu[e]=Uu[t]})});function cR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Uu.hasOwnProperty(t)&&Uu[t]?(""+e).trim():e+"px"}function uR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var SL=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uv(t,e){if(e){if(SL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function dv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hv=null;function m_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fv=null,Fl=null,Ul=null;function DT(t){if(t=nh(t)){if(typeof fv!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Em(e),fv(t.stateNode,t.type,e))}}function dR(t){Fl?Ul?Ul.push(t):Ul=[t]:Fl=t}function hR(){if(Fl){var t=Fl,e=Ul;if(Ul=Fl=null,DT(t),e)for(t=0;t<e.length;t++)DT(e[t])}}function fR(t,e){return t(e)}function pR(){}var $g=!1;function mR(t,e,n){if($g)return t(e,n);$g=!0;try{return fR(t,e,n)}finally{$g=!1,(Fl!==null||Ul!==null)&&(pR(),hR())}}function ud(t,e){var n=t.stateNode;if(n===null)return null;var r=Em(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var pv=!1;if(fi)try{var du={};Object.defineProperty(du,"passive",{get:function(){pv=!0}}),window.addEventListener("test",du,du),window.removeEventListener("test",du,du)}catch{pv=!1}function bL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ju=!1,tp=null,np=!1,mv=null,AL={onError:function(t){ju=!0,tp=t}};function xL(t,e,n,r,s,i,o,a,l){ju=!1,tp=null,bL.apply(AL,arguments)}function RL(t,e,n,r,s,i,o,a,l){if(xL.apply(this,arguments),ju){if(ju){var c=tp;ju=!1,tp=null}else throw Error(te(198));np||(np=!0,mv=c)}}function Ja(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kT(t){if(Ja(t)!==t)throw Error(te(188))}function PL(t){var e=t.alternate;if(!e){if(e=Ja(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return kT(s),t;if(i===r)return kT(s),e;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function yR(t){return t=PL(t),t!==null?vR(t):null}function vR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vR(t);if(e!==null)return e;t=t.sibling}return null}var wR=$r.unstable_scheduleCallback,NT=$r.unstable_cancelCallback,CL=$r.unstable_shouldYield,DL=$r.unstable_requestPaint,hn=$r.unstable_now,kL=$r.unstable_getCurrentPriorityLevel,g_=$r.unstable_ImmediatePriority,_R=$r.unstable_UserBlockingPriority,rp=$r.unstable_NormalPriority,NL=$r.unstable_LowPriority,ER=$r.unstable_IdlePriority,ym=null,js=null;function OL(t){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(ym,t,void 0,(t.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:ML,LL=Math.log,VL=Math.LN2;function ML(t){return t>>>=0,t===0?32:31-(LL(t)/VL|0)|0}var Fh=64,Uh=4194304;function Pu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Pu(a):(i&=o,i!==0&&(r=Pu(i)))}else o=n&~s,o!==0?r=Pu(o):i!==0&&(r=Pu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fs(e),s=1<<n,r|=t[n],e&=~s;return r}function FL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-fs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=FL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function gv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TR(){var t=Fh;return Fh<<=1,!(Fh&4194240)&&(Fh=64),t}function Bg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fs(e),t[e]=n}function jL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function y_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var It=0;function IR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SR,v_,bR,AR,xR,yv=!1,jh=[],co=null,uo=null,ho=null,dd=new Map,hd=new Map,Gi=[],$L="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OT(t,e){switch(t){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":dd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hd.delete(e.pointerId)}}function hu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=nh(e),e!==null&&v_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BL(t,e,n,r,s){switch(e){case"focusin":return co=hu(co,t,e,n,r,s),!0;case"dragenter":return uo=hu(uo,t,e,n,r,s),!0;case"mouseover":return ho=hu(ho,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return dd.set(i,hu(dd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,hd.set(i,hu(hd.get(i)||null,t,e,n,r,s)),!0}return!1}function RR(t){var e=ua(t.target);if(e!==null){var n=Ja(e);if(n!==null){if(e=n.tag,e===13){if(e=gR(n),e!==null){t.blockedOn=e,xR(t.priority,function(){bR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hv=r,n.target.dispatchEvent(r),hv=null}else return e=nh(n),e!==null&&v_(e),t.blockedOn=n,!1;e.shift()}return!0}function LT(t,e,n){Sf(t)&&n.delete(e)}function zL(){yv=!1,co!==null&&Sf(co)&&(co=null),uo!==null&&Sf(uo)&&(uo=null),ho!==null&&Sf(ho)&&(ho=null),dd.forEach(LT),hd.forEach(LT)}function fu(t,e){t.blockedOn===e&&(t.blockedOn=null,yv||(yv=!0,$r.unstable_scheduleCallback($r.unstable_NormalPriority,zL)))}function fd(t){function e(s){return fu(s,t)}if(0<jh.length){fu(jh[0],t);for(var n=1;n<jh.length;n++){var r=jh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(co!==null&&fu(co,t),uo!==null&&fu(uo,t),ho!==null&&fu(ho,t),dd.forEach(e),hd.forEach(e),n=0;n<Gi.length;n++)r=Gi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gi.length&&(n=Gi[0],n.blockedOn===null);)RR(n),n.blockedOn===null&&Gi.shift()}var jl=Si.ReactCurrentBatchConfig,ip=!0;function WL(t,e,n,r){var s=It,i=jl.transition;jl.transition=null;try{It=1,w_(t,e,n,r)}finally{It=s,jl.transition=i}}function qL(t,e,n,r){var s=It,i=jl.transition;jl.transition=null;try{It=4,w_(t,e,n,r)}finally{It=s,jl.transition=i}}function w_(t,e,n,r){if(ip){var s=vv(t,e,n,r);if(s===null)Xg(t,e,r,op,n),OT(t,r);else if(BL(s,t,e,n,r))r.stopPropagation();else if(OT(t,r),e&4&&-1<$L.indexOf(t)){for(;s!==null;){var i=nh(s);if(i!==null&&SR(i),i=vv(t,e,n,r),i===null&&Xg(t,e,r,op,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xg(t,e,r,null,n)}}var op=null;function vv(t,e,n,r){if(op=null,t=m_(r),t=ua(t),t!==null)if(e=Ja(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return op=t,null}function PR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kL()){case g_:return 1;case _R:return 4;case rp:case NL:return 16;case ER:return 536870912;default:return 16}default:return 16}}var ro=null,__=null,bf=null;function CR(){if(bf)return bf;var t,e=__,n=e.length,r,s="value"in ro?ro.value:ro.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return bf=s.slice(t,1<r?1-r:void 0)}function Af(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $h(){return!0}function VT(){return!1}function Wr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$h:VT,this.isPropagationStopped=VT,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$h)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$h)},persist:function(){},isPersistent:$h}),e}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E_=Wr(Oc),th=Jt({},Oc,{view:0,detail:0}),HL=Wr(th),zg,Wg,pu,vm=Jt({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pu&&(pu&&t.type==="mousemove"?(zg=t.screenX-pu.screenX,Wg=t.screenY-pu.screenY):Wg=zg=0,pu=t),zg)},movementY:function(t){return"movementY"in t?t.movementY:Wg}}),MT=Wr(vm),KL=Jt({},vm,{dataTransfer:0}),GL=Wr(KL),QL=Jt({},th,{relatedTarget:0}),qg=Wr(QL),YL=Jt({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),JL=Wr(YL),XL=Jt({},Oc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZL=Wr(XL),eV=Jt({},Oc,{data:0}),FT=Wr(eV),tV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rV[t])?!!e[t]:!1}function T_(){return sV}var iV=Jt({},th,{key:function(t){if(t.key){var e=tV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Af(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T_,charCode:function(t){return t.type==="keypress"?Af(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Af(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oV=Wr(iV),aV=Jt({},vm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UT=Wr(aV),lV=Jt({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T_}),cV=Wr(lV),uV=Jt({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),dV=Wr(uV),hV=Jt({},vm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fV=Wr(hV),pV=[9,13,27,32],I_=fi&&"CompositionEvent"in window,$u=null;fi&&"documentMode"in document&&($u=document.documentMode);var mV=fi&&"TextEvent"in window&&!$u,DR=fi&&(!I_||$u&&8<$u&&11>=$u),jT=" ",$T=!1;function kR(t,e){switch(t){case"keyup":return pV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bl=!1;function gV(t,e){switch(t){case"compositionend":return NR(e);case"keypress":return e.which!==32?null:($T=!0,jT);case"textInput":return t=e.data,t===jT&&$T?null:t;default:return null}}function yV(t,e){if(bl)return t==="compositionend"||!I_&&kR(t,e)?(t=CR(),bf=__=ro=null,bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DR&&e.locale!=="ko"?null:e.data;default:return null}}var vV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vV[t.type]:e==="textarea"}function OR(t,e,n,r){dR(r),e=ap(e,"onChange"),0<e.length&&(n=new E_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bu=null,pd=null;function wV(t){qR(t,0)}function wm(t){var e=Rl(t);if(sR(e))return t}function _V(t,e){if(t==="change")return e}var LR=!1;if(fi){var Hg;if(fi){var Kg="oninput"in document;if(!Kg){var zT=document.createElement("div");zT.setAttribute("oninput","return;"),Kg=typeof zT.oninput=="function"}Hg=Kg}else Hg=!1;LR=Hg&&(!document.documentMode||9<document.documentMode)}function WT(){Bu&&(Bu.detachEvent("onpropertychange",VR),pd=Bu=null)}function VR(t){if(t.propertyName==="value"&&wm(pd)){var e=[];OR(e,pd,t,m_(t)),mR(wV,e)}}function EV(t,e,n){t==="focusin"?(WT(),Bu=e,pd=n,Bu.attachEvent("onpropertychange",VR)):t==="focusout"&&WT()}function TV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wm(pd)}function IV(t,e){if(t==="click")return wm(e)}function SV(t,e){if(t==="input"||t==="change")return wm(e)}function bV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ys=typeof Object.is=="function"?Object.is:bV;function md(t,e){if(ys(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ev.call(e,s)||!ys(t[s],e[s]))return!1}return!0}function qT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function HT(t,e){var n=qT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qT(n)}}function MR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FR(){for(var t=window,e=ep();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ep(t.document)}return e}function S_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AV(t){var e=FR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MR(n.ownerDocument.documentElement,n)){if(r!==null&&S_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=HT(n,i);var o=HT(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xV=fi&&"documentMode"in document&&11>=document.documentMode,Al=null,wv=null,zu=null,_v=!1;function KT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_v||Al==null||Al!==ep(r)||(r=Al,"selectionStart"in r&&S_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zu&&md(zu,r)||(zu=r,r=ap(wv,"onSelect"),0<r.length&&(e=new E_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Al)))}function Bh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xl={animationend:Bh("Animation","AnimationEnd"),animationiteration:Bh("Animation","AnimationIteration"),animationstart:Bh("Animation","AnimationStart"),transitionend:Bh("Transition","TransitionEnd")},Gg={},UR={};fi&&(UR=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function _m(t){if(Gg[t])return Gg[t];if(!xl[t])return t;var e=xl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in UR)return Gg[t]=e[n];return t}var jR=_m("animationend"),$R=_m("animationiteration"),BR=_m("animationstart"),zR=_m("transitionend"),WR=new Map,GT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fo(t,e){WR.set(t,e),Ya(e,[t])}for(var Qg=0;Qg<GT.length;Qg++){var Yg=GT[Qg],RV=Yg.toLowerCase(),PV=Yg[0].toUpperCase()+Yg.slice(1);Fo(RV,"on"+PV)}Fo(jR,"onAnimationEnd");Fo($R,"onAnimationIteration");Fo(BR,"onAnimationStart");Fo("dblclick","onDoubleClick");Fo("focusin","onFocus");Fo("focusout","onBlur");Fo(zR,"onTransitionEnd");rc("onMouseEnter",["mouseout","mouseover"]);rc("onMouseLeave",["mouseout","mouseover"]);rc("onPointerEnter",["pointerout","pointerover"]);rc("onPointerLeave",["pointerout","pointerover"]);Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function QT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RL(r,e,void 0,t),t.currentTarget=null}function qR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;QT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;QT(s,a,c),i=l}}}if(np)throw t=mv,np=!1,mv=null,t}function Ft(t,e){var n=e[bv];n===void 0&&(n=e[bv]=new Set);var r=t+"__bubble";n.has(r)||(HR(e,t,2,!1),n.add(r))}function Jg(t,e,n){var r=0;e&&(r|=4),HR(n,t,r,e)}var zh="_reactListening"+Math.random().toString(36).slice(2);function gd(t){if(!t[zh]){t[zh]=!0,Zx.forEach(function(n){n!=="selectionchange"&&(CV.has(n)||Jg(n,!1,t),Jg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zh]||(e[zh]=!0,Jg("selectionchange",!1,e))}}function HR(t,e,n,r){switch(PR(e)){case 1:var s=WL;break;case 4:s=qL;break;default:s=w_}n=s.bind(null,e,n,t),s=void 0,!pv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ua(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}mR(function(){var c=i,d=m_(n),h=[];e:{var f=WR.get(t);if(f!==void 0){var p=E_,w=t;switch(t){case"keypress":if(Af(n)===0)break e;case"keydown":case"keyup":p=oV;break;case"focusin":w="focus",p=qg;break;case"focusout":w="blur",p=qg;break;case"beforeblur":case"afterblur":p=qg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=MT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cV;break;case jR:case $R:case BR:p=JL;break;case zR:p=dV;break;case"scroll":p=HL;break;case"wheel":p=fV;break;case"copy":case"cut":case"paste":p=ZL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=UT}var g=(e&4)!==0,v=!g&&t==="scroll",E=g?f!==null?f+"Capture":null:f;g=[];for(var y=c,_;y!==null;){_=y;var R=_.stateNode;if(_.tag===5&&R!==null&&(_=R,E!==null&&(R=ud(y,E),R!=null&&g.push(yd(y,R,_)))),v)break;y=y.return}0<g.length&&(f=new p(f,w,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==hv&&(w=n.relatedTarget||n.fromElement)&&(ua(w)||w[pi]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?ua(w):null,w!==null&&(v=Ja(w),w!==v||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(g=MT,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=UT,R="onPointerLeave",E="onPointerEnter",y="pointer"),v=p==null?f:Rl(p),_=w==null?f:Rl(w),f=new g(R,y+"leave",p,n,d),f.target=v,f.relatedTarget=_,R=null,ua(d)===c&&(g=new g(E,y+"enter",w,n,d),g.target=_,g.relatedTarget=v,R=g),v=R,p&&w)t:{for(g=p,E=w,y=0,_=g;_;_=ol(_))y++;for(_=0,R=E;R;R=ol(R))_++;for(;0<y-_;)g=ol(g),y--;for(;0<_-y;)E=ol(E),_--;for(;y--;){if(g===E||E!==null&&g===E.alternate)break t;g=ol(g),E=ol(E)}g=null}else g=null;p!==null&&YT(h,f,p,g,!1),w!==null&&v!==null&&YT(h,v,w,g,!0)}}e:{if(f=c?Rl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=_V;else if(BT(f))if(LR)k=SV;else{k=TV;var L=EV}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=IV);if(k&&(k=k(t,c))){OR(h,k,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&av(f,"number",f.value)}switch(L=c?Rl(c):window,t){case"focusin":(BT(L)||L.contentEditable==="true")&&(Al=L,wv=c,zu=null);break;case"focusout":zu=wv=Al=null;break;case"mousedown":_v=!0;break;case"contextmenu":case"mouseup":case"dragend":_v=!1,KT(h,n,d);break;case"selectionchange":if(xV)break;case"keydown":case"keyup":KT(h,n,d)}var x;if(I_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else bl?kR(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(DR&&n.locale!=="ko"&&(bl||A!=="onCompositionStart"?A==="onCompositionEnd"&&bl&&(x=CR()):(ro=d,__="value"in ro?ro.value:ro.textContent,bl=!0)),L=ap(c,A),0<L.length&&(A=new FT(A,t,null,n,d),h.push({event:A,listeners:L}),x?A.data=x:(x=NR(n),x!==null&&(A.data=x)))),(x=mV?gV(t,n):yV(t,n))&&(c=ap(c,"onBeforeInput"),0<c.length&&(d=new FT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=x))}qR(h,e)})}function yd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ap(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ud(t,n),i!=null&&r.unshift(yd(t,i,s)),i=ud(t,e),i!=null&&r.push(yd(t,i,s))),t=t.return}return r}function ol(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function YT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ud(n,i),l!=null&&o.unshift(yd(n,l,a))):s||(l=ud(n,i),l!=null&&o.push(yd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DV=/\r\n?/g,kV=/\u0000|\uFFFD/g;function JT(t){return(typeof t=="string"?t:""+t).replace(DV,`
`).replace(kV,"")}function Wh(t,e,n){if(e=JT(e),JT(t)!==e&&n)throw Error(te(425))}function lp(){}var Ev=null,Tv=null;function Iv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sv=typeof setTimeout=="function"?setTimeout:void 0,NV=typeof clearTimeout=="function"?clearTimeout:void 0,XT=typeof Promise=="function"?Promise:void 0,OV=typeof queueMicrotask=="function"?queueMicrotask:typeof XT<"u"?function(t){return XT.resolve(null).then(t).catch(LV)}:Sv;function LV(t){setTimeout(function(){throw t})}function Zg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fd(e)}function fo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ZT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lc=Math.random().toString(36).slice(2),Os="__reactFiber$"+Lc,vd="__reactProps$"+Lc,pi="__reactContainer$"+Lc,bv="__reactEvents$"+Lc,VV="__reactListeners$"+Lc,MV="__reactHandles$"+Lc;function ua(t){var e=t[Os];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[Os]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ZT(t);t!==null;){if(n=t[Os])return n;t=ZT(t)}return e}t=n,n=t.parentNode}return null}function nh(t){return t=t[Os]||t[pi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Em(t){return t[vd]||null}var Av=[],Pl=-1;function Uo(t){return{current:t}}function Ut(t){0>Pl||(t.current=Av[Pl],Av[Pl]=null,Pl--)}function Dt(t,e){Pl++,Av[Pl]=t.current,t.current=e}var xo={},er=Uo(xo),Sr=Uo(!1),Oa=xo;function sc(t,e){var n=t.type.contextTypes;if(!n)return xo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function br(t){return t=t.childContextTypes,t!=null}function cp(){Ut(Sr),Ut(er)}function eI(t,e,n){if(er.current!==xo)throw Error(te(168));Dt(er,e),Dt(Sr,n)}function KR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(te(108,EL(t)||"Unknown",s));return Jt({},n,r)}function up(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xo,Oa=er.current,Dt(er,t),Dt(Sr,Sr.current),!0}function tI(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=KR(t,e,Oa),r.__reactInternalMemoizedMergedChildContext=t,Ut(Sr),Ut(er),Dt(er,t)):Ut(Sr),Dt(Sr,n)}var ti=null,Tm=!1,ey=!1;function GR(t){ti===null?ti=[t]:ti.push(t)}function FV(t){Tm=!0,GR(t)}function jo(){if(!ey&&ti!==null){ey=!0;var t=0,e=It;try{var n=ti;for(It=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ti=null,Tm=!1}catch(s){throw ti!==null&&(ti=ti.slice(t+1)),wR(g_,jo),s}finally{It=e,ey=!1}}return null}var Cl=[],Dl=0,dp=null,hp=0,Gr=[],Qr=0,La=null,si=1,ii="";function Xo(t,e){Cl[Dl++]=hp,Cl[Dl++]=dp,dp=t,hp=e}function QR(t,e,n){Gr[Qr++]=si,Gr[Qr++]=ii,Gr[Qr++]=La,La=t;var r=si;t=ii;var s=32-fs(r)-1;r&=~(1<<s),n+=1;var i=32-fs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,si=1<<32-fs(e)+s|n<<s|r,ii=i+t}else si=1<<i|n<<s|r,ii=t}function b_(t){t.return!==null&&(Xo(t,1),QR(t,1,0))}function A_(t){for(;t===dp;)dp=Cl[--Dl],Cl[Dl]=null,hp=Cl[--Dl],Cl[Dl]=null;for(;t===La;)La=Gr[--Qr],Gr[Qr]=null,ii=Gr[--Qr],Gr[Qr]=null,si=Gr[--Qr],Gr[Qr]=null}var Mr=null,Or=null,zt=!1,us=null;function YR(t,e){var n=Jr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,Or=fo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=La!==null?{id:si,overflow:ii}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mr=t,Or=null,!0):!1;default:return!1}}function xv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rv(t){if(zt){var e=Or;if(e){var n=e;if(!nI(t,e)){if(xv(t))throw Error(te(418));e=fo(n.nextSibling);var r=Mr;e&&nI(t,e)?YR(r,n):(t.flags=t.flags&-4097|2,zt=!1,Mr=t)}}else{if(xv(t))throw Error(te(418));t.flags=t.flags&-4097|2,zt=!1,Mr=t}}}function rI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function qh(t){if(t!==Mr)return!1;if(!zt)return rI(t),zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Iv(t.type,t.memoizedProps)),e&&(e=Or)){if(xv(t))throw JR(),Error(te(418));for(;e;)YR(t,e),e=fo(e.nextSibling)}if(rI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Or=fo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=Mr?fo(t.stateNode.nextSibling):null;return!0}function JR(){for(var t=Or;t;)t=fo(t.nextSibling)}function ic(){Or=Mr=null,zt=!1}function x_(t){us===null?us=[t]:us.push(t)}var UV=Si.ReactCurrentBatchConfig;function mu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function Hh(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sI(t){var e=t._init;return e(t._payload)}function XR(t){function e(E,y){if(t){var _=E.deletions;_===null?(E.deletions=[y],E.flags|=16):_.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=yo(E,y),E.index=0,E.sibling=null,E}function i(E,y,_){return E.index=_,t?(_=E.alternate,_!==null?(_=_.index,_<y?(E.flags|=2,y):_):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,_,R){return y===null||y.tag!==6?(y=ay(_,E.mode,R),y.return=E,y):(y=s(y,_),y.return=E,y)}function l(E,y,_,R){var k=_.type;return k===Sl?d(E,y,_.props.children,R,_.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===qi&&sI(k)===y.type)?(R=s(y,_.props),R.ref=mu(E,y,_),R.return=E,R):(R=Nf(_.type,_.key,_.props,null,E.mode,R),R.ref=mu(E,y,_),R.return=E,R)}function c(E,y,_,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=ly(_,E.mode,R),y.return=E,y):(y=s(y,_.children||[]),y.return=E,y)}function d(E,y,_,R,k){return y===null||y.tag!==7?(y=Pa(_,E.mode,R,k),y.return=E,y):(y=s(y,_),y.return=E,y)}function h(E,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ay(""+y,E.mode,_),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Lh:return _=Nf(y.type,y.key,y.props,null,E.mode,_),_.ref=mu(E,null,y),_.return=E,_;case Il:return y=ly(y,E.mode,_),y.return=E,y;case qi:var R=y._init;return h(E,R(y._payload),_)}if(Ru(y)||uu(y))return y=Pa(y,E.mode,_,null),y.return=E,y;Hh(E,y)}return null}function f(E,y,_,R){var k=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:a(E,y,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Lh:return _.key===k?l(E,y,_,R):null;case Il:return _.key===k?c(E,y,_,R):null;case qi:return k=_._init,f(E,y,k(_._payload),R)}if(Ru(_)||uu(_))return k!==null?null:d(E,y,_,R,null);Hh(E,_)}return null}function p(E,y,_,R,k){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(_)||null,a(y,E,""+R,k);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Lh:return E=E.get(R.key===null?_:R.key)||null,l(y,E,R,k);case Il:return E=E.get(R.key===null?_:R.key)||null,c(y,E,R,k);case qi:var L=R._init;return p(E,y,_,L(R._payload),k)}if(Ru(R)||uu(R))return E=E.get(_)||null,d(y,E,R,k,null);Hh(y,R)}return null}function w(E,y,_,R){for(var k=null,L=null,x=y,A=y=0,b=null;x!==null&&A<_.length;A++){x.index>A?(b=x,x=null):b=x.sibling;var P=f(E,x,_[A],R);if(P===null){x===null&&(x=b);break}t&&x&&P.alternate===null&&e(E,x),y=i(P,y,A),L===null?k=P:L.sibling=P,L=P,x=b}if(A===_.length)return n(E,x),zt&&Xo(E,A),k;if(x===null){for(;A<_.length;A++)x=h(E,_[A],R),x!==null&&(y=i(x,y,A),L===null?k=x:L.sibling=x,L=x);return zt&&Xo(E,A),k}for(x=r(E,x);A<_.length;A++)b=p(x,E,A,_[A],R),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?A:b.key),y=i(b,y,A),L===null?k=b:L.sibling=b,L=b);return t&&x.forEach(function(D){return e(E,D)}),zt&&Xo(E,A),k}function g(E,y,_,R){var k=uu(_);if(typeof k!="function")throw Error(te(150));if(_=k.call(_),_==null)throw Error(te(151));for(var L=k=null,x=y,A=y=0,b=null,P=_.next();x!==null&&!P.done;A++,P=_.next()){x.index>A?(b=x,x=null):b=x.sibling;var D=f(E,x,P.value,R);if(D===null){x===null&&(x=b);break}t&&x&&D.alternate===null&&e(E,x),y=i(D,y,A),L===null?k=D:L.sibling=D,L=D,x=b}if(P.done)return n(E,x),zt&&Xo(E,A),k;if(x===null){for(;!P.done;A++,P=_.next())P=h(E,P.value,R),P!==null&&(y=i(P,y,A),L===null?k=P:L.sibling=P,L=P);return zt&&Xo(E,A),k}for(x=r(E,x);!P.done;A++,P=_.next())P=p(x,E,A,P.value,R),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?A:P.key),y=i(P,y,A),L===null?k=P:L.sibling=P,L=P);return t&&x.forEach(function(O){return e(E,O)}),zt&&Xo(E,A),k}function v(E,y,_,R){if(typeof _=="object"&&_!==null&&_.type===Sl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Lh:e:{for(var k=_.key,L=y;L!==null;){if(L.key===k){if(k=_.type,k===Sl){if(L.tag===7){n(E,L.sibling),y=s(L,_.props.children),y.return=E,E=y;break e}}else if(L.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===qi&&sI(k)===L.type){n(E,L.sibling),y=s(L,_.props),y.ref=mu(E,L,_),y.return=E,E=y;break e}n(E,L);break}else e(E,L);L=L.sibling}_.type===Sl?(y=Pa(_.props.children,E.mode,R,_.key),y.return=E,E=y):(R=Nf(_.type,_.key,_.props,null,E.mode,R),R.ref=mu(E,y,_),R.return=E,E=R)}return o(E);case Il:e:{for(L=_.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(E,y.sibling),y=s(y,_.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=ly(_,E.mode,R),y.return=E,E=y}return o(E);case qi:return L=_._init,v(E,y,L(_._payload),R)}if(Ru(_))return w(E,y,_,R);if(uu(_))return g(E,y,_,R);Hh(E,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,_),y.return=E,E=y):(n(E,y),y=ay(_,E.mode,R),y.return=E,E=y),o(E)):n(E,y)}return v}var oc=XR(!0),ZR=XR(!1),fp=Uo(null),pp=null,kl=null,R_=null;function P_(){R_=kl=pp=null}function C_(t){var e=fp.current;Ut(fp),t._currentValue=e}function Pv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $l(t,e){pp=t,R_=kl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_r=!0),t.firstContext=null)}function es(t){var e=t._currentValue;if(R_!==t)if(t={context:t,memoizedValue:e,next:null},kl===null){if(pp===null)throw Error(te(308));kl=t,pp.dependencies={lanes:0,firstContext:t}}else kl=kl.next=t;return e}var da=null;function D_(t){da===null?da=[t]:da.push(t)}function eP(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,D_(e)):(n.next=s.next,s.next=n),e.interleaved=n,mi(t,r)}function mi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hi=!1;function k_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function po(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,mi(t,n)}return s=r.interleaved,s===null?(e.next=e,D_(r)):(e.next=s.next,s.next=e),r.interleaved=e,mi(t,n)}function xf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,y_(t,n)}}function iI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mp(t,e,n,r){var s=t.updateQueue;Hi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,g=a;switch(f=e,p=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Jt({},h,f);break e;case 2:Hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ma|=o,t.lanes=o,t.memoizedState=h}}function oI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(te(191,s));s.call(r)}}}var rh={},$s=Uo(rh),wd=Uo(rh),_d=Uo(rh);function ha(t){if(t===rh)throw Error(te(174));return t}function N_(t,e){switch(Dt(_d,e),Dt(wd,t),Dt($s,rh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cv(e,t)}Ut($s),Dt($s,e)}function ac(){Ut($s),Ut(wd),Ut(_d)}function nP(t){ha(_d.current);var e=ha($s.current),n=cv(e,t.type);e!==n&&(Dt(wd,t),Dt($s,n))}function O_(t){wd.current===t&&(Ut($s),Ut(wd))}var Gt=Uo(0);function gp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ty=[];function L_(){for(var t=0;t<ty.length;t++)ty[t]._workInProgressVersionPrimary=null;ty.length=0}var Rf=Si.ReactCurrentDispatcher,ny=Si.ReactCurrentBatchConfig,Va=0,Yt=null,Sn=null,Dn=null,yp=!1,Wu=!1,Ed=0,jV=0;function Wn(){throw Error(te(321))}function V_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ys(t[n],e[n]))return!1;return!0}function M_(t,e,n,r,s,i){if(Va=i,Yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rf.current=t===null||t.memoizedState===null?WV:qV,t=n(r,s),Wu){i=0;do{if(Wu=!1,Ed=0,25<=i)throw Error(te(301));i+=1,Dn=Sn=null,e.updateQueue=null,Rf.current=HV,t=n(r,s)}while(Wu)}if(Rf.current=vp,e=Sn!==null&&Sn.next!==null,Va=0,Dn=Sn=Yt=null,yp=!1,e)throw Error(te(300));return t}function F_(){var t=Ed!==0;return Ed=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Yt.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function ts(){if(Sn===null){var t=Yt.alternate;t=t!==null?t.memoizedState:null}else t=Sn.next;var e=Dn===null?Yt.memoizedState:Dn.next;if(e!==null)Dn=e,Sn=t;else{if(t===null)throw Error(te(310));Sn=t,t={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Dn===null?Yt.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function Td(t,e){return typeof e=="function"?e(t):e}function ry(t){var e=ts(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=Sn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Va&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Yt.lanes|=d,Ma|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ys(r,e.memoizedState)||(_r=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Yt.lanes|=i,Ma|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sy(t){var e=ts(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ys(i,e.memoizedState)||(_r=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function rP(){}function sP(t,e){var n=Yt,r=ts(),s=e(),i=!ys(r.memoizedState,s);if(i&&(r.memoizedState=s,_r=!0),r=r.queue,U_(aP.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Dn!==null&&Dn.memoizedState.tag&1){if(n.flags|=2048,Id(9,oP.bind(null,n,r,s,e),void 0,null),Nn===null)throw Error(te(349));Va&30||iP(n,e,s)}return s}function iP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oP(t,e,n,r){e.value=n,e.getSnapshot=r,lP(e)&&cP(t)}function aP(t,e,n){return n(function(){lP(e)&&cP(t)})}function lP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ys(t,n)}catch{return!0}}function cP(t){var e=mi(t,1);e!==null&&ps(e,t,1,-1)}function aI(t){var e=Rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Td,lastRenderedState:t},e.queue=t,t=t.dispatch=zV.bind(null,Yt,t),[e.memoizedState,t]}function Id(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uP(){return ts().memoizedState}function Pf(t,e,n,r){var s=Rs();Yt.flags|=t,s.memoizedState=Id(1|e,n,void 0,r===void 0?null:r)}function Im(t,e,n,r){var s=ts();r=r===void 0?null:r;var i=void 0;if(Sn!==null){var o=Sn.memoizedState;if(i=o.destroy,r!==null&&V_(r,o.deps)){s.memoizedState=Id(e,n,i,r);return}}Yt.flags|=t,s.memoizedState=Id(1|e,n,i,r)}function lI(t,e){return Pf(8390656,8,t,e)}function U_(t,e){return Im(2048,8,t,e)}function dP(t,e){return Im(4,2,t,e)}function hP(t,e){return Im(4,4,t,e)}function fP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pP(t,e,n){return n=n!=null?n.concat([t]):null,Im(4,4,fP.bind(null,e,t),n)}function j_(){}function mP(t,e){var n=ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&V_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gP(t,e){var n=ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&V_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yP(t,e,n){return Va&21?(ys(n,e)||(n=TR(),Yt.lanes|=n,Ma|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_r=!0),t.memoizedState=n)}function $V(t,e){var n=It;It=n!==0&&4>n?n:4,t(!0);var r=ny.transition;ny.transition={};try{t(!1),e()}finally{It=n,ny.transition=r}}function vP(){return ts().memoizedState}function BV(t,e,n){var r=go(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wP(t))_P(e,n);else if(n=eP(t,e,n,r),n!==null){var s=cr();ps(n,t,r,s),EP(n,e,r)}}function zV(t,e,n){var r=go(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wP(t))_P(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ys(a,o)){var l=e.interleaved;l===null?(s.next=s,D_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=eP(t,e,s,r),n!==null&&(s=cr(),ps(n,t,r,s),EP(n,e,r))}}function wP(t){var e=t.alternate;return t===Yt||e!==null&&e===Yt}function _P(t,e){Wu=yp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,y_(t,n)}}var vp={readContext:es,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},WV={readContext:es,useCallback:function(t,e){return Rs().memoizedState=[t,e===void 0?null:e],t},useContext:es,useEffect:lI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pf(4194308,4,fP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pf(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BV.bind(null,Yt,t),[r.memoizedState,t]},useRef:function(t){var e=Rs();return t={current:t},e.memoizedState=t},useState:aI,useDebugValue:j_,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=aI(!1),e=t[0];return t=$V.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yt,s=Rs();if(zt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),Nn===null)throw Error(te(349));Va&30||iP(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,lI(aP.bind(null,r,i,t),[t]),r.flags|=2048,Id(9,oP.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rs(),e=Nn.identifierPrefix;if(zt){var n=ii,r=si;n=(r&~(1<<32-fs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ed++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qV={readContext:es,useCallback:mP,useContext:es,useEffect:U_,useImperativeHandle:pP,useInsertionEffect:dP,useLayoutEffect:hP,useMemo:gP,useReducer:ry,useRef:uP,useState:function(){return ry(Td)},useDebugValue:j_,useDeferredValue:function(t){var e=ts();return yP(e,Sn.memoizedState,t)},useTransition:function(){var t=ry(Td)[0],e=ts().memoizedState;return[t,e]},useMutableSource:rP,useSyncExternalStore:sP,useId:vP,unstable_isNewReconciler:!1},HV={readContext:es,useCallback:mP,useContext:es,useEffect:U_,useImperativeHandle:pP,useInsertionEffect:dP,useLayoutEffect:hP,useMemo:gP,useReducer:sy,useRef:uP,useState:function(){return sy(Td)},useDebugValue:j_,useDeferredValue:function(t){var e=ts();return Sn===null?e.memoizedState=t:yP(e,Sn.memoizedState,t)},useTransition:function(){var t=sy(Td)[0],e=ts().memoizedState;return[t,e]},useMutableSource:rP,useSyncExternalStore:sP,useId:vP,unstable_isNewReconciler:!1};function is(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sm={isMounted:function(t){return(t=t._reactInternals)?Ja(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=cr(),s=go(t),i=li(r,s);i.payload=e,n!=null&&(i.callback=n),e=po(t,i,s),e!==null&&(ps(e,t,s,r),xf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=cr(),s=go(t),i=li(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=po(t,i,s),e!==null&&(ps(e,t,s,r),xf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cr(),r=go(t),s=li(n,r);s.tag=2,e!=null&&(s.callback=e),e=po(t,s,r),e!==null&&(ps(e,t,r,n),xf(e,t,r))}};function cI(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!md(n,r)||!md(s,i):!0}function TP(t,e,n){var r=!1,s=xo,i=e.contextType;return typeof i=="object"&&i!==null?i=es(i):(s=br(e)?Oa:er.current,r=e.contextTypes,i=(r=r!=null)?sc(t,s):xo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function uI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sm.enqueueReplaceState(e,e.state,null)}function Dv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},k_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=es(i):(i=br(e)?Oa:er.current,s.context=sc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Cv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sm.enqueueReplaceState(s,s.state,null),mp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lc(t,e){try{var n="",r=e;do n+=_L(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function iy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KV=typeof WeakMap=="function"?WeakMap:Map;function IP(t,e,n){n=li(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_p||(_p=!0,Bv=r),kv(t,e)},n}function SP(t,e,n){n=li(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){kv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kv(t,e),typeof r!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aM.bind(null,t,e,n),e.then(t,t))}function hI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fI(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=li(-1,1),e.tag=2,po(n,e,1))),n.lanes|=1),t)}var GV=Si.ReactCurrentOwner,_r=!1;function or(t,e,n,r){e.child=t===null?ZR(e,null,n,r):oc(e,t.child,n,r)}function pI(t,e,n,r,s){n=n.render;var i=e.ref;return $l(e,s),r=M_(t,e,n,r,i,s),n=F_(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gi(t,e,s)):(zt&&n&&b_(e),e.flags|=1,or(t,e,r,s),e.child)}function mI(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!G_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,bP(t,e,i,r,s)):(t=Nf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:md,n(o,r)&&t.ref===e.ref)return gi(t,e,s)}return e.flags|=1,t=yo(i,r),t.ref=e.ref,t.return=e,e.child=t}function bP(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(md(i,r)&&t.ref===e.ref)if(_r=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_r=!0);else return e.lanes=t.lanes,gi(t,e,s)}return Nv(t,e,n,r,s)}function AP(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Ol,Pr),Pr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Ol,Pr),Pr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Dt(Ol,Pr),Pr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Dt(Ol,Pr),Pr|=r;return or(t,e,s,n),e.child}function xP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nv(t,e,n,r,s){var i=br(n)?Oa:er.current;return i=sc(e,i),$l(e,s),n=M_(t,e,n,r,i,s),r=F_(),t!==null&&!_r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gi(t,e,s)):(zt&&r&&b_(e),e.flags|=1,or(t,e,n,s),e.child)}function gI(t,e,n,r,s){if(br(n)){var i=!0;up(e)}else i=!1;if($l(e,s),e.stateNode===null)Cf(t,e),TP(e,n,r),Dv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=es(c):(c=br(n)?Oa:er.current,c=sc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&uI(e,o,r,c),Hi=!1;var f=e.memoizedState;o.state=f,mp(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Sr.current||Hi?(typeof d=="function"&&(Cv(e,n,d,r),l=e.memoizedState),(a=Hi||cI(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:is(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=es(l):(l=br(n)?Oa:er.current,l=sc(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&uI(e,o,r,l),Hi=!1,f=e.memoizedState,o.state=f,mp(e,r,o,s);var w=e.memoizedState;a!==h||f!==w||Sr.current||Hi?(typeof p=="function"&&(Cv(e,n,p,r),w=e.memoizedState),(c=Hi||cI(e,n,c,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ov(t,e,n,r,i,s)}function Ov(t,e,n,r,s,i){xP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tI(e,n,!1),gi(t,e,i);r=e.stateNode,GV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oc(e,t.child,null,i),e.child=oc(e,null,a,i)):or(t,e,a,i),e.memoizedState=r.state,s&&tI(e,n,!0),e.child}function RP(t){var e=t.stateNode;e.pendingContext?eI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eI(t,e.context,!1),N_(t,e.containerInfo)}function yI(t,e,n,r,s){return ic(),x_(s),e.flags|=256,or(t,e,n,r),e.child}var Lv={dehydrated:null,treeContext:null,retryLane:0};function Vv(t){return{baseLanes:t,cachePool:null,transitions:null}}function PP(t,e,n){var r=e.pendingProps,s=Gt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dt(Gt,s&1),t===null)return Rv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xm(o,r,0,null),t=Pa(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vv(n),e.memoizedState=Lv,t):$_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return QV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=yo(a,i):(i=Pa(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Vv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lv,r}return i=t.child,t=i.sibling,r=yo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $_(t,e){return e=xm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kh(t,e,n,r){return r!==null&&x_(r),oc(e,t.child,null,n),t=$_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=iy(Error(te(422))),Kh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=xm({mode:"visible",children:r.children},s,0,null),i=Pa(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oc(e,t.child,null,o),e.child.memoizedState=Vv(o),e.memoizedState=Lv,i);if(!(e.mode&1))return Kh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(te(419)),r=iy(i,r,void 0),Kh(t,e,o,r)}if(a=(o&t.childLanes)!==0,_r||a){if(r=Nn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,mi(t,s),ps(r,t,s,-1))}return K_(),r=iy(Error(te(421))),Kh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Or=fo(s.nextSibling),Mr=e,zt=!0,us=null,t!==null&&(Gr[Qr++]=si,Gr[Qr++]=ii,Gr[Qr++]=La,si=t.id,ii=t.overflow,La=e),e=$_(e,r.children),e.flags|=4096,e)}function vI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pv(t.return,e,n)}function oy(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function CP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(or(t,e,r.children,n),r=Gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vI(t,n,e);else if(t.tag===19)vI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Gt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gp(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),oy(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gp(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}oy(e,!0,n,null,i);break;case"together":oy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ma|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=yo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YV(t,e,n){switch(e.tag){case 3:RP(e),ic();break;case 5:nP(e);break;case 1:br(e.type)&&up(e);break;case 4:N_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Dt(fp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?PP(t,e,n):(Dt(Gt,Gt.current&1),t=gi(t,e,n),t!==null?t.sibling:null);Dt(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return CP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dt(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,AP(t,e,n)}return gi(t,e,n)}var DP,Mv,kP,NP;DP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mv=function(){};kP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ha($s.current);var i=null;switch(n){case"input":s=iv(t,s),r=iv(t,r),i=[];break;case"select":s=Jt({},s,{value:void 0}),r=Jt({},r,{value:void 0}),i=[];break;case"textarea":s=lv(t,s),r=lv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lp)}uv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ld.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ld.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ft("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};NP=function(t,e,n,r){n!==r&&(e.flags|=4)};function gu(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function JV(t,e,n){var r=e.pendingProps;switch(A_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return br(e.type)&&cp(),qn(e),null;case 3:return r=e.stateNode,ac(),Ut(Sr),Ut(er),L_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,us!==null&&(qv(us),us=null))),Mv(t,e),qn(e),null;case 5:O_(e);var s=ha(_d.current);if(n=e.type,t!==null&&e.stateNode!=null)kP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return qn(e),null}if(t=ha($s.current),qh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Os]=e,r[vd]=i,t=(e.mode&1)!==0,n){case"dialog":Ft("cancel",r),Ft("close",r);break;case"iframe":case"object":case"embed":Ft("load",r);break;case"video":case"audio":for(s=0;s<Cu.length;s++)Ft(Cu[s],r);break;case"source":Ft("error",r);break;case"img":case"image":case"link":Ft("error",r),Ft("load",r);break;case"details":Ft("toggle",r);break;case"input":xT(r,i),Ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ft("invalid",r);break;case"textarea":PT(r,i),Ft("invalid",r)}uv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Wh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Wh(r.textContent,a,t),s=["children",""+a]):ld.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ft("scroll",r)}switch(n){case"input":Vh(r),RT(r,i,!0);break;case"textarea":Vh(r),CT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Os]=e,t[vd]=r,DP(t,e,!1,!1),e.stateNode=t;e:{switch(o=dv(n,r),n){case"dialog":Ft("cancel",t),Ft("close",t),s=r;break;case"iframe":case"object":case"embed":Ft("load",t),s=r;break;case"video":case"audio":for(s=0;s<Cu.length;s++)Ft(Cu[s],t);s=r;break;case"source":Ft("error",t),s=r;break;case"img":case"image":case"link":Ft("error",t),Ft("load",t),s=r;break;case"details":Ft("toggle",t),s=r;break;case"input":xT(t,r),s=iv(t,r),Ft("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Jt({},r,{value:void 0}),Ft("invalid",t);break;case"textarea":PT(t,r),s=lv(t,r),Ft("invalid",t);break;default:s=r}uv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?uR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lR(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cd(t,l):typeof l=="number"&&cd(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ld.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ft("scroll",t):l!=null&&d_(t,i,l,o))}switch(n){case"input":Vh(t),RT(t,r,!1);break;case"textarea":Vh(t),CT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ao(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ml(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ml(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=lp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(t&&e.stateNode!=null)NP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=ha(_d.current),ha($s.current),qh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Os]=e,(i=r.nodeValue!==n)&&(t=Mr,t!==null))switch(t.tag){case 3:Wh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Os]=e,e.stateNode=r}return qn(e),null;case 13:if(Ut(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&Or!==null&&e.mode&1&&!(e.flags&128))JR(),ic(),e.flags|=98560,i=!1;else if(i=qh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[Os]=e}else ic(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qn(e),i=!1}else us!==null&&(qv(us),us=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?bn===0&&(bn=3):K_())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return ac(),Mv(t,e),t===null&&gd(e.stateNode.containerInfo),qn(e),null;case 10:return C_(e.type._context),qn(e),null;case 17:return br(e.type)&&cp(),qn(e),null;case 19:if(Ut(Gt),i=e.memoizedState,i===null)return qn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)gu(i,!1);else{if(bn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gp(t),o!==null){for(e.flags|=128,gu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Gt,Gt.current&1|2),e.child}t=t.sibling}i.tail!==null&&hn()>cc&&(e.flags|=128,r=!0,gu(i,!1),e.lanes=4194304)}else{if(!r)if(t=gp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!zt)return qn(e),null}else 2*hn()-i.renderingStartTime>cc&&n!==1073741824&&(e.flags|=128,r=!0,gu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=hn(),e.sibling=null,n=Gt.current,Dt(Gt,r?n&1|2:n&1),e):(qn(e),null);case 22:case 23:return H_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pr&1073741824&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function XV(t,e){switch(A_(e),e.tag){case 1:return br(e.type)&&cp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ac(),Ut(Sr),Ut(er),L_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return O_(e),null;case 13:if(Ut(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));ic()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(Gt),null;case 4:return ac(),null;case 10:return C_(e.type._context),null;case 22:case 23:return H_(),null;case 24:return null;default:return null}}var Gh=!1,Yn=!1,ZV=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Nl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(t,e,r)}else n.current=null}function Fv(t,e,n){try{n()}catch(r){on(t,e,r)}}var wI=!1;function eM(t,e){if(Ev=ip,t=FR(),S_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tv={focusedElem:t,selectionRange:n},ip=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,v=w.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?g:is(e.type,g),v);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(R){on(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return w=wI,wI=!1,w}function qu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fv(e,n,i)}s=s.next}while(s!==r)}}function bm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function OP(t){var e=t.alternate;e!==null&&(t.alternate=null,OP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Os],delete e[vd],delete e[bv],delete e[VV],delete e[MV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LP(t){return t.tag===5||t.tag===3||t.tag===4}function _I(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lp));else if(r!==4&&(t=t.child,t!==null))for(jv(t,e,n),t=t.sibling;t!==null;)jv(t,e,n),t=t.sibling}function $v(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($v(t,e,n),t=t.sibling;t!==null;)$v(t,e,n),t=t.sibling}var Ln=null,ls=!1;function Vi(t,e,n){for(n=n.child;n!==null;)VP(t,e,n),n=n.sibling}function VP(t,e,n){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(ym,n)}catch{}switch(n.tag){case 5:Yn||Nl(n,e);case 6:var r=Ln,s=ls;Ln=null,Vi(t,e,n),Ln=r,ls=s,Ln!==null&&(ls?(t=Ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ln.removeChild(n.stateNode));break;case 18:Ln!==null&&(ls?(t=Ln,n=n.stateNode,t.nodeType===8?Zg(t.parentNode,n):t.nodeType===1&&Zg(t,n),fd(t)):Zg(Ln,n.stateNode));break;case 4:r=Ln,s=ls,Ln=n.stateNode.containerInfo,ls=!0,Vi(t,e,n),Ln=r,ls=s;break;case 0:case 11:case 14:case 15:if(!Yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fv(n,e,o),s=s.next}while(s!==r)}Vi(t,e,n);break;case 1:if(!Yn&&(Nl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){on(n,e,a)}Vi(t,e,n);break;case 21:Vi(t,e,n);break;case 22:n.mode&1?(Yn=(r=Yn)||n.memoizedState!==null,Vi(t,e,n),Yn=r):Vi(t,e,n);break;default:Vi(t,e,n)}}function EI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZV),e.forEach(function(r){var s=cM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ln=a.stateNode,ls=!1;break e;case 3:Ln=a.stateNode.containerInfo,ls=!0;break e;case 4:Ln=a.stateNode.containerInfo,ls=!0;break e}a=a.return}if(Ln===null)throw Error(te(160));VP(i,o,s),Ln=null,ls=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){on(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MP(e,t),e=e.sibling}function MP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rs(e,t),xs(t),r&4){try{qu(3,t,t.return),bm(3,t)}catch(g){on(t,t.return,g)}try{qu(5,t,t.return)}catch(g){on(t,t.return,g)}}break;case 1:rs(e,t),xs(t),r&512&&n!==null&&Nl(n,n.return);break;case 5:if(rs(e,t),xs(t),r&512&&n!==null&&Nl(n,n.return),t.flags&32){var s=t.stateNode;try{cd(s,"")}catch(g){on(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&iR(s,i),dv(a,o);var c=dv(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?uR(s,h):d==="dangerouslySetInnerHTML"?lR(s,h):d==="children"?cd(s,h):d_(s,d,h,c)}switch(a){case"input":ov(s,i);break;case"textarea":oR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ml(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ml(s,!!i.multiple,i.defaultValue,!0):Ml(s,!!i.multiple,i.multiple?[]:"",!1))}s[vd]=i}catch(g){on(t,t.return,g)}}break;case 6:if(rs(e,t),xs(t),r&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){on(t,t.return,g)}}break;case 3:if(rs(e,t),xs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fd(e.containerInfo)}catch(g){on(t,t.return,g)}break;case 4:rs(e,t),xs(t);break;case 13:rs(e,t),xs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(W_=hn())),r&4&&EI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Yn=(c=Yn)||d,rs(e,t),Yn=c):rs(e,t),xs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ve=t,d=t.child;d!==null;){for(h=ve=d;ve!==null;){switch(f=ve,p=f.child,f.tag){case 0:case 11:case 14:case 15:qu(4,f,f.return);break;case 1:Nl(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(g){on(r,n,g)}}break;case 5:Nl(f,f.return);break;case 22:if(f.memoizedState!==null){II(h);continue}}p!==null?(p.return=f,ve=p):II(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cR("display",o))}catch(g){on(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){on(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rs(e,t),xs(t),r&4&&EI(t);break;case 21:break;default:rs(e,t),xs(t)}}function xs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LP(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(cd(s,""),r.flags&=-33);var i=_I(t);$v(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_I(t);jv(t,a,o);break;default:throw Error(te(161))}}catch(l){on(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tM(t,e,n){ve=t,FP(t)}function FP(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Gh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Yn;a=Gh;var c=Yn;if(Gh=o,(Yn=l)&&!c)for(ve=s;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?SI(s):l!==null?(l.return=o,ve=l):SI(s);for(;i!==null;)ve=i,FP(i),i=i.sibling;ve=s,Gh=a,Yn=c}TI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ve=i):TI(t)}}function TI(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yn||bm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:is(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&oI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}oI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&fd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Yn||e.flags&512&&Uv(e)}catch(f){on(e,e.return,f)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function II(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function SI(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bm(4,e)}catch(l){on(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){on(e,s,l)}}var i=e.return;try{Uv(e)}catch(l){on(e,i,l)}break;case 5:var o=e.return;try{Uv(e)}catch(l){on(e,o,l)}}}catch(l){on(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var nM=Math.ceil,wp=Si.ReactCurrentDispatcher,B_=Si.ReactCurrentOwner,Xr=Si.ReactCurrentBatchConfig,wt=0,Nn=null,En=null,Mn=0,Pr=0,Ol=Uo(0),bn=0,Sd=null,Ma=0,Am=0,z_=0,Hu=null,wr=null,W_=0,cc=1/0,ei=null,_p=!1,Bv=null,mo=null,Qh=!1,so=null,Ep=0,Ku=0,zv=null,Df=-1,kf=0;function cr(){return wt&6?hn():Df!==-1?Df:Df=hn()}function go(t){return t.mode&1?wt&2&&Mn!==0?Mn&-Mn:UV.transition!==null?(kf===0&&(kf=TR()),kf):(t=It,t!==0||(t=window.event,t=t===void 0?16:PR(t.type)),t):1}function ps(t,e,n,r){if(50<Ku)throw Ku=0,zv=null,Error(te(185));eh(t,n,r),(!(wt&2)||t!==Nn)&&(t===Nn&&(!(wt&2)&&(Am|=n),bn===4&&Qi(t,Mn)),Ar(t,r),n===1&&wt===0&&!(e.mode&1)&&(cc=hn()+500,Tm&&jo()))}function Ar(t,e){var n=t.callbackNode;UL(t,e);var r=sp(t,t===Nn?Mn:0);if(r===0)n!==null&&NT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&NT(n),e===1)t.tag===0?FV(bI.bind(null,t)):GR(bI.bind(null,t)),OV(function(){!(wt&6)&&jo()}),n=null;else{switch(IR(r)){case 1:n=g_;break;case 4:n=_R;break;case 16:n=rp;break;case 536870912:n=ER;break;default:n=rp}n=HP(n,UP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function UP(t,e){if(Df=-1,kf=0,wt&6)throw Error(te(327));var n=t.callbackNode;if(Bl()&&t.callbackNode!==n)return null;var r=sp(t,t===Nn?Mn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tp(t,r);else{e=r;var s=wt;wt|=2;var i=$P();(Nn!==t||Mn!==e)&&(ei=null,cc=hn()+500,Ra(t,e));do try{iM();break}catch(a){jP(t,a)}while(!0);P_(),wp.current=i,wt=s,En!==null?e=0:(Nn=null,Mn=0,e=bn)}if(e!==0){if(e===2&&(s=gv(t),s!==0&&(r=s,e=Wv(t,s))),e===1)throw n=Sd,Ra(t,0),Qi(t,r),Ar(t,hn()),n;if(e===6)Qi(t,r);else{if(s=t.current.alternate,!(r&30)&&!rM(s)&&(e=Tp(t,r),e===2&&(i=gv(t),i!==0&&(r=i,e=Wv(t,i))),e===1))throw n=Sd,Ra(t,0),Qi(t,r),Ar(t,hn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:Zo(t,wr,ei);break;case 3:if(Qi(t,r),(r&130023424)===r&&(e=W_+500-hn(),10<e)){if(sp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){cr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sv(Zo.bind(null,t,wr,ei),e);break}Zo(t,wr,ei);break;case 4:if(Qi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-fs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nM(r/1960))-r,10<r){t.timeoutHandle=Sv(Zo.bind(null,t,wr,ei),r);break}Zo(t,wr,ei);break;case 5:Zo(t,wr,ei);break;default:throw Error(te(329))}}}return Ar(t,hn()),t.callbackNode===n?UP.bind(null,t):null}function Wv(t,e){var n=Hu;return t.current.memoizedState.isDehydrated&&(Ra(t,e).flags|=256),t=Tp(t,e),t!==2&&(e=wr,wr=n,e!==null&&qv(e)),t}function qv(t){wr===null?wr=t:wr.push.apply(wr,t)}function rM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ys(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qi(t,e){for(e&=~z_,e&=~Am,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fs(e),r=1<<n;t[n]=-1,e&=~r}}function bI(t){if(wt&6)throw Error(te(327));Bl();var e=sp(t,0);if(!(e&1))return Ar(t,hn()),null;var n=Tp(t,e);if(t.tag!==0&&n===2){var r=gv(t);r!==0&&(e=r,n=Wv(t,r))}if(n===1)throw n=Sd,Ra(t,0),Qi(t,e),Ar(t,hn()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zo(t,wr,ei),Ar(t,hn()),null}function q_(t,e){var n=wt;wt|=1;try{return t(e)}finally{wt=n,wt===0&&(cc=hn()+500,Tm&&jo())}}function Fa(t){so!==null&&so.tag===0&&!(wt&6)&&Bl();var e=wt;wt|=1;var n=Xr.transition,r=It;try{if(Xr.transition=null,It=1,t)return t()}finally{It=r,Xr.transition=n,wt=e,!(wt&6)&&jo()}}function H_(){Pr=Ol.current,Ut(Ol)}function Ra(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NV(n)),En!==null)for(n=En.return;n!==null;){var r=n;switch(A_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cp();break;case 3:ac(),Ut(Sr),Ut(er),L_();break;case 5:O_(r);break;case 4:ac();break;case 13:Ut(Gt);break;case 19:Ut(Gt);break;case 10:C_(r.type._context);break;case 22:case 23:H_()}n=n.return}if(Nn=t,En=t=yo(t.current,null),Mn=Pr=e,bn=0,Sd=null,z_=Am=Ma=0,wr=Hu=null,da!==null){for(e=0;e<da.length;e++)if(n=da[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}da=null}return t}function jP(t,e){do{var n=En;try{if(P_(),Rf.current=vp,yp){for(var r=Yt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yp=!1}if(Va=0,Dn=Sn=Yt=null,Wu=!1,Ed=0,B_.current=null,n===null||n.return===null){bn=1,Sd=e,En=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Mn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=hI(o);if(p!==null){p.flags&=-257,fI(p,o,a,i,e),p.mode&1&&dI(i,c,e),e=p,l=c;var w=e.updateQueue;if(w===null){var g=new Set;g.add(l),e.updateQueue=g}else w.add(l);break e}else{if(!(e&1)){dI(i,c,e),K_();break e}l=Error(te(426))}}else if(zt&&a.mode&1){var v=hI(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),fI(v,o,a,i,e),x_(lc(l,a));break e}}i=l=lc(l,a),bn!==4&&(bn=2),Hu===null?Hu=[i]:Hu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=IP(i,l,e);iI(i,E);break e;case 1:a=l;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(mo===null||!mo.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=SP(i,a,e);iI(i,R);break e}}i=i.return}while(i!==null)}zP(n)}catch(k){e=k,En===n&&n!==null&&(En=n=n.return);continue}break}while(!0)}function $P(){var t=wp.current;return wp.current=vp,t===null?vp:t}function K_(){(bn===0||bn===3||bn===2)&&(bn=4),Nn===null||!(Ma&268435455)&&!(Am&268435455)||Qi(Nn,Mn)}function Tp(t,e){var n=wt;wt|=2;var r=$P();(Nn!==t||Mn!==e)&&(ei=null,Ra(t,e));do try{sM();break}catch(s){jP(t,s)}while(!0);if(P_(),wt=n,wp.current=r,En!==null)throw Error(te(261));return Nn=null,Mn=0,bn}function sM(){for(;En!==null;)BP(En)}function iM(){for(;En!==null&&!CL();)BP(En)}function BP(t){var e=qP(t.alternate,t,Pr);t.memoizedProps=t.pendingProps,e===null?zP(t):En=e,B_.current=null}function zP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XV(n,e),n!==null){n.flags&=32767,En=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bn=6,En=null;return}}else if(n=JV(n,e,Pr),n!==null){En=n;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);bn===0&&(bn=5)}function Zo(t,e,n){var r=It,s=Xr.transition;try{Xr.transition=null,It=1,oM(t,e,n,r)}finally{Xr.transition=s,It=r}return null}function oM(t,e,n,r){do Bl();while(so!==null);if(wt&6)throw Error(te(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jL(t,i),t===Nn&&(En=Nn=null,Mn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qh||(Qh=!0,HP(rp,function(){return Bl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xr.transition,Xr.transition=null;var o=It;It=1;var a=wt;wt|=4,B_.current=null,eM(t,n),MP(n,t),AV(Tv),ip=!!Ev,Tv=Ev=null,t.current=n,tM(n),DL(),wt=a,It=o,Xr.transition=i}else t.current=n;if(Qh&&(Qh=!1,so=t,Ep=s),i=t.pendingLanes,i===0&&(mo=null),OL(n.stateNode),Ar(t,hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_p)throw _p=!1,t=Bv,Bv=null,t;return Ep&1&&t.tag!==0&&Bl(),i=t.pendingLanes,i&1?t===zv?Ku++:(Ku=0,zv=t):Ku=0,jo(),null}function Bl(){if(so!==null){var t=IR(Ep),e=Xr.transition,n=It;try{if(Xr.transition=null,It=16>t?16:t,so===null)var r=!1;else{if(t=so,so=null,Ep=0,wt&6)throw Error(te(331));var s=wt;for(wt|=4,ve=t.current;ve!==null;){var i=ve,o=i.child;if(ve.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ve=c;ve!==null;){var d=ve;switch(d.tag){case 0:case 11:case 15:qu(8,d,i)}var h=d.child;if(h!==null)h.return=d,ve=h;else for(;ve!==null;){d=ve;var f=d.sibling,p=d.return;if(OP(d),d===c){ve=null;break}if(f!==null){f.return=p,ve=f;break}ve=p}}}var w=i.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ve=o;else e:for(;ve!==null;){if(i=ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qu(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ve=E;break e}ve=i.return}}var y=t.current;for(ve=y;ve!==null;){o=ve;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ve=_;else e:for(o=y;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bm(9,a)}}catch(k){on(a,a.return,k)}if(a===o){ve=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ve=R;break e}ve=a.return}}if(wt=s,jo(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(ym,t)}catch{}r=!0}return r}finally{It=n,Xr.transition=e}}return!1}function AI(t,e,n){e=lc(n,e),e=IP(t,e,1),t=po(t,e,1),e=cr(),t!==null&&(eh(t,1,e),Ar(t,e))}function on(t,e,n){if(t.tag===3)AI(t,t,n);else for(;e!==null;){if(e.tag===3){AI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mo===null||!mo.has(r))){t=lc(n,t),t=SP(e,t,1),e=po(e,t,1),t=cr(),e!==null&&(eh(e,1,t),Ar(e,t));break}}e=e.return}}function aM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=cr(),t.pingedLanes|=t.suspendedLanes&n,Nn===t&&(Mn&n)===n&&(bn===4||bn===3&&(Mn&130023424)===Mn&&500>hn()-W_?Ra(t,0):z_|=n),Ar(t,e)}function WP(t,e){e===0&&(t.mode&1?(e=Uh,Uh<<=1,!(Uh&130023424)&&(Uh=4194304)):e=1);var n=cr();t=mi(t,e),t!==null&&(eh(t,e,n),Ar(t,n))}function lM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WP(t,n)}function cM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),WP(t,n)}var qP;qP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sr.current)_r=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _r=!1,YV(t,e,n);_r=!!(t.flags&131072)}else _r=!1,zt&&e.flags&1048576&&QR(e,hp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cf(t,e),t=e.pendingProps;var s=sc(e,er.current);$l(e,n),s=M_(null,e,r,t,s,n);var i=F_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,br(r)?(i=!0,up(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,k_(e),s.updater=Sm,e.stateNode=s,s._reactInternals=e,Dv(e,r,t,n),e=Ov(null,e,r,!0,i,n)):(e.tag=0,zt&&i&&b_(e),or(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dM(r),t=is(r,t),s){case 0:e=Nv(null,e,r,t,n);break e;case 1:e=gI(null,e,r,t,n);break e;case 11:e=pI(null,e,r,t,n);break e;case 14:e=mI(null,e,r,is(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:is(r,s),Nv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:is(r,s),gI(t,e,r,s,n);case 3:e:{if(RP(e),t===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,tP(t,e),mp(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lc(Error(te(423)),e),e=yI(t,e,r,n,s);break e}else if(r!==s){s=lc(Error(te(424)),e),e=yI(t,e,r,n,s);break e}else for(Or=fo(e.stateNode.containerInfo.firstChild),Mr=e,zt=!0,us=null,n=ZR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ic(),r===s){e=gi(t,e,n);break e}or(t,e,r,n)}e=e.child}return e;case 5:return nP(e),t===null&&Rv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Iv(r,s)?o=null:i!==null&&Iv(r,i)&&(e.flags|=32),xP(t,e),or(t,e,o,n),e.child;case 6:return t===null&&Rv(e),null;case 13:return PP(t,e,n);case 4:return N_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oc(e,null,r,n):or(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:is(r,s),pI(t,e,r,s,n);case 7:return or(t,e,e.pendingProps,n),e.child;case 8:return or(t,e,e.pendingProps.children,n),e.child;case 12:return or(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Dt(fp,r._currentValue),r._currentValue=o,i!==null)if(ys(i.value,o)){if(i.children===s.children&&!Sr.current){e=gi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=li(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Pv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}or(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$l(e,n),s=es(s),r=r(s),e.flags|=1,or(t,e,r,n),e.child;case 14:return r=e.type,s=is(r,e.pendingProps),s=is(r.type,s),mI(t,e,r,s,n);case 15:return bP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:is(r,s),Cf(t,e),e.tag=1,br(r)?(t=!0,up(e)):t=!1,$l(e,n),TP(e,r,s),Dv(e,r,s,n),Ov(null,e,r,!0,t,n);case 19:return CP(t,e,n);case 22:return AP(t,e,n)}throw Error(te(156,e.tag))};function HP(t,e){return wR(t,e)}function uM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(t,e,n,r){return new uM(t,e,n,r)}function G_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dM(t){if(typeof t=="function")return G_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===f_)return 11;if(t===p_)return 14}return 2}function yo(t,e){var n=t.alternate;return n===null?(n=Jr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")G_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sl:return Pa(n.children,s,i,e);case h_:o=8,s|=8;break;case tv:return t=Jr(12,n,e,s|2),t.elementType=tv,t.lanes=i,t;case nv:return t=Jr(13,n,e,s),t.elementType=nv,t.lanes=i,t;case rv:return t=Jr(19,n,e,s),t.elementType=rv,t.lanes=i,t;case nR:return xm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eR:o=10;break e;case tR:o=9;break e;case f_:o=11;break e;case p_:o=14;break e;case qi:o=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Jr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Pa(t,e,n,r){return t=Jr(7,t,r,e),t.lanes=n,t}function xm(t,e,n,r){return t=Jr(22,t,r,e),t.elementType=nR,t.lanes=n,t.stateNode={isHidden:!1},t}function ay(t,e,n){return t=Jr(6,t,null,e),t.lanes=n,t}function ly(t,e,n){return e=Jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bg(0),this.expirationTimes=Bg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Q_(t,e,n,r,s,i,o,a,l){return t=new hM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},k_(i),t}function fM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Il,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KP(t){if(!t)return xo;t=t._reactInternals;e:{if(Ja(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(br(n))return KR(t,n,e)}return e}function GP(t,e,n,r,s,i,o,a,l){return t=Q_(n,r,!0,t,s,i,o,a,l),t.context=KP(null),n=t.current,r=cr(),s=go(n),i=li(r,s),i.callback=e??null,po(n,i,s),t.current.lanes=s,eh(t,s,r),Ar(t,r),t}function Rm(t,e,n,r){var s=e.current,i=cr(),o=go(s);return n=KP(n),e.context===null?e.context=n:e.pendingContext=n,e=li(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=po(s,e,o),t!==null&&(ps(t,s,o,i),xf(t,s,o)),o}function Ip(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Y_(t,e){xI(t,e),(t=t.alternate)&&xI(t,e)}function pM(){return null}var QP=typeof reportError=="function"?reportError:function(t){console.error(t)};function J_(t){this._internalRoot=t}Pm.prototype.render=J_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Rm(t,e,null,null)};Pm.prototype.unmount=J_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fa(function(){Rm(null,t,null,null)}),e[pi]=null}};function Pm(t){this._internalRoot=t}Pm.prototype.unstable_scheduleHydration=function(t){if(t){var e=AR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gi.length&&e!==0&&e<Gi[n].priority;n++);Gi.splice(n,0,t),n===0&&RR(t)}};function X_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function RI(){}function mM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ip(o);i.call(c)}}var o=GP(e,r,t,0,null,!1,!1,"",RI);return t._reactRootContainer=o,t[pi]=o.current,gd(t.nodeType===8?t.parentNode:t),Fa(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ip(l);a.call(c)}}var l=Q_(t,0,!1,null,null,!1,!1,"",RI);return t._reactRootContainer=l,t[pi]=l.current,gd(t.nodeType===8?t.parentNode:t),Fa(function(){Rm(e,l,n,r)}),l}function Dm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ip(o);a.call(l)}}Rm(e,o,t,s)}else o=mM(n,e,t,s,r);return Ip(o)}SR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pu(e.pendingLanes);n!==0&&(y_(e,n|1),Ar(e,hn()),!(wt&6)&&(cc=hn()+500,jo()))}break;case 13:Fa(function(){var r=mi(t,1);if(r!==null){var s=cr();ps(r,t,1,s)}}),Y_(t,1)}};v_=function(t){if(t.tag===13){var e=mi(t,134217728);if(e!==null){var n=cr();ps(e,t,134217728,n)}Y_(t,134217728)}};bR=function(t){if(t.tag===13){var e=go(t),n=mi(t,e);if(n!==null){var r=cr();ps(n,t,e,r)}Y_(t,e)}};AR=function(){return It};xR=function(t,e){var n=It;try{return It=t,e()}finally{It=n}};fv=function(t,e,n){switch(e){case"input":if(ov(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Em(r);if(!s)throw Error(te(90));sR(r),ov(r,s)}}}break;case"textarea":oR(t,n);break;case"select":e=n.value,e!=null&&Ml(t,!!n.multiple,e,!1)}};fR=q_;pR=Fa;var gM={usingClientEntryPoint:!1,Events:[nh,Rl,Em,dR,hR,q_]},yu={findFiberByHostInstance:ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yM={bundleType:yu.bundleType,version:yu.version,rendererPackageName:yu.rendererPackageName,rendererConfig:yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yR(t),t===null?null:t.stateNode},findFiberByHostInstance:yu.findFiberByHostInstance||pM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{ym=Yh.inject(yM),js=Yh}catch{}}zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gM;zr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X_(e))throw Error(te(200));return fM(t,e,null,n)};zr.createRoot=function(t,e){if(!X_(t))throw Error(te(299));var n=!1,r="",s=QP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Q_(t,1,!1,null,null,n,!1,r,s),t[pi]=e.current,gd(t.nodeType===8?t.parentNode:t),new J_(e)};zr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=yR(e),t=t===null?null:t.stateNode,t};zr.flushSync=function(t){return Fa(t)};zr.hydrate=function(t,e,n){if(!Cm(e))throw Error(te(200));return Dm(null,t,e,!0,n)};zr.hydrateRoot=function(t,e,n){if(!X_(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=QP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=GP(e,null,t,1,n??null,s,!1,i,o),t[pi]=e.current,gd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pm(e)};zr.render=function(t,e,n){if(!Cm(e))throw Error(te(200));return Dm(null,t,e,!1,n)};zr.unmountComponentAtNode=function(t){if(!Cm(t))throw Error(te(40));return t._reactRootContainer?(Fa(function(){Dm(null,null,t,!1,function(){t._reactRootContainer=null,t[pi]=null})}),!0):!1};zr.unstable_batchedUpdates=q_;zr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cm(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return Dm(t,e,n,!1,r)};zr.version="18.3.1-next-f1338f8080-20240426";function YP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YP)}catch(t){console.error(t)}}YP(),Yx.exports=zr;var sh=Yx.exports;const JP=Fx(sh);var XP,PI=sh;XP=PI.createRoot,PI.hydrateRoot;const vM="modulepreload",wM=function(t,e){return new URL(t,e).href},CI={},Q=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=wM(c,r),c in CI)return;CI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let w=o.length-1;w>=0;w--){const g=o[w];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":vM,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((w,g)=>{p.addEventListener("load",w),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},_M=1,EM=1e6;let cy=0;function TM(){return cy=(cy+1)%Number.MAX_SAFE_INTEGER,cy.toString()}const uy=new Map,DI=t=>{if(uy.has(t))return;const e=setTimeout(()=>{uy.delete(t),Gu({type:"REMOVE_TOAST",toastId:t})},EM);uy.set(t,e)},IM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,_M)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?DI(n):t.toasts.forEach(r=>{DI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Of=[];let Lf={toasts:[]};function Gu(t){Lf=IM(Lf,t),Of.forEach(e=>{e(Lf)})}function SM({...t}){const e=TM(),n=s=>Gu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Gu({type:"DISMISS_TOAST",toastId:e});return Gu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Z_(){const[t,e]=S.useState(Lf);return S.useEffect(()=>(Of.push(e),()=>{const n=Of.indexOf(e);n>-1&&Of.splice(n,1)}),[t]),{...t,toast:SM,dismiss:n=>Gu({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function kI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ZP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=kI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():kI(t[s],null)}}}}function Un(...t){return S.useCallback(ZP(...t),t)}function bM(t,e){const n=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return I.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Vc(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:p,...w}=h,g=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,v=S.useMemo(()=>w,Object.values(w));return I.jsx(g.Provider,{value:v,children:p})};c.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,w=S.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,AM(s,...e)]}function AM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function bd(t){const e=RM(t),n=S.forwardRef((r,s)=>{const{children:i,...o}=r,a=S.Children.toArray(i),l=a.find(CM);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return I.jsx(e,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return I.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var xM=bd("Slot");function RM(t){const e=S.forwardRef((n,r)=>{const{children:s,...i}=n;if(S.isValidElement(s)){const o=kM(s),a=DM(i,s.props);return s.type!==S.Fragment&&(a.ref=r?ZP(r,o):o),S.cloneElement(s,a)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var e1=Symbol("radix.slottable");function PM(t){const e=({children:n})=>I.jsx(I.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=e1,e}function CM(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===e1}function DM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function kM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function NM(t){const e=t+"CollectionProvider",[n,r]=Vc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:E}=g,y=$.useRef(null),_=$.useRef(new Map).current;return I.jsx(s,{scope:v,itemMap:_,collectionRef:y,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=bd(a),c=$.forwardRef((g,v)=>{const{scope:E,children:y}=g,_=i(a,E),R=Un(v,_.collectionRef);return I.jsx(l,{ref:R,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=bd(d),p=$.forwardRef((g,v)=>{const{scope:E,children:y,..._}=g,R=$.useRef(null),k=Un(v,R),L=i(d,E);return $.useEffect(()=>(L.itemMap.set(R,{ref:R,..._}),()=>void L.itemMap.delete(R))),I.jsx(f,{[h]:"",ref:k,children:y})});p.displayName=d;function w(g){const v=i(t+"CollectionConsumer",g);return $.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const _=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((L,x)=>_.indexOf(L.ref.current)-_.indexOf(x.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},w,r]}var OM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xt=OM.reduce((t,e)=>{const n=bd(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function t1(t,e){t&&sh.flushSync(()=>t.dispatchEvent(e))}function qs(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function LM(t,e=globalThis==null?void 0:globalThis.document){const n=qs(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var VM="DismissableLayer",Hv="dismissableLayer.update",MM="dismissableLayer.pointerDownOutside",FM="dismissableLayer.focusOutside",NI,n1=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),km=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(n1),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=S.useState({}),w=Un(e,x=>h(x)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=g.indexOf(v),y=d?g.indexOf(d):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,R=y>=E,k=jM(x=>{const A=x.target,b=[...c.branches].some(P=>P.contains(A));!R||b||(s==null||s(x),o==null||o(x),x.defaultPrevented||a==null||a())},f),L=$M(x=>{const A=x.target;[...c.branches].some(P=>P.contains(A))||(i==null||i(x),o==null||o(x),x.defaultPrevented||a==null||a())},f);return LM(x=>{y===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(NI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),OI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=NI)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),OI())},[d,c]),S.useEffect(()=>{const x=()=>p({});return document.addEventListener(Hv,x),()=>document.removeEventListener(Hv,x)},[]),I.jsx(Xt.div,{...l,ref:w,style:{pointerEvents:_?R?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,k.onPointerDownCapture)})});km.displayName=VM;var UM="DismissableLayerBranch",r1=S.forwardRef((t,e)=>{const n=S.useContext(n1),r=S.useRef(null),s=Un(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),I.jsx(Xt.div,{...t,ref:s})});r1.displayName=UM;function jM(t,e=globalThis==null?void 0:globalThis.document){const n=qs(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){s1(MM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function $M(t,e=globalThis==null?void 0:globalThis.document){const n=qs(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&s1(FM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function OI(){const t=new CustomEvent(Hv);document.dispatchEvent(t)}function s1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?t1(s,i):s.dispatchEvent(i)}var BM=km,zM=r1,yi=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},WM="Portal",e0=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);yi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?JP.createPortal(I.jsx(Xt.div,{...r,ref:e}),o):null});e0.displayName=WM;function qM(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var Xa=t=>{const{present:e,children:n}=t,r=HM(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=Un(r.ref,KM(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};Xa.displayName="Presence";function HM(t){const[e,n]=S.useState(),r=S.useRef(null),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=qM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=Jh(r.current);i.current=a==="mounted"?c:"none"},[a]),yi(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=Jh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),yi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const g=Jh(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(i.current=Jh(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Jh(t){return(t==null?void 0:t.animationName)||"none"}function KM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var GM=l_[" useInsertionEffect ".trim().toString()]||yi;function t0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=QM({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const f=YM(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function QM({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),s=S.useRef(n),i=S.useRef(e);return GM(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function YM(t){return typeof t=="function"}var JM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XM="VisuallyHidden",Nm=S.forwardRef((t,e)=>I.jsx(Xt.span,{...t,ref:e,style:{...JM,...t.style}}));Nm.displayName=XM;var ZM=Nm,n0="ToastProvider",[r0,eF,tF]=NM("Toast"),[i1]=Vc("Toast",[tF]),[nF,Om]=i1(n0),o1=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=S.useState(null),[c,d]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${n0}\`. Expected non-empty \`string\`.`),I.jsx(r0.Provider,{scope:e,children:I.jsx(nF,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>d(p=>p+1),[]),onToastRemove:S.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};o1.displayName=n0;var a1="ToastViewport",rF=["F8"],Kv="toast.viewportPause",Gv="toast.viewportResume",l1=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=rF,label:s="Notifications ({hotkey})",...i}=t,o=Om(a1,n),a=eF(n),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=Un(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;S.useEffect(()=>{const v=E=>{var _;r.length!==0&&r.every(R=>E[R]||E.code===R)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),S.useEffect(()=>{const v=l.current,E=h.current;if(w&&v&&E){const y=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(Kv);E.dispatchEvent(L),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(Gv);E.dispatchEvent(L),o.isClosePausedRef.current=!1}},R=L=>{!v.contains(L.relatedTarget)&&_()},k=()=>{v.contains(document.activeElement)||_()};return v.addEventListener("focusin",y),v.addEventListener("focusout",R),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",_),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",R),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",_)}}},[w,o.isClosePausedRef]);const g=S.useCallback(({tabbingDirection:v})=>{const y=a().map(_=>{const R=_.ref.current,k=[R,...gF(R)];return v==="forwards"?k:k.reverse()});return(v==="forwards"?y.reverse():y).flat()},[a]);return S.useEffect(()=>{const v=h.current;if(v){const E=y=>{var k,L,x;const _=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!_){const A=document.activeElement,b=y.shiftKey;if(y.target===v&&b){(k=c.current)==null||k.focus();return}const O=g({tabbingDirection:b?"backwards":"forwards"}),C=O.findIndex(j=>j===A);dy(O.slice(C+1))?y.preventDefault():b?(L=c.current)==null||L.focus():(x=d.current)==null||x.focus()}};return v.addEventListener("keydown",E),()=>v.removeEventListener("keydown",E)}},[a,g]),I.jsxs(zM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&I.jsx(Qv,{ref:c,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});dy(v)}}),I.jsx(r0.Slot,{scope:n,children:I.jsx(Xt.ol,{tabIndex:-1,...i,ref:f})}),w&&I.jsx(Qv,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});dy(v)}})]})});l1.displayName=a1;var c1="ToastFocusProxy",Qv=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Om(c1,n);return I.jsx(Nm,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Qv.displayName=c1;var ih="Toast",sF="toast.swipeStart",iF="toast.swipeMove",oF="toast.swipeCancel",aF="toast.swipeEnd",u1=S.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=t0({prop:r,defaultProp:s??!0,onChange:i,caller:ih});return I.jsx(Xa,{present:n||a,children:I.jsx(uF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:qs(t.onPause),onResume:qs(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});u1.displayName=ih;var[lF,cF]=i1(ih,{onClose(){}}),uF=S.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...w}=t,g=Om(ih,n),[v,E]=S.useState(null),y=Un(e,j=>E(j)),_=S.useRef(null),R=S.useRef(null),k=s||g.duration,L=S.useRef(0),x=S.useRef(k),A=S.useRef(0),{onToastAdd:b,onToastRemove:P}=g,D=qs(()=>{var se;(v==null?void 0:v.contains(document.activeElement))&&((se=g.viewport)==null||se.focus()),o()}),O=S.useCallback(j=>{!j||j===1/0||(window.clearTimeout(A.current),L.current=new Date().getTime(),A.current=window.setTimeout(D,j))},[D]);S.useEffect(()=>{const j=g.viewport;if(j){const se=()=>{O(x.current),c==null||c()},ie=()=>{const ue=new Date().getTime()-L.current;x.current=x.current-ue,window.clearTimeout(A.current),l==null||l()};return j.addEventListener(Kv,ie),j.addEventListener(Gv,se),()=>{j.removeEventListener(Kv,ie),j.removeEventListener(Gv,se)}}},[g.viewport,k,l,c,O]),S.useEffect(()=>{i&&!g.isClosePausedRef.current&&O(k)},[i,k,g.isClosePausedRef,O]),S.useEffect(()=>(b(),()=>P()),[b,P]);const C=S.useMemo(()=>v?y1(v):null,[v]);return g.viewport?I.jsxs(I.Fragment,{children:[C&&I.jsx(dF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),I.jsx(lF,{scope:n,onClose:D,children:sh.createPortal(I.jsx(r0.ItemSlot,{scope:n,children:I.jsx(BM,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:I.jsx(Xt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,j=>{j.key==="Escape"&&(a==null||a(j.nativeEvent),j.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Ct(t.onPointerDown,j=>{j.button===0&&(_.current={x:j.clientX,y:j.clientY})}),onPointerMove:Ct(t.onPointerMove,j=>{if(!_.current)return;const se=j.clientX-_.current.x,ie=j.clientY-_.current.y,ue=!!R.current,U=["left","right"].includes(g.swipeDirection),V=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ee=U?V(0,se):0,ae=U?0:V(0,ie),H=j.pointerType==="touch"?10:2,Ne={x:ee,y:ae},Te={originalEvent:j,delta:Ne};ue?(R.current=Ne,Xh(iF,h,Te,{discrete:!1})):LI(Ne,g.swipeDirection,H)?(R.current=Ne,Xh(sF,d,Te,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(se)>H||Math.abs(ie)>H)&&(_.current=null)}),onPointerUp:Ct(t.onPointerUp,j=>{const se=R.current,ie=j.target;if(ie.hasPointerCapture(j.pointerId)&&ie.releasePointerCapture(j.pointerId),R.current=null,_.current=null,se){const ue=j.currentTarget,U={originalEvent:j,delta:se};LI(se,g.swipeDirection,g.swipeThreshold)?Xh(aF,p,U,{discrete:!0}):Xh(oF,f,U,{discrete:!0}),ue.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),dF=t=>{const{__scopeToast:e,children:n,...r}=t,s=Om(ih,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return pF(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:I.jsx(e0,{asChild:!0,children:I.jsx(Nm,{...r,children:i&&I.jsxs(I.Fragment,{children:[s.label," ",n]})})})},hF="ToastTitle",d1=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return I.jsx(Xt.div,{...r,ref:e})});d1.displayName=hF;var fF="ToastDescription",h1=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return I.jsx(Xt.div,{...r,ref:e})});h1.displayName=fF;var f1="ToastAction",p1=S.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?I.jsx(g1,{altText:n,asChild:!0,children:I.jsx(s0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${f1}\`. Expected non-empty \`string\`.`),null)});p1.displayName=f1;var m1="ToastClose",s0=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=cF(m1,n);return I.jsx(g1,{asChild:!0,children:I.jsx(Xt.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});s0.displayName=m1;var g1=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return I.jsx(Xt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function y1(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),mF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...y1(r))}}),e}function Xh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?t1(s,i):s.dispatchEvent(i)}var LI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function pF(t=()=>{}){const e=qs(t);yi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function mF(t){return t.nodeType===t.ELEMENT_NODE}function gF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function dy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var yF=o1,v1=l1,w1=u1,_1=d1,E1=h1,T1=p1,I1=s0;function S1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=S1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function b1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=S1(t))&&(r&&(r+=" "),r+=e);return r}const VI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,MI=b1,A1=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return MI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=VI(d)||VI(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(w=>{let[g,v]=w;return Array.isArray(v)?v.includes({...i,...a}[g]):{...i,...a}[g]===v})?[...c,h,f]:c},[]);return MI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...wF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:x1("lucide",s),...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=(t,e)=>{const n=S.forwardRef(({className:r,...s},i)=>S.createElement(_F,{ref:i,iconNode:e,className:x1(`lucide-${vF(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=Nt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Nt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=Nt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=Nt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=Nt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Nt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Nt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=Nt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=Nt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=Nt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=Nt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=Nt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Nt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Nt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=Nt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=Nt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=Nt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Nt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Nt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=Nt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Nt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=Nt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Nt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Nt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=Nt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),o0="-",jF=t=>{const e=BF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(o0);return a[0]===""&&a.length!==1&&a.shift(),P1(a,e)||$F(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},P1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?P1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(o0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},BI=/^\[(.+)\]$/,$F=t=>{if(BI.test(t)){const e=BI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},BF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return WF(Object.entries(t.classGroups),n).forEach(([i,o])=>{Yv(o,r,i,e)}),r},Yv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:zI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(zF(s)){Yv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Yv(o,zI(e,i),n,r)})})},zI=(t,e)=>{let n=t;return e.split(o0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zF=t=>t.isThemeGetter,WF=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,qF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},C1="!",HF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let E=a[v];if(c===0){if(E===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(E==="/"){h=v;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(C1),w=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},KF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},GF=t=>({cache:qF(t.cacheSize),parseClassName:HF(t),...jF(t)}),QF=/\s+/,YF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(QF);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let w=!!p,g=r(w?f.substring(0,p):f);if(!g){if(!w){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}w=!1}const v=KF(d).join(":"),E=h?v+C1:v,y=E+g;if(i.includes(y))continue;i.push(y);const _=s(g,w);for(let R=0;R<_.length;++R){const k=_[R];i.push(E+k)}a=c+(a.length>0?" "+a:a)}return a};function JF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=D1(e))&&(r&&(r+=" "),r+=n);return r}const D1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=D1(t[r]))&&(n&&(n+=" "),n+=e);return n};function XF(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=GF(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=YF(l,n);return s(l,d),d}return function(){return i(JF.apply(null,arguments))}}const Mt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},k1=/^\[(?:([a-z-]+):)?(.+)\]$/i,ZF=/^\d+\/\d+$/,eU=new Set(["px","full","screen"]),tU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xs=t=>zl(t)||eU.has(t)||ZF.test(t),Mi=t=>Mc(t,"length",fU),zl=t=>!!t&&!Number.isNaN(Number(t)),fy=t=>Mc(t,"number",zl),vu=t=>!!t&&Number.isInteger(Number(t)),oU=t=>t.endsWith("%")&&zl(t.slice(0,-1)),Xe=t=>k1.test(t),Fi=t=>tU.test(t),aU=new Set(["length","size","percentage"]),lU=t=>Mc(t,aU,N1),cU=t=>Mc(t,"position",N1),uU=new Set(["image","url"]),dU=t=>Mc(t,uU,mU),hU=t=>Mc(t,"",pU),wu=()=>!0,Mc=(t,e,n)=>{const r=k1.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},fU=t=>nU.test(t)&&!rU.test(t),N1=()=>!1,pU=t=>sU.test(t),mU=t=>iU.test(t),gU=()=>{const t=Mt("colors"),e=Mt("spacing"),n=Mt("blur"),r=Mt("brightness"),s=Mt("borderColor"),i=Mt("borderRadius"),o=Mt("borderSpacing"),a=Mt("borderWidth"),l=Mt("contrast"),c=Mt("grayscale"),d=Mt("hueRotate"),h=Mt("invert"),f=Mt("gap"),p=Mt("gradientColorStops"),w=Mt("gradientColorStopPositions"),g=Mt("inset"),v=Mt("margin"),E=Mt("opacity"),y=Mt("padding"),_=Mt("saturate"),R=Mt("scale"),k=Mt("sepia"),L=Mt("skew"),x=Mt("space"),A=Mt("translate"),b=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Xe,e],O=()=>[Xe,e],C=()=>["",Xs,Mi],j=()=>["auto",zl,Xe],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Xe],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[zl,Xe];return{cacheSize:500,separator:":",theme:{colors:[wu],spacing:[Xs,Mi],blur:["none","",Fi,Xe],brightness:ae(),borderColor:[t],borderRadius:["none","","full",Fi,Xe],borderSpacing:O(),borderWidth:C(),contrast:ae(),grayscale:V(),hueRotate:ae(),invert:V(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[oU,Mi],inset:D(),margin:D(),opacity:ae(),padding:O(),saturate:ae(),scale:ae(),sepia:V(),skew:ae(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[Fi]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),Xe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vu,Xe]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",vu,Xe]}],"grid-cols":[{"grid-cols":[wu]}],"col-start-end":[{col:["auto",{span:["full",vu,Xe]},Xe]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[wu]}],"row-start-end":[{row:["auto",{span:[vu,Xe]},Xe]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,e]}],"min-w":[{"min-w":[Xe,e,"min","max","fit"]}],"max-w":[{"max-w":[Xe,e,"none","full","min","max","fit","prose",{screen:[Fi]},Fi]}],h:[{h:[Xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Fi,Mi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fy]}],"font-family":[{font:[wu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",zl,fy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xs,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xs,Mi]}],"underline-offset":[{"underline-offset":["auto",Xs,Xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),cU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:ie()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[Xs,Xe]}],"outline-w":[{outline:[Xs,Mi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Xs,Mi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Fi,hU]}],"shadow-color":[{shadow:[wu]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ue(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ue()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Fi,Xe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[vu,Xe]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Xs,Mi,fy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yU=XF(gU);function jn(...t){return yU(b1(t))}const vU=yF,O1=S.forwardRef(({className:t,...e},n)=>I.jsx(v1,{ref:n,className:jn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));O1.displayName=v1.displayName;const wU=A1("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),L1=S.forwardRef(({className:t,variant:e,...n},r)=>I.jsx(w1,{ref:r,className:jn(wU({variant:e}),t),...n}));L1.displayName=w1.displayName;const _U=S.forwardRef(({className:t,...e},n)=>I.jsx(T1,{ref:n,className:jn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));_U.displayName=T1.displayName;const V1=S.forwardRef(({className:t,...e},n)=>I.jsx(I1,{ref:n,className:jn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:I.jsx(i0,{className:"h-4 w-4"})}));V1.displayName=I1.displayName;const M1=S.forwardRef(({className:t,...e},n)=>I.jsx(_1,{ref:n,className:jn("text-sm font-semibold",t),...e}));M1.displayName=_1.displayName;const F1=S.forwardRef(({className:t,...e},n)=>I.jsx(E1,{ref:n,className:jn("text-sm opacity-90",t),...e}));F1.displayName=E1.displayName;function EU(){const{toasts:t}=Z_();return I.jsxs(vU,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return I.jsxs(L1,{...i,children:[I.jsxs("div",{className:"grid gap-1",children:[n&&I.jsx(M1,{children:n}),r&&I.jsx(F1,{children:r})]}),s,I.jsx(V1,{})]},e)}),I.jsx(O1,{})]})}var Sp=["light","dark"],a0="(prefers-color-scheme: dark)",TU=typeof window>"u",l0=S.createContext(void 0),IU={setTheme:t=>{},themes:[]},U1=()=>{var t;return(t=S.useContext(l0))!=null?t:IU},SU=t=>S.useContext(l0)?t.children:S.createElement(AU,{...t}),bU=["light","dark"],AU=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=bU,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=S.useState(()=>WI(s,o)),[p,w]=S.useState(()=>WI(s)),g=l?Object.values(l):i,v=S.useCallback(R=>{let k=R;if(!k)return;R==="system"&&n&&(k=qI());let L=l?l[k]:k,x=e?RU():null,A=document.documentElement;if(a==="class"?(A.classList.remove(...g),L&&A.classList.add(L)):L?A.setAttribute(a,L):A.removeAttribute(a),r){let b=Sp.includes(o)?o:null,P=Sp.includes(k)?k:b;A.style.colorScheme=P}x==null||x()},[]),E=S.useCallback(R=>{let k=typeof R=="function"?R(R):R;f(k);try{localStorage.setItem(s,k)}catch{}},[t]),y=S.useCallback(R=>{let k=qI(R);w(k),h==="system"&&n&&!t&&v("system")},[h,t]);S.useEffect(()=>{let R=window.matchMedia(a0);return R.addListener(y),y(R),()=>R.removeListener(y)},[y]),S.useEffect(()=>{let R=k=>{if(k.key!==s)return;let L=k.newValue||o;E(L)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[E]),S.useEffect(()=>{v(t??h)},[t,h]);let _=S.useMemo(()=>({theme:h,setTheme:E,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,E,t,p,n,i]);return S.createElement(l0.Provider,{value:_},S.createElement(xU,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:d}),c)},xU=S.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Sp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,g=!1,v=!0)=>{let E=o?o[w]:w,y=g?w+"|| ''":`'${E}'`,_="";return s&&v&&!g&&Sp.includes(w)&&(_+=`d.style.colorScheme = '${w}';`),n==="class"?g||E?_+=`c.add(${y})`:_+="null":E&&(_+=`d[s](n,${y})`),_},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${a0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),WI=(t,e)=>{if(TU)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},RU=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},qI=t=>(t||(t=window.matchMedia(a0)),t.matches?"dark":"light"),PU=t=>{switch(t){case"success":return kU;case"info":return OU;case"warning":return NU;case"error":return LU;default:return null}},CU=Array(12).fill(0),DU=({visible:t,className:e})=>$.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},$.createElement("div",{className:"sonner-spinner"},CU.map((n,r)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),kU=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),NU=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),OU=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),LU=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),VU=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),MU=()=>{let[t,e]=$.useState(document.hidden);return $.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Jv=1,FU=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Jv++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],$.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(jU(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Jv++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},yr=new FU,UU=(t,e)=>{let n=(e==null?void 0:e.id)||Jv++;return yr.addToast({title:t,...e,id:n}),n},jU=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",$U=UU,BU=()=>yr.toasts,zU=()=>yr.getActiveToasts(),Hn=Object.assign($U,{success:yr.success,info:yr.info,warning:yr.warning,error:yr.error,custom:yr.custom,message:yr.message,promise:yr.promise,dismiss:yr.dismiss,loading:yr.loading},{getHistory:BU,getToasts:zU});function WU(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}WU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Zh(t){return t.label!==void 0}var qU=3,HU="32px",KU="16px",HI=4e3,GU=356,QU=14,YU=20,JU=200;function ss(...t){return t.filter(Boolean).join(" ")}function XU(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var ZU=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:w,interacting:g,setHeights:v,visibleToasts:E,heights:y,index:_,toasts:R,expanded:k,removeToast:L,defaultRichColors:x,closeButton:A,style:b,cancelButtonStyle:P,actionButtonStyle:D,className:O="",descriptionClassName:C="",duration:j,position:se,gap:ie,loadingIcon:ue,expandByDefault:U,classNames:V,icons:ee,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:H}=t,[Ne,Te]=$.useState(null),[Oe,Je]=$.useState(null),[Se,Ht]=$.useState(!1),[Ze,Be]=$.useState(!1),[We,Ot]=$.useState(!1),[en,On]=$.useState(!1),[pr,yn]=$.useState(!1),[mr,Le]=$.useState(0),[gt,vn]=$.useState(0),xr=$.useRef(p.duration||j||HI),Ho=$.useRef(null),J=$.useRef(null),G=_===0,X=_+1<=E,K=p.type,Z=p.dismissible!==!1,oe=p.className||"",he=p.descriptionClassName||"",ge=$.useMemo(()=>y.findIndex(pe=>pe.toastId===p.id)||0,[y,p.id]),_e=$.useMemo(()=>{var pe;return(pe=p.closeButton)!=null?pe:A},[p.closeButton,A]),ze=$.useMemo(()=>p.duration||j||HI,[p.duration,j]),de=$.useRef(0),Me=$.useRef(0),ye=$.useRef(0),fe=$.useRef(null),[Fe,De]=se.split("-"),st=$.useMemo(()=>y.reduce((pe,ne,Ce)=>Ce>=ge?pe:pe+ne.height,0),[y,ge]),At=MU(),tn=p.invert||f,Ye=K==="loading";Me.current=$.useMemo(()=>ge*ie+st,[ge,st]),$.useEffect(()=>{xr.current=ze},[ze]),$.useEffect(()=>{Ht(!0)},[]),$.useEffect(()=>{let pe=J.current;if(pe){let ne=pe.getBoundingClientRect().height;return vn(ne),v(Ce=>[{toastId:p.id,height:ne,position:p.position},...Ce]),()=>v(Ce=>Ce.filter(me=>me.toastId!==p.id))}},[v,p.id]),$.useLayoutEffect(()=>{if(!Se)return;let pe=J.current,ne=pe.style.height;pe.style.height="auto";let Ce=pe.getBoundingClientRect().height;pe.style.height=ne,vn(Ce),v(me=>me.find(Qe=>Qe.toastId===p.id)?me.map(Qe=>Qe.toastId===p.id?{...Qe,height:Ce}:Qe):[{toastId:p.id,height:Ce,position:p.position},...me])},[Se,p.title,p.description,v,p.id]);let ot=$.useCallback(()=>{Be(!0),Le(Me.current),v(pe=>pe.filter(ne=>ne.toastId!==p.id)),setTimeout(()=>{L(p)},JU)},[p,L,v,Me]);$.useEffect(()=>{if(p.promise&&K==="loading"||p.duration===1/0||p.type==="loading")return;let pe;return k||g||H&&At?(()=>{if(ye.current<de.current){let ne=new Date().getTime()-de.current;xr.current=xr.current-ne}ye.current=new Date().getTime()})():xr.current!==1/0&&(de.current=new Date().getTime(),pe=setTimeout(()=>{var ne;(ne=p.onAutoClose)==null||ne.call(p,p),ot()},xr.current)),()=>clearTimeout(pe)},[k,g,p,K,H,At,ot]),$.useEffect(()=>{p.delete&&ot()},[ot,p.delete]);function at(){var pe,ne,Ce;return ee!=null&&ee.loading?$.createElement("div",{className:ss(V==null?void 0:V.loader,(pe=p==null?void 0:p.classNames)==null?void 0:pe.loader,"sonner-loader"),"data-visible":K==="loading"},ee.loading):ue?$.createElement("div",{className:ss(V==null?void 0:V.loader,(ne=p==null?void 0:p.classNames)==null?void 0:ne.loader,"sonner-loader"),"data-visible":K==="loading"},ue):$.createElement(DU,{className:ss(V==null?void 0:V.loader,(Ce=p==null?void 0:p.classNames)==null?void 0:Ce.loader),visible:K==="loading"})}return $.createElement("li",{tabIndex:0,ref:J,className:ss(O,oe,V==null?void 0:V.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[K],(n=p==null?void 0:p.classNames)==null?void 0:n[K]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:x,"data-styled":!(p.jsx||p.unstyled||w),"data-mounted":Se,"data-promise":!!p.promise,"data-swiped":pr,"data-removed":Ze,"data-visible":X,"data-y-position":Fe,"data-x-position":De,"data-index":_,"data-front":G,"data-swiping":We,"data-dismissible":Z,"data-type":K,"data-invert":tn,"data-swipe-out":en,"data-swipe-direction":Oe,"data-expanded":!!(k||U&&Se),style:{"--index":_,"--toasts-before":_,"--z-index":R.length-_,"--offset":`${Ze?mr:Me.current}px`,"--initial-height":U?"auto":`${gt}px`,...b,...p.style},onDragEnd:()=>{Ot(!1),Te(null),fe.current=null},onPointerDown:pe=>{Ye||!Z||(Ho.current=new Date,Le(Me.current),pe.target.setPointerCapture(pe.pointerId),pe.target.tagName!=="BUTTON"&&(Ot(!0),fe.current={x:pe.clientX,y:pe.clientY}))},onPointerUp:()=>{var pe,ne,Ce,me;if(en||!Z)return;fe.current=null;let Qe=Number(((pe=J.current)==null?void 0:pe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),je=Number(((ne=J.current)==null?void 0:ne.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ft=new Date().getTime()-((Ce=Ho.current)==null?void 0:Ce.getTime()),Ae=Ne==="x"?Qe:je,yt=Math.abs(Ae)/ft;if(Math.abs(Ae)>=YU||yt>.11){Le(Me.current),(me=p.onDismiss)==null||me.call(p,p),Je(Ne==="x"?Qe>0?"right":"left":je>0?"down":"up"),ot(),On(!0),yn(!1);return}Ot(!1),Te(null)},onPointerMove:pe=>{var ne,Ce,me,Qe;if(!fe.current||!Z||((ne=window.getSelection())==null?void 0:ne.toString().length)>0)return;let je=pe.clientY-fe.current.y,ft=pe.clientX-fe.current.x,Ae=(Ce=t.swipeDirections)!=null?Ce:XU(se);!Ne&&(Math.abs(ft)>1||Math.abs(je)>1)&&Te(Math.abs(ft)>Math.abs(je)?"x":"y");let yt={x:0,y:0};Ne==="y"?(Ae.includes("top")||Ae.includes("bottom"))&&(Ae.includes("top")&&je<0||Ae.includes("bottom")&&je>0)&&(yt.y=je):Ne==="x"&&(Ae.includes("left")||Ae.includes("right"))&&(Ae.includes("left")&&ft<0||Ae.includes("right")&&ft>0)&&(yt.x=ft),(Math.abs(yt.x)>0||Math.abs(yt.y)>0)&&yn(!0),(me=J.current)==null||me.style.setProperty("--swipe-amount-x",`${yt.x}px`),(Qe=J.current)==null||Qe.style.setProperty("--swipe-amount-y",`${yt.y}px`)}},_e&&!p.jsx?$.createElement("button",{"aria-label":ae,"data-disabled":Ye,"data-close-button":!0,onClick:Ye||!Z?()=>{}:()=>{var pe;ot(),(pe=p.onDismiss)==null||pe.call(p,p)},className:ss(V==null?void 0:V.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=ee==null?void 0:ee.close)!=null?i:VU):null,p.jsx||S.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:$.createElement($.Fragment,null,K||p.icon||p.promise?$.createElement("div",{"data-icon":"",className:ss(V==null?void 0:V.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||at():null,p.type!=="loading"?p.icon||(ee==null?void 0:ee[K])||PU(K):null):null,$.createElement("div",{"data-content":"",className:ss(V==null?void 0:V.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},$.createElement("div",{"data-title":"",className:ss(V==null?void 0:V.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?$.createElement("div",{"data-description":"",className:ss(C,he,V==null?void 0:V.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),S.isValidElement(p.cancel)?p.cancel:p.cancel&&Zh(p.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||P,onClick:pe=>{var ne,Ce;Zh(p.cancel)&&Z&&((Ce=(ne=p.cancel).onClick)==null||Ce.call(ne,pe),ot())},className:ss(V==null?void 0:V.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,S.isValidElement(p.action)?p.action:p.action&&Zh(p.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||D,onClick:pe=>{var ne,Ce;Zh(p.action)&&((Ce=(ne=p.action).onClick)==null||Ce.call(ne,pe),!pe.defaultPrevented&&ot())},className:ss(V==null?void 0:V.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function KI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function e4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?KU:HU;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var t4=S.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:w=qU,toastOptions:g,dir:v=KI(),gap:E=QU,loadingIcon:y,icons:_,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:k}=t,[L,x]=$.useState([]),A=$.useMemo(()=>Array.from(new Set([r].concat(L.filter(H=>H.position).map(H=>H.position)))),[L,r]),[b,P]=$.useState([]),[D,O]=$.useState(!1),[C,j]=$.useState(!1),[se,ie]=$.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ue=$.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=$.useRef(null),ee=$.useRef(!1),ae=$.useCallback(H=>{x(Ne=>{var Te;return(Te=Ne.find(Oe=>Oe.id===H.id))!=null&&Te.delete||yr.dismiss(H.id),Ne.filter(({id:Oe})=>Oe!==H.id)})},[]);return $.useEffect(()=>yr.subscribe(H=>{if(H.dismiss){x(Ne=>Ne.map(Te=>Te.id===H.id?{...Te,delete:!0}:Te));return}setTimeout(()=>{JP.flushSync(()=>{x(Ne=>{let Te=Ne.findIndex(Oe=>Oe.id===H.id);return Te!==-1?[...Ne.slice(0,Te),{...Ne[Te],...H},...Ne.slice(Te+1)]:[H,...Ne]})})})}),[]),$.useEffect(()=>{if(d!=="system"){ie(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:Ne})=>{ie(Ne?"dark":"light")})}catch{H.addListener(({matches:Te})=>{try{ie(Te?"dark":"light")}catch(Oe){console.error(Oe)}})}},[d]),$.useEffect(()=>{L.length<=1&&O(!1)},[L]),$.useEffect(()=>{let H=Ne=>{var Te,Oe;s.every(Je=>Ne[Je]||Ne.code===Je)&&(O(!0),(Te=ue.current)==null||Te.focus()),Ne.code==="Escape"&&(document.activeElement===ue.current||(Oe=ue.current)!=null&&Oe.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[s]),$.useEffect(()=>{if(ue.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,ee.current=!1)}},[ue.current]),$.createElement("section",{ref:e,"aria-label":`${R} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((H,Ne)=>{var Te;let[Oe,Je]=H.split("-");return L.length?$.createElement("ol",{key:H,dir:v==="auto"?KI():v,tabIndex:-1,ref:ue,className:a,"data-sonner-toaster":!0,"data-theme":se,"data-y-position":Oe,"data-lifted":D&&L.length>1&&!i,"data-x-position":Je,style:{"--front-toast-height":`${((Te=b[0])==null?void 0:Te.height)||0}px`,"--width":`${GU}px`,"--gap":`${E}px`,...p,...e4(l,c)},onBlur:Se=>{ee.current&&!Se.currentTarget.contains(Se.relatedTarget)&&(ee.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:Se=>{Se.target instanceof HTMLElement&&Se.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,V.current=Se.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{C||O(!1)},onDragEnd:()=>O(!1),onPointerDown:Se=>{Se.target instanceof HTMLElement&&Se.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},L.filter(Se=>!Se.position&&Ne===0||Se.position===H).map((Se,Ht)=>{var Ze,Be;return $.createElement(ZU,{key:Se.id,icons:_,index:Ht,toast:Se,defaultRichColors:h,duration:(Ze=g==null?void 0:g.duration)!=null?Ze:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:w,closeButton:(Be=g==null?void 0:g.closeButton)!=null?Be:o,interacting:C,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ae,toasts:L.filter(We=>We.position==Se.position),heights:b.filter(We=>We.position==Se.position),setHeights:P,expandByDefault:i,gap:E,loadingIcon:y,expanded:D,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const n4=({...t})=>{const{theme:e="system"}=U1();return I.jsx(t4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var r4=l_[" useId ".trim().toString()]||(()=>{}),s4=0;function py(t){const[e,n]=S.useState(r4());return yi(()=>{n(r=>r??String(s4++))},[t]),t||(e?`radix-${e}`:"")}const i4=["top","right","bottom","left"],Ro=Math.min,Dr=Math.max,bp=Math.round,ef=Math.floor,Bs=t=>({x:t,y:t}),o4={left:"right",right:"left",bottom:"top",top:"bottom"},a4={start:"end",end:"start"};function Xv(t,e,n){return Dr(t,Ro(e,n))}function vi(t,e){return typeof t=="function"?t(e):t}function wi(t){return t.split("-")[0]}function Fc(t){return t.split("-")[1]}function c0(t){return t==="x"?"y":"x"}function u0(t){return t==="y"?"height":"width"}const l4=new Set(["top","bottom"]);function Vs(t){return l4.has(wi(t))?"y":"x"}function d0(t){return c0(Vs(t))}function c4(t,e,n){n===void 0&&(n=!1);const r=Fc(t),s=d0(t),i=u0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Ap(o)),[o,Ap(o)]}function u4(t){const e=Ap(t);return[Zv(t),e,Zv(e)]}function Zv(t){return t.replace(/start|end/g,e=>a4[e])}const GI=["left","right"],QI=["right","left"],d4=["top","bottom"],h4=["bottom","top"];function f4(t,e,n){switch(t){case"top":case"bottom":return n?e?QI:GI:e?GI:QI;case"left":case"right":return e?d4:h4;default:return[]}}function p4(t,e,n,r){const s=Fc(t);let i=f4(wi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Zv)))),i}function Ap(t){return t.replace(/left|right|bottom|top/g,e=>o4[e])}function m4(t){return{top:0,right:0,bottom:0,left:0,...t}}function j1(t){return typeof t!="number"?m4(t):{top:t,right:t,bottom:t,left:t}}function xp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function YI(t,e,n){let{reference:r,floating:s}=t;const i=Vs(e),o=d0(e),a=u0(o),l=wi(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Fc(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const g4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=YI(c,r,l),f=r,p={},w=0;for(let g=0;g<a.length;g++){const{name:v,fn:E}=a[g],{x:y,y:_,data:R,reset:k}=await E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=y??d,h=_??h,p={...p,[v]:{...p[v],...R}},k&&w<=50&&(w++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:d,y:h}=YI(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Ad(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=vi(e,t),w=j1(p),v=a[f?h==="floating"?"reference":"floating":h],E=xp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},k=xp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:_,strategy:l}):y);return{top:(E.top-k.top+w.top)/R.y,bottom:(k.bottom-E.bottom+w.bottom)/R.y,left:(E.left-k.left+w.left)/R.x,right:(k.right-E.right+w.right)/R.x}}const y4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=vi(t,e)||{};if(c==null)return{};const h=j1(d),f={x:n,y:r},p=d0(s),w=u0(p),g=await o.getDimensions(c),v=p==="y",E=v?"top":"left",y=v?"bottom":"right",_=v?"clientHeight":"clientWidth",R=i.reference[w]+i.reference[p]-f[p]-i.floating[w],k=f[p]-i.reference[p],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=L?L[_]:0;(!x||!await(o.isElement==null?void 0:o.isElement(L)))&&(x=a.floating[_]||i.floating[w]);const A=R/2-k/2,b=x/2-g[w]/2-1,P=Ro(h[E],b),D=Ro(h[y],b),O=P,C=x-g[w]-D,j=x/2-g[w]/2+A,se=Xv(O,j,C),ie=!l.arrow&&Fc(s)!=null&&j!==se&&i.reference[w]/2-(j<O?P:D)-g[w]/2<0,ue=ie?j<O?j-O:j-C:0;return{[p]:f[p]+ue,data:{[p]:se,centerOffset:j-se-ue,...ie&&{alignmentOffset:ue}},reset:ie}}}),v4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...v}=vi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=wi(s),y=Vs(a),_=wi(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(_||!g?[Ap(a)]:u4(a)),L=w!=="none";!f&&L&&k.push(...p4(a,g,w,R));const x=[a,...k],A=await Ad(e,v),b=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(A[E]),h){const j=c4(s,o,R);b.push(A[j[0]],A[j[1]])}if(P=[...P,{placement:s,overflows:b}],!b.every(j=>j<=0)){var D,O;const j=(((D=i.flip)==null?void 0:D.index)||0)+1,se=x[j];if(se&&(!(h==="alignment"?y!==Vs(se):!1)||P.every(U=>Vs(U.placement)===y?U.overflows[0]>0:!0)))return{data:{index:j,overflows:P},reset:{placement:se}};let ie=(O=P.filter(ue=>ue.overflows[0]<=0).sort((ue,U)=>ue.overflows[1]-U.overflows[1])[0])==null?void 0:O.placement;if(!ie)switch(p){case"bestFit":{var C;const ue=(C=P.filter(U=>{if(L){const V=Vs(U.placement);return V===y||V==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(V=>V>0).reduce((V,ee)=>V+ee,0)]).sort((U,V)=>U[1]-V[1])[0])==null?void 0:C[0];ue&&(ie=ue);break}case"initialPlacement":ie=a;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function JI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function XI(t){return i4.some(e=>t[e]>=0)}const w4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=vi(t,e);switch(r){case"referenceHidden":{const i=await Ad(e,{...s,elementContext:"reference"}),o=JI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:XI(o)}}}case"escaped":{const i=await Ad(e,{...s,altBoundary:!0}),o=JI(i,n.floating);return{data:{escapedOffsets:o,escaped:XI(o)}}}default:return{}}}}},$1=new Set(["left","top"]);async function _4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=wi(n),a=Fc(n),l=Vs(n)==="y",c=$1.has(o)?-1:1,d=i&&l?-1:1,h=vi(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(p=a==="end"?w*-1:w),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const E4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await _4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},T4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:E,y}=v;return{x:E,y}}},...l}=vi(t,e),c={x:n,y:r},d=await Ad(e,l),h=Vs(wi(s)),f=c0(h);let p=c[f],w=c[h];if(i){const v=f==="y"?"top":"left",E=f==="y"?"bottom":"right",y=p+d[v],_=p-d[E];p=Xv(y,p,_)}if(o){const v=h==="y"?"top":"left",E=h==="y"?"bottom":"right",y=w+d[v],_=w-d[E];w=Xv(y,w,_)}const g=a.fn({...e,[f]:p,[h]:w});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},I4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=vi(t,e),d={x:n,y:r},h=Vs(s),f=c0(h);let p=d[f],w=d[h];const g=vi(a,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=f==="y"?"height":"width",R=i.reference[f]-i.floating[_]+v.mainAxis,k=i.reference[f]+i.reference[_]-v.mainAxis;p<R?p=R:p>k&&(p=k)}if(c){var E,y;const _=f==="y"?"width":"height",R=$1.has(wi(s)),k=i.reference[h]-i.floating[_]+(R&&((E=o.offset)==null?void 0:E[h])||0)+(R?0:v.crossAxis),L=i.reference[h]+i.reference[_]+(R?0:((y=o.offset)==null?void 0:y[h])||0)-(R?v.crossAxis:0);w<k?w=k:w>L&&(w=L)}return{[f]:p,[h]:w}}}},S4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=vi(t,e),d=await Ad(e,c),h=wi(s),f=Fc(s),p=Vs(s)==="y",{width:w,height:g}=i.floating;let v,E;h==="top"||h==="bottom"?(v=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,v=f==="end"?"top":"bottom");const y=g-d.top-d.bottom,_=w-d.left-d.right,R=Ro(g-d[v],y),k=Ro(w-d[E],_),L=!e.middlewareData.shift;let x=R,A=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=y),L&&!f){const P=Dr(d.left,0),D=Dr(d.right,0),O=Dr(d.top,0),C=Dr(d.bottom,0);p?A=w-2*(P!==0||D!==0?P+D:Dr(d.left,d.right)):x=g-2*(O!==0||C!==0?O+C:Dr(d.top,d.bottom))}await l({...e,availableWidth:A,availableHeight:x});const b=await o.getDimensions(a.floating);return w!==b.width||g!==b.height?{reset:{rects:!0}}:{}}}};function Lm(){return typeof window<"u"}function Uc(t){return B1(t)?(t.nodeName||"").toLowerCase():"#document"}function Fr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Qs(t){var e;return(e=(B1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function B1(t){return Lm()?t instanceof Node||t instanceof Fr(t).Node:!1}function vs(t){return Lm()?t instanceof Element||t instanceof Fr(t).Element:!1}function Hs(t){return Lm()?t instanceof HTMLElement||t instanceof Fr(t).HTMLElement:!1}function ZI(t){return!Lm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fr(t).ShadowRoot}const b4=new Set(["inline","contents"]);function oh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ws(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!b4.has(s)}const A4=new Set(["table","td","th"]);function x4(t){return A4.has(Uc(t))}const R4=[":popover-open",":modal"];function Vm(t){return R4.some(e=>{try{return t.matches(e)}catch{return!1}})}const P4=["transform","translate","scale","rotate","perspective"],C4=["transform","translate","scale","rotate","perspective","filter"],D4=["paint","layout","strict","content"];function h0(t){const e=f0(),n=vs(t)?ws(t):t;return P4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||C4.some(r=>(n.willChange||"").includes(r))||D4.some(r=>(n.contain||"").includes(r))}function k4(t){let e=Po(t);for(;Hs(e)&&!uc(e);){if(h0(e))return e;if(Vm(e))return null;e=Po(e)}return null}function f0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const N4=new Set(["html","body","#document"]);function uc(t){return N4.has(Uc(t))}function ws(t){return Fr(t).getComputedStyle(t)}function Mm(t){return vs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Po(t){if(Uc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ZI(t)&&t.host||Qs(t);return ZI(e)?e.host:e}function z1(t){const e=Po(t);return uc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Hs(e)&&oh(e)?e:z1(e)}function xd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=z1(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Fr(s);if(i){const a=ew(o);return e.concat(o,o.visualViewport||[],oh(s)?s:[],a&&n?xd(a):[])}return e.concat(s,xd(s,[],n))}function ew(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function W1(t){const e=ws(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Hs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=bp(n)!==i||bp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function p0(t){return vs(t)?t:t.contextElement}function Wl(t){const e=p0(t);if(!Hs(e))return Bs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=W1(e);let o=(i?bp(n.width):n.width)/r,a=(i?bp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const O4=Bs(0);function q1(t){const e=Fr(t);return!f0()||!e.visualViewport?O4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function L4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Fr(t)?!1:e}function Ua(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=p0(t);let o=Bs(1);e&&(r?vs(r)&&(o=Wl(r)):o=Wl(t));const a=L4(i,n,r)?q1(i):Bs(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Fr(i),p=r&&vs(r)?Fr(r):r;let w=f,g=ew(w);for(;g&&r&&p!==w;){const v=Wl(g),E=g.getBoundingClientRect(),y=ws(g),_=E.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,R=E.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=_,c+=R,w=Fr(g),g=ew(w)}}return xp({width:d,height:h,x:l,y:c})}function Fm(t,e){const n=Mm(t).scrollLeft;return e?e.left+n:Ua(Qs(t)).left+n}function H1(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Fm(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function V4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Qs(r),a=e?Vm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Bs(1);const d=Bs(0),h=Hs(r);if((h||!h&&!i)&&((Uc(r)!=="body"||oh(o))&&(l=Mm(r)),Hs(r))){const p=Ua(r);c=Wl(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?H1(o,l):Bs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function M4(t){return Array.from(t.getClientRects())}function F4(t){const e=Qs(t),n=Mm(t),r=t.ownerDocument.body,s=Dr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Dr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Fm(t);const a=-n.scrollTop;return ws(r).direction==="rtl"&&(o+=Dr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const eS=25;function U4(t,e){const n=Fr(t),r=Qs(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=f0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Fm(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,w=Math.abs(r.clientWidth-h.clientWidth-p);w<=eS&&(i-=w)}else c<=eS&&(i+=c);return{width:i,height:o,x:a,y:l}}const j4=new Set(["absolute","fixed"]);function $4(t,e){const n=Ua(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Hs(t)?Wl(t):Bs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function tS(t,e,n){let r;if(e==="viewport")r=U4(t,n);else if(e==="document")r=F4(Qs(t));else if(vs(e))r=$4(e,n);else{const s=q1(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return xp(r)}function K1(t,e){const n=Po(t);return n===e||!vs(n)||uc(n)?!1:ws(n).position==="fixed"||K1(n,e)}function B4(t,e){const n=e.get(t);if(n)return n;let r=xd(t,[],!1).filter(a=>vs(a)&&Uc(a)!=="body"),s=null;const i=ws(t).position==="fixed";let o=i?Po(t):t;for(;vs(o)&&!uc(o);){const a=ws(o),l=h0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&j4.has(s.position)||oh(o)&&!l&&K1(t,o))?r=r.filter(d=>d!==o):s=a,o=Po(o)}return e.set(t,r),r}function z4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Vm(e)?[]:B4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=tS(e,d,s);return c.top=Dr(h.top,c.top),c.right=Ro(h.right,c.right),c.bottom=Ro(h.bottom,c.bottom),c.left=Dr(h.left,c.left),c},tS(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function W4(t){const{width:e,height:n}=W1(t);return{width:e,height:n}}function q4(t,e,n){const r=Hs(e),s=Qs(e),i=n==="fixed",o=Ua(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Bs(0);function c(){l.x=Fm(s)}if(r||!r&&!i)if((Uc(e)!=="body"||oh(s))&&(a=Mm(e)),r){const p=Ua(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?H1(s,a):Bs(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function my(t){return ws(t).position==="static"}function nS(t,e){if(!Hs(t)||ws(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Qs(t)===n&&(n=n.ownerDocument.body),n}function G1(t,e){const n=Fr(t);if(Vm(t))return n;if(!Hs(t)){let s=Po(t);for(;s&&!uc(s);){if(vs(s)&&!my(s))return s;s=Po(s)}return n}let r=nS(t,e);for(;r&&x4(r)&&my(r);)r=nS(r,e);return r&&uc(r)&&my(r)&&!h0(r)?n:r||k4(t)||n}const H4=async function(t){const e=this.getOffsetParent||G1,n=this.getDimensions,r=await n(t.floating);return{reference:q4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function K4(t){return ws(t).direction==="rtl"}const G4={convertOffsetParentRelativeRectToViewportRelativeRect:V4,getDocumentElement:Qs,getClippingRect:z4,getOffsetParent:G1,getElementRects:H4,getClientRects:M4,getDimensions:W4,getScale:Wl,isElement:vs,isRTL:K4};function Q1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Q4(t,e){let n=null,r;const s=Qs(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const w=ef(h),g=ef(s.clientWidth-(d+f)),v=ef(s.clientHeight-(h+p)),E=ef(d),_={rootMargin:-w+"px "+-g+"px "+-v+"px "+-E+"px",threshold:Dr(0,Ro(1,l))||1};let R=!0;function k(L){const x=L[0].intersectionRatio;if(x!==l){if(!R)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!Q1(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(k,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,_)}n.observe(t)}return o(!0),i}function Y4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=p0(t),d=s||i?[...c?xd(c):[],...xd(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?Q4(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(E=>{let[y]=E;y&&y.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let w,g=l?Ua(t):null;l&&v();function v(){const E=Ua(t);g&&!Q1(g,E)&&n(),g=E,w=requestAnimationFrame(v)}return n(),()=>{var E;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(E=p)==null||E.disconnect(),p=null,l&&cancelAnimationFrame(w)}}const J4=E4,X4=T4,Z4=v4,ej=S4,tj=w4,rS=y4,nj=I4,rj=(t,e,n)=>{const r=new Map,s={platform:G4,...n},i={...s.platform,_c:r};return g4(t,e,{...s,platform:i})};var sj=typeof document<"u",ij=function(){},Vf=sj?S.useLayoutEffect:ij;function Rp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Rp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Rp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Y1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function sS(t,e){const n=Y1(t);return Math.round(e*n)/n}function gy(t){const e=S.useRef(t);return Vf(()=>{e.current=t}),e}function oj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=S.useState(r);Rp(f,r)||p(r);const[w,g]=S.useState(null),[v,E]=S.useState(null),y=S.useCallback(U=>{U!==L.current&&(L.current=U,g(U))},[]),_=S.useCallback(U=>{U!==x.current&&(x.current=U,E(U))},[]),R=i||w,k=o||v,L=S.useRef(null),x=S.useRef(null),A=S.useRef(d),b=l!=null,P=gy(l),D=gy(s),O=gy(c),C=S.useCallback(()=>{if(!L.current||!x.current)return;const U={placement:e,strategy:n,middleware:f};D.current&&(U.platform=D.current),rj(L.current,x.current,U).then(V=>{const ee={...V,isPositioned:O.current!==!1};j.current&&!Rp(A.current,ee)&&(A.current=ee,sh.flushSync(()=>{h(ee)}))})},[f,e,n,D,O]);Vf(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[c]);const j=S.useRef(!1);Vf(()=>(j.current=!0,()=>{j.current=!1}),[]),Vf(()=>{if(R&&(L.current=R),k&&(x.current=k),R&&k){if(P.current)return P.current(R,k,C);C()}},[R,k,C,P,b]);const se=S.useMemo(()=>({reference:L,floating:x,setReference:y,setFloating:_}),[y,_]),ie=S.useMemo(()=>({reference:R,floating:k}),[R,k]),ue=S.useMemo(()=>{const U={position:n,left:0,top:0};if(!ie.floating)return U;const V=sS(ie.floating,d.x),ee=sS(ie.floating,d.y);return a?{...U,transform:"translate("+V+"px, "+ee+"px)",...Y1(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:ee}},[n,a,ie.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:C,refs:se,elements:ie,floatingStyles:ue}),[d,C,se,ie,ue])}const aj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?rS({element:r.current,padding:s}).fn(n):{}:r?rS({element:r,padding:s}).fn(n):{}}}},lj=(t,e)=>({...J4(t),options:[t,e]}),cj=(t,e)=>({...X4(t),options:[t,e]}),uj=(t,e)=>({...nj(t),options:[t,e]}),dj=(t,e)=>({...Z4(t),options:[t,e]}),hj=(t,e)=>({...ej(t),options:[t,e]}),fj=(t,e)=>({...tj(t),options:[t,e]}),pj=(t,e)=>({...aj(t),options:[t,e]});var mj="Arrow",J1=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return I.jsx(Xt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:I.jsx("polygon",{points:"0,0 30,0 15,10"})})});J1.displayName=mj;var gj=J1;function X1(t){const[e,n]=S.useState(void 0);return yi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var m0="Popper",[Z1,eC]=Vc(m0),[yj,tC]=Z1(m0),nC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return I.jsx(yj,{scope:e,anchor:r,onAnchorChange:s,children:n})};nC.displayName=m0;var rC="PopperAnchor",sC=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=tC(rC,n),o=S.useRef(null),a=Un(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:I.jsx(Xt.div,{...s,ref:a})});sC.displayName=rC;var g0="PopperContent",[vj,wj]=Z1(g0),iC=S.forwardRef((t,e)=>{var Se,Ht,Ze,Be,We,Ot;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:w,...g}=t,v=tC(g0,n),[E,y]=S.useState(null),_=Un(e,en=>y(en)),[R,k]=S.useState(null),L=X1(R),x=(L==null?void 0:L.width)??0,A=(L==null?void 0:L.height)??0,b=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(c)?c:[c],O=D.length>0,C={padding:P,boundary:D.filter(Ej),altBoundary:O},{refs:j,floatingStyles:se,placement:ie,isPositioned:ue,middlewareData:U}=oj({strategy:"fixed",placement:b,whileElementsMounted:(...en)=>Y4(...en,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[lj({mainAxis:s+A,alignmentAxis:o}),l&&cj({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?uj():void 0,...C}),l&&dj({...C}),hj({...C,apply:({elements:en,rects:On,availableWidth:pr,availableHeight:yn})=>{const{width:mr,height:Le}=On.reference,gt=en.floating.style;gt.setProperty("--radix-popper-available-width",`${pr}px`),gt.setProperty("--radix-popper-available-height",`${yn}px`),gt.setProperty("--radix-popper-anchor-width",`${mr}px`),gt.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),R&&pj({element:R,padding:a}),Tj({arrowWidth:x,arrowHeight:A}),f&&fj({strategy:"referenceHidden",...C})]}),[V,ee]=lC(ie),ae=qs(w);yi(()=>{ue&&(ae==null||ae())},[ue,ae]);const H=(Se=U.arrow)==null?void 0:Se.x,Ne=(Ht=U.arrow)==null?void 0:Ht.y,Te=((Ze=U.arrow)==null?void 0:Ze.centerOffset)!==0,[Oe,Je]=S.useState();return yi(()=>{E&&Je(window.getComputedStyle(E).zIndex)},[E]),I.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:ue?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(Be=U.transformOrigin)==null?void 0:Be.x,(We=U.transformOrigin)==null?void 0:We.y].join(" "),...((Ot=U.hide)==null?void 0:Ot.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:I.jsx(vj,{scope:n,placedSide:V,onArrowChange:k,arrowX:H,arrowY:Ne,shouldHideArrow:Te,children:I.jsx(Xt.div,{"data-side":V,"data-align":ee,...g,ref:_,style:{...g.style,animation:ue?void 0:"none"}})})})});iC.displayName=g0;var oC="PopperArrow",_j={top:"bottom",right:"left",bottom:"top",left:"right"},aC=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=wj(oC,r),o=_j[i.placedSide];return I.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:I.jsx(gj,{...s,ref:n,style:{...s.style,display:"block"}})})});aC.displayName=oC;function Ej(t){return t!==null}var Tj=t=>({name:"transformOrigin",options:t,fn(e){var v,E,y;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=lC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let w="",g="";return c==="bottom"?(w=o?h:`${f}px`,g=`${-l}px`):c==="top"?(w=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(w=`${-l}px`,g=o?h:`${p}px`):c==="left"&&(w=`${r.floating.width+l}px`,g=o?h:`${p}px`),{data:{x:w,y:g}}}});function lC(t){const[e,n="center"]=t.split("-");return[e,n]}var jK=nC,Ij=sC,Sj=iC,bj=aC,[Um]=Vc("Tooltip",[eC]),y0=eC(),cC="TooltipProvider",Aj=700,iS="tooltip.open",[xj,uC]=Um(cC),dC=t=>{const{__scopeTooltip:e,delayDuration:n=Aj,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),I.jsx(xj,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};dC.displayName=cC;var hC="Tooltip",[$K,jm]=Um(hC),tw="TooltipTrigger",Rj=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=jm(tw,n),i=uC(tw,n),o=y0(n),a=S.useRef(null),l=Un(e,a,s.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),I.jsx(Ij,{asChild:!0,...o,children:I.jsx(Xt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});Rj.displayName=tw;var Pj="TooltipPortal",[BK,Cj]=Um(Pj,{forceMount:void 0}),dc="TooltipContent",fC=S.forwardRef((t,e)=>{const n=Cj(dc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=jm(dc,t.__scopeTooltip);return I.jsx(Xa,{present:r||o.open,children:o.disableHoverableContent?I.jsx(pC,{side:s,...i,ref:e}):I.jsx(Dj,{side:s,...i,ref:e})})}),Dj=S.forwardRef((t,e)=>{const n=jm(dc,t.__scopeTooltip),r=uC(dc,t.__scopeTooltip),s=S.useRef(null),i=Un(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=S.useCallback(()=>{a(null),h(!1)},[h]),p=S.useCallback((w,g)=>{const v=w.currentTarget,E={x:w.clientX,y:w.clientY},y=Vj(E,v.getBoundingClientRect()),_=Mj(E,y),R=Fj(g.getBoundingClientRect()),k=jj([..._,...R]);a(k),h(!0)},[h]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&d){const w=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",w),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),S.useEffect(()=>{if(o){const w=g=>{const v=g.target,E={x:g.clientX,y:g.clientY},y=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),_=!Uj(E,o);y?f():_&&(f(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,d,o,c,f]),I.jsx(pC,{...t,ref:i})}),[kj,Nj]=Um(hC,{isInside:!1}),Oj=PM("TooltipContent"),pC=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=jm(dc,n),c=y0(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(iS,d),()=>document.removeEventListener(iS,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),I.jsx(km,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:I.jsxs(Sj,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[I.jsx(Oj,{children:r}),I.jsx(kj,{scope:n,isInside:!0,children:I.jsx(ZM,{id:l.contentId,role:"tooltip",children:s||r})})]})})});fC.displayName=dc;var mC="TooltipArrow",Lj=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=y0(n);return Nj(mC,n).isInside?null:I.jsx(bj,{...s,...r,ref:e})});Lj.displayName=mC;function Vj(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Mj(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Fj(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Uj(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function jj(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),$j(e)}function $j(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Bj=dC,gC=fC;const zj=Bj,Wj=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>I.jsx(gC,{ref:r,sideOffset:e,className:jn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Wj.displayName=gC.displayName;var $m=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qj={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ji,r_,yx,Hj=(yx=class{constructor(){pt(this,Ji,qj);pt(this,r_,!1)}setTimeoutProvider(t){He(this,Ji,t)}setTimeout(t,e){return W(this,Ji).setTimeout(t,e)}clearTimeout(t){W(this,Ji).clearTimeout(t)}setInterval(t,e){return W(this,Ji).setInterval(t,e)}clearInterval(t){W(this,Ji).clearInterval(t)}},Ji=new WeakMap,r_=new WeakMap,yx),Pp=new Hj;function Kj(t){setTimeout(t,0)}var Bm=typeof window>"u"||"Deno"in globalThis;function ar(){}function Gj(t,e){return typeof t=="function"?t(e):t}function Qj(t){return typeof t=="number"&&t>=0&&t!==1/0}function Yj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function nw(t,e){return typeof t=="function"?t(e):t}function Jj(t,e){return typeof t=="function"?t(e):t}function oS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==v0(o,e.options))return!1}else if(!Pd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function aS(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Rd(e.options.mutationKey)!==Rd(i))return!1}else if(!Pd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function v0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Rd)(t)}function Rd(t){return JSON.stringify(t,(e,n)=>rw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Pd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Pd(t[n],e[n])):!1}var Xj=Object.prototype.hasOwnProperty;function yC(t,e){if(t===e)return t;const n=lS(t)&&lS(e);if(!n&&!(rw(t)&&rw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:Xj.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=yC(h,f);a[d]=p,p===h&&l++}return s===o&&l===s?t:a}function zK(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function lS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rw(t){if(!cS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!cS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function cS(t){return Object.prototype.toString.call(t)==="[object Object]"}function Zj(t){return new Promise(e=>{Pp.setTimeout(e,t)})}function e3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?yC(t,e):e}function t3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function n3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var w0=Symbol();function vC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===w0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function WK(t,e){return typeof t=="function"?t(...e):!!t}var Ta,Xi,Ql,vx,r3=(vx=class extends $m{constructor(){super();pt(this,Ta);pt(this,Xi);pt(this,Ql);He(this,Ql,e=>{if(!Bm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){W(this,Xi)||this.setEventListener(W(this,Ql))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Xi))==null||e.call(this),He(this,Xi,void 0))}setEventListener(e){var n;He(this,Ql,e),(n=W(this,Xi))==null||n.call(this),He(this,Xi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){W(this,Ta)!==e&&(He(this,Ta,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof W(this,Ta)=="boolean"?W(this,Ta):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ta=new WeakMap,Xi=new WeakMap,Ql=new WeakMap,vx),wC=new r3;function s3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function i3(t){var n;let e;if((n=t.then(r=>(e=r,r),ar))==null||n.catch(ar),e!==void 0)return{data:e}}function _C(t){return t}function o3(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function a3(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(ar),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function l3(t){return t.state.isPaused}function c3(t){return t.state.status==="success"}function u3(t){return!0}function d3(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??l3,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[o3(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??c3,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??u3,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??_C,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[a3(f,o,i)]:[]);return{mutations:r,queries:a}}function h3(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??_C,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,p;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(p=n==null?void 0:n.defaultOptions)==null?void 0:p.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:p,promise:w,dehydratedAt:g})=>{var L,x;const v=w?i3(w):void 0,E=h.data===void 0?v==null?void 0:v.data:h.data,y=E===void 0?E:i(E);let _=s.get(f);const R=(_==null?void 0:_.state.status)==="pending",k=(_==null?void 0:_.state.fetchStatus)==="fetching";if(_){const A=v&&g!==void 0&&g>_.state.dataUpdatedAt;if(h.dataUpdatedAt>_.state.dataUpdatedAt||A){const{fetchStatus:b,...P}=h;_.setState({...P,data:y})}}else _=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(x=n==null?void 0:n.defaultOptions)==null?void 0:x.queries,queryKey:d,queryHash:f,meta:p},{...h,data:y,fetchStatus:"idle",status:y!==void 0?"success":h.status});w&&!R&&!k&&(g===void 0||g>_.state.dataUpdatedAt)&&_.fetch(void 0,{initialPromise:Promise.resolve(w).then(i)}).catch(ar)})}var f3=Kj;function p3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=f3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var lr=p3(),Yl,Zi,Jl,wx,m3=(wx=class extends $m{constructor(){super();pt(this,Yl,!0);pt(this,Zi);pt(this,Jl);He(this,Jl,e=>{if(!Bm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){W(this,Zi)||this.setEventListener(W(this,Jl))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Zi))==null||e.call(this),He(this,Zi,void 0))}setEventListener(e){var n;He(this,Jl,e),(n=W(this,Zi))==null||n.call(this),He(this,Zi,e(this.setOnline.bind(this)))}setOnline(e){W(this,Yl)!==e&&(He(this,Yl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return W(this,Yl)}},Yl=new WeakMap,Zi=new WeakMap,Jl=new WeakMap,wx),Cp=new m3;function g3(t){return Math.min(1e3*2**t,3e4)}function EC(t){return(t??"online")==="online"?Cp.isOnline():!0}var sw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function TC(t){let e=!1,n=0,r;const s=s3(),i=()=>s.status!=="pending",o=g=>{var v;if(!i()){const E=new sw(g);f(E),(v=t.onCancel)==null||v.call(t,E)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>wC.isFocused()&&(t.networkMode==="always"||Cp.isOnline())&&t.canRun(),d=()=>EC(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var v;r=E=>{(i()||c())&&g(E)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),w=()=>{if(i())return;let g;const v=n===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(E){g=Promise.reject(E)}Promise.resolve(g).then(h).catch(E=>{var L;if(i())return;const y=t.retry??(Bm?0:3),_=t.retryDelay??g3,R=typeof _=="function"?_(n,E):_,k=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,E);if(e||!k){f(E);return}n++,(L=t.onFail)==null||L.call(t,n,E),Zj(R).then(()=>c()?void 0:p()).then(()=>{e?f(E):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():p().then(w),s)}}var Ia,_x,IC=(_x=class{constructor(){pt(this,Ia)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qj(this.gcTime)&&He(this,Ia,Pp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Bm?1/0:5*60*1e3))}clearGcTimeout(){W(this,Ia)&&(Pp.clearTimeout(W(this,Ia)),He(this,Ia,void 0))}},Ia=new WeakMap,_x),Sa,Xl,Kr,ba,Pn,Yd,Aa,os,Zs,Ex,y3=(Ex=class extends IC{constructor(n){super();pt(this,os);pt(this,Sa);pt(this,Xl);pt(this,Kr);pt(this,ba);pt(this,Pn);pt(this,Yd);pt(this,Aa);He(this,Aa,!1),He(this,Yd,n.defaultOptions),this.setOptions(n.options),this.observers=[],He(this,ba,n.client),He(this,Kr,W(this,ba).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,He(this,Sa,dS(this.options)),this.state=n.state??W(this,Sa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=W(this,Pn))==null?void 0:n.promise}setOptions(n){if(this.options={...W(this,Yd),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=dS(this.options);r.data!==void 0&&(this.setState(uS(r.data,r.dataUpdatedAt)),He(this,Sa,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,Kr).remove(this)}setData(n,r){const s=e3(this.state.data,n,this.options);return zn(this,os,Zs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){zn(this,os,Zs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=W(this,Pn))==null?void 0:s.promise;return(i=W(this,Pn))==null||i.cancel(n),r?r.then(ar).catch(ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,Sa))}isActive(){return this.observers.some(n=>Jj(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>nw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Yj(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=W(this,Pn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=W(this,Pn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),W(this,Kr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(W(this,Pn)&&(W(this,Aa)?W(this,Pn).cancel({revert:!0}):W(this,Pn).cancelRetry()),this.scheduleGc()),W(this,Kr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||zn(this,os,Zs).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,p,w,g,v,E,y,_,R;if(this.state.fetchStatus!=="idle"&&((c=W(this,Pn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(W(this,Pn))return W(this,Pn).continueRetry(),W(this,Pn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const k=this.observers.find(L=>L.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,i=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(He(this,Aa,!0),s.signal)})},o=()=>{const k=vC(this.options,r),x=(()=>{const A={client:W(this,ba),queryKey:this.queryKey,meta:this.meta};return i(A),A})();return He(this,Aa,!1),this.options.persister?this.options.persister(k,x,this):k(x)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:W(this,ba),state:this.state,fetchFn:o};return i(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),He(this,Xl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&zn(this,os,Zs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),He(this,Pn,TC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof sw&&k.revert&&this.setState({...W(this,Xl),fetchStatus:"idle"}),s.abort()},onFail:(k,L)=>{zn(this,os,Zs).call(this,{type:"failed",failureCount:k,error:L})},onPause:()=>{zn(this,os,Zs).call(this,{type:"pause"})},onContinue:()=>{zn(this,os,Zs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await W(this,Pn).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(w=(p=W(this,Kr).config).onSuccess)==null||w.call(p,k,this),(v=(g=W(this,Kr).config).onSettled)==null||v.call(g,k,this.state.error,this),k}catch(k){if(k instanceof sw){if(k.silent)return W(this,Pn).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw zn(this,os,Zs).call(this,{type:"error",error:k}),(y=(E=W(this,Kr).config).onError)==null||y.call(E,k,this),(R=(_=W(this,Kr).config).onSettled)==null||R.call(_,this.state.data,k,this),k}finally{this.scheduleGc()}}},Sa=new WeakMap,Xl=new WeakMap,Kr=new WeakMap,ba=new WeakMap,Pn=new WeakMap,Yd=new WeakMap,Aa=new WeakMap,os=new WeakSet,Zs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...v3(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...uS(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return He(this,Xl,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),lr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),W(this,Kr).notify({query:this,type:"updated",action:n})})},Ex);function v3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:EC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function uS(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function dS(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function hS(t){return{onFetch:(e,n)=>{var d,h,f,p,w;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},E=vC(e.options,e.fetchOptions),y=async(_,R,k)=>{if(g)return Promise.reject();if(R==null&&_.pages.length)return Promise.resolve(_);const x=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:R,direction:k?"backward":"forward",meta:e.options.meta};return v(D),D})(),A=await E(x),{maxPages:b}=e.options,P=k?n3:t3;return{pages:P(_.pages,A,b),pageParams:P(_.pageParams,R,b)}};if(s&&i.length){const _=s==="backward",R=_?w3:fS,k={pages:i,pageParams:o},L=R(r,k);a=await y(k,L,_)}else{const _=t??i.length;do{const R=l===0?o[0]??r.initialPageParam:fS(r,a);if(l>0&&R==null)break;a=await y(a,R),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function fS(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function w3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Jd,Cs,ir,xa,Ds,zi,Tx,_3=(Tx=class extends IC{constructor(n){super();pt(this,Ds);pt(this,Jd);pt(this,Cs);pt(this,ir);pt(this,xa);He(this,Jd,n.client),this.mutationId=n.mutationId,He(this,ir,n.mutationCache),He(this,Cs,[]),this.state=n.state||E3(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){W(this,Cs).includes(n)||(W(this,Cs).push(n),this.clearGcTimeout(),W(this,ir).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){He(this,Cs,W(this,Cs).filter(r=>r!==n)),this.scheduleGc(),W(this,ir).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){W(this,Cs).length||(this.state.status==="pending"?this.scheduleGc():W(this,ir).remove(this))}continue(){var n;return((n=W(this,xa))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,p,w,g,v,E,y,_,R,k,L,x,A,b,P;const r=()=>{zn(this,Ds,zi).call(this,{type:"continue"})},s={client:W(this,Jd),meta:this.options.meta,mutationKey:this.options.mutationKey};He(this,xa,TC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,O)=>{zn(this,Ds,zi).call(this,{type:"failed",failureCount:D,error:O})},onPause:()=>{zn(this,Ds,zi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,ir).canRun(this)}));const i=this.state.status==="pending",o=!W(this,xa).canStart();try{if(i)r();else{zn(this,Ds,zi).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=W(this,ir).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&zn(this,Ds,zi).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const D=await W(this,xa).start();return await((f=(h=W(this,ir).config).onSuccess)==null?void 0:f.call(h,D,n,this.state.context,this,s)),await((w=(p=this.options).onSuccess)==null?void 0:w.call(p,D,n,this.state.context,s)),await((v=(g=W(this,ir).config).onSettled)==null?void 0:v.call(g,D,null,this.state.variables,this.state.context,this,s)),await((y=(E=this.options).onSettled)==null?void 0:y.call(E,D,null,n,this.state.context,s)),zn(this,Ds,zi).call(this,{type:"success",data:D}),D}catch(D){try{throw await((R=(_=W(this,ir).config).onError)==null?void 0:R.call(_,D,n,this.state.context,this,s)),await((L=(k=this.options).onError)==null?void 0:L.call(k,D,n,this.state.context,s)),await((A=(x=W(this,ir).config).onSettled)==null?void 0:A.call(x,void 0,D,this.state.variables,this.state.context,this,s)),await((P=(b=this.options).onSettled)==null?void 0:P.call(b,void 0,D,n,this.state.context,s)),D}finally{zn(this,Ds,zi).call(this,{type:"error",error:D})}}finally{W(this,ir).runNext(this)}}},Jd=new WeakMap,Cs=new WeakMap,ir=new WeakMap,xa=new WeakMap,Ds=new WeakSet,zi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),lr.batch(()=>{W(this,Cs).forEach(s=>{s.onMutationUpdate(n)}),W(this,ir).notify({mutation:this,type:"updated",action:n})})},Tx);function E3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ni,as,Xd,Ix,T3=(Ix=class extends $m{constructor(e={}){super();pt(this,ni);pt(this,as);pt(this,Xd);this.config=e,He(this,ni,new Set),He(this,as,new Map),He(this,Xd,0)}build(e,n,r){const s=new _3({client:e,mutationCache:this,mutationId:++Nh(this,Xd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){W(this,ni).add(e);const n=tf(e);if(typeof n=="string"){const r=W(this,as).get(n);r?r.push(e):W(this,as).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(W(this,ni).delete(e)){const n=tf(e);if(typeof n=="string"){const r=W(this,as).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&W(this,as).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=tf(e);if(typeof n=="string"){const r=W(this,as).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=tf(e);if(typeof n=="string"){const s=(r=W(this,as).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){lr.batch(()=>{W(this,ni).forEach(e=>{this.notify({type:"removed",mutation:e})}),W(this,ni).clear(),W(this,as).clear()})}getAll(){return Array.from(W(this,ni))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>aS(n,r))}findAll(e={}){return this.getAll().filter(n=>aS(e,n))}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return lr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ar))))}},ni=new WeakMap,as=new WeakMap,Xd=new WeakMap,Ix);function tf(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ks,Sx,I3=(Sx=class extends $m{constructor(e={}){super();pt(this,ks);this.config=e,He(this,ks,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??v0(s,n);let o=this.get(i);return o||(o=new y3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){W(this,ks).has(e.queryHash)||(W(this,ks).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=W(this,ks).get(e.queryHash);n&&(e.destroy(),n===e&&W(this,ks).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){lr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return W(this,ks).get(e)}getAll(){return[...W(this,ks).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>oS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>oS(e,r)):n}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){lr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){lr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ks=new WeakMap,Sx),sn,eo,to,Zl,ec,no,tc,nc,bx,S3=(bx=class{constructor(t={}){pt(this,sn);pt(this,eo);pt(this,to);pt(this,Zl);pt(this,ec);pt(this,no);pt(this,tc);pt(this,nc);He(this,sn,t.queryCache||new I3),He(this,eo,t.mutationCache||new T3),He(this,to,t.defaultOptions||{}),He(this,Zl,new Map),He(this,ec,new Map),He(this,no,0)}mount(){Nh(this,no)._++,W(this,no)===1&&(He(this,tc,wC.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,sn).onFocus())})),He(this,nc,Cp.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,sn).onOnline())})))}unmount(){var t,e;Nh(this,no)._--,W(this,no)===0&&((t=W(this,tc))==null||t.call(this),He(this,tc,void 0),(e=W(this,nc))==null||e.call(this),He(this,nc,void 0))}isFetching(t){return W(this,sn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return W(this,eo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,sn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=W(this,sn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(nw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return W(this,sn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=W(this,sn).get(r.queryHash),i=s==null?void 0:s.state.data,o=Gj(e,i);if(o!==void 0)return W(this,sn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return lr.batch(()=>W(this,sn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,sn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=W(this,sn);lr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=W(this,sn);return lr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=lr.batch(()=>W(this,sn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ar).catch(ar)}invalidateQueries(t,e={}){return lr.batch(()=>(W(this,sn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=lr.batch(()=>W(this,sn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ar)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ar)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=W(this,sn).build(this,e);return n.isStaleByTime(nw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ar).catch(ar)}fetchInfiniteQuery(t){return t.behavior=hS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ar).catch(ar)}ensureInfiniteQueryData(t){return t.behavior=hS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Cp.isOnline()?W(this,eo).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,sn)}getMutationCache(){return W(this,eo)}getDefaultOptions(){return W(this,to)}setDefaultOptions(t){He(this,to,t)}setQueryDefaults(t,e){W(this,Zl).set(Rd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...W(this,Zl).values()],n={};return e.forEach(r=>{Pd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){W(this,ec).set(Rd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...W(this,ec).values()],n={};return e.forEach(r=>{Pd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...W(this,to).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=v0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===w0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...W(this,to).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){W(this,sn).clear(),W(this,eo).clear()}},sn=new WeakMap,eo=new WeakMap,to=new WeakMap,Zl=new WeakMap,ec=new WeakMap,no=new WeakMap,tc=new WeakMap,nc=new WeakMap,bx),SC=S.createContext(void 0),KK=t=>{const e=S.useContext(SC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},b3=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),I.jsx(SC.Provider,{value:t,children:e})),A3=["added","removed","updated"];function pS(t){return A3.includes(t)}async function x3({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();h3(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function mS({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:d3(t,r)};await e.persistClient(s)}function R3(t){const e=t.queryClient.getQueryCache().subscribe(r=>{pS(r.type)&&mS(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{pS(r.type)&&mS(t)});return()=>{e(),n()}}function P3(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=x3(t).then(()=>{e||(n=R3(t))});return[r,s]}function yy(){}function C3({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:D3(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:yy,restoreClient:yy,removeClient:yy}}function D3(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Pp.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cd.apply(this,arguments)}var io;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(io||(io={}));const gS="popstate";function k3(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Dp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Dd(s)}return bC(e,n,null,t)}function N3(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Za(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Dp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Dd(i))}function r(s,i){_0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return bC(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function O3(){return Math.random().toString(36).substr(2,8)}function yS(t,e){return{usr:t.state,key:t.key,idx:e}}function Dp(t,e,n,r){return n===void 0&&(n=null),Cd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Za(e):e,{state:n,key:e&&e.key||r||O3()})}function Dd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Za(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function bC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=io.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Cd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=io.Pop;let v=d(),E=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:E})}function f(v,E){a=io.Push;let y=Dp(g.location,v,E);n&&n(y,v),c=d()+1;let _=yS(y,c),R=g.createHref(y);try{o.pushState(_,"",R)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(R)}i&&l&&l({action:a,location:g.location,delta:1})}function p(v,E){a=io.Replace;let y=Dp(g.location,v,E);n&&n(y,v),c=d();let _=yS(y,c),R=g.createHref(y);o.replaceState(_,"",R),i&&l&&l({action:a,location:g.location,delta:0})}function w(v){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:Dd(v);return y=y.replace(/ $/,"%20"),pn(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let g={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(gS,h),l=v,()=>{s.removeEventListener(gS,h),l=null}},createHref(v){return e(s,v)},createURL:w,encodeLocation(v){let E=w(v);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var vS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vS||(vS={}));function L3(t,e,n){return n===void 0&&(n="/"),V3(t,e,n)}function V3(t,e,n,r){let s=typeof e=="string"?Za(e):e,i=E0(s.pathname||"/",n);if(i==null)return null;let o=AC(t);M3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Q3(i);a=H3(o[l],c)}return a}function AC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=vo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(pn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:W3(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of xC(i.path))s(i,o,l)}),e}function xC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=xC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function M3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:q3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const F3=/^:[\w-]+$/,U3=3,j3=2,$3=1,B3=10,z3=-2,wS=t=>t==="*";function W3(t,e){let n=t.split("/"),r=n.length;return n.some(wS)&&(r+=z3),e&&(r+=j3),n.filter(s=>!wS(s)).reduce((s,i)=>s+(F3.test(i)?U3:i===""?$3:B3),r)}function q3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function H3(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=K3({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:vo([i,h.pathname]),pathnameBase:Z3(vo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=vo([i,h.pathnameBase]))}return o}function K3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=G3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const w=a[h];return p&&!w?c[f]=void 0:c[f]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function G3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Q3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function E0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Y3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Za(t):t;return{pathname:n?n.startsWith("/")?n:J3(n,e):e,search:e6(r),hash:t6(s)}}function J3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function vy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T0(t,e){let n=X3(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function I0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Za(t):(s=Cd({},t),pn(!s.pathname||!s.pathname.includes("?"),vy("?","pathname","search",s)),pn(!s.pathname||!s.pathname.includes("#"),vy("#","pathname","hash",s)),pn(!s.search||!s.search.includes("#"),vy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Y3(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const vo=t=>t.join("/").replace(/\/\/+/g,"/"),Z3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),e6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,t6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function n6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RC=["post","put","patch","delete"];new Set(RC);const r6=["get",...RC];new Set(r6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kd.apply(this,arguments)}const S0=S.createContext(null),s6=S.createContext(null),$o=S.createContext(null),zm=S.createContext(null),bi=S.createContext({outlet:null,matches:[],isDataRoute:!1}),PC=S.createContext(null);function i6(t,e){let{relative:n}=e===void 0?{}:e;jc()||pn(!1);let{basename:r,navigator:s}=S.useContext($o),{hash:i,pathname:o,search:a}=DC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:vo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function jc(){return S.useContext(zm)!=null}function Ys(){return jc()||pn(!1),S.useContext(zm).location}function CC(t){S.useContext($o).static||S.useLayoutEffect(t)}function $c(){let{isDataRoute:t}=S.useContext(bi);return t?v6():o6()}function o6(){jc()||pn(!1);let t=S.useContext(S0),{basename:e,future:n,navigator:r}=S.useContext($o),{matches:s}=S.useContext(bi),{pathname:i}=Ys(),o=JSON.stringify(T0(s,n.v7_relativeSplatPath)),a=S.useRef(!1);return CC(()=>{a.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=I0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:vo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function GK(){let{matches:t}=S.useContext(bi),e=t[t.length-1];return e?e.params:{}}function DC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext($o),{matches:s}=S.useContext(bi),{pathname:i}=Ys(),o=JSON.stringify(T0(s,r.v7_relativeSplatPath));return S.useMemo(()=>I0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function a6(t,e){return l6(t,e)}function l6(t,e,n,r){jc()||pn(!1);let{navigator:s}=S.useContext($o),{matches:i}=S.useContext(bi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ys(),d;if(e){var h;let v=typeof e=="string"?Za(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||pn(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=L3(t,{pathname:p}),g=f6(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:vo([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:vo([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&g?S.createElement(zm.Provider,{value:{location:kd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:io.Pop}},g):g}function c6(){let t=y6(),e=n6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const u6=S.createElement(c6,null);class d6 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(bi.Provider,{value:this.props.routeContext},S.createElement(PC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h6(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(S0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(bi.Provider,{value:e},r)}function f6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||pn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,w=!1,g=null,v=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||u6,l&&(c<0&&f===0?(w6("route-fallback"),w=!0,v=null):c===f&&(w=!0,v=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),y=()=>{let _;return p?_=g:w?_=v:h.route.Component?_=S.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,S.createElement(h6,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(d6,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var kC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kC||{}),NC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(NC||{});function p6(t){let e=S.useContext(S0);return e||pn(!1),e}function m6(t){let e=S.useContext(s6);return e||pn(!1),e}function g6(t){let e=S.useContext(bi);return e||pn(!1),e}function OC(t){let e=g6(),n=e.matches[e.matches.length-1];return n.route.id||pn(!1),n.route.id}function y6(){var t;let e=S.useContext(PC),n=m6(),r=OC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function v6(){let{router:t}=p6(kC.UseNavigateStable),e=OC(NC.UseNavigateStable),n=S.useRef(!1);return CC(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,kd({fromRouteId:e},i)))},[t,e])}const _S={};function w6(t,e,n){_S[t]||(_S[t]=!0)}function LC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function QK(t){let{to:e,replace:n,state:r,relative:s}=t;jc()||pn(!1);let{future:i,static:o}=S.useContext($o),{matches:a}=S.useContext(bi),{pathname:l}=Ys(),c=$c(),d=I0(e,T0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Ie(t){pn(!1)}function VC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=io.Pop,navigator:i,static:o=!1,future:a}=t;jc()&&pn(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:o,future:kd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Za(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=r,g=S.useMemo(()=>{let v=E0(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:w},navigationType:s}},[l,d,h,f,p,w,s]);return g==null?null:S.createElement($o.Provider,{value:c},S.createElement(zm.Provider,{children:n,value:g}))}function ES(t){let{children:e,location:n}=t;return a6(iw(e),n)}new Promise(()=>{});function iw(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,iw(r.props.children,i));return}r.type!==Ie&&pn(!1),!r.props.index||!r.props.children||pn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=iw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ow(){return ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ow.apply(this,arguments)}function _6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function E6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T6(t,e){return t.button===0&&(!e||e==="_self")&&!E6(t)}function aw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function I6(t,e){let n=aw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const S6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],b6="6";try{window.__reactRouterVersion=b6}catch{}const A6="startTransition",kp=l_[A6];function x6(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=k3({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&kp?kp(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>LC(r),[r]),S.createElement(VC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function R6(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=N3({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&kp?kp(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>LC(r),[r]),S.createElement(VC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const P6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",C6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D6=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=_6(e,S6),{basename:p}=S.useContext($o),w,g=!1;if(typeof c=="string"&&C6.test(c)&&(w=c,P6))try{let _=new URL(window.location.href),R=c.startsWith("//")?new URL(_.protocol+c):new URL(c),k=E0(R.pathname,p);R.origin===_.origin&&k!=null?c=k+R.search+R.hash:g=!0}catch{}let v=i6(c,{relative:s}),E=k6(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(_){r&&r(_),_.defaultPrevented||E(_)}return S.createElement("a",ow({},f,{href:w||v,onClick:g||i?r:y,ref:n,target:l}))});var TS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(TS||(TS={}));var IS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(IS||(IS={}));function k6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=$c(),c=Ys(),d=DC(t,{relative:o});return S.useCallback(h=>{if(T6(h,n)){h.preventDefault();let f=r!==void 0?r:Dd(c)===Dd(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function YK(t){let e=S.useRef(aw(t)),n=S.useRef(!1),r=Ys(),s=S.useMemo(()=>I6(r.search,n.current?null:e.current),[r.search]),i=$c(),o=S.useCallback((a,l)=>{const c=aw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const MC=S.createContext(void 0),N6=({children:t})=>{const[e,n]=S.useState("medium"),[r,s]=S.useState(!1),[i,o]=S.useState(!1);S.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),S.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),S.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),S.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return I.jsx(MC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},JK=()=>{const t=S.useContext(MC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},O6=A1("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ki=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?xM:"button";return I.jsx(o,{className:jn(O6({variant:e,size:n,className:t})),ref:i,...s})});Ki.displayName="Button";const lw=S.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),I.jsx("input",{type:e,className:jn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});lw.displayName="Input";const L6=()=>{};var SS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},V6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},b0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):V6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new M6;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class M6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F6=function(t){const e=FC(t);return b0.encodeByteArray(e,!0)},Np=function(t){return F6(t).replace(/\./g,"")},UC=function(t){try{return b0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=()=>jC().__FIREBASE_DEFAULTS__,j6=()=>{if(typeof process>"u"||typeof SS>"u")return;const t=SS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UC(t[1]);return e&&JSON.parse(e)},Wm=()=>{try{return L6()||U6()||j6()||$6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},B6=t=>{var e,n;return(n=(e=Wm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$C=t=>{const e=B6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BC=()=>{var t;return(t=Wm())==null?void 0:t.config},z6=t=>{var e;return(e=Wm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function A0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Np(JSON.stringify(n)),Np(JSON.stringify(o)),""].join(".")}const Qu={};function q6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qu))Qu[e]?t.emulator.push(e):t.prod.push(e);return t}function H6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bS=!1;function zC(t,e){if(typeof window>"u"||typeof document>"u"||!Ai(window.location.host)||Qu[t]===e||Qu[t]||bS)return;Qu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=q6().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{bS=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=H6(r),p=n("text"),w=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),v=document.getElementById(g)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;a(_),d(v,g);const R=c();l(y,E),_.append(y,w,v,R),document.body.appendChild(_)}i?(w.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($n())}function WC(){var e;const t=(e=Wm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Y6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J6(){const t=$n();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qC(){return!WC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HC(){return!WC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function x0(){try{return typeof indexedDB=="object"}catch{return!1}}function X6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="FirebaseError";class Ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Z6,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bc.prototype.create)}}class Bc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?e$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ts(s,a,r)}}function e$(t,e){return t.replace(t$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const t$=/\{\$([^}]+)}/g;function hc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(AS(i)&&AS(o)){if(!hc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function AS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Du(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ku(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function n$(t,e){const n=new r$(t,e);return n.subscribe.bind(n)}class r${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wy),s.error===void 0&&(s.error=wy),s.complete===void 0&&(s.complete=wy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XK=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a$(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o$(t){return t===ea?void 0:t}function a$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new i$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const c$={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},u$=ut.INFO,d$={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},h$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=d$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=u$,this._logHandler=h$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const f$=(t,e)=>e.some(n=>t instanceof n);let xS,RS;function p$(){return xS||(xS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m$(){return RS||(RS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GC=new WeakMap,uw=new WeakMap,QC=new WeakMap,_y=new WeakMap,R0=new WeakMap;function g$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wo(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GC.set(n,t)}).catch(()=>{}),R0.set(e,t),e}function y$(t){if(uw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});uw.set(t,e)}let dw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function v$(t){dw=t(dw)}function w$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ey(this),e,...n);return QC.set(r,e.sort?e.sort():[e]),wo(r)}:m$().includes(t)?function(...e){return t.apply(Ey(this),e),wo(GC.get(this))}:function(...e){return wo(t.apply(Ey(this),e))}}function _$(t){return typeof t=="function"?w$(t):(t instanceof IDBTransaction&&y$(t),f$(t,p$())?new Proxy(t,dw):t)}function wo(t){if(t instanceof IDBRequest)return g$(t);if(_y.has(t))return _y.get(t);const e=_$(t);return e!==t&&(_y.set(t,e),R0.set(e,t)),e}const Ey=t=>R0.get(t);function E$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=wo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wo(o.result),l.oldVersion,l.newVersion,wo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const T$=["get","getKey","getAll","getAllKeys","count"],I$=["put","add","delete","clear"],Ty=new Map;function PS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ty.get(e))return Ty.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=I$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||T$.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Ty.set(e,i),i}v$(t=>({...t,get:(e,n,r)=>PS(e,n)||t.get(e,n,r),has:(e,n)=>!!PS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function b$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hw="@firebase/app",CS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new qm("@firebase/app"),A$="@firebase/app-compat",x$="@firebase/analytics-compat",R$="@firebase/analytics",P$="@firebase/app-check-compat",C$="@firebase/app-check",D$="@firebase/auth",k$="@firebase/auth-compat",N$="@firebase/database",O$="@firebase/data-connect",L$="@firebase/database-compat",V$="@firebase/functions",M$="@firebase/functions-compat",F$="@firebase/installations",U$="@firebase/installations-compat",j$="@firebase/messaging",$$="@firebase/messaging-compat",B$="@firebase/performance",z$="@firebase/performance-compat",W$="@firebase/remote-config",q$="@firebase/remote-config-compat",H$="@firebase/storage",K$="@firebase/storage-compat",G$="@firebase/firestore",Q$="@firebase/ai",Y$="@firebase/firestore-compat",J$="firebase",X$="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="[DEFAULT]",Z$={[hw]:"fire-core",[A$]:"fire-core-compat",[R$]:"fire-analytics",[x$]:"fire-analytics-compat",[C$]:"fire-app-check",[P$]:"fire-app-check-compat",[D$]:"fire-auth",[k$]:"fire-auth-compat",[N$]:"fire-rtdb",[O$]:"fire-data-connect",[L$]:"fire-rtdb-compat",[V$]:"fire-fn",[M$]:"fire-fn-compat",[F$]:"fire-iid",[U$]:"fire-iid-compat",[j$]:"fire-fcm",[$$]:"fire-fcm-compat",[B$]:"fire-perf",[z$]:"fire-perf-compat",[W$]:"fire-rc",[q$]:"fire-rc-compat",[H$]:"fire-gcs",[K$]:"fire-gcs-compat",[G$]:"fire-fst",[Y$]:"fire-fst-compat",[Q$]:"fire-vertex","fire-js":"fire-js",[J$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=new Map,eB=new Map,pw=new Map;function DS(t,e){try{t.container.addComponent(e)}catch(n){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ks(t){const e=t.name;if(pw.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;pw.set(e,t);for(const n of Op.values())DS(n,t);for(const n of eB.values())DS(n,t);return!0}function Hm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new Bc("app","Firebase",tB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=X$;function YC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:fw,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _o.create("bad-app-name",{appName:String(s)});if(n||(n=BC()),!n)throw _o.create("no-options");const i=Op.get(s);if(i){if(hc(n,i.options)&&hc(r,i.config))return i;throw _o.create("duplicate-app",{appName:s})}const o=new l$(s);for(const l of pw.values())o.addComponent(l);const a=new nB(n,r,o);return Op.set(s,a),a}function JC(t=fw){const e=Op.get(t);if(!e&&t===fw&&BC())return YC();if(!e)throw _o.create("no-app",{appName:t});return e}function Ur(t,e,n){let r=Z$[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(o.join(" "));return}Ks(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB="firebase-heartbeat-database",sB=1,Nd="firebase-heartbeat-store";let Iy=null;function XC(){return Iy||(Iy=E$(rB,sB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nd)}catch(n){console.warn(n)}}}}).catch(t=>{throw _o.create("idb-open",{originalErrorMessage:t.message})})),Iy}async function iB(t){try{const n=(await XC()).transaction(Nd),r=await n.objectStore(Nd).get(ZC(t));return await n.done,r}catch(e){if(e instanceof Ts)_i.warn(e.message);else{const n=_o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(n.message)}}}async function kS(t,e){try{const r=(await XC()).transaction(Nd,"readwrite");await r.objectStore(Nd).put(e,ZC(t)),await r.done}catch(n){if(n instanceof Ts)_i.warn(n.message);else{const r=_o.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_i.warn(r.message)}}}function ZC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=1024,aB=30;class lB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=NS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>aB){const o=dB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NS(),{heartbeatsToSend:r,unsentEntries:s}=cB(this._heartbeatsCache.heartbeats),i=Np(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return _i.warn(n),""}}}function NS(){return new Date().toISOString().substring(0,10)}function cB(t,e=oB){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),OS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),OS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x0()?X6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function OS(t){return Np(JSON.stringify({version:2,heartbeats:t})).length}function dB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t){Ks(new _s("platform-logger",e=>new S$(e),"PRIVATE")),Ks(new _s("heartbeat",e=>new lB(e),"PRIVATE")),Ur(hw,CS,t),Ur(hw,CS,"esm2020"),Ur("fire-js","")}hB("");function eD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fB=eD,tD=new Bc("auth","Firebase",eD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new qm("@firebase/auth");function pB(t,...e){Lp.logLevel<=ut.WARN&&Lp.warn(`Auth (${ah}): ${t}`,...e)}function Mf(t,...e){Lp.logLevel<=ut.ERROR&&Lp.error(`Auth (${ah}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t,...e){throw C0(t,...e)}function P0(t,...e){return C0(t,...e)}function nD(t,e,n){const r={...fB(),[e]:n};return new Bc("auth","Firebase",r).create(e,{appName:t.name})}function Eo(t){return nD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function C0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tD.create(t,...e)}function dt(t,e,...n){if(!t)throw C0(e,...n)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mf(e),new Error(e)}function Vp(t,e){t||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function rD(){return LS()==="http:"||LS()==="https:"}function LS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rD()||Q6()||"connection"in navigator)?navigator.onLine:!0}function yB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vp(n>e,"Short delay should be less than long delay!"),this.isMobile=K6()||Y6()}get(){return gB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(t,e){Vp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EB=new lh(3e4,6e4);function xi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Js(t,e,n,r,s={}){return iD(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=KC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return G6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ai(t.emulatorConfig.host)&&(c.credentials="include"),sD.fetch()(await oD(t,t.config.apiHost,n,a),c)})}async function iD(t,e,n){t._canInitEmulator=!1;const r={...wB,...e};try{const s=new IB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw nf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nD(t,d,c);ja(t,d)}}catch(s){if(s instanceof Ts)throw s;ja(t,"network-request-failed",{message:String(s)})}}async function Km(t,e,n,r,s={}){const i=await Js(t,e,n,r,s);return"mfaPendingCredential"in i&&ja(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function oD(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?vB(t.config,s):`${t.config.apiScheme}://${s}`;return _B.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function TB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(P0(this.auth,"network-request-failed")),EB.get())})}}function nf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=P0(t,e,r);return s.customData._tokenResponse=n,s}function VS(t){return t!==void 0&&t.enterprise!==void 0}class SB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bB(t,e){return Js(t,"GET","/v2/recaptchaConfig",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(t,e){return Js(t,"POST","/v1/accounts:delete",e)}async function Mp(t,e){return Js(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xB(t,e=!1){const n=bt(t),r=await n.getIdToken(e),s=D0(r);dt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Yu(Sy(s.auth_time)),issuedAtTime:Yu(Sy(s.iat)),expirationTime:Yu(Sy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Sy(t){return Number(t)*1e3}function D0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{const s=UC(n);return s?JSON.parse(s):(Mf("Failed to decode base64 JWT payload"),null)}catch(s){return Mf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function MS(t){const e=D0(t);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ts&&RB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function RB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Od(t,Mp(e,{idToken:n}));dt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?aD(s.providerUserInfo):[],o=DB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new mw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function CB(t){const e=bt(t);await Fp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(t,e){const n=await iD(t,{},async()=>{const r=KC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await oD(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ai(t.emulatorConfig.host)&&(l.credentials="include"),sD.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NB(t,e){return Js(t,"POST","/v2/accounts:revokeToken",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const n=MS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await kB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ql;return r&&(dt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(dt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(dt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ql,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,e){dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hs{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new PB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Od(this,this.stsTokenManager.getToken(this.auth,e));return dt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xB(this,e)}reload(){return CB(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(Eo(this.auth));const e=await this.getIdToken();return await Od(this,AB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:w,stsTokenManager:g}=n;dt(h&&g,e,"internal-error");const v=ql.fromJSON(this.name,g);dt(typeof h=="string",e,"internal-error"),Ui(r,e.name),Ui(s,e.name),dt(typeof f=="boolean",e,"internal-error"),dt(typeof p=="boolean",e,"internal-error"),Ui(i,e.name),Ui(o,e.name),Ui(a,e.name),Ui(l,e.name),Ui(c,e.name),Ui(d,e.name);const E=new hs({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(E.providerData=w.map(y=>({...y}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ql;s.updateFromServerResponse(n);const i=new hs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];dt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?aD(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ql;a.updateFromIdToken(r);const l=new hs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new mw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Map;function fa(t){Vp(t instanceof Function,"Expected a class definition");let e=FS.get(t);return e?(Vp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,FS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lD.type="NONE";const gw=lD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t,e,n){return`firebase:${t}:${e}:${n}`}class Hl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=by(this.userKey,s.apiKey,i),this.fullPersistenceKey=by("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mp(this.auth,{idToken:e}).catch(()=>{});return n?hs._fromGetAccountInfoResponse(this.auth,n,e):null}return hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hl(fa(gw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||fa(gw);const o=by(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Mp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await hs._fromGetAccountInfoResponse(e,f,d)}else h=hs._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Hl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Hl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dD(e))return"Blackberry";if(hD(e))return"Webos";if(LB(e))return"Safari";if((e.includes("chrome/")||VB(e))&&!e.includes("edge/"))return"Chrome";if(uD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OB(t=$n()){return/firefox\//i.test(t)}function LB(t=$n()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VB(t=$n()){return/crios\//i.test(t)}function cD(t=$n()){return/iemobile/i.test(t)}function uD(t=$n()){return/android/i.test(t)}function dD(t=$n()){return/blackberry/i.test(t)}function hD(t=$n()){return/webos/i.test(t)}function MB(t=$n()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FB(){return J6()&&document.documentMode===10}function UB(t=$n()){return MB(t)||uD(t)||hD(t)||dD(t)||/windows phone/i.test(t)||cD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e=[]){let n;switch(t){case"Browser":n=US($n());break;case"Worker":n=`${US($n())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ah}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e={}){return Js(t,"GET","/v2/passwordPolicy",xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=6;class zB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jS(this),this.idTokenSubscription=new jS(this),this.beforeStateQueue=new jB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fa(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Hl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mp(this,{idToken:e}),r=await hs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(Eo(this));const n=e?bt(e):null;return n&&dt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $B(this),n=new zB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await NB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fa(e)||this._popupRedirectResolver;dt(n,this,"argument-error"),this.redirectPersistenceManager=await Hl.create(this,[fa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&pB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function zc(t){return bt(t)}class jS{constructor(e){this.auth=e,this.observer=null,this.addObserver=n$(n=>this.observer=n)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qB(t){k0=t}function HB(t){return k0.loadJS(t)}function KB(){return k0.recaptchaEnterpriseScript}class GB{constructor(){this.enterprise=new QB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class QB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YB="recaptcha-enterprise",pD="NO_RECAPTCHA";class JB{constructor(e){this.type=YB,this.auth=zc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{bB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new SB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;VS(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(pD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&VS(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=KB();l.length!==0&&(l+=a),HB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function $S(t,e,n,r=!1,s=!1){const i=new JB(t);let o;if(s)o=pD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Up(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $S(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await $S(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(t,e){const n=Hm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(hc(i,e??{}))return s;ja(s,"already-initialized")}return n.initialize({options:e})}function ZB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,n){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}async function t5(t,e){return Js(t,"POST","/v1/accounts:update",e)}async function n5(t,e){return Js(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r5(t,e){return Km(t,"POST","/v1/accounts:signInWithPassword",xi(t,e))}async function s5(t,e){return Js(t,"POST","/v1/accounts:sendOobCode",xi(t,e))}async function i5(t,e){return s5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(t,e){return Km(t,"POST","/v1/accounts:signInWithEmailLink",xi(t,e))}async function a5(t,e){return Km(t,"POST","/v1/accounts:signInWithEmailLink",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends e5{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ld(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ld(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(e,n,"signInWithPassword",r5);case"emailLink":return o5(e,{email:this._email,oobCode:this._password});default:ja(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(e,r,"signUpPassword",n5);case"emailLink":return a5(e,{idToken:n,email:this._email,oobCode:this._password});default:ja(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function c5(t){const e=Du(ku(t)).link,n=e?Du(ku(e)).deep_link_id:null,r=Du(ku(t)).deep_link_id;return(r?Du(ku(r)).link:null)||r||n||e||t}class N0{constructor(e){const n=Du(ku(e)),r=n.apiKey??null,s=n.oobCode??null,i=l5(n.mode??null);dt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=c5(e);try{return new N0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.providerId=Wc.PROVIDER_ID}static credential(e,n){return Ld._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=N0.parseLink(n);return dt(r,"argument-error"),Ld._fromEmailAndCode(e,r.code,r.tenantId)}}Wc.PROVIDER_ID="password";Wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(t,e){return Km(t,"POST","/v1/accounts:signUp",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await hs._fromIdTokenResponse(e,r,s),o=BS(r);return new fc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=BS(r);return new fc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function BS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Ts{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jp(e,n,r,s)}}function mD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e,n=!1){const{auth:r}=t;if(kr(r.app))return Promise.reject(Eo(r));const s="reauthenticate";try{const i=await Od(t,mD(r,s,e,t),n);dt(i.idToken,r,"internal-error");const o=D0(i.idToken);dt(o,r,"internal-error");const{sub:a}=o;return dt(t.uid===a,r,"user-mismatch"),fc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ja(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(t,e,n=!1){if(kr(t.app))return Promise.reject(Eo(t));const r="signIn",s=await mD(t,r,e),i=await fc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function f5(t,e){return h5(zc(t),e)}async function ZK(t,e){return d5(bt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t){const e=zc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p5(t,e,n){const r=zc(t);await Up(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",i5)}async function zS(t,e,n){if(kr(t.app))return Promise.reject(Eo(t));const r=zc(t),o=await Up(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",u5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&gD(t),l}),a=await fc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function m5(t,e,n){return kr(t.app)?Promise.reject(Eo(t)):f5(bt(t),Wc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t,e){return Js(t,"POST","/v1/accounts:createAuthUri",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t,e){const n=rD()?mB():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await g5(bt(t),r);return s||[]}function eG(t,e){return v5(bt(t),null,e)}async function v5(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Od(t,t5(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t,e){return bt(t).setPersistence(e)}function _5(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}function WS(t){return bt(t).signOut()}const qS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qS,"1"),this.storage.removeItem(qS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=1e3,T5=10;class vD extends yD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);FB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,T5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},E5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vD.type="LOCAL";const wD=vD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D extends yD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_D.type="SESSION";const I5=_D;new lh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lh(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lh(5e3,15e3);var HS="@firebase/auth",KS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A5(t){Ks(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;dt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fD(t)},c=new WB(r,s,i,l);return ZB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new _s("auth-internal",e=>{const n=zc(e.getProvider("auth").getImmediate());return(r=>new S5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(HS,KS,b5(t)),Ur(HS,KS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=5*60;z6("authIdTokenMaxAge");function R5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}qB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=P0("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",R5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A5("Browser");var P5="firebase",C5="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(P5,C5,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=new Map,k5={activated:!1,tokenObservers:[]},N5={initialized:!1,enabled:!1};function Es(t){return D5.get(t)||{...k5}}function ED(){return N5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5="https://content-firebaseappcheck.googleapis.com/v1";const L5="exchangeDebugToken",GS={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},tG=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new cw,this.pending.promise.catch(n=>{}),await M5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new cw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function M5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},oo=new Bc("appCheck","AppCheck",F5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(!Es(t).activated)throw oo.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw oo.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw oo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw oo.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw oo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function SD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${O5}/projects/${n}/apps/${r}:${L5}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5="firebase-app-check-database",j5=1,yw="firebase-app-check-store";let rf=null;function $5(){return rf||(rf=new Promise((t,e)=>{try{const n=indexedDB.open(U5,j5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(oo.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(yw,{keyPath:"compositeKey"})}}}catch(n){e(oo.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),rf)}function B5(t,e){return z5(W5(t),e)}async function z5(t,e){const r=(await $5()).transaction(yw,"readwrite"),i=r.objectStore(yw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(oo.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function W5(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new qm("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t,e){return x0()?B5(t,e).catch(n=>{Nu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return ED().enabled}async function AD(){const t=ED();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5={error:"UNKNOWN_ERROR"};function H5(t){return b0.encodeString(JSON.stringify(t),!1)}async function vw(t,e=!1,n=!1){const r=t.app;TD(r);const s=Es(r);let i=s.token,o;if(i&&!Ou(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Ou(c)?i=c:await Ay(r,void 0))}if(!e&&i&&Ou(i))return{token:i.token};let a=!1;if(bD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=ID(SD(r,await AD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Ay(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Nu.warn(c.message):n&&Nu.error(c),xy(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Es(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Nu.warn(c.message):n&&Nu.error(c),o=c}let l;return i?o?Ou(i)?l={token:i.token,internalError:o}:l=xy(o):(l={token:i.token},s.token=i,await Ay(r,i)):l=xy(o),a&&Y5(r,l),l}async function K5(t){const e=t.app;TD(e);const{provider:n}=Es(e);if(bD()){const r=await AD(),{token:s}=await ID(SD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function G5(t,e,n,r){const{app:s}=t,i=Es(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Ou(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),QS(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>QS(t))}function xD(t,e){const n=Es(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function QS(t){const{app:e}=t,n=Es(e);let r=n.tokenRefresher;r||(r=Q5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Q5(t){const{app:e}=t;return new V5(async()=>{const n=Es(e);let r;if(n.token?r=await vw(t,!0):r=await vw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Es(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},GS.RETRIAL_MIN_WAIT,GS.RETRIAL_MAX_WAIT)}function Y5(t,e){const n=Es(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ou(t){return t.expireTimeMillis-Date.now()>0}function xy(t){return{token:H5(q5),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Es(this.app);for(const n of e)xD(this.app,n.next);return Promise.resolve()}}function X5(t,e){return new J5(t,e)}function Z5(t){return{getToken:e=>vw(t,e),getLimitedUseToken:()=>K5(t),addTokenListener:e=>G5(t,"INTERNAL",e),removeTokenListener:e=>xD(t.app,e)}}const e9="@firebase/app-check",t9="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9="app-check",YS="app-check-internal";function r9(){Ks(new _s(n9,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return X5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(YS).initialize()})),Ks(new _s(YS,t=>{const e=t.getProvider("app-check").getImmediate();return Z5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ur(e9,t9)}r9();var JS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var To,RD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,A){function b(){}b.prototype=A.prototype,x.F=A.prototype,x.prototype=new b,x.prototype.constructor=x,x.D=function(P,D,O){for(var C=Array(arguments.length-2),j=2;j<arguments.length;j++)C[j-2]=arguments[j];return A.prototype[D].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,A,b){b||(b=0);const P=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)P[D]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(D=0;D<16;++D)P[D]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=x.g[0],b=x.g[1],D=x.g[2];let O=x.g[3],C;C=A+(O^b&(D^O))+P[0]+3614090360&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[1]+3905402710&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[2]+606105819&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[3]+3250441966&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[4]+4118548399&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[5]+1200080426&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[6]+2821735955&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[7]+4249261313&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[8]+1770035416&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[9]+2336552879&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[10]+4294925233&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[11]+2304563134&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[12]+1804603682&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[13]+4254626195&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[14]+2792965006&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[15]+1236535329&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(D^O&(b^D))+P[1]+4129170786&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[6]+3225465664&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[11]+643717713&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[0]+3921069994&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[5]+3593408605&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[10]+38016083&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[15]+3634488961&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[4]+3889429448&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[9]+568446438&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[14]+3275163606&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[3]+4107603335&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[8]+1163531501&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[13]+2850285829&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[2]+4243563512&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[7]+1735328473&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[12]+2368359562&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(b^D^O)+P[5]+4294588738&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[8]+2272392833&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[11]+1839030562&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[14]+4259657740&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[1]+2763975236&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[4]+1272893353&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[7]+4139469664&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[10]+3200236656&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[13]+681279174&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[0]+3936430074&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[3]+3572445317&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[6]+76029189&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[9]+3654602809&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[12]+3873151461&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[15]+530742520&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[2]+3299628645&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(D^(b|~O))+P[0]+4096336452&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[7]+1126891415&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[14]+2878612391&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[5]+4237533241&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[12]+1700485571&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[3]+2399980690&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[10]+4293915773&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[1]+2240044497&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[8]+1873313359&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[15]+4264355552&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[6]+2734768916&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[13]+1309151649&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[4]+4149444226&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[11]+3174756917&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[2]+718787259&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.v=function(x,A){A===void 0&&(A=x.length);const b=A-this.blockSize,P=this.C;let D=this.h,O=0;for(;O<A;){if(D==0)for(;O<=b;)s(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<A;)if(P[D++]=x.charCodeAt(O++),D==this.blockSize){s(this,P),D=0;break}}else for(;O<A;)if(P[D++]=x[O++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;A=this.o*8;for(var b=x.length-8;b<x.length;++b)x[b]=A&255,A/=256;for(this.v(x),x=Array(16),A=0,b=0;b<4;++b)for(let P=0;P<32;P+=8)x[A++]=this.g[b]>>>P&255;return x};function i(x,A){var b=a;return Object.prototype.hasOwnProperty.call(b,x)?b[x]:b[x]=A(x)}function o(x,A){this.h=A;const b=[];let P=!0;for(let D=x.length-1;D>=0;D--){const O=x[D]|0;P&&O==A||(b[D]=O,P=!1)}this.g=b}var a={};function l(x){return-128<=x&&x<128?i(x,function(A){return new o([A|0],A<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(x<0)return v(c(-x));const A=[];let b=1;for(let P=0;x>=b;P++)A[P]=x/b|0,b*=4294967296;return new o(A,0)}function d(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return v(d(x.substring(1),A));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(A,8));let P=h;for(let O=0;O<x.length;O+=8){var D=Math.min(8,x.length-O);const C=parseInt(x.substring(O,O+D),A);D<8?(D=c(Math.pow(A,D)),P=P.j(D).add(c(C))):(P=P.j(b),P=P.add(c(C)))}return P}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-v(this).m();let x=0,A=1;for(let b=0;b<this.g.length;b++){const P=this.i(b);x+=(P>=0?P:4294967296+P)*A,A*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(w(this))return"0";if(g(this))return"-"+v(this).toString(x);const A=c(Math.pow(x,6));var b=this;let P="";for(;;){const D=R(b,A).g;b=E(b,D.j(A));let O=((b.g.length>0?b.g[0]:b.h)>>>0).toString(x);if(b=D,w(b))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function w(x){if(x.h!=0)return!1;for(let A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function g(x){return x.h==-1}t.l=function(x){return x=E(this,x),g(x)?-1:w(x)?0:1};function v(x){const A=x.g.length,b=[];for(let P=0;P<A;P++)b[P]=~x.g[P];return new o(b,~x.h).add(f)}t.abs=function(){return g(this)?v(this):this},t.add=function(x){const A=Math.max(this.g.length,x.g.length),b=[];let P=0;for(let D=0;D<=A;D++){let O=P+(this.i(D)&65535)+(x.i(D)&65535),C=(O>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);P=C>>>16,O&=65535,C&=65535,b[D]=C<<16|O}return new o(b,b[b.length-1]&-2147483648?-1:0)};function E(x,A){return x.add(v(A))}t.j=function(x){if(w(this)||w(x))return h;if(g(this))return g(x)?v(this).j(v(x)):v(v(this).j(x));if(g(x))return v(this.j(v(x)));if(this.l(p)<0&&x.l(p)<0)return c(this.m()*x.m());const A=this.g.length+x.g.length,b=[];for(var P=0;P<2*A;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<x.g.length;D++){const O=this.i(P)>>>16,C=this.i(P)&65535,j=x.i(D)>>>16,se=x.i(D)&65535;b[2*P+2*D]+=C*se,y(b,2*P+2*D),b[2*P+2*D+1]+=O*se,y(b,2*P+2*D+1),b[2*P+2*D+1]+=C*j,y(b,2*P+2*D+1),b[2*P+2*D+2]+=O*j,y(b,2*P+2*D+2)}for(x=0;x<A;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=A;x<2*A;x++)b[x]=0;return new o(b,0)};function y(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function _(x,A){this.g=x,this.h=A}function R(x,A){if(w(A))throw Error("division by zero");if(w(x))return new _(h,h);if(g(x))return A=R(v(x),A),new _(v(A.g),v(A.h));if(g(A))return A=R(x,v(A)),new _(v(A.g),A.h);if(x.g.length>30){if(g(x)||g(A))throw Error("slowDivide_ only works with positive integers.");for(var b=f,P=A;P.l(x)<=0;)b=k(b),P=k(P);var D=L(b,1),O=L(P,1);for(P=L(P,2),b=L(b,2);!w(P);){var C=O.add(P);C.l(x)<=0&&(D=D.add(b),O=C),P=L(P,1),b=L(b,1)}return A=E(x,D.j(A)),new _(D,A)}for(D=h;x.l(A)>=0;){for(b=Math.max(1,Math.floor(x.m()/A.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=c(b),C=O.j(A);g(C)||C.l(x)>0;)b-=P,O=c(b),C=O.j(A);w(O)&&(O=f),D=D.add(O),x=E(x,C)}return new _(D,x)}t.B=function(x){return R(this,x).h},t.and=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)&x.i(P);return new o(b,this.h&x.h)},t.or=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)|x.i(P);return new o(b,this.h|x.h)},t.xor=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)^x.i(P);return new o(b,this.h^x.h)};function k(x){const A=x.g.length+1,b=[];for(let P=0;P<A;P++)b[P]=x.i(P)<<1|x.i(P-1)>>>31;return new o(b,x.h)}function L(x,A){const b=A>>5;A%=32;const P=x.g.length-b,D=[];for(let O=0;O<P;O++)D[O]=A>0?x.i(O+b)>>>A|x.i(O+b+1)<<32-A:x.i(O+b);return new o(D,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,To=o}).apply(typeof JS<"u"?JS:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PD,Lu,CD,Ff,ww,DD,kD,ND;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var m=0;m<u.length;++m){var T=u[m];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var T=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var F=u[N];if(!(F in T))break e;T=T[F]}u=u[u.length-1],N=T[u],m=m(N),m!=N&&m!=null&&e(T,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var T=[],N;for(N in m)Object.prototype.hasOwnProperty.call(m,N)&&T.push([N,m[N]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,T){return u.call.apply(u.bind,arguments)}function c(u,m,T){return c=l,c.apply(null,arguments)}function d(u,m){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,m){function T(){}T.prototype=m.prototype,u.Z=m.prototype,u.prototype=new T,u.prototype.constructor=u,u.Ob=function(N,F,B){for(var le=Array(arguments.length-2),et=2;et<arguments.length;et++)le[et-2]=arguments[et];return m.prototype[F].apply(N,le)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const T=Array(m);for(let N=0;N<m;N++)T[N]=u[N];return T}return[]}function w(u,m){for(let N=1;N<arguments.length;N++){const F=arguments[N];var T=typeof F;if(T=T!="object"?T:F?Array.isArray(F)?"array":T:"null",T=="array"||T=="object"&&typeof F.length=="number"){T=u.length||0;const B=F.length||0;u.length=T+B;for(let le=0;le<B;le++)u[T+le]=F[le]}else u.push(F)}}class g{constructor(m,T){this.i=m,this.j=T,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(u){o.setTimeout(()=>{throw u},0)}function E(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,T){const N=_.get();N.set(m,T),this.h?this.h.next=N:this.g=N,this.h=N}}var _=new g(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(m,T){this.h=m,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let k,L=!1,x=new y,A=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(b)}};function b(){for(var u;u=E();){try{u.h.call(u.g)}catch(T){v(T)}var m=_;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}L=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const T=()=>{};o.addEventListener("test",T,m),o.removeEventListener("test",T,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function j(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h(j,D),j.prototype.init=function(u,m){const T=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(T=="mouseover"?m=u.fromElement:T=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),ie=0;function ue(u,m,T,N,F){this.listener=u,this.proxy=null,this.src=m,this.type=T,this.capture=!!N,this.ha=F,this.key=++ie,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function V(u,m,T){for(const N in u)m.call(T,u[N],N,u)}function ee(u,m){for(const T in u)m.call(void 0,u[T],T,u)}function ae(u){const m={};for(const T in u)m[T]=u[T];return m}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(u,m){let T,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(T in N)u[T]=N[T];for(let B=0;B<H.length;B++)T=H[B],Object.prototype.hasOwnProperty.call(N,T)&&(u[T]=N[T])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,m,T,N,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const le=Je(u,m,N,F);return le>-1?(m=u[le],T||(m.fa=!1)):(m=new ue(m,this.src,B,!!N,F),m.fa=T,u.push(m)),m};function Oe(u,m){const T=m.type;if(T in u.g){var N=u.g[T],F=Array.prototype.indexOf.call(N,m,void 0),B;(B=F>=0)&&Array.prototype.splice.call(N,F,1),B&&(U(m),u.g[T].length==0&&(delete u.g[T],u.h--))}}function Je(u,m,T,N){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==m&&B.capture==!!T&&B.ha==N)return F}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Ht={};function Ze(u,m,T,N,F){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Ze(u,m[B],T,N,F);return null}return T=Le(T),u&&u[se]?u.J(m,T,a(N)?!!N.capture:!1,F):Be(u,m,T,!1,N,F)}function Be(u,m,T,N,F,B){if(!m)throw Error("Invalid event type");const le=a(F)?!!F.capture:!!F;let et=yn(u);if(et||(u[Se]=et=new Te(u)),T=et.add(m,T,N,le,B),T.proxy)return T;if(N=We(),T.proxy=N,N.src=u,N.listener=T,u.addEventListener)O||(F=le),F===void 0&&(F=!1),u.addEventListener(m.toString(),N,F);else if(u.attachEvent)u.attachEvent(On(m.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function We(){function u(T){return m.call(u.src,u.listener,T)}const m=pr;return u}function Ot(u,m,T,N,F){if(Array.isArray(m))for(var B=0;B<m.length;B++)Ot(u,m[B],T,N,F);else N=a(N)?!!N.capture:!!N,T=Le(T),u&&u[se]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],T=Je(m,T,N,F),T>-1&&(U(m[T]),Array.prototype.splice.call(m,T,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=yn(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Je(m,T,N,F)),(T=u>-1?m[u]:null)&&en(T))}function en(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[se])Oe(m.i,u);else{var T=u.type,N=u.proxy;m.removeEventListener?m.removeEventListener(T,N,u.capture):m.detachEvent?m.detachEvent(On(T),N):m.addListener&&m.removeListener&&m.removeListener(N),(T=yn(m))?(Oe(T,u),T.h==0&&(T.src=null,m[Se]=null)):U(u)}}}function On(u){return u in Ht?Ht[u]:Ht[u]="on"+u}function pr(u,m){if(u.da)u=!0;else{m=new j(m,this);const T=u.listener,N=u.ha||u.src;u.fa&&en(u),u=T.call(N,m)}return u}function yn(u){return u=u[Se],u instanceof Te?u:null}var mr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Le(u){return typeof u=="function"?u:(u[mr]||(u[mr]=function(m){return u.handleEvent(m)}),u[mr])}function gt(){P.call(this),this.i=new Te(this),this.M=this,this.G=null}h(gt,P),gt.prototype[se]=!0,gt.prototype.removeEventListener=function(u,m,T,N){Ot(this,u,m,T,N)};function vn(u,m){var T,N=u.G;if(N)for(T=[];N;N=N.G)T.push(N);if(u=u.M,N=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var F=m;m=new D(N,u),Ne(m,F)}F=!0;let B,le;if(T)for(le=T.length-1;le>=0;le--)B=m.g=T[le],F=xr(B,N,!0,m)&&F;if(B=m.g=u,F=xr(B,N,!0,m)&&F,F=xr(B,N,!1,m)&&F,T)for(le=0;le<T.length;le++)B=m.g=T[le],F=xr(B,N,!1,m)&&F}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const T=u.g[m];for(let N=0;N<T.length;N++)U(T[N]);delete u.g[m],u.h--}}this.G=null},gt.prototype.J=function(u,m,T,N){return this.i.add(String(u),m,!1,T,N)},gt.prototype.K=function(u,m,T,N){return this.i.add(String(u),m,!0,T,N)};function xr(u,m,T,N){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let B=0;B<m.length;++B){const le=m[B];if(le&&!le.da&&le.capture==T){const et=le.listener,In=le.ha||le.src;le.fa&&Oe(u.i,le),F=et.call(In,N)!==!1&&F}}return F&&!N.defaultPrevented}function Ho(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function J(u){u.g=Ho(()=>{u.g=null,u.i&&(u.i=!1,J(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class G extends P{constructor(m,T){super(),this.m=m,this.l=T,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function X(u){P.call(this),this.h=u,this.g={}}h(X,P);var K=[];function Z(u){V(u.g,function(m,T){this.g.hasOwnProperty(T)&&en(m)},u),u.g={}}X.prototype.N=function(){X.Z.N.call(this),Z(this)},X.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,he=o.JSON.parse,ge=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function _e(){}function ze(){}var de={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){D.call(this,"d")}h(Me,D);function ye(){D.call(this,"c")}h(ye,D);var fe={},Fe=null;function De(){return Fe=Fe||new gt}fe.Ia="serverreachability";function st(u){D.call(this,fe.Ia,u)}h(st,D);function At(u){const m=De();vn(m,new st(m))}fe.STAT_EVENT="statevent";function tn(u,m){D.call(this,fe.STAT_EVENT,u),this.stat=m}h(tn,D);function Ye(u){const m=De();vn(m,new tn(m,u))}fe.Ja="timingevent";function ot(u,m){D.call(this,fe.Ja,u),this.size=m}h(ot,D);function at(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function pe(){this.g=!0}pe.prototype.ua=function(){this.g=!1};function ne(u,m,T,N,F,B){u.info(function(){if(u.g)if(B){var le="",et=B.split("&");for(let xt=0;xt<et.length;xt++){var In=et[xt].split("=");if(In.length>1){const Rn=In[0];In=In[1];const As=Rn.split("_");le=As.length>=2&&As[1]=="type"?le+(Rn+"="+In+"&"):le+(Rn+"=redacted&")}}}else le=null;else le=B;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+m+`
`+T+`
`+le})}function Ce(u,m,T,N,F,B,le){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+m+`
`+T+`
`+B+" "+le})}function me(u,m,T,N){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+je(u,T)+(N?" "+N:"")})}function Qe(u,m){u.info(function(){return"TIMEOUT: "+m})}pe.prototype.info=function(){};function je(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var T=B[u];if(!(T.length<2)){var N=T[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let le=1;le<N.length;le++)N[le]=""}}}}return oe(B)}catch{return m}}var ft={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ae={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yt;function vt(){}h(vt,_e),vt.prototype.g=function(){return new XMLHttpRequest},yt=new vt;function lt(u){return encodeURIComponent(String(u))}function Lt(u){var m=1;u=u.split(":");const T=[];for(;m>0&&u.length;)T.push(u.shift()),m--;return u.length&&T.push(u.join(":")),T}function wn(u,m,T,N){this.j=u,this.i=m,this.l=T,this.S=N||1,this.V=new X(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}var tt={},$t={};function nn(u,m,T){u.M=1,u.A=bh(bs(m)),u.u=T,u.R=!0,Kt(u,null)}function Kt(u,m){u.F=Date.now(),Bn(u),u.B=bs(u.A);var T=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),XE(T.i,"t",N),u.C=0,T=u.j.L,u.h=new qe,u.g=gT(u.j,T?m:null,!u.u),u.P>0&&(u.O=new G(c(u.Y,u,u.g),u.P)),m=u.V,T=u.g,N=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(K[0]=F.toString()),F=K);for(let B=0;B<F.length;B++){const le=Ze(T,F[B],N||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.J?ae(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),At(),ne(u.i,u.v,u.B,u.l,u.S,u.u)}wn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Ni(u)==3?m.j():this.Y(u)},wn.prototype.Y=function(u){try{if(u==this.g)e:{const et=Ni(this.g),In=this.g.ya(),xt=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||iT(this.g)))){this.K||et!=4||In==7||(In==8||xt<=0?At(3):At(2)),gr(this);var m=this.g.ca();this.X=m;var T=xn(this);if(this.o=m==200,Ce(this.i,this.v,this.B,this.l,this.S,et,m),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(N)){var B=N;break t}}B=null}if(u=B)me(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ko(this,u);else{this.o=!1,this.m=3,Ye(12),rr(this),nr(this);break e}}if(this.R){u=!0;let Rn;for(;!this.K&&this.C<T.length;)if(Rn=qr(this,T),Rn==$t){et==4&&(this.m=4,Ye(14),u=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==tt){this.m=4,Ye(15),me(this.i,this.l,T,"[Invalid Chunk]"),u=!1;break}else me(this.i,this.l,Rn,null),Ko(this,Rn);if(tr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||T.length!=0||this.h.h||(this.m=1,Ye(16),u=!1),this.o=this.o&&u,!u)me(this.i,this.l,T,"[Invalid Chunked Response]"),rr(this),nr(this);else if(T.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ng(le),le.P=!0,Ye(11))}}else me(this.i,this.l,T,null),Ko(this,T);et==4&&rr(this),this.o&&!this.K&&(et==4?hT(this.j,this):(this.o=!1,Bn(this)))}else B2(this.g),m==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),rr(this),nr(this)}}}catch{}finally{}};function xn(u){if(!tr(u))return u.g.la();const m=iT(u.g);if(m==="")return"";let T="";const N=m.length,F=Ni(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return rr(u),nr(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<N;B++)u.h.h=!0,T+=u.h.i.decode(m[B],{stream:!(F&&B==N-1)});return m.length=0,u.h.g+=T,u.C=0,u.h.g}function tr(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function qr(u,m){var T=u.C,N=m.indexOf(`
`,T);return N==-1?$t:(T=Number(m.substring(T,N)),isNaN(T)?tt:(N+=1,N+T>m.length?$t:(m=m.slice(N,N+T),u.C=N+T,m)))}wn.prototype.cancel=function(){this.K=!0,rr(this)};function Bn(u){u.T=Date.now()+u.H,ns(u,u.H)}function ns(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=at(c(u.aa,u),m)}function gr(u){u.D&&(o.clearTimeout(u.D),u.D=null)}wn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Qe(this.i,this.B),this.M!=2&&(At(),Ye(17)),rr(this),this.m=2,nr(this)):ns(this,this.T-u)};function nr(u){u.j.I==0||u.K||hT(u.j,u)}function rr(u){gr(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Z(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ko(u,m){try{var T=u.j;if(T.I!=0&&(T.g==u||Hr(T.h,u))){if(!u.L&&Hr(T.h,u)&&T.I==3){try{var N=T.Ba.g.parse(m)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<u.F)Ch(T),Rh(T);else break e;kg(T),Ye(18)}}else T.xa=F[1],0<T.xa-T.K&&F[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=at(c(T.Va,T),6e3));ct(T.h)<=1&&T.ta&&(T.ta=void 0)}else Qo(T,11)}else if((u.L||T.g==u)&&Ch(T),!C(m))for(F=T.Ba.g.parse(m),m=0;m<F.length;m++){let xt=F[m];const Rn=xt[0];if(!(Rn<=T.K))if(T.K=Rn,xt=xt[1],T.I==2)if(xt[0]=="c"){T.M=xt[1],T.ba=xt[2];const As=xt[3];As!=null&&(T.ka=As,T.j.info("VER="+T.ka));const Yo=xt[4];Yo!=null&&(T.za=Yo,T.j.info("SVER="+T.za));const Oi=xt[5];Oi!=null&&typeof Oi=="number"&&Oi>0&&(N=1.5*Oi,T.O=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const Li=u.g;if(Li){const kh=Li.g?Li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kh){var B=N.h;B.g||kh.indexOf("spdy")==-1&&kh.indexOf("quic")==-1&&kh.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(xg(B,B.h),B.h=null))}if(N.G){const Og=Li.g?Li.g.getResponseHeader("X-HTTP-Session-Id"):null;Og&&(N.wa=Og,Vt(N.J,N.G,Og))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-u.F,T.j.info("Handshake RTT: "+T.T+"ms")),N=T;var le=u;if(N.na=mT(N,N.L?N.ba:null,N.W),le.L){qE(N.h,le);var et=le,In=N.O;In&&(et.H=In),et.D&&(gr(et),Bn(et)),N.g=le}else uT(N);T.i.length>0&&Ph(T)}else xt[0]!="stop"&&xt[0]!="close"||Qo(T,7);else T.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?Qo(T,7):Dg(T):xt[0]!="noop"&&T.l&&T.l.qa(xt),T.A=0)}}At(4)}catch{}}var Sh=class{constructor(u,m){this.g=u,this.map=m}};function nl(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ct(u){return u.h?1:u.g?u.g.size:0}function Hr(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function xg(u,m){u.g?u.g.add(m):u.h=m}function qE(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}nl.prototype.cancel=function(){if(this.i=HE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function HE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const T of u.g.values())m=m.concat(T.G);return m}return p(u.i)}var KE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C2(u,m){if(u){u=u.split("&");for(let T=0;T<u.length;T++){const N=u[T].indexOf("=");let F,B=null;N>=0?(F=u[T].substring(0,N),B=u[T].substring(N+1)):F=u[T],m(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Di(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Di?(this.l=u.l,tu(this,u.j),this.o=u.o,this.g=u.g,nu(this,u.u),this.h=u.h,Rg(this,ZE(u.i)),this.m=u.m):u&&(m=String(u).match(KE))?(this.l=!1,tu(this,m[1]||"",!0),this.o=ru(m[2]||""),this.g=ru(m[3]||"",!0),nu(this,m[4]),this.h=ru(m[5]||"",!0),Rg(this,m[6]||"",!0),this.m=ru(m[7]||"")):(this.l=!1,this.i=new iu(null,this.l))}Di.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(su(m,GE,!0),":");var T=this.g;return(T||m=="file")&&(u.push("//"),(m=this.o)&&u.push(su(m,GE,!0),"@"),u.push(lt(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&u.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&u.push("/"),u.push(su(T,T.charAt(0)=="/"?N2:k2,!0))),(T=this.i.toString())&&u.push("?",T),(T=this.m)&&u.push("#",su(T,L2)),u.join("")},Di.prototype.resolve=function(u){const m=bs(this);let T=!!u.j;T?tu(m,u.j):T=!!u.o,T?m.o=u.o:T=!!u.g,T?m.g=u.g:T=u.u!=null;var N=u.h;if(T)nu(m,u.u);else if(T=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=m.h.lastIndexOf("/");F!=-1&&(N=m.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let le=0;le<F.length;){const et=F[le++];et=="."?N&&le==F.length&&B.push(""):et==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),N&&le==F.length&&B.push("")):(B.push(et),N=!0)}N=B.join("/")}else N=F}return T?m.h=N:T=u.i.toString()!=="",T?Rg(m,ZE(u.i)):T=!!u.m,T&&(m.m=u.m),m};function bs(u){return new Di(u)}function tu(u,m,T){u.j=T?ru(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function nu(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Rg(u,m,T){m instanceof iu?(u.i=m,V2(u.i,u.l)):(T||(m=su(m,O2)),u.i=new iu(m,u.l))}function Vt(u,m,T){u.i.set(m,T)}function bh(u){return Vt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ru(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function su(u,m,T){return typeof u=="string"?(u=encodeURI(u).replace(m,D2),T&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function D2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var GE=/[#\/\?@]/g,k2=/[#\?:]/g,N2=/[#\?]/g,O2=/[#\?@]/g,L2=/#/g;function iu(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Go(u){u.g||(u.g=new Map,u.h=0,u.i&&C2(u.i,function(m,T){u.add(decodeURIComponent(m.replace(/\+/g," ")),T)}))}t=iu.prototype,t.add=function(u,m){Go(this),this.i=null,u=sl(this,u);let T=this.g.get(u);return T||this.g.set(u,T=[]),T.push(m),this.h+=1,this};function QE(u,m){Go(u),m=sl(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function YE(u,m){return Go(u),m=sl(u,m),u.g.has(m)}t.forEach=function(u,m){Go(this),this.g.forEach(function(T,N){T.forEach(function(F){u.call(m,F,N,this)},this)},this)};function JE(u,m){Go(u);let T=[];if(typeof m=="string")YE(u,m)&&(T=T.concat(u.g.get(sl(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)T=T.concat(u[m]);return T}t.set=function(u,m){return Go(this),this.i=null,u=sl(this,u),YE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=JE(this,u),u.length>0?String(u[0]):m):m};function XE(u,m,T){QE(u,m),T.length>0&&(u.i=null,u.g.set(sl(u,m),p(T)),u.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let N=0;N<m.length;N++){var T=m[N];const F=lt(T);T=JE(this,T);for(let B=0;B<T.length;B++){let le=F;T[B]!==""&&(le+="="+lt(T[B])),u.push(le)}}return this.i=u.join("&")};function ZE(u){const m=new iu;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function sl(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function V2(u,m){m&&!u.j&&(Go(u),u.i=null,u.g.forEach(function(T,N){const F=N.toLowerCase();N!=F&&(QE(this,N),XE(this,F,T))},u)),u.j=m}function M2(u,m){const T=new pe;if(o.Image){const N=new Image;N.onload=d(ki,T,"TestLoadImage: loaded",!0,m,N),N.onerror=d(ki,T,"TestLoadImage: error",!1,m,N),N.onabort=d(ki,T,"TestLoadImage: abort",!1,m,N),N.ontimeout=d(ki,T,"TestLoadImage: timeout",!1,m,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else m(!1)}function F2(u,m){const T=new pe,N=new AbortController,F=setTimeout(()=>{N.abort(),ki(T,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:N.signal}).then(B=>{clearTimeout(F),B.ok?ki(T,"TestPingServer: ok",!0,m):ki(T,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),ki(T,"TestPingServer: error",!1,m)})}function ki(u,m,T,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(T)}catch{}}function U2(){this.g=new ge}function Pg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Pg,_e),Pg.prototype.g=function(){return new Ah(this.i,this.h)};function Ah(u,m){gt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Ah,gt),t=Ah.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,au(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ou(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,au(this)),this.g&&(this.readyState=3,au(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function eT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ou(this):au(this),this.readyState==3&&eT(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ou(this))},t.Na=function(u){this.g&&(this.response=u,ou(this))},t.ga=function(){this.g&&ou(this)};function ou(u){u.readyState=4,u.l=null,u.j=null,u.B=null,au(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var T=m.next();!T.done;)T=T.value,u.push(T[0]+": "+T[1]),T=m.next();return u.join(`\r
`)};function au(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ah.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function tT(u){let m="";return V(u,function(T,N){m+=N,m+=":",m+=T,m+=`\r
`}),m}function Cg(u,m,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=tT(T),typeof u=="string"?T!=null&&lt(T):Vt(u,m,T))}function rn(u){gt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(rn,gt);var j2=/^https?$/i,$2=["POST","PUT"];t=rn.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yt.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){nT(this,B);return}if(u=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)T.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const B of N.keys())T.set(B,N.get(B));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(B=>B.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call($2,m,void 0)>=0)||N||F||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,le]of T)this.g.setRequestHeader(B,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){nT(this,B)}};function nT(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,rT(u),xh(u)}function rT(u){u.A||(u.A=!0,vn(u,"complete"),vn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vn(this,"complete"),vn(this,"abort"),xh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xh(this,!0)),rn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sT(this):this.Xa())},t.Xa=function(){sT(this)};function sT(u){if(u.h&&typeof i<"u"){if(u.v&&Ni(u)==4)setTimeout(u.Ca.bind(u),0);else if(vn(u,"readystatechange"),Ni(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var T;if(!(T=m)){var N;if(N=B===0){let le=String(u.D).match(KE)[1]||null;!le&&o.self&&o.self.location&&(le=o.self.location.protocol.slice(0,-1)),N=!j2.test(le?le.toLowerCase():"")}T=N}if(T)vn(u,"complete"),vn(u,"success");else{u.o=6;try{var F=Ni(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",rT(u)}}finally{xh(u)}}}}function xh(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const T=u.g;u.g=null,m||vn(u,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ni(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ni(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),he(m)}};function iT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function B2(u){const m={};u=(u.g&&Ni(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(C(u[N]))continue;var T=Lt(u[N]);const F=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const B=m[F]||[];m[F]=B,B.push(T)}ee(m,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lu(u,m,T){return T&&T.internalChannelParams&&T.internalChannelParams[u]||m}function oT(u){this.za=0,this.i=[],this.j=new pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lu("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lu("baseRetryDelayMs",5e3,u),this.Za=lu("retryDelaySeedMs",1e4,u),this.Ta=lu("forwardChannelMaxRetries",2,u),this.va=lu("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new nl(u&&u.concurrentRequestLimit),this.Ba=new U2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=oT.prototype,t.ka=8,t.I=1,t.connect=function(u,m,T,N){Ye(0),this.W=u,this.H=m||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.J=mT(this,null,this.W),Ph(this)};function Dg(u){if(aT(u),u.I==3){var m=u.V++,T=bs(u.J);if(Vt(T,"SID",u.M),Vt(T,"RID",m),Vt(T,"TYPE","terminate"),cu(u,T),m=new wn(u,u.j,m),m.M=2,m.A=bh(bs(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=m.A,T=!0),T||(m.g=gT(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Bn(m)}pT(u)}function Rh(u){u.g&&(Ng(u),u.g.cancel(),u.g=null)}function aT(u){Rh(u),u.v&&(o.clearTimeout(u.v),u.v=null),Ch(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Ph(u){if(!rl(u.h)&&!u.m){u.m=!0;var m=u.Ea;k||A(),L||(k(),L=!0),x.add(m,u),u.D=0}}function z2(u,m){return ct(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=at(c(u.Ea,u,m),fT(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new wn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=ae(B),Ne(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var m=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(m+=N,m>4096){m=T;break e}if(m===4096||T===this.i.length-1){m=T+1;break e}}m=1e3}else m=1e3;m=cT(this,F,m),T=bs(this.J),Vt(T,"RID",u),Vt(T,"CVER",22),this.G&&Vt(T,"X-HTTP-Session-Id",this.G),cu(this,T),B&&(this.R?m="headers="+lt(tT(B))+"&"+m:this.u&&Cg(T,this.u,B)),xg(this.h,F),this.Ra&&Vt(T,"TYPE","init"),this.S?(Vt(T,"$req",m),Vt(T,"SID","null"),F.U=!0,nn(F,T,null)):nn(F,T,m),this.I=2}}else this.I==3&&(u?lT(this,u):this.i.length==0||rl(this.h)||lT(this))};function lT(u,m){var T;m?T=m.l:T=u.V++;const N=bs(u.J);Vt(N,"SID",u.M),Vt(N,"RID",T),Vt(N,"AID",u.K),cu(u,N),u.u&&u.o&&Cg(N,u.u,u.o),T=new wn(u,u.j,T,u.D+1),u.u===null&&(T.J=u.o),m&&(u.i=m.G.concat(u.i)),m=cT(u,T,1e3),T.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),xg(u.h,T),nn(T,N,m)}function cu(u,m){u.H&&V(u.H,function(T,N){Vt(m,N,T)}),u.l&&V({},function(T,N){Vt(m,N,T)})}function cT(u,m,T){T=Math.min(u.i.length,T);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var F=u.i;let et=-1;for(;;){const In=["count="+T];et==-1?T>0?(et=F[0].g,In.push("ofs="+et)):et=0:In.push("ofs="+et);let xt=!0;for(let Rn=0;Rn<T;Rn++){var B=F[Rn].g;const As=F[Rn].map;if(B-=et,B<0)et=Math.max(0,F[Rn].g-100),xt=!1;else try{B="req"+B+"_"||"";try{var le=As instanceof Map?As:Object.entries(As);for(const[Yo,Oi]of le){let Li=Oi;a(Oi)&&(Li=oe(Oi)),In.push(B+Yo+"="+encodeURIComponent(Li))}}catch(Yo){throw In.push(B+"type="+encodeURIComponent("_badmap")),Yo}}catch{N&&N(As)}}if(xt){le=In.join("&");break e}}le=void 0}return u=u.i.splice(0,T),m.G=u,le}function uT(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;k||A(),L||(k(),L=!0),x.add(m,u),u.A=0}}function kg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=at(c(u.Da,u),fT(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,dT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=at(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ye(10),Rh(this),dT(this))};function Ng(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function dT(u){u.g=new wn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=bs(u.na);Vt(m,"RID","rpc"),Vt(m,"SID",u.M),Vt(m,"AID",u.K),Vt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Vt(m,"TO",u.ia),Vt(m,"TYPE","xmlhttp"),cu(u,m),u.u&&u.o&&Cg(m,u.u,u.o),u.O&&(u.g.H=u.O);var T=u.g;u=u.ba,T.M=1,T.A=bh(bs(m)),T.u=null,T.R=!0,Kt(T,u)}t.Va=function(){this.C!=null&&(this.C=null,Rh(this),kg(this),Ye(19))};function Ch(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function hT(u,m){var T=null;if(u.g==m){Ch(u),Ng(u),u.g=null;var N=2}else if(Hr(u.h,m))T=m.G,qE(u.h,m),N=1;else return;if(u.I!=0){if(m.o)if(N==1){T=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;N=De(),vn(N,new ot(N,T)),Ph(u)}else uT(u);else if(F=m.m,F==3||F==0&&m.X>0||!(N==1&&z2(u,m)||N==2&&kg(u)))switch(T&&T.length>0&&(m=u.h,m.i=m.i.concat(T)),F){case 1:Qo(u,5);break;case 4:Qo(u,10);break;case 3:Qo(u,6);break;default:Qo(u,2)}}}function fT(u,m){let T=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(T*=2),T*m}function Qo(u,m){if(u.j.info("Error code "+m),m==2){var T=c(u.bb,u),N=u.Ua;const F=!N;N=new Di(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||tu(N,"https"),bh(N),F?M2(N.toString(),T):F2(N.toString(),T)}else Ye(2);u.I=0,u.l&&u.l.pa(m),pT(u),aT(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function pT(u){if(u.I=0,u.ja=[],u.l){const m=HE(u.h);(m.length!=0||u.i.length!=0)&&(w(u.ja,m),w(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function mT(u,m,T){var N=T instanceof Di?bs(T):new Di(T);if(N.g!="")m&&(N.g=m+"."+N.g),nu(N,N.u);else{var F=o.location;N=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const B=new Di(null);N&&tu(B,N),m&&(B.g=m),F&&nu(B,F),T&&(B.h=T),N=B}return T=u.G,m=u.wa,T&&m&&Vt(N,T,m),Vt(N,"VER",u.ka),cu(u,N),N}function gT(u,m,T){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new rn(new Pg({ab:T})):new rn(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yT(){}t=yT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Dh(){}Dh.prototype.g=function(u,m){return new Rr(u,m)};function Rr(u,m){gt.call(this),this.g=new oT(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new il(this)}h(Rr,gt),Rr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rr.prototype.close=function(){Dg(this.g)},Rr.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var T={};T.__data__=u,u=T}else this.v&&(T={},T.__data__=oe(u),u=T);m.i.push(new Sh(m.Ya++,u)),m.I==3&&Ph(m)},Rr.prototype.N=function(){this.g.l=null,delete this.j,Dg(this.g),delete this.g,Rr.Z.N.call(this)};function vT(u){Me.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const T in m){u=T;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(vT,Me);function wT(){ye.call(this),this.status=1}h(wT,ye);function il(u){this.g=u}h(il,yT),il.prototype.ra=function(){vn(this.g,"a")},il.prototype.qa=function(u){vn(this.g,new vT(u))},il.prototype.pa=function(u){vn(this.g,new wT)},il.prototype.oa=function(){vn(this.g,"b")},Dh.prototype.createWebChannel=Dh.prototype.g,Rr.prototype.send=Rr.prototype.o,Rr.prototype.open=Rr.prototype.m,Rr.prototype.close=Rr.prototype.close,ND=function(){return new Dh},kD=function(){return De()},DD=fe,ww={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ft.NO_ERROR=0,ft.TIMEOUT=8,ft.HTTP_ERROR=6,Ff=ft,Ae.COMPLETE="complete",CD=Ae,ze.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",gt.prototype.listen=gt.prototype.J,Lu=ze,rn.prototype.listenOnce=rn.prototype.K,rn.prototype.getLastError=rn.prototype.Ha,rn.prototype.getLastErrorCode=rn.prototype.ya,rn.prototype.getStatus=rn.prototype.ca,rn.prototype.getResponseJson=rn.prototype.La,rn.prototype.getResponseText=rn.prototype.la,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Fa,PD=rn}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});const XS="@firebase/firestore",ZS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new qm("@firebase/firestore");function yl(){return Co.logLevel}function OD(t){Co.setLogLevel(t)}function Y(t,...e){if(Co.logLevel<=ut.DEBUG){const n=e.map(O0);Co.debug(`Firestore (${qc}): ${t}`,...n)}}function fn(t,...e){if(Co.logLevel<=ut.ERROR){const n=e.map(O0);Co.error(`Firestore (${qc}): ${t}`,...n)}}function Do(t,...e){if(Co.logLevel<=ut.WARN){const n=e.map(O0);Co.warn(`Firestore (${qc}): ${t}`,...n)}}function O0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,LD(t,r,n)}function LD(t,e,n){let r=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fn(r),new Error(r)}function Pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||LD(e,s,r)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gn.UNAUTHENTICATED))}shutdown(){}}class i9{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new s9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class o9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class a9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new o9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new eb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new eb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=c9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ge(t,e){return t<e?-1:t>e?1:0}function _w(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ry(s)===Ry(i)?Ge(s,i):Ry(s)?1:-1}return Ge(t.length,e.length)}const u9=55296,d9=57343;function Ry(t){const e=t.charCodeAt(0);return e>=u9&&e<=d9}function pc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function MD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="__name__";class Ps{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ps.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ge(e.length,n.length)}static compareSegments(e,n){const r=Ps.isNumericId(e),s=Ps.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ps.extractNumericId(e).compare(Ps.extractNumericId(n)):_w(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return To.fromString(e.substring(4,e.length-2))}}class Et extends Ps{construct(e,n,r){return new Et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const h9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Ps{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return h9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tb}static keyField(){return new Wt([tb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new re(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new re(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Et.fromString(e))}static fromName(e){return new ce(Et.fromString(e).popFirst(5))}static empty(){return new ce(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t,e,n){if(!n)throw new re(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UD(t,e,n,r){if(e===!0&&r===!0)throw new re(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nb(t){if(!ce.isDocumentKey(t))throw new re(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rb(t){if(ce.isDocumentKey(t))throw new re(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Qm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function mn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qm(t);throw new re(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function f9(t,e){if(e<=0)throw new re(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function ch(t,e){if(!jD(t))throw new re(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new re(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=-62135596800,ib=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ib);return new _t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<sb)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ib}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ch(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Tn("string",_t._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new _t(0,0))}static max(){return new ke(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;class $p{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Ew(t){return t.fields.find(e=>e.kind===2)}function ta(t){return t.fields.filter(e=>e.kind!==2)}$p.UNKNOWN_ID=-1;class Uf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Vd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Vd(0,Br.min())}}function $D(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new Br(s,ce.empty(),e)}function BD(t){return new Br(t.readTime,t.key,mc)}class Br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Br(ke.min(),ce.empty(),mc)}static max(){return new Br(ke.max(),ce.empty(),mc)}}function L0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==zD)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="SimpleDb";class Ym{static open(e,n,r,s){try{return new Ym(n,e.transaction(s,r))}catch(i){throw new Ju(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Zr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Ju(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=V0(r.target.error);this.S.reject(new Ju(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Y(Cr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new m9(n)}}class Io{static delete(e){return Y(Cr,"Removing database:",e),sa(jC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!x0())return!1;if(Io.F())return!0;const e=$n(),n=Io.M(e),r=0<n&&n<10,s=qD(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Io.M($n())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Y(Cr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new re(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new re(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ju(e,o))},s.onupgradeneeded=i=>{Y(Cr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{Y(Cr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Ym.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Y(Cr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class p9{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return sa(this.U.delete())}}class Ju extends re{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function zo(t){return t.name==="IndexedDbTransactionError"}class m9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y(Cr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y(Cr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sa(r)}add(e){return Y(Cr,"ADD",this.store.name,e,e),sa(this.store.add(e))}get(e){return sa(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y(Cr,"GET",this.store.name,e,n),n))}delete(e){return Y(Cr,"DELETE",this.store.name,e),sa(this.store.delete(e))}count(){return Y(Cr,"COUNT",this.store.name),sa(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){Y(Cr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=V0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new p9(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function sa(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=V0(r.target.error);n(s)}})}let ob=!1;function V0(t){const e=Io.M($n());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ob||(ob=!0,setTimeout(()=>{throw r},0)),r}}return t}const Xu="IndexBackfiller";class g9{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Y(Xu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();Y(Xu,`Documents written: ${n}`)}catch(n){zo(n)?Y(Xu,"Ignoring IndexedDB error during index backfill: ",n):await Bo(n)}await this.re(6e4)})}}class y9{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Y(Xu,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(Y(Xu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=BD(i);L0(o,r)>0&&(r=o)}),new Br(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Er.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=-1;function Jm(t){return t==null}function Md(t){return t===0&&1/t==-1/0}function HD(t){return typeof t=="number"&&Number.isInteger(t)&&!Md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="";function Zn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ab(e)),e=v9(t.get(n),e);return ab(e)}function v9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Bp:n+="";break;default:n+=i}}return n}function ab(t){return t+Bp+""}function Ms(t){const e=t.length;if(Pe(e>=2,64408,{path:t}),e===2)return Pe(t.charAt(0)===Bp&&t.charAt(1)==="",56145,{path:t}),Et.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Bp,i);switch((o<0||o>n)&&we(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:we(61167,{path:t})}i=o+2}return new Et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="remoteDocuments",uh="owner",al="owner",Fd="mutationQueues",w9="userId",cs="mutations",lb="batchId",pa="userMutationsIndex",cb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e){return[t,Zn(e)]}function KD(t,e,n){return[t,Zn(e),n]}const _9={},gc="documentMutations",zp="remoteDocumentsV14",E9=["prefixPath","collectionGroup","readTime","documentId"],$f="documentKeyIndex",T9=["prefixPath","collectionGroup","documentId"],GD="collectionGroupIndex",I9=["collectionGroup","readTime","prefixPath","documentId"],Ud="remoteDocumentGlobal",Tw="remoteDocumentGlobalKey",yc="targets",QD="queryTargetsIndex",S9=["canonicalId","targetId"],vc="targetDocuments",b9=["targetId","path"],M0="documentTargetsIndex",A9=["path","targetId"],Wp="targetGlobalKey",Da="targetGlobal",jd="collectionParents",x9=["collectionId","parent"],wc="clientMetadata",R9="clientId",Xm="bundles",P9="bundleId",Zm="namedQueries",C9="name",F0="indexConfiguration",D9="indexId",Iw="collectionGroupIndex",k9="collectionGroup",Zu="indexState",N9=["indexId","uid"],YD="sequenceNumberIndex",O9=["uid","sequenceNumber"],ed="indexEntries",L9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],JD="documentKeyIndex",V9=["indexId","uid","orderedDocumentKey"],eg="documentOverlays",M9=["userId","collectionPath","documentId"],Sw="collectionPathOverlayIndex",F9=["userId","collectionPath","largestBatchId"],XD="collectionGroupOverlayIndex",U9=["userId","collectionGroup","largestBatchId"],U0="globals",j9="name",ZD=[Fd,cs,gc,na,yc,uh,Da,vc,wc,Ud,jd,Xm,Zm],$9=[...ZD,eg],ek=[Fd,cs,gc,zp,yc,uh,Da,vc,wc,Ud,jd,Xm,Zm,eg],tk=ek,j0=[...tk,F0,Zu,ed],B9=j0,nk=[...j0,U0],z9=nk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw extends WD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function An(t,e){const n=Ee(t);return Io.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||Vn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new of(this.root,e,this.comparator,!1)}getReverseIterator(){return new of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new of(this.root,e,this.comparator,!0)}}class of{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Vn.RED,this.left=s??Vn.EMPTY,this.right=i??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Vn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Vn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new db(this.data.getIterator())}getIteratorFrom(e){return new db(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class db{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ll(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Tr([])}unionWith(e){let n=new St(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sk("Invalid base64 string: "+i):i}}(e);return new cn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const W9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=W9.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="server_timestamp",ok="__type__",ak="__previous_value__",lk="__local_write_time__";function $0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ok])==null?void 0:r.stringValue)===ik}function tg(t){const e=t.mapValue.fields[ak];return $0(e)?tg(e):e}function $d(t){const e=Ei(t.mapValue.fields[lk].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const qp="(default)";class ko{constructor(e,n){this.projectId=e,this.database=n||qp}static empty(){return new ko("","")}get isDefaultDatabase(){return this.database===qp}isEqual(e){return e instanceof ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__type__",ck="__max__",ao={mapValue:{fields:{__type__:{stringValue:ck}}}},z0="__vector__",_c="value",Bf={nullValue:"NULL_VALUE"};function No(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$0(t)?4:uk(t)?9007199254740991:ng(t)?10:11:we(28295,{value:t})}function Gs(t,e){if(t===e)return!0;const n=No(t);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $d(t).isEqual($d(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ei(s.timestampValue),a=Ei(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ti(s.bytesValue).isEqual(Ti(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Bt(s.geoPointValue.latitude)===Bt(i.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Bt(s.integerValue)===Bt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Bt(s.doubleValue),a=Bt(i.doubleValue);return o===a?Md(o)===Md(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return pc(t.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(ub(o)!==ub(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Gs(o[l],a[l])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Bd(t,e){return(t.values||[]).find(n=>Gs(n,e))!==void 0}function Oo(t,e){if(t===e)return 0;const n=No(t),r=No(e);if(n!==r)return Ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Bt(i.integerValue||i.doubleValue),l=Bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return hb(t.timestampValue,e.timestampValue);case 4:return hb($d(t),$d(e));case 5:return _w(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ti(i),l=Ti(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ge(a[c],l[c]);if(d!==0)return d}return Ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ge(Bt(i.latitude),Bt(o.latitude));return a!==0?a:Ge(Bt(i.longitude),Bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,p,w,g;const a=i.fields||{},l=o.fields||{},c=(f=a[_c])==null?void 0:f.arrayValue,d=(p=l[_c])==null?void 0:p.arrayValue,h=Ge(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:fb(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ao.mapValue&&o===ao.mapValue)return 0;if(i===ao.mapValue)return 1;if(o===ao.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=_w(l[h],d[h]);if(f!==0)return f;const p=Oo(a[l[h]],c[d[h]]);if(p!==0)return p}return Ge(l.length,d.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function hb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=Ei(t),r=Ei(e),s=Ge(n.seconds,r.seconds);return s!==0?s:Ge(n.nanos,r.nanos)}function fb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Oo(n[s],r[s]);if(i)return i}return Ge(n.length,r.length)}function Ec(t){return Aw(t)}function Aw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ei(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Aw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Aw(n.fields[o])}`;return s+"}"}(t.mapValue):we(61005,{value:t})}function zf(t){switch(No(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tg(t);return e?16+zf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ti(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+zf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Wo(r.fields,(i,o)=>{s+=i.length+zf(o)}),s}(t.mapValue);default:throw we(13486,{value:t})}}function zd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xw(t){return!!t&&"integerValue"in t}function Wd(t){return!!t&&"arrayValue"in t}function pb(t){return!!t&&"nullValue"in t}function mb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wf(t){return!!t&&"mapValue"in t}function ng(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[B0])==null?void 0:r.stringValue)===z0}function td(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=td(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=td(t.arrayValue.values[n]);return e}return{...t}}function uk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ck}const dk={mapValue:{fields:{[B0]:{stringValue:z0},[_c]:{arrayValue:{}}}}};function H9(t){return"nullValue"in t?Bf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zd(ko.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ng(t)?dk:{mapValue:{}}:we(35942,{value:t})}function K9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zd(ko.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dk:"mapValue"in t?ng(t)?{mapValue:{}}:ao:we(61959,{value:t})}function gb(t,e){const n=Oo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yb(t,e){const n=Oo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=td(n)}setAll(e){let n=Wt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=td(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Jn(td(this.value))}}function hk(t){const e=[];return Wo(t.fields,(n,r)=>{const s=new Wt([n]);if(Wf(r)){const i=hk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ln(e,0,ke.min(),ke.min(),ke.min(),Jn.empty(),0)}static newFoundDocument(e,n,r,s){return new ln(e,1,n,ke.min(),r,s,0)}static newNoDocument(e,n){return new ln(e,2,n,ke.min(),ke.min(),Jn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,ke.min(),ke.min(),Jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.position=e,this.inclusive=n}}function vb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=Oo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n="asc"){this.field=e,this.dir=n}}function G9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{}class ht extends fk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Q9(e,n,r):n==="array-contains"?new X9(e,r):n==="in"?new wk(e,r):n==="not-in"?new Z9(e,r):n==="array-contains-any"?new ez(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y9(e,r):new J9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oo(n,this.value)):n!==null&&No(this.value)===No(n)&&this.matchesComparison(Oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends fk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tt(e,n)}matches(e){return Ic(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ic(t){return t.op==="and"}function Rw(t){return t.op==="or"}function W0(t){return pk(t)&&Ic(t)}function pk(t){for(const e of t.filters)if(e instanceof Tt)return!1;return!0}function Pw(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Ec(t.value);if(W0(t))return t.filters.map(e=>Pw(e)).join(",");{const e=t.filters.map(n=>Pw(n)).join(",");return`${t.op}(${e})`}}function mk(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&Gs(r.value,s.value)}(t,e):t instanceof Tt?function(r,s){return s instanceof Tt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&mk(o,s.filters[a]),!0):!1}(t,e):void we(19439)}function gk(t,e){const n=t.filters.concat(e);return Tt.create(n,t.op)}function yk(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Ec(n.value)}`}(t):t instanceof Tt?function(n){return n.op.toString()+" {"+n.getFilters().map(yk).join(" ,")+"}"}(t):"Filter"}class Q9 extends ht{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y9 extends ht{constructor(e,n){super(e,"in",n),this.keys=vk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class J9 extends ht{constructor(e,n){super(e,"not-in",n),this.keys=vk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class X9 extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wd(n)&&Bd(n.arrayValue,this.value)}}class wk extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bd(this.value.arrayValue,n)}}class Z9 extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bd(this.value.arrayValue,n)}}class ez extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Cw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new tz(t,e,n,r,s,i,o)}function $a(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Jm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ec(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ec(r)).join(",")),e.Te=n}return e.Te}function dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!G9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wb(t.startAt,e.startAt)&&wb(t.endAt,e.endAt)}function Hp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Kp(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function _b(t,e,n){let r=Bf,s=!0;for(const i of Kp(t,e)){let o=Bf,a=!0;switch(i.op){case"<":case"<=":o=H9(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Bf}gb({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];gb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Eb(t,e,n){let r=ao,s=!0;for(const i of Kp(t,e)){let o=ao,a=!0;switch(i.op){case">=":case">":o=K9(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=ao}yb({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _k(t,e,n,r,s,i,o,a){return new Hc(t,e,n,r,s,i,o,a)}function hh(t){return new Hc(t)}function Tb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ek(t){return t.collectionGroup!==null}function nd(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new St(Wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new qd(i,r))}),n.has(Wt.keyField().canonicalString())||e.Ie.push(new qd(Wt.keyField(),r))}return e.Ie}function jr(t){const e=Ee(t);return e.Ee||(e.Ee=nz(e,nd(t))),e.Ee}function nz(t,e){if(t.limitType==="F")return Cw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qd(s.field,i)});const n=t.endAt?new Tc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tc(t.startAt.position,t.startAt.inclusive):null;return Cw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dw(t,e){const n=t.filters.concat([e]);return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gp(t,e,n){return new Hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rg(t,e){return dh(jr(t),jr(e))&&t.limitType===e.limitType}function Tk(t){return`${$a(jr(t))}|lt:${t.limitType}`}function vl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yk(s)).join(", ")}]`),Jm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ec(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ec(s)).join(",")),`Target(${r})`}(jr(t))}; limitType=${t.limitType})`}function fh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of nd(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=vb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,nd(r),s)||r.endAt&&!function(o,a,l){const c=vb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,nd(r),s))}(t,e)}function Ik(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sk(t){return(e,n)=>{let r=!1;for(const s of nd(t)){const i=rz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function rz(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Oo(l,c):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return rk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=new kt(ce.comparator);function Lr(){return sz}const bk=new kt(ce.comparator);function Vu(...t){let e=bk;for(const n of t)e=e.insert(n.key,n);return e}function Ak(t){let e=bk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fs(){return rd()}function xk(){return rd()}function rd(){return new Ri(t=>t.toString(),(t,e)=>t.isEqual(e))}const iz=new kt(ce.comparator),oz=new St(ce.comparator);function rt(...t){let e=oz;for(const n of t)e=e.add(n);return e}const az=new St(Ge);function q0(){return az}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function Rk(t){return{integerValue:""+t}}function lz(t,e){return HD(e)?Rk(e):H0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this._=void 0}}function cz(t,e,n){return t instanceof Sc?function(s,i){const o={fields:{[ok]:{stringValue:ik},[lk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$0(i)&&(i=tg(i)),i&&(o.fields[ak]=i),{mapValue:o}}(n,e):t instanceof Ba?Ck(t,e):t instanceof bc?Dk(t,e):function(s,i){const o=Pk(s,i),a=Ib(o)+Ib(s.Ae);return xw(o)&&xw(s.Ae)?Rk(a):H0(s.serializer,a)}(t,e)}function uz(t,e,n){return t instanceof Ba?Ck(t,e):t instanceof bc?Dk(t,e):n}function Pk(t,e){return t instanceof Hd?function(r){return xw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Sc extends sg{}class Ba extends sg{constructor(e){super(),this.elements=e}}function Ck(t,e){const n=kk(e);for(const r of t.elements)n.some(s=>Gs(s,r))||n.push(r);return{arrayValue:{values:n}}}class bc extends sg{constructor(e){super(),this.elements=e}}function Dk(t,e){let n=kk(e);for(const r of t.elements)n=n.filter(s=>!Gs(s,r));return{arrayValue:{values:n}}}class Hd extends sg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ib(t){return Bt(t.integerValue||t.doubleValue)}function kk(t){return Wd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n){this.field=e,this.transform=n}}function dz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ba&&s instanceof Ba||r instanceof bc&&s instanceof bc?pc(r.elements,s.elements,Gs):r instanceof Hd&&s instanceof Hd?Gs(r.Ae,s.Ae):r instanceof Sc&&s instanceof Sc}(t.transform,e.transform)}class hz{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ig{}function Nk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new og(t.key,Xn.none()):new Kc(t.key,t.data,Xn.none());{const n=t.data,r=Jn.empty();let s=new St(Wt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Pi(t.key,r,new Tr(s.toArray()),Xn.none())}}function fz(t,e,n){t instanceof Kc?function(s,i,o){const a=s.value.clone(),l=bb(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Pi?function(s,i,o){if(!qf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=bb(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Ok(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function sd(t,e,n,r){return t instanceof Kc?function(i,o,a,l){if(!qf(i.precondition,o))return a;const c=i.value.clone(),d=Ab(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pi?function(i,o,a,l){if(!qf(i.precondition,o))return a;const c=Ab(i.fieldTransforms,l,o),d=o.data;return d.setAll(Ok(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return qf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function pz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pk(r.transform,s||null);i!=null&&(n===null&&(n=Jn.empty()),n.set(r.field,i))}return n||null}function Sb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pc(r,s,(i,o)=>dz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kc extends ig{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pi extends ig{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ok(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bb(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,uz(o,a,n[s]))}return r}function Ab(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,cz(i,o,e))}return r}class og extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lk extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Nk(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),rt())}isEqual(e){return this.batchId===e.batchId&&pc(this.mutations,e.mutations,(n,r)=>Sb(n,r))&&pc(this.baseMutations,e.baseMutations,(n,r)=>Sb(n,r))}}class Q0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return iz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Q0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y0=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,mt;function gz(t){switch(t){case z.OK:return we(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function Vk(t){if(t===void 0)return fn("GRPC error has no .code"),z.UNKNOWN;switch(t){case _n.OK:return z.OK;case _n.CANCELLED:return z.CANCELLED;case _n.UNKNOWN:return z.UNKNOWN;case _n.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case _n.INTERNAL:return z.INTERNAL;case _n.UNAVAILABLE:return z.UNAVAILABLE;case _n.UNAUTHENTICATED:return z.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case _n.NOT_FOUND:return z.NOT_FOUND;case _n.ALREADY_EXISTS:return z.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return z.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case _n.ABORTED:return z.ABORTED;case _n.OUT_OF_RANGE:return z.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return z.UNIMPLEMENTED;case _n.DATA_LOSS:return z.DATA_LOSS;default:return we(39323,{code:t})}}(mt=_n||(_n={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=new To([4294967295,4294967295],0);function xb(t){const e=yz().encode(t),n=new RD;return n.update(e),new Uint8Array(n.digest())}function Rb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new To([n,r],0),new To([s,i],0)]}class J0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mu(`Invalid padding: ${n}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=To.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(To.fromNumber(r)));return s.compare(vz)===1&&(s=new To([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=xb(e),[r,s]=Rb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new J0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=xb(e),[r,s]=Rb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ph(ke.min(),s,new kt(Ge),Lr(),rt())}}class mh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mh(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Mk{constructor(e,n){this.targetId=e,this.Ce=n}}class Fk{constructor(e,n,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Pb{constructor(){this.ve=0,this.Fe=Cb(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),n=rt(),r=rt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we(38017,{changeType:i})}}),new mh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Cb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wz{constructor(e){this.Ge=e,this.ze=new Map,this.je=Lr(),this.Je=af(),this.He=af(),this.Ye=new kt(Ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Hp(i))if(r===0){const o=new ce(i.path);this.et(n,o,ln.newNoDocument(o,ke.min()))}else Pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ti(r).toUint8Array()}catch(l){if(l instanceof sk)return Do("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new J0(o,s,i)}catch(l){return Do(l instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Hp(a.target)){const l=new ce(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ln.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=rt();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new ph(e,n,this.Ye,this.je,r);return this.je=Lr(),this.Je=af(),this.He=af(),this.Ye=new kt(Ge),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Pb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new St(Ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new St(Ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function af(){return new kt(ce.comparator)}function Cb(){return new kt(ce.comparator)}const _z={asc:"ASCENDING",desc:"DESCENDING"},Ez={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tz={and:"AND",or:"OR"};class Iz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kw(t,e){return t.useProto3Json||Jm(e)?e:{value:e}}function Ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sz(t,e){return Ac(t,e.toTimestamp())}function ur(t){return Pe(!!t,49232),ke.fromTimestamp(function(n){const r=Ei(n);return new _t(r.seconds,r.nanos)}(t))}function X0(t,e){return Nw(t,e).canonicalString()}function Nw(t,e){const n=function(s){return new Et(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jk(t){const e=Et.fromString(t);return Pe(Qk(e),10190,{key:e.toString()}),e}function Qp(t,e){return X0(t.databaseId,e.path)}function ka(t,e){const n=jk(e);if(n.get(1)!==t.databaseId.projectId)throw new re(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(zk(n))}function $k(t,e){return X0(t.databaseId,e)}function Bk(t){const e=jk(t);return e.length===4?Et.emptyPath():zk(e)}function Ow(t){return new Et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zk(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Db(t,e,n){return{name:Qp(t,e),fields:n.value.mapValue.fields}}function bz(t,e,n){const r=ka(t,e.name),s=ur(e.updateTime),i=e.createTime?ur(e.createTime):ke.min(),o=new Jn({mapValue:{fields:e.fields}}),a=ln.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Az(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string",58123),cn.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),cn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?z.UNKNOWN:Vk(c.code);return new re(d,c.message||"")}(o);n=new Fk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ka(t,r.document.name),i=ur(r.document.updateTime),o=r.document.createTime?ur(r.document.createTime):ke.min(),a=new Jn({mapValue:{fields:r.document.fields}}),l=ln.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Hf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ka(t,r.document),i=r.readTime?ur(r.readTime):ke.min(),o=ln.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Hf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ka(t,r.document),i=r.removedTargetIds||[];n=new Hf([],i,s,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new mz(s,i),a=r.targetId;n=new Mk(a,o)}}return n}function Yp(t,e){let n;if(e instanceof Kc)n={update:Db(t,e.key,e.value)};else if(e instanceof og)n={delete:Qp(t,e.key)};else if(e instanceof Pi)n={update:Db(t,e.key,e.data),updateMask:kz(e.fieldMask)};else{if(!(e instanceof Lk))return we(16599,{Vt:e.type});n={verify:Qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Sc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw we(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Sz(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we(27497)}(t,e.precondition)),n}function Lw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Xn.updateTime(ur(i.updateTime)):i.exists!==void 0?Xn.exists(i.exists):Xn.none()}(e.currentDocument):Xn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Pe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Sc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Ba(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new bc(d)}else"increment"in a?l=new Hd(o,a.increment):we(16584,{proto:a});const c=Wt.fromServerFormat(a.fieldPath);return new K0(c,l)}(t,s)):[];if(e.update){e.update.name;const s=ka(t,e.update.name),i=new Jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Tr(c.map(d=>Wt.fromServerFormat(d)))}(e.updateMask);return new Pi(s,i,o,n,r)}return new Kc(s,i,n,r)}if(e.delete){const s=ka(t,e.delete);return new og(s,n)}if(e.verify){const s=ka(t,e.verify);return new Lk(s,n)}return we(1463,{proto:e})}function xz(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?ur(s.updateTime):ur(i);return o.isEqual(ke.min())&&(o=ur(i)),new hz(o,s.transformResults||[])}(n,e))):[]}function Wk(t,e){return{documents:[$k(t,e.path)]}}function qk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$k(t,s);const i=function(c){if(c.length!==0)return Gk(Tt.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:wl(f.field),direction:Pz(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=kw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function Hk(t){let e=Bk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=Kk(h);return f instanceof Tt&&W0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new qd(_l(w.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Jm(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new Tc(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new Tc(p,f)}(n.endAt)),_k(e,s,o,i,a,"F",l,c)}function Rz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Kk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_l(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_l(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_l(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_l(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(_l(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tt.create(n.compositeFilter.filters.map(r=>Kk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function Pz(t){return _z[t]}function Cz(t){return Ez[t]}function Dz(t){return Tz[t]}function wl(t){return{fieldPath:t.canonicalString()}}function _l(t){return Wt.fromServerFormat(t.fieldPath)}function Gk(t){return t instanceof ht?function(n){if(n.op==="=="){if(mb(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(pb(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mb(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(pb(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:Cz(n.op),value:n.value}}}(t):t instanceof Tt?function(n){const r=n.getFilters().map(s=>Gk(s));return r.length===1?r[0]:{compositeFilter:{op:Dz(n.op),filters:r}}}(t):we(54877,{filter:t})}function kz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,r,s,i=ke.min(),o=ke.min(),a=cn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.yt=e}}function Nz(t,e){let n;if(e.document)n=bz(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),s=Wa(e.noDocument.readTime);n=ln.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const r=ce.fromSegments(e.unknownDocument.path),s=Wa(e.unknownDocument.version);n=ln.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new _t(s[0],s[1]);return ke.fromTimestamp(i)}(e.readTime)),n}function kb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Jp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Qp(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Ac(i,o.version.toTimestamp()),createTime:Ac(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:za(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:za(e.version)}}return r}function Jp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function za(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wa(t){const e=new _t(t.seconds,t.nanoseconds);return ke.fromTimestamp(e)}function ia(t,e){const n=(e.baseMutations||[]).map(i=>Lw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Lw(t.yt,i)),s=_t.fromMillis(e.localWriteTimeMs);return new G0(e.batchId,s,n,r)}function Fu(t){const e=Wa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wa(t.lastLimboFreeSnapshotVersion):ke.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Pe(o===1,1966,{count:o}),jr(hh(Bk(i.documents[0])))}(t.query):function(i){return jr(Hk(i))}(t.query),new ai(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,cn.fromBase64String(t.resumeToken))}function Jk(t,e){const n=za(e.snapshotVersion),r=za(e.lastLimboFreeSnapshotVersion);let s;s=Hp(e.target)?Wk(t.yt,e.target):qk(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$a(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Xk(t){const e=Hk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gp(e,e.limit,"L"):e}function Py(t,e){return new Y0(e.largestBatchId,Lw(t.yt,e.overlayMutation))}function Nb(t,e){const n=e.path.lastSegment();return[t,Zn(e.path.popLast()),n]}function Ob(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:za(r.readTime),documentKey:Zn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{getBundleMetadata(e,n){return Lb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Wa(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return Lb(e).put(function(s){return{bundleId:s.id,createTime:za(ur(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Vb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Xk(i.bundledQuery),readTime:Wa(i.readTime)}}(r)})}saveNamedQuery(e,n){return Vb(e).put(function(s){return{name:s.name,readTime:za(ur(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function Lb(t){return An(t,Xm)}function Vb(t){return An(t,Zm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new ag(e,r)}getOverlay(e,n){return _u(e).get(Nb(this.userId,n)).next(r=>r?Py(this.serializer,r):null)}getOverlays(e,n){const r=Fs();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Y0(n,o);s.push(this.St(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Zn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(_u(e).Z(Sw,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Fs(),i=Zn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _u(e).J(Sw,o).next(a=>{for(const l of a){const c=Py(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Fs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return _u(e).ee({index:XD,range:a},(l,c,d)=>{const h=Py(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return _u(e).put(function(s,i,o){const[a,l,c]=Nb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Yp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function _u(t){return An(t,eg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{bt(e){return An(e,U0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?cn.fromUint8Array(r):cn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Bt(e.integerValue));else if("doubleValue"in e){const r=Bt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Md(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ei(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ti(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?uk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ng(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):we(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=_c,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Bt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ce.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}oa.Kt=new oa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=255;function Vz(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Mb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=Vz(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class Mz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=Mb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=Mb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(cl),this.sn(255)}_n(){this.an(cl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===cl?(this.sn(cl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===cl?(this.an(cl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Fz{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Uz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Eu{constructor(){this.cn=new Mz,this.ln=new Fz(this.cn),this.hn=new Uz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new aa(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Kf(this.En),directionalValue:Kf(this.dn),orderedDocumentKey:Kf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ji(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Fb(t.En,e.En),n!==0?n:(n=Fb(t.dn,e.dn),n!==0?n:ce.comparator(t.In,e.In)))}function Fb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Kf(t){return HC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function Ub(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class jb{constructor(e){this.mn=new St((n,r)=>Wt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Pe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Ew(e);if(n!==void 0&&!this.wn(n))return!1;const r=ta(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new St(Wt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Uf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Uf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Uf(r.field,r.dir==="asc"?0:1)));return new $p($p.UNKNOWN_ID,this.collectionId,n,Vd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){var n,r;if(Pe(t instanceof ht||t instanceof Tt,20012),t instanceof ht){if(t instanceof wk){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>ht.create(t.field,"==",i)))||[];return Tt.create(s,"or")}return t}const e=t.filters.map(s=>Zk(s));return Tt.create(e,t.op)}function jz(t){if(t.getFilters().length===0)return[];const e=Fw(Zk(t));return Pe(eN(e),7391),Vw(e)||Mw(e)?[e]:e.getFilters()}function Vw(t){return t instanceof ht}function Mw(t){return t instanceof Tt&&W0(t)}function eN(t){return Vw(t)||Mw(t)||function(n){if(n instanceof Tt&&Rw(n)){for(const r of n.getFilters())if(!Vw(r)&&!Mw(r))return!1;return!0}return!1}(t)}function Fw(t){if(Pe(t instanceof ht||t instanceof Tt,34018),t instanceof ht)return t;if(t.filters.length===1)return Fw(t.filters[0]);const e=t.filters.map(r=>Fw(r));let n=Tt.create(e,t.op);return n=Xp(n),eN(n)?n:(Pe(n instanceof Tt,64498),Pe(Ic(n),40251),Pe(n.filters.length>1,57927),n.filters.reduce((r,s)=>Z0(r,s)))}function Z0(t,e){let n;return Pe(t instanceof ht||t instanceof Tt,38388),Pe(e instanceof ht||e instanceof Tt,25473),n=t instanceof ht?e instanceof ht?function(s,i){return Tt.create([s,i],"and")}(t,e):$b(t,e):e instanceof ht?$b(e,t):function(s,i){if(Pe(s.filters.length>0&&i.filters.length>0,48005),Ic(s)&&Ic(i))return gk(s,i.getFilters());const o=Rw(s)?s:i,a=Rw(s)?i:s,l=o.filters.map(c=>Z0(c,a));return Tt.create(l,"or")}(t,e),Xp(n)}function $b(t,e){if(Ic(e))return gk(e,t.getFilters());{const n=e.filters.map(r=>Z0(t,r));return Tt.create(n,"or")}}function Xp(t){if(Pe(t instanceof ht||t instanceof Tt,11850),t instanceof ht)return t;const e=t.getFilters();if(e.length===1)return Xp(e[0]);if(pk(t))return t;const n=e.map(s=>Xp(s)),r=[];return n.forEach(s=>{s instanceof ht?r.push(s):s instanceof Tt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Tt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(){this.Cn=new eE}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Br.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class eE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(Et.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="IndexedDbIndexManager",lf=new Uint8Array(0);class Bz{constructor(e,n){this.databaseId=n,this.vn=new eE,this.Fn=new Ri(r=>$a(r),(r,s)=>dh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:Zn(s)};return zb(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[MD(n),""],!1,!0);return zb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Ms(o.parent))}return r})}addFieldIndex(e,n){const r=Tu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=dl(e);return i.next(a=>{o.put(Ob(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Tu(e),s=dl(e),i=ul(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Tu(e),r=ul(e),s=dl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new jb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=ul(e);let s=!0;const i=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=rt();const a=[];return M.forEach(i,(l,c)=>{Y(Bb,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${$a(n)}`);const d=function(_,R){const k=Ew(R);if(k===void 0)return null;for(const L of Kp(_,k.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(_,R){const k=new Map;for(const L of ta(R))for(const x of Kp(_,L.fieldPath))switch(x.op){case"==":case"in":k.set(L.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return k.set(L.fieldPath.canonicalString(),x.value),Array.from(k.values())}return null}(c,l),f=function(_,R){const k=[];let L=!0;for(const x of ta(R)){const A=x.kind===0?_b(_,x.fieldPath,_.startAt):Eb(_,x.fieldPath,_.startAt);k.push(A.value),L&&(L=A.inclusive)}return new Tc(k,L)}(c,l),p=function(_,R){const k=[];let L=!0;for(const x of ta(R)){const A=x.kind===0?Eb(_,x.fieldPath,_.endAt):_b(_,x.fieldPath,_.endAt);k.push(A.value),L&&(L=A.inclusive)}return new Tc(k,L)}(c,l),w=this.On(l,c,f),g=this.On(l,c,p),v=this.Nn(l,c,h),E=this.Bn(l.indexId,d,w,f.inclusive,g,p.inclusive,v);return M.forEach(E,y=>r.Y(y,n.limit).next(_=>{_.forEach(R=>{const k=ce.fromSegments(R.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=jz(Tt.create(e.filters,"and")).map(r=>Cw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):lf,p=this.kn(e,f,r[h%c],s),w=this.qn(e,f,i[h%c],o),g=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(p,w,g))}return d}kn(e,n,r,s){const i=new aa(e,ce.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new aa(e,ce.empty(),n,r);return s?i.An():i}xn(e,n){const r=new jb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return M.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new St(Wt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Eu;for(const s of ta(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);oa.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Eu;return oa.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Eu;return oa.Kt.Dt(zd(this.databaseId,n),r.Pn(function(i){const o=ta(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Eu);let i=0;for(const o of ta(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Wd(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);oa.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Eu;l.seed(a.un()),oa.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Tu(e),s=dl(e);return(n?r.J(Iw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new Vd(h.sequenceNumber,new Br(Wa(h.readTime),new ce(Ms(h.documentKey)),h.largestBatchId)):Vd.empty(),p=d.fields.map(([w,g])=>new Uf(Wt.fromServerFormat(w),g));return new $p(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ge(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Tu(e),i=dl(e);return this.Gn(e).next(o=>s.J(Iw,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(Ob(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?M.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return ul(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return ul(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=ul(e);let i=new St(ji);return s.ee({index:JD,range:IDBKeyRange.only([r.indexId,this.uid,Kf(this.$n(r,n))])},(o,a)=>{i=i.add(new aa(r.indexId,n,Ub(a.arrayValue),Ub(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new St(ji);const s=this.Qn(n,e);if(s==null)return r;const i=Ew(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Wd(o))for(const a of o.arrayValue.values||[])r=r.add(new aa(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new aa(n.indexId,e.key,lf,s));return r}Jn(e,n,r,s,i){Y(Bb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const p=l.getIterator(),w=c.getIterator();let g=ll(p),v=ll(w);for(;g||v;){let E=!1,y=!1;if(g&&v){const _=d(g,v);_<0?y=!0:_>0&&(E=!0)}else g!=null?y=!0:E=!0;E?(h(v),v=ll(w)):y?(f(g),g=ll(p)):(g=ll(p),v=ll(w))}}(s,i,ji,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return dl(e).ee({index:YD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ji(o,a)).filter((o,a,l)=>!a||ji(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ji(o,e),l=ji(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,lf,ce.empty()),l=s[o+1].Vn(this.uid,lf,ce.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return ji(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Wb)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||we(44426))).next(Wb)}}function zb(t){return An(t,jd)}function ul(t){return An(t,ed)}function Tu(t){return An(t,F0)}function dl(t){return An(t,Zu)}function Wb(t){Pe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;L0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Br(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tN=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e,n){const r=t.store(cs),s=t.store(gc),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Pe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=KD(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return M.waitFor(i).next(()=>c)}function Zp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw we(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(tN,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);class lg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Pe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new lg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).ee({index:pa,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=El(e),o=$i(e);return o.add({}).next(a=>{Pe(typeof a=="number",49019);const l=new G0(a,n,r,s),c=function(p,w,g){const v=g.baseMutations.map(y=>Yp(p.yt,y)),E=g.mutations.map(y=>Yp(p.yt,y));return{userId:w,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,l),d=[];let h=new St((f,p)=>Ge(f.canonicalString(),p.canonicalString()));for(const f of s){const p=KD(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(p,_9))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return $i(e).get(n).next(r=>r?(Pe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ia(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return $i(e).ee({index:pa,range:s},(o,a,l)=>{a.userId===this.userId&&(Pe(a.batchId>=r,47524,{tr:r}),i=ia(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ca;return $i(e).ee({index:pa,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ca],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).J(pa,n).next(r=>r.map(s=>ia(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=jf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return El(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=Ms(d);if(c===this.userId&&n.path.isEqual(f))return $i(e).get(h).next(p=>{if(!p)throw we(61480,{nr:o,batchId:h});Pe(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:h}),i.push(ia(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ge);const s=[];return n.forEach(i=>{const o=jf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=El(e).ee({range:a},(c,d,h)=>{const[f,p,w]=c,g=Ms(p);f===this.userId&&i.path.isEqual(g)?r=r.add(w):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=jf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new St(Ge);return El(e).ee({range:o},(l,c,d)=>{const[h,f,p]=l,w=Ms(f);h===this.userId&&r.isPrefixOf(w)?w.length===s&&(a=a.add(p)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push($i(e).get(i).next(o=>{if(o===null)throw we(35274,{batchId:i});Pe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(ia(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return nN(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return El(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Ms(i[1]);s.push(l)}else a.done()}).next(()=>{Pe(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return rN(e,this.userId,n)}_r(e){return sN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ca,lastStreamToken:""})}}function rN(t,e,n){const r=jf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return El(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function $i(t){return An(t,cs)}function El(t){return An(t,gc)}function sN(t){return An(t,Fd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qa(0)}static cr(){return new qa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new qa(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ke.fromTimestamp(new _t(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>hl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Pe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return hl(e).ee((o,a)=>{const l=Fu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return hl(e).ee((r,s)=>{const i=Fu(s);n(i)})}lr(e){return Hb(e).get(Wp).next(n=>(Pe(n!==null,2888),n))}hr(e,n){return Hb(e).put(Wp,n)}Pr(e,n){return hl(e).put(Jk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$a(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return hl(e).ee({range:s,index:QD},(o,a,l)=>{const c=Fu(a);dh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Yi(e);return n.forEach(o=>{const a=Zn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Yi(e);return M.forEach(n,i=>{const o=Zn(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Yi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Yi(e);let i=rt();return s.ee({range:r,X:!0},(o,a,l)=>{const c=Ms(o[1]),d=new ce(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=Zn(n.path),s=IDBKeyRange.bound([r],[MD(r)],!1,!0);let i=0;return Yi(e).ee({index:M0,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return hl(e).get(n).next(r=>r?Fu(r):null)}}function hl(t){return An(t,yc)}function Hb(t){return An(t,Da)}function Yi(t){return An(t,vc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="LruGarbageCollector",iN=1048576;function Gb([t,e],[n,r]){const s=Ge(t,n);return s===0?Ge(e,r):s}class Wz{constructor(e){this.Ir=e,this.buffer=new St(Gb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Gb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(Kb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zo(n)?Y(Kb,"Ignoring IndexedDB error during garbage collection: ",n):await Bo(n)}await this.Vr(3e5)})}}class qz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Er.ce);const r=new Wz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(qb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),yl()<=ut.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function aN(t,e){return new qz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e,n){this.db=e,this.garbageCollector=aN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return cf(e,r)}removeReference(e,n,r){return cf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return cf(e,n)}br(e,n){return function(s,i){let o=!1;return sN(s).te(a=>rN(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ke.min()),Yi(e).delete(function(h){return[0,Zn(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return cf(e,n)}Sr(e,n){const r=Yi(e);let s,i=Er.ce;return r.ee({index:M0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Er.ce&&n(new ce(Ms(s)),i),i=c,s=l):i=Er.ce}).next(()=>{i!==Er.ce&&n(new ce(Ms(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cf(t,e){return Yi(t).put(function(r,s){return{targetId:0,path:Zn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.changes=new Ri(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Jo(e).put(r)}removeEntry(e,n,r){return Jo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Jp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=ln.newInvalidDocument(n);return Jo(e).ee({index:$f,range:IDBKeyRange.only(Iu(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:ln.newInvalidDocument(n)};return Jo(e).ee({index:$f,range:IDBKeyRange.only(Iu(n))},(s,i)=>{r={document:this.Cr(n,i),size:Zp(i)}}).next(()=>r)}getEntries(e,n){let r=Lr();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Lr(),s=new kt(ce.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Zp(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let s=new St(Jb);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Iu(s.first()),Iu(s.last())),o=s.getIterator();let a=o.getNext();return Jo(e).ee({index:$f,range:i},(l,c,d)=>{const h=ce.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Jb(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Iu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Jp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jo(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Lr();for(const h of c){const f=this.Cr(ce.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(fh(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Lr();const o=Yb(n,r),a=Yb(n,Br.max());return Jo(e).ee({index:GD,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(ce.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new Gz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Qb(e).get(Tw).next(n=>(Pe(!!n,20021),n))}Dr(e,n){return Qb(e).put(Tw,n)}Cr(e,n){if(n){const r=Nz(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ke.min())))return r}return ln.newInvalidDocument(e)}}function cN(t){return new Kz(t)}class Gz extends lN{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ri(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new St((i,o)=>Ge(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=kb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=Zp(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=kb(this.Nr.serializer,o.convertToNoDocument(ke.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Qb(t){return An(t,Ud)}function Jo(t){return An(t,zp)}function Iu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yb(t,e){const n=e.documentKey.path.toArray();return[t,Jp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jb(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ge(n[i],r[i]),s)return s;return s=Ge(n.length,r.length),s||(s=Ge(n[n.length-2],r[r.length-2]),s||Ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&sd(r.mutation,s,Tr.empty(),_t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=rt()){const s=Fs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Vu();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,rt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Lr();const o=rd(),a=function(){return rd()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Pi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),sd(d.mutation,c,d.mutation.getFieldMask(),_t.now())):o.set(c.key,Tr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new Qz(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=rd();let s=new kt((o,a)=>o-a),i=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Tr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||rt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=xk();d.forEach(f=>{if(!i.has(f)){const p=Nk(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ek(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Fs());let a=mc,l=i;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,rt())).next(d=>({batchId:a,changes:Ak(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=Vu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Vu();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,f){return new Hc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,ln.newInvalidDocument(d)))});let a=Vu();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&sd(d.mutation,c,Tr.empty(),_t.now()),fh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ur(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Xk(s.bundledQuery),readTime:ur(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(){this.overlays=new kt(ce.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fs();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Fs(),i=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new kt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Fs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Fs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Y0(n,r));let i=this.qr.get(n);i===void 0&&(i=rt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.Qr=new St(Cn.$r),this.Ur=new St(Cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Cn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Cn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new Et([])),r=new Cn(n,e),s=new Cn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new Et([])),r=new Cn(n,e),s=new Cn(n,e+1);let i=rt();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Cn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ge(e.Yr,n.Yr)}static Kr(e,n){return Ge(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new St(Cn.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new G0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Cn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Ca:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Cn(n,0),s=new Cn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ge);return n.forEach(s=>{const i=new Cn(s,0),o=new Cn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const o=new Cn(new ce(i),0);let a=new St(Ge);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new Cn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Cn(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e){this.ri=e,this.docs=function(){return new kt(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ln.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Lr();const o=n.path,a=new ce(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||L0(BD(d),r)<=0||(s.has(d.key)||fh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tW(this)}getSize(e){return M.resolve(this.size)}}class tW extends lN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e){this.persistence=e,this.si=new Ri(n=>$a(n),dh),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new tE,this.targetCount=0,this.ai=qa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new qa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Er(0),this.li=!1,this.li=!0,this.hi=new Xz,this.referenceDelegate=e(this),this.Pi=new nW(this),this.indexManager=new $z,this.remoteDocumentCache=function(s){return new eW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Yk(n),this.Ii=new Yz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Zz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new rW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class rW extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ri=new tE,this.Vi=null}static mi(e){return new cg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=ce.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ke.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class em{constructor(e,n){this.persistence=e,this.pi=new Ri(r=>Zn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=aN(this,n)}static mi(e,n){return new em(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ke.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zf(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Ym("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(uh)}(e),function(l){l.createObjectStore(Fd,{keyPath:w9}),l.createObjectStore(cs,{keyPath:lb,autoIncrement:!0}).createIndex(pa,cb,{unique:!0}),l.createObjectStore(gc)}(e),Xb(e),function(l){l.createObjectStore(na)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(vc),l.deleteObjectStore(yc),l.deleteObjectStore(Da)}(e),Xb(e)),o=o.next(()=>function(l){const c=l.store(Da),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return c.put(Wp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(cs).J().next(h=>{l.deleteObjectStore(cs),l.createObjectStore(cs,{keyPath:lb,autoIncrement:!0}).createIndex(pa,cb,{unique:!0});const f=c.store(cs),p=h.map(w=>f.put(w));return M.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(wc,{keyPath:R9})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Ud)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Xm,{keyPath:P9})})(e),function(l){l.createObjectStore(Zm,{keyPath:C9})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(eg,{keyPath:M9});c.createIndex(Sw,F9,{unique:!1}),c.createIndex(XD,U9,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(zp,{keyPath:E9});c.createIndex($f,T9),c.createIndex(GD,I9)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(na))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(F0,{keyPath:D9,autoIncrement:!0}).createIndex(Iw,k9,{unique:!1}),l.createObjectStore(Zu,{keyPath:N9}).createIndex(YD,O9,{unique:!1}),l.createObjectStore(ed,{keyPath:L9}).createIndex(JD,V9,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Zu).clear()}).next(()=>{n.objectStore(ed).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(U0,{keyPath:j9})})(e)})),r<18&&s>=18&&HC()&&(o=o.next(()=>{n.objectStore(Zu).clear()}).next(()=>{n.objectStore(ed).clear()})),o}wi(e){let n=0;return e.store(na).ee((r,s)=>{n+=Zp(s)}).next(()=>{const r={byteSize:n};return e.store(Ud).put(Tw,r)})}yi(e){const n=e.store(Fd),r=e.store(cs);return n.J().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Ca],[i.userId,i.lastAcknowledgedBatchId]);return r.J(pa,o).next(a=>M.forEach(a,l=>{Pe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=ia(this.serializer,l);return nN(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(vc),r=e.store(na);return e.store(Da).get(Wp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new Et(o),c=function(h){return[0,Zn(h)]}(l);i.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Zn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}bi(e,n){e.createObjectStore(jd,{keyPath:x9});const r=n.store(jd),s=new eE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Zn(l)})}};return n.store(na).ee({X:!0},(o,a)=>{const l=new Et(o);return i(l.popLast())}).next(()=>n.store(gc).ee({X:!0},([o,a,l],c)=>{const d=Ms(a);return i(d.popLast())}))}Di(e){const n=e.store(yc);return n.ee((r,s)=>{const i=Fu(s),o=Jk(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(na),s=[];return r.ee((i,o)=>{const a=n.store(zp),l=function(h){return h.document?new ce(Et.fromString(h.document.name).popFirst(5)):h.noDocument?ce.fromSegments(h.noDocument.path):h.unknownDocument?ce.fromSegments(h.unknownDocument.path):we(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Fi(e,n){const r=n.store(cs),s=cN(this.serializer),i=new nE(cg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??rt();ia(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),M.forEach(a,(l,c)=>{const d=new Gn(c),h=ag.wt(this.serializer,d),f=i.getIndexManager(d),p=lg.wt(d,this.serializer,f,i.referenceDelegate);return new uN(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new bw(n,Er.ce),l).next()})})}}function Xb(t){t.createObjectStore(vc,{keyPath:b9}).createIndex(M0,A9,{unique:!0}),t.createObjectStore(yc,{keyPath:"targetId"}).createIndex(QD,S9,{unique:!0}),t.createObjectStore(Da)}const Bi="IndexedDbPersistence",Cy=18e5,Dy=5e3,ky="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iW="main";class rE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!rE.v())throw new re(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hz(this,s),this.$i=n+iW,this.serializer=new Yk(l),this.Ui=new Io(this.$i,this.Ni,new sW(this.serializer)),this.hi=new Lz,this.Pi=new zz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cN(this.serializer),this.Ii=new Oz,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&fn(Bi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(z.FAILED_PRECONDITION,ky);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Er(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(zo(e))return Y(Bi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y(Bi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Su(e).get(al).next(n=>M.resolve(this.es(n)))}ts(e){return uf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Cy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=An(n,wc);return r.J().next(s=>{const i=this.ss(s,Cy),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):Su(e).get(al).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new re(z.FAILED_PRECONDITION,ky);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).J().next(r=>this.ss(r,Dy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y(Bi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[uh,wc],e=>{const n=new bw(e,Er.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>uf(e).J().next(n=>this.ss(n,Cy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return lg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Bz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ag.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y(Bi,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?z9:l===17?nk:l===16?B9:l===15?j0:l===14?tk:l===13?ek:l===12?$9:l===11?ZD:void we(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new bw(a,this.ci?this.ci.next():Er.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new re(z.FAILED_PRECONDITION,zD);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Su(e).get(al).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new re(z.FAILED_PRECONDITION,ky)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Su(e).put(al,n)}static v(){return Io.v()}Zi(e){const n=Su(e);return n.get(al).next(r=>this.es(r)?(Y(Bi,"Releasing primary lease."),n.delete(al)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(fn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;qC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return Y(Bi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fn(Bi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Su(t){return An(t,uh)}function uf(t){return An(t,wc)}function dN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=rt(),s=rt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qC()?8:qD($n())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new oW;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(yl()<=ut.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",vl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(yl()<=ut.DEBUG&&Y("QueryEngine","Query:",vl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(yl()<=ut.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",vl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(n))):M.resolve())}ys(e,n){if(Tb(n))return M.resolve(null);let r=jr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gp(n,null,"F"),r=jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=rt(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Gp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return Tb(n)||s.isEqual(ke.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(yl()<=ut.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vl(n)),this.vs(e,o,n,$D(s,mc)).next(a=>a))})}Ds(e,n){let r=new St(Sk(e));return n.forEach((s,i)=>{fh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return yl()<=ut.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",vl(n)),this.ps.getDocumentsMatchingQuery(e,n,Br.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LocalStore",aW=3e8;class lW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new kt(Ge),this.xs=new Ri(i=>$a(i),dh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function fN(t,e,n,r){return new lW(t,e,n,r)}async function pN(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=rt();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function cW(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=M.resolve();return f.forEach(w=>{p=p.next(()=>d.getEntry(l,w)).next(g=>{const v=c.docVersions.get(w);Pe(v!==null,48541),g.version.compareTo(v)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mN(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function uW(t,e){const n=Ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(cn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=aW?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,d)&&a.push(n.Pi.updateTargetData(i,p))});let l=Lr(),c=rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(dW(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ke.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function dW(t,e,n){let r=rt(),s=rt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Lr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ke.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y(iE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function hW(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ca),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tm(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function xc(t,e,n){const r=Ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zo(o))throw o;Y(iE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function nm(t,e,n){const r=Ee(t);let s=ke.min(),i=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Ee(l),f=h.xs.get(d);return f!==void 0?M.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,jr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ke.min(),n?i:rt())).next(a=>(vN(r,Ik(e),a),{documents:a,Qs:i})))}function gN(t,e){const n=Ee(t),r=Ee(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function yN(t,e){const n=Ee(t),r=n.Os.get(e)||ke.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,$D(r,mc),Number.MAX_SAFE_INTEGER)).then(s=>(vN(n,e,s),s))}function vN(t,e,n){let r=t.Os.get(e)||ke.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firestore_clients";function Zb(t,e){return`${wN}_${t}_${e}`}const _N="firestore_mutations";function eA(t,e,n){let r=`${_N}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const EN="firestore_targets";function Ny(t,e){return`${EN}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="SharedClientState";class rm{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new re(s.error.code,s.error.message))),o?new rm(e,n,s.state,i):(fn(Ns,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class id{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new re(r.error.code,r.error.message))),i?new id(e,r.state,s):(fn(Ns,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=q0();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=HD(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new sm(e,i):(fn(Ns,`Failed to parse client data for instance '${e}': ${n}`),null)}}class oE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new oE(n.clientId,n.onlineState):(fn(Ns,`Failed to parse online state: ${e}`),null)}}class Uw{constructor(){this.activeTargetIds=q0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oy{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new kt(Ge),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=Zb(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Uw),this.ro=new RegExp(`^${wN}_${o}_([^_]*)$`),this.io=new RegExp(`^${_N}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${EN}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(Zb(this.persistenceKey,r));if(s){const i=sm.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ny(this.persistenceKey,e));if(s){const i=id.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ny(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y(Ns,"READ",e,n),n}setItem(e,n){Y(Ns,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y(Ns,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Y(Ns,"EVENT",n.key,n.newValue),n.key===this.eo)return void fn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Er.ce;if(i!=null)try{const a=JSON.parse(i);Pe(typeof a=="number",30636,{So:i}),o=a}catch(a){fn(Ns,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Er.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new rm(this.currentUser,e,n,r),i=eA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=eA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Ny(this.persistenceKey,e),i=new id(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return sm.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return rm.Ws(new Gn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return id.Ws(s,n)}uo(e){return oE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Y(Ns,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=q0();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class TN{constructor(){this.Mo=new Uw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="ConnectivityMonitor";class nA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(tA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(tA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function jw(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="RestConnection",pW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===qp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=jw(),a=this.zo(e,n.toUriEncodedString());Y(Ly,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Ai(c);return this.Jo(e,a,l,r,d).then(h=>(Y(Ly,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Do(Ly,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=pW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection";class yW extends mW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=jw();return new Promise((a,l)=>{const c=new PD;c.setWithCredentials(!0),c.listenOnce(CD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ff.NO_ERROR:const h=c.getResponseJson();Y(Kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Ff.TIMEOUT:Y(Kn,`RPC '${e}' ${o} timed out`),l(new re(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const f=c.getStatus();if(Y(Kn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const g=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(w.status);l(new re(g,w.message))}else l(new re(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new re(z.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(Kn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Y(Kn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=jw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ND(),a=kD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Y(Kn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,p=!1;const w=new gW({Yo:v=>{p?Y(Kn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(Y(Kn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Y(Kn,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),g=(v,E,y)=>{v.listen(E,_=>{try{y(_)}catch(R){setTimeout(()=>{throw R},0)}})};return g(h,Lu.EventType.OPEN,()=>{p||(Y(Kn,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),g(h,Lu.EventType.CLOSE,()=>{p||(p=!0,Y(Kn,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),g(h,Lu.EventType.ERROR,v=>{p||(p=!0,Do(Kn,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),w.a_(new re(z.UNAVAILABLE,"The operation could not be completed")))}),g(h,Lu.EventType.MESSAGE,v=>{var E;if(!p){const y=v.data[0];Pe(!!y,16349);const _=y,R=(_==null?void 0:_.error)||((E=_[0])==null?void 0:E.error);if(R){Y(Kn,`RPC '${e}' stream ${s} received error:`,R);const k=R.status;let L=function(b){const P=_n[b];if(P!==void 0)return Vk(P)}(k),x=R.message;L===void 0&&(L=z.INTERNAL,x="Unknown error status: "+k+" with message "+R.message),p=!0,w.a_(new re(L,x)),h.close()}else Y(Kn,`RPC '${e}' stream ${s} received:`,y),w.u_(y)}}),g(a,DD.STAT_EVENT,v=>{v.stat===ww.PROXY?Y(Kn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===ww.NOPROXY&&Y(Kn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof window<"u"?window:null}function Gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t){return new Iz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="PersistentStream";class bN{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(fn(n.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new re(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(rA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(rA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vW extends bN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Az(this.serializer,e),r=function(i){if(!("targetChange"in i))return ke.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?ur(o.readTime):ke.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ow(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Hp(l)?{documents:Wk(i,l)}:{query:qk(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Uk(i,o.resumeToken);const c=kw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=Ac(i,o.snapshotVersion.toTimestamp());const c=kw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Rz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ow(this.serializer),n.removeTarget=e,this.q_(n)}}class wW extends bN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xz(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ow(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{}class EW extends _W{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Nw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Nw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class TW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="RemoteStore";class IW{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{el(this)&&(Y(Ha,"Restarting streams for network reachability change."),await async function(l){const c=Ee(l);c.Ea.add(4),await Gc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await gh(c)}(this))})}),this.Ra=new TW(r,s)}}async function gh(t){if(el(t))for(const e of t.da)await e(!0)}async function Gc(t){for(const e of t.da)await e(!1)}function dg(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cE(n)?lE(n):Yc(n).O_()&&aE(n,e))}function Rc(t,e){const n=Ee(t),r=Yc(n);n.Ia.delete(e),r.O_()&&AN(n,e),n.Ia.size===0&&(r.O_()?r.L_():el(n)&&n.Ra.set("Unknown"))}function aE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yc(t).Y_(e)}function AN(t,e){t.Va.Ue(e),Yc(t).Z_(e)}function lE(t){t.Va=new wz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yc(t).start(),t.Ra.ua()}function cE(t){return el(t)&&!Yc(t).x_()&&t.Ia.size>0}function el(t){return Ee(t).Ea.size===0}function xN(t){t.Va=void 0}async function SW(t){t.Ra.set("Online")}async function bW(t){t.Ia.forEach((e,n)=>{aE(t,e)})}async function AW(t,e){xN(t),cE(t)?(t.Ra.ha(e),lE(t)):t.Ra.set("Unknown")}async function xW(t,e,n){if(t.Ra.set("Online"),e instanceof Fk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){Y(Ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await im(t,r)}else if(e instanceof Hf?t.Va.Ze(e):e instanceof Mk?t.Va.st(e):t.Va.tt(e),!n.isEqual(ke.min()))try{const r=await mN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(cn.EMPTY_BYTE_STRING,d.snapshotVersion)),AN(i,l);const h=new ai(d.target,l,c,d.sequenceNumber);aE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y(Ha,"Failed to raise snapshot:",r),await im(t,r)}}async function im(t,e,n){if(!zo(e))throw e;t.Ea.add(1),await Gc(t),t.Ra.set("Offline"),n||(n=()=>mN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Ha,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gh(t)})}function RN(t,e){return e().catch(n=>im(t,n,e))}async function Qc(t){const e=Ee(t),n=Lo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ca;for(;RW(e);)try{const s=await hW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,PW(e,s)}catch(s){await im(e,s)}PN(e)&&CN(e)}function RW(t){return el(t)&&t.Ta.length<10}function PW(t,e){t.Ta.push(e);const n=Lo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function PN(t){return el(t)&&!Lo(t).x_()&&t.Ta.length>0}function CN(t){Lo(t).start()}async function CW(t){Lo(t).ra()}async function DW(t){const e=Lo(t);for(const n of t.Ta)e.ea(n.mutations)}async function kW(t,e,n){const r=t.Ta.shift(),s=Q0.from(r,e,n);await RN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qc(t)}async function NW(t,e){e&&Lo(t).X_&&await async function(r,s){if(function(o){return gz(o)&&o!==z.ABORTED}(s.code)){const i=r.Ta.shift();Lo(r).B_(),await RN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qc(r)}}(t,e),PN(t)&&CN(t)}async function sA(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),Y(Ha,"RemoteStore received new credentials");const r=el(n);n.Ea.add(3),await Gc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gh(n)}async function $w(t,e){const n=Ee(t);e?(n.Ea.delete(2),await gh(n)):e||(n.Ea.add(2),await Gc(n),n.Ra.set("Unknown"))}function Yc(t){return t.ma||(t.ma=function(n,r,s){const i=Ee(n);return i.sa(),new vW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:SW.bind(null,t),t_:bW.bind(null,t),r_:AW.bind(null,t),H_:xW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),cE(t)?lE(t):t.Ra.set("Unknown")):(await t.ma.stop(),xN(t))})),t.ma}function Lo(t){return t.fa||(t.fa=function(n,r,s){const i=Ee(n);return i.sa(),new wW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:CW.bind(null,t),r_:NW.bind(null,t),ta:DW.bind(null,t),na:kW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qc(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Ha,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new uE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yh(t,e){if(fn("AsyncQueue",`${e}: ${t}`),zo(t))return new re(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{static emptySet(e){return new Kl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Vu(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Kl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.ga=new kt(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pc(e,n,Kl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class LW{constructor(){this.queries=oA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ee(n),i=s.queries;s.queries=oA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new re(z.ABORTED,"Firestore shutting down"))}}function oA(){return new Ri(t=>Tk(t),rg)}async function dE(t,e){const n=Ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new OW,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=yh(o,`Initialization of query '${vl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&fE(n)}async function hE(t,e){const n=Ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function VW(t,e){const n=Ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&fE(n)}function MW(t,e,n){const r=Ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function fE(t){t.Ca.forEach(e=>{e.next()})}var Bw,aA;(aA=Bw||(Bw={})).Ma="default",aA.Cache="cache";class pE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Pc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.key=e}}class kN{constructor(e){this.key=e}}class NN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=Sk(e),this.tu=new Kl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new iA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=fh(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?w!==g&&(r.track({type:3,doc:p}),v=!0):this.su(f,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(p,w){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:v})}};return g(p)-g(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Pc(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new kN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new DN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=rt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jc="SyncEngine";class FW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UW{constructor(e){this.key=e,this.hu=!1}}class jW{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ri(a=>Tk(a),rg),this.Iu=new Map,this.Eu=new Set,this.du=new kt(ce.comparator),this.Au=new Map,this.Ru=new tE,this.Vu={},this.mu=new Map,this.fu=qa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $W(t,e,n=!0){const r=hg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ON(r,e,n,!0),s}async function BW(t,e){const n=hg(t);await ON(n,e,!0,!1)}async function ON(t,e,n,r){const s=await tm(t.localStore,jr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await mE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dg(t.remoteStore,s),a}async function mE(t,e,n,r,s){t.pu=(h,f,p)=>async function(g,v,E,y){let _=v.view.ru(E);_.Cs&&(_=await nm(g.localStore,v.query,!1).then(({documents:x})=>v.view.ru(x,_)));const R=y&&y.targetChanges.get(v.targetId),k=y&&y.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(_,g.isPrimaryClient,R,k);return zw(g,v.targetId,L.au),L.snapshot}(t,h,f,p);const i=await nm(t.localStore,e,!0),o=new NN(e,i.Qs),a=o.ru(i.documents),l=mh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);zw(t,n,c.au);const d=new FW(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function zW(t,e,n){const r=Ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!rg(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rc(r.remoteStore,s.targetId),Cc(r,s.targetId)}).catch(Bo)):(Cc(r,s.targetId),await xc(r.localStore,s.targetId,!0))}async function WW(t,e){const n=Ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rc(n.remoteStore,r.targetId))}async function qW(t,e,n){const r=wE(t);try{const s=await function(o,a){const l=Ee(o),c=_t.now(),d=a.reduce((p,w)=>p.add(w.key),rt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=Lr(),g=rt();return l.Ns.getEntries(p,d).next(v=>{w=v,w.forEach((E,y)=>{y.isValidDocument()||(g=g.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,w)).next(v=>{h=v;const E=[];for(const y of a){const _=pz(y,h.get(y.key).overlayedDocument);_!=null&&E.push(new Pi(y.key,_,hk(_.value.mapValue),Xn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(v=>{f=v;const E=v.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Ak(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new kt(Ge)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await qo(r,s.changes),await Qc(r.remoteStore)}catch(s){const i=yh(s,"Failed to persist write");n.reject(i)}}async function LN(t,e){const n=Ee(t);try{const r=await uW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Pe(o.hu,14607):s.removedDocuments.size>0&&(Pe(o.hu,42227),o.hu=!1))}),await qo(n,r,e)}catch(r){await Bo(r)}}function lA(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ee(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&fE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HW(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new kt(ce.comparator);o=o.insert(i,ln.newNoDocument(i,ke.min()));const a=rt().add(i),l=new ph(ke.min(),new Map,new kt(Ge),o,a);await LN(r,l),r.du=r.du.remove(i),r.Au.delete(e),vE(r)}else await xc(r.localStore,e,!1).then(()=>Cc(r,e,n)).catch(Bo)}async function KW(t,e){const n=Ee(t),r=e.batch.batchId;try{const s=await cW(n.localStore,e);yE(n,r,null),gE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qo(n,s)}catch(s){await Bo(s)}}async function GW(t,e,n){const r=Ee(t);try{const s=await function(o,a){const l=Ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);yE(r,e,n),gE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qo(r,s)}catch(s){await Bo(s)}}function gE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function yE(t,e,n){const r=Ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Cc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VN(t,r)})}function VN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),vE(t))}function zw(t,e,n){for(const r of n)r instanceof DN?(t.Ru.addReference(r.key,e),QW(t,r)):r instanceof kN?(Y(Jc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VN(t,r.key)):we(19791,{wu:r})}function QW(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(Jc,"New document in limbo: "+n),t.Eu.add(r),vE(t))}function vE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(Et.fromString(e)),r=t.fu.next();t.Au.set(r,new UW(n)),t.du=t.du.insert(n,r),dg(t.remoteStore,new ai(jr(hh(n.path)),r,"TargetPurposeLimboResolution",Er.ce))}}async function qo(t,e,n){const r=Ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=sE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=Ee(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.Es,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>M.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!zo(h))throw h;Y(iE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Ms.get(f),w=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(f,g)}}}(r.localStore,i))}async function YW(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){Y(Jc,"User change. New user:",e.toKey());const r=await pN(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new re(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qo(n,r.Ls)}}function JW(t,e){const n=Ee(t),r=n.Au.get(e);if(r&&r.hu)return rt().add(r.key);{let s=rt();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function XW(t,e){const n=Ee(t),r=await nm(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&zw(n,e.targetId,s.au),s}async function ZW(t,e){const n=Ee(t);return yN(n.localStore,e).then(r=>qo(n,r))}async function e7(t,e,n,r){const s=Ee(t),i=await function(a,l){const c=Ee(a),d=Ee(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Qc(s.remoteStore):n==="acknowledged"||n==="rejected"?(yE(s,e,r||null),gE(s,e),function(a,l){Ee(Ee(a).mutationQueue).ir(l)}(s.localStore,e)):we(6720,"Unknown batchState",{Su:n}),await qo(s,i)):Y(Jc,"Cannot apply mutation batch with id: "+e)}async function t7(t,e){const n=Ee(t);if(hg(n),wE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await cA(n,r.toArray());n.gu=!0,await $w(n.remoteStore,!0);for(const i of s)dg(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Cc(n,o),xc(n.localStore,o,!0))),Rc(n.remoteStore,o)}),await s,await cA(n,r),function(o){const a=Ee(o);a.Au.forEach((l,c)=>{Rc(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new kt(ce.comparator)}(n),n.gu=!1,await $w(n.remoteStore,!1)}}async function cA(t,e,n){const r=Ee(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await tm(r.localStore,jr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await XW(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await gN(r.localStore,o);a=await tm(r.localStore,c),await mE(r,MN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function MN(t){return _k(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function n7(t){return function(n){return Ee(Ee(n).persistence).Ts()}(Ee(t).localStore)}async function r7(t,e,n,r){const s=Ee(t);if(s.gu)return void Y(Jc,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await yN(s.localStore,Ik(i[0])),a=ph.createSynthesizedRemoteEventForCurrentChange(e,n==="current",cn.EMPTY_BYTE_STRING);await qo(s,o,a);break}case"rejected":await xc(s.localStore,e,!0),Cc(s,e,r);break;default:we(64155,n)}}async function s7(t,e,n){const r=hg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Y(Jc,"Adding an already active target "+s);continue}const i=await gN(r.localStore,s),o=await tm(r.localStore,i);await mE(r,MN(i),o.targetId,!1,o.resumeToken),dg(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await xc(r.localStore,s,!1).then(()=>{Rc(r.remoteStore,s),Cc(r,s)}).catch(Bo)}}function hg(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HW.bind(null,e),e.Pu.H_=VW.bind(null,e.eventManager),e.Pu.yu=MW.bind(null,e.eventManager),e}function wE(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GW.bind(null,e),e}class Kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ug(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fN(this.persistence,new hN,e.initialUser,this.serializer)}Cu(e){return new nE(cg.mi,this.serializer)}Du(e){return new TN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kd.provider={build:()=>new Kd};class i7 extends Kd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pe(this.persistence.referenceDelegate instanceof em,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new nE(r=>em.mi(r,n),this.serializer)}}class FN extends Kd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await wE(this.xu.syncEngine),await Qc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return fN(this.persistence,new hN,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new oN(r,e.asyncQueue,n)}Mu(e,n){const r=new y9(n,this.persistence);return new g9(e.asyncQueue,r)}Cu(e){const n=dN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new rE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,IN(),Gf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new TN}}class o7 extends FN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Oy&&(this.sharedClientState.syncEngine={Co:e7.bind(null,n),vo:r7.bind(null,n),Fo:s7.bind(null,n),Ts:n7.bind(null,n),Do:ZW.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await t7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=IN();if(!Oy.v(n))throw new re(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Oy(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YW.bind(null,this.syncEngine),await $w(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LW}()}createDatastore(e){const n=ug(e.databaseInfo.databaseId),r=function(i){return new yW(i)}(e.databaseInfo);return function(i,o,a,l){return new EW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new IW(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lA(this.syncEngine,n,0),function(){return nA.v()?new nA:new fW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new jW(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ee(s);Y(Ha,"RemoteStore shutting down."),i.Ea.add(5),await Gc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Gd.provider={build:()=>new Gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="FirestoreClient";class a7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Gn.UNAUTHENTICATED,this.clientId=Gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y(Vo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(Vo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vy(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Vo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EE(t);Y(Vo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sA(e.remoteStore,s)),t._onlineComponents=e}async function EE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Vo,"Using user provided OfflineComponentProvider");try{await Vy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await Vy(t,new Kd)}}else Y(Vo,"Using default OfflineComponentProvider"),await Vy(t,new i7(void 0));return t._offlineComponents}async function TE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Vo,"Using user provided OnlineComponentProvider"),await uA(t,t._uninitializedComponentsProvider._online)):(Y(Vo,"Using default OnlineComponentProvider"),await uA(t,new Gd))),t._onlineComponents}function UN(t){return EE(t).then(e=>e.persistence)}function jN(t){return EE(t).then(e=>e.localStore)}function $N(t){return TE(t).then(e=>e.remoteStore)}function l7(t){return TE(t).then(e=>e.syncEngine)}async function om(t){const e=await TE(t),n=e.eventManager;return n.onListen=$W.bind(null,e.syncEngine),n.onUnlisten=zW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WW.bind(null,e.syncEngine),n}function c7(t){return t.asyncQueue.enqueue(async()=>{const e=await UN(t),n=await $N(t);return e.setNetworkEnabled(!0),function(s){const i=Ee(s);return i.Ea.delete(0),gh(i)}(n)})}function u7(t){return t.asyncQueue.enqueue(async()=>{const e=await UN(t),n=await $N(t);return e.setNetworkEnabled(!1),async function(s){const i=Ee(s);i.Ea.add(0),await Gc(i),i.Ra.set("Offline")}(n)})}function d7(t,e){const n=new Zr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=Ee(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new re(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=yh(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await jN(t),e,n)),n.promise}function h7(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new _E({next:f=>{d.Nu(),o.enqueueAndForget(()=>hE(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new re(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new re(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new pE(hh(a.path),d,{includeMetadataChanges:!0,qa:!0});return dE(i,h)}(await om(t),t.asyncQueue,e,n,r)),r.promise}function f7(t,e){const n=new Zr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await nm(s,i,!0),l=new NN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=yh(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await jN(t),e,n)),n.promise}function p7(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new _E({next:f=>{d.Nu(),o.enqueueAndForget(()=>hE(i,h)),f.fromCache&&l.source==="server"?c.reject(new re(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new pE(a,d,{includeMetadataChanges:!0,qa:!0});return dE(i,h)}(await om(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7="firestore.googleapis.com",hA=!0;class fA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m7,this.ssl=hA}else this.host=e.host,this.ssl=e.ssl??hA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new re(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VD;switch(r.type){case"firstParty":return new a9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dA.get(n);r&&(Y("ComponentProvider","Removing Datastore"),dA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ch(n,qt._jsonSchema))return new qt(e,r||null,new ce(Et.fromString(n.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Tn("string",qt._jsonSchemaVersion),referencePath:Tn("string")};class ci extends Is{constructor(e,n,r){super(e,n,hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ce(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function Re(t,e,...n){if(t=bt(t),FD("collection","path",e),t instanceof IE){const r=Et.fromString(e,...n);return rb(r),new ci(t,null,r)}{if(!(t instanceof qt||t instanceof ci))throw new re(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return rb(r),new ci(t.firestore,null,r)}}function be(t,e,...n){if(t=bt(t),arguments.length===1&&(e=Gm.newId()),FD("doc","path",e),t instanceof IE){const r=Et.fromString(e,...n);return nb(r),new qt(t,null,new ce(r))}{if(!(t instanceof qt||t instanceof ci))throw new re(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return nb(r),new qt(t.firestore,t instanceof ci?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="AsyncQueue";class mA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SN(this,"async_queue_retry"),this._c=()=>{const r=Gf();r&&Y(pA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Gf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;Y(pA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,fn("INTERNAL UNHANDLED ERROR: ",gA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=uE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&we(47125,{Pc:gA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class dr extends IE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mA(e),this._firestoreClient=void 0,await e}}}function zN(t,e,n){n||(n=qp);const r=Hm(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(hc(i,e))return s;throw new re(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new re(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new re(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ai(e.host)&&A0(e.host),r.initialize({options:e,instanceIdentifier:n})}function Ci(t){if(t._terminated)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WN(t),t._firestoreClient}function WN(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new q9(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,BN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new a7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function g7(t,e){Do("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return qN(t,Gd.provider,{build:r=>new FN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function y7(t){Do("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();qN(t,Gd.provider,{build:n=>new o7(n,e.cacheSizeBytes)})}function qN(t,e,n){if((t=mn(t,dr))._firestoreClient||t._terminated)throw new re(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new re(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},WN(t)}function SE(t){return c7(Ci(t=mn(t,dr)))}function bE(t){return u7(Ci(t=mn(t,dr)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(cn.fromBase64String(e))}catch(n){throw new re(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nr(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ch(e,Nr._jsonSchema))return Nr.fromBase64String(e.bytes)}}Nr._jsonSchemaVersion="firestore/bytes/1.0",Nr._jsonSchema={type:Tn("string",Nr._jsonSchemaVersion),bytes:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ms._jsonSchemaVersion}}static fromJSON(e){if(ch(e,ms._jsonSchema))return new ms(e.latitude,e.longitude)}}ms._jsonSchemaVersion="firestore/geoPoint/1.0",ms._jsonSchema={type:Tn("string",ms._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ch(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gs(e.vectorValues);throw new re(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:Tn("string",gs._jsonSchemaVersion),vectorValues:Tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7=/^__.*__$/;class w7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class HN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class fg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return am(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KN(this.Ac)&&v7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ug(e)}Cc(e,n,r,s=!1){return new fg({Ac:e,methodName:n,Dc:r,path:Wt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pg(t){const e=t._freezeSettings(),n=ug(t._databaseId);return new _7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);RE("Data must be an object, but it was:",o,r);const a=QN(r,o);let l,c;if(i.merge)l=new Tr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Ww(e,h,n);if(!o.contains(f))throw new re(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);JN(d,f)||d.push(f)}l=new Tr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new w7(new Jn(a),l,c)}class mg extends Xc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mg}}function E7(t,e,n){return new fg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class AE extends Xc{_toFieldTransform(e){return new K0(e.path,new Sc)}isEqual(e){return e instanceof AE}}class xE extends Xc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=E7(this,e,!0),r=this.vc.map(i=>Zc(i,n)),s=new Ba(r);return new K0(e.path,s)}isEqual(e){return e instanceof xE&&hc(this.vc,e.vc)}}function T7(t,e,n,r){const s=t.Cc(1,e,n);RE("Data must be an object, but it was:",s,r);const i=[],o=Jn.empty();Wo(r,(l,c)=>{const d=PE(e,l,n);c=bt(c);const h=s.yc(d);if(c instanceof mg)i.push(d);else{const f=Zc(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Tr(i);return new HN(o,a,s.fieldTransforms)}function I7(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Ww(e,r,n)],l=[s];if(i.length%2!=0)throw new re(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Ww(e,i[f])),l.push(i[f+1]);const c=[],d=Jn.empty();for(let f=a.length-1;f>=0;--f)if(!JN(c,a[f])){const p=a[f];let w=l[f];w=bt(w);const g=o.yc(p);if(w instanceof mg)c.push(p);else{const v=Zc(w,g);v!=null&&(c.push(p),d.set(p,v))}}const h=new Tr(c);return new HN(d,h,o.fieldTransforms)}function S7(t,e,n,r=!1){return Zc(n,t.Cc(r?4:3,e))}function Zc(t,e){if(YN(t=bt(t)))return RE("Unsupported field value:",e,t),QN(t,e);if(t instanceof Xc)return function(r,s){if(!KN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Zc(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_t.fromDate(r);return{timestampValue:Ac(s.serializer,i)}}if(r instanceof _t){const i=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ac(s.serializer,i)}}if(r instanceof ms)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:Uk(s.serializer,r._byteString)};if(r instanceof qt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:X0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gs)return function(o,a){return{mapValue:{fields:{[B0]:{stringValue:z0},[_c]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return H0(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Qm(r)}`)}(t,e)}function QN(t,e){const n={};return rk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(t,(r,s)=>{const i=Zc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function YN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof ms||t instanceof Nr||t instanceof qt||t instanceof Xc||t instanceof gs)}function RE(t,e,n){if(!YN(n)||!jD(n)){const r=Qm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ww(t,e,n){if((e=bt(e))instanceof vh)return e._internalPath;if(typeof e=="string")return PE(t,e);throw am("Field path arguments must be of type string or ",t,!1,void 0,n)}const b7=new RegExp("[~\\*/\\[\\]]");function PE(t,e,n){if(e.search(b7)>=0)throw am(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vh(...e.split("."))._internalPath}catch{throw am(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function am(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new re(z.INVALID_ARGUMENT,a+t+l)}function JN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A7 extends XN{data(){return super.data()}}function gg(t,e){return typeof e=="string"?PE(t,e):e instanceof vh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CE{}class yg extends CE{}function $e(t,e,...n){let r=[];e instanceof CE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof vg).length,a=i.filter(l=>l instanceof wh).length;if(o>1||o>0&&a>0)throw new re(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class wh extends yg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wh(e,n,r)}_apply(e){const n=this._parse(e);return eO(e._query,n),new Is(e.firestore,e.converter,Dw(e._query,n))}_parse(e){const n=pg(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new re(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){wA(h,d);const w=[];for(const g of h)w.push(vA(l,i,g));f={arrayValue:{values:w}}}else f=vA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||wA(h,d),f=S7(a,o,h,d==="in"||d==="not-in");return ht.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ve(t,e,n){const r=e,s=gg("where",t);return wh._create(s,r,n)}class vg extends CE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)eO(o,l),o=Dw(o,l)}(e._query,n),new Is(e.firestore,e.converter,Dw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wg extends yg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new re(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qd(i,o)}(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Hc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function zs(t,e="asc"){const n=e,r=gg("orderBy",t);return wg._create(r,n)}class _g extends yg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _g(e,n,r)}_apply(e){return new Is(e.firestore,e.converter,Gp(e._query,this._limit,this._limitType))}}function So(t){return f9("limit",t),_g._create("limit",t,"F")}function vA(t,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new re(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ek(e)&&n.indexOf("/")!==-1)throw new re(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Et.fromString(n));if(!ce.isDocumentKey(r))throw new re(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zd(t,new ce(r))}if(n instanceof qt)return zd(t,n._key);throw new re(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qm(n)}.`)}function wA(t,e){if(!Array.isArray(t)||t.length===0)throw new re(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eO(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tO{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[_c].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Bt(o.doubleValue));return new gs(n)}convertGeoPoint(e){return new ms(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($d(e));default:return null}}convertTimestamp(e){const n=Ei(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Et.fromString(e);Pe(Qk(r),9688,{name:e});const s=new ko(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||fn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ma{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ui extends XN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ui._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",ui._jsonSchema={type:Tn("string",ui._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class od extends ui{data(e={}){return super.data(e)}}class di{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ma(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new od(this._firestore,this._userDataWriter,r.key,r,new ma(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new od(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ma(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new od(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ma(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:x7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=di._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function x7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t){t=mn(t,qt);const e=mn(t.firestore,dr);return h7(Ci(e),t._key).then(n=>sO(e,t,n))}di._jsonSchemaVersion="firestore/querySnapshot/1.0",di._jsonSchema={type:Tn("string",di._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class _h extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function rO(t){t=mn(t,qt);const e=mn(t.firestore,dr),n=Ci(e),r=new _h(e);return d7(n,t._key).then(s=>new ui(e,r,t._key,s,new ma(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ke(t){t=mn(t,Is);const e=mn(t.firestore,dr),n=Ci(e),r=new _h(e);return ZN(t._query),p7(n,t._query).then(s=>new di(e,r,t,s))}function R7(t){t=mn(t,Is);const e=mn(t.firestore,dr),n=Ci(e),r=new _h(e);return f7(n,t._query).then(s=>new di(e,r,t,s))}function an(t,e,n){t=mn(t,qt);const r=mn(t.firestore,dr),s=nO(t.converter,e,n);return Eh(r,[GN(pg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xn.none())])}function gn(t,e,n,...r){t=mn(t,qt);const s=mn(t.firestore,dr),i=pg(s);let o;return o=typeof(e=bt(e))=="string"||e instanceof vh?I7(i,"updateDoc",t._key,e,n,r):T7(i,"updateDoc",t._key,e),Eh(s,[o.toMutation(t._key,Xn.exists(!0))])}function kn(t){return Eh(mn(t.firestore,dr),[new og(t._key,Xn.none())])}function Ws(t,e){const n=mn(t.firestore,dr),r=be(t),s=nO(t.converter,e);return Eh(n,[GN(pg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}function Ii(t,...e){var l,c,d;t=bt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||yA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(yA(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof qt)o=mn(t.firestore,dr),a=hh(t._key.path),i={next:h=>{e[r]&&e[r](sO(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=mn(t,Is);o=mn(h.firestore,dr),a=h._query;const f=new _h(o);i={next:p=>{e[r]&&e[r](new di(o,f,h,p))},error:e[r+1],complete:e[r+2]},ZN(t._query)}return function(f,p,w,g){const v=new _E(g),E=new pE(p,v,w);return f.asyncQueue.enqueueAndForget(async()=>dE(await om(f),E)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>hE(await om(f),E))}}(Ci(o),a,s,i)}function Eh(t,e){return function(r,s){const i=new Zr;return r.asyncQueue.enqueueAndForget(async()=>qW(await l7(r),s,i)),i.promise}(Ci(t),e)}function sO(t,e,n){const r=n.docs.get(e._key),s=new _h(t);return new ui(t,s,e._key,r,new ma(n.hasPendingWrites,n.fromCache),e.converter)}function Ue(){return new AE("serverTimestamp")}function P7(...t){return new xE("arrayUnion",t)}(function(e,n=!0){(function(s){qc=s})(ah),Ks(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new dr(new i9(r.getProvider("auth-internal")),new l9(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new re(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ur(XS,ZS,e),Ur(XS,ZS,"esm2020")})();const un=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:tO,Bytes:Nr,CollectionReference:ci,DocumentReference:qt,DocumentSnapshot:ui,FieldPath:vh,FieldValue:Xc,Firestore:dr,FirestoreError:re,GeoPoint:ms,Query:Is,QueryCompositeFilterConstraint:vg,QueryConstraint:yg,QueryDocumentSnapshot:od,QueryFieldFilterConstraint:wh,QueryLimitConstraint:_g,QueryOrderByConstraint:wg,QuerySnapshot:di,SnapshotMetadata:ma,Timestamp:_t,VectorValue:gs,_AutoId:Gm,_ByteString:cn,_DatabaseId:ko,_DocumentKey:ce,_EmptyAuthCredentialsProvider:VD,_FieldPath:Wt,_cast:mn,_logWarn:Do,_validateIsNotUsedTogether:UD,addDoc:Ws,arrayUnion:P7,collection:Re,deleteDoc:kn,disableNetwork:bE,doc:be,enableIndexedDbPersistence:g7,enableMultiTabIndexedDbPersistence:y7,enableNetwork:SE,ensureFirestoreConfigured:Ci,executeWrite:Eh,getDoc:Qt,getDocFromCache:rO,getDocs:Ke,getDocsFromCache:R7,initializeFirestore:zN,limit:So,onSnapshot:Ii,orderBy:zs,query:$e,serverTimestamp:Ue,setDoc:an,setLogLevel:OD,updateDoc:gn,where:Ve},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7="type.googleapis.com/google.protobuf.Int64Value",D7="type.googleapis.com/google.protobuf.UInt64Value";function iO(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function lm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>lm(e));if(typeof t=="function"||typeof t=="object")return iO(t,e=>lm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Dc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case C7:case D7:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Dc(e)):typeof t=="function"||typeof t=="object"?iO(t,e=>Dc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ir extends Ts{constructor(e,n,r){super(`${DE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Ir.prototype)}}function k7(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function cm(t,e){let n=k7(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!_A[o])return new Ir("internal","internal");n=_A[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Dc(s))}}catch{}return n==="ok"?null:new Ir(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,kr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="us-central1",O7=/^data: (.*?)(?:\n|$)/;function L7(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Ir("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class V7{constructor(e,n,r,s,i=qw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new N7(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=qw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function M7(t,e,n){const r=Ai(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(A0(t.emulatorOrigin+"/backends"),zC("Functions",!0))}function F7(t,e,n){const r=s=>j7(t,e,s,{});return r.stream=(s,i)=>B7(t,e,s,i),r}function oO(t){return t.emulatorOrigin&&Ai(t.emulatorOrigin)?"include":void 0}async function U7(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:oO(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function aO(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function j7(t,e,n,r){const s=t._url(e);return $7(t,s,n,r)}async function $7(t,e,n,r){n=lm(n);const s={data:n},i=await aO(t,r),o=r.timeout||7e4,a=L7(o),l=await Promise.race([U7(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Ir("cancelled","Firebase Functions instance was deleted.");const c=cm(l.status,l.json);if(c)throw c;if(!l.json)throw new Ir("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Ir("internal","Response is missing data field.");return{data:Dc(d)}}function B7(t,e,n,r){const s=t._url(e);return z7(t,s,n,r||{})}async function z7(t,e,n,r){var f;n=lm(n);const s={data:n},i=await aO(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:oO(t)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const g=new Ir("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const w=cm(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let a,l;const c=new Promise((p,w)=>{a=p,l=w});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const p=new Ir("cancelled","Request was cancelled.");l(p)});const d=o.body.getReader(),h=W7(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:w,done:g}=await p.read();return{value:w,done:g}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function W7(t,e,n,r){const s=(o,a)=>{const l=o.match(O7);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Dc(d.result));return}if("message"in d){a.enqueue(Dc(d.message));return}if("error"in d){const h=cm(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Ir){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Ir("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Ir("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Ir?c:cm(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const EA="@firebase/functions",TA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="auth-internal",H7="app-check-internal",K7="messaging-internal";function G7(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(q7),o=n.getProvider(K7),a=n.getProvider(H7);return new V7(s,i,o,a,r)};Ks(new _s(DE,e,"PUBLIC").setMultipleInstances(!0)),Ur(EA,TA,t),Ur(EA,TA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q7(t=JC(),e=qw){const r=Hm(bt(t),DE).getImmediate({identifier:e}),s=$C("functions");return s&&Y7(r,...s),r}function Y7(t,e,n){M7(bt(t),e,n)}function sG(t,e,n){return F7(bt(t),e)}G7();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="firebasestorage.googleapis.com",cO="storageBucket",J7=2*60*1e3,X7=10*60*1e3,Z7=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends Ts{constructor(e,n,r=0){super(My(e),`Firebase Storage: ${n} (${My(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return My(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jt||(jt={}));function My(t){return"storage/"+t}function kE(){const t="An unknown error occurred, please check the error payload for server response.";return new Zt(jt.UNKNOWN,t)}function e8(t){return new Zt(jt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function t8(t){return new Zt(jt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function n8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zt(jt.UNAUTHENTICATED,t)}function r8(){return new Zt(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function s8(t){return new Zt(jt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uO(){return new Zt(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dO(){return new Zt(jt.CANCELED,"User canceled the upload/download.")}function i8(t){return new Zt(jt.INVALID_URL,"Invalid URL '"+t+"'.")}function o8(t){return new Zt(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function a8(){return new Zt(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cO+"' property when initializing the app?")}function hO(){return new Zt(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function l8(){return new Zt(jt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function c8(){return new Zt(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function u8(t){return new Zt(jt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hw(t){return new Zt(jt.INVALID_ARGUMENT,t)}function fO(){return new Zt(jt.APP_DELETED,"The Firebase app was deleted.")}function d8(t){return new Zt(jt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ad(t,e){return new Zt(jt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function bu(t){throw new Zt(jt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vr.makeFromUrl(e,n)}catch{return new Vr(e,"")}if(r.path==="")return r;throw o8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),w={bucket:1,path:3},g=n===lO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",E=new RegExp(`^https?://${g}/${s}/${v}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:p,indices:w,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<_.length;R++){const k=_[R],L=k.regex.exec(e);if(L){const x=L[k.indices.bucket];let A=L[k.indices.path];A||(A=""),r=new Vr(x,A),k.postModify(r);break}}if(r==null)throw i8(e);return r}}class h8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function f(){i&&clearTimeout(i)}function p(v,...E){if(c){f();return}if(v){f(),d.call(null,v,...E);return}if(l()||o){f(),d.call(null,v,...E);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,h(_)}let w=!1;function g(v){w||(w=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function p8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){return t!==void 0}function g8(t){return typeof t=="function"}function y8(t){return typeof t=="object"&&!Array.isArray(t)}function Eg(t){return typeof t=="string"||t instanceof String}function IA(t){return NE()&&t instanceof Blob}function NE(){return typeof Blob<"u"}function SA(t,e,n,r){if(r<e)throw Hw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function pO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Na;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Na||(Na={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,g)=>{this.resolve_=w,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new hf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Na.NO_ERROR,l=i.getStatus();if(!a||mO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Na.ABORT;r(!1,new hf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new hf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());m8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=kE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?fO():dO();o(l)}else{const l=uO();o(l)}};this.canceled_?n(!1,new hf(!1,null,!0)):this.backoffId_=f8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&p8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function w8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function T8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function I8(t,e,n,r,s,i,o=!0,a=!1){const l=pO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return E8(d,e),w8(d,n),_8(d,i),T8(d,r),new v8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function b8(...t){const e=S8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(NE())return new Blob(t);throw new Zt(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function A8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t){if(typeof atob>"u")throw u8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fy{constructor(e,n){this.data=e,this.contentType=n||null}}function R8(t,e){switch(t){case Us.RAW:return new Fy(gO(e));case Us.BASE64:case Us.BASE64URL:return new Fy(yO(t,e));case Us.DATA_URL:return new Fy(C8(e),D8(e))}throw kE()}function gO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function P8(t){let e;try{e=decodeURIComponent(t)}catch{throw ad(Us.DATA_URL,"Malformed data URL.")}return gO(e)}function yO(t,e){switch(t){case Us.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ad(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Us.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ad(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=x8(e)}catch(s){throw s.message.includes("polyfill")?s:ad(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class vO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ad(Us.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=k8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function C8(t){const e=new vO(t);return e.base64?yO(Us.BASE64,e.rest):P8(e.rest)}function D8(t){return new vO(t).contentType}function k8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){let r=0,s="";IA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(IA(this.data_)){const r=this.data_,s=A8(r,e,n);return s===null?null:new ri(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ri(r,!0)}}static getBlob(...e){if(NE()){const n=e.map(r=>r instanceof ri?r.data_:r);return new ri(b8.apply(null,n))}else{const n=e.map(o=>Eg(o)?R8(Us.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ri(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){let e;try{e=JSON.parse(t)}catch{return null}return y8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function O8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function _O(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(t,e){return e}class sr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||L8}}let ff=null;function V8(t){return!Eg(t)||t.length<2?t:_O(t)}function OE(){if(ff)return ff;const t=[];t.push(new sr("bucket")),t.push(new sr("generation")),t.push(new sr("metageneration")),t.push(new sr("name","fullPath",!0));function e(i,o){return V8(o)}const n=new sr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new sr("size");return s.xform=r,t.push(s),t.push(new sr("timeCreated")),t.push(new sr("updated")),t.push(new sr("md5Hash",null,!0)),t.push(new sr("cacheControl",null,!0)),t.push(new sr("contentDisposition",null,!0)),t.push(new sr("contentEncoding",null,!0)),t.push(new sr("contentLanguage",null,!0)),t.push(new sr("contentType",null,!0)),t.push(new sr("metadata","customMetadata",!0)),ff=t,ff}function M8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Vr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function F8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return M8(r,t),r}function EO(t,e,n){const r=wO(e);return r===null?null:F8(t,r,n)}function U8(t,e,n,r){const s=wO(e);if(s===null||!Eg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=Th(f,n,r),w=pO({alt:"media",token:c});return p+w})[0]}function TO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class eu{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){if(!t)throw kE()}function LE(t,e){function n(r,s){const i=EO(t,s,e);return hi(i!==null),i}return n}function j8(t,e){function n(r,s){const i=EO(t,s,e);return hi(i!==null),U8(i,s,t.host,t._protocol)}return n}function Ih(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=r8():s=n8():n.getStatus()===402?s=t8(t.bucket):n.getStatus()===403?s=s8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function IO(t){const e=Ih(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=e8(t.path)),i.serverResponse=s.serverResponse,i}return n}function $8(t,e,n){const r=e.fullServerUrl(),s=Th(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new eu(s,i,LE(t,n),o);return a.errorHandler=IO(e),a}function B8(t,e,n){const r=e.fullServerUrl(),s=Th(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new eu(s,i,j8(t,n),o);return a.errorHandler=IO(e),a}function z8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function SO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=z8(null,e)),r}function bO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let R=0;R<2;R++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=SO(e,r,s),d=TO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=ri.getBlob(h,r,f);if(p===null)throw hO();const w={name:c.fullPath},g=Th(i,t.host,t._protocol),v="POST",E=t.maxUploadRetryTime,y=new eu(g,v,LE(t,n),E);return y.urlParams=w,y.headers=o,y.body=p.uploadData(),y.errorHandler=Ih(e),y}class um{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function VE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{hi(!1)}return hi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function W8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=SO(e,r,s),a={name:o.fullPath},l=Th(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=TO(o,n),f=t.maxUploadRetryTime;function p(g){VE(g);let v;try{v=g.getResponseHeader("X-Goog-Upload-URL")}catch{hi(!1)}return hi(Eg(v)),v}const w=new eu(l,c,p,f);return w.urlParams=a,w.headers=d,w.body=h,w.errorHandler=Ih(e),w}function q8(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=VE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{hi(!1)}h||hi(!1);const f=Number(h);return hi(!isNaN(f)),new um(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new eu(n,o,i,a);return l.headers=s,l.errorHandler=Ih(e),l}const bA=256*1024;function H8(t,e,n,r,s,i,o,a){const l=new um(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw l8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let p="";d===0?p="finalize":c===d?p="upload, finalize":p="upload";const w={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw hO();function v(R,k){const L=VE(R,["active","final"]),x=l.current+d,A=r.size();let b;return L==="final"?b=LE(e,i)(R,k):b=null,new um(x,A,L==="final",b)}const E="POST",y=e.maxUploadRetryTime,_=new eu(n,E,v,y);return _.headers=w,_.body=g.uploadData(),_.progressCallback=a||null,_.errorHandler=Ih(t),_}const vr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Uy(t){switch(t){case"running":case"pausing":case"canceling":return vr.RUNNING;case"paused":return vr.PAUSED;case"success":return vr.SUCCESS;case"canceled":return vr.CANCELED;case"error":return vr.ERROR;default:return vr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r){if(g8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class G8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Na.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Na.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Na.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw bu("cannot .send() more than once");if(Ai(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Q8 extends G8{initXhr(){this.xhr_.responseType="text"}}function la(){return new Q8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=OE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(jt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(mO(s.status,[]))if(i)s=uO();else{this.sleepTime=Math.max(this.sleepTime*2,Z7),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(jt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=W8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,la,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=q8(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,la,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=bA*this._chunkMultiplier,n=new um(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=H8(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,la,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){bA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=$8(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,la,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=bO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,la,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=dO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Uy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new K8(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Uy(this._state)){case vr.SUCCESS:fl(this._resolve.bind(null,this.snapshot))();break;case vr.CANCELED:case vr.ERROR:const n=this._reject;fl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Uy(this._state)){case vr.RUNNING:case vr.PAUSED:e.next&&fl(e.next.bind(e,this.snapshot))();break;case vr.SUCCESS:e.complete&&fl(e.complete.bind(e))();break;case vr.CANCELED:case vr.ERROR:e.error&&fl(e.error.bind(e,this._error))();break;default:e.error&&fl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this._service=e,n instanceof Vr?this._location=n:this._location=Vr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ka(e,n)}get root(){const e=new Vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _O(this._location.path)}get storage(){return this._service}get parent(){const e=N8(this._location.path);if(e===null)return null;const n=new Vr(this._location.bucket,e);return new Ka(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw d8(e)}}function J8(t,e,n){t._throwIfRoot("uploadBytes");const r=bO(t.storage,t._location,OE(),new ri(e,!0),n);return t.storage.makeRequestWithTokens(r,la).then(s=>({metadata:s,ref:t}))}function X8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Y8(t,new ri(e),n)}function Z8(t){t._throwIfRoot("getDownloadURL");const e=B8(t.storage,t._location,OE());return t.storage.makeRequestWithTokens(e,la).then(n=>{if(n===null)throw c8();return n})}function eq(t,e){const n=O8(t._location.path,e),r=new Vr(t._location.bucket,n);return new Ka(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(t){return/^[A-Za-z]+:\/\//.test(t)}function nq(t,e){return new Ka(t,e)}function AO(t,e){if(t instanceof ME){const n=t;if(n._bucket==null)throw a8();const r=new Ka(n,n._bucket);return e!=null?AO(r,e):r}else return e!==void 0?eq(t,e):t}function rq(t,e){if(e&&tq(e)){if(t instanceof ME)return nq(t,e);throw Hw("To use ref(service, url), the first argument must be a Storage instance.")}else return AO(t,e)}function AA(t,e){const n=e==null?void 0:e[cO];return n==null?null:Vr.makeFromBucketSpec(n,t)}function sq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ai(e);s&&(A0(`https://${t.host}/b`),zC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:W6(i,t.app.options.projectId))}class ME{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=lO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J7,this._maxUploadRetryTime=X7,this._requests=new Set,s!=null?this._bucket=Vr.makeFromBucketSpec(s,this._host):this._bucket=AA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vr.makeFromBucketSpec(this._url,e):this._bucket=AA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ka(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new h8(fO());{const o=I8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const xA="@firebase/storage",RA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="storage";function iG(t,e,n){return t=bt(t),J8(t,e,n)}function iq(t,e,n){return t=bt(t),X8(t,e,n)}function oq(t){return t=bt(t),Z8(t)}function aq(t,e){return t=bt(t),rq(t,e)}function RO(t=JC(),e){t=bt(t);const r=Hm(t,xO).getImmediate({identifier:e}),s=$C("storage");return s&&lq(r,...s),r}function lq(t,e,n,r={}){sq(t,e,n,r)}function cq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ME(n,r,s,e,ah)}function uq(){Ks(new _s(xO,cq,"PUBLIC").setMultipleInstances(!0)),Ur(xA,RA,""),Ur(xA,RA,"esm2020")}uq();const dq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Kw={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Kw.projectId,authDomain:Kw.authDomain,emulatorMode:!1});const Tg=YC(Kw);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Pt=XB(Tg,{persistence:[wD,gw]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const q=zN(Tg,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{OD("error")}catch{}const hq=Q7(Tg,"us-central1"),fq=RO(Tg);console.log(" Firebase initialized successfully");const pq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(pq,100);let ra=0;const jy=3,mq=1e3,PO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&ra<jy){ra++;const r=Math.min(mq*Math.pow(2,ra-1),1e4);console.log(` Attempting to reconnect (${ra}/${jy}) in ${r}ms...`);try{await bE(q),await new Promise(s=>setTimeout(s,r)),await SE(q),console.log(" Firestore reconnected successfully"),ra=0}catch(s){console.error(" Failed to reconnect:",s),ra>=jy&&(console.error(" Maximum reconnection attempts reached."),gq())}}},gq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await SE(q),ra=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await bE(q),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(PO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Rt=Object.freeze(Object.defineProperty({__proto__:null,auth:Pt,db:q,functions:hq,handleFirestoreError:PO,storage:fq},Symbol.toStringTag,{value:"Module"})),nt=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},yq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Ga=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Ga(n)).filter(n=>n!==void 0);if(t instanceof Date||!yq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Ga(r);s!==void 0&&(e[n]=s)}return e},Qf={async create(t){await an(be(q,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Ue()})},async getById(t){const e=be(q,"profiles",t),n=await Qt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:nt(r.createdAt)}}return null},async update(t,e){const n=be(q,"profiles",t);await gn(n,{...e,updatedAt:Ue()})},async getByShopId(t){const e=$e(Re(q,"profiles"),Ve("shopId","==",t));return(await Ke(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:nt(s.createdAt)}})}},Gw={async create(t){return(await Ws(Re(q,"referrals"),{...t,createdAt:Ue(),updatedAt:Ue()})).id},async getByReferrerId(t){try{const e=$e(Re(q,"referrals"),Ve("referrerId","==",t),zs("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),updatedAt:nt(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=$e(Re(q,"referrals"),Ve("referrerId","==",t));return(await Ke(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:nt(i.data().createdAt),updatedAt:nt(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=$e(Re(q,"referrals"),Ve("referralCode","==",t),So(1)),n=await Ke(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:nt(r.data().createdAt),updatedAt:nt(r.data().updatedAt)}},async updateStatus(t,e){await gn(be(q,"referrals",t),{status:e,updatedAt:Ue()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},CO={async getByUserId(t){const e=$e(Re(q,"profiles"),Ve("userId","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:nt(s.createdAt),updatedAt:nt(s.updatedAt)}}return null},async update(t,e){const n=$e(Re(q,"profiles"),Ve("userId","==",t)),r=await Ke(n);if(!r.empty){const s=be(q,"profiles",r.docs[0].id);await gn(s,{...e,updatedAt:Ue()})}}},lo={async create(t){return(await Ws(Re(q,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Ue(),updatedAt:Ue()})).id},async getByMerchantId(t){const e=$e(Re(q,"merchantWallets"),Ve("merchantUserId","==",t)),r=(await Ke(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=$e(Re(q,"wallets"),Ve("userId","==",t));return(await Ke(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=be(q,"merchantWallets",t),n=await Qt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:nt(r.createdAt),updatedAt:nt(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=$e(Re(q,"merchantWallets"),Ve("iccid","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:nt(s.createdAt),updatedAt:nt(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=$e(Re(q,"merchantWallets"),Ve("msisdn","==",t)),r=await Ke(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}const s=$e(Re(q,"merchantWallets")),i=await Ke(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:nt(l.createdAt),updatedAt:nt(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=be(q,"merchantWallets",t);await gn(n,{...e,updatedAt:Ue()})},async updateUsage(t,e,n){const r=be(q,"merchantWallets",t),s={updatedAt:Ue()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await gn(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=$e(Re(q,"merchantWallets"),Ve("msisdn","in",o)),c=(await Ke(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await gn(d.ref,{merchantUserId:e,updatedAt:Ue()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=be(q,"merchantWallets",t);await kn(e)}},FE={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Q(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>Ll);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Ue(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Ws(Re(q,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Q(async()=>{const{ProfitService:d}=await import("./profitService-B2f_fkQK.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await lo.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),p=Number(t.amount||0),w=String((t==null?void 0:t.originType)||"").trim()==="withdraw",g=String(t.txnType||"")==="receive";w||g?await lo.updateUsage(c,void 0,f+p):await lo.updateUsage(c,h+p,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let p="";if(h)try{const g=await lo.getById(h);p=String((g==null?void 0:g.msisdn)||(g==null?void 0:g.label)||h).trim()}catch{}let w="";f==="withdraw"?w=p?`   ${c}   ${p}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?w=`   ${c}   ${p||" "}   ${d||""}    ${r}`:w=p?`  ${c}   ${p}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=$e(Re(q,"transactions"),Ve("shopId","==",t),zs("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),confirmedAt:r.data().confirmedAt?nt(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=$e(Re(q,"transactions"),Ve("merchantUserId","==",t),zs("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt),confirmedAt:r.data().confirmedAt?nt(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=$e(Re(q,"transactions"),Ve("merchantUserId","==",t)),n=$e(Re(q,"transactions"),Ve("userId","==",t)),[r,s]=await Promise.all([Ke(e),Ke(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:nt(c.createdAt),confirmedAt:c.confirmedAt?nt(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=be(q,"transactions",t);await gn(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function vq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await FE.create(e);return(async()=>{try{const{calculateCommission:r}=await Q(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>Ll);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Yr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Yr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await Q(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>Jw);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const wq="https://summer-cake-5149.alkaptin2030.workers.dev",DO={async getTelegramWorkerUrl(){var t;try{const e=be(q,"systemSettings","core"),n=await Qt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=be(q,"systemSettings","core");await an(e,{telegramWorkerUrl:t,updatedAt:Ue()},{merge:!0})}},_q={async send(t,e){try{const n=await Yr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await DO.getTelegramWorkerUrl()||wq).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},Eq={async log(t,e,n,r,s){await Ws(Re(q,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Ue()})},async getLogs(t=100){const e=$e(Re(q,"auditLogs"),zs("createdAt","desc"),So(t));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:nt(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=$e(Re(q,"deletedTransactions"),zs("deletedAt","desc"));return(await Ke(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:nt(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=$e(Re(q,"deletedTransactions"),Ve("userId","==",t),zs("deletedAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:nt(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=$e(Re(q,"deletedTransactions"),Ve("userId","==",t));return(await Ke(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:nt(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Ue(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Ws(Re(q,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=$e(Re(q,"deletedTransactions"),Ve("originalTransactionId","==",t),Ve("userId","==",e)),r=await Ke(n);r.empty?await Ws(Re(q,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Ue()}):await Promise.all(r.docs.map(s=>gn(s.ref,{permanent:!0,deletedAt:Ue()}))),console.log("    :",t);try{const s=$e(Re(q,"userTransactions"),Ve("userId","==",e)),o=(await Ke(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>kn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=be(q,"transactions",t);(await Qt(s)).exists()&&(console.log("     transactions  "),await kn(s));const o=$e(Re(q,"transactions"),Ve("transactionId","==",t)),a=await Ke(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>kn(d.ref))));const l=$e(Re(q,"transactions"),Ve("originalTransactionId","==",t)),c=await Ke(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>kn(d.ref))));try{const d=$e(Re(q,"deletedTransactions"),Ve("userId","==",e),Ve("originalTransactionId","==",t)),h=await Ke(d),f=h.docs.map(w=>{var g;return String(((g=w.data())==null?void 0:g.reference)||"")}).filter(Boolean),p=h.docs.map(w=>{var g;return String(((g=w.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const w of f){const g=$e(Re(q,"transactions"),Ve("reference","==",w)),v=await Ke(g);v.empty||(console.log(`  ${v.size}   transactions  reference=${w}`),await Promise.all(v.docs.map(E=>kn(E.ref))))}for(const w of p){try{const E=be(q,"transactions",w);(await Qt(E)).exists()&&(console.log("     transactions  :",w),await kn(E))}catch{}const g=$e(Re(q,"transactions"),Ve("transactionId","==",w)),v=await Ke(g);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${w}`),await Promise.all(v.docs.map(E=>kn(E.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},kO={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=be(q,"daily_reports_archive",e);return await an(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Ue()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=$e(Re(q,"daily_reports_archive"),Ve("userId","==",t),So(e)),a=await Ke(o);let l=[];try{l=(await Ke($e(Re(q,"deletedDailyArchives"),Ve("userId","==",t)))).docs.map(w=>{var g,v;return{id:w.id,reportDate:String(((g=w.data())==null?void 0:g.reportDate)||""),archiveId:String(((v=w.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(p,w)=>l.some(g=>g.archiveId&&g.archiveId===p||g.reportDate&&g.reportDate===w),d=a.docs.map(p=>({id:p.id,userId:String(p.data().userId),reportDate:String(p.data().reportDate),totalTransactions:Number(p.data().totalTransactions||0),totalAmount:Number(p.data().totalAmount||0),totalWithdrawn:Number(p.data().totalWithdrawn||0),totalSent:Number(p.data().totalSent||0),profit:p.data().profit!==void 0?Number(p.data().profit):void 0,walletId:p.data().walletId??null,createdAt:nt(p.data().createdAt||p.data().updatedAt)})).filter(p=>!c(p.id,p.reportDate)),h=new Map;for(const p of d){const w=h.get(p.reportDate);(!w||(((r=(n=p.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=w.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(p.reportDate,p)}const f=Array.from(h.values());return f.sort((p,w)=>p.reportDate<w.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=$e(Re(q,"daily_reports_archive"),Ve("userId","==",t)),s=await Ke(r);let i=0;for(const o of s.docs){const a=nt(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await kn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=$e(Re(q,"daily_reports_archive"),Ve("userId","==",t)),s=(await Ke(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:nt(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await kn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=$e(Re(q,"daily_reports_archive"),Ve("userId","==",t)),n=await Ke(e);let r=0;for(const s of n.docs)try{await kn(s.ref),r++}catch{const o=s.data();try{await Ws(Re(q,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Ue()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Yr={async getUserData(t){try{console.log("     :",{userId:t});const e=be(q,"users",t),n=await Qt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:nt(r.createdAt),updatedAt:nt(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=$e(Re(q,"deletedTransactions"),Ve("userId","==",t));return Ii(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data();if(!((i==null?void 0:i.permanent)===!0))return;const a=String((i==null?void 0:i.originalTransactionId)||""),l=String((i==null?void 0:i.transactionId)||""),c=String((i==null?void 0:i.reference)||"");a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptById(t,l),c&&this.removeLocalReceiptByRef(t,c)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=be(q,"users",t),r=Ga(e);await an(n,{...r||{},updatedAt:Ue()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=be(q,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Ga(r);let i={};try{const l=await Qt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Ue()};console.log("   :",o);let a=3;for(;a>0;)try{await an(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=$e(Re(q,"userTransactions"),Ve("userId","==",t),zs("createdAt","desc"),So(200));e=await Ke(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=$e(Re(q,"userTransactions"),Ve("userId","==",t));e=await Ke(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:nt(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=$e(Re(q,"deletedTransactions"),Ve("userId","==",t),Ve("reference","==",o));if(!(await Ke(c)).empty)return console.log("          ."),"skip-deleted"}{const c=$e(Re(q,"deletedTransactions"),Ve("userId","==",t),Ve("permanent","==",!0)),d=await Ke(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(p=>!!p).map(p=>String(p));if(d.docs.find(p=>{const w=p.data(),g=String(w.originalTransactionId||w.transactionId||p.id||""),v=String(w.reference||"");return g&&h.includes(g)||v&&h.includes(v)}))return console.log("        /   ."),"skip-deleted"}}const a=$e(Re(q,"deletedTransactions"),Ve("userId","==",t),zs("deletedAt","desc"),So(20)),l=await Ke(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=10*60*1e3;if(l.docs.find(g=>{const v=g.data(),E=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,_=Number(v.amount||0),R=v.createdAt?new Date(String(v.createdAt)):f;return Math.abs(R.getTime()-f.getTime())<=p&&_===h&&E===c&&y===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=$e(Re(q,"userTransactions"),Ve("userId","==",t));if(s.transactionId){const g=$e(Re(q,"userTransactions"),Ve("userId","==",t),Ve("transactionId","==",s.transactionId)),v=await Ke(g);if(!v.empty){const E=v.docs[0];return await gn(be(q,"userTransactions",E.id),{...s,uploadedAt:Ue()}),E.id}}if(s.reference){const g=$e(Re(q,"userTransactions"),Ve("userId","==",t),Ve("reference","==",s.reference)),v=await Ke(g);if(!v.empty){const E=v.docs[0];return await gn(be(q,"userTransactions",E.id),{...s,uploadedAt:Ue()}),E.id}}const a=$e(Re(q,"userTransactions"),Ve("userId","==",t),zs("createdAt","desc"),So(20)),l=await Ke(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=5*60*1e3,w=l.docs.find(g=>{const v=g.data(),E=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,_=Number(v.amount||0),R=nt(v.createdAt);return Math.abs(R.getTime()-f.getTime())<=p&&_===h&&E===c&&y===d});if(w)return await gn(be(q,"userTransactions",w.id),{...s,uploadedAt:Ue()}),w.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Ws(Re(q,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Ue(),uploadedAt:Ue()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=be(q,"userTransactions",e),a=await Qt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await kn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=$e(Re(q,"userTransactions"),Ve("userId","==",t)),r=await Ke(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(p=>p===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[$e(Re(q,"userTransactions"),Ve("merchantUserId","==",t)),$e(Re(q,"userTransactions"),Ve("createdBy","==",t))];for(const o of i)try{const l=(await Ke(o)).docs.filter(c=>{var f,p;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((p=d.receipt)==null?void 0:p.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await kn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=be(q,"transactions",e);if((await Qt(a)).exists())console.log("     transactions   "),await kn(a);else{const c=$e(Re(q,"transactions"),Ve("transactionId","==",e)),d=await Ke(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(p=>kn(p.ref))));const h=$e(Re(q,"transactions"),Ve("originalTransactionId","==",e)),f=await Ke(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(p=>kn(p.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},Qw={async getToday(t){const e=be(q,"dailyStats",t,"today","data"),n=await Qt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=be(q,"dailyStats",t,"today","data");await an(n,{...Ga(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=be(q,"dailyStats",t,"history",e);await an(r,Ga(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},Tq={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Ue()};return(await Ws(Re(q,"installments"),n)).id},listenByUser(t,e){const n=$e(Re(q,"installments"),Ve("userId","==",t));return Ii(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await gn(be(q,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await kn(be(q,"installments",t)),!0}},Au=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:Tq,auditLogService:Eq,dailyReportsArchiveService:kO,dailyStatsService:Qw,merchantWalletService:lo,profileService:Qf,profileServiceExtra:CO,recordAutoTransaction:vq,referralService:Gw,sanitizeFirestoreData:Ga,systemSettingsService:DO,telegramNotifier:_q,transactionService:FE,userDataService:Yr},Symbol.toStringTag,{value:"Module"}));var Tl=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(Tl||{});const Iq=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},pf=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},Sq=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},oG=async(t,e,n,r)=>{try{const s=new Date,i=Iq(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=be(q,"users",t);if(await gn(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},PA=async t=>{try{const e=be(q,"users",t);await gn(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},aG=async t=>{try{const e=be(q,"users",t),n=await Qt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},lG=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},cG=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=Sq(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},uG=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var kc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(kc||(kc={}));class $y extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const bq=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Aq=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:bq(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const w=s(),g=a(h);let v;const E=async()=>(!v&&w in f?v=typeof f[w]=="function"?v=await f[w]():v=f[w]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),y=(A,b)=>{var P,D;if(g){const O=g==null?void 0:g.methods.find(C=>b===C.name);if(O)return O.rtype==="promise"?C=>n.nativePromise(h,b.toString(),C):(C,j)=>n.nativeCallback(h,b.toString(),C,j);if(A)return(P=A[b])===null||P===void 0?void 0:P.bind(A)}else{if(A)return(D=A[b])===null||D===void 0?void 0:D.bind(A);throw new $y(`"${h}" plugin is not implemented on ${w}`,kc.Unimplemented)}},_=A=>{let b;const P=(...D)=>{const O=E().then(C=>{const j=y(C,A);if(j){const se=j(...D);return b=se==null?void 0:se.remove,se}else throw new $y(`"${h}.${A}()" is not implemented on ${w}`,kc.Unimplemented)});return A==="addListener"&&(O.remove=async()=>b()),O};return P.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:A,writable:!1,configurable:!1}),P},R=_("addListener"),k=_("removeListener"),L=(A,b)=>{const P=R({eventName:A},b),D=async()=>{const C=await P;k({eventName:A,callbackId:C},b)},O=new Promise(C=>P.then(()=>C({remove:D})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},O},x=new Proxy({},{get(A,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?L:R;case"removeListener":return k;default:return _(b)}}});return r[h]=x,c.set(h,{name:h,proxy:x,platforms:new Set([...Object.keys(f),...g?[w]:[]])}),x};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=$y,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},xq=t=>t.Capacitor=Aq(t),xe=xq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ig=xe.registerPlugin;class NO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new xe.Exception(e,kc.Unimplemented)}unavailable(e="not available"){return new xe.Exception(e,kc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const CA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),DA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Rq extends NO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=DA(s).trim(),i=DA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=CA(e.key),r=CA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Ig("CapacitorCookies",{web:()=>new Rq});const Pq=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Cq=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},Dq=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,kq=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Cq(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Nq extends NO{async request(e){const n=kq(e,e.webFetchExtra),r=Dq(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Pq(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Ig("CapacitorHttp",{web:()=>new Nq});const ca=Ig("Preferences",{web:()=>Q(()=>import("./web-YwIHwTgV.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),By=Object.freeze(Object.defineProperty({__proto__:null,Preferences:ca},Symbol.toStringTag,{value:"Module"})),Oq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},OO=S.createContext(void 0);function tl(){const t=S.useContext(OO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Lq=({children:t})=>{var x,A;const[e,n]=S.useState(null),[r,s]=S.useState(null),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,d]=S.useState(!0),h=async b=>{var P,D,O,C,j,se,ie,ue,U,V,ee,ae,H,Ne,Te,Oe;try{const Je=be(q,"profiles",b);let Se=!1;try{const Ze=await rO(Je);if(Ze.exists()){const Be=Ze.data(),We={userId:Ze.id,shopId:Be.shopId,role:Be.role,fullName:Be.fullName,phone:Be.phone,shopName:Be.shopName||null,approved:Be.approved,avatarId:Be.avatarId,bridgeLink:Be.bridgeLink||null,bridgeDeviceId:Be.bridgeDeviceId||null,showWithdrawNote:Be.showWithdrawNote!==void 0?!!Be.showWithdrawNote:!0,isReceiptNoteEnabled:Be.isReceiptNoteEnabled!==void 0?!!Be.isReceiptNoteEnabled:!0,smsReadingEnabled:Be.smsReadingEnabled!==void 0?!!Be.smsReadingEnabled:!0,smsAutoRegisterEnabled:Be.smsAutoRegisterEnabled!==void 0?!!Be.smsAutoRegisterEnabled:!1,createdAt:((D=(P=Be.createdAt)==null?void 0:P.toDate)==null?void 0:D.call(P))||new Date,updatedAt:((C=(O=Be.updatedAt)==null?void 0:O.toDate)==null?void 0:C.call(O))||new Date,trialStarted:Be.trialStarted||!1,trialStartDate:(se=(j=Be.trialStartDate)==null?void 0:j.toDate)==null?void 0:se.call(j),trialEndDate:(ue=(ie=Be.trialEndDate)==null?void 0:ie.toDate)==null?void 0:ue.call(ie),trialExpired:Be.trialExpired||!1};s(We),Se=!0,d(!1)}}catch(Ze){console.log("Cache profile not available:",(Ze==null?void 0:Ze.code)||Ze)}try{if(!Se){const Ze=localStorage.getItem(`profile_cache_${b}`);if(Ze){const Be=JSON.parse(Ze);s(Be),Se=!0,d(!1)}}}catch{}if(!Se)for(let Ze=0;Ze<3;Ze++)try{const Be=await Qt(Je);if(Be.exists()){const We=Be.data(),Ot={userId:Be.id,shopId:We.shopId,role:We.role,fullName:We.fullName,phone:We.phone,sim1Number:We.sim1Number||null,sim2Number:We.sim2Number||null,shopName:We.shopName||null,approved:We.approved,avatarId:We.avatarId,bridgeLink:We.bridgeLink||null,bridgeDeviceId:We.bridgeDeviceId||null,showWithdrawNote:We.showWithdrawNote!==void 0?!!We.showWithdrawNote:!0,isReceiptNoteEnabled:We.isReceiptNoteEnabled!==void 0?!!We.isReceiptNoteEnabled:!0,smsReadingEnabled:We.smsReadingEnabled!==void 0?!!We.smsReadingEnabled:!0,smsAutoRegisterEnabled:We.smsAutoRegisterEnabled!==void 0?!!We.smsAutoRegisterEnabled:!1,createdAt:((V=(U=We.createdAt)==null?void 0:U.toDate)==null?void 0:V.call(U))||new Date,updatedAt:((ae=(ee=We.updatedAt)==null?void 0:ee.toDate)==null?void 0:ae.call(ee))||new Date,trialStarted:We.trialStarted||!1,trialStartDate:(Ne=(H=We.trialStartDate)==null?void 0:H.toDate)==null?void 0:Ne.call(H),trialEndDate:(Oe=(Te=We.trialEndDate)==null?void 0:Te.toDate)==null?void 0:Oe.call(Te),trialExpired:We.trialExpired||!1};s(Ot);try{localStorage.setItem(`profile_cache_${Be.id}`,JSON.stringify(Ot))}catch{}Se=!0,d(!1);break}}catch{}return Ii(Je,async Ze=>{var Be,We,Ot,en,On,pr,yn,mr;if(Ze.exists()){const Le=Ze.data(),gt={userId:Ze.id,shopId:Le.shopId,role:Le.role,fullName:Le.fullName,phone:Le.phone,sim1Number:Le.sim1Number||null,sim2Number:Le.sim2Number||null,shopName:Le.shopName||null,approved:Le.approved,avatarId:Le.avatarId,bridgeLink:Le.bridgeLink||null,bridgeDeviceId:Le.bridgeDeviceId||null,showWithdrawNote:Le.showWithdrawNote!==void 0?!!Le.showWithdrawNote:!0,isReceiptNoteEnabled:Le.isReceiptNoteEnabled!==void 0?!!Le.isReceiptNoteEnabled:!0,smsReadingEnabled:Le.smsReadingEnabled!==void 0?!!Le.smsReadingEnabled:!0,smsAutoRegisterEnabled:Le.smsAutoRegisterEnabled!==void 0?!!Le.smsAutoRegisterEnabled:!1,createdAt:((We=(Be=Le.createdAt)==null?void 0:Be.toDate)==null?void 0:We.call(Be))||new Date,updatedAt:((en=(Ot=Le.updatedAt)==null?void 0:Ot.toDate)==null?void 0:en.call(Ot))||new Date,trialStarted:Le.trialStarted||!1,trialStartDate:(pr=(On=Le.trialStartDate)==null?void 0:On.toDate)==null?void 0:pr.call(On),trialEndDate:(mr=(yn=Le.trialEndDate)==null?void 0:yn.toDate)==null?void 0:mr.call(yn),trialExpired:Le.trialExpired||!1};s(gt);try{localStorage.setItem(`profile_cache_${Ze.id}`,JSON.stringify(gt))}catch{}Se||(Se=!0,d(!1))}else if(!Se)try{const Le=await CO.getByUserId(b);if(Le){const gt={userId:b,shopId:Le.shopId,role:Le.role||"user",fullName:Le.fullName||null,phone:Le.phone||null,shopName:Le.shopName||null,approved:Le.approved??!1,avatarId:Le.avatarId||void 0,bridgeLink:Le.bridgeLink||null,bridgeDeviceId:Le.bridgeDeviceId||null,createdAt:Ue(),updatedAt:Ue()};await an(be(q,"profiles",b),gt,{merge:!0}),s({...Le,userId:b,createdAt:Le.createdAt||new Date,updatedAt:Le.updatedAt||new Date})}else await p(b)}catch(Le){console.error("Profile migration/create error:",Le)}finally{Se=!0,d(!1)}},Ze=>{console.error("Profile listener error:",Ze);try{d(!1)}catch{}})}catch(Je){return console.error("Error setting up profile listener:",Je),await p(b),d(!1),()=>{}}},f=async b=>{try{const P=be(q,"users",b.uid);(await Qt(P)).exists()?(await gn(P,{lastLogin:Ue(),updatedAt:Ue()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",b.uid)):(await an(P,{email:b.email||"",displayName:b.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Ue(),updatedAt:Ue(),lastLogin:Ue()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",b.uid))}catch(P){console.error(" ensureAdminUserDoc error:",P)}},p=async(b,P,D,O,C)=>{var j,se;try{console.log("Creating default profile for user:",b);const ie=Gw.generateReferralCode(b);let ue=null;const U={userId:b,shopId:"default-shop",role:"user",fullName:P||" ",phone:D||null,shopName:O||null,approved:!1,referralCode:ie,referredBy:C||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!0,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(U),console.log("Created temporary profile:",U);try{const{doc:V,setDoc:ee,serverTimestamp:ae}=await Q(async()=>{const{doc:Oe,setDoc:Je,serverTimestamp:Se}=await Promise.resolve().then(()=>un);return{doc:Oe,setDoc:Je,serverTimestamp:Se}},void 0,import.meta.url),{db:H}=await Q(async()=>{const{db:Oe}=await Promise.resolve().then(()=>Rt);return{db:Oe}},void 0,import.meta.url),Ne={email:((j=Pt.currentUser)==null?void 0:j.email)||"",displayName:P||" ",phone:D||null,shopName:O||null,isActive:!1,referralCode:ie,referredBy:C||null,createdAt:ae(),lastLogin:null,updatedAt:ae()};if(console.log("Attempting to add user to admin collection with data:",Ne),await ee(V(H,"users",b),Ne,{merge:!0}),console.log(" User successfully added to admin collection:",Ne),C)try{const{query:Oe,collection:Je,where:Se,limit:Ht,getDocs:Ze}=await Q(async()=>{const{query:en,collection:On,where:pr,limit:yn,getDocs:mr}=await Promise.resolve().then(()=>un);return{query:en,collection:On,where:pr,limit:yn,getDocs:mr}},void 0,import.meta.url),{db:Be}=await Q(async()=>{const{db:en}=await Promise.resolve().then(()=>Rt);return{db:en}},void 0,import.meta.url),We=Oe(Je(Be,"users"),Se("referralCode","==",C),Ht(1)),Ot=await Ze(We);Ot.empty?console.log(" Referral code not found in users collection:",C):(ue=Ot.docs[0].id,await Gw.create({referrerId:ue,referredUserId:b,referredUserEmail:((se=Pt.currentUser)==null?void 0:se.email)||"",referralCode:C,status:"completed"}),console.log(" Referral record created successfully for referrer:",ue))}catch(Oe){console.error(" Error creating referral record:",Oe)}const Te=await Qt(V(H,"users",b));Te.exists()?console.log(" User document verified in Firestore:",Te.data()):console.log(" User document not found after creation")}catch(V){console.error(" Error adding user to admin collection:",V)}try{const{addDoc:V,collection:ee,serverTimestamp:ae}=await Q(async()=>{const{addDoc:Je,collection:Se,serverTimestamp:Ht}=await Promise.resolve().then(()=>un);return{addDoc:Je,collection:Se,serverTimestamp:Ht}},void 0,import.meta.url),{db:H}=await Q(async()=>{const{db:Je}=await Promise.resolve().then(()=>Rt);return{db:Je}},void 0,import.meta.url),Te=(await V(ee(H,"shops"),{name:O||" ",ownerId:b,createdAt:ae(),updatedAt:ae(),isActive:!0})).id;await Qf.create({userId:b,shopId:Te,role:"user",fullName:" ",phone:null});try{await Qf.update(b,{referralCode:ie,referredBy:ue||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(Je){console.warn(" Failed to update profile with referral fields:",Je)}const Oe=await Qf.getById(b);Oe&&(s(Oe),console.log("Updated with Firebase profile:",Oe))}catch(V){console.error("Error creating profile:",V),console.log("Using local profile - Firebase unavailable")}}catch(ie){console.error("Error creating default profile:",ie)}};S.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const b=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const P=localStorage.getItem("demoUser"),D=localStorage.getItem("demoProfile");if(P&&D){console.log(" Found demo user in localStorage");try{const C=JSON.parse(P),j=JSON.parse(D);n(C),s(j),clearTimeout(b),d(!1);return}catch(C){console.error("Error parsing demo user data:",C),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const O=_5(Pt,async C=>{if(console.log(" Auth state changed:",{uid:C==null?void 0:C.uid,email:C==null?void 0:C.email,emailVerified:C==null?void 0:C.emailVerified,timestamp:new Date().toISOString()}),n(C),C){console.log(" User authenticated, starting profile hydration for:",C.uid);try{await ca.set({key:"current_user_id",value:C.uid}),console.log(" Synced current_user_id to Native:",C.uid)}catch(j){console.error("Failed to sync user ID to native:",j)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(C.uid),y(),f(C)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await ca.remove({key:"current_user_id"}),await ca.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(b)});return()=>{clearTimeout(b),O()}},[]),S.useEffect(()=>{const b=async()=>{try{await _(),await y()}catch{}};try{window.addEventListener("app:softRefresh",b)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",b)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=i==null?void 0:i.subscription,P=b==null?void 0:b.endDate,D=P!=null&&P.toDate?P.toDate():P?new Date(P):null;let O=null;const C=async()=>{try{const j=new Date;b&&b.isActive===!0&&D&&!isNaN(D.getTime())&&j>D&&(await PA(e.uid),await y())}catch{}};return C(),O=setInterval(C,36e5),()=>{try{clearInterval(O)}catch{}}},[e==null?void 0:e.uid,(x=i==null?void 0:i.subscription)==null?void 0:x.endDate,(A=i==null?void 0:i.subscription)==null?void 0:A.isActive]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=Yr.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{b==null||b()}catch{}}},[e==null?void 0:e.uid]);const w=async(b,P,D,O,C,j)=>{try{const se=(b||"").trim().toLowerCase(),ie=(P||"").trim();console.log(" Attempting to sign up user:",se);const ue=await zS(Pt,se,ie);console.log(" Sign up successful:",ue.user.uid),await p(ue.user.uid,D,O,C,j),await f(ue.user);try{await h(ue.user.uid),await y()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(se){console.error(" Sign up error:",se);let ie="    ";return se.code==="auth/email-already-in-use"?ie="    ":se.code==="auth/weak-password"?ie="   ":se.code==="auth/invalid-email"&&(ie="   "),{error:{...se,message:ie}}}},g=async(b,P)=>{var C;const D=(b||"").trim().toLowerCase(),O=(P||"").trim();try{const j=ae=>ae.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),se=ae=>ae.replace(/[-]/g,H=>String("0123456789"["".indexOf(H)])).replace(/[-]/g,H=>String("0123456789"["".indexOf(H)])),ie=ae=>ae.replace(/[0-9]/g,H=>""[Number(H)]),ue=ae=>se(j(ae));if(console.log(" Attempting to sign in user:",D),D==="test@example.com"&&O==="123456"){console.log(" Demo user login detected");const ae={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},H={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(ae)),localStorage.setItem("demoProfile",JSON.stringify(H)),n(ae),s(H),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let U;const V=[ue(O),j(O),ie(j(O))];let ee=null;for(const ae of V)try{ae!==O&&console.log(" Trying password variant"),U=await m5(Pt,D,ae);break}catch(H){if(ee=H,(H==null?void 0:H.code)!=="auth/wrong-password"&&(H==null?void 0:H.code)!=="auth/invalid-credential")throw H}if(!U)throw ee||new Error("auth/invalid-credential");console.log(" Sign in successful:",U.user.uid);try{if((await Qt(be(q,"deletedUsers",U.user.uid))).exists())return console.log(" User is deleted, signing out"),await WS(Pt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(ae){console.error("Error checking deleted users:",ae)}await f(U.user);try{await h(U.user.uid),await y()}catch{}return{error:null}}catch(j){if(console.error(" Sign in error:",j),D==="test@example.com"&&j.code==="auth/user-not-found"){console.log(" Creating test user...");try{const ue=await zS(Pt,D,O);return console.log(" Test user created:",ue.user.uid),await p(ue.user.uid," ","01000000000"," "),{error:null}}catch(ue){return console.error(" Error creating test user:",ue),{error:ue}}}let se="    ",ie=j==null?void 0:j.code;if(ie==="auth/invalid-credential")try{const ue=await y5(Pt,((C=j==null?void 0:j.customData)==null?void 0:C.email)||"");Array.isArray(ue)&&ue.length===0?(ie="auth/user-not-found",se="     "):(ie="auth/wrong-password",se="   ")}catch{se="      "}else ie==="auth/invalid-email"?se="    ":ie==="auth/user-not-found"?se="     ":ie==="auth/wrong-password"?se="   ":ie==="auth/too-many-requests"&&(se="      ");return{error:{...j,code:ie,message:se}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await WS(Pt);try{await ca.remove({key:"selected_wallet_id"}),await ca.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const D=(()=>{try{const O=typeof window<"u"?window:null,C=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),j=typeof window<"u"&&window.location.protocol==="file:",se=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return C||j||se||typeof import.meta<"u"&&Oq&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(D)}catch{window.location.href=D}}catch(b){console.error("Sign out error:",b)}},E=async b=>{try{return await p5(Pt,b),{error:null}}catch(P){console.error("Reset password error:",P);let D="        ";return P.code==="auth/user-not-found"?D="     ":P.code==="auth/invalid-email"&&(D="   "),{error:{...P,message:D}}}},y=async()=>{var b,P;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{const D=be(q,"users",e.uid);try{const C=await Qt(D);if(C.exists()){const j=C.data();o(j);const se=((b=j==null?void 0:j.branchPackage)==null?void 0:b.status)==="active";let ie=!1;se?ie=!0:ie=pf(j.subscription),l(ie)}}catch{}return Ii(D,async C=>{var j,se,ie,ue,U,V,ee,ae;if(C.exists()){const H=C.data();o(H),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:H.subscription,subscriptionExists:!!H.subscription,planType:(j=H.subscription)==null?void 0:j.planType,isActive:(se=H.subscription)==null?void 0:se.isActive,startDate:(ie=H.subscription)==null?void 0:ie.startDate,endDate:(ue=H.subscription)==null?void 0:ue.endDate,activatedBy:(U=H.subscription)==null?void 0:U.activatedBy,activatedAt:(V=H.subscription)==null?void 0:V.activatedAt,isOnFreeTrial:H.isOnFreeTrial,freeTrialEndDate:H.freeTrialEndDate,branchPackageStatus:(ee=H==null?void 0:H.branchPackage)==null?void 0:ee.status});const Ne=((ae=H==null?void 0:H.branchPackage)==null?void 0:ae.status)==="active";let Te=!1;Ne?(console.log(" Branch package is active, granting access"),Te=!0):Te=pf(H.subscription),l(Te),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:Te,isOnFreeTrial:H.isOnFreeTrial,hasActiveBranchPackage:Ne,reason:Ne?"Branch package active":H.subscription?H.subscription.isActive?H.subscription.planType==="lifetime"?"Lifetime plan":H.subscription.endDate?new Date>new Date(H.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const Oe=H.subscription,Je=Oe==null?void 0:Oe.planType,Se=Oe==null?void 0:Oe.endDate,Ht=Se!=null&&Se.toDate?Se.toDate():Se?new Date(Se):null,Ze=new Date;Oe&&Oe.isActive===!0&&Ht&&!isNaN(Ht.getTime())&&Ze>Ht&&(await PA(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:Je,endDate:Ht}))}catch(Oe){console.warn("Failed to auto-deactivate expired subscription:",Oe)}}},C=>{console.error(" Subscription listener error:",C),(async()=>{var j;try{const se=await Qt(D);if(se.exists()){const ie=se.data();o(ie);const ue=((j=ie==null?void 0:ie.branchPackage)==null?void 0:j.status)==="active";let U=!1;ue?U=!0:U=pf(ie.subscription),l(U)}}catch{}})()})}catch(D){console.error("Error setting up subscription listener:",D);try{const O=await Qt(be(q,"users",e.uid));if(O.exists()){const C=O.data();o(C);const j=((P=C==null?void 0:C.branchPackage)==null?void 0:P.status)==="active";let se=!1;j?se=!0:se=pf(C.subscription),l(se)}}catch{}}},_=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await y()}catch(b){console.error("Error refreshing profile:",b)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:w,signIn:g,signOut:v,resetPassword:E,updateUserProfile:async b=>{if(e)try{const P={updatedAt:Ue()};if(b.fullName!==void 0&&(P.fullName=b.fullName),b.phone!==void 0&&(P.phone=b.phone),b.sim1Number!==void 0){const D=(b.sim1Number||"").trim();P.sim1Number=D.length?D:null}if(b.sim2Number!==void 0){const D=(b.sim2Number||"").trim();P.sim2Number=D.length?D:null}if(b.bridgeLink!==void 0){const D=(b.bridgeLink||"").trim();P.bridgeLink=D.length?D:null}if(b.bridgeDeviceId!==void 0){const D=(b.bridgeDeviceId||"").trim();P.bridgeDeviceId=D.length?D:null}b.showWithdrawNote!==void 0&&(P.showWithdrawNote=!!b.showWithdrawNote),b.isReceiptNoteEnabled!==void 0&&(P.isReceiptNoteEnabled=!!b.isReceiptNoteEnabled),b.smsReadingEnabled!==void 0&&(P.smsReadingEnabled=!!b.smsReadingEnabled),b.smsAutoRegisterEnabled!==void 0&&(P.smsAutoRegisterEnabled=!!b.smsAutoRegisterEnabled),await gn(be(q,"profiles",e.uid),P),await h(e.uid)}catch(P){console.error("Error updating user profile:",P)}},updateAvatarId:async b=>{if(e)try{await gn(be(q,"profiles",e.uid),{avatarId:b,updatedAt:Ue()}),await h(e.uid)}catch(P){console.error("Error updating avatarId:",P)}},refreshProfile:_,checkSubscriptionStatus:y};return I.jsx(OO.Provider,{value:L,children:t})};function Vq(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Sg="Checkbox",[Mq]=Vc(Sg),[Fq,UE]=Mq(Sg);function Uq(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,p]=t0({prop:n,defaultProp:s??!1,onChange:l,caller:Sg}),[w,g]=S.useState(null),[v,E]=S.useState(null),y=S.useRef(!1),_=w?!!o||!!w.closest("form"):!0,R={checked:f,disabled:i,setChecked:p,control:w,setControl:g,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:bo(s)?!1:s,isFormControl:_,bubbleInput:v,setBubbleInput:E};return I.jsx(Fq,{scope:e,...R,children:jq(h)?h(R):r})}var LO="CheckboxTrigger",VO=S.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:w}=UE(LO,t),g=Un(s,d),v=S.useRef(l);return S.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const y=()=>h(v.current);return E.addEventListener("reset",y),()=>E.removeEventListener("reset",y)}},[i,h]),I.jsx(Xt.button,{type:"button",role:"checkbox","aria-checked":bo(l)?"mixed":l,"aria-required":c,"data-state":$O(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:Ct(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Ct(n,E=>{h(y=>bo(y)?!0:!y),w&&p&&(f.current=E.isPropagationStopped(),f.current||E.stopPropagation())})})});VO.displayName=LO;var jE=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return I.jsx(Uq,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>I.jsxs(I.Fragment,{children:[I.jsx(VO,{...h,ref:e,__scopeCheckbox:n}),f&&I.jsx(jO,{__scopeCheckbox:n})]})})});jE.displayName=Sg;var MO="CheckboxIndicator",FO=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=UE(MO,n);return I.jsx(Xa,{present:r||bo(i.checked)||i.checked===!0,children:I.jsx(Xt.span,{"data-state":$O(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});FO.displayName=MO;var UO="CheckboxBubbleInput",jO=S.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:p}=UE(UO,t),w=Un(n,p),g=Vq(i),v=X1(r);S.useEffect(()=>{const y=f;if(!y)return;const _=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(_,"checked").set,L=!s.current;if(g!==i&&k){const x=new Event("click",{bubbles:L});y.indeterminate=bo(i),k.call(y,bo(i)?!1:i),y.dispatchEvent(x)}},[f,g,i,s]);const E=S.useRef(bo(i)?!1:i);return I.jsx(Xt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:w,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jO.displayName=UO;function jq(t){return typeof t=="function"}function bo(t){return t==="indeterminate"}function $O(t){return bo(t)?"indeterminate":t?"checked":"unchecked"}const BO=S.forwardRef(({className:t,...e},n)=>I.jsx(jE,{ref:n,className:jn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:I.jsx(FO,{className:jn("flex items-center justify-center text-current"),children:I.jsx(bF,{className:"h-4 w-4"})})}));BO.displayName=jE.displayName;const dm=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(!0),{signIn:d,user:h,checkSubscriptionStatus:f,loading:p}=tl(),w=$c();S.useEffect(()=>{try{h&&!p&&w("/user/dashboard")}catch{}},[h,p,w]),S.useEffect(()=>{try{const y=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;y&&e(y)}catch{}try{const y=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;y==="true"?c(!0):y==="false"&&c(!1)}catch{}(async()=>{var y,_;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const R=await((_=(y=navigator.credentials).get)==null?void 0:_.call(y,{password:!0,mediation:"optional"}));R&&R.type==="password"&&(R.id&&e(R.id),R.password&&r(R.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const R=sessionStorage.getItem("cashy:rememberedPassword");R&&!n&&r(R)}catch{}}catch{}})()},[]);const g=async y=>{if(y.preventDefault(),o){Hn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Hn.error("   .      .");return}const _=(t||"").trim().toLowerCase(),R=(n||"").trim();if(console.log("    :",{email:_,password:"***"}),!t||!n){Hn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(_)){Hn.error("    ");return}a(!0);try{try{await w5(Pt,l?wD:I5);try{window.localStorage.setItem("cashy:rememberLogin",l?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:k}=await d(_,R);if(console.log(" SignIn result:",{error:k}),k){console.error("    :",k);const L=k==null?void 0:k.code;L==="auth/user-not-found"?Hn.error("     "):L==="auth/wrong-password"?Hn.error("   "):L==="auth/invalid-credential"?Hn.error("      "):L==="auth/too-many-requests"?Hn.error("      "):Hn.error((k==null?void 0:k.message)||"    ")}else{console.log("    !"),Hn.success("   !");try{if(l&&navigator.credentials&&window.PasswordCredential){const L=new window.PasswordCredential({id:_,name:_,password:R});await navigator.credentials.store(L)}if(l)try{sessionStorage.setItem("cashy:rememberedPassword",R)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(k){console.error("   :",k),Hn.error("   ")}finally{a(!1)}},v=y=>{if(o){y.preventDefault(),y.stopPropagation(),Hn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){y.preventDefault(),y.stopPropagation(),Hn.error("   .      .");return}t||Hn.error("   "),n||Hn.error("   ");const _=(t||"").trim().toLowerCase();_&&!/^\S+@\S+\.\S+$/.test(_)&&Hn.error("    ")},E=()=>{w("/user/forgot-password")};return S.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const y=document.documentElement,_=document.body,R=y.style.overflow,k=_.style.overflow,L=y.style.overscrollBehaviorY,x=_.style.overscrollBehaviorY;return y.style.overflow="hidden",_.style.overflow="hidden",y.style.overscrollBehaviorY="none",_.style.overscrollBehaviorY="none",()=>{y.style.overflow=R||"",_.style.overflow=k||"",y.style.overscrollBehaviorY=L||"",_.style.overscrollBehaviorY=x||""}},[]),I.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:I.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:I.jsx(FF,{className:"w-10 h-10 text-white"})}),I.jsx("div",{className:"flex items-center justify-center mb-2",children:I.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),I.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),I.jsx("p",{className:"text-white/80",children:"    "})]}),I.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[I.jsxs("form",{onSubmit:g,className:"space-y-6",autoComplete:"on",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),I.jsxs("div",{className:"relative",children:[I.jsx(UI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),I.jsx(lw,{id:"username",type:"email",placeholder:"  ",value:t,onChange:y=>{const _=y.target.value;e(_);try{window.localStorage.setItem("cashy:lastEmail",_)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),I.jsxs("div",{className:"relative",children:[I.jsx(kF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),I.jsx(lw,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:y=>r(y.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),I.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?I.jsx(RF,{className:"w-5 h-5"}):I.jsx(PF,{className:"w-5 h-5"})})]}),I.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[I.jsx(BO,{id:"rememberLogin",checked:l,onCheckedChange:y=>c(!!y)}),I.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),I.jsx("div",{className:"flex justify-end",children:I.jsxs(Ki,{type:"button",variant:"ghost",size:"sm",onClick:E,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[I.jsx(UI,{className:"w-4 h-4 ml-1"}),"  "]})}),I.jsx("button",{type:"submit",onClick:v,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?I.jsxs("div",{className:"flex items-center justify-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):I.jsxs("div",{className:"flex items-center justify-center",children:[I.jsx(TF,{className:"w-5 h-5 ml-2"})," "]})})]}),I.jsxs("div",{className:"mt-6 text-center space-y-3",children:[I.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",I.jsx(D6,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),I.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",I.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",I.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),I.jsx("div",{className:"mt-6 text-center",children:I.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},$q=Object.freeze(Object.defineProperty({__proto__:null,default:dm},Symbol.toStringTag,{value:"Module"})),Bq=()=>{const t=$c(),e=Ys(),{signOut:n,user:r,userSubscription:s}=tl(),{toast:i}=Z_(),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=[{id:"home",label:"",icon:DF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:CF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:IF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:jI,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:EF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:hy,path:"/transactions"},{id:"settings",label:"",icon:$I,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:SF,action:()=>{var E;a(!1);const v=(E=s==null?void 0:s.subscription)==null?void 0:E.planType;if(v===Tl.TAHWEELA||v===Tl.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:UF,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:xF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:VF,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:hy,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:MF,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:jI,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:AF,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:NF,action:()=>{a(!1);const E=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(E);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:FI,action:async()=>{a(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}].filter(v=>v.id!=="add-wallet"),p=[{id:"shop-expenses-settings",label:" ",icon:hy,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:$I,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:FI,action:async()=>{c(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],w=(v,E,y,_)=>{var A;const k=((A=s==null?void 0:s.subscription)==null?void 0:A.planType)===Tl.TAHWEELA,L=b=>["/user/dashboard","/profile-settings"].includes(b),x=b=>b==="debts";if(y){if(k&&!x(_)&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}y()}else if(E&&v==="/add"){if(k){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!E){if(k&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}t(v)}},g=v=>e.pathname===v;return I.jsxs("div",{className:"mobile-bottom-nav",children:[o&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),I.jsx("div",{className:"floating-actions-container",children:f.map((v,E)=>I.jsxs("div",{className:"floating-action-button",onClick:()=>{var _;if(((_=s==null?void 0:s.subscription)==null?void 0:_.planType)===Tl.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}v.action()},style:{"--action-color":v.color,"--animation-delay":`${E*.1}s`},children:[I.jsx("div",{className:"floating-action-icon",style:{backgroundColor:v.color},children:I.jsx(v.icon,{className:"action-icon"})}),I.jsx("span",{className:"floating-action-label",children:v.label})]},v.id))})]}),l&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),I.jsx("div",{className:"floating-actions-container",children:p.map((v,E)=>I.jsxs("div",{className:"floating-action-button",onClick:()=>{var R;const y=(R=s==null?void 0:s.subscription)==null?void 0:R.planType,_=new Set(["logout","profile-settings"]);if(y===Tl.TAHWEELA&&!_.has(v.id)){i({title:"  ",description:"      .",variant:"destructive"});return}v.action()},style:{"--action-color":v.color,"--animation-delay":`${E*.1}s`},children:[I.jsx("div",{className:"floating-action-icon",style:{backgroundColor:v.color},children:I.jsx(v.icon,{className:"action-icon"})}),I.jsx("span",{className:"floating-action-label",children:v.label})]},v.id))})]}),I.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(v=>{const E=v.icon,y=g(v.path);return I.jsxs("button",{onClick:()=>w(v.path,v.isSpecial,v.action,v.id),className:`mobile-nav-item ${y?"active":""} ${v.isSpecial?"special":""}`,type:"button","aria-label":v.label,children:[I.jsx("div",{className:`nav-icon-container ${v.isSpecial?"special-icon":""} ${v.isSpecial&&v.id==="add"&&o?"special-open":""}`,children:I.jsx(E,{className:`nav-icon ${y?"active-icon":""} ${v.isSpecial?"special-icon-svg":""} ${v.isSpecial&&v.id==="add"&&o?"rotated":""} ${v.isSpecial&&v.id==="settings"&&l?"rotated":""}`})}),!v.isSpecial&&I.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:v.label})]},v.id)})})]})};var Ax,xx;const ga=(xx=(Ax=import.meta)==null?void 0:Ax.env)==null?void 0:xx.VITE_ANDROID_DOWNLOAD_URL;var Rx,Px;const ya=(Px=(Rx=import.meta)==null?void 0:Rx.env)==null?void 0:Px.VITE_PC_DOWNLOAD_URL;var Cx,Dx;const va=(Dx=(Cx=import.meta)==null?void 0:Cx.env)==null?void 0:Dx.VITE_PC32_DOWNLOAD_URL;var kx,Nx;const wa=(Nx=(kx=import.meta)==null?void 0:kx.env)==null?void 0:Nx.VITE_ANDROID_VERSION;var Ox,Lx;const _a=(Lx=(Ox=import.meta)==null?void 0:Ox.env)==null?void 0:Lx.VITE_PC_VERSION;var Vx,Mx;const Ea=(Mx=(Vx=import.meta)==null?void 0:Vx.env)==null?void 0:Mx.VITE_PC32_VERSION;function dn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function zq(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Mo=["siteContent","appDownloads"],hm=["siteContent","desktop_updates"],fm=["siteContent","android_updates"],Qd="appDownloadsCache";function Wq(){try{const e=localStorage.getItem(Qd);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||ga,pcUrl:(n==null?void 0:n.pcUrl)||ya,pc32Url:(n==null?void 0:n.pc32Url)||va,androidVersion:(n==null?void 0:n.androidVersion)||wa,pcVersion:(n==null?void 0:n.pcVersion)||_a,pc32Version:(n==null?void 0:n.pc32Version)||Ea,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=dn(r.pcUrl)),r.androidVersion||(r.androidVersion=dn(r.androidUrl)),r.pc32Version||(r.pc32Version=dn(r.pc32Url)),r}}catch{}const t={androidUrl:ga,pcUrl:ya,pc32Url:va,androidVersion:wa,pcVersion:_a,pc32Version:Ea};return t.pcVersion||(t.pcVersion=dn(t.pcUrl)),t.androidVersion||(t.androidVersion=dn(t.androidUrl)),t.pc32Version||(t.pc32Version=dn(t.pc32Url)),t}async function qq(){try{const t=await Qt(be(q,Mo[0],Mo[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(Qd,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||ga,pcUrl:(n==null?void 0:n.pcUrl)||ya,pc32Url:(n==null?void 0:n.pc32Url)||va,androidVersion:(n==null?void 0:n.androidVersion)||wa,pcVersion:(n==null?void 0:n.pcVersion)||_a,pc32Version:(n==null?void 0:n.pc32Version)||Ea,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=dn(r.pcUrl)),r.androidVersion||(r.androidVersion=dn(r.androidUrl)),r.pc32Version||(r.pc32Version=dn(r.pc32Url)),r}const e={androidUrl:ga,pcUrl:ya,pc32Url:va,androidVersion:wa,pcVersion:_a,pc32Version:Ea};return e.pcVersion||(e.pcVersion=dn(e.pcUrl)),e.androidVersion||(e.androidVersion=dn(e.androidUrl)),e.pc32Version||(e.pc32Version=dn(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(Qd);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||ga,pcUrl:(i==null?void 0:i.pcUrl)||ya,pc32Url:(i==null?void 0:i.pc32Url)||va,androidVersion:(i==null?void 0:i.androidVersion)||wa,pcVersion:(i==null?void 0:i.pcVersion)||_a,pc32Version:(i==null?void 0:i.pc32Version)||Ea,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=dn(o.pcUrl)),o.androidVersion||(o.androidVersion=dn(o.androidUrl)),o.pc32Version||(o.pc32Version=dn(o.pc32Url)),o}}catch{}const r={androidUrl:ga,pcUrl:ya,pc32Url:va,androidVersion:wa,pcVersion:_a,pc32Version:Ea};return r.pcVersion||(r.pcVersion=dn(r.pcUrl)),r.androidVersion||(r.androidVersion=dn(r.androidUrl)),r.pc32Version||(r.pc32Version=dn(r.pc32Url)),r}}function Hq(t){try{const e=be(q,Mo[0],Mo[1]);return Ii(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||ga,pcUrl:(s==null?void 0:s.pcUrl)||ya,pc32Url:(s==null?void 0:s.pc32Url)||va,androidVersion:(s==null?void 0:s.androidVersion)||wa,pcVersion:(s==null?void 0:s.pcVersion)||_a,pc32Version:(s==null?void 0:s.pc32Version)||Ea,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=dn(i.pcUrl)),i.androidVersion||(i.androidVersion=dn(i.androidUrl)),i.pc32Version||(i.pc32Version=dn(i.pc32Url));try{localStorage.setItem(Qd,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(Qd);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function Kq(t,e,n,r,s,i=12e4){const o=RO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=aq(o,l);return new Promise((d,h)=>{const f=iq(c,t);let p=!1;const w=setTimeout(()=>{p=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",g=>{const v=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(v)},g=>{clearTimeout(w),h(g)},async()=>{try{if(clearTimeout(w),p)return;const g=await oq(c),v={updatedAt:Ue(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=g,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=g,r&&(v.pcVersion=r)):(v.pc32Url=g,r&&(v.pc32Version=r));const E=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=an(be(q,Mo[0],Mo[1]),v,{merge:!0});let _=!1;const R=new Promise(k=>setTimeout(()=>{_=!0,k()},E));try{await Promise.race([y,R])}catch(k){console.warn(" Firestore write error, proceeding with URL only:",k)}_&&console.warn(" Firestore update timed out;             ."),d(g)}catch(g){h(g)}})})}async function Gq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ue(),updatedBy:e||"admin"};await an(be(q,Mo[0],Mo[1]),r,{merge:!0})}async function Qq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ue(),updatedBy:e||"admin"};await an(be(q,hm[0],hm[1]),r,{merge:!0})}function zO(t){try{const e=be(q,hm[0],hm[1]);return Ii(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function WO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function Yq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Ue(),updatedBy:e||"admin"};await an(be(q,fm[0],fm[1]),r,{merge:!0})}function Jq(t){try{const e=be(q,fm[0],fm[1]);return Ii(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const Xq=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:qq,getCachedOrEnvAppDownloads:Wq,listenAndroidUpdates:Jq,listenAppDownloads:Hq,listenDesktopUpdates:zO,resolveDownloadUrl:zq,selectDesktopUrl:WO,setAndroidUpdateInfo:Yq,setAppDownloadLinks:Gq,setDesktopUpdateInfo:Qq,uploadAppBinaryResumable:Kq},Symbol.toStringTag,{value:"Module"})),Zq=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=$.useState(!1),[s,i]=$.useState(!1),[o,a]=$.useState(!1),[l,c]=$.useState(0),[d,h]=$.useState(""),[f,p]=$.useState(!1),w=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(k){console.warn("failed to minimize",k)}},g=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(k){console.warn("failed to close",k)}},v=async()=>{if(!f){p(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>p(!1),600);return}try{window.location.reload()}catch{}}catch(k){console.warn("failed to soft refresh",k),p(!1)}}};if($.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(k=>{const L=(k==null?void 0:k.percent)==null?0:Number(k.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(k){console.warn("update init failed",k)}},[e,t]),$.useEffect(()=>{const k=zO(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const A=WO({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(A)}});return()=>{try{k()}catch{}}},[]),!e)return null;const[y,_]=$.useState(!1),R=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),_(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),_(!0))}catch(k){console.warn("window toggle failed",k)}};return I.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[I.jsx("button",{type:"button","aria-label":"",title:"",onClick:g,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:I.jsx(i0,{className:"w-5 h-5"})}),I.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:I.jsx(R1,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),I.jsx("button",{type:"button","aria-label":"",title:"",onClick:w,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:I.jsx(OF,{className:"w-5 h-5"})}),I.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:R,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:I.jsx(LF,{className:"w-5 h-5"})})]})},Yw=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=S.useState(`${n}logo.svg`),[i,o]=S.useState(0),a=S.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return I.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:I.jsxs("div",{className:"flex flex-col items-center justify-center",children:[I.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),I.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},kA=Ig("AppLauncher",{web:()=>Q(()=>import("./web-C6P_AGkP.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function eH(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{xe&&xe.getPlatform()!=="web"&&(kA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{xe&&xe.getPlatform()!=="web"&&kA.openUrl({url:n})}catch{}}}function qO(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function tH(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?qO(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function dG(t,e,n){const r=qO(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function nH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function rH(t){const e=nH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function hG(t,e,n){const r=tH(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=rH(t||e);eH(r,s)}async function sH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function $E(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function iH(t,e,n=0){const r=$E(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const Ll=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:$E,calculateProfit:iH},Symbol.toStringTag,{value:"Module"})),oH=t=>t==="withdraw"||t==="receive"?"receive":"send",aH=async t=>{if(!t)return null;const e=$e(Re(q,"transactions"),Ve("reference","==",t),So(1)),n=await Ke(e);return n.empty?null:n.docs[0].id},lH=async t=>{var e;try{const n=await ca.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return hH(t||((e=Pt.currentUser)==null?void 0:e.uid)||"")||null},zy=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await lo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},HO=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await aH(t.reference);if(e)return{id:e,duplicate:!0};const n=oH(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await zy(t.receiverMsisdn);if(o||(o=await zy(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await zy(a))}r=o||await lH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await FE.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await sH(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=$E(t.amount,n);await Yr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},Yf=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},KO=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Pt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(w=>Yf(w)).filter(w=>!!w):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=w=>String(w||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(w=>({walletId:String((w==null?void 0:w.id)||""),msisdn:Yf(String((w==null?void 0:w.phone)||(w==null?void 0:w.msisdn)||"")),isDefault:!!(w!=null&&w.isDefault)})).filter(w=>w.walletId&&w.msisdn):[],h=(await lo.getByMerchantId(r)||[]).map(w=>({walletId:String((w==null?void 0:w.id)||""),msisdn:Yf(String((w==null?void 0:w.msisdn)||"")),isDefault:!!(w!=null&&w.isDefault)})).filter(w=>w.walletId&&w.msisdn),f=[...c,...h],p=new Map;for(const w of s){const g=l(w);for(const v of f){const E=l(v.msisdn);if(v.msisdn===w){p.set(v.walletId,v.msisdn);continue}if(E.slice(-5)===g.slice(-5)){p.set(v.walletId,v.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",p.size)}catch{}if(p.size===1){const[w,g]=Array.from(p.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:w,msisdn:g})}catch{}return{walletId:w,msisdn:g}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function cH(t,e){try{const n=i=>Yf(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function uH(t){var e;try{const n=t.userId||((e=Pt.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await KO(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");return a&&o[a]&&o[a].walletId?{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")}:l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId?{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")}:null}catch{return null}}function dH(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Pt.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const hH=t=>{var e,n;try{const r=t||((e=Pt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function GO(){return typeof window>"u"?()=>{}:()=>{}}const Vl=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:dH,detectWalletFromSim:cH,identifyWalletBySim:KO,initMobileSmsBridge:GO,processMobileTransactionNotification:HO,resolveWalletBySimOrSlot:uH},Symbol.toStringTag,{value:"Module"})),fH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},pH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},mH=()=>{var t,e;try{const n=((t=Pt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},gH=()=>{var t;try{const e=((t=Pt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Wy=async(t,e)=>{var _;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=fH(n),d=pH(n);if(!c||c<=0)return;const h=((_=Pt.currentUser)==null?void 0:_.uid)||"",f=mH()||void 0,p=gH()||"",w=f||"default-line";if(!h||!f||!p)return;const g=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,v=`VF-${btoa(unescape(encodeURIComponent(g))).slice(0,24)}`,E=a?"withdraw":l?"transfer":"withdraw",y={type:E,amount:c,provider:"vodafone_cash",shopId:p,lineId:w,walletId:f,senderMsisdn:E==="transfer"&&d||void 0,receiverMsisdn:E==="withdraw"&&d||void 0,reference:v,createdBy:h,merchantUserId:h,note:"  "};try{await HO(y)}catch{}},ds={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Yr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Yr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Yr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=ds.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=ds.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Yr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=ds.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=ds.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=ds.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Yr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},yH=ds,fG=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:yH,reportsService:ds},Symbol.toStringTag,{value:"Module"})),pm={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=be(q,"walletLimits",t),s={updatedAt:Ue(),ownerId:(n=Pt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await an(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=be(q,"walletLimits",t);try{const s=await Qt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||_t.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:_t.now()};return await an(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Ue(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=be(q,"walletLimits",t);return await an(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Ue(),updatedAt:Ue(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=be(q,"walletLimits",t);return await an(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Ue(),updatedAt:Ue(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=be(q,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Ue()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await an(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=be(q,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:Ue()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await an(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=be(q,"walletLimits",t);return await an(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Ue(),lastMonthlyReset:Ue(),updatedAt:Ue(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},Jw=Object.freeze(Object.defineProperty({__proto__:null,default:pm,walletDailyLimitsService:pm},Symbol.toStringTag,{value:"Module"}));class vH{constructor(){Lg(this,"intervalId",null);Lg(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Pt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await Qw.getToday(n);await Qw.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await ds.syncReportsDataFromFirebase(e);const n=ds.getReportsData(e);if(!n.lastDailyResetDate||!ds.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Yr.getUserTransactions(e),l=y=>{const _=String(y||"").toLowerCase();return["completed","confirmed","success"].includes(_)?"completed":["failed","error"].includes(_)?"failed":["cancelled","canceled"].includes(_)?"cancelled":"pending"},c=(a||[]).filter(y=>{var R,k;const _=(R=y==null?void 0:y.createdAt)!=null&&R.toDate?y.createdAt.toDate():(y==null?void 0:y.createdAt)instanceof Date?y.createdAt:new Date(y==null?void 0:y.createdAt);return((k=_==null?void 0:_.toDateString)==null?void 0:k.call(_))===o&&l(y==null?void 0:y.status)==="completed"}),d=c.length,h=c.reduce((y,_)=>y+Number(_.amount||0),0),f=y=>{const _=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return _==="withdraw"||_==="withdrawal"||_==="receive"},p=y=>{const _=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return _==="send"||_==="transfer"},w=c.filter(f).reduce((y,_)=>{const R=_.withdrawnAmount!==void 0?Number(_.withdrawnAmount):Number(_.amount||0);return y+R},0),g=c.filter(p).reduce((y,_)=>{const R=_.sentAmount!==void 0?Number(_.sentAmount):Number(_.amount||0);return y+R},0),v=c.reduce((y,_)=>y+Number(ds.calculateTransactionProfit(_)||0),0),E=new Date(i).toISOString().slice(0,10);await kO.add({userId:e,reportDate:E,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(w.toFixed(2)),totalSent:Number(g.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",E)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await lo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await pm.resetDailyLimits(i)}catch{}if(r)try{await pm.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const NA=new vH,qy=768;function wH(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${qy-1}px)`),r=()=>{e(window.innerWidth<qy)};return n.addEventListener("change",r),e(window.innerWidth<qy),()=>n.removeEventListener("change",r)},[]),!!t}function _H(){const[t,e]=S.useState("default"),[n,r]=S.useState(!1);return S.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const QO=S.createContext(void 0);function EH({children:t}){const{profile:e,user:n,loading:r}=tl(),[s,i]=S.useState(null),[o,a]=S.useState(null),[l,c]=S.useState(!0);S.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),S.useEffect(()=>{const h=()=>{const p=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const w=localStorage.getItem(p);i(w||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=p=>{const w=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!p.key||p.key!==w))try{const g=localStorage.getItem(w);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return I.jsx(QO.Provider,{value:d,children:t})}function TH(){const t=S.useContext(QO);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var Hy="focusScope.autoFocusOnMount",Ky="focusScope.autoFocusOnUnmount",OA={bubbles:!1,cancelable:!0},IH="FocusScope",YO=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=qs(s),d=qs(i),h=S.useRef(null),f=Un(e,g=>l(g)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(_){if(p.paused||!a)return;const R=_.target;a.contains(R)?h.current=R:Wi(h.current,{select:!0})},v=function(_){if(p.paused||!a)return;const R=_.relatedTarget;R!==null&&(a.contains(R)||Wi(h.current,{select:!0}))},E=function(_){if(document.activeElement===document.body)for(const k of _)k.removedNodes.length>0&&Wi(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const y=new MutationObserver(E);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,p.paused]),S.useEffect(()=>{if(a){VA.add(p);const g=document.activeElement;if(!a.contains(g)){const E=new CustomEvent(Hy,OA);a.addEventListener(Hy,c),a.dispatchEvent(E),E.defaultPrevented||(SH(PH(JO(a)),{select:!0}),document.activeElement===g&&Wi(a))}return()=>{a.removeEventListener(Hy,c),setTimeout(()=>{const E=new CustomEvent(Ky,OA);a.addEventListener(Ky,d),a.dispatchEvent(E),E.defaultPrevented||Wi(g??document.body,{select:!0}),a.removeEventListener(Ky,d),VA.remove(p)},0)}}},[a,c,d,p]);const w=S.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,E=document.activeElement;if(v&&E){const y=g.currentTarget,[_,R]=bH(y);_&&R?!g.shiftKey&&E===R?(g.preventDefault(),n&&Wi(_,{select:!0})):g.shiftKey&&E===_&&(g.preventDefault(),n&&Wi(R,{select:!0})):E===y&&g.preventDefault()}},[n,r,p.paused]);return I.jsx(Xt.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});YO.displayName=IH;function SH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Wi(r,{select:e}),document.activeElement!==n)return}function bH(t){const e=JO(t),n=LA(e,t),r=LA(e.reverse(),t);return[n,r]}function JO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function LA(t,e){for(const n of t)if(!AH(n,{upTo:e}))return n}function AH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function xH(t){return t instanceof HTMLInputElement&&"select"in t}function Wi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&xH(t)&&e&&t.select()}}var VA=RH();function RH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=MA(t,e),t.unshift(e)},remove(e){var n;t=MA(t,e),(n=t[0])==null||n.resume()}}}function MA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function PH(t){return t.filter(e=>e.tagName!=="A")}var Gy=0;function CH(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??FA()),document.body.insertAdjacentElement("beforeend",t[1]??FA()),Gy++,()=>{Gy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gy--}},[])}function FA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ls=function(){return Ls=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ls.apply(this,arguments)};function XO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function DH(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Jf="right-scroll-bar-position",Xf="width-before-scroll-bar",kH="with-scroll-bars-hidden",NH="--removed-body-scroll-bar-size";function Qy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function OH(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var LH=typeof window<"u"?S.useLayoutEffect:S.useEffect,UA=new WeakMap;function VH(t,e){var n=OH(null,function(r){return t.forEach(function(s){return Qy(s,r)})});return LH(function(){var r=UA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Qy(a,null)}),i.forEach(function(a){s.has(a)||Qy(a,o)})}UA.set(n,t)},[t]),n}function MH(t){return t}function FH(t,e){e===void 0&&(e=MH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function UH(t){t===void 0&&(t={});var e=FH(null);return e.options=Ls({async:!0,ssr:!1},t),e}var ZO=function(t){var e=t.sideCar,n=XO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Ls({},n))};ZO.isSideCarExport=!0;function jH(t,e){return t.useMedium(e),ZO}var e2=UH(),Yy=function(){},bg=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:Yy,onWheelCapture:Yy,onTouchMoveCapture:Yy}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,w=t.noIsolation,g=t.inert,v=t.allowPinchZoom,E=t.as,y=E===void 0?"div":E,_=t.gapMode,R=XO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,L=VH([n,e]),x=Ls(Ls({},R),s);return S.createElement(S.Fragment,null,d&&S.createElement(k,{sideCar:e2,removeScrollBar:c,shards:h,noRelative:p,noIsolation:w,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:_}),o?S.cloneElement(S.Children.only(a),Ls(Ls({},x),{ref:L})):S.createElement(y,Ls({},x,{className:l,ref:L}),a))});bg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bg.classNames={fullWidth:Xf,zeroRight:Jf};var $H=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function BH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$H();return e&&t.setAttribute("nonce",e),t}function zH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function WH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var qH=function(){var t=0,e=null;return{add:function(n){t==0&&(e=BH())&&(zH(e,n),WH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},HH=function(){var t=qH();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},t2=function(){var t=HH(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},KH={left:0,top:0,right:0,gap:0},Jy=function(t){return parseInt(t||"",10)||0},GH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Jy(n),Jy(r),Jy(s)]},QH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return KH;var e=GH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},YH=t2(),Gl="data-scroll-locked",JH=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(kH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Gl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jf,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xf,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Jf," .").concat(Jf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xf," .").concat(Xf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gl,`] {
    `).concat(NH,": ").concat(a,`px;
  }
`)},jA=function(){var t=parseInt(document.body.getAttribute(Gl)||"0",10);return isFinite(t)?t:0},XH=function(){S.useEffect(function(){return document.body.setAttribute(Gl,(jA()+1).toString()),function(){var t=jA()-1;t<=0?document.body.removeAttribute(Gl):document.body.setAttribute(Gl,t.toString())}},[])},ZH=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;XH();var i=S.useMemo(function(){return QH(s)},[s]);return S.createElement(YH,{styles:JH(i,!e,s,n?"":"!important")})},Xw=!1;if(typeof window<"u")try{var mf=Object.defineProperty({},"passive",{get:function(){return Xw=!0,!0}});window.addEventListener("test",mf,mf),window.removeEventListener("test",mf,mf)}catch{Xw=!1}var pl=Xw?{passive:!1}:!1,eK=function(t){return t.tagName==="TEXTAREA"},n2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!eK(t)&&n[e]==="visible")},tK=function(t){return n2(t,"overflowY")},nK=function(t){return n2(t,"overflowX")},$A=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=r2(t,r);if(s){var i=s2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},sK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},r2=function(t,e){return t==="v"?tK(e):nK(e)},s2=function(t,e){return t==="v"?rK(e):sK(e)},iK=function(t,e){return t==="h"&&e==="rtl"?-1:1},oK=function(t,e,n,r,s){var i=iK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=s2(t,a),w=p[0],g=p[1],v=p[2],E=g-v-i*w;(w||E)&&r2(t,a)&&(h+=E,f+=w);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},gf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},BA=function(t){return[t.deltaX,t.deltaY]},zA=function(t){return t&&"current"in t?t.current:t},aK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},lK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},cK=0,ml=[];function uK(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(cK++)[0],i=S.useState(t2)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=DH([t.lockRef.current],(t.shards||[]).map(zA),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var E=gf(g),y=n.current,_="deltaX"in g?g.deltaX:y[0]-E[0],R="deltaY"in g?g.deltaY:y[1]-E[1],k,L=g.target,x=Math.abs(_)>Math.abs(R)?"h":"v";if("touches"in g&&x==="h"&&L.type==="range")return!1;var A=$A(x,L);if(!A)return!0;if(A?k=x:(k=x==="v"?"h":"v",A=$A(x,L)),!A)return!1;if(!r.current&&"changedTouches"in g&&(_||R)&&(r.current=k),!k)return!0;var b=r.current||k;return oK(b,v,g,b==="h"?_:R)},[]),l=S.useCallback(function(g){var v=g;if(!(!ml.length||ml[ml.length-1]!==i)){var E="deltaY"in v?BA(v):gf(v),y=e.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&aK(k.delta,E)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var _=(o.current.shards||[]).map(zA).filter(Boolean).filter(function(k){return k.contains(v.target)}),R=_.length>0?a(v,_[0]):!o.current.noIsolation;R&&v.cancelable&&v.preventDefault()}}},[]),c=S.useCallback(function(g,v,E,y){var _={name:g,delta:v,target:E,should:y,shadowParent:dK(E)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(R){return R!==_})},1)},[]),d=S.useCallback(function(g){n.current=gf(g),r.current=void 0},[]),h=S.useCallback(function(g){c(g.type,BA(g),g.target,a(g,t.lockRef.current))},[]),f=S.useCallback(function(g){c(g.type,gf(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return ml.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,pl),document.addEventListener("touchmove",l,pl),document.addEventListener("touchstart",d,pl),function(){ml=ml.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,pl),document.removeEventListener("touchmove",l,pl),document.removeEventListener("touchstart",d,pl)}},[]);var p=t.removeScrollBar,w=t.inert;return S.createElement(S.Fragment,null,w?S.createElement(i,{styles:lK(s)}):null,p?S.createElement(ZH,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function dK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const hK=jH(e2,uK);var i2=S.forwardRef(function(t,e){return S.createElement(bg,Ls({},t,{ref:e,sideCar:hK}))});i2.classNames=bg.classNames;var fK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},gl=new WeakMap,yf=new WeakMap,vf={},Xy=0,o2=function(t){return t&&(t.host||o2(t.parentNode))},pK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=o2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},mK=function(t,e,n,r){var s=pK(e,Array.isArray(t)?t:[t]);vf[n]||(vf[n]=new WeakMap);var i=vf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),w=p!==null&&p!=="false",g=(gl.get(f)||0)+1,v=(i.get(f)||0)+1;gl.set(f,g),i.set(f,v),o.push(f),g===1&&w&&yf.set(f,!0),v===1&&f.setAttribute(n,"true"),w||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return d(e),a.clear(),Xy++,function(){o.forEach(function(h){var f=gl.get(h)-1,p=i.get(h)-1;gl.set(h,f),i.set(h,p),f||(yf.has(h)||h.removeAttribute(r),yf.delete(h)),p||h.removeAttribute(n)}),Xy--,Xy||(gl=new WeakMap,gl=new WeakMap,yf=new WeakMap,vf={})}},gK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=fK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),mK(r,s,n,"aria-hidden")):function(){return null}},Ag="Dialog",[a2,pG]=Vc(Ag),[yK,Ss]=a2(Ag),l2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=t0({prop:r,defaultProp:s??!1,onChange:i,caller:Ag});return I.jsx(yK,{scope:e,triggerRef:a,contentRef:l,contentId:py(),titleId:py(),descriptionId:py(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};l2.displayName=Ag;var c2="DialogTrigger",u2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(c2,n),i=Un(e,s.triggerRef);return I.jsx(Xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":WE(s.open),...r,ref:i,onClick:Ct(t.onClick,s.onOpenToggle)})});u2.displayName=c2;var BE="DialogPortal",[vK,d2]=a2(BE,{forceMount:void 0}),h2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Ss(BE,e);return I.jsx(vK,{scope:e,forceMount:n,children:S.Children.map(r,o=>I.jsx(Xa,{present:n||i.open,children:I.jsx(e0,{asChild:!0,container:s,children:o})}))})};h2.displayName=BE;var mm="DialogOverlay",f2=S.forwardRef((t,e)=>{const n=d2(mm,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ss(mm,t.__scopeDialog);return i.modal?I.jsx(Xa,{present:r||i.open,children:I.jsx(_K,{...s,ref:e})}):null});f2.displayName=mm;var wK=bd("DialogOverlay.RemoveScroll"),_K=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(mm,n);return I.jsx(i2,{as:wK,allowPinchZoom:!0,shards:[s.contentRef],children:I.jsx(Xt.div,{"data-state":WE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Qa="DialogContent",p2=S.forwardRef((t,e)=>{const n=d2(Qa,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Ss(Qa,t.__scopeDialog);return I.jsx(Xa,{present:r||i.open,children:i.modal?I.jsx(EK,{...s,ref:e}):I.jsx(TK,{...s,ref:e})})});p2.displayName=Qa;var EK=S.forwardRef((t,e)=>{const n=Ss(Qa,t.__scopeDialog),r=S.useRef(null),s=Un(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return gK(i)},[]),I.jsx(m2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ct(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ct(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ct(t.onFocusOutside,i=>i.preventDefault())})}),TK=S.forwardRef((t,e)=>{const n=Ss(Qa,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return I.jsx(m2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),m2=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Ss(Qa,n),l=S.useRef(null),c=Un(e,l);return CH(),I.jsxs(I.Fragment,{children:[I.jsx(YO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:I.jsx(km,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":WE(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(IK,{titleId:a.titleId}),I.jsx(bK,{contentRef:l,descriptionId:a.descriptionId})]})]})}),zE="DialogTitle",g2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(zE,n);return I.jsx(Xt.h2,{id:s.titleId,...r,ref:e})});g2.displayName=zE;var y2="DialogDescription",v2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(y2,n);return I.jsx(Xt.p,{id:s.descriptionId,...r,ref:e})});v2.displayName=y2;var w2="DialogClose",_2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ss(w2,n);return I.jsx(Xt.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,()=>s.onOpenChange(!1))})});_2.displayName=w2;function WE(t){return t?"open":"closed"}var E2="DialogTitleWarning",[mG,T2]=bM(E2,{contentName:Qa,titleName:zE,docsSlug:"dialog"}),IK=({titleId:t})=>{const e=T2(E2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},SK="DialogDescriptionWarning",bK=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${T2(SK).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},AK=l2,xK=u2,RK=h2,I2=f2,S2=p2,b2=g2,A2=v2,PK=_2;const WA=AK,gG=xK,CK=RK,x2=S.forwardRef(({className:t,...e},n)=>I.jsx(I2,{ref:n,className:jn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));x2.displayName=I2.displayName;const Zw=S.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>I.jsxs(CK,{children:[I.jsx(x2,{}),I.jsxs(S2,{ref:o,className:jn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&I.jsxs(PK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[I.jsx(i0,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zw.displayName=S2.displayName;const e_=({className:t,...e})=>I.jsx("div",{className:jn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});e_.displayName="DialogHeader";const DK=({className:t,...e})=>I.jsx("div",{className:jn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});DK.displayName="DialogFooter";const t_=S.forwardRef(({className:t,...e},n)=>I.jsx(b2,{ref:n,className:jn("text-lg font-semibold leading-none tracking-tight",t),...e}));t_.displayName=b2.displayName;const n_=S.forwardRef(({className:t,...e},n)=>I.jsx(A2,{ref:n,className:jn("text-sm text-muted-foreground",t),...e}));n_.displayName=A2.displayName;const kK={},qA=$.lazy(()=>Q(()=>import("./Index-CRt6Oh6Z.js"),[],import.meta.url)),wf=$.lazy(()=>Q(()=>import("./LandingPage-kLNzuBGB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),HA=$.lazy(()=>Q(()=>import("./SubscriptionsPage-CcTmL88p.js"),__vite__mapDeps([13,1,4,14,15,6,7,5,12]),import.meta.url)),KA=$.lazy(()=>Q(()=>import("./AuthPage-Bbx-BIhm.js"),__vite__mapDeps([16,1,2,3,8]),import.meta.url)),_f=$.lazy(()=>Q(()=>import("./TopUpPage-HqQ7OYe-.js"),__vite__mapDeps([17,1,18]),import.meta.url)),GA=$.lazy(()=>Q(()=>import("./AdminTopupsPage-DnB7fnWb.js"),__vite__mapDeps([19,18]),import.meta.url)),QA=$.lazy(()=>Q(()=>import("./AdminNotificationsPage-UeUMDz8Q.js"),__vite__mapDeps([20,1,21,22,23]),import.meta.url)),Ef=$.lazy(()=>Q(()=>import("./UserRegisterPage-nGkgUYVd.js"),__vite__mapDeps([24,1,21,25,26,27,28,29]),import.meta.url)),YA=$.lazy(()=>Q(()=>import("./UserAccountSetupPage-CvTg5r5O.js"),__vite__mapDeps([30,1,21,25,29,28,12]),import.meta.url)),JA=$.lazy(()=>Q(()=>import("./ForgotPasswordCodePage-DWWRDZqi.js"),[],import.meta.url)),XA=$.lazy(()=>Q(()=>import("./DashboardLoginPage-auulEUFe.js"),__vite__mapDeps([31,1,10]),import.meta.url)),ZA=$.lazy(()=>Q(()=>import("./ProtectedDashboard-BJj9jZ1t.js"),__vite__mapDeps([32,1,33,18,34,21,10,35,36,37,26,12,38]),import.meta.url)),Zf=$.lazy(()=>Q(()=>import("./ProtectedUserDashboard-bO8wCs8P.js"),__vite__mapDeps([39,40,23,34,21,10,35]),import.meta.url)),ex=$.lazy(()=>Q(()=>import("./MerchantDashboard-CQ0Hu--p.js"),__vite__mapDeps([41,42,18,43,33,44,1,45,21,46]),import.meta.url)),tx=$.lazy(()=>Q(()=>import("./PendingApprovalPage-CKSUULZB.js"),__vite__mapDeps([47,48,10]),import.meta.url)),nx=$.lazy(()=>Q(()=>import("./AdminLogin-DB0XRTiB.js"),__vite__mapDeps([49,10]),import.meta.url)),rx=$.lazy(()=>Q(()=>import("./ProtectedAdminDashboard-BgWFsLWg.js"),__vite__mapDeps([50,14,3,51,42,18,43,21,34,10,35,52,1,22,25,33,53,4,28,54,55,40,15,9,7,8,12,38]),import.meta.url)),sx=$.lazy(()=>Q(()=>import("./AuthTestPage-C-kLB_1b.js"),__vite__mapDeps([56,1,21]),import.meta.url)),ix=$.lazy(()=>Q(()=>import("./ProfileSettingsPage-YEAVop1f.js"),__vite__mapDeps([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url)),ox=$.lazy(()=>Q(()=>import("./TransactionsPage-B8JCFYlT.js"),__vite__mapDeps([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url)),ax=$.lazy(()=>Q(()=>import("./WalletAdditionPage-B7E4E4U3.js"),__vite__mapDeps([61,1,21,18,5,26,28,35]),import.meta.url)),lx=$.lazy(()=>Q(()=>import("./ReferralsPage-C5SDpPYC.js"),__vite__mapDeps([62,1,33,25,27,23,12,55,38]),import.meta.url)),cx=$.lazy(()=>Q(()=>import("./CPanelPage-CyC65jdS.js"),__vite__mapDeps([63,1,21]),import.meta.url)),ux=$.lazy(()=>Q(()=>import("./CPanelLoginPage-CjJu877g.js"),__vite__mapDeps([64,21,1,10]),import.meta.url)),dx=$.lazy(()=>Q(()=>import("./NotFound-DF6pwz6J.js"),[],import.meta.url)),hx=$.lazy(()=>Q(()=>import("./PrivacyPolicyPage-mSgnNu56.js"),[],import.meta.url)),R2=new S3({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=C3({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});P3({queryClient:R2,persister:t,maxAge:24*60*60*1e3})}catch{}const NK=()=>{if(!((xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return I.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:I.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:I.jsx(R1,{className:"w-5 h-5"})})})},fx=()=>{const t=Ys(),{user:e,loading:n}=tl(),r=(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?I.jsx(Bq,{}):null},px=()=>{var Ho;const t=wH(),{profile:e,user:n}=tl(),{shopId:r}=TH(),i=Ys().pathname.startsWith("/user/dashboard"),o=$c(),{toast:a}=Z_(),[l,c]=$.useState(!1),[d,h]=$.useState(null),[f,p]=$.useState(!1),[w,g]=$.useState(null),[v,E]=$.useState(!1),[y,_]=$.useState(""),[R,k]=$.useState(""),[L,x]=$.useState(null),[A,b]=$.useState(null),P=$.useRef(null),D=$.useRef(null),O=$.useRef(!1),C=$.useRef(null),j=$.useRef(()=>{try{const J=localStorage.getItem("sms_suppressed_ids")||"[]",G=Array.isArray(JSON.parse(J))?JSON.parse(J):[];return new Set(G.map(X=>String(X||"")))}catch{return new Set}}),[se,ie]=$.useState(!1);_H();const[ue,U]=$.useState(!1),[V,ee]=$.useState(null),[ae,H]=$.useState(""),[Ne,Te]=$.useState(!1),[Oe,Je]=$.useState(!1),[Se,Ht]=$.useState(""),[Ze,Be]=$.useState(""),[We,Ot]=$.useState(!1),[en,On]=$.useState(0),pr=$.useCallback(()=>{try{const J=window.AudioContext||window.webkitAudioContext;if(!J)return;const G=new J,X=G.createOscillator(),K=G.createGain();X.type="sine",K.gain.setValueAtTime(0,G.currentTime),X.connect(K),K.connect(G.destination);const Z=G.currentTime;X.frequency.setValueAtTime(800,Z),K.gain.linearRampToValueAtTime(.15,Z+.02),X.start(Z),X.frequency.exponentialRampToValueAtTime(1200,Z+.08),K.gain.exponentialRampToValueAtTime(1e-5,Z+.32),X.stop(Z+.35)}catch{}},[]),yn=J=>{try{const G=String(J||"").replace(/[^0-9+]/g,"");if(!G)return"";if(G.startsWith("+20")){const X=G.slice(3);return X.startsWith("1")?"0"+X:X}if(G.startsWith("0020")){const X=G.slice(4);return X.startsWith("1")?"0"+X:X}if(G.startsWith("20")){const X=G.slice(2);return X.startsWith("1")?"0"+X:X}return G.startsWith("0")?G:/^(10|11|12|15)/.test(G)?"0"+G:G}catch{return""}},mr=J=>{try{const G=String(J||""),X=G.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let K=X?parseFloat(String(X[1]).replace(",",".")):0;const Z=G.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let oe=Z?yn(Z[1]):void 0;const he=G.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),ge=G.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),_e=he?String(he[1]).trim():ge?String(ge[1]).trim():void 0,ze=G.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),de=G.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),Me=G.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!K||K<=0){const fe=G.match(/Received\s*EGP\s*([0-9.,]+)/i)||G.match(/Received\s*EGP([0-9.,]+)/i);fe&&(K=parseFloat(String(fe[1]).replace(/,/g,"")))}if(!oe){const fe=G.match(/from\s+([0-9+]+)/i);fe&&(oe=yn(fe[1]))}const ye=ze?String(ze[1]).trim():de?String(de[1]).trim():Me?String(Me[1]).trim():void 0;return{amount:K,sender:oe,senderName:_e,reference:ye}}catch{return{amount:0}}};$.useEffect(()=>{(async()=>{var J;try{if(!ue||!V){Te(!1);return}const{auth:G}=await Q(async()=>{const{auth:oe}=await Promise.resolve().then(()=>Rt);return{auth:oe}},void 0,import.meta.url),X=((J=G.currentUser)==null?void 0:J.uid)||"",K=X?`selectedWallet_${X}`:"selectedWallet_default",Z=localStorage.getItem(K)||"";if(!Z){Te(!0);return}try{const{merchantWalletService:oe}=await Q(async()=>{const{merchantWalletService:_e}=await Promise.resolve().then(()=>Au);return{merchantWalletService:_e}},void 0,import.meta.url),he=await oe.getById(Z),ge=he&&he.defaultWithdrawCommission!=null;Te(!ge)}catch{Te(!0)}}catch{Te(!0)}})()},[ue,V]);const Le=async J=>{try{const{merchantWalletService:G,detectWalletFromSim:X}=await Q(async()=>{const{merchantWalletService:de,detectWalletFromSim:Me}=await Promise.resolve().then(()=>Vl);return{merchantWalletService:de,detectWalletFromSim:Me}},void 0,import.meta.url),K=(n==null?void 0:n.uid)||"";if(!K)return;const Z=`wallets_${K}`,oe=typeof localStorage<"u"?localStorage.getItem(Z):null,he=oe?JSON.parse(oe):[],ge=await G.getByMerchantId(K),_e=[...(Array.isArray(he)?he:[]).map(de=>({id:String((de==null?void 0:de.id)||""),phone:String((de==null?void 0:de.phone)||(de==null?void 0:de.msisdn)||""),isDefault:!!(de!=null&&de.isDefault)})),...(Array.isArray(ge)?ge:[]).map(de=>({id:String((de==null?void 0:de.id)||""),msisdn:String((de==null?void 0:de.msisdn)||""),isDefault:!!(de!=null&&de.isDefault)}))],ze=await X(J||[],_e);if(ze&&ze.walletId)try{localStorage.setItem(`selectedWallet_${K}`,ze.walletId)}catch{}}catch{}};S.useEffect(()=>{const J=async G=>{var X;try{const K=(G==null?void 0:G.detail)||{},Z=String(K.text||"").trim(),oe=String(K.title||"").trim();if(!Z)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*/i.test(`${oe} ${Z}`)){try{Wy(K,{toast:a})}catch{}return}const{auth:ge}=await Q(async()=>{const{auth:me}=await Promise.resolve().then(()=>Rt);return{auth:me}},void 0,import.meta.url),_e=((X=ge.currentUser)==null?void 0:X.uid)||"";let ze=r||"";if(!_e){try{a({title:"  ",description:"   "})}catch{}return}if(!ze)try{const{doc:me,getDoc:Qe}=await Q(async()=>{const{doc:Ae,getDoc:yt}=await Promise.resolve().then(()=>un);return{doc:Ae,getDoc:yt}},void 0,import.meta.url),{db:je}=await Q(async()=>{const{db:Ae}=await Promise.resolve().then(()=>Rt);return{db:Ae}},void 0,import.meta.url),ft=await Qe(me(je,"profiles",_e));if(ft.exists()){const Ae=ft.data(),yt=String((Ae==null?void 0:Ae.shopId)||"").trim();yt&&(ze=yt)}}catch{}let de="",Me="",ye=!1;try{const{doc:me,getDoc:Qe}=await Q(async()=>{const{doc:Ae,getDoc:yt}=await Promise.resolve().then(()=>un);return{doc:Ae,getDoc:yt}},void 0,import.meta.url),{db:je}=await Q(async()=>{const{db:Ae}=await Promise.resolve().then(()=>Rt);return{db:Ae}},void 0,import.meta.url),ft=await Qe(me(je,"profiles",_e));if(ft.exists()){const Ae=ft.data();ye=(Ae==null?void 0:Ae.smsAutoRegisterEnabled)===!0,de=String((Ae==null?void 0:Ae.sim1Number)||"").trim(),Me=String((Ae==null?void 0:Ae.sim2Number)||"").trim()}}catch{}try{const me=localStorage.getItem(`sim1Number_${_e}`)??localStorage.getItem("sim1Number"),Qe=localStorage.getItem(`sim2Number_${_e}`)??localStorage.getItem("sim2Number");de||(de=String(me||"").trim()),Me||(Me=String(Qe||"").trim())}catch{}try{const{Preferences:me}=await Q(async()=>{const{Preferences:ft}=await Promise.resolve().then(()=>By);return{Preferences:ft}},void 0,import.meta.url),Qe=await me.get({key:"sim1_number"}),je=await me.get({key:"sim2_number"});!de&&(Qe!=null&&Qe.value)&&(de=String(Qe.value).trim()),!Me&&(je!=null&&je.value)&&(Me=String(je.value).trim())}catch{}let fe=[];de&&!Me?fe=[de]:fe=[de,Me].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(fe))}catch{}const Fe=fe[0]||"";if(Fe)try{localStorage.setItem("lastSmsSimMsisdn",Fe)}catch{}const{resolveWalletBySimOrSlot:De,bindSlotWalletMapping:st,merchantWalletService:At}=await Q(async()=>{const{resolveWalletBySimOrSlot:me,bindSlotWalletMapping:Qe,merchantWalletService:je}=await Promise.resolve().then(()=>Vl);return{resolveWalletBySimOrSlot:me,bindSlotWalletMapping:Qe,merchantWalletService:je}},void 0,import.meta.url),tn=_e;let Ye=await De({simNumbers:fe,userId:tn});if(!Ye&&fe.length>0){try{await Le(fe)}catch{}const me=localStorage.getItem(`selectedWallet_${tn}`)||"";if(me)try{const Qe=await At.getById(me);Ye={walletId:me,msisdn:String((Qe==null?void 0:Qe.msisdn)||"")}}catch{}}if(Ye&&Ye.walletId){try{localStorage.setItem(`selectedWallet_${tn}`,Ye.walletId)}catch{}try{st({userId:tn,walletId:Ye.walletId,msisdn:Ye.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ye.walletId}}))}catch{}}const ot=mr(Z),at=Number(ot.amount||0);if(!at||at<=0){try{Wy(K,{toast:a})}catch{}return}const pe=(Ye==null?void 0:Ye.msisdn)||await Zy(_e),ne=ot.reference||`VF-${Date.now()}`,Ce={amount:at,sender:String(ot.sender||""),senderName:ot.senderName,text:Z,simNumber:Fe};if(ye)try{await gt({...Ce,reference:ne,walletMsisdn:pe})}catch{}else{try{const{addDoc:me,collection:Qe,serverTimestamp:je}=await Q(async()=>{const{addDoc:vt,collection:lt,serverTimestamp:Lt}=await Promise.resolve().then(()=>un);return{addDoc:vt,collection:lt,serverTimestamp:Lt}},void 0,import.meta.url),{db:ft}=await Q(async()=>{const{db:vt}=await Promise.resolve().then(()=>Rt);return{db:vt}},void 0,import.meta.url),Ae=await me(Qe(ft,"pendingSmsPopups"),{userId:_e,shopId:ze,payload:{...Ce,reference:ne,walletMsisdn:pe},status:"pending",createdAt:je()}),yt=/Received\s*EGP/i.test(String(Z))?"InstaPay":"VF-Cash";ee({...Ce,reference:ne,providerLabel:yt,walletMsisdn:pe,popupId:Ae.id})}catch{const me=/Received\s*EGP/i.test(String(Z))?"InstaPay":"VF-Cash";ee({...Ce,reference:ne,providerLabel:me,walletMsisdn:pe})}U(!0);try{pr()}catch{}}}catch{try{Wy((G==null?void 0:G.detail)||{},{toast:a})}catch{}}};try{window.addEventListener("vfNotificationReceived",J)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",J)}catch{}}},[a,r]),S.useEffect(()=>{const J=async G=>{var X;try{const K=(G==null?void 0:G.detail)||{},Z=Number(K.amount||0),oe=String(K.sender||K.senderMsisdn||""),he=Array.isArray(K.activeSimMsisdns)?K.activeSimMsisdns.map(ye=>String(ye||"")):[];try{console.log("VF Auto SMS  activeSimMsisdns",he)}catch{}const ge=String(K.text||""),_e=Z,{auth:ze}=await Q(async()=>{const{auth:ye}=await Promise.resolve().then(()=>Rt);return{auth:ye}},void 0,import.meta.url),de=((X=ze.currentUser)==null?void 0:X.uid)||"";let Me=r||"";if(!de)try{a({title:"  ",description:"   "})}catch{}if(!Me)try{const{doc:ye,getDoc:fe}=await Q(async()=>{const{doc:st,getDoc:At}=await Promise.resolve().then(()=>un);return{doc:st,getDoc:At}},void 0,import.meta.url),{db:Fe}=await Q(async()=>{const{db:st}=await Promise.resolve().then(()=>Rt);return{db:st}},void 0,import.meta.url),De=await fe(ye(Fe,"profiles",de));if(De.exists()){const st=De.data(),At=String((st==null?void 0:st.shopId)||"").trim();At&&(Me=At)}}catch{}if(!Me)try{a({title:"  ",description:"   "})}catch{}try{const{doc:ye,getDoc:fe}=await Q(async()=>{const{doc:vt,getDoc:lt}=await Promise.resolve().then(()=>un);return{doc:vt,getDoc:lt}},void 0,import.meta.url),{db:Fe}=await Q(async()=>{const{db:vt}=await Promise.resolve().then(()=>Rt);return{db:vt}},void 0,import.meta.url);let De="",st="",At=!0,tn=!1;try{const vt=await fe(ye(Fe,"profiles",de));if(vt.exists()){const lt=vt.data();At=(lt==null?void 0:lt.smsReadingEnabled)!==void 0?!!lt.smsReadingEnabled:!0,tn=(lt==null?void 0:lt.smsAutoRegisterEnabled)===!0}}catch{}try{const vt=localStorage.getItem(`sim1Number_${de}`)??localStorage.getItem("sim1Number"),lt=localStorage.getItem(`sim2Number_${de}`)??localStorage.getItem("sim2Number");De=String(vt||"").trim(),st=String(lt||"").trim()}catch{}try{const{Preferences:vt}=await Q(async()=>{const{Preferences:wn}=await Promise.resolve().then(()=>By);return{Preferences:wn}},void 0,import.meta.url),lt=await vt.get({key:"sim1_number"}),Lt=await vt.get({key:"sim2_number"});!De&&(lt!=null&&lt.value)&&(De=String(lt.value).trim()),!st&&(Lt!=null&&Lt.value)&&(st=String(Lt.value).trim())}catch{}const Ye=At,ot=String((K==null?void 0:K.simNumber)||"");let at=he&&he.length>0?he:ot?[ot]:[];Array.isArray(he)&&he.length===1&&De&&(at=[De]),at.length===0&&(at=[De,st].filter(Boolean));try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(at))}catch{}const pe=ot||at[0]||"";if(pe)try{localStorage.setItem("lastSmsSimMsisdn",pe)}catch{}const{resolveWalletBySimOrSlot:ne,bindSlotWalletMapping:Ce,merchantWalletService:me}=await Q(async()=>{const{resolveWalletBySimOrSlot:vt,bindSlotWalletMapping:lt,merchantWalletService:Lt}=await Promise.resolve().then(()=>Vl);return{resolveWalletBySimOrSlot:vt,bindSlotWalletMapping:lt,merchantWalletService:Lt}},void 0,import.meta.url),Qe=de;let je=await ne({simNumbers:at,userId:Qe});if(!je&&at.length>0){try{await Le(at)}catch{}const vt=localStorage.getItem(`selectedWallet_${Qe}`)||"";if(vt)try{const lt=await me.getById(vt);je={walletId:vt,msisdn:String((lt==null?void 0:lt.msisdn)||"")}}catch{}}if(je&&je.walletId){try{localStorage.setItem(`selectedWallet_${Qe}`,je.walletId)}catch{}try{Ce({userId:Qe,walletId:je.walletId,msisdn:je.msisdn})}catch{}}const ft=String(K.reference||K.txnRefNumber||""),Ae=(je==null?void 0:je.msisdn)||(de?await Zy(de):""),yt={amount:_e,sender:oe,senderName:String(K.senderName||""),text:ge,simNumber:pe};if(tn)try{await gt(yt)}catch{}else{try{const{addDoc:vt,collection:lt,serverTimestamp:Lt}=await Q(async()=>{const{addDoc:$t,collection:nn,serverTimestamp:Kt}=await Promise.resolve().then(()=>un);return{addDoc:$t,collection:nn,serverTimestamp:Kt}},void 0,import.meta.url),{db:wn}=await Q(async()=>{const{db:$t}=await Promise.resolve().then(()=>Rt);return{db:$t}},void 0,import.meta.url),qe=await vt(lt(wn,"pendingSmsPopups"),{userId:de,shopId:Me,payload:{...yt,reference:ft,walletMsisdn:Ae},status:"pending",createdAt:Lt()}),tt=/Received\s*EGP/i.test(String(ge))?"InstaPay":"VF-Cash";ee({...yt,reference:ft,providerLabel:tt,walletMsisdn:Ae,popupId:qe.id})}catch{const vt=/Received\s*EGP/i.test(String(ge))?"InstaPay":"VF-Cash";ee({...yt,reference:ft,providerLabel:vt,walletMsisdn:Ae})}U(!0);try{pr()}catch{}}}catch{}}catch{}};try{window.addEventListener("vfCashTransactionDetected",J)}catch{}return()=>{try{window.removeEventListener("vfCashTransactionDetected",J)}catch{}}},[a,r]),S.useEffect(()=>()=>{},[a,r]);const gt=async J=>{var G,X,K,Z,oe,he,ge;try{const _e=J||V;if(!_e)return;const{amount:ze,sender:de,text:Me,simNumber:ye,senderName:fe}=_e,Fe=String(Me||"");let De=Number(ze||0);const st=typeof(J==null?void 0:J.deferredMode)=="boolean"?J.deferredMode:Oe,At=(J==null?void 0:J.debtorName)??Se,tn=(J==null?void 0:J.debtorNote)??Ze;try{U(!1)}catch{}try{}catch{}const Ye=/Received\s*EGP/i.test(Fe)?"instapay":"vodafone_cash";if(!De||De<=0){const qe=Fe.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(qe&&(De=parseFloat(String(qe[1]).replace(",","."))),!De||De<=0){const tt=Fe.match(/Received\s*EGP\s*([0-9.,]+)/i)||Fe.match(/Received\s*EGP([0-9.,]+)/i);tt&&(De=parseFloat(String(tt[1]).replace(/,/g,"")))}}let ot=String(de||"").trim();if(!ot){const qe=Fe.match(/\s+\s+(\d+)/i);ot=qe?yn(qe[1]):""}let at=String((_e==null?void 0:_e.reference)||"").trim();if(!at){const qe=Fe.match(/\s*\s*([\d\.]+)/i);at=qe?String(qe[1]).trim():String(Date.now())}if(!De||De<=0){try{a({title:"      ",variant:"destructive"})}catch{}return}const{auth:pe}=await Q(async()=>{const{auth:qe}=await Promise.resolve().then(()=>Rt);return{auth:qe}},void 0,import.meta.url),ne=((G=pe.currentUser)==null?void 0:G.uid)||"";let Ce=r||"";if(!ne){try{a({title:"  ",description:"   "})}catch{}return}if(!Ce)try{const{doc:qe,getDoc:tt}=await Q(async()=>{const{doc:Kt,getDoc:xn}=await Promise.resolve().then(()=>un);return{doc:Kt,getDoc:xn}},void 0,import.meta.url),{db:$t}=await Q(async()=>{const{db:Kt}=await Promise.resolve().then(()=>Rt);return{db:Kt}},void 0,import.meta.url),nn=await tt(qe($t,"profiles",ne));if(nn.exists()){const Kt=nn.data(),xn=String((Kt==null?void 0:Kt.shopId)||"").trim();xn&&(Ce=xn)}}catch{}if(!Ce){try{a({title:"  ",description:"   "})}catch{}return}let me=await LK(ne);if(!me)try{const{doc:qe,getDoc:tt}=await Q(async()=>{const{doc:ct,getDoc:Hr}=await Promise.resolve().then(()=>un);return{doc:ct,getDoc:Hr}},void 0,import.meta.url),{db:$t}=await Q(async()=>{const{db:ct}=await Promise.resolve().then(()=>Rt);return{db:ct}},void 0,import.meta.url);let nn="",Kt="";try{const ct=await tt(qe($t,"profiles",ne));if(ct.exists()){const Hr=ct.data();nn=String((Hr==null?void 0:Hr.sim1Number)||"").trim(),Kt=String((Hr==null?void 0:Hr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:xn}=await Q(async()=>{const{detectWalletFromSim:ct}=await Promise.resolve().then(()=>Vl);return{detectWalletFromSim:ct}},void 0,import.meta.url),{merchantWalletService:tr}=await Q(async()=>{const{merchantWalletService:ct}=await Promise.resolve().then(()=>Au);return{merchantWalletService:ct}},void 0,import.meta.url),qr=`wallets_${ne}`,Bn=localStorage.getItem(qr),ns=Bn?JSON.parse(Bn):[],gr=await tr.getByMerchantId(ne),nr=(Array.isArray(ns)?ns:[]).map(ct=>({id:String((ct==null?void 0:ct.id)||""),phone:String((ct==null?void 0:ct.phone)||(ct==null?void 0:ct.msisdn)||""),isDefault:!!(ct!=null&&ct.isDefault)})),rr=(Array.isArray(gr)?gr:[]).map(ct=>({id:String((ct==null?void 0:ct.id)||""),msisdn:String((ct==null?void 0:ct.msisdn)||""),isDefault:!!(ct!=null&&ct.isDefault)})),Ko=[...nr,...rr],Sh=ye||String(localStorage.getItem("lastSmsSimMsisdn")||"");let nl=(Sh?[Sh]:[]).filter(Boolean);nl.length===0&&(nl=[nn,Kt].filter(Boolean));const rl=await xn(nl,Ko);if(rl&&rl.walletId){me=rl.walletId;try{localStorage.setItem(`selectedWallet_${ne}`,me)}catch{}}}catch{}if(!me){try{a({title:"   ",description:"       "})}catch{}return}try{const qe=ne;try{localStorage.setItem(`selectedWallet_${qe}`,me)}catch{}try{localStorage.setItem(`selectedWallet_${qe}_${Ce}`,me)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:me}}))}catch{}try{const{Preferences:tt}=await Q(async()=>{const{Preferences:$t}=await Promise.resolve().then(()=>By);return{Preferences:$t}},void 0,import.meta.url);await tt.set({key:"selected_wallet_id",value:me}),await tt.set({key:"current_user_id",value:qe})}catch{}}catch{}const{recordAutoTransaction:Qe,userDataService:je}=await Q(async()=>{const{recordAutoTransaction:qe,userDataService:tt}=await Promise.resolve().then(()=>Au);return{recordAutoTransaction:qe,userDataService:tt}},void 0,import.meta.url),ft=ae&&ae.trim()!==""?Math.max(0,parseFloat(ae)):null;let Ae=0;if(ft!=null)Ae=ft;else try{const{merchantWalletService:qe}=await Q(async()=>{const{merchantWalletService:nn}=await Promise.resolve().then(()=>Au);return{merchantWalletService:nn}},void 0,import.meta.url),tt=await qe.getById(String(me)),$t=tt&&tt.defaultWithdrawCommission;if($t!=null)Ae=Math.round((Number($t)||0)*Number(De)/1e3*100)/100;else{const{calculateCommission:nn}=await Q(async()=>{const{calculateCommission:Kt}=await Promise.resolve().then(()=>Ll);return{calculateCommission:Kt}},void 0,import.meta.url);Ae=nn(Number(De),"receive")}}catch{const{calculateCommission:qe}=await Q(async()=>{const{calculateCommission:tt}=await Promise.resolve().then(()=>Ll);return{calculateCommission:tt}},void 0,import.meta.url);Ae=qe(Number(De),"receive")}try{const{walletDailyLimitsService:qe}=await Q(async()=>{const{walletDailyLimitsService:$t}=await Promise.resolve().then(()=>Jw);return{walletDailyLimitsService:$t}},void 0,import.meta.url),tt=await qe.canPerformOperation(String(me),Math.max(0,Number(De||0)),"withdraw");if(!tt.canPerform)try{a({title:"  ",description:String(tt.message||"      "),variant:"destructive"})}catch{}}catch{}const yt=at||`${Fe}|${Date.now()}`,vt=ye||String(localStorage.getItem("lastSmsSimMsisdn")||""),Lt=String((_e==null?void 0:_e.walletMsisdn)||"").trim()||vt||await Zy(ne)||"",wn=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(st)try{const qe=await je.getUserData(ne),tt=Array.isArray(qe==null?void 0:qe.debts)?qe.debts:[],$t=wn==="add"?Number(De)+Number(Ae):Number(De),nn={id:`DEBT-${Date.now()}`,debtorName:At||fe||ot||"",amount:Math.round(Number($t)*100)/100,reason:tn||"  VodafoneCash",customerId:void 0,mobile:ot,status:"pending",createdAt:new Date},Kt=[nn,...tt];await je.updateUserData(ne,{debts:Kt});try{const xn=Ae;await je.saveUserTransaction(ne,{type:"withdraw",amount:De,withdrawnAmount:De,commission:xn,status:"pending",createdAt:new Date,senderMsisdn:ot,receiverMsisdn:Lt,senderName:fe,walletId:me,fromWallet:me,lineId:Lt,provider:Ye,reference:yt,transactionId:`DEFER-${Date.now()}`,linkedDebtId:nn.id})}catch{}try{const xn=(J==null?void 0:J.popupId)||(V==null?void 0:V.popupId)||"";if(xn){const{doc:tr,updateDoc:qr,serverTimestamp:Bn}=await Q(async()=>{const{doc:gr,updateDoc:nr,serverTimestamp:rr}=await Promise.resolve().then(()=>un);return{doc:gr,updateDoc:nr,serverTimestamp:rr}},void 0,import.meta.url),{db:ns}=await Q(async()=>{const{db:gr}=await Promise.resolve().then(()=>Rt);return{db:gr}},void 0,import.meta.url);try{await qr(tr(ns,"pendingSmsPopups",xn),{status:"confirmed",confirmedAt:Bn()})}catch{}try{(K=(X=j.current)==null?void 0:X.add)==null||K.call(X,xn);const gr=Array.from(j.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(gr))}catch{}}}catch{}try{a({title:"  ",description:"      "})}catch{}return}catch{}try{const qe=await Qe({shopId:Ce,lineId:Lt,walletId:me,amount:De,note:"SMS-ManualConfirm",provider:Ye,createdBy:ne,senderMsisdn:ot,senderName:fe,reference:yt,text:Fe});try{const tt=(J==null?void 0:J.popupId)||(V==null?void 0:V.popupId)||"";if(tt){const{doc:$t,updateDoc:nn,serverTimestamp:Kt}=await Q(async()=>{const{doc:tr,updateDoc:qr,serverTimestamp:Bn}=await Promise.resolve().then(()=>un);return{doc:tr,updateDoc:qr,serverTimestamp:Bn}},void 0,import.meta.url),{db:xn}=await Q(async()=>{const{db:tr}=await Promise.resolve().then(()=>Rt);return{db:tr}},void 0,import.meta.url);try{await nn($t(xn,"pendingSmsPopups",tt),{status:"confirmed",confirmedAt:Kt()})}catch{}try{(oe=(Z=j.current)==null?void 0:Z.add)==null||oe.call(Z,tt);const tr=Array.from(j.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(tr))}catch{}}}catch{}try{const tt=Math.max(0,Number(De||0)),{doc:$t,getDoc:nn,updateDoc:Kt}=await Q(async()=>{const{doc:nr,getDoc:rr,updateDoc:Ko}=await Promise.resolve().then(()=>un);return{doc:nr,getDoc:rr,updateDoc:Ko}},void 0,import.meta.url),{db:xn}=await Q(async()=>{const{db:nr}=await Promise.resolve().then(()=>Rt);return{db:nr}},void 0,import.meta.url),tr=$t(xn,"dashboardData",Ce),qr=await nn(tr);let Bn=qr.exists()?Number(((he=qr.data())==null?void 0:he.cashBalance)||0):0;const ns=qr.exists()?((ge=qr.data())==null?void 0:ge.walletBalances)||{}:{},gr=Number(ns[me]||0);ns[me]=gr+tt,Bn=Bn-tt+Math.max(0,Ae),await Kt(tr,{cashBalance:Bn,walletBalances:ns,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:Bn}}))}catch{}try{const{walletDailyLimitsService:nr}=await Q(async()=>{const{walletDailyLimitsService:rr}=await Promise.resolve().then(()=>Jw);return{walletDailyLimitsService:rr}},void 0,import.meta.url);await nr.updateUsage(String(me),tt,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(me)}}))}catch{}}catch{}}catch{}(async()=>{try{const tt=Ae;await je.saveUserTransaction(ne,{type:"withdraw",amount:De,withdrawnAmount:De,commission:tt,status:"completed",createdAt:new Date,senderMsisdn:ot,receiverMsisdn:Lt,senderName:fe,walletId:me,fromWallet:me,lineId:Lt,provider:Ye,reference:yt,transactionId:qe})}catch{}})(),U(!1),ee(null);try{a({title:`     ${qe}`})}catch{}}catch(qe){try{a({title:String((qe==null?void 0:qe.message)||"  "),variant:"destructive"})}catch{}}}catch{}};S.useEffect(()=>{try{NA.start()}catch{}return()=>{try{NA.stop()}catch{}}},[]),S.useEffect(()=>{(async()=>{try{if(!(n!=null&&n.uid))return;const J=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),G=String(localStorage.getItem("android_installed_version")||"").trim(),X=localStorage.getItem("android_last_ack_code"),K=localStorage.getItem("android_installed_code"),Z=X?Number(X):null,oe=K?Number(K):null,he=J||G,ge=Z??oe??null;he&&_(he),ge&&b(ge);const{doc:_e,getDoc:ze}=await Q(async()=>{const{doc:ye,getDoc:fe}=await Promise.resolve().then(()=>un);return{doc:ye,getDoc:fe}},void 0,import.meta.url),{db:de}=await Q(async()=>{const{db:ye}=await Promise.resolve().then(()=>Rt);return{db:ye}},void 0,import.meta.url),Me=await ze(_e(de,"profiles",n.uid));if(Me.exists()){const ye=Me.data(),fe=String((ye==null?void 0:ye.lastAckAndroidVersion)||(ye==null?void 0:ye.androidInstalledVersion)||(ye==null?void 0:ye.lastAckUpdateId)||"").trim(),Fe=typeof(ye==null?void 0:ye.lastAckAndroidCode)=="number"?ye.lastAckAndroidCode:typeof(ye==null?void 0:ye.androidInstalledCode)=="number"?ye.androidInstalledCode:null,De=(At,tn)=>{const Ye=String(At||"").replace(/^v/i,"").split(".").map(at=>parseInt(at,10)||0),ot=String(tn||"").replace(/^v/i,"").split(".").map(at=>parseInt(at,10)||0);for(let at=0;at<Math.max(Ye.length,ot.length);at++){const pe=Ye[at]||0,ne=ot[at]||0;if(pe>ne)return 1;if(pe<ne)return-1}return 0};let st=!1;if(typeof Fe=="number"&&typeof ge=="number"?st=Fe>ge:typeof Fe=="number"&&ge==null?st=!0:fe&&he?st=De(fe,he)>0:fe&&!he&&(st=!0),st){if(fe){try{localStorage.setItem("android_installed_version",fe)}catch{}_(fe)}if(typeof Fe=="number"){try{localStorage.setItem("android_installed_code",String(Fe))}catch{}b(Fe)}}else if(typeof Fe=="number"&&ge==null){try{localStorage.setItem("android_installed_code",String(Fe))}catch{}b(Fe)}}}catch{}})()},[n==null?void 0:n.uid]),S.useEffect(()=>{try{const G=String((window==null?void 0:window.__nativeAppVersion)||"").trim();G&&k(G);const X=window==null?void 0:window.__nativeAppVersionCode;if(typeof X=="number"){x(X);try{localStorage.setItem("android_installed_code",String(X))}catch{}}try{G&&localStorage.setItem("android_installed_version",G)}catch{}}catch{}const J=G=>{var X,K;try{const Z=String((((X=G==null?void 0:G.detail)==null?void 0:X.version)??"")||"").trim(),oe=(K=G==null?void 0:G.detail)==null?void 0:K.code;Z&&k(Z);try{Z&&localStorage.setItem("android_installed_version",Z)}catch{}typeof oe=="number"&&x(oe)}catch{}};try{window.addEventListener("native-app-version",J)}catch{}return()=>{try{window.removeEventListener("native-app-version",J)}catch{}}},[]),S.useEffect(()=>{try{const J=(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android",G=String(R||"").trim();if(!J||!G||!(n!=null&&n.uid))return;(async()=>{try{const{doc:X,setDoc:K,serverTimestamp:Z}=await Q(async()=>{const{doc:he,setDoc:ge,serverTimestamp:_e}=await Promise.resolve().then(()=>un);return{doc:he,setDoc:ge,serverTimestamp:_e}},void 0,import.meta.url),{db:oe}=await Q(async()=>{const{db:he}=await Promise.resolve().then(()=>Rt);return{db:he}},void 0,import.meta.url);await K(X(oe,"profiles",n.uid),{androidInstalledVersion:G,androidInstalledAt:Z()},{merge:!0});try{localStorage.setItem("android_installed_version",G)}catch{}}catch{}})()}catch{}},[R,n==null?void 0:n.uid]),S.useEffect(()=>{xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android"&&(async()=>{try{await Q(()=>import("./ProtectedUserDashboard-bO8wCs8P.js"),__vite__mapDeps([39,40,23,34,21,10,35]),import.meta.url),await Q(()=>import("./UserDashboardPage-BzYEvmUK.js"),__vite__mapDeps([65,1,33,18,21,34,10,35,26,6,46,45,28,5,53,15,11,37,51,42,43,52,38,12,60,4,8,36,29,40,22,44,48,58,7]),import.meta.url),await Q(()=>Promise.resolve().then(()=>$q),void 0,import.meta.url),await Q(()=>import("./ProfileSettingsPage-YEAVop1f.js"),__vite__mapDeps([57,1,21,52,58,34,10,35,46,5,54,7]),import.meta.url),await Q(()=>import("./TransactionsPage-B8JCFYlT.js"),__vite__mapDeps([59,1,18,33,43,60,53,34,21,10,35,4,45,12,8,15,36,37,5,38]),import.meta.url)}catch{}})()},[]),S.useEffect(()=>{if(!t)return;const J=document.createElement("style");J.setAttribute("data-disable-pull-to-refresh","true"),J.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(J);let G=0,X=null;const K=oe=>{var he,ge;G=((ge=(he=oe.touches)==null?void 0:he[0])==null?void 0:ge.clientY)||0,X=oe.target},Z=oe=>{var ye,fe;const he=((fe=(ye=oe.touches)==null?void 0:ye[0])==null?void 0:fe.clientY)||0,ge=document.scrollingElement||document.documentElement,_e=ge.scrollTop||window.scrollY||0,ze=ge.scrollHeight-ge.clientHeight||0,de=X||null,Me=(()=>{let Fe=de;for(;Fe&&Fe!==document.body;){const st=window.getComputedStyle(Fe).overflowY;if((st==="auto"||st==="scroll")&&Fe.scrollHeight>Fe.clientHeight)return!0;Fe=Fe.parentElement}return!1})();!Me&&_e<=0&&he>G&&oe.cancelable&&oe.preventDefault(),!Me&&_e>=ze&&he<G&&oe.cancelable&&oe.preventDefault()};return document.addEventListener("touchstart",K,{passive:!0}),document.addEventListener("touchmove",Z,{passive:!1}),()=>{document.removeEventListener("touchstart",K),document.removeEventListener("touchmove",Z);try{document.head.removeChild(J)}catch{}}},[t]),S.useEffect(()=>{if(!((xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"))return;try{const K=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=K,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const K=(window.location.assign||(Z=>{})).bind(window.location);window.__originalAssign=K,window.location.assign=Z=>{try{if(String(Z||"").startsWith("/user/dashboard")){o("/user/dashboard");return}}catch{}try{K(Z)}catch{}}}catch{}let G=null,X=!1;return(async()=>{try{const{listenAndroidUpdates:K}=await Q(async()=>{const{listenAndroidUpdates:Z}=await Promise.resolve().then(()=>Xq);return{listenAndroidUpdates:Z}},void 0,import.meta.url);G=K(Z=>{if(X)return;const oe=String((Z==null?void 0:Z.version)||"").trim(),he=String((Z==null?void 0:Z.url)||"").trim(),ge=String((Z==null?void 0:Z.notes)||"").trim(),_e=!!(Z!=null&&Z.force),ze=typeof(Z==null?void 0:Z.code)=="number"?Z.code:void 0,de=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),Me=String(y||de||"").trim(),ye=(ne,Ce)=>{const me=String(ne||"").replace(/^v/i,"").split(".").map(je=>parseInt(je,10)||0),Qe=String(Ce||"").replace(/^v/i,"").split(".").map(je=>parseInt(je,10)||0);for(let je=0;je<Math.max(me.length,Qe.length);je++){const ft=me[je]||0,Ae=Qe[je]||0;if(ft>Ae)return 1;if(ft<Ae)return-1}return 0},fe=String(R||"").trim(),Fe=String(localStorage.getItem("android_installed_version")||"").trim(),De=localStorage.getItem("android_installed_code"),st=De?Number(De):null,At=[L,A,st].filter(ne=>typeof ne=="number").reduce((ne,Ce)=>ne===void 0?Ce:Math.max(ne,Ce),void 0),tn=typeof ze=="number"&&typeof At=="number"?ze>At:void 0,Ye=(()=>{const ne=[fe,Me,Fe].filter(Boolean);return ne.length===0?"":ne.reduce((Ce,me)=>ye(me,Ce)>0?me:Ce)})(),ot=ye(oe,Ye)>0;if(!!he&&(!!oe||typeof ze=="number")&&(tn!==void 0?tn:ot)){const ne="   ",Ce=`${ge?ge+`
`:""} : ${oe}`;h({title:ne,message:Ce,apkUrl:he,force:_e,versionId:oe,versionCode:ze}),c(!0)}else try{c(!1)}catch{}})}catch{}})(),()=>{X=!0;try{typeof G=="function"&&G()}catch{}}},[y,R]),S.useEffect(()=>{const J=X=>{const K=(X==null?void 0:X.detail)||{};try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}p(!0),g({percent:K.percent??null,downloaded:K.downloaded??0,total:K.total??0})},G=()=>{try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}p(!1),E(!0),g({percent:100,downloaded:((w==null?void 0:w.total)??(w==null?void 0:w.downloaded)??0)||0,total:(w==null?void 0:w.total)??0});try{const X=String((d==null?void 0:d.versionId)||"").trim();if(X){try{localStorage.setItem("android_last_ack_version_id",X)}catch{}try{localStorage.setItem("android_installed_version",X)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:K,setDoc:Z,serverTimestamp:oe}=await Q(async()=>{const{doc:ge,setDoc:_e,serverTimestamp:ze}=await Promise.resolve().then(()=>un);return{doc:ge,setDoc:_e,serverTimestamp:ze}},void 0,import.meta.url),{db:he}=await Q(async()=>{const{db:ge}=await Promise.resolve().then(()=>Rt);return{db:ge}},void 0,import.meta.url);await Z(K(he,"profiles",n.uid),{lastAckAndroidVersion:X,androidInstalledVersion:X,lastAckAt:oe(),androidInstalledAt:oe()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",J),window.addEventListener("androidUpdateDownloaded",G),()=>{window.removeEventListener("androidUpdateProgress",J),window.removeEventListener("androidUpdateDownloaded",G)}},[]),S.useEffect(()=>((async()=>{var J;try{const{auth:G}=await Q(async()=>{const{auth:Me}=await Promise.resolve().then(()=>Rt);return{auth:Me}},void 0,import.meta.url),X=((J=G.currentUser)==null?void 0:J.uid)||"";if(!X)return;const{db:K}=await Q(async()=>{const{db:Me}=await Promise.resolve().then(()=>Rt);return{db:Me}},void 0,import.meta.url),{collection:Z,query:oe,where:he,onSnapshot:ge}=await Q(async()=>{const{collection:Me,query:ye,where:fe,onSnapshot:Fe}=await Promise.resolve().then(()=>un);return{collection:Me,query:ye,where:fe,onSnapshot:Fe}},void 0,import.meta.url),_e=oe(Z(K,"pendingSmsPopups"),he("userId","==",X),he("status","==","pending")),ze=Date.now(),de=ge(_e,Me=>{var ye,fe,Fe,De,st,At,tn,Ye,ot;try{const at=typeof Me.docChanges=="function"?Me.docChanges():[];for(const pe of at){if(pe.type==="added"){const ne=pe.doc.data()||{},Ce=pe.doc.id;if((fe=(ye=j.current)==null?void 0:ye.has)!=null&&fe.call(ye,Ce))continue;try{const Lt=ne.createdAt||ne.timestamp||(ne.payload||{}).createdAt||(ne.payload||{}).timestamp,wn=Lt&&typeof Lt.toMillis=="function"?Lt.toMillis():typeof ne.createdAtMs=="number"?ne.createdAtMs:typeof(ne.payload||{}).createdAtMs=="number"?(ne.payload||{}).createdAtMs:null;if(typeof wn=="number"&&wn<ze)continue}catch{}let me=ne.amount??((Fe=ne.payload)==null?void 0:Fe.amount)??null,Qe=ne.sender??((De=ne.payload)==null?void 0:De.sender)??"";const je=ne.senderName??((st=ne.payload)==null?void 0:st.senderName)??"";let ft=ne.reference??((At=ne.payload)==null?void 0:At.reference)??"";const Ae=ne.text??((tn=ne.payload)==null?void 0:tn.text)??"";let yt=ne.simNumber??((Ye=ne.payload)==null?void 0:Ye.simNumber)??"";const vt=ne.walletMsisdn??((ot=ne.payload)==null?void 0:ot.walletMsisdn)??"";let lt="VF-Cash";if(/Received\s*EGP/i.test(String(Ae))){lt="InstaPay";const Lt=String(Ae).match(/Received\s*EGP\s*([0-9.,]+)/i);Lt&&(me=parseFloat(String(Lt[1]).replace(/,/g,"")));const wn=String(Ae).match(/from\s+([0-9+]+)/i);wn&&(Qe=yn(wn[1]));const qe=String(Ae).match(/Ref:\s*([A-Za-z0-9\-]+)/i);qe&&(ft=String(qe[1]).trim());try{if(!yt){const tt=localStorage.getItem("sim1Number");tt&&(yt=String(tt).trim())}}catch{}}ee({amount:Number(me||0),sender:String(Qe||""),senderName:je,reference:String(ft||""),text:Ae,simNumber:yt,walletMsisdn:vt,providerLabel:lt,popupId:Ce}),U(!0);try{pr()}catch{}}if(pe.type==="removed"){const ne=pe.doc.id,Ce=(V==null?void 0:V.popupId)||"";Ce&&Ce===ne&&(U(!1),ee(null))}}}catch{}});C.current=de}catch{}})(),()=>{try{const J=C.current;typeof J=="function"&&J()}catch{}}),[n==null?void 0:n.uid]),S.useEffect(()=>{const J=(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android",G=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(J||G)return;let X=!1;return(async()=>{try{const K="0.0.0",Z=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!Z.ok)return;const oe=await Z.json(),he=String((oe==null?void 0:oe.version)||"0.0.0"),ge=!!(oe!=null&&oe.force);if(!X&&((ze,de)=>{const Me=String(ze).split(".").map(fe=>parseInt(fe,10)||0),ye=String(de).split(".").map(fe=>parseInt(fe,10)||0);for(let fe=0;fe<Math.max(Me.length,ye.length);fe++){const Fe=Me[fe]||0,De=ye[fe]||0;if(Fe>De)return 1;if(Fe<De)return-1}return 0})(he,K)>0){if(ge){try{window.location.reload()}catch{}return}try{a({title:"  ",description:` ${he}      `})}catch{}}}catch{}})(),()=>{X=!0}},[]);const vn=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),xr=(()=>{const J=(X,K)=>{const Z=String(X||"").replace(/^v/i,"").split(".").map(he=>parseInt(he,10)||0),oe=String(K||"").replace(/^v/i,"").split(".").map(he=>parseInt(he,10)||0);for(let he=0;he<Math.max(Z.length,oe.length);he++){const ge=Z[he]||0,_e=oe[he]||0;if(ge>_e)return 1;if(ge<_e)return-1}return 0},G=[R,y,vn].filter(Boolean);return G.length===0?"":G.reduce((X,K)=>J(K,X)>0?K:X)})();return I.jsxs(I.Fragment,{children:[se&&(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"&&I.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:I.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[I.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:I.jsx("span",{className:"text-2xl",children:"!"})}),I.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),I.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),I.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:I.jsx(Ki,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),l&&d&&I.jsx(WA,{open:l,onOpenChange:J=>{d!=null&&d.force||c(J)},children:I.jsxs(Zw,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[I.jsxs(e_,{className:"text-center",children:[I.jsx(t_,{className:"text-base md:text-lg font-bold text-gray-900",children:d.title}),I.jsx(n_,{className:"text-sm text-gray-700 whitespace-pre-line",children:d.message}),I.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:xr?`  : v${xr}`:""})]}),I.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!d.force&&!f&&!v&&I.jsx(Ki,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>c(!1),children:""}),!v&&I.jsx(Ki,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const J=String((d==null?void 0:d.versionId)||"").trim(),G=d==null?void 0:d.versionCode;if(J)try{localStorage.setItem("android_last_ack_version_id",J)}catch{}if(typeof G=="number")try{localStorage.setItem("android_last_ack_code",String(G))}catch{}if((async()=>{try{if(n!=null&&n.uid&&J){const{doc:K,setDoc:Z,serverTimestamp:oe}=await Q(async()=>{const{doc:_e,setDoc:ze,serverTimestamp:de}=await Promise.resolve().then(()=>un);return{doc:_e,setDoc:ze,serverTimestamp:de}},void 0,import.meta.url),{db:he}=await Q(async()=>{const{db:_e}=await Promise.resolve().then(()=>Rt);return{db:_e}},void 0,import.meta.url),ge={lastAckAndroidVersion:J,lastAckAt:oe()};typeof G=="number"&&(ge.lastAckAndroidCode=G),await Z(K(he,"profiles",n.uid),ge,{merge:!0})}}catch{}})(),(xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"){const K=d.apkUrl,Z=`cashy://update?url=${encodeURIComponent(K)}`;p(!0),g({percent:0,downloaded:0,total:0});try{D.current&&clearInterval(D.current),D.current=setInterval(()=>{g(oe=>{const he=typeof(oe==null?void 0:oe.percent)=="number"?oe.percent:0,ge=O.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(he+ge))),downloaded:(oe==null?void 0:oe.downloaded)??0,total:(oe==null?void 0:oe.total)??0}})},600)}catch{}window.location.href=Z;try{P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{try{O.current=!1}catch{}try{P.current=null}catch{}},8e3)}catch{}}else{const K=d.apkUrl;try{window.open(K,"_blank")}catch{}}}catch{}},children:f?" ...":" "}),v&&I.jsx(Ki,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((xe==null?void 0:xe.isNativePlatform)&&xe.getPlatform()==="android"){c(!1);try{const G=String((d==null?void 0:d.versionId)||"").trim();if(G){try{localStorage.setItem("android_last_ack_version_id",G)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:X,setDoc:K,serverTimestamp:Z}=await Q(async()=>{const{doc:_e,setDoc:ze,serverTimestamp:de}=await Promise.resolve().then(()=>un);return{doc:_e,setDoc:ze,serverTimestamp:de}},void 0,import.meta.url),{db:oe}=await Q(async()=>{const{db:_e}=await Promise.resolve().then(()=>Rt);return{db:_e}},void 0,import.meta.url),he={lastAckAndroidVersion:G,androidInstalledVersion:G,lastAckAt:Z(),androidInstalledAt:Z()},ge=d==null?void 0:d.versionCode;if(typeof ge=="number"){he.lastAckAndroidCode=ge,he.androidInstalledCode=ge;try{localStorage.setItem("android_installed_code",String(ge)),localStorage.setItem("android_last_ack_code",String(ge))}catch{}}await K(X(oe,"profiles",n.uid),he,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),f&&I.jsxs("div",{className:"mt-3 text-center",children:[I.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:I.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((w==null?void 0:w.percent)||0)))}%`}})}),I.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((w==null?void 0:w.percent)||0),"%"]})]})]})}),i&&I.jsx(WA,{open:ue,onOpenChange:async J=>{var G,X;if(U(J),!J){try{const K=(V==null?void 0:V.popupId)||"";if(K){const{db:Z}=await Q(async()=>{const{db:_e}=await Promise.resolve().then(()=>Rt);return{db:_e}},void 0,import.meta.url),{doc:oe,updateDoc:he,serverTimestamp:ge}=await Q(async()=>{const{doc:_e,updateDoc:ze,serverTimestamp:de}=await Promise.resolve().then(()=>un);return{doc:_e,updateDoc:ze,serverTimestamp:de}},void 0,import.meta.url);try{await he(oe(Z,"pendingSmsPopups",K),{status:"dismissed",dismissedAt:ge()})}catch{}try{(X=(G=j.current)==null?void 0:G.add)==null||X.call(G,K);const _e=Array.from(j.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(_e))}catch{}}}catch{}Je(!1),H(""),Ht(""),Be(""),Ot(!1),On(0)}},children:I.jsxs(Zw,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[I.jsxs(e_,{children:[I.jsx(t_,{children:V!=null&&V.providerLabel?I.jsxs(I.Fragment,{children:["   ",I.jsx("span",{className:"text-red-600",children:V.providerLabel})]}):"   "}),I.jsx(n_,{})]}),I.jsxs("div",{className:"text-sm",children:[I.jsx("div",{className:"border rounded-lg p-3",children:I.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:"font-bold",children:[" ",(Ho=V==null?void 0:V.amount)==null?void 0:Ho.toLocaleString()]}),I.jsx("div",{className:"font-mono",children:(V==null?void 0:V.sender)||""}),(V==null?void 0:V.simNumber)&&I.jsx("div",{className:"font-mono",children:V==null?void 0:V.simNumber}),(V==null?void 0:V.senderName)&&I.jsx("div",{children:V==null?void 0:V.senderName}),(V==null?void 0:V.reference)&&I.jsx("div",{className:"font-mono",children:V==null?void 0:V.reference}),(V==null?void 0:V.walletMsisdn)&&I.jsx("div",{className:"font-mono",children:V==null?void 0:V.walletMsisdn})]}),I.jsxs("div",{className:"space-y-2 text-right",children:[I.jsx("div",{children:"  "}),I.jsx("div",{children:" "}),(V==null?void 0:V.simNumber)&&I.jsx("div",{children:" "}),(V==null?void 0:V.senderName)&&I.jsx("div",{children:"  "}),(V==null?void 0:V.reference)&&I.jsx("div",{children:"  "}),(V==null?void 0:V.walletMsisdn)&&I.jsx("div",{children:"  "})]})]})}),Ne&&I.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[I.jsx("span",{className:"flex-1",children:"  ()"}),I.jsx("input",{type:"number",step:"0.01",min:"0",value:ae,onChange:J=>H(J.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),We&&I.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("div",{className:"text-sm",children:" "}),I.jsxs("div",{className:"font-bold",children:[" ",en.toLocaleString()]})]}),I.jsx("div",{className:"mt-3",children:I.jsx("input",{type:"text",value:Se,onChange:J=>Ht(J.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),I.jsx("div",{className:"mt-3",children:I.jsx(Ki,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Je(!0),Ot(!1)},children:""})})]}),Oe&&!We&&I.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),I.jsx("div",{className:"pt-2",children:I.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var J;try{const X=String((V==null?void 0:V.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),K=X?parseFloat(String(X[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),{auth:Z}=await Q(async()=>{const{auth:ye}=await Promise.resolve().then(()=>Rt);return{auth:ye}},void 0,import.meta.url),oe=((J=Z.currentUser)==null?void 0:J.uid)||"",he=oe?`selectedWallet_${oe}`:"selectedWallet_default",ge=localStorage.getItem(he)||"",_e=ae&&ae.trim()!==""?Math.max(0,parseFloat(ae)):null;let ze=0;if(_e!=null)ze=_e;else try{const{merchantWalletService:ye}=await Q(async()=>{const{merchantWalletService:De}=await Promise.resolve().then(()=>Au);return{merchantWalletService:De}},void 0,import.meta.url),fe=await ye.getById(String(ge)),Fe=fe&&fe.defaultWithdrawCommission;if(Fe!=null)ze=Math.round((Number(Fe)||0)*Number(K)/1e3*100)/100;else{const{calculateCommission:De}=await Q(async()=>{const{calculateCommission:st}=await Promise.resolve().then(()=>Ll);return{calculateCommission:st}},void 0,import.meta.url);ze=De(Number(K),"receive")}}catch{const{calculateCommission:ye}=await Q(async()=>{const{calculateCommission:fe}=await Promise.resolve().then(()=>Ll);return{calculateCommission:fe}},void 0,import.meta.url);ze=ye(Number(K),"receive")}const Me=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(K)+Number(ze):Number(K);On(Math.round(Me*100)/100),Ot(!0)}catch{Ot(!0)}},children:""})})]}),I.jsx("div",{className:"pt-3",children:I.jsx(Ki,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const J=String((V==null?void 0:V.text)||""),G=J.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),X=G?parseFloat(String(G[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),K=J.match(/\s+\s+(\d+)/i),Z=String((V==null?void 0:V.sender)||(K?K[1]:"")||""),oe=J.match(/\s*\s*([\d\.]+)/i),he=String((V==null?void 0:V.reference)||(oe?oe[1]:String(Date.now())));gt({...V,amount:X,sender:Z,reference:he,deferredMode:Oe,debtorName:Se,debtorNote:Ze})}catch{gt()}},children:" "})})]})})]})},mx=()=>{const t=Ys(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?I.jsxs(I.Fragment,{children:[I.jsx(EU,{}),I.jsx(n4,{})]}):null},gx=()=>{const{user:t,loading:e}=tl();return e?I.jsx(Yw,{}):t?I.jsx(Zf,{}):I.jsx(dm,{})},OK=()=>I.jsx(b3,{client:R2,children:I.jsx(N6,{children:I.jsxs(zj,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android")&&I.jsx(Zq,{}),I.jsx(NK,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&kK||xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android")?I.jsxs(R6,{children:[I.jsx(px,{}),I.jsx(mx,{}),I.jsx(S.Suspense,{fallback:I.jsx(Yw,{}),children:I.jsxs(ES,{children:[I.jsx(Ie,{path:"/",element:xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android"?I.jsx(gx,{}):I.jsx(wf,{})}),I.jsx(Ie,{path:"/dashboard-redirect",element:I.jsx(qA,{})}),I.jsx(Ie,{path:"/landing",element:I.jsx(wf,{})}),I.jsx(Ie,{path:"/subscriptions",element:I.jsx(HA,{})}),I.jsx(Ie,{path:"/auth",element:I.jsx(KA,{})}),I.jsx(Ie,{path:"/user/login",element:I.jsx(dm,{})}),I.jsx(Ie,{path:"/user/forgot-password",element:I.jsx(JA,{})}),I.jsx(Ie,{path:"/user/register",element:I.jsx(Ef,{})}),I.jsx(Ie,{path:"/register",element:I.jsx(Ef,{})}),I.jsx(Ie,{path:"/user/account-setup",element:I.jsx(YA,{})}),I.jsx(Ie,{path:"/user/pending-approval",element:I.jsx(tx,{})}),I.jsx(Ie,{path:"/user/dashboard",element:I.jsx(Zf,{})}),I.jsx(Ie,{path:"/branch/:shopId/dashboard",element:I.jsx(Zf,{})}),I.jsx(Ie,{path:"/user/add-wallet",element:I.jsx(ax,{})}),I.jsx(Ie,{path:"/admin/login",element:I.jsx(nx,{})}),I.jsx(Ie,{path:"/admin/dashboard",element:I.jsx(rx,{})}),I.jsx(Ie,{path:"/admin/topups",element:I.jsx(GA,{})}),I.jsx(Ie,{path:"/admin/notifications",element:I.jsx(QA,{})}),I.jsx(Ie,{path:"/profile-settings",element:I.jsx(ix,{})}),I.jsx(Ie,{path:"/transactions",element:I.jsx(ox,{})}),I.jsx(Ie,{path:"/referrals",element:I.jsx(lx,{})}),I.jsx(Ie,{path:"/privacy-policy",element:I.jsx(hx,{})}),I.jsx(Ie,{path:"/cpanel",element:I.jsx(cx,{})}),I.jsx(Ie,{path:"/cpanel/login",element:I.jsx(ux,{})}),I.jsx(Ie,{path:"/auth-test",element:I.jsx(sx,{})}),I.jsx(Ie,{path:"/topup",element:I.jsx(_f,{})}),I.jsx(Ie,{path:"/recharge",element:I.jsx(_f,{})}),I.jsx(Ie,{path:"/merchant/*",element:I.jsx(ex,{})}),I.jsx(Ie,{path:"/dashboard/login",element:I.jsx(XA,{})}),I.jsx(Ie,{path:"/dashboard",element:I.jsx(ZA,{})}),I.jsx(Ie,{path:"*",element:I.jsx(dx,{})})]})}),I.jsx(fx,{})]}):I.jsxs(x6,{children:[I.jsx(px,{}),I.jsx(mx,{}),I.jsx(S.Suspense,{fallback:I.jsx(Yw,{}),children:I.jsxs(ES,{children:[I.jsx(Ie,{path:"/",element:xe!=null&&xe.isNativePlatform&&xe.getPlatform()==="android"?I.jsx(gx,{}):I.jsx(wf,{})}),I.jsx(Ie,{path:"/dashboard-redirect",element:I.jsx(qA,{})}),I.jsx(Ie,{path:"/landing",element:I.jsx(wf,{})}),I.jsx(Ie,{path:"/subscriptions",element:I.jsx(HA,{})}),I.jsx(Ie,{path:"/auth",element:I.jsx(KA,{})}),I.jsx(Ie,{path:"/user/login",element:I.jsx(dm,{})}),I.jsx(Ie,{path:"/user/forgot-password",element:I.jsx(JA,{})}),I.jsx(Ie,{path:"/user/register",element:I.jsx(Ef,{})}),I.jsx(Ie,{path:"/register",element:I.jsx(Ef,{})}),I.jsx(Ie,{path:"/user/account-setup",element:I.jsx(YA,{})}),I.jsx(Ie,{path:"/user/pending-approval",element:I.jsx(tx,{})}),I.jsx(Ie,{path:"/user/dashboard",element:I.jsx(Zf,{})}),I.jsx(Ie,{path:"/user/add-wallet",element:I.jsx(ax,{})}),I.jsx(Ie,{path:"/admin/login",element:I.jsx(nx,{})}),I.jsx(Ie,{path:"/admin/dashboard",element:I.jsx(rx,{})}),I.jsx(Ie,{path:"/admin/topups",element:I.jsx(GA,{})}),I.jsx(Ie,{path:"/admin/notifications",element:I.jsx(QA,{})}),I.jsx(Ie,{path:"/profile-settings",element:I.jsx(ix,{})}),I.jsx(Ie,{path:"/transactions",element:I.jsx(ox,{})}),I.jsx(Ie,{path:"/referrals",element:I.jsx(lx,{})}),I.jsx(Ie,{path:"/privacy-policy",element:I.jsx(hx,{})}),I.jsx(Ie,{path:"/cpanel",element:I.jsx(cx,{})}),I.jsx(Ie,{path:"/cpanel/login",element:I.jsx(ux,{})}),I.jsx(Ie,{path:"/auth-test",element:I.jsx(sx,{})}),I.jsx(Ie,{path:"/topup",element:I.jsx(_f,{})}),I.jsx(Ie,{path:"/recharge",element:I.jsx(_f,{})}),I.jsx(Ie,{path:"/merchant/*",element:I.jsx(ex,{})}),I.jsx(Ie,{path:"/dashboard/login",element:I.jsx(XA,{})}),I.jsx(Ie,{path:"/dashboard",element:I.jsx(ZA,{})}),I.jsx(Ie,{path:"*",element:I.jsx(dx,{})})]})}),I.jsx(fx,{})]})]})})}),Zy=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await Q(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>Vl);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},LK=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await Q(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>Vl);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(p=>!!(p!=null&&p.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},P2=S.createContext(void 0),VK=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!1),[i,o]=S.useState(null),{profile:a,user:l}=tl();S.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),p=localStorage.getItem("cashier_shift_active"),w=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),p&&s(p==="true"),w&&o(Number(w))}catch{}},[]),S.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=be(q,"cashierShift",a.shopId);let p=null;return(async()=>{try{(await Qt(f)).exists()||await an(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),p=Ii(f,g=>{if(g.exists()){const v=g.data(),E=(v==null?void 0:v.shiftUser)||null,y=!!(v!=null&&v.isShiftActive),_=(v==null?void 0:v.shiftStartAt)??null;let R=E;if(!R)try{const k=localStorage.getItem("cashier_shift_user"),L=k?JSON.parse(k):null;L&&(R=L)}catch{}n(R),s(y),o(typeof _=="number"?_:_?Number(_):null);try{R?localStorage.setItem("cashier_shift_user",JSON.stringify(R)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",y?"true":"false"),_!=null&&localStorage.setItem("cashier_shift_start_at",String(_))}catch{}}},g=>{console.warn("cashierShift snapshot error:",g)})}catch(w){console.warn("Failed to init cashierShift doc:",w)}})(),()=>{p&&p()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const p=be(q,"cashierShift",a.shopId);gn(p,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const p=be(q,"cashierShift",a.shopId);gn(p,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const w=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,g=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let E=localStorage.getItem(w);if(E==null){const _=localStorage.getItem(g);if(_!=null){E=_;try{localStorage.setItem(w,_),localStorage.removeItem(g)}catch{}}}if(E==null&&(l!=null&&l.uid)){const _=localStorage.getItem("cashBalance"),R=localStorage.getItem("userCashBalance");if(_!=null){try{localStorage.setItem(w,_),localStorage.removeItem("cashBalance")}catch{}E=_}else if(R!=null){try{localStorage.setItem(w,R),localStorage.removeItem("userCashBalance")}catch{}E=R}}const y=localStorage.getItem(v);E?localStorage.setItem("shiftStartDrawerFunds",E):localStorage.setItem("shiftStartDrawerFunds","0"),y?localStorage.setItem("shiftStartWalletBalances",y):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const p=be(q,"dashboardData",a.shopId),w=await Qt(p);if(w.exists()){const g=w.data(),v=Number((g==null?void 0:g.cashBalance)??0),E=(g==null?void 0:g.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),_=localStorage.getItem("shiftStartWalletBalances"),R=y?parseFloat(y):0,k=_?JSON.parse(_):{},L=!y||!Number.isFinite(R)||R===0,x=!_||Object.keys(k||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),x&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(E||{}))}catch{}}}catch(p){console.warn("Shift start Firebase read failed:",p)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=be(q,"cashierShift",a.shopId);gn(f,{isShiftActive:!1})}}catch{}};return I.jsx(P2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},yG=()=>{const t=S.useContext(P2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{GO()}catch{}const MK=()=>{const{theme:t="system"}=U1();return S.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};XP(document.getElementById("root")).render(I.jsx(SU,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:I.jsx(Lq,{children:I.jsx(VK,{children:I.jsxs(EH,{children:[I.jsx(OK,{}),I.jsx(MK,{})]})})})}));export{Ys as $,TF as A,Ki as B,Hn as C,oG as D,RF as E,pf as F,m5 as G,an as H,lw as I,Nt as J,Qt as K,D6 as L,NF as M,QK as N,gn as O,Gw as P,AF as Q,$ as R,Tl as S,jn as T,FF as U,A1 as V,WA as W,Zw as X,e_ as Y,t_ as Z,DK as _,$c as a,jK as a$,ds as a0,Yr as a1,Vc as a2,NM as a3,py as a4,Xt as a5,Ct as a6,Un as a7,t0 as a8,qs as a9,oq as aA,fq as aB,n_ as aC,Wc as aD,ZK as aE,Vq as aF,X1 as aG,JK as aH,U1 as aI,qO as aJ,OF as aK,lG as aL,cG as aM,uG as aN,Sq as aO,dG as aP,eH as aQ,kA as aR,Xa as aS,SM as aT,TH as aU,R7 as aV,Eq as aW,SF as aX,CF as aY,UF as aZ,eC as a_,NO as aa,Hq as ab,VF as ac,Q as ad,Qf as ae,yG as af,wH as ag,xe as ah,FI as ai,IF as aj,rO as ak,$E as al,Yw as am,$I as an,ES as ao,Ie as ap,lo as aq,jI as ar,xF as as,aG as at,pm as au,Ve as av,i0 as aw,P7 as ax,aq as ay,iG as az,YK as b,hG as b$,Ij as b0,e0 as b1,gK as b2,t1 as b3,CH as b4,i2 as b5,bd as b6,YO as b7,km as b8,Sj as b9,v3 as bA,e3 as bB,lr as bC,WK as bD,KK as bE,FE as bF,iH as bG,hy as bH,_t as bI,gG as bJ,_q as bK,pG as bL,AK as bM,RK as bN,mG as bO,S2 as bP,PM as bQ,b2 as bR,A2 as bS,PK as bT,I2 as bU,xK as bV,O6 as bW,GK as bX,kO as bY,ca as bZ,tH as b_,bj as ba,ZP as bb,bF as bc,yi as bd,JM as be,sh as bf,eG as bg,zO as bh,WO as bi,MF as bj,Jq as bk,Yq as bl,kn as bm,PA as bn,Qq as bo,$m as bp,s3 as bq,Jj as br,zK as bs,nw as bt,ar as bu,Bm as bv,Qj as bw,Yj as bx,Pp as by,wC as bz,Z_ as c,RO as c0,Tq as c1,EF as c2,un as c3,Rt as c4,Au as c5,By as c6,Xq as c7,fG as c8,Jw as c9,qq as d,zq as e,Pt as f,Wq as g,Re as h,q as i,I as j,Ke as k,So as l,sG as m,hq as n,zs as o,Ws as p,$e as q,S as r,Ue as s,UI as t,tl as u,kF as v,PF as w,p5 as x,be as y,Ii as z};
//# sourceMappingURL=index-Dosh6Hoe.js.map
