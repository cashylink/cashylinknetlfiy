{"version":3,"file":"AdminLogin-BHZdno0g.js","sources":["../../src/pages/AdminLogin.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth, db } from '../firebase';\r\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { toast } from 'sonner';\r\nimport { Eye, EyeOff, Shield, Lock, Mail } from 'lucide-react';\r\n\r\nconst AdminLogin: React.FC = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // ุงุณุชุฑุฌุงุน ุขุฎุฑ ุจุฑูุฏ ูุณุชุฎุฏู\r\n  useEffect(() => {\r\n    try {\r\n      const last = typeof window !== 'undefined' ? window.localStorage.getItem('cashy:lastEmail') : null;\r\n      if (last) setEmail(last);\r\n    } catch {}\r\n  }, []);\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    // ุญุงุฑุณ ุงูุชูููุฐ ุงููุชูุฑุฑ\r\n    if (loading) {\r\n      toast.info('ุฌุงุฑู ุชูููุฐ ุชุณุฌูู ุงูุฏุฎููุ ูุฑุฌู ุงูุงูุชุธุงุฑ...');\r\n      return;\r\n    }\r\n    // ูุญุต ุงูุงุชุตุงู\r\n    if (typeof navigator !== 'undefined' && navigator.onLine === false) {\r\n      toast.error('ูุง ููุฌุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช. ูุฑุฌู ุงูุชุฃูุฏ ูู ุงูุดุจูุฉ ุซู ุงููุญุงููุฉ.');\r\n      return;\r\n    }\r\n    \r\n    // ุงูุชุญูู ูู ุจูุงูุงุช ุงูุฏุฎูู ุงููุญุฏุฏุฉ ูุน ุฑุณุงุฆู ุฏูููุฉ ููุฃุฎุทุงุก\r\n    const expectedEmail = 'alkaptin7878@mail.ru';\r\n    const expectedPassword = '01123456';\r\n    if (email !== expectedEmail || password !== expectedPassword) {\r\n      if (email !== expectedEmail && password !== expectedPassword) {\r\n        toast.error('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ');\r\n      } else if (email !== expectedEmail) {\r\n        toast.error('ูุง ููุฌุฏ ุญุณุงุจ ุจูุฐุง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู');\r\n      } else {\r\n        toast.error('ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ');\r\n      }\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    \r\n    try {\r\n      await signInWithEmailAndPassword(auth, email, password);\r\n\r\n      // ุชุนููู ุฏูุฑ ุงูุญุณุงุจ ูุจุฑููุงูู ุฅุฏุงุฑู (staff) ูุถูุงู ุธููุฑ ุตูุงุญูุงุช ุงูุฅุฏุงุฑุฉ\r\n      const uid = auth.currentUser?.uid;\r\n      if (uid) {\r\n        try {\r\n          await setDoc(\r\n            doc(db, 'profiles', uid),\r\n            {\r\n              role: 'staff',\r\n              approved: true,\r\n              updatedAt: serverTimestamp()\r\n            },\r\n            { merge: true }\r\n          );\r\n        } catch (profileError) {\r\n          console.error('ุฎุทุฃ ุฃุซูุงุก ุชุญุฏูุซ ุฏูุฑ ุงูุจุฑููุงูู:', profileError);\r\n        }\r\n      }\r\n\r\n      toast.success('ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ');\r\n      navigate('/admin/dashboard');\r\n    } catch (error: any) {\r\n      console.error('ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู:', error);\r\n      toast.error('ูุดู ูู ุชุณุฌูู ุงูุฏุฎูู');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 relative overflow-hidden flex items-center justify-center p-4 bg-fixed bg-no-repeat bg-cover\"\r\n      style={{ backgroundImage: 'var(--bg-purple-gradient)' }}\r\n    >\r\n      {/* ุทุจูุฉ ุชููุฌ ุดุนุงุนู ุฎููู ูุฅุจุฑุงุฒ ุงูุฎูููุฉ ุงูุจููุณุฌูุฉ ูุซู ุชุทุจูู ุงูููุจููุชุฑ */}\r\n      <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(168,85,247,0.18),_transparent_70%)]\" />\r\n      \r\n      <div className=\"relative w-full max-w-md\">\r\n        {/* ุดุนุงุฑ ุงูุฅุฏุงุฑุฉ */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full mb-4 shadow-2xl\">\r\n            <Shield className=\"w-10 h-10 text-white\" />\r\n          </div>\r\n          <h1 className=\"text-3xl font-bold text-white mb-2\">ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ</h1>\r\n          <p className=\"text-gray-300\">ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ</p>\r\n        </div>\r\n\r\n        {/* ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู */}\r\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20\">\r\n          <form onSubmit={handleLogin} className=\"space-y-6\">\r\n            {/* ุญูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู */}\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-200\">\r\n                ุงูุจุฑูุฏ ุงูุฅููุชุฑููู\r\n              </label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className=\"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200\"\r\n                  placeholder=\"ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู\"\r\n                  required\r\n                  dir=\"ltr\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* ุญูู ูููุฉ ุงููุฑูุฑ */}\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-200\">\r\n                ูููุฉ ุงููุฑูุฑ\r\n              </label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <input\r\n                  id=\"password\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"w-full pl-12 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200\"\r\n                  placeholder=\"ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ\"\r\n                  autoComplete=\"off\"\r\n                  required\r\n                  dir=\"ltr\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors\"\r\n                >\r\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ุฒุฑ ุชุณุฌูู ุงูุฏุฎูู */}\r\n            <button\r\n              type=\"submit\"\r\n              onClick={(e) => {\r\n                if (loading) {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  toast.info('ุฌุงุฑู ุชูููุฐ ุชุณุฌูู ุงูุฏุฎููุ ูุฑุฌู ุงูุงูุชุธุงุฑ...');\r\n                } else if (typeof navigator !== 'undefined' && navigator.onLine === false) {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  toast.error('ูุง ููุฌุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช. ูุฑุฌู ุงูุชุฃูุฏ ูู ุงูุดุจูุฉ ุซู ุงููุญุงููุฉ.');\r\n                }\r\n              }}\r\n              className=\"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-transparent transition-all duration-200 shadow-lg\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex items-center justify-center\">\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2\"></div>\r\n                  ุฌุงุฑู ุชุณุฌูู ุงูุฏุฎูู...\r\n                </div>\r\n              ) : (\r\n                'ุชุณุฌูู ุงูุฏุฎูู'\r\n              )}\r\n            </button>\r\n          </form>\r\n\r\n          {/* ูุนูููุงุช ุฅุถุงููุฉ */}\r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-xs text-gray-400\">\r\n              ูุฎุตุต ูููุฏูุฑูู ุงููุนุชูุฏูู ููุท\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ุชุญุฐูุฑ ุฃููู */}\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-xs text-gray-500\">\r\n            ๐ ุฌูุณุฉ ุขููุฉ ููุดูุฑุฉ\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminLogin;"],"names":["AdminLogin","email","setEmail","useState","password","setPassword","showPassword","setShowPassword","loading","setLoading","navigate","useNavigate","useEffect","last","handleLogin","e","toast","expectedEmail","expectedPassword","signInWithEmailAndPassword","auth","uid","_a","setDoc","doc","db","serverTimestamp","profileError","error","jsxs","jsx","Shield","Mail","Lock","EyeOff","Eye"],"mappings":"qIAQA,MAAMA,EAAuB,IAAM,CACjC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAE,EACrC,CAACG,EAAcC,CAAe,EAAIJ,EAAAA,SAAS,EAAK,EAChD,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAS,EAAK,EACtCO,EAAWC,EAAA,EAGjBC,EAAAA,UAAU,IAAM,CACd,GAAI,CACF,MAAMC,EAAO,OAAO,OAAW,IAAc,OAAO,aAAa,QAAQ,iBAAiB,EAAI,KAC1FA,KAAeA,CAAI,CACzB,MAAQ,CAAC,CACX,EAAG,CAAA,CAAE,EAEL,MAAMC,EAAc,MAAOC,GAAuB,OAGhD,GAFAA,EAAE,eAAA,EAEEP,EAAS,CACXQ,EAAM,KAAK,2CAA2C,EACtD,MACF,CAEA,GAAI,OAAO,UAAc,KAAe,UAAU,SAAW,GAAO,CAClEA,EAAM,MAAM,6DAA6D,EACzE,MACF,CAGA,MAAMC,EAAgB,uBAChBC,EAAmB,WACzB,GAAIjB,IAAUgB,GAAiBb,IAAac,EAAkB,CACxDjB,IAAUgB,GAAiBb,IAAac,EAC1CF,EAAM,MAAM,4CAA4C,EAC/Cf,IAAUgB,EACnBD,EAAM,MAAM,qCAAqC,EAEjDA,EAAM,MAAM,uBAAuB,EAErC,MACF,CAEAP,EAAW,EAAI,EAEf,GAAI,CACF,MAAMU,EAA2BC,EAAMnB,EAAOG,CAAQ,EAGtD,MAAMiB,GAAMC,EAAAF,EAAK,cAAL,YAAAE,EAAkB,IAC9B,GAAID,EACF,GAAI,CACF,MAAME,EACJC,EAAIC,EAAI,WAAYJ,CAAG,EACvB,CACE,KAAM,QACN,SAAU,GACV,UAAWK,EAAA,CAAgB,EAE7B,CAAE,MAAO,EAAA,CAAK,CAElB,OAASC,EAAc,CACrB,QAAQ,MAAM,iCAAkCA,CAAY,CAC9D,CAGFX,EAAM,QAAQ,uBAAuB,EACrCN,EAAS,kBAAkB,CAC7B,OAASkB,EAAY,CACnB,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CZ,EAAM,MAAM,qBAAqB,CACnC,QAAA,CACEP,EAAW,EAAK,CAClB,CACF,EAEA,OACEoB,EAAAA,KAAC,MAAA,CACC,UAAU,6GACV,MAAO,CAAE,gBAAiB,2BAAA,EAG1B,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,sHAAA,CAAuH,EAEtID,EAAAA,KAAC,MAAA,CAAI,UAAU,2BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,8HACb,eAACC,EAAA,CAAO,UAAU,uBAAuB,CAAA,CAC3C,EACAD,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,uBAAoB,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,mBAAA,CAAiB,CAAA,EAChD,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iFACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,SAAUf,EAAa,UAAU,YAErC,SAAA,CAAAe,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,QAAQ,UAAU,0CAA0C,SAAA,oBAE3E,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAK,UAAU,0EAAA,CAA2E,EAC3FF,EAAAA,IAAC,QAAA,CACC,GAAG,QACH,KAAK,QACL,MAAO7B,EACP,SAAWc,GAAMb,EAASa,EAAE,OAAO,KAAK,EACxC,UAAU,kNACV,YAAY,yBACZ,SAAQ,GACR,IAAI,KAAA,CAAA,CACN,CAAA,CACF,CAAA,EACF,EAGAc,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,MAAC,QAAA,CAAM,QAAQ,WAAW,UAAU,0CAA0C,SAAA,cAE9E,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACG,EAAA,CAAK,UAAU,0EAAA,CAA2E,EAC3FH,EAAAA,IAAC,QAAA,CACC,GAAG,WACH,KAAMxB,EAAe,OAAS,WAC9B,MAAOF,EACP,SAAWW,GAAMV,EAAYU,EAAE,OAAO,KAAK,EAC3C,UAAU,mNACV,YAAY,mBACZ,aAAa,MACb,SAAQ,GACR,IAAI,KAAA,CAAA,EAENe,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMvB,EAAgB,CAACD,CAAY,EAC5C,UAAU,uGAET,SAAAA,QAAgB4B,EAAA,CAAO,UAAU,UAAU,EAAKJ,EAAAA,IAACK,EAAA,CAAI,UAAU,SAAA,CAAU,CAAA,CAAA,CAC5E,CAAA,CACF,CAAA,EACF,EAGAL,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAUf,GAAM,CACVP,GACFO,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFC,EAAM,KAAK,2CAA2C,GAC7C,OAAO,UAAc,KAAe,UAAU,SAAW,KAClED,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFC,EAAM,MAAM,6DAA6D,EAE7E,EACA,UAAU,wRAET,SAAAR,EACCqB,OAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gEAAA,CAAiE,EAAM,sBAAA,CAAA,CAExF,EAEA,cAAA,CAAA,CAEJ,EACF,EAGAA,EAAAA,IAAC,OAAI,UAAU,mBACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,6BAAA,CAErC,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAAC,OAAI,UAAU,mBACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qBAAA,CAErC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAGN"}