{"version":3,"mappings":"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","names":["PendingApprovalPage","user","signOut","userSubscription","isSubscriptionActive","checkSubscriptionStatus","useFirebaseAuth","navigate","useNavigate","isActivatingTrial","setIsActivatingTrial","useState","isRefreshing","setIsRefreshing","hasUsedTrial","setHasUsedTrial","isOnFreeTrial","setIsOnFreeTrial","trialDurationHours","setTrialDurationHours","PLANS","useEffect","userData","currentSignature","u","sub","activatedAt","plan","isActive","subActive","branchActive","_a","branchActivatedAt","_b","kickedSignature","accountActive","valid","isSubscriptionValid","trialActive","data","FreeTrialService","e","hours","handleSignOut","handleActivateTrial","result","toast","error","handleRefresh","getDoc","doc","__vitePreload","db","n","userDoc","openWhatsApp","price","features","text","jsxs","jsx","Shield","Button","RefreshCw","p","f"],"ignoreList":[],"sources":["../../src/pages/user/PendingApprovalPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { AlertTriangle, Clock, AlertCircle, Shield, Gift, CheckCircle, RefreshCw, Lock } from 'lucide-react';\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\nimport { toast } from 'sonner';\nimport { FreeTrialService } from '@/utils/freeTrialService';\nimport { isSubscriptionValid, activateUserSubscription, SubscriptionPlan } from '@/utils/subscriptionService'\nimport { createSubscriptionWhatsAppLink } from '@/utils/whatsappService';\n\nexport default function PendingApprovalPage() {\n  const { user, signOut, userSubscription, isSubscriptionActive, checkSubscriptionStatus } = useFirebaseAuth();\n  const navigate = useNavigate();\n  const [isActivatingTrial, setIsActivatingTrial] = useState(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [hasUsedTrial, setHasUsedTrial] = useState(false);\n  const [isOnFreeTrial, setIsOnFreeTrial] = useState(false);\n  const [trialDurationHours, setTrialDurationHours] = useState<number>(4);\n  \n  // ÿ™ŸÉŸàŸäŸÜ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿ®ŸÜŸÅÿ≥ ÿ™ÿµŸÖŸäŸÖ ÿßŸÑŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ©\n  const PLANS = [\n    {\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',\n      price: 150,\n      features: ['ÿØÿπŸÖ ŸÖÿ¨ÿßŸÜŸä ŸÉÿßŸÖŸÑ', 'ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸÖÿ≥ÿ™ŸÖÿ±ÿ©', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', '20 ŸÖÿ≠ŸÅÿ∏ÿ©'],\n      bg: 'from-blue-50 to-indigo-50',\n    },\n    {\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ±ÿ®ÿπ ÿ≥ŸÜŸàŸäÿ©',\n      price: 350,\n      features: ['ÿØÿπŸÖ ŸÖŸÖŸäÿ≤', 'ÿ≠ÿ™Ÿâ 30 ŸÖÿ≠ŸÅÿ∏ÿ©', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\n      bg: 'from-emerald-50 to-green-50',\n    },\n    {\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ≥ŸÜŸàŸäÿ©',\n      price: 1000,\n      features: ['ÿØÿπŸÖ ŸÖŸÖÿ™ÿßÿ≤', 'ÿπÿØÿØ ŸÖÿ≠ÿßŸÅÿ∏ ŸÖŸÅÿ™Ÿàÿ≠', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\n      bg: 'from-purple-50 to-pink-50',\n    },\n    {\n      title: 'ÿ®ÿßŸÇÿ© ŸÖÿØŸâ ÿßŸÑÿ≠Ÿäÿßÿ©',\n      price: 3000,\n      features: ['ÿØÿπŸÖ ŸÖŸÖÿ™ÿßÿ≤', 'ÿπÿØÿØ ŸÖÿ≠ÿßŸÅÿ∏ ŸÖŸÅÿ™Ÿàÿ≠', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\n      bg: 'from-orange-50 to-amber-50',\n    },\n  ];\n\n  // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Context ÿ®ÿØŸÑÿßŸã ŸÖŸÜ Listener ŸÖŸÜŸÅÿµŸÑ\n  useEffect(() => {\n    if (!user?.uid) return;\n    // ŸÜŸÜÿ™ÿ∏ÿ± ÿ≠ÿ™Ÿâ ÿ™ÿ™ŸàŸÅÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\n    if (!userSubscription) return;\n\n    console.log('üîç PendingApprovalPage: Checking subscription via Context:', user.uid);\n\n    const userData = userSubscription as any;\n\n    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿπÿßŸÖÿ© ÿ£ŸàŸÑÿßŸã\n    if (userData.isActive === false) {\n      console.log('‚õî PendingApprovalPage: User account is deactivated (isActive=false), staying on page.');\n      sessionStorage.removeItem('dashboard_kick_signature');\n      return;\n    }\n\n    // ÿØÿßŸÑÿ© ŸÖÿ≥ÿßÿπÿØÿ© ŸÑÿ™ŸàŸÑŸäÿØ ÿ™ŸàŸÇŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿ©\n    const generateStateSignature = (u: any) => {\n      if (!u) return 'null';\n      const sub = u.subscription;\n      const activatedAt = sub?.activatedAt ? (sub.activatedAt.toDate ? sub.activatedAt.toDate().toISOString() : new Date(sub.activatedAt).toISOString()) : 'null';\n      const plan = sub?.planType || 'null';\n      const isActive = u.isActive !== false;\n      const subActive = sub?.isActive === true;\n      const branchActive = u.branchPackage?.status === 'active';\n      const branchActivatedAt = u.branchPackage?.activatedAt ? (u.branchPackage.activatedAt.toDate ? u.branchPackage.activatedAt.toDate().toISOString() : new Date(u.branchPackage.activatedAt).toISOString()) : 'null';\n      return `${isActive}|${subActive}|${plan}|${activatedAt}|${branchActive}|${branchActivatedAt}`;\n    };\n\n    const currentSignature = generateStateSignature(userData);\n    const kickedSignature = sessionStorage.getItem('dashboard_kick_signature');\n\n    const accountActive = userData.isActive !== false;\n    const branchActive = userData.branchPackage?.status === 'active';\n    const sub = userData.subscription;\n    const valid = sub && sub.isActive === true && isSubscriptionValid(sub);\n    const trialActive = userData.isOnFreeTrial === true;\n\n    // ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑÿ≠ÿßŸÑÿ© ŸÜÿ¥ÿ∑ÿ©ÿå ŸÜŸÇŸàŸÖ ÿ®ÿßŸÑÿ™Ÿàÿ¨ŸäŸá\n    if (accountActive && (branchActive || valid || isSubscriptionActive || trialActive)) {\n      if (kickedSignature && currentSignature === kickedSignature) {\n        // Still in kicked state with same signature\n      } else {\n        sessionStorage.removeItem('dashboard_kick_signature');\n        navigate('/user/dashboard', { replace: true });\n      }\n    }\n  }, [user?.uid, userSubscription, isSubscriptionActive, navigate]);\n\n  // ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿ•ÿÆŸÅÿßÿ° ÿÆŸäÿßÿ± ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿ®ÿπÿØ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸáÿß\n  useEffect(() => {\n    const loadTrialState = async () => {\n      if (!user?.uid) return;\n      try {\n        const data = await FreeTrialService.getTrialData(user.uid);\n        setHasUsedTrial(data.hasUsedFreeTrial);\n        setIsOnFreeTrial(data.isOnFreeTrial);\n      } catch (e) {\n        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©:', e);\n      }\n    };\n    loadTrialState();\n  }, [user?.uid]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const hours = await FreeTrialService.getTrialDurationHours();\n        setTrialDurationHours(hours);\n      } catch (e) {\n        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿØÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©:', e);\n      }\n    })();\n  }, []);\n\n  const handleSignOut = async () => {\n    await signOut();\n    navigate('/auth');\n  };\n\n  const handleActivateZeroPlan = async () => {\n    if (!user?.uid) return;\n\n    setIsActivatingTrial(true);\n    try {\n      await activateUserSubscription(user.uid, SubscriptionPlan.ZERO, user.uid);\n      toast.success('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà! ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...');\n      setTimeout(() => {\n        try { navigate('/user/dashboard', { replace: true }); } catch {}\n      }, 1200);\n    } catch (error) {\n      console.error('Error activating zero plan:', error);\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà');\n    } finally {\n      setIsActivatingTrial(false);\n    }\n  };\n\n  const handleActivateTrial = async () => {\n    if (!user?.uid) return;\n    \n    setIsActivatingTrial(true);\n    try {\n      const result = await FreeTrialService.startFreeTrial(user.uid);\n      if (result.success) {\n        toast.success(result.message || `ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ŸÑŸÖÿØÿ© ${trialDurationHours} ${trialDurationHours >= 3 && trialDurationHours <= 10 ? 'ÿ≥ÿßÿπÿßÿ™' : trialDurationHours === 2 ? 'ÿ≥ÿßÿπÿ™ŸäŸÜ' : 'ÿ≥ÿßÿπÿ©'}! ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...`);\n        setTimeout(() => {\n          try { navigate('/user/dashboard', { replace: true }); } catch {}\n        }, 1200);\n      } else {\n        toast.error(result.message);\n      }\n    } catch (error) {\n      console.error('Error activating trial:', error);\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©');\n    } finally {\n      setIsActivatingTrial(false);\n    }\n  };\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    console.log('üîÑ PendingApprovalPage: Manual refresh triggered');\n    \n    try {\n      // ŸÖÿ≥ÿ≠ ÿπŸÑÿßŸÖÿ© ÿßŸÑÿ∑ÿ±ÿØ ŸÑÿ•ÿ¨ÿ®ÿßÿ± ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ\n      sessionStorage.removeItem('dashboard_kick_signature');\n      \n      // ÿ•ÿπÿßÿØÿ© ŸÅÿ≠ÿµ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\n      await checkSubscriptionStatus();\n      \n      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ Ÿäÿ¨ÿ® ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿßŸÑÿ¢ŸÜ\n      if (user?.uid) {\n        // ŸÜÿ≥ÿ™ÿÆÿØŸÖ import ÿØŸäŸÜÿßŸÖŸäŸÉŸä ŸÑÿ™ÿ¨ŸÜÿ® ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑÿ™ÿ®ÿπŸäÿßÿ™ ÿßŸÑÿØÿßÿ¶ÿ±Ÿäÿ© ÿ•ŸÜ Ÿàÿ¨ÿØÿ™ÿå ŸàŸÑÿ∂ŸÖÿßŸÜ ŸÜÿ≥ÿÆÿ© ÿ¨ÿØŸäÿØÿ©\n        const { getDoc, doc } = await import('firebase/firestore');\n        const { db } = await import('@/firebase');\n        const userDoc = await getDoc(doc(db, 'users', user.uid));\n        \n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          const accountActive = userData.isActive !== false;\n          const subActive = userData.subscription?.isActive === true;\n          const branchActive = userData.branchPackage?.status === 'active';\n          \n          if (accountActive && (subActive || branchActive)) {\n             toast.success('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿå ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...');\n             setTimeout(() => {\n                navigate('/user/dashboard', { replace: true });\n             }, 500);\n             return;\n          }\n        }\n      }\n      \n      toast.success('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™');\n    } catch (error) {\n      console.error('‚ùå Error during manual refresh:', error);\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´');\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  const openWhatsApp = (plan: string, price: number, features: string[]) => {\n    try {\n      const text = encodeURIComponent(\n        `ÿ£ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ${plan} ÿ®ÿ≥ÿπÿ± ${price} ÿ¨\\nÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™:\\n- ${features.join('\\n- ')}`\n      );\n      window.open(`https://wa.me/201000392539?text=${text}`, '_blank');\n    } catch {}\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-5xl bg-white rounded-2xl shadow-lg border border-gray-200 dark:border-gray-800 p-4 sm:p-6\">\n        <div className=\"text-center\">\n          <div className=\"flex justify-center mb-2\">\n            <div className=\"relative\">\n              <div \n                className=\"absolute inset-0 rounded-full\"\n                style={{ background: 'linear-gradient(135deg, #f59e0b, #d97706)', filter: 'blur(8px)', opacity: 0.3 }}\n              />\n              <div className=\"relative bg-gradient-to-br from-orange-400 to-orange-600 p-2 rounded-full\">\n                <Shield className=\"h-10 w-10 text-white\" />\n              </div>\n            </div>\n          </div>\n          <h2 className=\"text-xl font-bold text-gray-800\">ŸÖÿ∑ŸÑŸàÿ® ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®</h2>\n          <p className=\"text-gray-700 text-sm mt-1\">ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© Ÿàÿßÿ∂ÿ∫ÿ∑ ÿ≤ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ® ŸÑŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑŸÅŸàÿ±Ÿä.</p>\n          \n          <div className=\"mt-4 flex justify-center\">\n             <Button \n               variant=\"outline\" \n               size=\"sm\" \n               onClick={handleRefresh} \n               disabled={isRefreshing}\n               className=\"flex items-center gap-2 text-blue-600 border-blue-200 hover:bg-blue-50\"\n             >\n               <RefreshCw className={`w-4 h-4 ${isRefreshing ? 'animate-spin' : ''}`} />\n               {isRefreshing ? 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...' : 'ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ'}\n             </Button>\n          </div>\n        </div>\n\n        <div className=\"pt-4\">\n          <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 items-stretch\">\n            {PLANS.map((p) => (\n              <div key={p.title} className={`h-full rounded-lg p-2 border shadow-sm bg-gradient-to-br ${p.bg} dark:from-gray-800 dark:to-gray-700 dark:border-gray-700`}>\n                <div className=\"font-bold text-sm text-gray-800 dark:text-gray-100 mb-1\">{p.title}</div>\n                <div className=\"text-lg font-extrabold text-gray-900 dark:text-gray-100 mb-2\">{p.price} ÿ¨</div>\n                <ul className=\"text-[11px] text-gray-700 dark:text-gray-200 text-right space-y-1 mb-2\">\n                  {p.features.map((f) => (\n                    <li key={f}>‚Ä¢ {f}</li>\n                  ))}\n                </ul>\n                <Button size=\"sm\" className=\"w-full bg-green-600 hover:bg-green-700 text-xs py-1 h-8\" onClick={() => openWhatsApp(p.title, p.price, p.features)}>\n                  ÿ™ŸàÿßÿµŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®\n                </Button>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"pt-3\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-2\">\n            {/* ÿ™ŸÖ ÿ•ÿÆŸÅÿßÿ° ÿ≤ÿ± ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ */}\n            {/*\n            <Button size=\"sm\" className=\"w-full bg-emerald-600 hover:bg-emerald-700\" onClick={handleActivateZeroPlan} disabled={isActivatingTrial}>\n              ÿ¨ÿ±ÿ® ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà\n            </Button>\n            */}\n            {!hasUsedTrial && !isOnFreeTrial && (\n              <Button size=\"sm\" className=\"w-full bg-blue-600 hover:bg-blue-700\" onClick={handleActivateTrial} disabled={isActivatingTrial}>\n                {`ÿ¨ÿ±ÿ® ÿßŸÑÿ®ÿ±ŸÜÿßŸÖÿ¨ ${trialDurationHours} ${trialDurationHours >= 3 && trialDurationHours <= 10 ? 'ÿ≥ÿßÿπÿßÿ™' : trialDurationHours === 2 ? 'ÿ≥ÿßÿπÿ™ŸäŸÜ' : 'ÿ≥ÿßÿπÿ©'}`}\n              </Button>\n            )}\n          </div>\n          <Button variant=\"outline\" className=\"border-2 border-gray-300 hover:border-gray-400 text-gray-700 hover:text-gray-800 px-5 py-2 rounded-lg font-semibold text-xs transition-all duration-300\" onClick={handleSignOut}>\n            ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"file":"assets/PendingApprovalPage-D6dwUpuY.js"}