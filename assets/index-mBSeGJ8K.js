const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-Cdqcv4id.js","./smartphone-4Jjo_tT5.js","./star-C5V4W3t-.js","./arrow-left-CoPISNIk.js","./chart-column-BnYh_Cge.js","./download-C_W4yx38.js","./zap-PrHmOmUP.js","./circle-check-big-C-Uwjs2Z.js","./crown-y81xSMbP.js","./SubscriptionsPage-lLk8EQkR.js","./contentService-B-9y2tZi.js","./calendar-DWuCbuTk.js","./sparkles-DaLJvhXR.js","./AuthPage-3ymRg6Vo.js","./TopUpPage-nFu59RP6.js","./select-DGk4nkpB.js","./AdminTopupsPage-8UHCH2u5.js","./AdminNotificationsPage-kJiPNhxb.js","./textarea-BSkR6eBq.js","./bell-DSbPVF9m.js","./link-CJBPEaNR.js","./UserRegisterPage-CYIkXzjO.js","./alert-BKGZp8Qw.js","./wallet-Li-2CV_d.js","./user-plus-voce8bqI.js","./UserAccountSetupPage-CfJQ6gp7.js","./ProtectedDashboard-K-13upKR.js","./profitService-B3iovAHD.js","./dollar-sign-tQQ_yre_.js","./arrow-down-left-BTRRls4w.js","./ProtectedUserDashboard-FJjhr7Xd.js","./broadcastService-BVTGigy9.js","./MerchantDashboard-Du67Vsfp.js","./dropdown-menu-Dko4WND7.js","./index-B0RoPUtu.js","./badge-D4Cxv57Q.js","./WalletsManagement-DMptkT8R.js","./progress-D2Zt4W_R.js","./WalletPrinterDialog-CoSkJsm5.js","./html2canvas.esm-BfYXEYrK.js","./printer-C-vYmUsl.js","./square-pen-7FbzHXSb.js","./PendingApprovalPage-CdoC-fdy.js","./freeTrialService-DU8cwcbX.js","./ProtectedAdminDashboard-Dj6xNvps.js","./ProfileIcon-ElnJff9P.js","./switch-8_KpJux-.js","./separator-xJo-nMhI.js","./refresh-cw-VJ-sBqT-.js","./gift-9ZQOjHz8.js","./table-B-2w-DVH.js","./tabs-B85OgytT.js","./users-cmuW5heU.js","./activity-C3VcmJNL.js","./circle-x-bWAeF-qD.js","./pen-line-BxM__rGx.js","./ProfileSettingsPage-BvFHeoPd.js","./TransactionsPage-vZbFUf7u.js","./ReceiptModal-BFQZdr4L.js","./formatters-CO_Y-NDe.js","./InstallmentModal-D08gq3I4.js","./CreditCardsDialog-DEPojYwD.js","./MaintenanceDialog-D00XSB7E.js","./battery-charging-Odp8Tilx.js","./WalletAdditionPage-ecXERgDK.js","./building-2-Da5VmhQg.js","./ReferralsPage-DGZtjXYw.js","./UserDashboardPage-C8NukZg-.js"])))=>i.map(i=>d[i]);
var qV=Object.defineProperty;var mI=t=>{throw TypeError(t)};var HV=(t,e,n)=>e in t?qV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Td=(t,e,n)=>HV(t,typeof e!="symbol"?e+"":e,n),lv=(t,e,n)=>e.has(t)||mI("Cannot "+n);var Z=(t,e,n)=>(lv(t,e,"read from private field"),n?n.call(t):e.get(t)),Nt=(t,e,n)=>e.has(t)?mI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ct=(t,e,n,r)=>(lv(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ir=(t,e,n)=>(lv(t,e,"access private method"),n);var Zf=(t,e,n,r)=>({set _(s){ct(t,e,s,n)},get _(){return Z(t,e,r)}});function KV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var aee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KR={exports:{}},jg={},GR={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf=Symbol.for("react.element"),GV=Symbol.for("react.portal"),QV=Symbol.for("react.fragment"),YV=Symbol.for("react.strict_mode"),JV=Symbol.for("react.profiler"),XV=Symbol.for("react.provider"),ZV=Symbol.for("react.context"),eF=Symbol.for("react.forward_ref"),tF=Symbol.for("react.suspense"),nF=Symbol.for("react.memo"),rF=Symbol.for("react.lazy"),pI=Symbol.iterator;function sF(t){return t===null||typeof t!="object"?null:(t=pI&&t[pI]||t["@@iterator"],typeof t=="function"?t:null)}var QR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YR=Object.assign,JR={};function Yu(t,e,n){this.props=t,this.context=e,this.refs=JR,this.updater=n||QR}Yu.prototype.isReactComponent={};Yu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XR(){}XR.prototype=Yu.prototype;function O0(t,e,n){this.props=t,this.context=e,this.refs=JR,this.updater=n||QR}var L0=O0.prototype=new XR;L0.constructor=O0;YR(L0,Yu.prototype);L0.isPureReactComponent=!0;var gI=Array.isArray,ZR=Object.prototype.hasOwnProperty,M0={current:null},e1={key:!0,ref:!0,__self:!0,__source:!0};function t1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ZR.call(e,r)&&!e1.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:pf,type:t,key:i,ref:o,props:s,_owner:M0.current}}function iF(t,e){return{$$typeof:pf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function V0(t){return typeof t=="object"&&t!==null&&t.$$typeof===pf}function oF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yI=/\/+/g;function cv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oF(""+t.key):e.toString(36)}function Bm(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pf:case GV:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+cv(o,0):r,gI(s)?(n="",t!=null&&(n=t.replace(yI,"$&/")+"/"),Bm(s,e,n,"",function(c){return c})):s!=null&&(V0(s)&&(s=iF(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",gI(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+cv(i,a);o+=Bm(i,e,n,l,s)}else if(l=sF(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+cv(i,a++),o+=Bm(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function em(t,e,n){if(t==null)return t;var r=[],s=0;return Bm(t,r,"","",function(i){return e.call(n,i,s++)}),r}function aF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $r={current:null},zm={transition:null},lF={ReactCurrentDispatcher:$r,ReactCurrentBatchConfig:zm,ReactCurrentOwner:M0};function n1(){throw Error("act(...) is not supported in production builds of React.")}At.Children={map:em,forEach:function(t,e,n){em(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return em(t,function(){e++}),e},toArray:function(t){return em(t,function(e){return e})||[]},only:function(t){if(!V0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};At.Component=Yu;At.Fragment=QV;At.Profiler=JV;At.PureComponent=O0;At.StrictMode=YV;At.Suspense=tF;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lF;At.act=n1;At.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=YR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=M0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ZR.call(e,l)&&!e1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:pf,type:t.type,key:s,ref:i,props:r,_owner:o}};At.createContext=function(t){return t={$$typeof:ZV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XV,_context:t},t.Consumer=t};At.createElement=t1;At.createFactory=function(t){var e=t1.bind(null,t);return e.type=t,e};At.createRef=function(){return{current:null}};At.forwardRef=function(t){return{$$typeof:eF,render:t}};At.isValidElement=V0;At.lazy=function(t){return{$$typeof:rF,_payload:{_status:-1,_result:t},_init:aF}};At.memo=function(t,e){return{$$typeof:nF,type:t,compare:e===void 0?null:e}};At.startTransition=function(t){var e=zm.transition;zm.transition={};try{t()}finally{zm.transition=e}};At.unstable_act=n1;At.useCallback=function(t,e){return $r.current.useCallback(t,e)};At.useContext=function(t){return $r.current.useContext(t)};At.useDebugValue=function(){};At.useDeferredValue=function(t){return $r.current.useDeferredValue(t)};At.useEffect=function(t,e){return $r.current.useEffect(t,e)};At.useId=function(){return $r.current.useId()};At.useImperativeHandle=function(t,e,n){return $r.current.useImperativeHandle(t,e,n)};At.useInsertionEffect=function(t,e){return $r.current.useInsertionEffect(t,e)};At.useLayoutEffect=function(t,e){return $r.current.useLayoutEffect(t,e)};At.useMemo=function(t,e){return $r.current.useMemo(t,e)};At.useReducer=function(t,e,n){return $r.current.useReducer(t,e,n)};At.useRef=function(t){return $r.current.useRef(t)};At.useState=function(t){return $r.current.useState(t)};At.useSyncExternalStore=function(t,e,n){return $r.current.useSyncExternalStore(t,e,n)};At.useTransition=function(){return $r.current.useTransition()};At.version="18.3.1";GR.exports=At;var v=GR.exports;const V=HR(v),Ug=KV({__proto__:null,default:V},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cF=v,uF=Symbol.for("react.element"),dF=Symbol.for("react.fragment"),hF=Object.prototype.hasOwnProperty,fF=cF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mF={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hF.call(e,r)&&!mF.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:uF,type:t,key:i,ref:o,props:s,_owner:fF.current}}jg.Fragment=dF;jg.jsx=r1;jg.jsxs=r1;KR.exports=jg;var m=KR.exports,s1={exports:{}},Es={},i1={exports:{}},o1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,q){var oe=W.length;W.push(q);e:for(;0<oe;){var ge=oe-1>>>1,pe=W[ge];if(0<s(pe,q))W[ge]=q,W[oe]=pe,oe=ge;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var q=W[0],oe=W.pop();if(oe!==q){W[0]=oe;e:for(var ge=0,pe=W.length,Me=pe>>>1;ge<Me;){var ve=2*(ge+1)-1,F=W[ve],ot=ve+1,et=W[ot];if(0>s(F,oe))ot<pe&&0>s(et,F)?(W[ge]=et,W[ot]=oe,ge=ot):(W[ge]=F,W[ve]=oe,ge=ve);else if(ot<pe&&0>s(et,oe))W[ge]=et,W[ot]=oe,ge=ot;else break e}}return q}function s(W,q){var oe=W.sortIndex-q.sortIndex;return oe!==0?oe:W.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,_=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=W)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function P(W){if(g=!1,S(W),!_)if(n(l)!==null)_=!0,ke(x);else{var q=n(c);q!==null&&We(P,q.startTime-W)}}function x(W,q){_=!1,g&&(g=!1,E(A),A=-1),p=!0;var oe=f;try{for(S(q),h=n(l);h!==null&&(!(h.expirationTime>q)||W&&!C());){var ge=h.callback;if(typeof ge=="function"){h.callback=null,f=h.priorityLevel;var pe=ge(h.expirationTime<=q);q=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===n(l)&&r(l),S(q)}else r(l);h=n(l)}if(h!==null)var Me=!0;else{var ve=n(c);ve!==null&&We(P,ve.startTime-q),Me=!1}return Me}finally{h=null,f=oe,p=!1}}var O=!1,T=null,A=-1,R=5,N=-1;function C(){return!(t.unstable_now()-N<R)}function L(){if(T!==null){var W=t.unstable_now();N=W;var q=!0;try{q=T(!0,W)}finally{q?D():(O=!1,T=null)}}else O=!1}var D;if(typeof w=="function")D=function(){w(L)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Le=J.port2;J.port1.onmessage=L,D=function(){Le.postMessage(null)}}else D=function(){b(L,0)};function ke(W){T=W,O||(O=!0,D())}function We(W,q){A=b(function(){W(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){_||p||(_=!0,ke(x))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var oe=f;f=q;try{return W()}finally{f=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var oe=f;f=W;try{return q()}finally{f=oe}},t.unstable_scheduleCallback=function(W,q,oe){var ge=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ge+oe:ge):oe=ge,W){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=oe+pe,W={id:u++,callback:q,priorityLevel:W,startTime:oe,expirationTime:pe,sortIndex:-1},oe>ge?(W.sortIndex=oe,e(c,W),n(l)===null&&W===n(c)&&(g?(E(A),A=-1):g=!0,We(P,oe-ge))):(W.sortIndex=pe,e(l,W),_||p||(_=!0,ke(x))),W},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(W){var q=f;return function(){var oe=f;f=q;try{return W.apply(this,arguments)}finally{f=oe}}}})(o1);i1.exports=o1;var pF=i1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gF=v,vs=pF;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a1=new Set,Th={};function Hl(t,e){pu(t,e),pu(t+"Capture",e)}function pu(t,e){for(Th[t]=e,t=0;t<e.length;t++)a1.add(e[t])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aw=Object.prototype.hasOwnProperty,yF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vI={},wI={};function vF(t){return Aw.call(wI,t)?!0:Aw.call(vI,t)?!1:yF.test(t)?wI[t]=!0:(vI[t]=!0,!1)}function wF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _F(t,e,n,r){if(e===null||typeof e>"u"||wF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Br(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){br[t]=new Br(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];br[e]=new Br(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){br[t]=new Br(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){br[t]=new Br(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){br[t]=new Br(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){br[t]=new Br(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){br[t]=new Br(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){br[t]=new Br(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){br[t]=new Br(t,5,!1,t.toLowerCase(),null,!1,!1)});var F0=/[\-:]([a-z])/g;function j0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(F0,j0);br[e]=new Br(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(F0,j0);br[e]=new Br(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(F0,j0);br[e]=new Br(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){br[t]=new Br(t,1,!1,t.toLowerCase(),null,!1,!1)});br.xlinkHref=new Br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){br[t]=new Br(t,1,!1,t.toLowerCase(),null,!0,!0)});function U0(t,e,n,r){var s=br.hasOwnProperty(e)?br[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_F(e,n,s,r)&&(n=null),r||s===null?vF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var io=gF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tm=Symbol.for("react.element"),Pc=Symbol.for("react.portal"),Rc=Symbol.for("react.fragment"),$0=Symbol.for("react.strict_mode"),Pw=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),B0=Symbol.for("react.forward_ref"),Rw=Symbol.for("react.suspense"),Cw=Symbol.for("react.suspense_list"),z0=Symbol.for("react.memo"),xo=Symbol.for("react.lazy"),u1=Symbol.for("react.offscreen"),_I=Symbol.iterator;function xd(t){return t===null||typeof t!="object"?null:(t=_I&&t[_I]||t["@@iterator"],typeof t=="function"?t:null)}var An=Object.assign,uv;function Bd(t){if(uv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uv=e&&e[1]||""}return`
`+uv+t}var dv=!1;function hv(t,e){if(!t||dv)return"";dv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{dv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bd(t):""}function EF(t){switch(t.tag){case 5:return Bd(t.type);case 16:return Bd("Lazy");case 13:return Bd("Suspense");case 19:return Bd("SuspenseList");case 0:case 2:case 15:return t=hv(t.type,!1),t;case 11:return t=hv(t.type.render,!1),t;case 1:return t=hv(t.type,!0),t;default:return""}}function kw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rc:return"Fragment";case Pc:return"Portal";case Pw:return"Profiler";case $0:return"StrictMode";case Rw:return"Suspense";case Cw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c1:return(t.displayName||"Context")+".Consumer";case l1:return(t._context.displayName||"Context")+".Provider";case B0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z0:return e=t.displayName||null,e!==null?e:kw(t.type)||"Memo";case xo:e=t._payload,t=t._init;try{return kw(t(e))}catch{}}return null}function bF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kw(e);case 8:return e===$0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ma(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function d1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SF(t){var e=d1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nm(t){t._valueTracker||(t._valueTracker=SF(t))}function h1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=d1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ip(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nw(t,e){var n=e.checked;return An({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function EI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ma(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f1(t,e){e=e.checked,e!=null&&U0(t,"checked",e,!1)}function Dw(t,e){f1(t,e);var n=ma(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ow(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ow(t,e.type,ma(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ow(t,e,n){(e!=="number"||Ip(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zd=Array.isArray;function Kc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ma(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return An({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function SI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(zd(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ma(n)}}function m1(t,e){var n=ma(e.value),r=ma(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function II(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function p1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?p1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rm,g1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rm=rm||document.createElement("div"),rm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IF=["Webkit","ms","Moz","O"];Object.keys(eh).forEach(function(t){IF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eh[e]=eh[t]})});function y1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eh.hasOwnProperty(t)&&eh[t]?(""+e).trim():e+"px"}function v1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=y1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var TF=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vw(t,e){if(e){if(TF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function Fw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jw=null;function W0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uw=null,Gc=null,Qc=null;function TI(t){if(t=vf(t)){if(typeof Uw!="function")throw Error(he(280));var e=t.stateNode;e&&(e=qg(e),Uw(t.stateNode,t.type,e))}}function w1(t){Gc?Qc?Qc.push(t):Qc=[t]:Gc=t}function _1(){if(Gc){var t=Gc,e=Qc;if(Qc=Gc=null,TI(t),e)for(t=0;t<e.length;t++)TI(e[t])}}function E1(t,e){return t(e)}function b1(){}var fv=!1;function S1(t,e,n){if(fv)return t(e,n);fv=!0;try{return E1(t,e,n)}finally{fv=!1,(Gc!==null||Qc!==null)&&(b1(),_1())}}function Ah(t,e){var n=t.stateNode;if(n===null)return null;var r=qg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var $w=!1;if(Gi)try{var Ad={};Object.defineProperty(Ad,"passive",{get:function(){$w=!0}}),window.addEventListener("test",Ad,Ad),window.removeEventListener("test",Ad,Ad)}catch{$w=!1}function xF(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var th=!1,Tp=null,xp=!1,Bw=null,AF={onError:function(t){th=!0,Tp=t}};function PF(t,e,n,r,s,i,o,a,l){th=!1,Tp=null,xF.apply(AF,arguments)}function RF(t,e,n,r,s,i,o,a,l){if(PF.apply(this,arguments),th){if(th){var c=Tp;th=!1,Tp=null}else throw Error(he(198));xp||(xp=!0,Bw=c)}}function Kl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function I1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xI(t){if(Kl(t)!==t)throw Error(he(188))}function CF(t){var e=t.alternate;if(!e){if(e=Kl(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xI(s),t;if(i===r)return xI(s),e;i=i.sibling}throw Error(he(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function T1(t){return t=CF(t),t!==null?x1(t):null}function x1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=x1(t);if(e!==null)return e;t=t.sibling}return null}var A1=vs.unstable_scheduleCallback,AI=vs.unstable_cancelCallback,kF=vs.unstable_shouldYield,NF=vs.unstable_requestPaint,Vn=vs.unstable_now,DF=vs.unstable_getCurrentPriorityLevel,q0=vs.unstable_ImmediatePriority,P1=vs.unstable_UserBlockingPriority,Ap=vs.unstable_NormalPriority,OF=vs.unstable_LowPriority,R1=vs.unstable_IdlePriority,$g=null,vi=null;function LF(t){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot($g,t,void 0,(t.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:FF,MF=Math.log,VF=Math.LN2;function FF(t){return t>>>=0,t===0?32:31-(MF(t)/VF|0)|0}var sm=64,im=4194304;function Wd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Wd(a):(i&=o,i!==0&&(r=Wd(i)))}else o=n&~s,o!==0?r=Wd(o):i!==0&&(r=Wd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bs(e),s=1<<n,r|=t[n],e&=~s;return r}function jF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Bs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=jF(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function zw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function C1(){var t=sm;return sm<<=1,!(sm&4194240)&&(sm=64),t}function mv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bs(e),t[e]=n}function $F(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function H0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var qt=0;function k1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var N1,K0,D1,O1,L1,Ww=!1,om=[],Jo=null,Xo=null,Zo=null,Ph=new Map,Rh=new Map,Ro=[],BF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PI(t,e){switch(t){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Ph.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(e.pointerId)}}function Pd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vf(e),e!==null&&K0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zF(t,e,n,r,s){switch(e){case"focusin":return Jo=Pd(Jo,t,e,n,r,s),!0;case"dragenter":return Xo=Pd(Xo,t,e,n,r,s),!0;case"mouseover":return Zo=Pd(Zo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ph.set(i,Pd(Ph.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rh.set(i,Pd(Rh.get(i)||null,t,e,n,r,s)),!0}return!1}function M1(t){var e=ol(t.target);if(e!==null){var n=Kl(e);if(n!==null){if(e=n.tag,e===13){if(e=I1(n),e!==null){t.blockedOn=e,L1(t.priority,function(){D1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jw=r,n.target.dispatchEvent(r),jw=null}else return e=vf(n),e!==null&&K0(e),t.blockedOn=n,!1;e.shift()}return!0}function RI(t,e,n){Wm(t)&&n.delete(e)}function WF(){Ww=!1,Jo!==null&&Wm(Jo)&&(Jo=null),Xo!==null&&Wm(Xo)&&(Xo=null),Zo!==null&&Wm(Zo)&&(Zo=null),Ph.forEach(RI),Rh.forEach(RI)}function Rd(t,e){t.blockedOn===e&&(t.blockedOn=null,Ww||(Ww=!0,vs.unstable_scheduleCallback(vs.unstable_NormalPriority,WF)))}function Ch(t){function e(s){return Rd(s,t)}if(0<om.length){Rd(om[0],t);for(var n=1;n<om.length;n++){var r=om[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jo!==null&&Rd(Jo,t),Xo!==null&&Rd(Xo,t),Zo!==null&&Rd(Zo,t),Ph.forEach(e),Rh.forEach(e),n=0;n<Ro.length;n++)r=Ro[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ro.length&&(n=Ro[0],n.blockedOn===null);)M1(n),n.blockedOn===null&&Ro.shift()}var Yc=io.ReactCurrentBatchConfig,Rp=!0;function qF(t,e,n,r){var s=qt,i=Yc.transition;Yc.transition=null;try{qt=1,G0(t,e,n,r)}finally{qt=s,Yc.transition=i}}function HF(t,e,n,r){var s=qt,i=Yc.transition;Yc.transition=null;try{qt=4,G0(t,e,n,r)}finally{qt=s,Yc.transition=i}}function G0(t,e,n,r){if(Rp){var s=qw(t,e,n,r);if(s===null)Iv(t,e,r,Cp,n),PI(t,r);else if(zF(s,t,e,n,r))r.stopPropagation();else if(PI(t,r),e&4&&-1<BF.indexOf(t)){for(;s!==null;){var i=vf(s);if(i!==null&&N1(i),i=qw(t,e,n,r),i===null&&Iv(t,e,r,Cp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Iv(t,e,r,null,n)}}var Cp=null;function qw(t,e,n,r){if(Cp=null,t=W0(r),t=ol(t),t!==null)if(e=Kl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=I1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cp=t,null}function V1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DF()){case q0:return 1;case P1:return 4;case Ap:case OF:return 16;case R1:return 536870912;default:return 16}default:return 16}}var Wo=null,Q0=null,qm=null;function F1(){if(qm)return qm;var t,e=Q0,n=e.length,r,s="value"in Wo?Wo.value:Wo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qm=s.slice(t,1<r?1-r:void 0)}function Hm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function am(){return!0}function CI(){return!1}function bs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?am:CI,this.isPropagationStopped=CI,this}return An(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=am)},persist:function(){},isPersistent:am}),e}var Ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Y0=bs(Ju),yf=An({},Ju,{view:0,detail:0}),KF=bs(yf),pv,gv,Cd,Bg=An({},yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:J0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cd&&(Cd&&t.type==="mousemove"?(pv=t.screenX-Cd.screenX,gv=t.screenY-Cd.screenY):gv=pv=0,Cd=t),pv)},movementY:function(t){return"movementY"in t?t.movementY:gv}}),kI=bs(Bg),GF=An({},Bg,{dataTransfer:0}),QF=bs(GF),YF=An({},yf,{relatedTarget:0}),yv=bs(YF),JF=An({},Ju,{animationName:0,elapsedTime:0,pseudoElement:0}),XF=bs(JF),ZF=An({},Ju,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ej=bs(ZF),tj=An({},Ju,{data:0}),NI=bs(tj),nj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ij(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sj[t])?!!e[t]:!1}function J0(){return ij}var oj=An({},yf,{key:function(t){if(t.key){var e=nj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:J0,charCode:function(t){return t.type==="keypress"?Hm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aj=bs(oj),lj=An({},Bg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DI=bs(lj),cj=An({},yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:J0}),uj=bs(cj),dj=An({},Ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),hj=bs(dj),fj=An({},Bg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mj=bs(fj),pj=[9,13,27,32],X0=Gi&&"CompositionEvent"in window,nh=null;Gi&&"documentMode"in document&&(nh=document.documentMode);var gj=Gi&&"TextEvent"in window&&!nh,j1=Gi&&(!X0||nh&&8<nh&&11>=nh),OI=" ",LI=!1;function U1(t,e){switch(t){case"keyup":return pj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cc=!1;function yj(t,e){switch(t){case"compositionend":return $1(e);case"keypress":return e.which!==32?null:(LI=!0,OI);case"textInput":return t=e.data,t===OI&&LI?null:t;default:return null}}function vj(t,e){if(Cc)return t==="compositionend"||!X0&&U1(t,e)?(t=F1(),qm=Q0=Wo=null,Cc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j1&&e.locale!=="ko"?null:e.data;default:return null}}var wj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wj[t.type]:e==="textarea"}function B1(t,e,n,r){w1(r),e=kp(e,"onChange"),0<e.length&&(n=new Y0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rh=null,kh=null;function _j(t){Z1(t,0)}function zg(t){var e=Dc(t);if(h1(e))return t}function Ej(t,e){if(t==="change")return e}var z1=!1;if(Gi){var vv;if(Gi){var wv="oninput"in document;if(!wv){var VI=document.createElement("div");VI.setAttribute("oninput","return;"),wv=typeof VI.oninput=="function"}vv=wv}else vv=!1;z1=vv&&(!document.documentMode||9<document.documentMode)}function FI(){rh&&(rh.detachEvent("onpropertychange",W1),kh=rh=null)}function W1(t){if(t.propertyName==="value"&&zg(kh)){var e=[];B1(e,kh,t,W0(t)),S1(_j,e)}}function bj(t,e,n){t==="focusin"?(FI(),rh=e,kh=n,rh.attachEvent("onpropertychange",W1)):t==="focusout"&&FI()}function Sj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zg(kh)}function Ij(t,e){if(t==="click")return zg(e)}function Tj(t,e){if(t==="input"||t==="change")return zg(e)}function xj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hs=typeof Object.is=="function"?Object.is:xj;function Nh(t,e){if(Hs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Aw.call(e,s)||!Hs(t[s],e[s]))return!1}return!0}function jI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function UI(t,e){var n=jI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jI(n)}}function q1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function H1(){for(var t=window,e=Ip();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ip(t.document)}return e}function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Aj(t){var e=H1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&q1(n.ownerDocument.documentElement,n)){if(r!==null&&Z0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=UI(n,i);var o=UI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pj=Gi&&"documentMode"in document&&11>=document.documentMode,kc=null,Hw=null,sh=null,Kw=!1;function $I(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kw||kc==null||kc!==Ip(r)||(r=kc,"selectionStart"in r&&Z0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sh&&Nh(sh,r)||(sh=r,r=kp(Hw,"onSelect"),0<r.length&&(e=new Y0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=kc)))}function lm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nc={animationend:lm("Animation","AnimationEnd"),animationiteration:lm("Animation","AnimationIteration"),animationstart:lm("Animation","AnimationStart"),transitionend:lm("Transition","TransitionEnd")},_v={},K1={};Gi&&(K1=document.createElement("div").style,"AnimationEvent"in window||(delete Nc.animationend.animation,delete Nc.animationiteration.animation,delete Nc.animationstart.animation),"TransitionEvent"in window||delete Nc.transitionend.transition);function Wg(t){if(_v[t])return _v[t];if(!Nc[t])return t;var e=Nc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in K1)return _v[t]=e[n];return t}var G1=Wg("animationend"),Q1=Wg("animationiteration"),Y1=Wg("animationstart"),J1=Wg("transitionend"),X1=new Map,BI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xa(t,e){X1.set(t,e),Hl(e,[t])}for(var Ev=0;Ev<BI.length;Ev++){var bv=BI[Ev],Rj=bv.toLowerCase(),Cj=bv[0].toUpperCase()+bv.slice(1);xa(Rj,"on"+Cj)}xa(G1,"onAnimationEnd");xa(Q1,"onAnimationIteration");xa(Y1,"onAnimationStart");xa("dblclick","onDoubleClick");xa("focusin","onFocus");xa("focusout","onBlur");xa(J1,"onTransitionEnd");pu("onMouseEnter",["mouseout","mouseover"]);pu("onMouseLeave",["mouseout","mouseover"]);pu("onPointerEnter",["pointerout","pointerover"]);pu("onPointerLeave",["pointerout","pointerover"]);Hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("cancel close invalid load scroll toggle".split(" ").concat(qd));function zI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RF(r,e,void 0,t),t.currentTarget=null}function Z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;zI(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;zI(s,a,c),i=l}}}if(xp)throw t=Bw,xp=!1,Bw=null,t}function on(t,e){var n=e[Xw];n===void 0&&(n=e[Xw]=new Set);var r=t+"__bubble";n.has(r)||(eC(e,t,2,!1),n.add(r))}function Sv(t,e,n){var r=0;e&&(r|=4),eC(n,t,r,e)}var cm="_reactListening"+Math.random().toString(36).slice(2);function Dh(t){if(!t[cm]){t[cm]=!0,a1.forEach(function(n){n!=="selectionchange"&&(kj.has(n)||Sv(n,!1,t),Sv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cm]||(e[cm]=!0,Sv("selectionchange",!1,e))}}function eC(t,e,n,r){switch(V1(e)){case 1:var s=qF;break;case 4:s=HF;break;default:s=G0}n=s.bind(null,e,n,t),s=void 0,!$w||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Iv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ol(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}S1(function(){var c=i,u=W0(n),h=[];e:{var f=X1.get(t);if(f!==void 0){var p=Y0,_=t;switch(t){case"keypress":if(Hm(n)===0)break e;case"keydown":case"keyup":p=aj;break;case"focusin":_="focus",p=yv;break;case"focusout":_="blur",p=yv;break;case"beforeblur":case"afterblur":p=yv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=kI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=QF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=uj;break;case G1:case Q1:case Y1:p=XF;break;case J1:p=hj;break;case"scroll":p=KF;break;case"wheel":p=mj;break;case"copy":case"cut":case"paste":p=ej;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=DI}var g=(e&4)!==0,b=!g&&t==="scroll",E=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,S;w!==null;){S=w;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,E!==null&&(P=Ah(w,E),P!=null&&g.push(Oh(w,P,S)))),b)break;w=w.return}0<g.length&&(f=new p(f,_,null,n,u),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==jw&&(_=n.relatedTarget||n.fromElement)&&(ol(_)||_[Qi]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=c,_=_?ol(_):null,_!==null&&(b=Kl(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=c),p!==_)){if(g=kI,P="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=DI,P="onPointerLeave",E="onPointerEnter",w="pointer"),b=p==null?f:Dc(p),S=_==null?f:Dc(_),f=new g(P,w+"leave",p,n,u),f.target=b,f.relatedTarget=S,P=null,ol(u)===c&&(g=new g(E,w+"enter",_,n,u),g.target=S,g.relatedTarget=b,P=g),b=P,p&&_)t:{for(g=p,E=_,w=0,S=g;S;S=lc(S))w++;for(S=0,P=E;P;P=lc(P))S++;for(;0<w-S;)g=lc(g),w--;for(;0<S-w;)E=lc(E),S--;for(;w--;){if(g===E||E!==null&&g===E.alternate)break t;g=lc(g),E=lc(E)}g=null}else g=null;p!==null&&WI(h,f,p,g,!1),_!==null&&b!==null&&WI(h,b,_,g,!0)}}e:{if(f=c?Dc(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var x=Ej;else if(MI(f))if(z1)x=Tj;else{x=Sj;var O=bj}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=Ij);if(x&&(x=x(t,c))){B1(h,x,n,u);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Ow(f,"number",f.value)}switch(O=c?Dc(c):window,t){case"focusin":(MI(O)||O.contentEditable==="true")&&(kc=O,Hw=c,sh=null);break;case"focusout":sh=Hw=kc=null;break;case"mousedown":Kw=!0;break;case"contextmenu":case"mouseup":case"dragend":Kw=!1,$I(h,n,u);break;case"selectionchange":if(Pj)break;case"keydown":case"keyup":$I(h,n,u)}var T;if(X0)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Cc?U1(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(j1&&n.locale!=="ko"&&(Cc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Cc&&(T=F1()):(Wo=u,Q0="value"in Wo?Wo.value:Wo.textContent,Cc=!0)),O=kp(c,A),0<O.length&&(A=new NI(A,t,null,n,u),h.push({event:A,listeners:O}),T?A.data=T:(T=$1(n),T!==null&&(A.data=T)))),(T=gj?yj(t,n):vj(t,n))&&(c=kp(c,"onBeforeInput"),0<c.length&&(u=new NI("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=T))}Z1(h,e)})}function Oh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ah(t,n),i!=null&&r.unshift(Oh(t,i,s)),i=Ah(t,e),i!=null&&r.push(Oh(t,i,s))),t=t.return}return r}function lc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function WI(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ah(n,i),l!=null&&o.unshift(Oh(n,l,a))):s||(l=Ah(n,i),l!=null&&o.push(Oh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Nj=/\r\n?/g,Dj=/\u0000|\uFFFD/g;function qI(t){return(typeof t=="string"?t:""+t).replace(Nj,`
`).replace(Dj,"")}function um(t,e,n){if(e=qI(e),qI(t)!==e&&n)throw Error(he(425))}function Np(){}var Gw=null,Qw=null;function Yw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jw=typeof setTimeout=="function"?setTimeout:void 0,Oj=typeof clearTimeout=="function"?clearTimeout:void 0,HI=typeof Promise=="function"?Promise:void 0,Lj=typeof queueMicrotask=="function"?queueMicrotask:typeof HI<"u"?function(t){return HI.resolve(null).then(t).catch(Mj)}:Jw;function Mj(t){setTimeout(function(){throw t})}function Tv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ch(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ch(e)}function ea(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function KI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),hi="__reactFiber$"+Xu,Lh="__reactProps$"+Xu,Qi="__reactContainer$"+Xu,Xw="__reactEvents$"+Xu,Vj="__reactListeners$"+Xu,Fj="__reactHandles$"+Xu;function ol(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qi]||n[hi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=KI(t);t!==null;){if(n=t[hi])return n;t=KI(t)}return e}t=n,n=t.parentNode}return null}function vf(t){return t=t[hi]||t[Qi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function qg(t){return t[Lh]||null}var Zw=[],Oc=-1;function Aa(t){return{current:t}}function un(t){0>Oc||(t.current=Zw[Oc],Zw[Oc]=null,Oc--)}function nn(t,e){Oc++,Zw[Oc]=t.current,t.current=e}var pa={},Dr=Aa(pa),ns=Aa(!1),Tl=pa;function gu(t,e){var n=t.type.contextTypes;if(!n)return pa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rs(t){return t=t.childContextTypes,t!=null}function Dp(){un(ns),un(Dr)}function GI(t,e,n){if(Dr.current!==pa)throw Error(he(168));nn(Dr,e),nn(ns,n)}function tC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(he(108,bF(t)||"Unknown",s));return An({},n,r)}function Op(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pa,Tl=Dr.current,nn(Dr,t),nn(ns,ns.current),!0}function QI(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=tC(t,e,Tl),r.__reactInternalMemoizedMergedChildContext=t,un(ns),un(Dr),nn(Dr,t)):un(ns),nn(ns,n)}var Li=null,Hg=!1,xv=!1;function nC(t){Li===null?Li=[t]:Li.push(t)}function jj(t){Hg=!0,nC(t)}function Pa(){if(!xv&&Li!==null){xv=!0;var t=0,e=qt;try{var n=Li;for(qt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Li=null,Hg=!1}catch(s){throw Li!==null&&(Li=Li.slice(t+1)),A1(q0,Pa),s}finally{qt=e,xv=!1}}return null}var Lc=[],Mc=0,Lp=null,Mp=0,Ts=[],xs=0,xl=null,Fi=1,ji="";function Wa(t,e){Lc[Mc++]=Mp,Lc[Mc++]=Lp,Lp=t,Mp=e}function rC(t,e,n){Ts[xs++]=Fi,Ts[xs++]=ji,Ts[xs++]=xl,xl=t;var r=Fi;t=ji;var s=32-Bs(r)-1;r&=~(1<<s),n+=1;var i=32-Bs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fi=1<<32-Bs(e)+s|n<<s|r,ji=i+t}else Fi=1<<i|n<<s|r,ji=t}function eE(t){t.return!==null&&(Wa(t,1),rC(t,1,0))}function tE(t){for(;t===Lp;)Lp=Lc[--Mc],Lc[Mc]=null,Mp=Lc[--Mc],Lc[Mc]=null;for(;t===xl;)xl=Ts[--xs],Ts[xs]=null,ji=Ts[--xs],Ts[xs]=null,Fi=Ts[--xs],Ts[xs]=null}var ms=null,hs=null,gn=!1,Us=null;function sC(t,e){var n=As(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ms=t,hs=ea(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ms=t,hs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xl!==null?{id:Fi,overflow:ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=As(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ms=t,hs=null,!0):!1;default:return!1}}function e_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function t_(t){if(gn){var e=hs;if(e){var n=e;if(!YI(t,e)){if(e_(t))throw Error(he(418));e=ea(n.nextSibling);var r=ms;e&&YI(t,e)?sC(r,n):(t.flags=t.flags&-4097|2,gn=!1,ms=t)}}else{if(e_(t))throw Error(he(418));t.flags=t.flags&-4097|2,gn=!1,ms=t}}}function JI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ms=t}function dm(t){if(t!==ms)return!1;if(!gn)return JI(t),gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yw(t.type,t.memoizedProps)),e&&(e=hs)){if(e_(t))throw iC(),Error(he(418));for(;e;)sC(t,e),e=ea(e.nextSibling)}if(JI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hs=ea(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hs=null}}else hs=ms?ea(t.stateNode.nextSibling):null;return!0}function iC(){for(var t=hs;t;)t=ea(t.nextSibling)}function yu(){hs=ms=null,gn=!1}function nE(t){Us===null?Us=[t]:Us.push(t)}var Uj=io.ReactCurrentBatchConfig;function kd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function hm(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function XI(t){var e=t._init;return e(t._payload)}function oC(t){function e(E,w){if(t){var S=E.deletions;S===null?(E.deletions=[w],E.flags|=16):S.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=sa(E,w),E.index=0,E.sibling=null,E}function i(E,w,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<w?(E.flags|=2,w):S):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,S,P){return w===null||w.tag!==6?(w=Dv(S,E.mode,P),w.return=E,w):(w=s(w,S),w.return=E,w)}function l(E,w,S,P){var x=S.type;return x===Rc?u(E,w,S.props.children,P,S.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===xo&&XI(x)===w.type)?(P=s(w,S.props),P.ref=kd(E,w,S),P.return=E,P):(P=Zm(S.type,S.key,S.props,null,E.mode,P),P.ref=kd(E,w,S),P.return=E,P)}function c(E,w,S,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Ov(S,E.mode,P),w.return=E,w):(w=s(w,S.children||[]),w.return=E,w)}function u(E,w,S,P,x){return w===null||w.tag!==7?(w=vl(S,E.mode,P,x),w.return=E,w):(w=s(w,S),w.return=E,w)}function h(E,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Dv(""+w,E.mode,S),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tm:return S=Zm(w.type,w.key,w.props,null,E.mode,S),S.ref=kd(E,null,w),S.return=E,S;case Pc:return w=Ov(w,E.mode,S),w.return=E,w;case xo:var P=w._init;return h(E,P(w._payload),S)}if(zd(w)||xd(w))return w=vl(w,E.mode,S,null),w.return=E,w;hm(E,w)}return null}function f(E,w,S,P){var x=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return x!==null?null:a(E,w,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tm:return S.key===x?l(E,w,S,P):null;case Pc:return S.key===x?c(E,w,S,P):null;case xo:return x=S._init,f(E,w,x(S._payload),P)}if(zd(S)||xd(S))return x!==null?null:u(E,w,S,P,null);hm(E,S)}return null}function p(E,w,S,P,x){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(S)||null,a(w,E,""+P,x);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case tm:return E=E.get(P.key===null?S:P.key)||null,l(w,E,P,x);case Pc:return E=E.get(P.key===null?S:P.key)||null,c(w,E,P,x);case xo:var O=P._init;return p(E,w,S,O(P._payload),x)}if(zd(P)||xd(P))return E=E.get(S)||null,u(w,E,P,x,null);hm(w,P)}return null}function _(E,w,S,P){for(var x=null,O=null,T=w,A=w=0,R=null;T!==null&&A<S.length;A++){T.index>A?(R=T,T=null):R=T.sibling;var N=f(E,T,S[A],P);if(N===null){T===null&&(T=R);break}t&&T&&N.alternate===null&&e(E,T),w=i(N,w,A),O===null?x=N:O.sibling=N,O=N,T=R}if(A===S.length)return n(E,T),gn&&Wa(E,A),x;if(T===null){for(;A<S.length;A++)T=h(E,S[A],P),T!==null&&(w=i(T,w,A),O===null?x=T:O.sibling=T,O=T);return gn&&Wa(E,A),x}for(T=r(E,T);A<S.length;A++)R=p(T,E,A,S[A],P),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?A:R.key),w=i(R,w,A),O===null?x=R:O.sibling=R,O=R);return t&&T.forEach(function(C){return e(E,C)}),gn&&Wa(E,A),x}function g(E,w,S,P){var x=xd(S);if(typeof x!="function")throw Error(he(150));if(S=x.call(S),S==null)throw Error(he(151));for(var O=x=null,T=w,A=w=0,R=null,N=S.next();T!==null&&!N.done;A++,N=S.next()){T.index>A?(R=T,T=null):R=T.sibling;var C=f(E,T,N.value,P);if(C===null){T===null&&(T=R);break}t&&T&&C.alternate===null&&e(E,T),w=i(C,w,A),O===null?x=C:O.sibling=C,O=C,T=R}if(N.done)return n(E,T),gn&&Wa(E,A),x;if(T===null){for(;!N.done;A++,N=S.next())N=h(E,N.value,P),N!==null&&(w=i(N,w,A),O===null?x=N:O.sibling=N,O=N);return gn&&Wa(E,A),x}for(T=r(E,T);!N.done;A++,N=S.next())N=p(T,E,A,N.value,P),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?A:N.key),w=i(N,w,A),O===null?x=N:O.sibling=N,O=N);return t&&T.forEach(function(L){return e(E,L)}),gn&&Wa(E,A),x}function b(E,w,S,P){if(typeof S=="object"&&S!==null&&S.type===Rc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case tm:e:{for(var x=S.key,O=w;O!==null;){if(O.key===x){if(x=S.type,x===Rc){if(O.tag===7){n(E,O.sibling),w=s(O,S.props.children),w.return=E,E=w;break e}}else if(O.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===xo&&XI(x)===O.type){n(E,O.sibling),w=s(O,S.props),w.ref=kd(E,O,S),w.return=E,E=w;break e}n(E,O);break}else e(E,O);O=O.sibling}S.type===Rc?(w=vl(S.props.children,E.mode,P,S.key),w.return=E,E=w):(P=Zm(S.type,S.key,S.props,null,E.mode,P),P.ref=kd(E,w,S),P.return=E,E=P)}return o(E);case Pc:e:{for(O=S.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(E,w.sibling),w=s(w,S.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Ov(S,E.mode,P),w.return=E,E=w}return o(E);case xo:return O=S._init,b(E,w,O(S._payload),P)}if(zd(S))return _(E,w,S,P);if(xd(S))return g(E,w,S,P);hm(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,S),w.return=E,E=w):(n(E,w),w=Dv(S,E.mode,P),w.return=E,E=w),o(E)):n(E,w)}return b}var vu=oC(!0),aC=oC(!1),Vp=Aa(null),Fp=null,Vc=null,rE=null;function sE(){rE=Vc=Fp=null}function iE(t){var e=Vp.current;un(Vp),t._currentValue=e}function n_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jc(t,e){Fp=t,rE=Vc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jr=!0),t.firstContext=null)}function ks(t){var e=t._currentValue;if(rE!==t)if(t={context:t,memoizedValue:e,next:null},Vc===null){if(Fp===null)throw Error(he(308));Vc=t,Fp.dependencies={lanes:0,firstContext:t}}else Vc=Vc.next=t;return e}var al=null;function oE(t){al===null?al=[t]:al.push(t)}function lC(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,oE(e)):(n.next=s.next,s.next=n),e.interleaved=n,Yi(t,r)}function Yi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ao=!1;function aE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ta(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Yi(t,n)}return s=r.interleaved,s===null?(e.next=e,oE(r)):(e.next=s.next,s.next=e),r.interleaved=e,Yi(t,n)}function Km(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H0(t,n)}}function ZI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jp(t,e,n,r){var s=t.updateQueue;Ao=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,g=a;switch(f=e,p=n,g.tag){case 1:if(_=g.payload,typeof _=="function"){h=_.call(p,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,f=typeof _=="function"?_.call(p,h,f):_,f==null)break e;h=An({},h,f);break e;case 2:Ao=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Pl|=o,t.lanes=o,t.memoizedState=h}}function eT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(he(191,s));s.call(r)}}}var wf={},wi=Aa(wf),Mh=Aa(wf),Vh=Aa(wf);function ll(t){if(t===wf)throw Error(he(174));return t}function lE(t,e){switch(nn(Vh,e),nn(Mh,t),nn(wi,wf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mw(e,t)}un(wi),nn(wi,e)}function wu(){un(wi),un(Mh),un(Vh)}function uC(t){ll(Vh.current);var e=ll(wi.current),n=Mw(e,t.type);e!==n&&(nn(Mh,t),nn(wi,n))}function cE(t){Mh.current===t&&(un(wi),un(Mh))}var Tn=Aa(0);function Up(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Av=[];function uE(){for(var t=0;t<Av.length;t++)Av[t]._workInProgressVersionPrimary=null;Av.length=0}var Gm=io.ReactCurrentDispatcher,Pv=io.ReactCurrentBatchConfig,Al=0,xn=null,Xn=null,dr=null,$p=!1,ih=!1,Fh=0,$j=0;function Tr(){throw Error(he(321))}function dE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hs(t[n],e[n]))return!1;return!0}function hE(t,e,n,r,s,i){if(Al=i,xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gm.current=t===null||t.memoizedState===null?qj:Hj,t=n(r,s),ih){i=0;do{if(ih=!1,Fh=0,25<=i)throw Error(he(301));i+=1,dr=Xn=null,e.updateQueue=null,Gm.current=Kj,t=n(r,s)}while(ih)}if(Gm.current=Bp,e=Xn!==null&&Xn.next!==null,Al=0,dr=Xn=xn=null,$p=!1,e)throw Error(he(300));return t}function fE(){var t=Fh!==0;return Fh=0,t}function oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?xn.memoizedState=dr=t:dr=dr.next=t,dr}function Ns(){if(Xn===null){var t=xn.alternate;t=t!==null?t.memoizedState:null}else t=Xn.next;var e=dr===null?xn.memoizedState:dr.next;if(e!==null)dr=e,Xn=t;else{if(t===null)throw Error(he(310));Xn=t,t={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},dr===null?xn.memoizedState=dr=t:dr=dr.next=t}return dr}function jh(t,e){return typeof e=="function"?e(t):e}function Rv(t){var e=Ns(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=Xn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Al&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,xn.lanes|=u,Pl|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Hs(r,e.memoizedState)||(Jr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,xn.lanes|=i,Pl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cv(t){var e=Ns(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Hs(i,e.memoizedState)||(Jr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function dC(){}function hC(t,e){var n=xn,r=Ns(),s=e(),i=!Hs(r.memoizedState,s);if(i&&(r.memoizedState=s,Jr=!0),r=r.queue,mE(pC.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dr!==null&&dr.memoizedState.tag&1){if(n.flags|=2048,Uh(9,mC.bind(null,n,r,s,e),void 0,null),fr===null)throw Error(he(349));Al&30||fC(n,e,s)}return s}function fC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mC(t,e,n,r){e.value=n,e.getSnapshot=r,gC(e)&&yC(t)}function pC(t,e,n){return n(function(){gC(e)&&yC(t)})}function gC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hs(t,n)}catch{return!0}}function yC(t){var e=Yi(t,1);e!==null&&zs(e,t,1,-1)}function tT(t){var e=oi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jh,lastRenderedState:t},e.queue=t,t=t.dispatch=Wj.bind(null,xn,t),[e.memoizedState,t]}function Uh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vC(){return Ns().memoizedState}function Qm(t,e,n,r){var s=oi();xn.flags|=t,s.memoizedState=Uh(1|e,n,void 0,r===void 0?null:r)}function Kg(t,e,n,r){var s=Ns();r=r===void 0?null:r;var i=void 0;if(Xn!==null){var o=Xn.memoizedState;if(i=o.destroy,r!==null&&dE(r,o.deps)){s.memoizedState=Uh(e,n,i,r);return}}xn.flags|=t,s.memoizedState=Uh(1|e,n,i,r)}function nT(t,e){return Qm(8390656,8,t,e)}function mE(t,e){return Kg(2048,8,t,e)}function wC(t,e){return Kg(4,2,t,e)}function _C(t,e){return Kg(4,4,t,e)}function EC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bC(t,e,n){return n=n!=null?n.concat([t]):null,Kg(4,4,EC.bind(null,e,t),n)}function pE(){}function SC(t,e){var n=Ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function IC(t,e){var n=Ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function TC(t,e,n){return Al&21?(Hs(n,e)||(n=C1(),xn.lanes|=n,Pl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jr=!0),t.memoizedState=n)}function Bj(t,e){var n=qt;qt=n!==0&&4>n?n:4,t(!0);var r=Pv.transition;Pv.transition={};try{t(!1),e()}finally{qt=n,Pv.transition=r}}function xC(){return Ns().memoizedState}function zj(t,e,n){var r=ra(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AC(t))PC(e,n);else if(n=lC(t,e,n,r),n!==null){var s=Ur();zs(n,t,r,s),RC(n,e,r)}}function Wj(t,e,n){var r=ra(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AC(t))PC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Hs(a,o)){var l=e.interleaved;l===null?(s.next=s,oE(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=lC(t,e,s,r),n!==null&&(s=Ur(),zs(n,t,r,s),RC(n,e,r))}}function AC(t){var e=t.alternate;return t===xn||e!==null&&e===xn}function PC(t,e){ih=$p=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H0(t,n)}}var Bp={readContext:ks,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},qj={readContext:ks,useCallback:function(t,e){return oi().memoizedState=[t,e===void 0?null:e],t},useContext:ks,useEffect:nT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qm(4194308,4,EC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qm(4,2,t,e)},useMemo:function(t,e){var n=oi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zj.bind(null,xn,t),[r.memoizedState,t]},useRef:function(t){var e=oi();return t={current:t},e.memoizedState=t},useState:tT,useDebugValue:pE,useDeferredValue:function(t){return oi().memoizedState=t},useTransition:function(){var t=tT(!1),e=t[0];return t=Bj.bind(null,t[1]),oi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xn,s=oi();if(gn){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),fr===null)throw Error(he(349));Al&30||fC(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,nT(pC.bind(null,r,i,t),[t]),r.flags|=2048,Uh(9,mC.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=oi(),e=fr.identifierPrefix;if(gn){var n=ji,r=Fi;n=(r&~(1<<32-Bs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$j++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Hj={readContext:ks,useCallback:SC,useContext:ks,useEffect:mE,useImperativeHandle:bC,useInsertionEffect:wC,useLayoutEffect:_C,useMemo:IC,useReducer:Rv,useRef:vC,useState:function(){return Rv(jh)},useDebugValue:pE,useDeferredValue:function(t){var e=Ns();return TC(e,Xn.memoizedState,t)},useTransition:function(){var t=Rv(jh)[0],e=Ns().memoizedState;return[t,e]},useMutableSource:dC,useSyncExternalStore:hC,useId:xC,unstable_isNewReconciler:!1},Kj={readContext:ks,useCallback:SC,useContext:ks,useEffect:mE,useImperativeHandle:bC,useInsertionEffect:wC,useLayoutEffect:_C,useMemo:IC,useReducer:Cv,useRef:vC,useState:function(){return Cv(jh)},useDebugValue:pE,useDeferredValue:function(t){var e=Ns();return Xn===null?e.memoizedState=t:TC(e,Xn.memoizedState,t)},useTransition:function(){var t=Cv(jh)[0],e=Ns().memoizedState;return[t,e]},useMutableSource:dC,useSyncExternalStore:hC,useId:xC,unstable_isNewReconciler:!1};function Ls(t,e){if(t&&t.defaultProps){e=An({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function r_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:An({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gg={isMounted:function(t){return(t=t._reactInternals)?Kl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ur(),s=ra(t),i=Wi(r,s);i.payload=e,n!=null&&(i.callback=n),e=ta(t,i,s),e!==null&&(zs(e,t,s,r),Km(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ur(),s=ra(t),i=Wi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ta(t,i,s),e!==null&&(zs(e,t,s,r),Km(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ur(),r=ra(t),s=Wi(n,r);s.tag=2,e!=null&&(s.callback=e),e=ta(t,s,r),e!==null&&(zs(e,t,r,n),Km(e,t,r))}};function rT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Nh(n,r)||!Nh(s,i):!0}function CC(t,e,n){var r=!1,s=pa,i=e.contextType;return typeof i=="object"&&i!==null?i=ks(i):(s=rs(e)?Tl:Dr.current,r=e.contextTypes,i=(r=r!=null)?gu(t,s):pa),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function sT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gg.enqueueReplaceState(e,e.state,null)}function s_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},aE(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ks(i):(i=rs(e)?Tl:Dr.current,s.context=gu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(r_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gg.enqueueReplaceState(s,s.state,null),jp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _u(t,e){try{var n="",r=e;do n+=EF(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function i_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gj=typeof WeakMap=="function"?WeakMap:Map;function kC(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wp||(Wp=!0,p_=r),i_(t,e)},n}function NC(t,e,n){n=Wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){i_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){i_(t,e),typeof r!="function"&&(na===null?na=new Set([this]):na.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=lU.bind(null,t,e,n),e.then(t,t))}function oT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function aT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,ta(n,e,1))),n.lanes|=1),t)}var Qj=io.ReactCurrentOwner,Jr=!1;function Vr(t,e,n,r){e.child=t===null?aC(e,null,n,r):vu(e,t.child,n,r)}function lT(t,e,n,r,s){n=n.render;var i=e.ref;return Jc(e,s),r=hE(t,e,n,r,i,s),n=fE(),t!==null&&!Jr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ji(t,e,s)):(gn&&n&&eE(e),e.flags|=1,Vr(t,e,r,s),e.child)}function cT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!SE(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,DC(t,e,i,r,s)):(t=Zm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nh,n(o,r)&&t.ref===e.ref)return Ji(t,e,s)}return e.flags|=1,t=sa(i,r),t.ref=e.ref,t.return=e,e.child=t}function DC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Nh(i,r)&&t.ref===e.ref)if(Jr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Jr=!0);else return e.lanes=t.lanes,Ji(t,e,s)}return o_(t,e,n,r,s)}function OC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(jc,ls),ls|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nn(jc,ls),ls|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,nn(jc,ls),ls|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,nn(jc,ls),ls|=r;return Vr(t,e,s,n),e.child}function LC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function o_(t,e,n,r,s){var i=rs(n)?Tl:Dr.current;return i=gu(e,i),Jc(e,s),n=hE(t,e,n,r,i,s),r=fE(),t!==null&&!Jr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ji(t,e,s)):(gn&&r&&eE(e),e.flags|=1,Vr(t,e,n,s),e.child)}function uT(t,e,n,r,s){if(rs(n)){var i=!0;Op(e)}else i=!1;if(Jc(e,s),e.stateNode===null)Ym(t,e),CC(e,n,r),s_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ks(c):(c=rs(n)?Tl:Dr.current,c=gu(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&sT(e,o,r,c),Ao=!1;var f=e.memoizedState;o.state=f,jp(e,r,o,s),l=e.memoizedState,a!==r||f!==l||ns.current||Ao?(typeof u=="function"&&(r_(e,n,u,r),l=e.memoizedState),(a=Ao||rT(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ls(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ks(l):(l=rs(n)?Tl:Dr.current,l=gu(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&sT(e,o,r,l),Ao=!1,f=e.memoizedState,o.state=f,jp(e,r,o,s);var _=e.memoizedState;a!==h||f!==_||ns.current||Ao?(typeof p=="function"&&(r_(e,n,p,r),_=e.memoizedState),(c=Ao||rT(e,n,c,r,f,_,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return a_(t,e,n,r,i,s)}function a_(t,e,n,r,s,i){LC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&QI(e,n,!1),Ji(t,e,i);r=e.stateNode,Qj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vu(e,t.child,null,i),e.child=vu(e,null,a,i)):Vr(t,e,a,i),e.memoizedState=r.state,s&&QI(e,n,!0),e.child}function MC(t){var e=t.stateNode;e.pendingContext?GI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&GI(t,e.context,!1),lE(t,e.containerInfo)}function dT(t,e,n,r,s){return yu(),nE(s),e.flags|=256,Vr(t,e,n,r),e.child}var l_={dehydrated:null,treeContext:null,retryLane:0};function c_(t){return{baseLanes:t,cachePool:null,transitions:null}}function VC(t,e,n){var r=e.pendingProps,s=Tn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),nn(Tn,s&1),t===null)return t_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Jg(o,r,0,null),t=vl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=c_(n),e.memoizedState=l_,t):gE(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Yj(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=sa(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=sa(a,i):(i=vl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?c_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=l_,r}return i=t.child,t=i.sibling,r=sa(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gE(t,e){return e=Jg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fm(t,e,n,r){return r!==null&&nE(r),vu(e,t.child,null,n),t=gE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Yj(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=kv(Error(he(422))),fm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Jg({mode:"visible",children:r.children},s,0,null),i=vl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vu(e,t.child,null,o),e.child.memoizedState=c_(o),e.memoizedState=l_,i);if(!(e.mode&1))return fm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(he(419)),r=kv(i,r,void 0),fm(t,e,o,r)}if(a=(o&t.childLanes)!==0,Jr||a){if(r=fr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yi(t,s),zs(r,t,s,-1))}return bE(),r=kv(Error(he(421))),fm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cU.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,hs=ea(s.nextSibling),ms=e,gn=!0,Us=null,t!==null&&(Ts[xs++]=Fi,Ts[xs++]=ji,Ts[xs++]=xl,Fi=t.id,ji=t.overflow,xl=e),e=gE(e,r.children),e.flags|=4096,e)}function hT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),n_(t.return,e,n)}function Nv(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function FC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vr(t,e,r.children,n),r=Tn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hT(t,n,e);else if(t.tag===19)hT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nn(Tn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Up(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nv(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Up(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nv(e,!0,n,null,i);break;case"together":Nv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ym(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ji(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=sa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jj(t,e,n){switch(e.tag){case 3:MC(e),yu();break;case 5:uC(e);break;case 1:rs(e.type)&&Op(e);break;case 4:lE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nn(Vp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nn(Tn,Tn.current&1),e.flags|=128,null):n&e.child.childLanes?VC(t,e,n):(nn(Tn,Tn.current&1),t=Ji(t,e,n),t!==null?t.sibling:null);nn(Tn,Tn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nn(Tn,Tn.current),r)break;return null;case 22:case 23:return e.lanes=0,OC(t,e,n)}return Ji(t,e,n)}var jC,u_,UC,$C;jC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};u_=function(){};UC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ll(wi.current);var i=null;switch(n){case"input":s=Nw(t,s),r=Nw(t,r),i=[];break;case"select":s=An({},s,{value:void 0}),r=An({},r,{value:void 0}),i=[];break;case"textarea":s=Lw(t,s),r=Lw(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Np)}Vw(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Th.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Th.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&on("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};$C=function(t,e,n,r){n!==r&&(e.flags|=4)};function Nd(t,e){if(!gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xj(t,e,n){var r=e.pendingProps;switch(tE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(e),null;case 1:return rs(e.type)&&Dp(),xr(e),null;case 3:return r=e.stateNode,wu(),un(ns),un(Dr),uE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Us!==null&&(v_(Us),Us=null))),u_(t,e),xr(e),null;case 5:cE(e);var s=ll(Vh.current);if(n=e.type,t!==null&&e.stateNode!=null)UC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return xr(e),null}if(t=ll(wi.current),dm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hi]=e,r[Lh]=i,t=(e.mode&1)!==0,n){case"dialog":on("cancel",r),on("close",r);break;case"iframe":case"object":case"embed":on("load",r);break;case"video":case"audio":for(s=0;s<qd.length;s++)on(qd[s],r);break;case"source":on("error",r);break;case"img":case"image":case"link":on("error",r),on("load",r);break;case"details":on("toggle",r);break;case"input":EI(r,i),on("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},on("invalid",r);break;case"textarea":SI(r,i),on("invalid",r)}Vw(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&um(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&um(r.textContent,a,t),s=["children",""+a]):Th.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&on("scroll",r)}switch(n){case"input":nm(r),bI(r,i,!0);break;case"textarea":nm(r),II(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Np)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=p1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hi]=e,t[Lh]=r,jC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fw(n,r),n){case"dialog":on("cancel",t),on("close",t),s=r;break;case"iframe":case"object":case"embed":on("load",t),s=r;break;case"video":case"audio":for(s=0;s<qd.length;s++)on(qd[s],t);s=r;break;case"source":on("error",t),s=r;break;case"img":case"image":case"link":on("error",t),on("load",t),s=r;break;case"details":on("toggle",t),s=r;break;case"input":EI(t,r),s=Nw(t,r),on("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=An({},r,{value:void 0}),on("invalid",t);break;case"textarea":SI(t,r),s=Lw(t,r),on("invalid",t);break;default:s=r}Vw(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?v1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&g1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xh(t,l):typeof l=="number"&&xh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Th.hasOwnProperty(i)?l!=null&&i==="onScroll"&&on("scroll",t):l!=null&&U0(t,i,l,o))}switch(n){case"input":nm(t),bI(t,r,!1);break;case"textarea":nm(t),II(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ma(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Kc(t,!!r.multiple,i,!1):r.defaultValue!=null&&Kc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Np)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xr(e),null;case 6:if(t&&e.stateNode!=null)$C(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=ll(Vh.current),ll(wi.current),dm(e)){if(r=e.stateNode,n=e.memoizedProps,r[hi]=e,(i=r.nodeValue!==n)&&(t=ms,t!==null))switch(t.tag){case 3:um(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&um(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hi]=e,e.stateNode=r}return xr(e),null;case 13:if(un(Tn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gn&&hs!==null&&e.mode&1&&!(e.flags&128))iC(),yu(),e.flags|=98560,i=!1;else if(i=dm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(he(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(he(317));i[hi]=e}else yu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xr(e),i=!1}else Us!==null&&(v_(Us),Us=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Tn.current&1?er===0&&(er=3):bE())),e.updateQueue!==null&&(e.flags|=4),xr(e),null);case 4:return wu(),u_(t,e),t===null&&Dh(e.stateNode.containerInfo),xr(e),null;case 10:return iE(e.type._context),xr(e),null;case 17:return rs(e.type)&&Dp(),xr(e),null;case 19:if(un(Tn),i=e.memoizedState,i===null)return xr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Nd(i,!1);else{if(er!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Up(t),o!==null){for(e.flags|=128,Nd(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nn(Tn,Tn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Vn()>Eu&&(e.flags|=128,r=!0,Nd(i,!1),e.lanes=4194304)}else{if(!r)if(t=Up(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gn)return xr(e),null}else 2*Vn()-i.renderingStartTime>Eu&&n!==1073741824&&(e.flags|=128,r=!0,Nd(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Vn(),e.sibling=null,n=Tn.current,nn(Tn,r?n&1|2:n&1),e):(xr(e),null);case 22:case 23:return EE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ls&1073741824&&(xr(e),e.subtreeFlags&6&&(e.flags|=8192)):xr(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function Zj(t,e){switch(tE(e),e.tag){case 1:return rs(e.type)&&Dp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wu(),un(ns),un(Dr),uE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cE(e),null;case 13:if(un(Tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));yu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return un(Tn),null;case 4:return wu(),null;case 10:return iE(e.type._context),null;case 22:case 23:return EE(),null;case 24:return null;default:return null}}var mm=!1,Cr=!1,eU=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Fc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){On(t,e,r)}else n.current=null}function d_(t,e,n){try{n()}catch(r){On(t,e,r)}}var fT=!1;function tU(t,e){if(Gw=Rp,t=H1(),Z0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qw={focusedElem:t,selectionRange:n},Rp=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var g=_.memoizedProps,b=_.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ls(e.type,g),b);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(P){On(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return _=fT,fT=!1,_}function oh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&d_(e,n,i)}s=s.next}while(s!==r)}}function Qg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function h_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function BC(t){var e=t.alternate;e!==null&&(t.alternate=null,BC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hi],delete e[Lh],delete e[Xw],delete e[Vj],delete e[Fj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zC(t){return t.tag===5||t.tag===3||t.tag===4}function mT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function f_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Np));else if(r!==4&&(t=t.child,t!==null))for(f_(t,e,n),t=t.sibling;t!==null;)f_(t,e,n),t=t.sibling}function m_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(m_(t,e,n),t=t.sibling;t!==null;)m_(t,e,n),t=t.sibling}var vr=null,Fs=!1;function go(t,e,n){for(n=n.child;n!==null;)WC(t,e,n),n=n.sibling}function WC(t,e,n){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount($g,n)}catch{}switch(n.tag){case 5:Cr||Fc(n,e);case 6:var r=vr,s=Fs;vr=null,go(t,e,n),vr=r,Fs=s,vr!==null&&(Fs?(t=vr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vr.removeChild(n.stateNode));break;case 18:vr!==null&&(Fs?(t=vr,n=n.stateNode,t.nodeType===8?Tv(t.parentNode,n):t.nodeType===1&&Tv(t,n),Ch(t)):Tv(vr,n.stateNode));break;case 4:r=vr,s=Fs,vr=n.stateNode.containerInfo,Fs=!0,go(t,e,n),vr=r,Fs=s;break;case 0:case 11:case 14:case 15:if(!Cr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&d_(n,e,o),s=s.next}while(s!==r)}go(t,e,n);break;case 1:if(!Cr&&(Fc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){On(n,e,a)}go(t,e,n);break;case 21:go(t,e,n);break;case 22:n.mode&1?(Cr=(r=Cr)||n.memoizedState!==null,go(t,e,n),Cr=r):go(t,e,n);break;default:go(t,e,n)}}function pT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eU),e.forEach(function(r){var s=uU.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ds(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vr=a.stateNode,Fs=!1;break e;case 3:vr=a.stateNode.containerInfo,Fs=!0;break e;case 4:vr=a.stateNode.containerInfo,Fs=!0;break e}a=a.return}if(vr===null)throw Error(he(160));WC(i,o,s),vr=null,Fs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){On(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qC(e,t),e=e.sibling}function qC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ds(e,t),ii(t),r&4){try{oh(3,t,t.return),Qg(3,t)}catch(g){On(t,t.return,g)}try{oh(5,t,t.return)}catch(g){On(t,t.return,g)}}break;case 1:Ds(e,t),ii(t),r&512&&n!==null&&Fc(n,n.return);break;case 5:if(Ds(e,t),ii(t),r&512&&n!==null&&Fc(n,n.return),t.flags&32){var s=t.stateNode;try{xh(s,"")}catch(g){On(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&f1(s,i),Fw(a,o);var c=Fw(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?v1(s,h):u==="dangerouslySetInnerHTML"?g1(s,h):u==="children"?xh(s,h):U0(s,u,h,c)}switch(a){case"input":Dw(s,i);break;case"textarea":m1(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Kc(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Kc(s,!!i.multiple,i.defaultValue,!0):Kc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lh]=i}catch(g){On(t,t.return,g)}}break;case 6:if(Ds(e,t),ii(t),r&4){if(t.stateNode===null)throw Error(he(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){On(t,t.return,g)}}break;case 3:if(Ds(e,t),ii(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ch(e.containerInfo)}catch(g){On(t,t.return,g)}break;case 4:Ds(e,t),ii(t);break;case 13:Ds(e,t),ii(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wE=Vn())),r&4&&pT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Cr=(c=Cr)||u,Ds(e,t),Cr=c):Ds(e,t),ii(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Fe=t,u=t.child;u!==null;){for(h=Fe=u;Fe!==null;){switch(f=Fe,p=f.child,f.tag){case 0:case 11:case 14:case 15:oh(4,f,f.return);break;case 1:Fc(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(g){On(r,n,g)}}break;case 5:Fc(f,f.return);break;case 22:if(f.memoizedState!==null){yT(h);continue}}p!==null?(p.return=f,Fe=p):yT(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=y1("display",o))}catch(g){On(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){On(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ds(e,t),ii(t),r&4&&pT(t);break;case 21:break;default:Ds(e,t),ii(t)}}function ii(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zC(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xh(s,""),r.flags&=-33);var i=mT(t);m_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=mT(t);f_(t,a,o);break;default:throw Error(he(161))}}catch(l){On(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nU(t,e,n){Fe=t,HC(t)}function HC(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var s=Fe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Cr;a=mm;var c=Cr;if(mm=o,(Cr=l)&&!c)for(Fe=s;Fe!==null;)o=Fe,l=o.child,o.tag===22&&o.memoizedState!==null?vT(s):l!==null?(l.return=o,Fe=l):vT(s);for(;i!==null;)Fe=i,HC(i),i=i.sibling;Fe=s,mm=a,Cr=c}gT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Fe=i):gT(t)}}function gT(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cr||Qg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ls(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&eT(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}eT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ch(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}Cr||e.flags&512&&h_(e)}catch(f){On(e,e.return,f)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function yT(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function vT(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qg(4,e)}catch(l){On(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){On(e,s,l)}}var i=e.return;try{h_(e)}catch(l){On(e,i,l)}break;case 5:var o=e.return;try{h_(e)}catch(l){On(e,o,l)}}}catch(l){On(e,e.return,l)}if(e===t){Fe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Fe=a;break}Fe=e.return}}var rU=Math.ceil,zp=io.ReactCurrentDispatcher,yE=io.ReactCurrentOwner,Rs=io.ReactCurrentBatchConfig,Lt=0,fr=null,qn=null,Er=0,ls=0,jc=Aa(0),er=0,$h=null,Pl=0,Yg=0,vE=0,ah=null,Kr=null,wE=0,Eu=1/0,Oi=null,Wp=!1,p_=null,na=null,pm=!1,qo=null,qp=0,lh=0,g_=null,Jm=-1,Xm=0;function Ur(){return Lt&6?Vn():Jm!==-1?Jm:Jm=Vn()}function ra(t){return t.mode&1?Lt&2&&Er!==0?Er&-Er:Uj.transition!==null?(Xm===0&&(Xm=C1()),Xm):(t=qt,t!==0||(t=window.event,t=t===void 0?16:V1(t.type)),t):1}function zs(t,e,n,r){if(50<lh)throw lh=0,g_=null,Error(he(185));gf(t,n,r),(!(Lt&2)||t!==fr)&&(t===fr&&(!(Lt&2)&&(Yg|=n),er===4&&Co(t,Er)),ss(t,r),n===1&&Lt===0&&!(e.mode&1)&&(Eu=Vn()+500,Hg&&Pa()))}function ss(t,e){var n=t.callbackNode;UF(t,e);var r=Pp(t,t===fr?Er:0);if(r===0)n!==null&&AI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&AI(n),e===1)t.tag===0?jj(wT.bind(null,t)):nC(wT.bind(null,t)),Lj(function(){!(Lt&6)&&Pa()}),n=null;else{switch(k1(r)){case 1:n=q0;break;case 4:n=P1;break;case 16:n=Ap;break;case 536870912:n=R1;break;default:n=Ap}n=ek(n,KC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KC(t,e){if(Jm=-1,Xm=0,Lt&6)throw Error(he(327));var n=t.callbackNode;if(Xc()&&t.callbackNode!==n)return null;var r=Pp(t,t===fr?Er:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hp(t,r);else{e=r;var s=Lt;Lt|=2;var i=QC();(fr!==t||Er!==e)&&(Oi=null,Eu=Vn()+500,yl(t,e));do try{oU();break}catch(a){GC(t,a)}while(!0);sE(),zp.current=i,Lt=s,qn!==null?e=0:(fr=null,Er=0,e=er)}if(e!==0){if(e===2&&(s=zw(t),s!==0&&(r=s,e=y_(t,s))),e===1)throw n=$h,yl(t,0),Co(t,r),ss(t,Vn()),n;if(e===6)Co(t,r);else{if(s=t.current.alternate,!(r&30)&&!sU(s)&&(e=Hp(t,r),e===2&&(i=zw(t),i!==0&&(r=i,e=y_(t,i))),e===1))throw n=$h,yl(t,0),Co(t,r),ss(t,Vn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:qa(t,Kr,Oi);break;case 3:if(Co(t,r),(r&130023424)===r&&(e=wE+500-Vn(),10<e)){if(Pp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ur(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jw(qa.bind(null,t,Kr,Oi),e);break}qa(t,Kr,Oi);break;case 4:if(Co(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Bs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rU(r/1960))-r,10<r){t.timeoutHandle=Jw(qa.bind(null,t,Kr,Oi),r);break}qa(t,Kr,Oi);break;case 5:qa(t,Kr,Oi);break;default:throw Error(he(329))}}}return ss(t,Vn()),t.callbackNode===n?KC.bind(null,t):null}function y_(t,e){var n=ah;return t.current.memoizedState.isDehydrated&&(yl(t,e).flags|=256),t=Hp(t,e),t!==2&&(e=Kr,Kr=n,e!==null&&v_(e)),t}function v_(t){Kr===null?Kr=t:Kr.push.apply(Kr,t)}function sU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Hs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Co(t,e){for(e&=~vE,e&=~Yg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bs(e),r=1<<n;t[n]=-1,e&=~r}}function wT(t){if(Lt&6)throw Error(he(327));Xc();var e=Pp(t,0);if(!(e&1))return ss(t,Vn()),null;var n=Hp(t,e);if(t.tag!==0&&n===2){var r=zw(t);r!==0&&(e=r,n=y_(t,r))}if(n===1)throw n=$h,yl(t,0),Co(t,e),ss(t,Vn()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qa(t,Kr,Oi),ss(t,Vn()),null}function _E(t,e){var n=Lt;Lt|=1;try{return t(e)}finally{Lt=n,Lt===0&&(Eu=Vn()+500,Hg&&Pa())}}function Rl(t){qo!==null&&qo.tag===0&&!(Lt&6)&&Xc();var e=Lt;Lt|=1;var n=Rs.transition,r=qt;try{if(Rs.transition=null,qt=1,t)return t()}finally{qt=r,Rs.transition=n,Lt=e,!(Lt&6)&&Pa()}}function EE(){ls=jc.current,un(jc)}function yl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Oj(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(tE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dp();break;case 3:wu(),un(ns),un(Dr),uE();break;case 5:cE(r);break;case 4:wu();break;case 13:un(Tn);break;case 19:un(Tn);break;case 10:iE(r.type._context);break;case 22:case 23:EE()}n=n.return}if(fr=t,qn=t=sa(t.current,null),Er=ls=e,er=0,$h=null,vE=Yg=Pl=0,Kr=ah=null,al!==null){for(e=0;e<al.length;e++)if(n=al[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}al=null}return t}function GC(t,e){do{var n=qn;try{if(sE(),Gm.current=Bp,$p){for(var r=xn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$p=!1}if(Al=0,dr=Xn=xn=null,ih=!1,Fh=0,yE.current=null,n===null||n.return===null){er=1,$h=e,qn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Er,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=oT(o);if(p!==null){p.flags&=-257,aT(p,o,a,i,e),p.mode&1&&iT(i,c,e),e=p,l=c;var _=e.updateQueue;if(_===null){var g=new Set;g.add(l),e.updateQueue=g}else _.add(l);break e}else{if(!(e&1)){iT(i,c,e),bE();break e}l=Error(he(426))}}else if(gn&&a.mode&1){var b=oT(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),aT(b,o,a,i,e),nE(_u(l,a));break e}}i=l=_u(l,a),er!==4&&(er=2),ah===null?ah=[i]:ah.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=kC(i,l,e);ZI(i,E);break e;case 1:a=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(na===null||!na.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=NC(i,a,e);ZI(i,P);break e}}i=i.return}while(i!==null)}JC(n)}catch(x){e=x,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function QC(){var t=zp.current;return zp.current=Bp,t===null?Bp:t}function bE(){(er===0||er===3||er===2)&&(er=4),fr===null||!(Pl&268435455)&&!(Yg&268435455)||Co(fr,Er)}function Hp(t,e){var n=Lt;Lt|=2;var r=QC();(fr!==t||Er!==e)&&(Oi=null,yl(t,e));do try{iU();break}catch(s){GC(t,s)}while(!0);if(sE(),Lt=n,zp.current=r,qn!==null)throw Error(he(261));return fr=null,Er=0,er}function iU(){for(;qn!==null;)YC(qn)}function oU(){for(;qn!==null&&!kF();)YC(qn)}function YC(t){var e=ZC(t.alternate,t,ls);t.memoizedProps=t.pendingProps,e===null?JC(t):qn=e,yE.current=null}function JC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Zj(n,e),n!==null){n.flags&=32767,qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{er=6,qn=null;return}}else if(n=Xj(n,e,ls),n!==null){qn=n;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=t}while(e!==null);er===0&&(er=5)}function qa(t,e,n){var r=qt,s=Rs.transition;try{Rs.transition=null,qt=1,aU(t,e,n,r)}finally{Rs.transition=s,qt=r}return null}function aU(t,e,n,r){do Xc();while(qo!==null);if(Lt&6)throw Error(he(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($F(t,i),t===fr&&(qn=fr=null,Er=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pm||(pm=!0,ek(Ap,function(){return Xc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rs.transition,Rs.transition=null;var o=qt;qt=1;var a=Lt;Lt|=4,yE.current=null,tU(t,n),qC(n,t),Aj(Qw),Rp=!!Gw,Qw=Gw=null,t.current=n,nU(n),NF(),Lt=a,qt=o,Rs.transition=i}else t.current=n;if(pm&&(pm=!1,qo=t,qp=s),i=t.pendingLanes,i===0&&(na=null),LF(n.stateNode),ss(t,Vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wp)throw Wp=!1,t=p_,p_=null,t;return qp&1&&t.tag!==0&&Xc(),i=t.pendingLanes,i&1?t===g_?lh++:(lh=0,g_=t):lh=0,Pa(),null}function Xc(){if(qo!==null){var t=k1(qp),e=Rs.transition,n=qt;try{if(Rs.transition=null,qt=16>t?16:t,qo===null)var r=!1;else{if(t=qo,qo=null,qp=0,Lt&6)throw Error(he(331));var s=Lt;for(Lt|=4,Fe=t.current;Fe!==null;){var i=Fe,o=i.child;if(Fe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Fe=c;Fe!==null;){var u=Fe;switch(u.tag){case 0:case 11:case 15:oh(8,u,i)}var h=u.child;if(h!==null)h.return=u,Fe=h;else for(;Fe!==null;){u=Fe;var f=u.sibling,p=u.return;if(BC(u),u===c){Fe=null;break}if(f!==null){f.return=p,Fe=f;break}Fe=p}}}var _=i.alternate;if(_!==null){var g=_.child;if(g!==null){_.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Fe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Fe=o;else e:for(;Fe!==null;){if(i=Fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oh(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Fe=E;break e}Fe=i.return}}var w=t.current;for(Fe=w;Fe!==null;){o=Fe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Fe=S;else e:for(o=w;Fe!==null;){if(a=Fe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qg(9,a)}}catch(x){On(a,a.return,x)}if(a===o){Fe=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Fe=P;break e}Fe=a.return}}if(Lt=s,Pa(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot($g,t)}catch{}r=!0}return r}finally{qt=n,Rs.transition=e}}return!1}function _T(t,e,n){e=_u(n,e),e=kC(t,e,1),t=ta(t,e,1),e=Ur(),t!==null&&(gf(t,1,e),ss(t,e))}function On(t,e,n){if(t.tag===3)_T(t,t,n);else for(;e!==null;){if(e.tag===3){_T(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(na===null||!na.has(r))){t=_u(n,t),t=NC(e,t,1),e=ta(e,t,1),t=Ur(),e!==null&&(gf(e,1,t),ss(e,t));break}}e=e.return}}function lU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ur(),t.pingedLanes|=t.suspendedLanes&n,fr===t&&(Er&n)===n&&(er===4||er===3&&(Er&130023424)===Er&&500>Vn()-wE?yl(t,0):vE|=n),ss(t,e)}function XC(t,e){e===0&&(t.mode&1?(e=im,im<<=1,!(im&130023424)&&(im=4194304)):e=1);var n=Ur();t=Yi(t,e),t!==null&&(gf(t,e,n),ss(t,n))}function cU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),XC(t,n)}function uU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),XC(t,n)}var ZC;ZC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ns.current)Jr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jr=!1,Jj(t,e,n);Jr=!!(t.flags&131072)}else Jr=!1,gn&&e.flags&1048576&&rC(e,Mp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ym(t,e),t=e.pendingProps;var s=gu(e,Dr.current);Jc(e,n),s=hE(null,e,r,t,s,n);var i=fE();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rs(r)?(i=!0,Op(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,aE(e),s.updater=Gg,e.stateNode=s,s._reactInternals=e,s_(e,r,t,n),e=a_(null,e,r,!0,i,n)):(e.tag=0,gn&&i&&eE(e),Vr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ym(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=hU(r),t=Ls(r,t),s){case 0:e=o_(null,e,r,t,n);break e;case 1:e=uT(null,e,r,t,n);break e;case 11:e=lT(null,e,r,t,n);break e;case 14:e=cT(null,e,r,Ls(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ls(r,s),o_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ls(r,s),uT(t,e,r,s,n);case 3:e:{if(MC(e),t===null)throw Error(he(387));r=e.pendingProps,i=e.memoizedState,s=i.element,cC(t,e),jp(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_u(Error(he(423)),e),e=dT(t,e,r,n,s);break e}else if(r!==s){s=_u(Error(he(424)),e),e=dT(t,e,r,n,s);break e}else for(hs=ea(e.stateNode.containerInfo.firstChild),ms=e,gn=!0,Us=null,n=aC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yu(),r===s){e=Ji(t,e,n);break e}Vr(t,e,r,n)}e=e.child}return e;case 5:return uC(e),t===null&&t_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yw(r,s)?o=null:i!==null&&Yw(r,i)&&(e.flags|=32),LC(t,e),Vr(t,e,o,n),e.child;case 6:return t===null&&t_(e),null;case 13:return VC(t,e,n);case 4:return lE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vu(e,null,r,n):Vr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ls(r,s),lT(t,e,r,s,n);case 7:return Vr(t,e,e.pendingProps,n),e.child;case 8:return Vr(t,e,e.pendingProps.children,n),e.child;case 12:return Vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,nn(Vp,r._currentValue),r._currentValue=o,i!==null)if(Hs(i.value,o)){if(i.children===s.children&&!ns.current){e=Ji(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Wi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),n_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(he(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),n_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Vr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jc(e,n),s=ks(s),r=r(s),e.flags|=1,Vr(t,e,r,n),e.child;case 14:return r=e.type,s=Ls(r,e.pendingProps),s=Ls(r.type,s),cT(t,e,r,s,n);case 15:return DC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ls(r,s),Ym(t,e),e.tag=1,rs(r)?(t=!0,Op(e)):t=!1,Jc(e,n),CC(e,r,s),s_(e,r,s,n),a_(null,e,r,!0,t,n);case 19:return FC(t,e,n);case 22:return OC(t,e,n)}throw Error(he(156,e.tag))};function ek(t,e){return A1(t,e)}function dU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(t,e,n,r){return new dU(t,e,n,r)}function SE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hU(t){if(typeof t=="function")return SE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===B0)return 11;if(t===z0)return 14}return 2}function sa(t,e){var n=t.alternate;return n===null?(n=As(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zm(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")SE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rc:return vl(n.children,s,i,e);case $0:o=8,s|=8;break;case Pw:return t=As(12,n,e,s|2),t.elementType=Pw,t.lanes=i,t;case Rw:return t=As(13,n,e,s),t.elementType=Rw,t.lanes=i,t;case Cw:return t=As(19,n,e,s),t.elementType=Cw,t.lanes=i,t;case u1:return Jg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l1:o=10;break e;case c1:o=9;break e;case B0:o=11;break e;case z0:o=14;break e;case xo:o=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=As(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function vl(t,e,n,r){return t=As(7,t,r,e),t.lanes=n,t}function Jg(t,e,n,r){return t=As(22,t,r,e),t.elementType=u1,t.lanes=n,t.stateNode={isHidden:!1},t}function Dv(t,e,n){return t=As(6,t,null,e),t.lanes=n,t}function Ov(t,e,n){return e=As(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fU(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mv(0),this.expirationTimes=mv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function IE(t,e,n,r,s,i,o,a,l){return t=new fU(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=As(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aE(i),t}function mU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tk(t){if(!t)return pa;t=t._reactInternals;e:{if(Kl(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(rs(n))return tC(t,n,e)}return e}function nk(t,e,n,r,s,i,o,a,l){return t=IE(n,r,!0,t,s,i,o,a,l),t.context=tk(null),n=t.current,r=Ur(),s=ra(n),i=Wi(r,s),i.callback=e??null,ta(n,i,s),t.current.lanes=s,gf(t,s,r),ss(t,r),t}function Xg(t,e,n,r){var s=e.current,i=Ur(),o=ra(s);return n=tk(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ta(s,e,o),t!==null&&(zs(t,s,o,i),Km(t,s,o)),o}function Kp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ET(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function TE(t,e){ET(t,e),(t=t.alternate)&&ET(t,e)}function pU(){return null}var rk=typeof reportError=="function"?reportError:function(t){console.error(t)};function xE(t){this._internalRoot=t}Zg.prototype.render=xE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));Xg(t,e,null,null)};Zg.prototype.unmount=xE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rl(function(){Xg(null,t,null,null)}),e[Qi]=null}};function Zg(t){this._internalRoot=t}Zg.prototype.unstable_scheduleHydration=function(t){if(t){var e=O1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ro.length&&e!==0&&e<Ro[n].priority;n++);Ro.splice(n,0,t),n===0&&M1(t)}};function AE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ey(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bT(){}function gU(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Kp(o);i.call(c)}}var o=nk(e,r,t,0,null,!1,!1,"",bT);return t._reactRootContainer=o,t[Qi]=o.current,Dh(t.nodeType===8?t.parentNode:t),Rl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Kp(l);a.call(c)}}var l=IE(t,0,!1,null,null,!1,!1,"",bT);return t._reactRootContainer=l,t[Qi]=l.current,Dh(t.nodeType===8?t.parentNode:t),Rl(function(){Xg(e,l,n,r)}),l}function ty(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Kp(o);a.call(l)}}Xg(e,o,t,s)}else o=gU(n,e,t,s,r);return Kp(o)}N1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wd(e.pendingLanes);n!==0&&(H0(e,n|1),ss(e,Vn()),!(Lt&6)&&(Eu=Vn()+500,Pa()))}break;case 13:Rl(function(){var r=Yi(t,1);if(r!==null){var s=Ur();zs(r,t,1,s)}}),TE(t,1)}};K0=function(t){if(t.tag===13){var e=Yi(t,134217728);if(e!==null){var n=Ur();zs(e,t,134217728,n)}TE(t,134217728)}};D1=function(t){if(t.tag===13){var e=ra(t),n=Yi(t,e);if(n!==null){var r=Ur();zs(n,t,e,r)}TE(t,e)}};O1=function(){return qt};L1=function(t,e){var n=qt;try{return qt=t,e()}finally{qt=n}};Uw=function(t,e,n){switch(e){case"input":if(Dw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qg(r);if(!s)throw Error(he(90));h1(r),Dw(r,s)}}}break;case"textarea":m1(t,n);break;case"select":e=n.value,e!=null&&Kc(t,!!n.multiple,e,!1)}};E1=_E;b1=Rl;var yU={usingClientEntryPoint:!1,Events:[vf,Dc,qg,w1,_1,_E]},Dd={findFiberByHostInstance:ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vU={bundleType:Dd.bundleType,version:Dd.version,rendererPackageName:Dd.rendererPackageName,rendererConfig:Dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:io.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T1(t),t===null?null:t.stateNode},findFiberByHostInstance:Dd.findFiberByHostInstance||pU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gm.isDisabled&&gm.supportsFiber)try{$g=gm.inject(vU),vi=gm}catch{}}Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yU;Es.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AE(e))throw Error(he(200));return mU(t,e,null,n)};Es.createRoot=function(t,e){if(!AE(t))throw Error(he(299));var n=!1,r="",s=rk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=IE(t,1,!1,null,null,n,!1,r,s),t[Qi]=e.current,Dh(t.nodeType===8?t.parentNode:t),new xE(e)};Es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=T1(e),t=t===null?null:t.stateNode,t};Es.flushSync=function(t){return Rl(t)};Es.hydrate=function(t,e,n){if(!ey(e))throw Error(he(200));return ty(null,t,e,!0,n)};Es.hydrateRoot=function(t,e,n){if(!AE(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=rk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nk(e,null,t,1,n??null,s,!1,i,o),t[Qi]=e.current,Dh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zg(e)};Es.render=function(t,e,n){if(!ey(e))throw Error(he(200));return ty(null,t,e,!1,n)};Es.unmountComponentAtNode=function(t){if(!ey(t))throw Error(he(40));return t._reactRootContainer?(Rl(function(){ty(null,null,t,!1,function(){t._reactRootContainer=null,t[Qi]=null})}),!0):!1};Es.unstable_batchedUpdates=_E;Es.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ey(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return ty(t,e,n,!1,r)};Es.version="18.3.1-next-f1338f8080-20240426";function sk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sk)}catch(t){console.error(t)}}sk(),s1.exports=Es;var _f=s1.exports;const ik=HR(_f);var ok,ST=_f;ok=ST.createRoot,ST.hydrateRoot;const wU="modulepreload",_U=function(t,e){return new URL(t,e).href},IT={},se=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=_U(c,r),c in IT)return;IT[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const g=o[_];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":wU,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((_,g)=>{p.addEventListener("load",_),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},EU=1,bU=1e6;let Lv=0;function SU(){return Lv=(Lv+1)%Number.MAX_SAFE_INTEGER,Lv.toString()}const Mv=new Map,TT=t=>{if(Mv.has(t))return;const e=setTimeout(()=>{Mv.delete(t),ch({type:"REMOVE_TOAST",toastId:t})},bU);Mv.set(t,e)},IU=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,EU)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?TT(n):t.toasts.forEach(r=>{TT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ep=[];let tp={toasts:[]};function ch(t){tp=IU(tp,t),ep.forEach(e=>{e(tp)})}function TU({...t}){const e=SU(),n=s=>ch({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ch({type:"DISMISS_TOAST",toastId:e});return ch({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Gl(){const[t,e]=v.useState(tp);return v.useEffect(()=>(ep.push(e),()=>{const n=ep.indexOf(e);n>-1&&ep.splice(n,1)}),[t]),{...t,toast:TU,dismiss:n=>ch({type:"DISMISS_TOAST",toastId:n})}}function tn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function xT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ef(...t){return e=>{let n=!1;const r=t.map(s=>{const i=xT(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():xT(t[s],null)}}}}function Sr(...t){return v.useCallback(Ef(...t),t)}function xU(t,e){const n=v.createContext(e),r=i=>{const{children:o,...a}=i,l=v.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=v.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Zu(t,e=[]){let n=[];function r(i,o){const a=v.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:p,..._}=h,g=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,b=v.useMemo(()=>_,Object.values(_));return m.jsx(g.Provider,{value:b,children:p})};c.displayName=i+"Provider";function u(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,_=v.useContext(p);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>v.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,AU(s,...e)]}function AU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function AT(t){const e=PU(t),n=v.forwardRef((r,s)=>{const{children:i,...o}=r,a=v.Children.toArray(i),l=a.find(CU);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function PU(t){const e=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const o=NU(s),a=kU(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var RU=Symbol("radix.slottable");function CU(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===RU}function kU(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function NU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function DU(t){const e=t+"CollectionProvider",[n,r]=Zu(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:E}=g,w=V.useRef(null),S=V.useRef(new Map).current;return m.jsx(s,{scope:b,itemMap:S,collectionRef:w,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=AT(a),c=V.forwardRef((g,b)=>{const{scope:E,children:w}=g,S=i(a,E),P=Sr(b,S.collectionRef);return m.jsx(l,{ref:P,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=AT(u),p=V.forwardRef((g,b)=>{const{scope:E,children:w,...S}=g,P=V.useRef(null),x=Sr(b,P),O=i(u,E);return V.useEffect(()=>(O.itemMap.set(P,{ref:P,...S}),()=>void O.itemMap.delete(P))),m.jsx(f,{[h]:"",ref:x,children:w})});p.displayName=u;function _(g){const b=i(t+"CollectionConsumer",g);return V.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((O,T)=>S.indexOf(O.ref.current)-S.indexOf(T.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},_,r]}function OU(t){const e=LU(t),n=v.forwardRef((r,s)=>{const{children:i,...o}=r,a=v.Children.toArray(i),l=a.find(VU);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function LU(t){const e=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const o=jU(s),a=FU(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var MU=Symbol("radix.slottable");function VU(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===MU}function FU(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function jU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var UU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rn=UU.reduce((t,e)=>{const n=OU(`Primitive.${e}`),r=v.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function ak(t,e){t&&_f.flushSync(()=>t.dispatchEvent(e))}function Ti(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function $U(t,e=globalThis==null?void 0:globalThis.document){const n=Ti(t);v.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var BU="DismissableLayer",w_="dismissableLayer.update",zU="dismissableLayer.pointerDownOutside",WU="dismissableLayer.focusOutside",PT,lk=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ny=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=v.useContext(lk),[u,h]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=v.useState({}),_=Sr(e,T=>h(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=g.indexOf(b),w=u?g.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,P=w>=E,x=HU(T=>{const A=T.target,R=[...c.branches].some(N=>N.contains(A));!P||R||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},f),O=KU(T=>{const A=T.target;[...c.branches].some(N=>N.contains(A))||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},f);return $U(T=>{w===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(PT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),RT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=PT)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),RT())},[u,c]),v.useEffect(()=>{const T=()=>p({});return document.addEventListener(w_,T),()=>document.removeEventListener(w_,T)},[]),m.jsx(Rn.div,{...l,ref:_,style:{pointerEvents:S?P?"auto":"none":void 0,...t.style},onFocusCapture:tn(t.onFocusCapture,O.onFocusCapture),onBlurCapture:tn(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:tn(t.onPointerDownCapture,x.onPointerDownCapture)})});ny.displayName=BU;var qU="DismissableLayerBranch",ck=v.forwardRef((t,e)=>{const n=v.useContext(lk),r=v.useRef(null),s=Sr(e,r);return v.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),m.jsx(Rn.div,{...t,ref:s})});ck.displayName=qU;function HU(t,e=globalThis==null?void 0:globalThis.document){const n=Ti(t),r=v.useRef(!1),s=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){uk(zU,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function KU(t,e=globalThis==null?void 0:globalThis.document){const n=Ti(t),r=v.useRef(!1);return v.useEffect(()=>{const s=i=>{i.target&&!r.current&&uk(WU,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function RT(){const t=new CustomEvent(w_);document.dispatchEvent(t)}function uk(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?ak(s,i):s.dispatchEvent(i)}var GU=ny,QU=ck,Xi=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},YU="Portal",PE=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=v.useState(!1);Xi(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ik.createPortal(m.jsx(Rn.div,{...r,ref:e}),o):null});PE.displayName=YU;function JU(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Ql=t=>{const{present:e,children:n}=t,r=XU(e),s=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),i=Sr(r.ref,ZU(s));return typeof n=="function"||r.isPresent?v.cloneElement(s,{ref:i}):null};Ql.displayName="Presence";function XU(t){const[e,n]=v.useState(),r=v.useRef(null),s=v.useRef(t),i=v.useRef("none"),o=t?"mounted":"unmounted",[a,l]=JU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=ym(r.current);i.current=a==="mounted"?c:"none"},[a]),Xi(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,p=ym(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Xi(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=p=>{const g=ym(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=p=>{p.target===e&&(i.current=ym(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function ym(t){return(t==null?void 0:t.animationName)||"none"}function ZU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var e4=Ug[" useInsertionEffect ".trim().toString()]||Xi;function RE({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=t4({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const u=v.useRef(t!==void 0);v.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=v.useCallback(u=>{var h;if(a){const f=n4(u)?u(t):u;f!==t&&((h=o.current)==null||h.call(o,f))}else i(u)},[a,t,i,o]);return[l,c]}function t4({defaultProp:t,onChange:e}){const[n,r]=v.useState(t),s=v.useRef(n),i=v.useRef(e);return e4(()=>{i.current=e},[e]),v.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function n4(t){return typeof t=="function"}var r4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),s4="VisuallyHidden",ry=v.forwardRef((t,e)=>m.jsx(Rn.span,{...t,ref:e,style:{...r4,...t.style}}));ry.displayName=s4;var i4=ry,CE="ToastProvider",[kE,o4,a4]=DU("Toast"),[dk]=Zu("Toast",[a4]),[l4,sy]=dk(CE),hk=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=v.useState(null),[c,u]=v.useState(0),h=v.useRef(!1),f=v.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${CE}\`. Expected non-empty \`string\`.`),m.jsx(kE.Provider,{scope:e,children:m.jsx(l4,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:v.useCallback(()=>u(p=>p+1),[]),onToastRemove:v.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};hk.displayName=CE;var fk="ToastViewport",c4=["F8"],__="toast.viewportPause",E_="toast.viewportResume",mk=v.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=c4,label:s="Notifications ({hotkey})",...i}=t,o=sy(fk,n),a=o4(n),l=v.useRef(null),c=v.useRef(null),u=v.useRef(null),h=v.useRef(null),f=Sr(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;v.useEffect(()=>{const b=E=>{var S;r.length!==0&&r.every(P=>E[P]||E.code===P)&&((S=h.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),v.useEffect(()=>{const b=l.current,E=h.current;if(_&&b&&E){const w=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(__);E.dispatchEvent(O),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(E_);E.dispatchEvent(O),o.isClosePausedRef.current=!1}},P=O=>{!b.contains(O.relatedTarget)&&S()},x=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",w),b.addEventListener("focusout",P),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",x),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",P),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",x),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[_,o.isClosePausedRef]);const g=v.useCallback(({tabbingDirection:b})=>{const w=a().map(S=>{const P=S.ref.current,x=[P,...b4(P)];return b==="forwards"?x:x.reverse()});return(b==="forwards"?w.reverse():w).flat()},[a]);return v.useEffect(()=>{const b=h.current;if(b){const E=w=>{var x,O,T;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const A=document.activeElement,R=w.shiftKey;if(w.target===b&&R){(x=c.current)==null||x.focus();return}const L=g({tabbingDirection:R?"backwards":"forwards"}),D=L.findIndex(J=>J===A);Vv(L.slice(D+1))?w.preventDefault():R?(O=c.current)==null||O.focus():(T=u.current)==null||T.focus()}};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)}},[a,g]),m.jsxs(QU,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&m.jsx(b_,{ref:c,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});Vv(b)}}),m.jsx(kE.Slot,{scope:n,children:m.jsx(Rn.ol,{tabIndex:-1,...i,ref:f})}),_&&m.jsx(b_,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});Vv(b)}})]})});mk.displayName=fk;var pk="ToastFocusProxy",b_=v.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=sy(pk,n);return m.jsx(ry,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});b_.displayName=pk;var bf="Toast",u4="toast.swipeStart",d4="toast.swipeMove",h4="toast.swipeCancel",f4="toast.swipeEnd",gk=v.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=RE({prop:r,defaultProp:s??!0,onChange:i,caller:bf});return m.jsx(Ql,{present:n||a,children:m.jsx(g4,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Ti(t.onPause),onResume:Ti(t.onResume),onSwipeStart:tn(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:tn(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:tn(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:tn(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});gk.displayName=bf;var[m4,p4]=dk(bf,{onClose(){}}),g4=v.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,..._}=t,g=sy(bf,n),[b,E]=v.useState(null),w=Sr(e,J=>E(J)),S=v.useRef(null),P=v.useRef(null),x=s||g.duration,O=v.useRef(0),T=v.useRef(x),A=v.useRef(0),{onToastAdd:R,onToastRemove:N}=g,C=Ti(()=>{var Le;(b==null?void 0:b.contains(document.activeElement))&&((Le=g.viewport)==null||Le.focus()),o()}),L=v.useCallback(J=>{!J||J===1/0||(window.clearTimeout(A.current),O.current=new Date().getTime(),A.current=window.setTimeout(C,J))},[C]);v.useEffect(()=>{const J=g.viewport;if(J){const Le=()=>{L(T.current),c==null||c()},ke=()=>{const We=new Date().getTime()-O.current;T.current=T.current-We,window.clearTimeout(A.current),l==null||l()};return J.addEventListener(__,ke),J.addEventListener(E_,Le),()=>{J.removeEventListener(__,ke),J.removeEventListener(E_,Le)}}},[g.viewport,x,l,c,L]),v.useEffect(()=>{i&&!g.isClosePausedRef.current&&L(x)},[i,x,g.isClosePausedRef,L]),v.useEffect(()=>(R(),()=>N()),[R,N]);const D=v.useMemo(()=>b?Sk(b):null,[b]);return g.viewport?m.jsxs(m.Fragment,{children:[D&&m.jsx(y4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),m.jsx(m4,{scope:n,onClose:C,children:_f.createPortal(m.jsx(kE.ItemSlot,{scope:n,children:m.jsx(GU,{asChild:!0,onEscapeKeyDown:tn(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||C(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(Rn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,..._,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:tn(t.onKeyDown,J=>{J.key==="Escape"&&(a==null||a(J.nativeEvent),J.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:tn(t.onPointerDown,J=>{J.button===0&&(S.current={x:J.clientX,y:J.clientY})}),onPointerMove:tn(t.onPointerMove,J=>{if(!S.current)return;const Le=J.clientX-S.current.x,ke=J.clientY-S.current.y,We=!!P.current,W=["left","right"].includes(g.swipeDirection),q=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,oe=W?q(0,Le):0,ge=W?0:q(0,ke),pe=J.pointerType==="touch"?10:2,Me={x:oe,y:ge},ve={originalEvent:J,delta:Me};We?(P.current=Me,vm(d4,h,ve,{discrete:!1})):CT(Me,g.swipeDirection,pe)?(P.current=Me,vm(u4,u,ve,{discrete:!1}),J.target.setPointerCapture(J.pointerId)):(Math.abs(Le)>pe||Math.abs(ke)>pe)&&(S.current=null)}),onPointerUp:tn(t.onPointerUp,J=>{const Le=P.current,ke=J.target;if(ke.hasPointerCapture(J.pointerId)&&ke.releasePointerCapture(J.pointerId),P.current=null,S.current=null,Le){const We=J.currentTarget,W={originalEvent:J,delta:Le};CT(Le,g.swipeDirection,g.swipeThreshold)?vm(f4,p,W,{discrete:!0}):vm(h4,f,W,{discrete:!0}),We.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),y4=t=>{const{__scopeToast:e,children:n,...r}=t,s=sy(bf,e),[i,o]=v.useState(!1),[a,l]=v.useState(!1);return _4(()=>o(!0)),v.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(PE,{asChild:!0,children:m.jsx(ry,{...r,children:i&&m.jsxs(m.Fragment,{children:[s.label," ",n]})})})},v4="ToastTitle",yk=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(Rn.div,{...r,ref:e})});yk.displayName=v4;var w4="ToastDescription",vk=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(Rn.div,{...r,ref:e})});vk.displayName=w4;var wk="ToastAction",_k=v.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(bk,{altText:n,asChild:!0,children:m.jsx(NE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${wk}\`. Expected non-empty \`string\`.`),null)});_k.displayName=wk;var Ek="ToastClose",NE=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=p4(Ek,n);return m.jsx(bk,{asChild:!0,children:m.jsx(Rn.button,{type:"button",...r,ref:e,onClick:tn(t.onClick,s.onClose)})})});NE.displayName=Ek;var bk=v.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return m.jsx(Rn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Sk(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),E4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Sk(r))}}),e}function vm(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?ak(s,i):s.dispatchEvent(i)}var CT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function _4(t=()=>{}){const e=Ti(t);Xi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function E4(t){return t.nodeType===t.ELEMENT_NODE}function b4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Vv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var S4=hk,Ik=mk,Tk=gk,xk=yk,Ak=vk,Pk=_k,Rk=NE;function Ck(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Ck(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function kk(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Ck(t))&&(r&&(r+=" "),r+=e);return r}const kT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,NT=kk,DE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return NT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],h=i==null?void 0:i[c];if(u===null)return null;const f=kT(u)||kT(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(_=>{let[g,b]=_;return Array.isArray(b)?b.includes({...i,...a}[g]):{...i,...a}[g]===b})?[...c,h,f]:c},[]);return NT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),DT=t=>{const e=T4(t);return e.charAt(0).toUpperCase()+e.slice(1)},Nk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),x4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>v.createElement("svg",{ref:l,...A4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Nk("lucide",s),...!i&&!x4(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>v.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=(t,e)=>{const n=v.forwardRef(({className:r,...s},i)=>v.createElement(P4,{ref:i,iconNode:e,className:Nk(`lucide-${I4(DT(t))}`,`lucide-${t}`,r),...s}));return n.displayName=DT(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],C4=Mt("arrow-down",R4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Dk=Mt("arrow-right",k4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],D4=Mt("arrow-up-down",N4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],L4=Mt("badge-percent",O4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V4=Mt("check",M4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],j4=Mt("circle-alert",F4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$4=Mt("clock",U4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],z4=Mt("credit-card",B4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uh=Mt("eye-off",W4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dh=Mt("eye",q4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],K4=Mt("file-text",H4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Q4=Mt("house",G4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],J4=Mt("image",Y4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],iy=Mt("lock",X4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],e3=Mt("log-out",Z4);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],S_=Mt("mail",t3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],bc=Mt("message-circle",n3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M5 12h14",key:"1ays0h"}]],s3=Mt("minus",r3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],o3=Mt("phone",i3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],OT=Mt("plus",a3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],LT=Mt("receipt",l3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],OE=Mt("refresh-ccw",c3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],d3=Mt("send",u3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MT=Mt("settings",h3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],LE=Mt("shield",f3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],p3=Mt("square",m3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],y3=Mt("store",g3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],w3=Mt("trash-2",v3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],E3=Mt("trending-up",_3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ok=Mt("triangle-alert",b3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I3=Mt("user",S3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],x3=Mt("wrench",T3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ko=Mt("x",A3),ME="-",P3=t=>{const e=C3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(ME);return a[0]===""&&a.length!==1&&a.shift(),Lk(a,e)||R3(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Lk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Lk(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(ME);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},VT=/^\[(.+)\]$/,R3=t=>{if(VT.test(t)){const e=VT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},C3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return N3(Object.entries(t.classGroups),n).forEach(([i,o])=>{I_(o,r,i,e)}),r},I_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:FT(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(k3(s)){I_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{I_(o,FT(e,i),n,r)})})},FT=(t,e)=>{let n=t;return e.split(ME).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},k3=t=>t.isThemeGetter,N3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,D3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Mk="!",O3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let b=0;b<a.length;b++){let E=a[b];if(c===0){if(E===s&&(r||a.slice(b,b+i)===e)){l.push(a.slice(u,b)),u=b+i;continue}if(E==="/"){h=b;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(Mk),_=p?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:_,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},L3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},M3=t=>({cache:D3(t.cacheSize),parseClassName:O3(t),...P3(t)}),V3=/\s+/,F3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(V3);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let _=!!p,g=r(_?f.substring(0,p):f);if(!g){if(!_){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}_=!1}const b=L3(u).join(":"),E=h?b+Mk:b,w=E+g;if(i.includes(w))continue;i.push(w);const S=s(g,_);for(let P=0;P<S.length;++P){const x=S[P];i.push(E+x)}a=c+(a.length>0?" "+a:a)}return a};function j3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Vk(e))&&(r&&(r+=" "),r+=n);return r}const Vk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Vk(t[r]))&&(n&&(n+=" "),n+=e);return n};function U3(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,h)=>h(u),t());return n=M3(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=F3(l,n);return s(l,u),u}return function(){return i(j3.apply(null,arguments))}}const sn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Fk=/^\[(?:([a-z-]+):)?(.+)\]$/i,$3=/^\d+\/\d+$/,B3=new Set(["px","full","screen"]),z3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,W3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,H3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ki=t=>Zc(t)||B3.has(t)||$3.test(t),yo=t=>ed(t,"length",t$),Zc=t=>!!t&&!Number.isNaN(Number(t)),Fv=t=>ed(t,"number",Zc),Od=t=>!!t&&Number.isInteger(Number(t)),G3=t=>t.endsWith("%")&&Zc(t.slice(0,-1)),pt=t=>Fk.test(t),vo=t=>z3.test(t),Q3=new Set(["length","size","percentage"]),Y3=t=>ed(t,Q3,jk),J3=t=>ed(t,"position",jk),X3=new Set(["image","url"]),Z3=t=>ed(t,X3,r$),e$=t=>ed(t,"",n$),Ld=()=>!0,ed=(t,e,n)=>{const r=Fk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},t$=t=>W3.test(t)&&!q3.test(t),jk=()=>!1,n$=t=>H3.test(t),r$=t=>K3.test(t),s$=()=>{const t=sn("colors"),e=sn("spacing"),n=sn("blur"),r=sn("brightness"),s=sn("borderColor"),i=sn("borderRadius"),o=sn("borderSpacing"),a=sn("borderWidth"),l=sn("contrast"),c=sn("grayscale"),u=sn("hueRotate"),h=sn("invert"),f=sn("gap"),p=sn("gradientColorStops"),_=sn("gradientColorStopPositions"),g=sn("inset"),b=sn("margin"),E=sn("opacity"),w=sn("padding"),S=sn("saturate"),P=sn("scale"),x=sn("sepia"),O=sn("skew"),T=sn("space"),A=sn("translate"),R=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",pt,e],L=()=>[pt,e],D=()=>["",ki,yo],J=()=>["auto",Zc,pt],Le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ke=()=>["solid","dashed","dotted","double","none"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",pt],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[Zc,pt];return{cacheSize:500,separator:":",theme:{colors:[Ld],spacing:[ki,yo],blur:["none","",vo,pt],brightness:ge(),borderColor:[t],borderRadius:["none","","full",vo,pt],borderSpacing:L(),borderWidth:D(),contrast:ge(),grayscale:q(),hueRotate:ge(),invert:q(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[G3,yo],inset:C(),margin:C(),opacity:ge(),padding:L(),saturate:ge(),scale:ge(),sepia:q(),skew:ge(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",pt]}],container:["container"],columns:[{columns:[vo]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Le(),pt]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Od,pt]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pt]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",Od,pt]}],"grid-cols":[{"grid-cols":[Ld]}],"col-start-end":[{col:["auto",{span:["full",Od,pt]},pt]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[Ld]}],"row-start-end":[{row:["auto",{span:[Od,pt]},pt]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pt,e]}],"min-w":[{"min-w":[pt,e,"min","max","fit"]}],"max-w":[{"max-w":[pt,e,"none","full","min","max","fit","prose",{screen:[vo]},vo]}],h:[{h:[pt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vo,yo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fv]}],"font-family":[{font:[Ld]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pt]}],"line-clamp":[{"line-clamp":["none",Zc,Fv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ki,pt]}],"list-image":[{"list-image":["none",pt]}],"list-style-type":[{list:["none","disc","decimal",pt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ki,yo]}],"underline-offset":[{"underline-offset":["auto",ki,pt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Le(),J3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Y3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Z3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...ke(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:ke()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ke()]}],"outline-offset":[{"outline-offset":[ki,pt]}],"outline-w":[{outline:[ki,yo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[ki,yo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",vo,e$]}],"shadow-color":[{shadow:[Ld]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...We(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":We()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",vo,pt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pt]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",pt]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",pt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Od,pt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ki,yo,Fv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},i$=U3(s$);function dn(...t){return i$(kk(t))}const o$=S4,Uk=v.forwardRef(({className:t,...e},n)=>m.jsx(Ik,{ref:n,className:dn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Uk.displayName=Ik.displayName;const a$=DE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$k=v.forwardRef(({className:t,variant:e,...n},r)=>m.jsx(Tk,{ref:r,className:dn(a$({variant:e}),t),...n}));$k.displayName=Tk.displayName;const l$=v.forwardRef(({className:t,...e},n)=>m.jsx(Pk,{ref:n,className:dn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));l$.displayName=Pk.displayName;const Bk=v.forwardRef(({className:t,...e},n)=>m.jsx(Rk,{ref:n,className:dn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(ko,{className:"h-4 w-4"})}));Bk.displayName=Rk.displayName;const zk=v.forwardRef(({className:t,...e},n)=>m.jsx(xk,{ref:n,className:dn("text-sm font-semibold",t),...e}));zk.displayName=xk.displayName;const Wk=v.forwardRef(({className:t,...e},n)=>m.jsx(Ak,{ref:n,className:dn("text-sm opacity-90",t),...e}));Wk.displayName=Ak.displayName;function c$(){const{toasts:t}=Gl();return m.jsxs(o$,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return m.jsxs($k,{...i,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(zk,{children:n}),r&&m.jsx(Wk,{children:r})]}),s,m.jsx(Bk,{})]},e)}),m.jsx(Uk,{})]})}var Gp=["light","dark"],VE="(prefers-color-scheme: dark)",u$=typeof window>"u",FE=v.createContext(void 0),d$={setTheme:t=>{},themes:[]},qk=()=>{var t;return(t=v.useContext(FE))!=null?t:d$},h$=t=>v.useContext(FE)?t.children:v.createElement(m$,{...t}),f$=["light","dark"],m$=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=f$,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u})=>{let[h,f]=v.useState(()=>jT(s,o)),[p,_]=v.useState(()=>jT(s)),g=l?Object.values(l):i,b=v.useCallback(P=>{let x=P;if(!x)return;P==="system"&&n&&(x=UT());let O=l?l[x]:x,T=e?g$():null,A=document.documentElement;if(a==="class"?(A.classList.remove(...g),O&&A.classList.add(O)):O?A.setAttribute(a,O):A.removeAttribute(a),r){let R=Gp.includes(o)?o:null,N=Gp.includes(x)?x:R;A.style.colorScheme=N}T==null||T()},[]),E=v.useCallback(P=>{let x=typeof P=="function"?P(P):P;f(x);try{localStorage.setItem(s,x)}catch{}},[t]),w=v.useCallback(P=>{let x=UT(P);_(x),h==="system"&&n&&!t&&b("system")},[h,t]);v.useEffect(()=>{let P=window.matchMedia(VE);return P.addListener(w),w(P),()=>P.removeListener(w)},[w]),v.useEffect(()=>{let P=x=>{if(x.key!==s)return;let O=x.newValue||o;E(O)};return window.addEventListener("storage",P),()=>window.removeEventListener("storage",P)},[E]),v.useEffect(()=>{b(t??h)},[t,h]);let S=v.useMemo(()=>({theme:h,setTheme:E,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,E,t,p,n,i]);return v.createElement(FE.Provider,{value:S},v.createElement(p$,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:u}),c)},p$=v.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Gp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(_,g=!1,b=!0)=>{let E=o?o[_]:_,w=g?_+"|| ''":`'${E}'`,S="";return s&&b&&!g&&Gp.includes(_)&&(S+=`d.style.colorScheme = '${_}';`),n==="class"?g||E?S+=`c.add(${w})`:S+="null":E&&(S+=`d[s](n,${w})`),S},p=t?`!function(){${u}${f(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${VE}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return v.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),jT=(t,e)=>{if(u$)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},g$=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},UT=t=>(t||(t=window.matchMedia(VE)),t.matches?"dark":"light"),y$=t=>{switch(t){case"success":return _$;case"info":return b$;case"warning":return E$;case"error":return S$;default:return null}},v$=Array(12).fill(0),w$=({visible:t,className:e})=>V.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},V.createElement("div",{className:"sonner-spinner"},v$.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),_$=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),E$=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),b$=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),S$=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),I$=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),T$=()=>{let[t,e]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},T_=1,x$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:T_++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],V.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(P$(c)&&!c.ok){i=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:h})}else if(n.success!==void 0){i=!1;let u=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let u=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||T_++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},qr=new x$,A$=(t,e)=>{let n=(e==null?void 0:e.id)||T_++;return qr.addToast({title:t,...e,id:n}),n},P$=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",R$=A$,C$=()=>qr.toasts,k$=()=>qr.getActiveToasts(),jt=Object.assign(R$,{success:qr.success,info:qr.info,warning:qr.warning,error:qr.error,custom:qr.custom,message:qr.message,promise:qr.promise,dismiss:qr.dismiss,loading:qr.loading},{getHistory:C$,getToasts:k$});function N$(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}N$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function wm(t){return t.label!==void 0}var D$=3,O$="32px",L$="16px",$T=4e3,M$=356,V$=14,F$=20,j$=200;function Os(...t){return t.filter(Boolean).join(" ")}function U$(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var $$=t=>{var e,n,r,s,i,o,a,l,c,u,h;let{invert:f,toast:p,unstyled:_,interacting:g,setHeights:b,visibleToasts:E,heights:w,index:S,toasts:P,expanded:x,removeToast:O,defaultRichColors:T,closeButton:A,style:R,cancelButtonStyle:N,actionButtonStyle:C,className:L="",descriptionClassName:D="",duration:J,position:Le,gap:ke,loadingIcon:We,expandByDefault:W,classNames:q,icons:oe,closeButtonAriaLabel:ge="Close toast",pauseWhenPageIsHidden:pe}=t,[Me,ve]=V.useState(null),[F,ot]=V.useState(null),[et,wn]=V.useState(!1),[sr,ir]=V.useState(!1),[pr,$n]=V.useState(!1),[K,ce]=V.useState(!1),[Pe,Xe]=V.useState(!1),[xe,je]=V.useState(0),[be,Ne]=V.useState(0),Ze=V.useRef(p.duration||J||$T),Pt=V.useRef(null),Q=V.useRef(null),Ie=S===0,Te=S+1<=E,ye=p.type,it=p.dismissible!==!1,ae=p.className||"",Ue=p.descriptionClassName||"",Je=V.useMemo(()=>w.findIndex(X=>X.toastId===p.id)||0,[w,p.id]),Et=V.useMemo(()=>{var X;return(X=p.closeButton)!=null?X:A},[p.closeButton,A]),Kt=V.useMemo(()=>p.duration||J||$T,[p.duration,J]),Ln=V.useRef(0),gr=V.useRef(0),zr=V.useRef(0),_n=V.useRef(null),[G,$]=Le.split("-"),U=V.useMemo(()=>w.reduce((X,le,ie)=>ie>=Je?X:X+le.height,0),[w,Je]),Y=T$(),te=p.invert||f,ne=ye==="loading";gr.current=V.useMemo(()=>Je*ke+U,[Je,U]),V.useEffect(()=>{Ze.current=Kt},[Kt]),V.useEffect(()=>{wn(!0)},[]),V.useEffect(()=>{let X=Q.current;if(X){let le=X.getBoundingClientRect().height;return Ne(le),b(ie=>[{toastId:p.id,height:le,position:p.position},...ie]),()=>b(ie=>ie.filter(de=>de.toastId!==p.id))}},[b,p.id]),V.useLayoutEffect(()=>{if(!et)return;let X=Q.current,le=X.style.height;X.style.height="auto";let ie=X.getBoundingClientRect().height;X.style.height=le,Ne(ie),b(de=>de.find(fe=>fe.toastId===p.id)?de.map(fe=>fe.toastId===p.id?{...fe,height:ie}:fe):[{toastId:p.id,height:ie,position:p.position},...de])},[et,p.title,p.description,b,p.id]);let ue=V.useCallback(()=>{ir(!0),je(gr.current),b(X=>X.filter(le=>le.toastId!==p.id)),setTimeout(()=>{O(p)},j$)},[p,O,b,gr]);V.useEffect(()=>{if(p.promise&&ye==="loading"||p.duration===1/0||p.type==="loading")return;let X;return x||g||pe&&Y?(()=>{if(zr.current<Ln.current){let le=new Date().getTime()-Ln.current;Ze.current=Ze.current-le}zr.current=new Date().getTime()})():Ze.current!==1/0&&(Ln.current=new Date().getTime(),X=setTimeout(()=>{var le;(le=p.onAutoClose)==null||le.call(p,p),ue()},Ze.current)),()=>clearTimeout(X)},[x,g,p,ye,pe,Y,ue]),V.useEffect(()=>{p.delete&&ue()},[ue,p.delete]);function me(){var X,le,ie;return oe!=null&&oe.loading?V.createElement("div",{className:Os(q==null?void 0:q.loader,(X=p==null?void 0:p.classNames)==null?void 0:X.loader,"sonner-loader"),"data-visible":ye==="loading"},oe.loading):We?V.createElement("div",{className:Os(q==null?void 0:q.loader,(le=p==null?void 0:p.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":ye==="loading"},We):V.createElement(w$,{className:Os(q==null?void 0:q.loader,(ie=p==null?void 0:p.classNames)==null?void 0:ie.loader),visible:ye==="loading"})}return V.createElement("li",{tabIndex:0,ref:Q,className:Os(L,ae,q==null?void 0:q.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,q==null?void 0:q.default,q==null?void 0:q[ye],(n=p==null?void 0:p.classNames)==null?void 0:n[ye]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:T,"data-styled":!(p.jsx||p.unstyled||_),"data-mounted":et,"data-promise":!!p.promise,"data-swiped":Pe,"data-removed":sr,"data-visible":Te,"data-y-position":G,"data-x-position":$,"data-index":S,"data-front":Ie,"data-swiping":pr,"data-dismissible":it,"data-type":ye,"data-invert":te,"data-swipe-out":K,"data-swipe-direction":F,"data-expanded":!!(x||W&&et),style:{"--index":S,"--toasts-before":S,"--z-index":P.length-S,"--offset":`${sr?xe:gr.current}px`,"--initial-height":W?"auto":`${be}px`,...R,...p.style},onDragEnd:()=>{$n(!1),ve(null),_n.current=null},onPointerDown:X=>{ne||!it||(Pt.current=new Date,je(gr.current),X.target.setPointerCapture(X.pointerId),X.target.tagName!=="BUTTON"&&($n(!0),_n.current={x:X.clientX,y:X.clientY}))},onPointerUp:()=>{var X,le,ie,de;if(K||!it)return;_n.current=null;let fe=Number(((X=Q.current)==null?void 0:X.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ae=Number(((le=Q.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_e=new Date().getTime()-((ie=Pt.current)==null?void 0:ie.getTime()),tt=Me==="x"?fe:Ae,at=Math.abs(tt)/_e;if(Math.abs(tt)>=F$||at>.11){je(gr.current),(de=p.onDismiss)==null||de.call(p,p),ot(Me==="x"?fe>0?"right":"left":Ae>0?"down":"up"),ue(),ce(!0),Xe(!1);return}$n(!1),ve(null)},onPointerMove:X=>{var le,ie,de,fe;if(!_n.current||!it||((le=window.getSelection())==null?void 0:le.toString().length)>0)return;let Ae=X.clientY-_n.current.y,_e=X.clientX-_n.current.x,tt=(ie=t.swipeDirections)!=null?ie:U$(Le);!Me&&(Math.abs(_e)>1||Math.abs(Ae)>1)&&ve(Math.abs(_e)>Math.abs(Ae)?"x":"y");let at={x:0,y:0};Me==="y"?(tt.includes("top")||tt.includes("bottom"))&&(tt.includes("top")&&Ae<0||tt.includes("bottom")&&Ae>0)&&(at.y=Ae):Me==="x"&&(tt.includes("left")||tt.includes("right"))&&(tt.includes("left")&&_e<0||tt.includes("right")&&_e>0)&&(at.x=_e),(Math.abs(at.x)>0||Math.abs(at.y)>0)&&Xe(!0),(de=Q.current)==null||de.style.setProperty("--swipe-amount-x",`${at.x}px`),(fe=Q.current)==null||fe.style.setProperty("--swipe-amount-y",`${at.y}px`)}},Et&&!p.jsx?V.createElement("button",{"aria-label":ge,"data-disabled":ne,"data-close-button":!0,onClick:ne||!it?()=>{}:()=>{var X;ue(),(X=p.onDismiss)==null||X.call(p,p)},className:Os(q==null?void 0:q.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=oe==null?void 0:oe.close)!=null?i:I$):null,p.jsx||v.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:V.createElement(V.Fragment,null,ye||p.icon||p.promise?V.createElement("div",{"data-icon":"",className:Os(q==null?void 0:q.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||me():null,p.type!=="loading"?p.icon||(oe==null?void 0:oe[ye])||y$(ye):null):null,V.createElement("div",{"data-content":"",className:Os(q==null?void 0:q.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},V.createElement("div",{"data-title":"",className:Os(q==null?void 0:q.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?V.createElement("div",{"data-description":"",className:Os(D,Ue,q==null?void 0:q.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),v.isValidElement(p.cancel)?p.cancel:p.cancel&&wm(p.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||N,onClick:X=>{var le,ie;wm(p.cancel)&&it&&((ie=(le=p.cancel).onClick)==null||ie.call(le,X),ue())},className:Os(q==null?void 0:q.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,v.isValidElement(p.action)?p.action:p.action&&wm(p.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||C,onClick:X=>{var le,ie;wm(p.action)&&((ie=(le=p.action).onClick)==null||ie.call(le,X),!X.defaultPrevented&&ue())},className:Os(q==null?void 0:q.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function BT(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function B$(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?L$:O$;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var z$=v.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:h,duration:f,style:p,visibleToasts:_=D$,toastOptions:g,dir:b=BT(),gap:E=V$,loadingIcon:w,icons:S,containerAriaLabel:P="Notifications",pauseWhenPageIsHidden:x}=t,[O,T]=V.useState([]),A=V.useMemo(()=>Array.from(new Set([r].concat(O.filter(pe=>pe.position).map(pe=>pe.position)))),[O,r]),[R,N]=V.useState([]),[C,L]=V.useState(!1),[D,J]=V.useState(!1),[Le,ke]=V.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),We=V.useRef(null),W=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=V.useRef(null),oe=V.useRef(!1),ge=V.useCallback(pe=>{T(Me=>{var ve;return(ve=Me.find(F=>F.id===pe.id))!=null&&ve.delete||qr.dismiss(pe.id),Me.filter(({id:F})=>F!==pe.id)})},[]);return V.useEffect(()=>qr.subscribe(pe=>{if(pe.dismiss){T(Me=>Me.map(ve=>ve.id===pe.id?{...ve,delete:!0}:ve));return}setTimeout(()=>{ik.flushSync(()=>{T(Me=>{let ve=Me.findIndex(F=>F.id===pe.id);return ve!==-1?[...Me.slice(0,ve),{...Me[ve],...pe},...Me.slice(ve+1)]:[pe,...Me]})})})}),[]),V.useEffect(()=>{if(u!=="system"){ke(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ke("dark"):ke("light")),typeof window>"u")return;let pe=window.matchMedia("(prefers-color-scheme: dark)");try{pe.addEventListener("change",({matches:Me})=>{ke(Me?"dark":"light")})}catch{pe.addListener(({matches:ve})=>{try{ke(ve?"dark":"light")}catch(F){console.error(F)}})}},[u]),V.useEffect(()=>{O.length<=1&&L(!1)},[O]),V.useEffect(()=>{let pe=Me=>{var ve,F;s.every(ot=>Me[ot]||Me.code===ot)&&(L(!0),(ve=We.current)==null||ve.focus()),Me.code==="Escape"&&(document.activeElement===We.current||(F=We.current)!=null&&F.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[s]),V.useEffect(()=>{if(We.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,oe.current=!1)}},[We.current]),V.createElement("section",{ref:e,"aria-label":`${P} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((pe,Me)=>{var ve;let[F,ot]=pe.split("-");return O.length?V.createElement("ol",{key:pe,dir:b==="auto"?BT():b,tabIndex:-1,ref:We,className:a,"data-sonner-toaster":!0,"data-theme":Le,"data-y-position":F,"data-lifted":C&&O.length>1&&!i,"data-x-position":ot,style:{"--front-toast-height":`${((ve=R[0])==null?void 0:ve.height)||0}px`,"--width":`${M$}px`,"--gap":`${E}px`,...p,...B$(l,c)},onBlur:et=>{oe.current&&!et.currentTarget.contains(et.relatedTarget)&&(oe.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:et=>{et.target instanceof HTMLElement&&et.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,q.current=et.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{D||L(!1)},onDragEnd:()=>L(!1),onPointerDown:et=>{et.target instanceof HTMLElement&&et.target.dataset.dismissible==="false"||J(!0)},onPointerUp:()=>J(!1)},O.filter(et=>!et.position&&Me===0||et.position===pe).map((et,wn)=>{var sr,ir;return V.createElement($$,{key:et.id,icons:S,index:wn,toast:et,defaultRichColors:h,duration:(sr=g==null?void 0:g.duration)!=null?sr:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:_,closeButton:(ir=g==null?void 0:g.closeButton)!=null?ir:o,interacting:D,position:pe,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ge,toasts:O.filter(pr=>pr.position==et.position),heights:R.filter(pr=>pr.position==et.position),setHeights:N,expandByDefault:i,gap:E,loadingIcon:w,expanded:C,pauseWhenPageIsHidden:x,swipeDirections:t.swipeDirections})})):null}))});const W$=({...t})=>{const{theme:e="system"}=qk();return m.jsx(z$,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var q$=Ug[" useId ".trim().toString()]||(()=>{}),H$=0;function jv(t){const[e,n]=v.useState(q$());return Xi(()=>{n(r=>r??String(H$++))},[t]),t||(e?`radix-${e}`:"")}const K$=["top","right","bottom","left"],ga=Math.min,ds=Math.max,Qp=Math.round,_m=Math.floor,_i=t=>({x:t,y:t}),G$={left:"right",right:"left",bottom:"top",top:"bottom"},Q$={start:"end",end:"start"};function x_(t,e,n){return ds(t,ga(e,n))}function Zi(t,e){return typeof t=="function"?t(e):t}function eo(t){return t.split("-")[0]}function td(t){return t.split("-")[1]}function jE(t){return t==="x"?"y":"x"}function UE(t){return t==="y"?"height":"width"}const Y$=new Set(["top","bottom"]);function mi(t){return Y$.has(eo(t))?"y":"x"}function $E(t){return jE(mi(t))}function J$(t,e,n){n===void 0&&(n=!1);const r=td(t),s=$E(t),i=UE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Yp(o)),[o,Yp(o)]}function X$(t){const e=Yp(t);return[A_(t),e,A_(e)]}function A_(t){return t.replace(/start|end/g,e=>Q$[e])}const zT=["left","right"],WT=["right","left"],Z$=["top","bottom"],e6=["bottom","top"];function t6(t,e,n){switch(t){case"top":case"bottom":return n?e?WT:zT:e?zT:WT;case"left":case"right":return e?Z$:e6;default:return[]}}function n6(t,e,n,r){const s=td(t);let i=t6(eo(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(A_)))),i}function Yp(t){return t.replace(/left|right|bottom|top/g,e=>G$[e])}function r6(t){return{top:0,right:0,bottom:0,left:0,...t}}function Hk(t){return typeof t!="number"?r6(t):{top:t,right:t,bottom:t,left:t}}function Jp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function qT(t,e,n){let{reference:r,floating:s}=t;const i=mi(e),o=$E(e),a=UE(o),l=eo(e),c=i==="y",u=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(td(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const s6=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=qT(c,r,l),f=r,p={},_=0;for(let g=0;g<a.length;g++){const{name:b,fn:E}=a[g],{x:w,y:S,data:P,reset:x}=await E({x:u,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,h=S??h,p={...p,[b]:{...p[b],...P}},x&&_<=50&&(_++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):x.rects),{x:u,y:h}=qT(c,f,l)),g=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:p}};async function Bh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Zi(e,t),_=Hk(p),b=a[f?h==="floating"?"reference":"floating":h],E=Jp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),P=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},x=Jp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(E.top-x.top+_.top)/P.y,bottom:(x.bottom-E.bottom+_.bottom)/P.y,left:(E.left-x.left+_.left)/P.x,right:(x.right-E.right+_.right)/P.x}}const i6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Zi(t,e)||{};if(c==null)return{};const h=Hk(u),f={x:n,y:r},p=$E(s),_=UE(p),g=await o.getDimensions(c),b=p==="y",E=b?"top":"left",w=b?"bottom":"right",S=b?"clientHeight":"clientWidth",P=i.reference[_]+i.reference[p]-f[p]-i.floating[_],x=f[p]-i.reference[p],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=O?O[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(O)))&&(T=a.floating[S]||i.floating[_]);const A=P/2-x/2,R=T/2-g[_]/2-1,N=ga(h[E],R),C=ga(h[w],R),L=N,D=T-g[_]-C,J=T/2-g[_]/2+A,Le=x_(L,J,D),ke=!l.arrow&&td(s)!=null&&J!==Le&&i.reference[_]/2-(J<L?N:C)-g[_]/2<0,We=ke?J<L?J-L:J-D:0;return{[p]:f[p]+We,data:{[p]:Le,centerOffset:J-Le-We,...ke&&{alignmentOffset:We}},reset:ke}}}),o6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:g=!0,...b}=Zi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=eo(s),w=mi(a),S=eo(a)===a,P=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=f||(S||!g?[Yp(a)]:X$(a)),O=_!=="none";!f&&O&&x.push(...n6(a,g,_,P));const T=[a,...x],A=await Bh(e,b),R=[];let N=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&R.push(A[E]),h){const J=J$(s,o,P);R.push(A[J[0]],A[J[1]])}if(N=[...N,{placement:s,overflows:R}],!R.every(J=>J<=0)){var C,L;const J=(((C=i.flip)==null?void 0:C.index)||0)+1,Le=T[J];if(Le&&(!(h==="alignment"?w!==mi(Le):!1)||N.every(W=>mi(W.placement)===w?W.overflows[0]>0:!0)))return{data:{index:J,overflows:N},reset:{placement:Le}};let ke=(L=N.filter(We=>We.overflows[0]<=0).sort((We,W)=>We.overflows[1]-W.overflows[1])[0])==null?void 0:L.placement;if(!ke)switch(p){case"bestFit":{var D;const We=(D=N.filter(W=>{if(O){const q=mi(W.placement);return q===w||q==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(q=>q>0).reduce((q,oe)=>q+oe,0)]).sort((W,q)=>W[1]-q[1])[0])==null?void 0:D[0];We&&(ke=We);break}case"initialPlacement":ke=a;break}if(s!==ke)return{reset:{placement:ke}}}return{}}}};function HT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KT(t){return K$.some(e=>t[e]>=0)}const a6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Zi(t,e);switch(r){case"referenceHidden":{const i=await Bh(e,{...s,elementContext:"reference"}),o=HT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KT(o)}}}case"escaped":{const i=await Bh(e,{...s,altBoundary:!0}),o=HT(i,n.floating);return{data:{escapedOffsets:o,escaped:KT(o)}}}default:return{}}}}},Kk=new Set(["left","top"]);async function l6(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=eo(n),a=td(n),l=mi(n)==="y",c=Kk.has(o)?-1:1,u=i&&l?-1:1,h=Zi(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof _=="number"&&(p=a==="end"?_*-1:_),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const c6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await l6(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},u6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:E,y:w}=b;return{x:E,y:w}}},...l}=Zi(t,e),c={x:n,y:r},u=await Bh(e,l),h=mi(eo(s)),f=jE(h);let p=c[f],_=c[h];if(i){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=p+u[b],S=p-u[E];p=x_(w,p,S)}if(o){const b=h==="y"?"top":"left",E=h==="y"?"bottom":"right",w=_+u[b],S=_-u[E];_=x_(w,_,S)}const g=a.fn({...e,[f]:p,[h]:_});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},d6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Zi(t,e),u={x:n,y:r},h=mi(s),f=jE(h);let p=u[f],_=u[h];const g=Zi(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const S=f==="y"?"height":"width",P=i.reference[f]-i.floating[S]+b.mainAxis,x=i.reference[f]+i.reference[S]-b.mainAxis;p<P?p=P:p>x&&(p=x)}if(c){var E,w;const S=f==="y"?"width":"height",P=Kk.has(eo(s)),x=i.reference[h]-i.floating[S]+(P&&((E=o.offset)==null?void 0:E[h])||0)+(P?0:b.crossAxis),O=i.reference[h]+i.reference[S]+(P?0:((w=o.offset)==null?void 0:w[h])||0)-(P?b.crossAxis:0);_<x?_=x:_>O&&(_=O)}return{[f]:p,[h]:_}}}},h6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Zi(t,e),u=await Bh(e,c),h=eo(s),f=td(s),p=mi(s)==="y",{width:_,height:g}=i.floating;let b,E;h==="top"||h==="bottom"?(b=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,b=f==="end"?"top":"bottom");const w=g-u.top-u.bottom,S=_-u.left-u.right,P=ga(g-u[b],w),x=ga(_-u[E],S),O=!e.middlewareData.shift;let T=P,A=x;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=w),O&&!f){const N=ds(u.left,0),C=ds(u.right,0),L=ds(u.top,0),D=ds(u.bottom,0);p?A=_-2*(N!==0||C!==0?N+C:ds(u.left,u.right)):T=g-2*(L!==0||D!==0?L+D:ds(u.top,u.bottom))}await l({...e,availableWidth:A,availableHeight:T});const R=await o.getDimensions(a.floating);return _!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function oy(){return typeof window<"u"}function nd(t){return Gk(t)?(t.nodeName||"").toLowerCase():"#document"}function ps(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ri(t){var e;return(e=(Gk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Gk(t){return oy()?t instanceof Node||t instanceof ps(t).Node:!1}function Ks(t){return oy()?t instanceof Element||t instanceof ps(t).Element:!1}function xi(t){return oy()?t instanceof HTMLElement||t instanceof ps(t).HTMLElement:!1}function GT(t){return!oy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ps(t).ShadowRoot}const f6=new Set(["inline","contents"]);function Sf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Gs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!f6.has(s)}const m6=new Set(["table","td","th"]);function p6(t){return m6.has(nd(t))}const g6=[":popover-open",":modal"];function ay(t){return g6.some(e=>{try{return t.matches(e)}catch{return!1}})}const y6=["transform","translate","scale","rotate","perspective"],v6=["transform","translate","scale","rotate","perspective","filter"],w6=["paint","layout","strict","content"];function BE(t){const e=zE(),n=Ks(t)?Gs(t):t;return y6.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||v6.some(r=>(n.willChange||"").includes(r))||w6.some(r=>(n.contain||"").includes(r))}function _6(t){let e=ya(t);for(;xi(e)&&!bu(e);){if(BE(e))return e;if(ay(e))return null;e=ya(e)}return null}function zE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const E6=new Set(["html","body","#document"]);function bu(t){return E6.has(nd(t))}function Gs(t){return ps(t).getComputedStyle(t)}function ly(t){return Ks(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ya(t){if(nd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||GT(t)&&t.host||Ri(t);return GT(e)?e.host:e}function Qk(t){const e=ya(t);return bu(e)?t.ownerDocument?t.ownerDocument.body:t.body:xi(e)&&Sf(e)?e:Qk(e)}function zh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Qk(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=ps(s);if(i){const a=P_(o);return e.concat(o,o.visualViewport||[],Sf(s)?s:[],a&&n?zh(a):[])}return e.concat(s,zh(s,[],n))}function P_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Yk(t){const e=Gs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=xi(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Qp(n)!==i||Qp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function WE(t){return Ks(t)?t:t.contextElement}function eu(t){const e=WE(t);if(!xi(e))return _i(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Yk(e);let o=(i?Qp(n.width):n.width)/r,a=(i?Qp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const b6=_i(0);function Jk(t){const e=ps(t);return!zE()||!e.visualViewport?b6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function S6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ps(t)?!1:e}function Cl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=WE(t);let o=_i(1);e&&(r?Ks(r)&&(o=eu(r)):o=eu(t));const a=S6(i,n,r)?Jk(i):_i(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const f=ps(i),p=r&&Ks(r)?ps(r):r;let _=f,g=P_(_);for(;g&&r&&p!==_;){const b=eu(g),E=g.getBoundingClientRect(),w=Gs(g),S=E.left+(g.clientLeft+parseFloat(w.paddingLeft))*b.x,P=E.top+(g.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=S,c+=P,_=ps(g),g=P_(_)}}return Jp({width:u,height:h,x:l,y:c})}function cy(t,e){const n=ly(t).scrollLeft;return e?e.left+n:Cl(Ri(t)).left+n}function Xk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-cy(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function I6(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ri(r),a=e?ay(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=_i(1);const u=_i(0),h=xi(r);if((h||!h&&!i)&&((nd(r)!=="body"||Sf(o))&&(l=ly(r)),xi(r))){const p=Cl(r);c=eu(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!h&&!i?Xk(o,l):_i(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function T6(t){return Array.from(t.getClientRects())}function x6(t){const e=Ri(t),n=ly(t),r=t.ownerDocument.body,s=ds(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ds(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cy(t);const a=-n.scrollTop;return Gs(r).direction==="rtl"&&(o+=ds(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const QT=25;function A6(t,e){const n=ps(t),r=Ri(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=zE();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=cy(r);if(c<=0){const u=r.ownerDocument,h=u.body,f=getComputedStyle(h),p=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,_=Math.abs(r.clientWidth-h.clientWidth-p);_<=QT&&(i-=_)}else c<=QT&&(i+=c);return{width:i,height:o,x:a,y:l}}const P6=new Set(["absolute","fixed"]);function R6(t,e){const n=Cl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=xi(t)?eu(t):_i(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function YT(t,e,n){let r;if(e==="viewport")r=A6(t,n);else if(e==="document")r=x6(Ri(t));else if(Ks(e))r=R6(e,n);else{const s=Jk(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Jp(r)}function Zk(t,e){const n=ya(t);return n===e||!Ks(n)||bu(n)?!1:Gs(n).position==="fixed"||Zk(n,e)}function C6(t,e){const n=e.get(t);if(n)return n;let r=zh(t,[],!1).filter(a=>Ks(a)&&nd(a)!=="body"),s=null;const i=Gs(t).position==="fixed";let o=i?ya(t):t;for(;Ks(o)&&!bu(o);){const a=Gs(o),l=BE(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&P6.has(s.position)||Sf(o)&&!l&&Zk(t,o))?r=r.filter(u=>u!==o):s=a,o=ya(o)}return e.set(t,r),r}function k6(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?ay(e)?[]:C6(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=YT(e,u,s);return c.top=ds(h.top,c.top),c.right=ga(h.right,c.right),c.bottom=ga(h.bottom,c.bottom),c.left=ds(h.left,c.left),c},YT(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function N6(t){const{width:e,height:n}=Yk(t);return{width:e,height:n}}function D6(t,e,n){const r=xi(e),s=Ri(e),i=n==="fixed",o=Cl(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=_i(0);function c(){l.x=cy(s)}if(r||!r&&!i)if((nd(e)!=="body"||Sf(s))&&(a=ly(e)),r){const p=Cl(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?Xk(s,a):_i(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function Uv(t){return Gs(t).position==="static"}function JT(t,e){if(!xi(t)||Gs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ri(t)===n&&(n=n.ownerDocument.body),n}function eN(t,e){const n=ps(t);if(ay(t))return n;if(!xi(t)){let s=ya(t);for(;s&&!bu(s);){if(Ks(s)&&!Uv(s))return s;s=ya(s)}return n}let r=JT(t,e);for(;r&&p6(r)&&Uv(r);)r=JT(r,e);return r&&bu(r)&&Uv(r)&&!BE(r)?n:r||_6(t)||n}const O6=async function(t){const e=this.getOffsetParent||eN,n=this.getDimensions,r=await n(t.floating);return{reference:D6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function L6(t){return Gs(t).direction==="rtl"}const M6={convertOffsetParentRelativeRectToViewportRelativeRect:I6,getDocumentElement:Ri,getClippingRect:k6,getOffsetParent:eN,getElementRects:O6,getClientRects:T6,getDimensions:N6,getScale:eu,isElement:Ks,isRTL:L6};function tN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function V6(t,e){let n=null,r;const s=Ri(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const _=_m(h),g=_m(s.clientWidth-(u+f)),b=_m(s.clientHeight-(h+p)),E=_m(u),S={rootMargin:-_+"px "+-g+"px "+-b+"px "+-E+"px",threshold:ds(0,ga(1,l))||1};let P=!0;function x(O){const T=O[0].intersectionRatio;if(T!==l){if(!P)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!tN(c,t.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(x,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(x,S)}n.observe(t)}return o(!0),i}function F6(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=WE(t),u=s||i?[...c?zh(c):[],...zh(e)]:[];u.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?V6(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(E=>{let[w]=E;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=p)==null||S.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let _,g=l?Cl(t):null;l&&b();function b(){const E=Cl(t);g&&!tN(g,E)&&n(),g=E,_=requestAnimationFrame(b)}return n(),()=>{var E;u.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h==null||h(),(E=p)==null||E.disconnect(),p=null,l&&cancelAnimationFrame(_)}}const j6=c6,U6=u6,$6=o6,B6=h6,z6=a6,XT=i6,W6=d6,q6=(t,e,n)=>{const r=new Map,s={platform:M6,...n},i={...s.platform,_c:r};return s6(t,e,{...s,platform:i})};var H6=typeof document<"u",K6=function(){},np=H6?v.useLayoutEffect:K6;function Xp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Xp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function nN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ZT(t,e){const n=nN(t);return Math.round(e*n)/n}function $v(t){const e=v.useRef(t);return np(()=>{e.current=t}),e}function G6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=v.useState(r);Xp(f,r)||p(r);const[_,g]=v.useState(null),[b,E]=v.useState(null),w=v.useCallback(W=>{W!==O.current&&(O.current=W,g(W))},[]),S=v.useCallback(W=>{W!==T.current&&(T.current=W,E(W))},[]),P=i||_,x=o||b,O=v.useRef(null),T=v.useRef(null),A=v.useRef(u),R=l!=null,N=$v(l),C=$v(s),L=$v(c),D=v.useCallback(()=>{if(!O.current||!T.current)return;const W={placement:e,strategy:n,middleware:f};C.current&&(W.platform=C.current),q6(O.current,T.current,W).then(q=>{const oe={...q,isPositioned:L.current!==!1};J.current&&!Xp(A.current,oe)&&(A.current=oe,_f.flushSync(()=>{h(oe)}))})},[f,e,n,C,L]);np(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[c]);const J=v.useRef(!1);np(()=>(J.current=!0,()=>{J.current=!1}),[]),np(()=>{if(P&&(O.current=P),x&&(T.current=x),P&&x){if(N.current)return N.current(P,x,D);D()}},[P,x,D,N,R]);const Le=v.useMemo(()=>({reference:O,floating:T,setReference:w,setFloating:S}),[w,S]),ke=v.useMemo(()=>({reference:P,floating:x}),[P,x]),We=v.useMemo(()=>{const W={position:n,left:0,top:0};if(!ke.floating)return W;const q=ZT(ke.floating,u.x),oe=ZT(ke.floating,u.y);return a?{...W,transform:"translate("+q+"px, "+oe+"px)",...nN(ke.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:oe}},[n,a,ke.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:D,refs:Le,elements:ke,floatingStyles:We}),[u,D,Le,ke,We])}const Q6=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?XT({element:r.current,padding:s}).fn(n):{}:r?XT({element:r,padding:s}).fn(n):{}}}},Y6=(t,e)=>({...j6(t),options:[t,e]}),J6=(t,e)=>({...U6(t),options:[t,e]}),X6=(t,e)=>({...W6(t),options:[t,e]}),Z6=(t,e)=>({...$6(t),options:[t,e]}),e5=(t,e)=>({...B6(t),options:[t,e]}),t5=(t,e)=>({...z6(t),options:[t,e]}),n5=(t,e)=>({...Q6(t),options:[t,e]});var r5="Arrow",rN=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return m.jsx(Rn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});rN.displayName=r5;var s5=rN;function sN(t){const[e,n]=v.useState(void 0);return Xi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var qE="Popper",[iN,oN]=Zu(qE),[i5,aN]=iN(qE),lN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=v.useState(null);return m.jsx(i5,{scope:e,anchor:r,onAnchorChange:s,children:n})};lN.displayName=qE;var cN="PopperAnchor",uN=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=aN(cN,n),o=v.useRef(null),a=Sr(e,o),l=v.useRef(null);return v.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:m.jsx(Rn.div,{...s,ref:a})});uN.displayName=cN;var HE="PopperContent",[o5,a5]=iN(HE),dN=v.forwardRef((t,e)=>{var et,wn,sr,ir,pr,$n;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:_,...g}=t,b=aN(HE,n),[E,w]=v.useState(null),S=Sr(e,K=>w(K)),[P,x]=v.useState(null),O=sN(P),T=(O==null?void 0:O.width)??0,A=(O==null?void 0:O.height)??0,R=r+(i!=="center"?"-"+i:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},C=Array.isArray(c)?c:[c],L=C.length>0,D={padding:N,boundary:C.filter(c5),altBoundary:L},{refs:J,floatingStyles:Le,placement:ke,isPositioned:We,middlewareData:W}=G6({strategy:"fixed",placement:R,whileElementsMounted:(...K)=>F6(...K,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[Y6({mainAxis:s+A,alignmentAxis:o}),l&&J6({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?X6():void 0,...D}),l&&Z6({...D}),e5({...D,apply:({elements:K,rects:ce,availableWidth:Pe,availableHeight:Xe})=>{const{width:xe,height:je}=ce.reference,be=K.floating.style;be.setProperty("--radix-popper-available-width",`${Pe}px`),be.setProperty("--radix-popper-available-height",`${Xe}px`),be.setProperty("--radix-popper-anchor-width",`${xe}px`),be.setProperty("--radix-popper-anchor-height",`${je}px`)}}),P&&n5({element:P,padding:a}),u5({arrowWidth:T,arrowHeight:A}),f&&t5({strategy:"referenceHidden",...D})]}),[q,oe]=mN(ke),ge=Ti(_);Xi(()=>{We&&(ge==null||ge())},[We,ge]);const pe=(et=W.arrow)==null?void 0:et.x,Me=(wn=W.arrow)==null?void 0:wn.y,ve=((sr=W.arrow)==null?void 0:sr.centerOffset)!==0,[F,ot]=v.useState();return Xi(()=>{E&&ot(window.getComputedStyle(E).zIndex)},[E]),m.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...Le,transform:We?Le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:F,"--radix-popper-transform-origin":[(ir=W.transformOrigin)==null?void 0:ir.x,(pr=W.transformOrigin)==null?void 0:pr.y].join(" "),...(($n=W.hide)==null?void 0:$n.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(o5,{scope:n,placedSide:q,onArrowChange:x,arrowX:pe,arrowY:Me,shouldHideArrow:ve,children:m.jsx(Rn.div,{"data-side":q,"data-align":oe,...g,ref:S,style:{...g.style,animation:We?void 0:"none"}})})})});dN.displayName=HE;var hN="PopperArrow",l5={top:"bottom",right:"left",bottom:"top",left:"right"},fN=v.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=a5(hN,r),o=l5[i.placedSide];return m.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:m.jsx(s5,{...s,ref:n,style:{...s.style,display:"block"}})})});fN.displayName=hN;function c5(t){return t!==null}var u5=t=>({name:"transformOrigin",options:t,fn(e){var b,E,w;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=mN(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,p=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let _="",g="";return c==="bottom"?(_=o?h:`${f}px`,g=`${-l}px`):c==="top"?(_=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,g=o?h:`${p}px`):c==="left"&&(_=`${r.floating.width+l}px`,g=o?h:`${p}px`),{data:{x:_,y:g}}}});function mN(t){const[e,n="center"]=t.split("-");return[e,n]}var cee=lN,d5=uN,h5=dN,f5=fN,m5=Symbol("radix.slottable");function p5(t){const e=({children:n})=>m.jsx(m.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=m5,e}var[uy]=Zu("Tooltip",[oN]),KE=oN(),pN="TooltipProvider",g5=700,ex="tooltip.open",[y5,gN]=uy(pN),yN=t=>{const{__scopeTooltip:e,delayDuration:n=g5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=v.useRef(!0),a=v.useRef(!1),l=v.useRef(0);return v.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(y5,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:v.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:v.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};yN.displayName=pN;var vN="Tooltip",[uee,dy]=uy(vN),R_="TooltipTrigger",v5=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=dy(R_,n),i=gN(R_,n),o=KE(n),a=v.useRef(null),l=Sr(e,a,s.onTriggerChange),c=v.useRef(!1),u=v.useRef(!1),h=v.useCallback(()=>c.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),m.jsx(d5,{asChild:!0,...o,children:m.jsx(Rn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:tn(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:tn(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:tn(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:tn(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:tn(t.onBlur,s.onClose),onClick:tn(t.onClick,s.onClose)})})});v5.displayName=R_;var w5="TooltipPortal",[dee,_5]=uy(w5,{forceMount:void 0}),Su="TooltipContent",wN=v.forwardRef((t,e)=>{const n=_5(Su,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=dy(Su,t.__scopeTooltip);return m.jsx(Ql,{present:r||o.open,children:o.disableHoverableContent?m.jsx(_N,{side:s,...i,ref:e}):m.jsx(E5,{side:s,...i,ref:e})})}),E5=v.forwardRef((t,e)=>{const n=dy(Su,t.__scopeTooltip),r=gN(Su,t.__scopeTooltip),s=v.useRef(null),i=Sr(e,s),[o,a]=v.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:h}=r,f=v.useCallback(()=>{a(null),h(!1)},[h]),p=v.useCallback((_,g)=>{const b=_.currentTarget,E={x:_.clientX,y:_.clientY},w=x5(E,b.getBoundingClientRect()),S=A5(E,w),P=P5(g.getBoundingClientRect()),x=C5([...S,...P]);a(x),h(!0)},[h]);return v.useEffect(()=>()=>f(),[f]),v.useEffect(()=>{if(l&&u){const _=b=>p(b,u),g=b=>p(b,l);return l.addEventListener("pointerleave",_),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",g)}}},[l,u,p,f]),v.useEffect(()=>{if(o){const _=g=>{const b=g.target,E={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),S=!R5(E,o);w?f():S&&(f(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,u,o,c,f]),m.jsx(_N,{...t,ref:i})}),[b5,S5]=uy(vN,{isInside:!1}),I5=p5("TooltipContent"),_N=v.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=dy(Su,n),c=KE(n),{onClose:u}=l;return v.useEffect(()=>(document.addEventListener(ex,u),()=>document.removeEventListener(ex,u)),[u]),v.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),m.jsx(ny,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:m.jsxs(h5,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(I5,{children:r}),m.jsx(b5,{scope:n,isInside:!0,children:m.jsx(i4,{id:l.contentId,role:"tooltip",children:s||r})})]})})});wN.displayName=Su;var EN="TooltipArrow",T5=v.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=KE(n);return S5(EN,n).isInside?null:m.jsx(f5,{...s,...r,ref:e})});T5.displayName=EN;function x5(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function A5(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function P5(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function R5(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,u=a.y,h=l.x,f=l.y;u>r!=f>r&&n<(h-c)*(r-u)/(f-u)+c&&(s=!s)}return s}function C5(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),k5(e)}function k5(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var N5=yN,bN=wN;const D5=N5,O5=v.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m.jsx(bN,{ref:r,sideOffset:e,className:dn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));O5.displayName=bN.displayName;var hy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},L5={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Fo,D0,TR,M5=(TR=class{constructor(){Nt(this,Fo,L5);Nt(this,D0,!1)}setTimeoutProvider(t){ct(this,Fo,t)}setTimeout(t,e){return Z(this,Fo).setTimeout(t,e)}clearTimeout(t){Z(this,Fo).clearTimeout(t)}setInterval(t,e){return Z(this,Fo).setInterval(t,e)}clearInterval(t){Z(this,Fo).clearInterval(t)}},Fo=new WeakMap,D0=new WeakMap,TR),Zp=new M5;function V5(t){setTimeout(t,0)}var fy=typeof window>"u"||"Deno"in globalThis;function Fr(){}function F5(t,e){return typeof t=="function"?t(e):t}function j5(t){return typeof t=="number"&&t>=0&&t!==1/0}function U5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function C_(t,e){return typeof t=="function"?t(e):t}function $5(t,e){return typeof t=="function"?t(e):t}function tx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==GE(o,e.options))return!1}else if(!qh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function nx(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Wh(e.options.mutationKey)!==Wh(i))return!1}else if(!qh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function GE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Wh)(t)}function Wh(t){return JSON.stringify(t,(e,n)=>k_(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>qh(t[n],e[n])):!1}var B5=Object.prototype.hasOwnProperty;function SN(t,e){if(t===e)return t;const n=rx(t)&&rx(e);if(!n&&!(k_(t)&&k_(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c],h=t[u],f=e[u];if(h===f){a[u]=h,(n?c<s:B5.call(t,u))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[u]=f;continue}const p=SN(h,f);a[u]=p,p===h&&l++}return s===o&&l===s?t:a}function hee(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function rx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function k_(t){if(!sx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!sx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sx(t){return Object.prototype.toString.call(t)==="[object Object]"}function z5(t){return new Promise(e=>{Zp.setTimeout(e,t)})}function W5(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?SN(t,e):e}function q5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function H5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var QE=Symbol();function IN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===QE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function fee(t,e){return typeof t=="function"?t(...e):!!t}function K5(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var dl,jo,au,xR,G5=(xR=class extends hy{constructor(){super();Nt(this,dl);Nt(this,jo);Nt(this,au);ct(this,au,e=>{if(!fy&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,jo)||this.setEventListener(Z(this,au))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,jo))==null||e.call(this),ct(this,jo,void 0))}setEventListener(e){var n;ct(this,au,e),(n=Z(this,jo))==null||n.call(this),ct(this,jo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Z(this,dl)!==e&&(ct(this,dl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Z(this,dl)=="boolean"?Z(this,dl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},dl=new WeakMap,jo=new WeakMap,au=new WeakMap,xR),TN=new G5;function Q5(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Y5(t){var n;let e;if((n=t.then(r=>(e=r,r),Fr))==null||n.catch(Fr),e!==void 0)return{data:e}}function xN(t){return t}function J5(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function X5(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(Fr),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function Z5(t){return t.state.isPaused}function eB(t){return t.state.status==="success"}function tB(t){return!0}function nB(t,e={}){var l,c,u,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??Z5,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[J5(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??eB,i=e.shouldRedactErrors??((u=t.getDefaultOptions().dehydrate)==null?void 0:u.shouldRedactErrors)??tB,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??xN,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[X5(f,o,i)]:[]);return{mutations:r,queries:a}}function rB(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??xN,o=e.mutations||[],a=e.queries||[];o.forEach(({state:u,...h})=>{var f,p;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(p=n==null?void 0:n.defaultOptions)==null?void 0:p.mutations,...h},u)}),a.forEach(({queryKey:u,state:h,queryHash:f,meta:p,promise:_,dehydratedAt:g})=>{var O,T;const b=_?Y5(_):void 0,E=h.data===void 0?b==null?void 0:b.data:h.data,w=E===void 0?E:i(E);let S=s.get(f);const P=(S==null?void 0:S.state.status)==="pending",x=(S==null?void 0:S.state.fetchStatus)==="fetching";if(S){const A=b&&g!==void 0&&g>S.state.dataUpdatedAt;if(h.dataUpdatedAt>S.state.dataUpdatedAt||A){const{fetchStatus:R,...N}=h;S.setState({...N,data:w})}}else S=s.build(t,{...(O=t.getDefaultOptions().hydrate)==null?void 0:O.queries,...(T=n==null?void 0:n.defaultOptions)==null?void 0:T.queries,queryKey:u,queryHash:f,meta:p},{...h,data:w,fetchStatus:"idle",status:w!==void 0?"success":h.status});_&&!P&&!x&&(g===void 0||g>S.state.dataUpdatedAt)&&S.fetch(void 0,{initialPromise:Promise.resolve(_).then(i)}).catch(Fr)})}var sB=V5;function iB(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=sB;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var jr=iB(),lu,Uo,cu,AR,oB=(AR=class extends hy{constructor(){super();Nt(this,lu,!0);Nt(this,Uo);Nt(this,cu);ct(this,cu,e=>{if(!fy&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Z(this,Uo)||this.setEventListener(Z(this,cu))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,Uo))==null||e.call(this),ct(this,Uo,void 0))}setEventListener(e){var n;ct(this,cu,e),(n=Z(this,Uo))==null||n.call(this),ct(this,Uo,e(this.setOnline.bind(this)))}setOnline(e){Z(this,lu)!==e&&(ct(this,lu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Z(this,lu)}},lu=new WeakMap,Uo=new WeakMap,cu=new WeakMap,AR),eg=new oB;function aB(t){return Math.min(1e3*2**t,3e4)}function AN(t){return(t??"online")==="online"?eg.isOnline():!0}var N_=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function PN(t){let e=!1,n=0,r;const s=Q5(),i=()=>s.status!=="pending",o=g=>{var b;if(!i()){const E=new N_(g);f(E),(b=t.onCancel)==null||b.call(t,E)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>TN.isFocused()&&(t.networkMode==="always"||eg.isOnline())&&t.canRun(),u=()=>AN(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var b;r=E=>{(i()||c())&&g(E)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),_=()=>{if(i())return;let g;const b=n===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(E){g=Promise.reject(E)}Promise.resolve(g).then(h).catch(E=>{var O;if(i())return;const w=t.retry??(fy?0:3),S=t.retryDelay??aB,P=typeof S=="function"?S(n,E):S,x=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,E);if(e||!x){f(E);return}n++,(O=t.onFail)==null||O.call(t,n,E),z5(P).then(()=>c()?void 0:p()).then(()=>{e?f(E):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?_():p().then(_),s)}}var hl,PR,RN=(PR=class{constructor(){Nt(this,hl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),j5(this.gcTime)&&ct(this,hl,Zp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(fy?1/0:5*60*1e3))}clearGcTimeout(){Z(this,hl)&&(Zp.clearTimeout(Z(this,hl)),ct(this,hl,void 0))}},hl=new WeakMap,PR),fl,uu,Is,ml,lr,hf,pl,Ms,Di,RR,lB=(RR=class extends RN{constructor(n){super();Nt(this,Ms);Nt(this,fl);Nt(this,uu);Nt(this,Is);Nt(this,ml);Nt(this,lr);Nt(this,hf);Nt(this,pl);ct(this,pl,!1),ct(this,hf,n.defaultOptions),this.setOptions(n.options),this.observers=[],ct(this,ml,n.client),ct(this,Is,Z(this,ml).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ct(this,fl,ox(this.options)),this.state=n.state??Z(this,fl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Z(this,lr))==null?void 0:n.promise}setOptions(n){if(this.options={...Z(this,hf),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=ox(this.options);r.data!==void 0&&(this.setState(ix(r.data,r.dataUpdatedAt)),ct(this,fl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,Is).remove(this)}setData(n,r){const s=W5(this.state.data,n,this.options);return Ir(this,Ms,Di).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ir(this,Ms,Di).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Z(this,lr))==null?void 0:s.promise;return(i=Z(this,lr))==null||i.cancel(n),r?r.then(Fr).catch(Fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,fl))}isActive(){return this.observers.some(n=>$5(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===QE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>C_(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!U5(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,lr))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Z(this,lr))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Z(this,Is).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Z(this,lr)&&(Z(this,pl)?Z(this,lr).cancel({revert:!0}):Z(this,lr).cancelRetry()),this.scheduleGc()),Z(this,Is).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ir(this,Ms,Di).call(this,{type:"invalidate"})}async fetch(n,r){var c,u,h,f,p,_,g,b,E,w,S,P;if(this.state.fetchStatus!=="idle"&&((c=Z(this,lr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Z(this,lr))return Z(this,lr).continueRetry(),Z(this,lr).promise}if(n&&this.setOptions(n),!this.options.queryFn){const x=this.observers.find(O=>O.options.queryFn);x&&this.setOptions(x.options)}const s=new AbortController,i=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ct(this,pl,!0),s.signal)})},o=()=>{const x=IN(this.options,r),T=(()=>{const A={client:Z(this,ml),queryKey:this.queryKey,meta:this.meta};return i(A),A})();return ct(this,pl,!1),this.options.persister?this.options.persister(x,T,this):x(T)},l=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Z(this,ml),state:this.state,fetchFn:o};return i(x),x})();(u=this.options.behavior)==null||u.onFetch(l,this),ct(this,uu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ir(this,Ms,Di).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ct(this,lr,PN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:x=>{x instanceof N_&&x.revert&&this.setState({...Z(this,uu),fetchStatus:"idle"}),s.abort()},onFail:(x,O)=>{Ir(this,Ms,Di).call(this,{type:"failed",failureCount:x,error:O})},onPause:()=>{Ir(this,Ms,Di).call(this,{type:"pause"})},onContinue:()=>{Ir(this,Ms,Di).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const x=await Z(this,lr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(_=(p=Z(this,Is).config).onSuccess)==null||_.call(p,x,this),(b=(g=Z(this,Is).config).onSettled)==null||b.call(g,x,this.state.error,this),x}catch(x){if(x instanceof N_){if(x.silent)return Z(this,lr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Ir(this,Ms,Di).call(this,{type:"error",error:x}),(w=(E=Z(this,Is).config).onError)==null||w.call(E,x,this),(P=(S=Z(this,Is).config).onSettled)==null||P.call(S,this.state.data,x,this),x}finally{this.scheduleGc()}}},fl=new WeakMap,uu=new WeakMap,Is=new WeakMap,ml=new WeakMap,lr=new WeakMap,hf=new WeakMap,pl=new WeakMap,Ms=new WeakSet,Di=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...cB(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...ix(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ct(this,uu,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),jr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Z(this,Is).notify({query:this,type:"updated",action:n})})},RR);function cB(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:AN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ix(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ox(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function ax(t){return{onFetch:(e,n)=>{var u,h,f,p,_;const r=e.options,s=(f=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const b=S=>{K5(S,()=>e.signal,()=>g=!0)},E=IN(e.options,e.fetchOptions),w=async(S,P,x)=>{if(g)return Promise.reject();if(P==null&&S.pages.length)return Promise.resolve(S);const T=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:P,direction:x?"backward":"forward",meta:e.options.meta};return b(C),C})(),A=await E(T),{maxPages:R}=e.options,N=x?H5:q5;return{pages:N(S.pages,A,R),pageParams:N(S.pageParams,P,R)}};if(s&&i.length){const S=s==="backward",P=S?uB:lx,x={pages:i,pageParams:o},O=P(r,x);a=await w(x,O,S)}else{const S=t??i.length;do{const P=l===0?o[0]??r.initialPageParam:lx(r,a);if(l>0&&P==null)break;a=await w(a,P),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function lx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function uB(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ff,li,Mr,gl,ci,Io,CR,dB=(CR=class extends RN{constructor(n){super();Nt(this,ci);Nt(this,ff);Nt(this,li);Nt(this,Mr);Nt(this,gl);ct(this,ff,n.client),this.mutationId=n.mutationId,ct(this,Mr,n.mutationCache),ct(this,li,[]),this.state=n.state||hB(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Z(this,li).includes(n)||(Z(this,li).push(n),this.clearGcTimeout(),Z(this,Mr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ct(this,li,Z(this,li).filter(r=>r!==n)),this.scheduleGc(),Z(this,Mr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Z(this,li).length||(this.state.status==="pending"?this.scheduleGc():Z(this,Mr).remove(this))}continue(){var n;return((n=Z(this,gl))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,u,h,f,p,_,g,b,E,w,S,P,x,O,T,A,R,N;const r=()=>{Ir(this,ci,Io).call(this,{type:"continue"})},s={client:Z(this,ff),meta:this.options.meta,mutationKey:this.options.mutationKey};ct(this,gl,PN({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(C,L)=>{Ir(this,ci,Io).call(this,{type:"failed",failureCount:C,error:L})},onPause:()=>{Ir(this,ci,Io).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,Mr).canRun(this)}));const i=this.state.status==="pending",o=!Z(this,gl).canStart();try{if(i)r();else{Ir(this,ci,Io).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=Z(this,Mr).config).onMutate)==null?void 0:l.call(a,n,this,s));const L=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n,s));L!==this.state.context&&Ir(this,ci,Io).call(this,{type:"pending",context:L,variables:n,isPaused:o})}const C=await Z(this,gl).start();return await((f=(h=Z(this,Mr).config).onSuccess)==null?void 0:f.call(h,C,n,this.state.context,this,s)),await((_=(p=this.options).onSuccess)==null?void 0:_.call(p,C,n,this.state.context,s)),await((b=(g=Z(this,Mr).config).onSettled)==null?void 0:b.call(g,C,null,this.state.variables,this.state.context,this,s)),await((w=(E=this.options).onSettled)==null?void 0:w.call(E,C,null,n,this.state.context,s)),Ir(this,ci,Io).call(this,{type:"success",data:C}),C}catch(C){try{await((P=(S=Z(this,Mr).config).onError)==null?void 0:P.call(S,C,n,this.state.context,this,s))}catch(L){Promise.reject(L)}try{await((O=(x=this.options).onError)==null?void 0:O.call(x,C,n,this.state.context,s))}catch(L){Promise.reject(L)}try{await((A=(T=Z(this,Mr).config).onSettled)==null?void 0:A.call(T,void 0,C,this.state.variables,this.state.context,this,s))}catch(L){Promise.reject(L)}try{await((N=(R=this.options).onSettled)==null?void 0:N.call(R,void 0,C,n,this.state.context,s))}catch(L){Promise.reject(L)}throw Ir(this,ci,Io).call(this,{type:"error",error:C}),C}finally{Z(this,Mr).runNext(this)}}},ff=new WeakMap,li=new WeakMap,Mr=new WeakMap,gl=new WeakMap,ci=new WeakSet,Io=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),jr.batch(()=>{Z(this,li).forEach(s=>{s.onMutationUpdate(n)}),Z(this,Mr).notify({mutation:this,type:"updated",action:n})})},CR);function hB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mi,Vs,mf,kR,fB=(kR=class extends hy{constructor(e={}){super();Nt(this,Mi);Nt(this,Vs);Nt(this,mf);this.config=e,ct(this,Mi,new Set),ct(this,Vs,new Map),ct(this,mf,0)}build(e,n,r){const s=new dB({client:e,mutationCache:this,mutationId:++Zf(this,mf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Z(this,Mi).add(e);const n=Em(e);if(typeof n=="string"){const r=Z(this,Vs).get(n);r?r.push(e):Z(this,Vs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Z(this,Mi).delete(e)){const n=Em(e);if(typeof n=="string"){const r=Z(this,Vs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Z(this,Vs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Em(e);if(typeof n=="string"){const r=Z(this,Vs).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Em(e);if(typeof n=="string"){const s=(r=Z(this,Vs).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jr.batch(()=>{Z(this,Mi).forEach(e=>{this.notify({type:"removed",mutation:e})}),Z(this,Mi).clear(),Z(this,Vs).clear()})}getAll(){return Array.from(Z(this,Mi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>nx(n,r))}findAll(e={}){return this.getAll().filter(n=>nx(e,n))}notify(e){jr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return jr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Fr))))}},Mi=new WeakMap,Vs=new WeakMap,mf=new WeakMap,kR);function Em(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ui,NR,mB=(NR=class extends hy{constructor(e={}){super();Nt(this,ui);this.config=e,ct(this,ui,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??GE(s,n);let o=this.get(i);return o||(o=new lB({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Z(this,ui).has(e.queryHash)||(Z(this,ui).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Z(this,ui).get(e.queryHash);n&&(e.destroy(),n===e&&Z(this,ui).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Z(this,ui).get(e)}getAll(){return[...Z(this,ui).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>tx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>tx(e,r)):n}notify(e){jr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){jr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ui=new WeakMap,NR),Dn,$o,Bo,du,hu,zo,fu,mu,DR,pB=(DR=class{constructor(t={}){Nt(this,Dn);Nt(this,$o);Nt(this,Bo);Nt(this,du);Nt(this,hu);Nt(this,zo);Nt(this,fu);Nt(this,mu);ct(this,Dn,t.queryCache||new mB),ct(this,$o,t.mutationCache||new fB),ct(this,Bo,t.defaultOptions||{}),ct(this,du,new Map),ct(this,hu,new Map),ct(this,zo,0)}mount(){Zf(this,zo)._++,Z(this,zo)===1&&(ct(this,fu,TN.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,Dn).onFocus())})),ct(this,mu,eg.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,Dn).onOnline())})))}unmount(){var t,e;Zf(this,zo)._--,Z(this,zo)===0&&((t=Z(this,fu))==null||t.call(this),ct(this,fu,void 0),(e=Z(this,mu))==null||e.call(this),ct(this,mu,void 0))}isFetching(t){return Z(this,Dn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Z(this,$o).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,Dn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Z(this,Dn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(C_(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Z(this,Dn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Z(this,Dn).get(r.queryHash),i=s==null?void 0:s.state.data,o=F5(e,i);if(o!==void 0)return Z(this,Dn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return jr.batch(()=>Z(this,Dn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,Dn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Z(this,Dn);jr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Z(this,Dn);return jr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=jr.batch(()=>Z(this,Dn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Fr).catch(Fr)}invalidateQueries(t,e={}){return jr.batch(()=>(Z(this,Dn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=jr.batch(()=>Z(this,Dn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Fr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Fr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Z(this,Dn).build(this,e);return n.isStaleByTime(C_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Fr).catch(Fr)}fetchInfiniteQuery(t){return t.behavior=ax(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Fr).catch(Fr)}ensureInfiniteQueryData(t){return t.behavior=ax(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return eg.isOnline()?Z(this,$o).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,Dn)}getMutationCache(){return Z(this,$o)}getDefaultOptions(){return Z(this,Bo)}setDefaultOptions(t){ct(this,Bo,t)}setQueryDefaults(t,e){Z(this,du).set(Wh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Z(this,du).values()],n={};return e.forEach(r=>{qh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Z(this,hu).set(Wh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Z(this,hu).values()],n={};return e.forEach(r=>{qh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Z(this,Bo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=GE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===QE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Z(this,Bo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Z(this,Dn).clear(),Z(this,$o).clear()}},Dn=new WeakMap,$o=new WeakMap,Bo=new WeakMap,du=new WeakMap,hu=new WeakMap,zo=new WeakMap,fu=new WeakMap,mu=new WeakMap,DR),CN=v.createContext(void 0),gee=t=>{const e=v.useContext(CN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},gB=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(CN.Provider,{value:t,children:e})),yB=["added","removed","updated"];function cx(t){return yB.includes(t)}async function vB({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();rB(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function ux({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:nB(t,r)};await e.persistClient(s)}function wB(t){const e=t.queryClient.getQueryCache().subscribe(r=>{cx(r.type)&&ux(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{cx(r.type)&&ux(t)});return()=>{e(),n()}}function _B(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=vB(t).then(()=>{e||(n=wB(t))});return[r,s]}function Bv(){}function EB({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:bB(a=>{let l=a,c=o(l),u=0;for(;c&&l;)u++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:u}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Bv,restoreClient:Bv,removeClient:Bv}}function bB(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Zp.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hh(){return Hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hh.apply(this,arguments)}var Ho;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ho||(Ho={}));const dx="popstate";function SB(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return tg("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Kh(s)}return kN(e,n,null,t)}function IB(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Yl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),tg("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Kh(i))}function r(s,i){my(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return kN(e,n,r,t)}function jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function my(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TB(){return Math.random().toString(36).substr(2,8)}function hx(t,e){return{usr:t.state,key:t.key,idx:e}}function tg(t,e,n,r){return n===void 0&&(n=null),Hh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yl(e):e,{state:n,key:e&&e.key||r||TB()})}function Kh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ho.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Hh({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Ho.Pop;let b=u(),E=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:E})}function f(b,E){a=Ho.Push;let w=tg(g.location,b,E);n&&n(w,b),c=u()+1;let S=hx(w,c),P=g.createHref(w);try{o.pushState(S,"",P)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(P)}i&&l&&l({action:a,location:g.location,delta:1})}function p(b,E){a=Ho.Replace;let w=tg(g.location,b,E);n&&n(w,b),c=u();let S=hx(w,c),P=g.createHref(w);o.replaceState(S,"",P),i&&l&&l({action:a,location:g.location,delta:0})}function _(b){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:Kh(b);return w=w.replace(/ $/,"%20"),jn(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let g={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(dx,h),l=b,()=>{s.removeEventListener(dx,h),l=null}},createHref(b){return e(s,b)},createURL:_,encodeLocation(b){let E=_(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}var fx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fx||(fx={}));function xB(t,e,n){return n===void 0&&(n="/"),AB(t,e,n)}function AB(t,e,n,r){let s=typeof e=="string"?Yl(e):e,i=YE(s.pathname||"/",n);if(i==null)return null;let o=NN(t);PB(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=UB(i);a=VB(o[l],c)}return a}function NN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(jn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ia([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(jn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),NN(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:LB(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of DN(i.path))s(i,o,l)}),e}function DN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=DN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function PB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MB(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const RB=/^:[\w-]+$/,CB=3,kB=2,NB=1,DB=10,OB=-2,mx=t=>t==="*";function LB(t,e){let n=t.split("/"),r=n.length;return n.some(mx)&&(r+=OB),e&&(r+=kB),n.filter(s=>!mx(s)).reduce((s,i)=>s+(RB.test(i)?CB:i===""?NB:DB),r)}function MB(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function VB(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=FB({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ia([i,h.pathname]),pathnameBase:qB(ia([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ia([i,h.pathnameBase]))}return o}function FB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jB(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const _=a[h];return p&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function jB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),my(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function UB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return my(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function YE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const $B=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BB=t=>$B.test(t);function zB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Yl(t):t,i;if(n)if(BB(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),my(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=px(n.substring(1),"/"):i=px(n,e)}else i=e;return{pathname:i,search:HB(r),hash:KB(s)}}function px(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function JE(t,e){let n=WB(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function XE(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Yl(t):(s=Hh({},t),jn(!s.pathname||!s.pathname.includes("?"),zv("?","pathname","search",s)),jn(!s.pathname||!s.pathname.includes("#"),zv("#","pathname","hash",s)),jn(!s.search||!s.search.includes("#"),zv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=zB(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ia=t=>t.join("/").replace(/\/\/+/g,"/"),qB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ON=["post","put","patch","delete"];new Set(ON);const QB=["get",...ON];new Set(QB);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gh.apply(this,arguments)}const ZE=v.createContext(null),YB=v.createContext(null),Ra=v.createContext(null),py=v.createContext(null),oo=v.createContext({outlet:null,matches:[],isDataRoute:!1}),LN=v.createContext(null);function JB(t,e){let{relative:n}=e===void 0?{}:e;rd()||jn(!1);let{basename:r,navigator:s}=v.useContext(Ra),{hash:i,pathname:o,search:a}=VN(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ia([r,o])),s.createHref({pathname:l,search:a,hash:i})}function rd(){return v.useContext(py)!=null}function Zs(){return rd()||jn(!1),v.useContext(py).location}function MN(t){v.useContext(Ra).static||v.useLayoutEffect(t)}function Jl(){let{isDataRoute:t}=v.useContext(oo);return t?u9():XB()}function XB(){rd()||jn(!1);let t=v.useContext(ZE),{basename:e,future:n,navigator:r}=v.useContext(Ra),{matches:s}=v.useContext(oo),{pathname:i}=Zs(),o=JSON.stringify(JE(s,n.v7_relativeSplatPath)),a=v.useRef(!1);return MN(()=>{a.current=!0}),v.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=XE(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ia([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}function yee(){let{matches:t}=v.useContext(oo),e=t[t.length-1];return e?e.params:{}}function VN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=v.useContext(Ra),{matches:s}=v.useContext(oo),{pathname:i}=Zs(),o=JSON.stringify(JE(s,r.v7_relativeSplatPath));return v.useMemo(()=>XE(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function ZB(t,e){return e9(t,e)}function e9(t,e,n,r){rd()||jn(!1);let{navigator:s}=v.useContext(Ra),{matches:i}=v.useContext(oo),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Zs(),u;if(e){var h;let b=typeof e=="string"?Yl(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||jn(!1),u=b}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let _=xB(t,{pathname:p}),g=i9(_&&_.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:ia([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:ia([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&g?v.createElement(py.Provider,{value:{location:Gh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ho.Pop}},g):g}function t9(){let t=c9(),e=GB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:s},n):null,null)}const n9=v.createElement(t9,null);class r9 extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(oo.Provider,{value:this.props.routeContext},v.createElement(LN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function s9(t){let{routeContext:e,match:n,children:r}=t,s=v.useContext(ZE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(oo.Provider,{value:e},r)}function i9(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||jn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,_=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,_=!1,g=null,b=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||n9,l&&(c<0&&f===0?(d9("route-fallback"),_=!0,b=null):c===f&&(_=!0,b=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),w=()=>{let S;return p?S=g:_?S=b:h.route.Component?S=v.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=u,v.createElement(s9,{match:h,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(r9,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var FN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FN||{}),jN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jN||{});function o9(t){let e=v.useContext(ZE);return e||jn(!1),e}function a9(t){let e=v.useContext(YB);return e||jn(!1),e}function l9(t){let e=v.useContext(oo);return e||jn(!1),e}function UN(t){let e=l9(),n=e.matches[e.matches.length-1];return n.route.id||jn(!1),n.route.id}function c9(){var t;let e=v.useContext(LN),n=a9(),r=UN();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function u9(){let{router:t}=o9(FN.UseNavigateStable),e=UN(jN.UseNavigateStable),n=v.useRef(!1);return MN(()=>{n.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Gh({fromRouteId:e},i)))},[t,e])}const gx={};function d9(t,e,n){gx[t]||(gx[t]=!0)}function $N(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vee(t){let{to:e,replace:n,state:r,relative:s}=t;rd()||jn(!1);let{future:i,static:o}=v.useContext(Ra),{matches:a}=v.useContext(oo),{pathname:l}=Zs(),c=Jl(),u=XE(e,JE(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return v.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function He(t){jn(!1)}function BN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ho.Pop,navigator:i,static:o=!1,future:a}=t;rd()&&jn(!1);let l=e.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:l,navigator:i,static:o,future:Gh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Yl(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:_="default"}=r,g=v.useMemo(()=>{let b=YE(u,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:_},navigationType:s}},[l,u,h,f,p,_,s]);return g==null?null:v.createElement(Ra.Provider,{value:c},v.createElement(py.Provider,{children:n,value:g}))}function yx(t){let{children:e,location:n}=t;return ZB(D_(e),n)}new Promise(()=>{});function D_(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,s)=>{if(!v.isValidElement(r))return;let i=[...e,s];if(r.type===v.Fragment){n.push.apply(n,D_(r.props.children,i));return}r.type!==He&&jn(!1),!r.props.index||!r.props.children||jn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=D_(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O_.apply(this,arguments)}function h9(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function f9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function m9(t,e){return t.button===0&&(!e||e==="_self")&&!f9(t)}function L_(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function p9(t,e){let n=L_(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const g9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],y9="6";try{window.__reactRouterVersion=y9}catch{}const v9="startTransition",ng=Ug[v9];function w9(t){let{basename:e,children:n,future:r,window:s}=t,i=v.useRef();i.current==null&&(i.current=SB({window:s,v5Compat:!0}));let o=i.current,[a,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=v.useCallback(h=>{c&&ng?ng(()=>l(h)):l(h)},[l,c]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>$N(r),[r]),v.createElement(BN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function _9(t){let{basename:e,children:n,future:r,window:s}=t,i=v.useRef();i.current==null&&(i.current=IB({window:s,v5Compat:!0}));let o=i.current,[a,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=v.useCallback(h=>{c&&ng?ng(()=>l(h)):l(h)},[l,c]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>$N(r),[r]),v.createElement(BN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const E9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M_=v.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=h9(e,g9),{basename:p}=v.useContext(Ra),_,g=!1;if(typeof c=="string"&&b9.test(c)&&(_=c,E9))try{let S=new URL(window.location.href),P=c.startsWith("//")?new URL(S.protocol+c):new URL(c),x=YE(P.pathname,p);P.origin===S.origin&&x!=null?c=x+P.search+P.hash:g=!0}catch{}let b=JB(c,{relative:s}),E=S9(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function w(S){r&&r(S),S.defaultPrevented||E(S)}return v.createElement("a",O_({},f,{href:_||b,onClick:g||i?r:w,ref:n,target:l}))});var vx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vx||(vx={}));var wx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wx||(wx={}));function S9(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Jl(),c=Zs(),u=VN(t,{relative:o});return v.useCallback(h=>{if(m9(h,n)){h.preventDefault();let f=r!==void 0?r:Kh(c)===Kh(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function wee(t){let e=v.useRef(L_(t)),n=v.useRef(!1),r=Zs(),s=v.useMemo(()=>p9(r.search,n.current?null:e.current),[r.search]),i=Jl(),o=v.useCallback((a,l)=>{const c=L_(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const zN=v.createContext(void 0),I9=({children:t})=>{const[e,n]=v.useState(()=>{if(typeof window<"u"){const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const u=localStorage.getItem(c);if(u&&["small","medium","large"].includes(u))return u}return window.innerWidth<=768?"small":"medium"}return"medium"}),[r,s]=v.useState(!1),[i,o]=v.useState(!1);v.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),v.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),v.useEffect(()=>{},[]),v.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return m.jsx(zN.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},_ee=()=>{const t=v.useContext(zN);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t};var T9=Symbol.for("react.lazy"),rg=Ug[" use ".trim().toString()];function x9(t){return typeof t=="object"&&t!==null&&"then"in t}function WN(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===T9&&"_payload"in t&&x9(t._payload)}function qN(t){const e=P9(t),n=v.forwardRef((r,s)=>{let{children:i,...o}=r;WN(i)&&typeof rg=="function"&&(i=rg(i._payload));const a=v.Children.toArray(i),l=a.find(C9);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var A9=qN("Slot");function P9(t){const e=v.forwardRef((n,r)=>{let{children:s,...i}=n;if(WN(s)&&typeof rg=="function"&&(s=rg(s._payload)),v.isValidElement(s)){const o=N9(s),a=k9(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var R9=Symbol("radix.slottable");function C9(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===R9}function k9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function N9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const D9=DE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),vt=v.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?A9:"button";return m.jsx(o,{className:dn(D9({variant:e,size:n,className:t})),ref:i,...s})});vt.displayName="Button";const Zn=v.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),m.jsx("input",{type:e,className:dn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});Zn.displayName="Input";const O9=()=>{};var _x={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},L9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):L9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new M9;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class M9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V9=function(t){const e=HN(t);return eb.encodeByteArray(e,!0)},sg=function(t){return V9(t).replace(/\./g,"")},KN=function(t){try{return eb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=()=>GN().__FIREBASE_DEFAULTS__,j9=()=>{if(typeof process>"u"||typeof _x>"u")return;const t=_x.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},U9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KN(t[1]);return e&&JSON.parse(e)},gy=()=>{try{return O9()||F9()||j9()||U9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QN=t=>{var e,n;return(n=(e=gy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tb=t=>{const e=QN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YN=()=>{var t;return(t=gy())==null?void 0:t.config},JN=t=>{var e;return(e=gy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function If(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sg(JSON.stringify(n)),sg(JSON.stringify(o)),""].join(".")}const hh={};function $9(){const t={prod:[],emulator:[]};for(const e of Object.keys(hh))hh[e]?t.emulator.push(e):t.prod.push(e);return t}function B9(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ex=!1;function yy(t,e){if(typeof window>"u"||typeof document>"u"||!ei(window.location.host)||hh[t]===e||hh[t]||Ex)return;hh[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=$9().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Ex=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=B9(r),p=n("text"),_=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),b=document.getElementById(g)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;a(S),u(b,g);const P=c();l(w,E),S.append(w,_,b,P),document.body.appendChild(S)}i?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tr())}function ZN(){var e;const t=(e=gy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function H9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K9(){const t=tr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eD(){return!ZN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tD(){return!ZN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function nb(){try{return typeof indexedDB=="object"}catch{return!1}}function G9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="FirebaseError";class ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Q9,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Y9(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ti(s,a,r)}}function Y9(t,e){return t.replace(J9,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const J9=/\{\$([^}]+)}/g;function X9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(bx(i)&&bx(o)){if(!Qs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Kd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Z9(t,e){const n=new ez(t,e);return n.subscribe.bind(n)}class ez{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tz(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wv),s.error===void 0&&(s.error=Wv),s.complete===void 0&&(s.complete=Wv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eee=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class Ys{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new V_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sz(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rz(t){return t===Ha?void 0:t}function sz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const oz={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},az=Ct.INFO,lz={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},cz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lz[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vy{constructor(e){this.name=e,this._logLevel=az,this._logHandler=cz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const uz=(t,e)=>e.some(n=>t instanceof n);let Sx,Ix;function dz(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hz(){return Ix||(Ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nD=new WeakMap,F_=new WeakMap,rD=new WeakMap,qv=new WeakMap,rb=new WeakMap;function fz(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(oa(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nD.set(n,t)}).catch(()=>{}),rb.set(e,t),e}function mz(t){if(F_.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});F_.set(t,e)}let j_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return F_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pz(t){j_=t(j_)}function gz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hv(this),e,...n);return rD.set(r,e.sort?e.sort():[e]),oa(r)}:hz().includes(t)?function(...e){return t.apply(Hv(this),e),oa(nD.get(this))}:function(...e){return oa(t.apply(Hv(this),e))}}function yz(t){return typeof t=="function"?gz(t):(t instanceof IDBTransaction&&mz(t),uz(t,dz())?new Proxy(t,j_):t)}function oa(t){if(t instanceof IDBRequest)return fz(t);if(qv.has(t))return qv.get(t);const e=yz(t);return e!==t&&(qv.set(t,e),rb.set(e,t)),e}const Hv=t=>rb.get(t);function vz(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=oa(o);return r&&o.addEventListener("upgradeneeded",l=>{r(oa(o.result),l.oldVersion,l.newVersion,oa(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const wz=["get","getKey","getAll","getAllKeys","count"],_z=["put","add","delete","clear"],Kv=new Map;function Tx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kv.get(e))return Kv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_z.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wz.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Kv.set(e,i),i}pz(t=>({...t,get:(e,n,r)=>Tx(e,n)||t.get(e,n,r),has:(e,n)=>!!Tx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const U_="@firebase/app",xx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new vy("@firebase/app"),Sz="@firebase/app-compat",Iz="@firebase/analytics-compat",Tz="@firebase/analytics",xz="@firebase/app-check-compat",Az="@firebase/app-check",Pz="@firebase/auth",Rz="@firebase/auth-compat",Cz="@firebase/database",kz="@firebase/data-connect",Nz="@firebase/database-compat",Dz="@firebase/functions",Oz="@firebase/functions-compat",Lz="@firebase/installations",Mz="@firebase/installations-compat",Vz="@firebase/messaging",Fz="@firebase/messaging-compat",jz="@firebase/performance",Uz="@firebase/performance-compat",$z="@firebase/remote-config",Bz="@firebase/remote-config-compat",zz="@firebase/storage",Wz="@firebase/storage-compat",qz="@firebase/firestore",Hz="@firebase/ai",Kz="@firebase/firestore-compat",Gz="firebase",Qz="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",Yz={[U_]:"fire-core",[Sz]:"fire-core-compat",[Tz]:"fire-analytics",[Iz]:"fire-analytics-compat",[Az]:"fire-app-check",[xz]:"fire-app-check-compat",[Pz]:"fire-auth",[Rz]:"fire-auth-compat",[Cz]:"fire-rtdb",[kz]:"fire-data-connect",[Nz]:"fire-rtdb-compat",[Dz]:"fire-fn",[Oz]:"fire-fn-compat",[Lz]:"fire-iid",[Mz]:"fire-iid-compat",[Vz]:"fire-fcm",[Fz]:"fire-fcm-compat",[jz]:"fire-perf",[Uz]:"fire-perf-compat",[$z]:"fire-rc",[Bz]:"fire-rc-compat",[zz]:"fire-gcs",[Wz]:"fire-gcs-compat",[qz]:"fire-fst",[Kz]:"fire-fst-compat",[Hz]:"fire-vertex","fire-js":"fire-js",[Gz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Map,$_=new Map,B_=new Map;function Ax(t,e){try{t.container.addComponent(e)}catch(n){to.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ai(t){const e=t.name;if(B_.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;B_.set(e,t);for(const n of Iu.values())Ax(n,t);for(const n of $_.values())Ax(n,t);return!0}function Xl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jz(t,e,n=ig){Xl(t,e).clearInstance(n)}function Gr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new sd("app","Firebase",Xz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=Qz;function sD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ig,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw aa.create("bad-app-name",{appName:String(s)});if(n||(n=YN()),!n)throw aa.create("no-options");const i=Iu.get(s);if(i){if(Qs(n,i.options)&&Qs(r,i.config))return i;throw aa.create("duplicate-app",{appName:s})}const o=new iz(s);for(const l of B_.values())o.addComponent(l);const a=new Zz(n,r,o);return Iu.set(s,a),a}function wy(t=ig){const e=Iu.get(t);if(!e&&t===ig&&YN())return sD();if(!e)throw aa.create("no-app",{appName:t});return e}async function bee(t){let e=!1;const n=t.name;Iu.has(n)?(e=!0,Iu.delete(n)):$_.has(n)&&t.decRefCount()<=0&&($_.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function gs(t,e,n){let r=Yz[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(o.join(" "));return}Ai(new Ys(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW="firebase-heartbeat-database",tW=1,Qh="firebase-heartbeat-store";let Gv=null;function iD(){return Gv||(Gv=vz(eW,tW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qh)}catch(n){console.warn(n)}}}}).catch(t=>{throw aa.create("idb-open",{originalErrorMessage:t.message})})),Gv}async function nW(t){try{const n=(await iD()).transaction(Qh),r=await n.objectStore(Qh).get(oD(t));return await n.done,r}catch(e){if(e instanceof ti)to.warn(e.message);else{const n=aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(n.message)}}}async function Px(t,e){try{const r=(await iD()).transaction(Qh,"readwrite");await r.objectStore(Qh).put(e,oD(t)),await r.done}catch(n){if(n instanceof ti)to.warn(n.message);else{const r=aa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});to.warn(r.message)}}}function oD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=1024,sW=30;class iW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>sW){const o=lW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){to.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rx(),{heartbeatsToSend:r,unsentEntries:s}=oW(this._heartbeatsCache.heartbeats),i=sg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return to.warn(n),""}}}function Rx(){return new Date().toISOString().substring(0,10)}function oW(t,e=rW){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Cx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nb()?G9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nW(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cx(t){return sg(JSON.stringify({version:2,heartbeats:t})).length}function lW(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t){Ai(new Ys("platform-logger",e=>new Ez(e),"PRIVATE")),Ai(new Ys("heartbeat",e=>new iW(e),"PRIVATE")),gs(U_,xx,t),gs(U_,xx,"esm2020"),gs("fire-js","")}cW("");function aD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uW=aD,lD=new sd("auth","Firebase",aD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=new vy("@firebase/auth");function dW(t,...e){og.logLevel<=Ct.WARN&&og.warn(`Auth (${Zl}): ${t}`,...e)}function rp(t,...e){og.logLevel<=Ct.ERROR&&og.error(`Auth (${Zl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t,...e){throw sb(t,...e)}function Ei(t,...e){return sb(t,...e)}function cD(t,e,n){const r={...uW(),[e]:n};return new sd("auth","Firebase",r).create(e,{appName:t.name})}function qi(t){return cD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lD.create(t,...e)}function nt(t,e,...n){if(!t)throw sb(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rp(e),new Error(e)}function no(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uD(){return kx()==="http:"||kx()==="https:"}function kx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uD()||q9()||"connection"in navigator)?navigator.onLine:!0}function fW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n){this.shortDelay=e,this.longDelay=n,no(n>e,"Short delay should be less than long delay!"),this.isMobile=z9()||H9()}get(){return hW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e){no(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gW=new xf(3e4,6e4);function Ci(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ni(t,e,n,r,s={}){return hD(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Tf({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return W9()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ei(t.emulatorConfig.host)&&(c.credentials="include"),dD.fetch()(await fD(t,t.config.apiHost,n,a),c)})}async function hD(t,e,n){t._canInitEmulator=!1;const r={...mW,...e};try{const s=new vW(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw bm(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bm(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw bm(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw bm(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw cD(t,u,c);Js(t,u)}}catch(s){if(s instanceof ti)throw s;Js(t,"network-request-failed",{message:String(s)})}}async function Af(t,e,n,r,s={}){const i=await ni(t,e,n,r,s);return"mfaPendingCredential"in i&&Js(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fD(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?ib(t.config,s):`${t.config.apiScheme}://${s}`;return pW.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function yW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ei(this.auth,"network-request-failed")),gW.get())})}}function bm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ei(t,e,r);return s.customData._tokenResponse=n,s}function Nx(t){return t!==void 0&&t.enterprise!==void 0}class wW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _W(t,e){return ni(t,"GET","/v2/recaptchaConfig",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EW(t,e){return ni(t,"POST","/v1/accounts:delete",e)}async function lg(t,e){return ni(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bW(t,e=!1){const n=wt(t),r=await n.getIdToken(e),s=ob(r);nt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:fh(Qv(s.auth_time)),issuedAtTime:fh(Qv(s.iat)),expirationTime:fh(Qv(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qv(t){return Number(t)*1e3}function ob(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rp("JWT malformed, contained fewer than 3 sections"),null;try{const s=KN(n);return s?JSON.parse(s):(rp("Failed to decode base64 JWT payload"),null)}catch(s){return rp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Dx(t){const e=ob(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ti&&SW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fh(this.lastLoginAt),this.creationTime=fh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cg(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Tu(t,lg(e,{idToken:n}));nt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?mD(s.providerUserInfo):[],o=xW(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new z_(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function TW(t){const e=wt(t);await cg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xW(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AW(t,e){const n=await hD(t,{},async()=>{const r=Tf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await fD(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ei(t.emulatorConfig.host)&&(l.credentials="include"),dD.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PW(t,e){return ni(t,"POST","/v2/accounts:revokeToken",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=Dx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await AW(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new tu;return r&&(nt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(nt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(nt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tu,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $s{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new IW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new z_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Tu(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bW(this,e)}reload(){return TW(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gr(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await Tu(this,EW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:_,stsTokenManager:g}=n;nt(h&&g,e,"internal-error");const b=tu.fromJSON(this.name,g);nt(typeof h=="string",e,"internal-error"),wo(r,e.name),wo(s,e.name),nt(typeof f=="boolean",e,"internal-error"),nt(typeof p=="boolean",e,"internal-error"),wo(i,e.name),wo(o,e.name),wo(a,e.name),wo(l,e.name),wo(c,e.name),wo(u,e.name);const E=new $s({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return _&&Array.isArray(_)&&(E.providerData=_.map(w=>({...w}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new tu;s.updateFromServerResponse(n);const i=new $s({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cg(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];nt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?mD(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new tu;a.updateFromIdToken(r);const l=new $s({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new z_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new Map;function $i(t){no(t instanceof Function,"Expected a class definition");let e=Ox.get(t);return e?(no(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ox.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pD.type="NONE";const W_=pD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e,n){return`firebase:${t}:${e}:${n}`}class nu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=sp(this.userKey,s.apiKey,i),this.fullPersistenceKey=sp("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lg(this.auth,{idToken:e}).catch(()=>{});return n?$s._fromGetAccountInfoResponse(this.auth,n,e):null}return $s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nu($i(W_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||$i(W_);const o=sp(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await lg(e,{idToken:u}).catch(()=>{});if(!f)break;h=await $s._fromGetAccountInfoResponse(e,f,u)}else h=$s._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new nu(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new nu(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ED(e))return"Blackberry";if(bD(e))return"Webos";if(yD(e))return"Safari";if((e.includes("chrome/")||vD(e))&&!e.includes("edge/"))return"Chrome";if(_D(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gD(t=tr()){return/firefox\//i.test(t)}function yD(t=tr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vD(t=tr()){return/crios\//i.test(t)}function wD(t=tr()){return/iemobile/i.test(t)}function _D(t=tr()){return/android/i.test(t)}function ED(t=tr()){return/blackberry/i.test(t)}function bD(t=tr()){return/webos/i.test(t)}function ab(t=tr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RW(t=tr()){var e;return ab(t)&&!!((e=window.navigator)!=null&&e.standalone)}function CW(){return K9()&&document.documentMode===10}function SD(t=tr()){return ab(t)||_D(t)||bD(t)||ED(t)||/windows phone/i.test(t)||wD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t,e=[]){let n;switch(t){case"Browser":n=Lx(tr());break;case"Worker":n=`${Lx(tr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NW(t,e={}){return ni(t,"GET","/v2/passwordPolicy",Ci(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW=6;class OW{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??DW,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mx(this),this.idTokenSubscription=new Mx(this),this.beforeStateQueue=new kW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await nu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lg(this,{idToken:e}),r=await $s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Gr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gr(this.app))return Promise.reject(qi(this));const n=e?wt(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gr(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gr(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NW(this),n=new OW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$i(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await nu.create(this,[$i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ID(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&dW(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ca(t){return wt(t)}class Mx{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z9(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _y={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MW(t){_y=t}function TD(t){return _y.loadJS(t)}function VW(){return _y.recaptchaEnterpriseScript}function FW(){return _y.gapiScript}function jW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class UW{constructor(){this.enterprise=new $W}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class $W{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const BW="recaptcha-enterprise",xD="NO_RECAPTCHA";class zW{constructor(e){this.type=BW,this.auth=Ca(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{_W(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new wW(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Nx(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(xD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UW().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Nx(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=VW();l.length!==0&&(l+=a),TD(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Vx(t,e,n,r=!1,s=!1){const i=new zW(t);let o;if(s)o=xD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ug(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Vx(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Vx(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t,e){const n=Xl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Qs(i,e??{}))return s;Js(s,"already-initialized")}return n.initialize({options:e})}function WW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qW(t,e,n){const r=Ca(t);nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=PD(e),{host:o,port:a}=HW(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),nt(Qs(c,r.config.emulator)&&Qs(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ei(o)?(If(`${i}//${o}${l}`),yy("Auth",!0)):KW()}function PD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HW(t){const e=PD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Fx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Fx(o)}}}function Fx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function GW(t,e){return ni(t,"POST","/v1/accounts:update",e)}async function QW(t,e){return ni(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YW(t,e){return Af(t,"POST","/v1/accounts:signInWithPassword",Ci(t,e))}async function JW(t,e){return ni(t,"POST","/v1/accounts:sendOobCode",Ci(t,e))}async function XW(t,e){return JW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZW(t,e){return Af(t,"POST","/v1/accounts:signInWithEmailLink",Ci(t,e))}async function e8(t,e){return Af(t,"POST","/v1/accounts:signInWithEmailLink",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends lb{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Yh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ug(e,n,"signInWithPassword",YW);case"emailLink":return ZW(e,{email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ug(e,r,"signUpPassword",QW);case"emailLink":return e8(e,{idToken:n,email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t,e){return Af(t,"POST","/v1/accounts:signInWithIdp",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="http://localhost";class kl extends lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new kl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Js("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new kl(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ru(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ru(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ru(e,n)}buildRequest(){const e={requestUri:t8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function r8(t){const e=Hd(Kd(t)).link,n=e?Hd(Kd(e)).deep_link_id:null,r=Hd(Kd(t)).deep_link_id;return(r?Hd(Kd(r)).link:null)||r||n||e||t}class cb{constructor(e){const n=Hd(Kd(e)),r=n.apiKey??null,s=n.oobCode??null,i=n8(n.mode??null);nt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=r8(e);try{return new cb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.providerId=ec.PROVIDER_ID}static credential(e,n){return Yh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cb.parseLink(n);return nt(r,"argument-error"),Yh._fromEmailAndCode(e,r.code,r.tenantId)}}ec.PROVIDER_ID="password";ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends RD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Pf{constructor(){super("facebook.com")}static credential(e){return kl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Pf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return kl._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Do.credential(n,r)}catch{return null}}}Do.GOOGLE_SIGN_IN_METHOD="google.com";Do.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Pf{constructor(){super("github.com")}static credential(e){return kl._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Pf{constructor(){super("twitter.com")}static credential(e,n){return kl._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lo.credential(n,r)}catch{return null}}}Lo.TWITTER_SIGN_IN_METHOD="twitter.com";Lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s8(t,e){return Af(t,"POST","/v1/accounts:signUp",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await $s._fromIdTokenResponse(e,r,s),o=jx(r);return new Nl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=jx(r);return new Nl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function jx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg extends ti{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,dg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new dg(e,n,r,s)}}function CD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?dg._fromErrorAndOperation(t,i,e,r):i})}async function i8(t,e,n=!1){const r=await Tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e,n=!1){const{auth:r}=t;if(Gr(r.app))return Promise.reject(qi(r));const s="reauthenticate";try{const i=await Tu(t,CD(r,s,e,t),n);nt(i.idToken,r,"internal-error");const o=ob(i.idToken);nt(o,r,"internal-error");const{sub:a}=o;return nt(t.uid===a,r,"user-mismatch"),Nl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Js(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e,n=!1){if(Gr(t.app))return Promise.reject(qi(t));const r="signIn",s=await CD(t,r,e),i=await Nl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function o8(t,e){return ND(Ca(t),e)}async function a8(t,e){return kD(wt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t){const e=Ca(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function l8(t,e,n){const r=Ca(t);await ug(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",XW)}async function Ux(t,e,n){if(Gr(t.app))return Promise.reject(qi(t));const r=Ca(t),o=await ug(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",s8).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&DD(t),l}),a=await Nl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function c8(t,e,n){return Gr(t.app)?Promise.reject(qi(t)):o8(wt(t),ec.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&DD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8(t,e){return ni(t,"POST","/v1/accounts:createAuthUri",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(t,e){const n=uD()?ag():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await u8(wt(t),r);return s||[]}function See(t,e){return h8(wt(t),null,e)}async function h8(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Tu(t,GW(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t,e){return wt(t).setPersistence(e)}function m8(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function p8(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function g8(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}function $x(t){return wt(t).signOut()}const hg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hg,"1"),this.storage.removeItem(hg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=1e3,v8=10;class LD extends OD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);CW()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,v8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},y8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LD.type="LOCAL";const ub=LD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD extends OD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}MD.type="SESSION";const db=MD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ey(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await w8(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ey.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=hb("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function E8(t){bi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function b8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function I8(){return VD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="firebaseLocalStorageDb",T8=1,fg="firebaseLocalStorage",jD="fbase_key";class Rf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function by(t,e){return t.transaction([fg],e?"readwrite":"readonly").objectStore(fg)}function x8(){const t=indexedDB.deleteDatabase(FD);return new Rf(t).toPromise()}function q_(){const t=indexedDB.open(FD,T8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fg,{keyPath:jD})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fg)?e(r):(r.close(),await x8(),e(await q_()))})})}async function Bx(t,e,n){const r=by(t,!0).put({[jD]:e,value:n});return new Rf(r).toPromise()}async function A8(t,e){const n=by(t,!1).get(e),r=await new Rf(n).toPromise();return r===void 0?null:r.value}function zx(t,e){const n=by(t,!0).delete(e);return new Rf(n).toPromise()}const P8=800,R8=3;class UD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await q_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ey._getInstance(I8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await b8(),!this.activeServiceWorker)return;this.sender=new _8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await q_();return await Bx(e,hg,"1"),await zx(e,hg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Bx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>A8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=by(s,!1).getAll();return new Rf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UD.type="LOCAL";const C8=UD;new xf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(t,e){return e?$i(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb extends lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ru(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ru(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ru(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function N8(t){return ND(t.auth,new fb(t),t.bypassAuthState)}function D8(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),kD(n,new fb(t),t.bypassAuthState)}async function O8(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),i8(n,new fb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N8;case"linkViaPopup":case"linkViaRedirect":return O8;case"reauthViaPopup":case"reauthViaRedirect":return D8;default:Js(this.auth,"internal-error")}}resolve(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=new xf(2e3,1e4);class Uc extends $D{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Uc.currentPopupAction&&Uc.currentPopupAction.cancel(),Uc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){no(this.filter.length===1,"Popup operations only handle one event");const e=hb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L8.get())};e()}}Uc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8="pendingRedirect",ip=new Map;class V8 extends $D{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ip.get(this.auth._key());if(!e){try{const r=await F8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ip.set(this.auth._key(),e)}return this.bypassAuthState||ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F8(t,e){const n=$8(e),r=U8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function j8(t,e){ip.set(t._key(),e)}function U8(t){return $i(t._redirectPersistence)}function $8(t){return sp(M8,t.config.apiKey,t.name)}async function B8(t,e,n=!1){if(Gr(t.app))return Promise.reject(qi(t));const r=Ca(t),s=k8(r,e),o=await new V8(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=10*60*1e3;class W8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!BD(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ei(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z8&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wx(e))}saveEventToCache(e){this.cachedEventUids.add(Wx(e)),this.lastProcessedEventTime=Date.now()}}function Wx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function q8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e={}){return ni(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G8=/^https?/;async function Q8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await H8(t);for(const n of e)try{if(Y8(n))return}catch{}Js(t,"unauthorized-domain")}function Y8(t){const e=ag(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!G8.test(n))return!1;if(K8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=new xf(3e4,6e4);function qx(){const t=bi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function X8(t){return new Promise((e,n)=>{var s,i,o;function r(){qx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qx(),n(Ei(t,"network-request-failed"))},timeout:J8.get()})}if((i=(s=bi().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=bi().gapi)!=null&&o.load)r();else{const a=jW("iframefcb");return bi()[a]=()=>{gapi.load?r():n(Ei(t,"network-request-failed"))},TD(`${FW()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw op=null,e})}let op=null;function Z8(t){return op=op||X8(t),op}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq=new xf(5e3,15e3),tq="__/auth/iframe",nq="emulator/auth/iframe",rq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iq(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ib(e,nq):`https://${t.config.authDomain}/${tq}`,r={apiKey:e.apiKey,appName:t.name,v:Zl},s=sq.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Tf(r).slice(1)}`}async function oq(t){const e=await Z8(t),n=bi().gapi;return nt(n,t,"internal-error"),e.open({where:document.body,url:iq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rq,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ei(t,"network-request-failed"),a=bi().setTimeout(()=>{i(o)},eq.get());function l(){bi().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lq=500,cq=600,uq="_blank",dq="http://localhost";class Hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hq(t,e,n,r=lq,s=cq){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...aq,width:r.toString(),height:s.toString(),top:i,left:o},c=tr().toLowerCase();n&&(a=vD(c)?uq:n),gD(c)&&(e=e||dq,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,_])=>`${f}${p}=${_},`,"");if(RW(c)&&a!=="_self")return fq(e||"",a),new Hx(null);const h=window.open(e||"",a,u);nt(h,t,"popup-blocked");try{h.focus()}catch{}return new Hx(h)}function fq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mq="__/auth/handler",pq="emulator/auth/handler",gq=encodeURIComponent("fac");async function Kx(t,e,n,r,s,i){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zl,eventId:s};if(e instanceof RD){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",X9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Pf){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${gq}=${encodeURIComponent(l)}`:"";return`${yq(t)}?${Tf(a).slice(1)}${c}`}function yq({config:t}){return t.emulator?ib(t,pq):`https://${t.authDomain}/${mq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="webStorageSupport";class vq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=db,this._completeRedirectFn=B8,this._overrideRedirectResult=j8}async _openPopup(e,n,r,s){var o;no((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Kx(e,n,r,ag(),s);return hq(e,i,hb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Kx(e,n,r,ag(),s);return E8(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(no(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oq(e),r=new W8(e);return n.register("authEvent",s=>(nt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yv,{type:Yv},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Yv];i!==void 0&&n(!!i),Js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SD()||yD()||ab()}}const wq=vq;var Gx="@firebase/auth",Qx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bq(t){Ai(new Ys("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;nt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ID(t)},c=new LW(r,s,i,l);return WW(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ai(new Ys("auth-internal",e=>{const n=Ca(e.getProvider("auth").getImmediate());return(r=>new _q(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(Gx,Qx,Eq(t)),gs(Gx,Qx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=5*60,Iq=JN("authIdTokenMaxAge")||Sq;let Yx=null;const Tq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Iq)return;const s=n==null?void 0:n.token;Yx!==s&&(Yx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Iee(t=wy()){const e=Xl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AD(t,{popupRedirectResolver:wq,persistence:[C8,ub,db]}),r=JN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Tq(i.toString());p8(n,o,()=>o(n.currentUser)),m8(n,a=>o(a))}}const s=QN("auth");return s&&qW(n,`http://${s}`),n}function xq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}MW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ei("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",xq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bq("Browser");var Aq="firebase",Pq="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(Aq,Pq,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq=new Map,Cq={activated:!1,tokenObservers:[]},kq={initialized:!1,enabled:!1};function Xs(t){return Rq.get(t)||{...Cq}}function zD(){return kq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq="https://content-firebaseappcheck.googleapis.com/v1";const Dq="exchangeDebugToken",Jx={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Tee=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new V_,this.pending.promise.catch(n=>{}),await Lq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new V_,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Lq(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ko=new sd("appCheck","AppCheck",Mq);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){if(!Xs(t).activated)throw Ko.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw Ko.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw Ko.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Ko.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ko.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+c,issuedAtTimeMillis:u}}function HD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${Nq}/projects/${n}/apps/${r}:${Dq}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq="firebase-app-check-database",Fq=1,H_="firebase-app-check-store";let Sm=null;function jq(){return Sm||(Sm=new Promise((t,e)=>{try{const n=indexedDB.open(Vq,Fq);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(Ko.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(H_,{keyPath:"compositeKey"})}}}catch(n){e(Ko.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Sm)}function Uq(t,e){return $q(Bq(t),e)}async function $q(t,e){const r=(await jq()).transaction(H_,"readwrite"),i=r.objectStore(H_).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Ko.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function Bq(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new vy("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e){return nb()?Uq(t,e).catch(n=>{Gd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){return zD().enabled}async function GD(){const t=zD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq={error:"UNKNOWN_ERROR"};function Wq(t){return eb.encodeString(JSON.stringify(t),!1)}async function K_(t,e=!1,n=!1){const r=t.app;WD(r);const s=Xs(r);let i=s.token,o;if(i&&!Qd(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Qd(c)?i=c:await Jv(r,void 0))}if(!e&&i&&Qd(i))return{token:i.token};let a=!1;if(KD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=qD(HD(r,await GD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Jv(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Gd.warn(c.message):n&&Gd.error(c),Xv(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Xs(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Gd.warn(c.message):n&&Gd.error(c),o=c}let l;return i?o?Qd(i)?l={token:i.token,internalError:o}:l=Xv(o):(l={token:i.token},s.token=i,await Jv(r,i)):l=Xv(o),a&&Gq(r,l),l}async function qq(t){const e=t.app;WD(e);const{provider:n}=Xs(e);if(KD()){const r=await GD(),{token:s}=await qD(HD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function Hq(t,e,n,r){const{app:s}=t,i=Xs(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Qd(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),Xx(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Xx(t))}function QD(t,e){const n=Xs(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Xx(t){const{app:e}=t,n=Xs(e);let r=n.tokenRefresher;r||(r=Kq(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Kq(t){const{app:e}=t;return new Oq(async()=>{const n=Xs(e);let r;if(n.token?r=await K_(t,!0):r=await K_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Xs(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},Jx.RETRIAL_MIN_WAIT,Jx.RETRIAL_MAX_WAIT)}function Gq(t,e){const n=Xs(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qd(t){return t.expireTimeMillis-Date.now()>0}function Xv(t){return{token:Wq(zq),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Xs(this.app);for(const n of e)QD(this.app,n.next);return Promise.resolve()}}function Yq(t,e){return new Qq(t,e)}function Jq(t){return{getToken:e=>K_(t,e),getLimitedUseToken:()=>qq(t),addTokenListener:e=>Hq(t,"INTERNAL",e),removeTokenListener:e=>QD(t.app,e)}}const Xq="@firebase/app-check",Zq="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7="app-check",Zx="app-check-internal";function t7(){Ai(new Ys(e7,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Yq(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Zx).initialize()})),Ai(new Ys(Zx,t=>{const e=t.getProvider("app-check").getImmediate();return Jq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),gs(Xq,Zq)}t7();var eA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var la,YD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,A){function R(){}R.prototype=A.prototype,T.F=A.prototype,T.prototype=new R,T.prototype.constructor=T,T.D=function(N,C,L){for(var D=Array(arguments.length-2),J=2;J<arguments.length;J++)D[J-2]=arguments[J];return A.prototype[C].apply(N,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,A,R){R||(R=0);const N=Array(16);if(typeof A=="string")for(var C=0;C<16;++C)N[C]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(C=0;C<16;++C)N[C]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=T.g[0],R=T.g[1],C=T.g[2];let L=T.g[3],D;D=A+(L^R&(C^L))+N[0]+3614090360&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[1]+3905402710&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[2]+606105819&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[3]+3250441966&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(L^R&(C^L))+N[4]+4118548399&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[5]+1200080426&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[6]+2821735955&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[7]+4249261313&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(L^R&(C^L))+N[8]+1770035416&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[9]+2336552879&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[10]+4294925233&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[11]+2304563134&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(L^R&(C^L))+N[12]+1804603682&4294967295,A=R+(D<<7&4294967295|D>>>25),D=L+(C^A&(R^C))+N[13]+4254626195&4294967295,L=A+(D<<12&4294967295|D>>>20),D=C+(R^L&(A^R))+N[14]+2792965006&4294967295,C=L+(D<<17&4294967295|D>>>15),D=R+(A^C&(L^A))+N[15]+1236535329&4294967295,R=C+(D<<22&4294967295|D>>>10),D=A+(C^L&(R^C))+N[1]+4129170786&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[6]+3225465664&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[11]+643717713&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[0]+3921069994&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(C^L&(R^C))+N[5]+3593408605&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[10]+38016083&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[15]+3634488961&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[4]+3889429448&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(C^L&(R^C))+N[9]+568446438&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[14]+3275163606&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[3]+4107603335&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[8]+1163531501&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(C^L&(R^C))+N[13]+2850285829&4294967295,A=R+(D<<5&4294967295|D>>>27),D=L+(R^C&(A^R))+N[2]+4243563512&4294967295,L=A+(D<<9&4294967295|D>>>23),D=C+(A^R&(L^A))+N[7]+1735328473&4294967295,C=L+(D<<14&4294967295|D>>>18),D=R+(L^A&(C^L))+N[12]+2368359562&4294967295,R=C+(D<<20&4294967295|D>>>12),D=A+(R^C^L)+N[5]+4294588738&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[8]+2272392833&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[11]+1839030562&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[14]+4259657740&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(R^C^L)+N[1]+2763975236&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[4]+1272893353&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[7]+4139469664&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[10]+3200236656&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(R^C^L)+N[13]+681279174&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[0]+3936430074&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[3]+3572445317&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[6]+76029189&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(R^C^L)+N[9]+3654602809&4294967295,A=R+(D<<4&4294967295|D>>>28),D=L+(A^R^C)+N[12]+3873151461&4294967295,L=A+(D<<11&4294967295|D>>>21),D=C+(L^A^R)+N[15]+530742520&4294967295,C=L+(D<<16&4294967295|D>>>16),D=R+(C^L^A)+N[2]+3299628645&4294967295,R=C+(D<<23&4294967295|D>>>9),D=A+(C^(R|~L))+N[0]+4096336452&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[7]+1126891415&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[14]+2878612391&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[5]+4237533241&4294967295,R=C+(D<<21&4294967295|D>>>11),D=A+(C^(R|~L))+N[12]+1700485571&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[3]+2399980690&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[10]+4293915773&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[1]+2240044497&4294967295,R=C+(D<<21&4294967295|D>>>11),D=A+(C^(R|~L))+N[8]+1873313359&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[15]+4264355552&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[6]+2734768916&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[13]+1309151649&4294967295,R=C+(D<<21&4294967295|D>>>11),D=A+(C^(R|~L))+N[4]+4149444226&4294967295,A=R+(D<<6&4294967295|D>>>26),D=L+(R^(A|~C))+N[11]+3174756917&4294967295,L=A+(D<<10&4294967295|D>>>22),D=C+(A^(L|~R))+N[2]+718787259&4294967295,C=L+(D<<15&4294967295|D>>>17),D=R+(L^(C|~A))+N[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+L&4294967295}r.prototype.v=function(T,A){A===void 0&&(A=T.length);const R=A-this.blockSize,N=this.C;let C=this.h,L=0;for(;L<A;){if(C==0)for(;L<=R;)s(this,T,L),L+=this.blockSize;if(typeof T=="string"){for(;L<A;)if(N[C++]=T.charCodeAt(L++),C==this.blockSize){s(this,N),C=0;break}}else for(;L<A;)if(N[C++]=T[L++],C==this.blockSize){s(this,N),C=0;break}}this.h=C,this.o+=A},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;A=this.o*8;for(var R=T.length-8;R<T.length;++R)T[R]=A&255,A/=256;for(this.v(T),T=Array(16),A=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)T[A++]=this.g[R]>>>N&255;return T};function i(T,A){var R=a;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=A(T)}function o(T,A){this.h=A;const R=[];let N=!0;for(let C=T.length-1;C>=0;C--){const L=T[C]|0;N&&L==A||(R[C]=L,N=!1)}this.g=R}var a={};function l(T){return-128<=T&&T<128?i(T,function(A){return new o([A|0],A<0?-1:0)}):new o([T|0],T<0?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return h;if(T<0)return b(c(-T));const A=[];let R=1;for(let N=0;T>=R;N++)A[N]=T/R|0,R*=4294967296;return new o(A,0)}function u(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return b(u(T.substring(1),A));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(A,8));let N=h;for(let L=0;L<T.length;L+=8){var C=Math.min(8,T.length-L);const D=parseInt(T.substring(L,L+C),A);C<8?(C=c(Math.pow(A,C)),N=N.j(C).add(c(D))):(N=N.j(R),N=N.add(c(D)))}return N}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-b(this).m();let T=0,A=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);T+=(N>=0?N:4294967296+N)*A,A*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(g(this))return"-"+b(this).toString(T);const A=c(Math.pow(T,6));var R=this;let N="";for(;;){const C=P(R,A).g;R=E(R,C.j(A));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(T);if(R=C,_(R))return L+N;for(;L.length<6;)L="0"+L;N=L+N}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(let A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function g(T){return T.h==-1}t.l=function(T){return T=E(this,T),g(T)?-1:_(T)?0:1};function b(T){const A=T.g.length,R=[];for(let N=0;N<A;N++)R[N]=~T.g[N];return new o(R,~T.h).add(f)}t.abs=function(){return g(this)?b(this):this},t.add=function(T){const A=Math.max(this.g.length,T.g.length),R=[];let N=0;for(let C=0;C<=A;C++){let L=N+(this.i(C)&65535)+(T.i(C)&65535),D=(L>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);N=D>>>16,L&=65535,D&=65535,R[C]=D<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function E(T,A){return T.add(b(A))}t.j=function(T){if(_(this)||_(T))return h;if(g(this))return g(T)?b(this).j(b(T)):b(b(this).j(T));if(g(T))return b(this.j(b(T)));if(this.l(p)<0&&T.l(p)<0)return c(this.m()*T.m());const A=this.g.length+T.g.length,R=[];for(var N=0;N<2*A;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let C=0;C<T.g.length;C++){const L=this.i(N)>>>16,D=this.i(N)&65535,J=T.i(C)>>>16,Le=T.i(C)&65535;R[2*N+2*C]+=D*Le,w(R,2*N+2*C),R[2*N+2*C+1]+=L*Le,w(R,2*N+2*C+1),R[2*N+2*C+1]+=D*J,w(R,2*N+2*C+1),R[2*N+2*C+2]+=L*J,w(R,2*N+2*C+2)}for(T=0;T<A;T++)R[T]=R[2*T+1]<<16|R[2*T];for(T=A;T<2*A;T++)R[T]=0;return new o(R,0)};function w(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function S(T,A){this.g=T,this.h=A}function P(T,A){if(_(A))throw Error("division by zero");if(_(T))return new S(h,h);if(g(T))return A=P(b(T),A),new S(b(A.g),b(A.h));if(g(A))return A=P(T,b(A)),new S(b(A.g),A.h);if(T.g.length>30){if(g(T)||g(A))throw Error("slowDivide_ only works with positive integers.");for(var R=f,N=A;N.l(T)<=0;)R=x(R),N=x(N);var C=O(R,1),L=O(N,1);for(N=O(N,2),R=O(R,2);!_(N);){var D=L.add(N);D.l(T)<=0&&(C=C.add(R),L=D),N=O(N,1),R=O(R,1)}return A=E(T,C.j(A)),new S(C,A)}for(C=h;T.l(A)>=0;){for(R=Math.max(1,Math.floor(T.m()/A.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),L=c(R),D=L.j(A);g(D)||D.l(T)>0;)R-=N,L=c(R),D=L.j(A);_(L)&&(L=f),C=C.add(L),T=E(T,D)}return new S(C,T)}t.B=function(T){return P(this,T).h},t.and=function(T){const A=Math.max(this.g.length,T.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)&T.i(N);return new o(R,this.h&T.h)},t.or=function(T){const A=Math.max(this.g.length,T.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)|T.i(N);return new o(R,this.h|T.h)},t.xor=function(T){const A=Math.max(this.g.length,T.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)^T.i(N);return new o(R,this.h^T.h)};function x(T){const A=T.g.length+1,R=[];for(let N=0;N<A;N++)R[N]=T.i(N)<<1|T.i(N-1)>>>31;return new o(R,T.h)}function O(T,A){const R=A>>5;A%=32;const N=T.g.length-R,C=[];for(let L=0;L<N;L++)C[L]=A>0?T.i(L+R)>>>A|T.i(L+R+1)<<32-A:T.i(L+R);return new o(C,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,la=o}).apply(typeof eA<"u"?eA:typeof self<"u"?self:typeof window<"u"?window:{});var Im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JD,Yd,XD,ap,G_,ZD,e2,t2;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Im=="object"&&Im];for(var y=0;y<d.length;++y){var I=d[y];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var I=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var j=d[k];if(!(j in I))break e;I=I[j]}d=d[d.length-1],k=I[d],y=y(k),y!=k&&y!=null&&e(I,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var I=[],k;for(k in y)Object.prototype.hasOwnProperty.call(y,k)&&I.push([k,y[k]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function l(d,y,I){return d.call.apply(d.bind,arguments)}function c(d,y,I){return c=l,c.apply(null,arguments)}function u(d,y){var I=Array.prototype.slice.call(arguments,1);return function(){var k=I.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function h(d,y){function I(){}I.prototype=y.prototype,d.Z=y.prototype,d.prototype=new I,d.prototype.constructor=d,d.Ob=function(k,j,H){for(var Se=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)Se[yt-2]=arguments[yt];return y.prototype[j].apply(k,Se)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function p(d){const y=d.length;if(y>0){const I=Array(y);for(let k=0;k<y;k++)I[k]=d[k];return I}return[]}function _(d,y){for(let k=1;k<arguments.length;k++){const j=arguments[k];var I=typeof j;if(I=I!="object"?I:j?Array.isArray(j)?"array":I:"null",I=="array"||I=="object"&&typeof j.length=="number"){I=d.length||0;const H=j.length||0;d.length=I+H;for(let Se=0;Se<H;Se++)d[I+Se]=j[Se]}else d.push(j)}}class g{constructor(y,I){this.i=y,this.j=I,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function b(d){o.setTimeout(()=>{throw d},0)}function E(){var d=T;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class w{constructor(){this.h=this.g=null}add(y,I){const k=S.get();k.set(y,I),this.h?this.h.next=k:this.g=k,this.h=k}}var S=new g(()=>new P,d=>d.reset());class P{constructor(){this.next=this.g=this.h=null}set(y,I){this.h=y,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let x,O=!1,T=new w,A=()=>{const d=Promise.resolve(void 0);x=()=>{d.then(R)}};function R(){for(var d;d=E();){try{d.h.call(d.g)}catch(I){b(I)}var y=S;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}O=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const I=()=>{};o.addEventListener("test",I,y),o.removeEventListener("test",I,y)}catch{}return d}();function D(d){return/^[\s\xa0]*$/.test(d)}function J(d,y){C.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}h(J,C),J.prototype.init=function(d,y){const I=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(I=="mouseover"?y=d.fromElement:I=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),ke=0;function We(d,y,I,k,j){this.listener=d,this.proxy=null,this.src=y,this.type=I,this.capture=!!k,this.ha=j,this.key=++ke,this.da=this.fa=!1}function W(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function q(d,y,I){for(const k in d)y.call(I,d[k],k,d)}function oe(d,y){for(const I in d)y.call(void 0,d[I],I,d)}function ge(d){const y={};for(const I in d)y[I]=d[I];return y}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(d,y){let I,k;for(let j=1;j<arguments.length;j++){k=arguments[j];for(I in k)d[I]=k[I];for(let H=0;H<pe.length;H++)I=pe[H],Object.prototype.hasOwnProperty.call(k,I)&&(d[I]=k[I])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,y,I,k,j){const H=d.toString();d=this.g[H],d||(d=this.g[H]=[],this.h++);const Se=ot(d,y,k,j);return Se>-1?(y=d[Se],I||(y.fa=!1)):(y=new We(y,this.src,H,!!k,j),y.fa=I,d.push(y)),y};function F(d,y){const I=y.type;if(I in d.g){var k=d.g[I],j=Array.prototype.indexOf.call(k,y,void 0),H;(H=j>=0)&&Array.prototype.splice.call(k,j,1),H&&(W(y),d.g[I].length==0&&(delete d.g[I],d.h--))}}function ot(d,y,I,k){for(let j=0;j<d.length;++j){const H=d[j];if(!H.da&&H.listener==y&&H.capture==!!I&&H.ha==k)return j}return-1}var et="closure_lm_"+(Math.random()*1e6|0),wn={};function sr(d,y,I,k,j){if(Array.isArray(y)){for(let H=0;H<y.length;H++)sr(d,y[H],I,k,j);return null}return I=je(I),d&&d[Le]?d.J(y,I,a(k)?!!k.capture:!1,j):ir(d,y,I,!1,k,j)}function ir(d,y,I,k,j,H){if(!y)throw Error("Invalid event type");const Se=a(j)?!!j.capture:!!j;let yt=Xe(d);if(yt||(d[et]=yt=new ve(d)),I=yt.add(y,I,k,Se,H),I.proxy)return I;if(k=pr(),I.proxy=k,k.src=d,k.listener=I,d.addEventListener)L||(j=Se),j===void 0&&(j=!1),d.addEventListener(y.toString(),k,j);else if(d.attachEvent)d.attachEvent(ce(y.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return I}function pr(){function d(I){return y.call(d.src,d.listener,I)}const y=Pe;return d}function $n(d,y,I,k,j){if(Array.isArray(y))for(var H=0;H<y.length;H++)$n(d,y[H],I,k,j);else k=a(k)?!!k.capture:!!k,I=je(I),d&&d[Le]?(d=d.i,H=String(y).toString(),H in d.g&&(y=d.g[H],I=ot(y,I,k,j),I>-1&&(W(y[I]),Array.prototype.splice.call(y,I,1),y.length==0&&(delete d.g[H],d.h--)))):d&&(d=Xe(d))&&(y=d.g[y.toString()],d=-1,y&&(d=ot(y,I,k,j)),(I=d>-1?y[d]:null)&&K(I))}function K(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Le])F(y.i,d);else{var I=d.type,k=d.proxy;y.removeEventListener?y.removeEventListener(I,k,d.capture):y.detachEvent?y.detachEvent(ce(I),k):y.addListener&&y.removeListener&&y.removeListener(k),(I=Xe(y))?(F(I,d),I.h==0&&(I.src=null,y[et]=null)):W(d)}}}function ce(d){return d in wn?wn[d]:wn[d]="on"+d}function Pe(d,y){if(d.da)d=!0;else{y=new J(y,this);const I=d.listener,k=d.ha||d.src;d.fa&&K(d),d=I.call(k,y)}return d}function Xe(d){return d=d[et],d instanceof ve?d:null}var xe="__closure_events_fn_"+(Math.random()*1e9>>>0);function je(d){return typeof d=="function"?d:(d[xe]||(d[xe]=function(y){return d.handleEvent(y)}),d[xe])}function be(){N.call(this),this.i=new ve(this),this.M=this,this.G=null}h(be,N),be.prototype[Le]=!0,be.prototype.removeEventListener=function(d,y,I,k){$n(this,d,y,I,k)};function Ne(d,y){var I,k=d.G;if(k)for(I=[];k;k=k.G)I.push(k);if(d=d.M,k=y.type||y,typeof y=="string")y=new C(y,d);else if(y instanceof C)y.target=y.target||d;else{var j=y;y=new C(k,d),Me(y,j)}j=!0;let H,Se;if(I)for(Se=I.length-1;Se>=0;Se--)H=y.g=I[Se],j=Ze(H,k,!0,y)&&j;if(H=y.g=d,j=Ze(H,k,!0,y)&&j,j=Ze(H,k,!1,y)&&j,I)for(Se=0;Se<I.length;Se++)H=y.g=I[Se],j=Ze(H,k,!1,y)&&j}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const I=d.g[y];for(let k=0;k<I.length;k++)W(I[k]);delete d.g[y],d.h--}}this.G=null},be.prototype.J=function(d,y,I,k){return this.i.add(String(d),y,!1,I,k)},be.prototype.K=function(d,y,I,k){return this.i.add(String(d),y,!0,I,k)};function Ze(d,y,I,k){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let j=!0;for(let H=0;H<y.length;++H){const Se=y[H];if(Se&&!Se.da&&Se.capture==I){const yt=Se.listener,Yn=Se.ha||Se.src;Se.fa&&F(d.i,Se),j=yt.call(Yn,k)!==!1&&j}}return j&&!k.defaultPrevented}function Pt(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=c(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(d,y||0)}function Q(d){d.g=Pt(()=>{d.g=null,d.i&&(d.i=!1,Q(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Ie extends N{constructor(y,I){super(),this.m=y,this.l=I,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Q(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Te(d){N.call(this),this.h=d,this.g={}}h(Te,N);var ye=[];function it(d){q(d.g,function(y,I){this.g.hasOwnProperty(I)&&K(y)},d),d.g={}}Te.prototype.N=function(){Te.Z.N.call(this),it(this)},Te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=o.JSON.stringify,Ue=o.JSON.parse,Je=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Et(){}function Kt(){}var Ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gr(){C.call(this,"d")}h(gr,C);function zr(){C.call(this,"c")}h(zr,C);var _n={},G=null;function $(){return G=G||new be}_n.Ia="serverreachability";function U(d){C.call(this,_n.Ia,d)}h(U,C);function Y(d){const y=$();Ne(y,new U(y))}_n.STAT_EVENT="statevent";function te(d,y){C.call(this,_n.STAT_EVENT,d),this.stat=y}h(te,C);function ne(d){const y=$();Ne(y,new te(y,d))}_n.Ja="timingevent";function ue(d,y){C.call(this,_n.Ja,d),this.size=y}h(ue,C);function me(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},y)}function X(){this.g=!0}X.prototype.ua=function(){this.g=!1};function le(d,y,I,k,j,H){d.info(function(){if(d.g)if(H){var Se="",yt=H.split("&");for(let Jt=0;Jt<yt.length;Jt++){var Yn=yt[Jt].split("=");if(Yn.length>1){const ar=Yn[0];Yn=Yn[1];const si=ar.split("_");Se=si.length>=2&&si[1]=="type"?Se+(ar+"="+Yn+"&"):Se+(ar+"=redacted&")}}}else Se=null;else Se=H;return"XMLHTTP REQ ("+k+") [attempt "+j+"]: "+y+`
`+I+`
`+Se})}function ie(d,y,I,k,j,H,Se){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+j+"]: "+y+`
`+I+`
`+H+" "+Se})}function de(d,y,I,k){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ae(d,I)+(k?" "+k:"")})}function fe(d,y){d.info(function(){return"TIMEOUT: "+y})}X.prototype.info=function(){};function Ae(d,y){if(!d.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(d=0;d<H.length;d++)if(Array.isArray(H[d])){var I=H[d];if(!(I.length<2)){var k=I[1];if(Array.isArray(k)&&!(k.length<1)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(let Se=1;Se<k.length;Se++)k[Se]=""}}}}return ae(H)}catch{return y}}var _e={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},at;function Bn(){}h(Bn,Et),Bn.prototype.g=function(){return new XMLHttpRequest},at=new Bn;function Kn(d){return encodeURIComponent(String(d))}function bt(d){var y=1;d=d.split(":");const I=[];for(;y>0&&d.length;)I.push(d.shift()),y--;return d.length&&I.push(d.join(":")),I}function st(d,y,I,k){this.j=d,this.i=y,this.l=I,this.S=k||1,this.V=new Te(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}var yr={},Ot={};function Gt(d,y,I){d.M=1,d.A=gt(In(y)),d.u=I,d.R=!0,$t(d,null)}function $t(d,y){d.F=Date.now(),xt(d),d.B=In(d.A);var I=d.B,k=d.S;Array.isArray(k)||(k=[String(k)]),HS(I.i,"t",k),d.C=0,I=d.j.L,d.h=new Ke,d.g=uI(d.j,I?y:null,!d.u),d.P>0&&(d.O=new Ie(c(d.Y,d,d.g),d.P)),y=d.V,I=d.g,k=d.ba;var j="readystatechange";Array.isArray(j)||(j&&(ye[0]=j.toString()),j=ye);for(let H=0;H<j.length;H++){const Se=sr(I,j[H],k||y.handleEvent,!1,y.h||y);if(!Se)break;y.g[Se.key]=Se}y=d.J?ge(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Y(),le(d.i,d.v,d.B,d.l,d.S,d.u)}st.prototype.ba=function(d){d=d.target;const y=this.O;y&&fo(d)==3?y.j():this.Y(d)},st.prototype.Y=function(d){try{if(d==this.g)e:{const yt=fo(this.g),Yn=this.g.ya(),Jt=this.g.ca();if(!(yt<3)&&(yt!=3||this.g&&(this.h.h||this.g.la()||ZS(this.g)))){this.K||yt!=4||Yn==7||(Yn==8||Jt<=0?Y(3):Y(2)),fn(this);var y=this.g.ca();this.X=y;var I=ut(this);if(this.o=y==200,ie(this.i,this.v,this.B,this.l,this.S,yt,y),this.o){if(this.U&&!this.L){t:{if(this.g){var k,j=this.g;if((k=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(k)){var H=k;break t}}H=null}if(d=H)de(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ve(this,d);else{this.o=!1,this.m=3,ne(12),zn(this),Yt(this);break e}}if(this.R){d=!0;let ar;for(;!this.K&&this.C<I.length;)if(ar=$e(this,I),ar==Ot){yt==4&&(this.m=4,ne(14),d=!1),de(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==yr){this.m=4,ne(15),de(this.i,this.l,I,"[Invalid Chunk]"),d=!1;break}else de(this.i,this.l,ar,null),Ve(this,ar);if(St(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||I.length!=0||this.h.h||(this.m=1,ne(16),d=!1),this.o=this.o&&d,!d)de(this.i,this.l,I,"[Invalid Chunked Response]"),zn(this),Yt(this);else if(I.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),ov(Se),Se.P=!0,ne(11))}}else de(this.i,this.l,I,null),Ve(this,I);yt==4&&zn(this),this.o&&!this.K&&(yt==4?oI(this.j,this):(this.o=!1,xt(this)))}else zV(this.g),y==400&&I.indexOf("Unknown SID")>0?(this.m=3,ne(12)):(this.m=0,ne(13)),zn(this),Yt(this)}}}catch{}finally{}};function ut(d){if(!St(d))return d.g.la();const y=ZS(d.g);if(y==="")return"";let I="";const k=y.length,j=fo(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return zn(d),Yt(d),"";d.h.i=new o.TextDecoder}for(let H=0;H<k;H++)d.h.h=!0,I+=d.h.i.decode(y[H],{stream:!(j&&H==k-1)});return y.length=0,d.h.g+=I,d.C=0,d.h.g}function St(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function $e(d,y){var I=d.C,k=y.indexOf(`
`,I);return k==-1?Ot:(I=Number(y.substring(I,k)),isNaN(I)?yr:(k+=1,k+I>y.length?Ot:(y=y.slice(k,k+I),d.C=k+I,y)))}st.prototype.cancel=function(){this.K=!0,zn(this)};function xt(d){d.T=Date.now()+d.H,En(d,d.H)}function En(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=me(c(d.aa,d),y)}function fn(d){d.D&&(o.clearTimeout(d.D),d.D=null)}st.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(fe(this.i,this.B),this.M!=2&&(Y(),ne(17)),zn(this),this.m=2,Yt(this)):En(this,this.T-d)};function Yt(d){d.j.I==0||d.K||oI(d.j,d)}function zn(d){fn(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,it(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Ve(d,y){try{var I=d.j;if(I.I!=0&&(I.g==d||lt(I.h,d))){if(!d.L&&lt(I.h,d)&&I.I==3){try{var k=I.Ba.g.parse(y)}catch{k=null}if(Array.isArray(k)&&k.length==3){var j=k;if(j[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<d.F)Yf(I),Gf(I);else break e;iv(I),ne(18)}}else I.xa=j[1],0<I.xa-I.K&&j[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=me(c(I.Va,I),6e3));Ft(I.h)<=1&&I.ta&&(I.ta=void 0)}else Ua(I,11)}else if((d.L||I.g==d)&&Yf(I),!D(y))for(j=I.Ba.g.parse(y),y=0;y<j.length;y++){let Jt=j[y];const ar=Jt[0];if(!(ar<=I.K))if(I.K=ar,Jt=Jt[1],I.I==2)if(Jt[0]=="c"){I.M=Jt[1],I.ba=Jt[2];const si=Jt[3];si!=null&&(I.ka=si,I.j.info("VER="+I.ka));const $a=Jt[4];$a!=null&&(I.za=$a,I.j.info("SVER="+I.za));const mo=Jt[5];mo!=null&&typeof mo=="number"&&mo>0&&(k=1.5*mo,I.O=k,I.j.info("backChannelRequestTimeoutMs_="+k)),k=I;const po=d.g;if(po){const Xf=po.g?po.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xf){var H=k.h;H.g||Xf.indexOf("spdy")==-1&&Xf.indexOf("quic")==-1&&Xf.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(kn(H,H.h),H.h=null))}if(k.G){const av=po.g?po.g.getResponseHeader("X-HTTP-Session-Id"):null;av&&(k.wa=av,Rt(k.J,k.G,av))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-d.F,I.j.info("Handshake RTT: "+I.T+"ms")),k=I;var Se=d;if(k.na=cI(k,k.L?k.ba:null,k.W),Se.L){Gn(k.h,Se);var yt=Se,Yn=k.O;Yn&&(yt.H=Yn),yt.D&&(fn(yt),xt(yt)),k.g=Se}else sI(k);I.i.length>0&&Qf(I)}else Jt[0]!="stop"&&Jt[0]!="close"||Ua(I,7);else I.I==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?Ua(I,7):sv(I):Jt[0]!="noop"&&I.l&&I.l.qa(Jt),I.A=0)}}Y(4)}catch{}}var ht=class{constructor(d,y){this.g=d,this.map=y}};function ft(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ut(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ft(d){return d.h?1:d.g?d.g.size:0}function lt(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function kn(d,y){d.g?d.g.add(y):d.h=y}function Gn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}ft.prototype.cancel=function(){if(this.i=or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function or(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const I of d.g.values())y=y.concat(I.G);return y}return p(d.i)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bn(d,y){if(d){d=d.split("&");for(let I=0;I<d.length;I++){const k=d[I].indexOf("=");let j,H=null;k>=0?(j=d[I].substring(0,k),H=d[I].substring(k+1)):j=d[I],y(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Sn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Sn?(this.l=d.l,Or(this,d.j),this.o=d.o,this.g=d.g,Qn(this,d.u),this.h=d.h,Mn(this,KS(d.i)),this.m=d.m):d&&(y=String(d).match(mt))?(this.l=!1,Or(this,y[1]||"",!0),this.o=Wr(y[2]||""),this.g=Wr(y[3]||"",!0),Qn(this,y[4]),this.h=Wr(y[5]||"",!0),Mn(this,y[6]||"",!0),this.m=Wr(y[7]||"")):(this.l=!1,this.i=new _d(null,this.l))}Sn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(wd(y,BS,!0),":");var I=this.g;return(I||y=="file")&&(d.push("//"),(y=this.o)&&d.push(wd(y,BS,!0),"@"),d.push(Kn(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&d.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&d.push("/"),d.push(wd(I,I.charAt(0)=="/"?OV:DV,!0))),(I=this.i.toString())&&d.push("?",I),(I=this.m)&&d.push("#",wd(I,MV)),d.join("")},Sn.prototype.resolve=function(d){const y=In(this);let I=!!d.j;I?Or(y,d.j):I=!!d.o,I?y.o=d.o:I=!!d.g,I?y.g=d.g:I=d.u!=null;var k=d.h;if(I)Qn(y,d.u);else if(I=!!d.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var j=y.h.lastIndexOf("/");j!=-1&&(k=y.h.slice(0,j+1)+k)}if(j=k,j==".."||j==".")k="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){k=j.lastIndexOf("/",0)==0,j=j.split("/");const H=[];for(let Se=0;Se<j.length;){const yt=j[Se++];yt=="."?k&&Se==j.length&&H.push(""):yt==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),k&&Se==j.length&&H.push("")):(H.push(yt),k=!0)}k=H.join("/")}else k=j}return I?y.h=k:I=d.i.toString()!=="",I?Mn(y,KS(d.i)):I=!!d.m,I&&(y.m=d.m),y};function In(d){return new Sn(d)}function Or(d,y,I){d.j=I?Wr(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Qn(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Mn(d,y,I){y instanceof _d?(d.i=y,VV(d.i,d.l)):(I||(y=wd(y,LV)),d.i=new _d(y,d.l))}function Rt(d,y,I){d.i.set(y,I)}function gt(d){return Rt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Wr(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function wd(d,y,I){return typeof d=="string"?(d=encodeURI(d).replace(y,NV),I&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function NV(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var BS=/[#\/\?@]/g,DV=/[#\?:]/g,OV=/[#\?]/g,LV=/[#\?@]/g,MV=/#/g;function _d(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function ja(d){d.g||(d.g=new Map,d.h=0,d.i&&bn(d.i,function(y,I){d.add(decodeURIComponent(y.replace(/\+/g," ")),I)}))}t=_d.prototype,t.add=function(d,y){ja(this),this.i=null,d=oc(this,d);let I=this.g.get(d);return I||this.g.set(d,I=[]),I.push(y),this.h+=1,this};function zS(d,y){ja(d),y=oc(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function WS(d,y){return ja(d),y=oc(d,y),d.g.has(y)}t.forEach=function(d,y){ja(this),this.g.forEach(function(I,k){I.forEach(function(j){d.call(y,j,k,this)},this)},this)};function qS(d,y){ja(d);let I=[];if(typeof y=="string")WS(d,y)&&(I=I.concat(d.g.get(oc(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)I=I.concat(d[y]);return I}t.set=function(d,y){return ja(this),this.i=null,d=oc(this,d),WS(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=qS(this,d),d.length>0?String(d[0]):y):y};function HS(d,y,I){zS(d,y),I.length>0&&(d.i=null,d.g.set(oc(d,y),p(I)),d.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let k=0;k<y.length;k++){var I=y[k];const j=Kn(I);I=qS(this,I);for(let H=0;H<I.length;H++){let Se=j;I[H]!==""&&(Se+="="+Kn(I[H])),d.push(Se)}}return this.i=d.join("&")};function KS(d){const y=new _d;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function oc(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function VV(d,y){y&&!d.j&&(ja(d),d.i=null,d.g.forEach(function(I,k){const j=k.toLowerCase();k!=j&&(zS(this,k),HS(this,j,I))},d)),d.j=y}function FV(d,y){const I=new X;if(o.Image){const k=new Image;k.onload=u(ho,I,"TestLoadImage: loaded",!0,y,k),k.onerror=u(ho,I,"TestLoadImage: error",!1,y,k),k.onabort=u(ho,I,"TestLoadImage: abort",!1,y,k),k.ontimeout=u(ho,I,"TestLoadImage: timeout",!1,y,k),o.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else y(!1)}function jV(d,y){const I=new X,k=new AbortController,j=setTimeout(()=>{k.abort(),ho(I,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:k.signal}).then(H=>{clearTimeout(j),H.ok?ho(I,"TestPingServer: ok",!0,y):ho(I,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),ho(I,"TestPingServer: error",!1,y)})}function ho(d,y,I,k,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),k(I)}catch{}}function UV(){this.g=new Je}function nv(d){this.i=d.Sb||null,this.h=d.ab||!1}h(nv,Et),nv.prototype.g=function(){return new Hf(this.i,this.h)};function Hf(d,y){be.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Hf,be),t=Hf.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,bd(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ed(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bd(this)),this.g&&(this.readyState=3,bd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;GS(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function GS(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ed(this):bd(this),this.readyState==3&&GS(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Ed(this))},t.Na=function(d){this.g&&(this.response=d,Ed(this))},t.ga=function(){this.g&&Ed(this)};function Ed(d){d.readyState=4,d.l=null,d.j=null,d.B=null,bd(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var I=y.next();!I.done;)I=I.value,d.push(I[0]+": "+I[1]),I=y.next();return d.join(`\r
`)};function bd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Hf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function QS(d){let y="";return q(d,function(I,k){y+=k,y+=":",y+=I,y+=`\r
`}),y}function rv(d,y,I){e:{for(k in I){var k=!1;break e}k=!0}k||(I=QS(I),typeof d=="string"?I!=null&&Kn(I):Rt(d,y,I))}function Nn(d){be.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Nn,be);var $V=/^https?$/i,BV=["POST","PUT"];t=Nn.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,I,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():at.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(H){YS(this,H);return}if(d=I||"",I=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var j in k)I.set(j,k[j]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const H of k.keys())I.set(H,k.get(H));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(I.keys()).find(H=>H.toLowerCase()=="content-type"),j=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(BV,y,void 0)>=0)||k||j||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,Se]of I)this.g.setRequestHeader(H,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(H){YS(this,H)}};function YS(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,JS(d),Kf(d)}function JS(d){d.A||(d.A=!0,Ne(d,"complete"),Ne(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ne(this,"complete"),Ne(this,"abort"),Kf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kf(this,!0)),Nn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?XS(this):this.Xa())},t.Xa=function(){XS(this)};function XS(d){if(d.h&&typeof i<"u"){if(d.v&&fo(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ne(d,"readystatechange"),fo(d)==4){d.h=!1;try{const H=d.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var I;if(!(I=y)){var k;if(k=H===0){let Se=String(d.D).match(mt)[1]||null;!Se&&o.self&&o.self.location&&(Se=o.self.location.protocol.slice(0,-1)),k=!$V.test(Se?Se.toLowerCase():"")}I=k}if(I)Ne(d,"complete"),Ne(d,"success");else{d.o=6;try{var j=fo(d)>2?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.ca()+"]",JS(d)}}finally{Kf(d)}}}}function Kf(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const I=d.g;d.g=null,y||Ne(d,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function fo(d){return d.g?d.g.readyState:0}t.ca=function(){try{return fo(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Ue(y)}};function ZS(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function zV(d){const y={};d=(d.g&&fo(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(D(d[k]))continue;var I=bt(d[k]);const j=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const H=y[j]||[];y[j]=H,H.push(I)}oe(y,function(k){return k.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sd(d,y,I){return I&&I.internalChannelParams&&I.internalChannelParams[d]||y}function eI(d){this.za=0,this.i=[],this.j=new X,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sd("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sd("baseRetryDelayMs",5e3,d),this.Za=Sd("retryDelaySeedMs",1e4,d),this.Ta=Sd("forwardChannelMaxRetries",2,d),this.va=Sd("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ft(d&&d.concurrentRequestLimit),this.Ba=new UV,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=eI.prototype,t.ka=8,t.I=1,t.connect=function(d,y,I,k){ne(0),this.W=d,this.H=y||{},I&&k!==void 0&&(this.H.OSID=I,this.H.OAID=k),this.F=this.X,this.J=cI(this,null,this.W),Qf(this)};function sv(d){if(tI(d),d.I==3){var y=d.V++,I=In(d.J);if(Rt(I,"SID",d.M),Rt(I,"RID",y),Rt(I,"TYPE","terminate"),Id(d,I),y=new st(d,d.j,y),y.M=2,y.A=gt(In(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=y.A,I=!0),I||(y.g=uI(y.j,null),y.g.ea(y.A)),y.F=Date.now(),xt(y)}lI(d)}function Gf(d){d.g&&(ov(d),d.g.cancel(),d.g=null)}function tI(d){Gf(d),d.v&&(o.clearTimeout(d.v),d.v=null),Yf(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Qf(d){if(!Ut(d.h)&&!d.m){d.m=!0;var y=d.Ea;x||A(),O||(x(),O=!0),T.add(y,d),d.D=0}}function WV(d,y){return Ft(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=me(c(d.Ea,d,y),aI(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const j=new st(this,this.j,d);let H=this.o;if(this.U&&(H?(H=ge(H),Me(H,this.U)):H=this.U),this.u!==null||this.R||(j.J=H,H=null),this.S)e:{for(var y=0,I=0;I<this.i.length;I++){t:{var k=this.i[I];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(y+=k,y>4096){y=I;break e}if(y===4096||I===this.i.length-1){y=I+1;break e}}y=1e3}else y=1e3;y=rI(this,j,y),I=In(this.J),Rt(I,"RID",d),Rt(I,"CVER",22),this.G&&Rt(I,"X-HTTP-Session-Id",this.G),Id(this,I),H&&(this.R?y="headers="+Kn(QS(H))+"&"+y:this.u&&rv(I,this.u,H)),kn(this.h,j),this.Ra&&Rt(I,"TYPE","init"),this.S?(Rt(I,"$req",y),Rt(I,"SID","null"),j.U=!0,Gt(j,I,null)):Gt(j,I,y),this.I=2}}else this.I==3&&(d?nI(this,d):this.i.length==0||Ut(this.h)||nI(this))};function nI(d,y){var I;y?I=y.l:I=d.V++;const k=In(d.J);Rt(k,"SID",d.M),Rt(k,"RID",I),Rt(k,"AID",d.K),Id(d,k),d.u&&d.o&&rv(k,d.u,d.o),I=new st(d,d.j,I,d.D+1),d.u===null&&(I.J=d.o),y&&(d.i=y.G.concat(d.i)),y=rI(d,I,1e3),I.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),kn(d.h,I),Gt(I,k,y)}function Id(d,y){d.H&&q(d.H,function(I,k){Rt(y,k,I)}),d.l&&q({},function(I,k){Rt(y,k,I)})}function rI(d,y,I){I=Math.min(d.i.length,I);const k=d.l?c(d.l.Ka,d.l,d):null;e:{var j=d.i;let yt=-1;for(;;){const Yn=["count="+I];yt==-1?I>0?(yt=j[0].g,Yn.push("ofs="+yt)):yt=0:Yn.push("ofs="+yt);let Jt=!0;for(let ar=0;ar<I;ar++){var H=j[ar].g;const si=j[ar].map;if(H-=yt,H<0)yt=Math.max(0,j[ar].g-100),Jt=!1;else try{H="req"+H+"_"||"";try{var Se=si instanceof Map?si:Object.entries(si);for(const[$a,mo]of Se){let po=mo;a(mo)&&(po=ae(mo)),Yn.push(H+$a+"="+encodeURIComponent(po))}}catch($a){throw Yn.push(H+"type="+encodeURIComponent("_badmap")),$a}}catch{k&&k(si)}}if(Jt){Se=Yn.join("&");break e}}Se=void 0}return d=d.i.splice(0,I),y.G=d,Se}function sI(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;x||A(),O||(x(),O=!0),T.add(y,d),d.A=0}}function iv(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=me(c(d.Da,d),aI(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,iI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=me(c(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ne(10),Gf(this),iI(this))};function ov(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function iI(d){d.g=new st(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=In(d.na);Rt(y,"RID","rpc"),Rt(y,"SID",d.M),Rt(y,"AID",d.K),Rt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&Rt(y,"TO",d.ia),Rt(y,"TYPE","xmlhttp"),Id(d,y),d.u&&d.o&&rv(y,d.u,d.o),d.O&&(d.g.H=d.O);var I=d.g;d=d.ba,I.M=1,I.A=gt(In(y)),I.u=null,I.R=!0,$t(I,d)}t.Va=function(){this.C!=null&&(this.C=null,Gf(this),iv(this),ne(19))};function Yf(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function oI(d,y){var I=null;if(d.g==y){Yf(d),ov(d),d.g=null;var k=2}else if(lt(d.h,y))I=y.G,Gn(d.h,y),k=1;else return;if(d.I!=0){if(y.o)if(k==1){I=y.u?y.u.length:0,y=Date.now()-y.F;var j=d.D;k=$(),Ne(k,new ue(k,I)),Qf(d)}else sI(d);else if(j=y.m,j==3||j==0&&y.X>0||!(k==1&&WV(d,y)||k==2&&iv(d)))switch(I&&I.length>0&&(y=d.h,y.i=y.i.concat(I)),j){case 1:Ua(d,5);break;case 4:Ua(d,10);break;case 3:Ua(d,6);break;default:Ua(d,2)}}}function aI(d,y){let I=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(I*=2),I*y}function Ua(d,y){if(d.j.info("Error code "+y),y==2){var I=c(d.bb,d),k=d.Ua;const j=!k;k=new Sn(k||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Or(k,"https"),gt(k),j?FV(k.toString(),I):jV(k.toString(),I)}else ne(2);d.I=0,d.l&&d.l.pa(y),lI(d),tI(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function lI(d){if(d.I=0,d.ja=[],d.l){const y=or(d.h);(y.length!=0||d.i.length!=0)&&(_(d.ja,y),_(d.ja,d.i),d.h.i.length=0,p(d.i),d.i.length=0),d.l.oa()}}function cI(d,y,I){var k=I instanceof Sn?In(I):new Sn(I);if(k.g!="")y&&(k.g=y+"."+k.g),Qn(k,k.u);else{var j=o.location;k=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;const H=new Sn(null);k&&Or(H,k),y&&(H.g=y),j&&Qn(H,j),I&&(H.h=I),k=H}return I=d.G,y=d.wa,I&&y&&Rt(k,I,y),Rt(k,"VER",d.ka),Id(d,k),k}function uI(d,y,I){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new Nn(new nv({ab:I})):new Nn(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dI(){}t=dI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jf(){}Jf.prototype.g=function(d,y){return new as(d,y)};function as(d,y){be.call(this),this.g=new eI(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!D(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new ac(this)}h(as,be),as.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},as.prototype.close=function(){sv(this.g)},as.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var I={};I.__data__=d,d=I}else this.v&&(I={},I.__data__=ae(d),d=I);y.i.push(new ht(y.Ya++,d)),y.I==3&&Qf(y)},as.prototype.N=function(){this.g.l=null,delete this.j,sv(this.g),delete this.g,as.Z.N.call(this)};function hI(d){gr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const I in y){d=I;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}h(hI,gr);function fI(){zr.call(this),this.status=1}h(fI,zr);function ac(d){this.g=d}h(ac,dI),ac.prototype.ra=function(){Ne(this.g,"a")},ac.prototype.qa=function(d){Ne(this.g,new hI(d))},ac.prototype.pa=function(d){Ne(this.g,new fI)},ac.prototype.oa=function(){Ne(this.g,"b")},Jf.prototype.createWebChannel=Jf.prototype.g,as.prototype.send=as.prototype.o,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,t2=function(){return new Jf},e2=function(){return $()},ZD=_n,G_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,ap=_e,tt.COMPLETE="complete",XD=tt,Kt.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",be.prototype.listen=be.prototype.J,Yd=Kt,Nn.prototype.listenOnce=Nn.prototype.K,Nn.prototype.getLastError=Nn.prototype.Ha,Nn.prototype.getLastErrorCode=Nn.prototype.ya,Nn.prototype.getStatus=Nn.prototype.ca,Nn.prototype.getResponseJson=Nn.prototype.La,Nn.prototype.getResponseText=Nn.prototype.la,Nn.prototype.send=Nn.prototype.ea,Nn.prototype.setWithCredentials=Nn.prototype.Fa,JD=Nn}).apply(typeof Im<"u"?Im:typeof self<"u"?self:typeof window<"u"?window:{});const tA="@firebase/firestore",nA="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new vy("@firebase/firestore");function Sc(){return va.logLevel}function n2(t){va.setLogLevel(t)}function re(t,...e){if(va.logLevel<=Ct.DEBUG){const n=e.map(mb);va.debug(`Firestore (${id}): ${t}`,...n)}}function Fn(t,...e){if(va.logLevel<=Ct.ERROR){const n=e.map(mb);va.error(`Firestore (${id}): ${t}`,...n)}}function ws(t,...e){if(va.logLevel<=Ct.WARN){const n=e.map(mb);va.warn(`Firestore (${id}): ${t}`,...n)}}function mb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,r2(t,r,n)}function r2(t,e,n){let r=`FIRESTORE (${id}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fn(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||r2(e,s,r)}function n7(t,e){t||Oe(57014,e)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hr.UNAUTHENTICATED))}shutdown(){}}class r7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class s7{constructor(e){this.t=e,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new s2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new hr(e)}}class i7{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o7{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new i7(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a7{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Q_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class l7{getToken(){return Promise.resolve(new Q_(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=c7(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function Y_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Zv(s)===Zv(i)?rt(s,i):Zv(s)?1:-1}return rt(t.length,e.length)}const u7=55296,d7=57343;function Zv(t){const e=t.charCodeAt(0);return e>=u7&&e<=d7}function xu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function o2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__name__";class ai{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ai.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ai?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ai.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return rt(e.length,n.length)}static compareSegments(e,n){const r=ai.isNumericId(e),s=ai.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ai.extractNumericId(e).compare(ai.extractNumericId(n)):Y_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return la.fromString(e.substring(4,e.length-2))}}class It extends ai{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new It(n)}static emptyPath(){return new It([])}}const h7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends ai{construct(e,n,r){return new ln(e,n,r)}static isValidIdentifier(e){return h7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J_}static keyField(){return new ln([J_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(It.fromString(e))}static fromName(e){return new we(It.fromString(e).popFirst(5))}static empty(){return new we(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a2(t,e,n,r){if(e===!0&&r===!0)throw new ee(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rA(t){if(!we.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sA(t){if(we.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function l2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Iy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe(12329,{type:typeof t})}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iy(t);throw new ee(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function c2(t,e){if(e<=0)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t,e){const n={typeString:t};return e&&(n.value=e),n}function tc(t,e){if(!l2(t))throw new ee(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ee(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=-62135596800,oA=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*oA);return new Vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iA)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oA}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tc(e,Vt._jsonSchema))return new Vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:Hn("string",Vt._jsonSchemaVersion),seconds:Hn("number"),nanoseconds:Hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Vt(0,0))}static max(){return new Ge(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;class Pu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function X_(t){return t.fields.find(e=>e.kind===2)}function Ka(t){return t.fields.filter(e=>e.kind!==2)}function f7(t,e){let n=rt(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=m7(t.fields[r],e.fields[r]),n!==0)return n;return rt(t.fields.length,e.fields.length)}Pu.UNKNOWN_ID=-1;class wl{constructor(e,n){this.fieldPath=e,this.kind=n}}function m7(t,e){const n=ln.comparator(t.fieldPath,e.fieldPath);return n!==0?n:rt(t.kind,e.kind)}class Ru{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ru(0,_s.min())}}function u2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ge.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new _s(s,we.empty(),e)}function d2(t){return new _s(t.readTime,t.key,Au)}class _s{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _s(Ge.min(),we.empty(),Au)}static max(){return new _s(Ge.max(),we.empty(),Au)}}function gb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==h2)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="SimpleDb";class Ty{static open(e,n,r,s){try{return new Ty(n,e.transaction(s,r))}catch(i){throw new mh(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new mr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new mh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=yb(r.target.error);this.S.reject(new mh(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(cs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new g7(n)}}class Si{static delete(e){return re(cs,"Removing database:",e),Ya(GN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!nb())return!1;if(Si.F())return!0;const e=tr(),n=Si.M(e),r=0<n&&n<10,s=m2(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Si.M(tr())===12.2&&Fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(cs,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new mh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ee(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ee(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mh(e,o))},s.onupgradeneeded=i=>{re(cs,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{re(cs,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Ty.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(re(cs,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function m2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class p7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ya(this.U.delete())}}class mh extends ee{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Na(t){return t.name==="IndexedDbTransactionError"}class g7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(re(cs,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(re(cs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ya(r)}add(e){return re(cs,"ADD",this.store.name,e,e),Ya(this.store.add(e))}get(e){return Ya(this.store.get(e)).next(n=>(n===void 0&&(n=null),re(cs,"GET",this.store.name,e,n),n))}delete(e){return re(cs,"DELETE",this.store.name,e),Ya(this.store.delete(e))}count(){return re(cs,"COUNT",this.store.name),Ya(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){re(cs,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=yb(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new p7(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const u=c.catch(h=>(l.done(),M.reject(h)));r.push(u)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ya(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=yb(r.target.error);n(s)}})}let aA=!1;function yb(t){const e=Si.M(tr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aA||(aA=!0,setTimeout(()=>{throw r},0)),r}}return t}const ph="IndexBackfiller";class y7{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(ph,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();re(ph,`Documents written: ${n}`)}catch(n){Na(n)?re(ph,"Ignoring IndexedDB error during index backfill: ",n):await ka(n)}await this.re(6e4)})}}class v7{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return re(ph,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(re(ph,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=d2(i);gb(o,r)>0&&(r=o)}),new _s(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=-1;function Cf(t){return t==null}function Jh(t){return t===0&&1/t==-1/0}function p2(t){return typeof t=="number"&&Number.isInteger(t)&&!Jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="";function kr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lA(e)),e=w7(t.get(n),e);return lA(e)}function w7(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case mg:n+="";break;default:n+=i}}return n}function lA(t){return t+mg+""}function pi(t){const e=t.length;if(ze(e>=2,64408,{path:t}),e===2)return ze(t.charAt(0)===mg&&t.charAt(1)==="",56145,{path:t}),It.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(mg,i);switch((o<0||o>n)&&Oe(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Oe(61167,{path:t})}i=o+2}return new It(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="remoteDocuments",kf="owner",cc="owner",Xh="mutationQueues",_7="userId",js="mutations",cA="batchId",cl="userMutationsIndex",uA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t,e){return[t,kr(e)]}function g2(t,e,n){return[t,kr(e),n]}const E7={},Cu="documentMutations",pg="remoteDocumentsV14",b7=["prefixPath","collectionGroup","readTime","documentId"],cp="documentKeyIndex",S7=["prefixPath","collectionGroup","documentId"],y2="collectionGroupIndex",I7=["collectionGroup","readTime","prefixPath","documentId"],Zh="remoteDocumentGlobal",Z_="remoteDocumentGlobalKey",ku="targets",v2="queryTargetsIndex",T7=["canonicalId","targetId"],Nu="targetDocuments",x7=["targetId","path"],vb="documentTargetsIndex",A7=["path","targetId"],gg="targetGlobalKey",_l="targetGlobal",ef="collectionParents",P7=["collectionId","parent"],Du="clientMetadata",R7="clientId",xy="bundles",C7="bundleId",Ay="namedQueries",k7="name",wb="indexConfiguration",N7="indexId",e0="collectionGroupIndex",D7="collectionGroup",gh="indexState",O7=["indexId","uid"],w2="sequenceNumberIndex",L7=["uid","sequenceNumber"],yh="indexEntries",M7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_2="documentKeyIndex",V7=["indexId","uid","orderedDocumentKey"],Py="documentOverlays",F7=["userId","collectionPath","documentId"],t0="collectionPathOverlayIndex",j7=["userId","collectionPath","largestBatchId"],E2="collectionGroupOverlayIndex",U7=["userId","collectionGroup","largestBatchId"],_b="globals",$7="name",b2=[Xh,js,Cu,Ga,ku,kf,_l,Nu,Du,Zh,ef,xy,Ay],B7=[...b2,Py],S2=[Xh,js,Cu,pg,ku,kf,_l,Nu,Du,Zh,ef,xy,Ay,Py],I2=S2,Eb=[...I2,wb,gh,yh],z7=Eb,T2=[...Eb,_b],W7=T2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends f2{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function rr(t,e){const n=Ee(t);return Si.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x2(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function A2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){this.comparator=e,this.root=n||wr.EMPTY}insert(e,n){return new rn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tm(this.root,e,this.comparator,!0)}}class Tm{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wr.RED,this.left=s??wr.EMPTY,this.right=i??wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1;wr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new wr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hA(this.data.getIterator())}getIteratorFrom(e){return new hA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class hA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uc(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Zr([])}unionWith(e){let n=new Ht(ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new P2("Invalid base64 string: "+i):i}}(e);return new Pn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const H7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=H7.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(t.seconds),nanos:pn(t.nanos)}}function pn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function so(t){return typeof t=="string"?Pn.fromBase64String(t):Pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="server_timestamp",C2="__type__",k2="__previous_value__",N2="__local_write_time__";function Ry(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[C2])==null?void 0:r.stringValue)===R2}function Cy(t){const e=t.mapValue.fields[k2];return Ry(e)?Cy(e):e}function tf(t){const e=ro(t.mapValue.fields[N2].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,n,r,s,i,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const nf="(default)";class wa{constructor(e,n){this.projectId=e,this.database=n||nf}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="__type__",D2="__max__",Go={mapValue:{fields:{__type__:{stringValue:D2}}}},Sb="__vector__",Ou="value",up={nullValue:"NULL_VALUE"};function _a(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ry(t)?4:O2(t)?9007199254740991:ky(t)?10:11:Oe(28295,{value:t})}function Pi(t,e){if(t===e)return!0;const n=_a(t);if(n!==_a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tf(t).isEqual(tf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ro(s.timestampValue),a=ro(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return so(s.bytesValue).isEqual(so(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return pn(s.geoPointValue.latitude)===pn(i.geoPointValue.latitude)&&pn(s.geoPointValue.longitude)===pn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return pn(s.integerValue)===pn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=pn(s.doubleValue),a=pn(i.doubleValue);return o===a?Jh(o)===Jh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xu(t.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(dA(o)!==dA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pi(o[l],a[l])))return!1;return!0}(t,e);default:return Oe(52216,{left:t})}}function rf(t,e){return(t.values||[]).find(n=>Pi(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;const n=_a(t),r=_a(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=pn(i.integerValue||i.doubleValue),l=pn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return fA(t.timestampValue,e.timestampValue);case 4:return fA(tf(t),tf(e));case 5:return Y_(t.stringValue,e.stringValue);case 6:return function(i,o){const a=so(i),l=so(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=rt(a[c],l[c]);if(u!==0)return u}return rt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=rt(pn(i.latitude),pn(o.latitude));return a!==0?a:rt(pn(i.longitude),pn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mA(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,p,_,g;const a=i.fields||{},l=o.fields||{},c=(f=a[Ou])==null?void 0:f.arrayValue,u=(p=l[Ou])==null?void 0:p.arrayValue,h=rt(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((g=u==null?void 0:u.values)==null?void 0:g.length)||0);return h!==0?h:mA(c,u)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Go.mapValue&&o===Go.mapValue)return 0;if(i===Go.mapValue)return 1;if(o===Go.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=Y_(l[h],u[h]);if(f!==0)return f;const p=Ea(a[l[h]],c[u[h]]);if(p!==0)return p}return rt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Oe(23264,{he:n})}}function fA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=ro(t),r=ro(e),s=rt(n.seconds,r.seconds);return s!==0?s:rt(n.nanos,r.nanos)}function mA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ea(n[s],r[s]);if(i)return i}return rt(n.length,r.length)}function Lu(t){return r0(t)}function r0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ro(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return so(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=r0(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${r0(n.fields[o])}`;return s+"}"}(t.mapValue):Oe(61005,{value:t})}function dp(t){switch(_a(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cy(t);return e?16+dp(e):16;case 5:return 2*t.stringValue.length;case 6:return so(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+dp(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Da(r.fields,(i,o)=>{s+=i.length+dp(o)}),s}(t.mapValue);default:throw Oe(13486,{value:t})}}function Dl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function s0(t){return!!t&&"integerValue"in t}function sf(t){return!!t&&"arrayValue"in t}function pA(t){return!!t&&"nullValue"in t}function gA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hp(t){return!!t&&"mapValue"in t}function ky(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bb])==null?void 0:r.stringValue)===Sb}function vh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Da(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vh(t.arrayValue.values[n]);return e}return{...t}}function O2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===D2}const L2={mapValue:{fields:{[bb]:{stringValue:Sb},[Ou]:{arrayValue:{}}}}};function G7(t){return"nullValue"in t?up:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Dl(wa.empty(),we.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ky(t)?L2:{mapValue:{}}:Oe(35942,{value:t})}function Q7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Dl(wa.empty(),we.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?L2:"mapValue"in t?ky(t)?{mapValue:{}}:Go:Oe(61959,{value:t})}function yA(t,e){const n=Ea(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vA(t,e){const n=Ea(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(n)}setAll(e){let n=ln.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=vh(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());hp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];hp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Da(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new _r(vh(this.value))}}function M2(t){const e=[];return Da(t.fields,(n,r)=>{const s=new ln([n]);if(hp(r)){const i=M2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new an(e,0,Ge.min(),Ge.min(),Ge.min(),_r.empty(),0)}static newFoundDocument(e,n,r,s){return new an(e,1,n,Ge.min(),r,s,0)}static newNoDocument(e,n){return new an(e,2,n,Ge.min(),Ge.min(),_r.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Ge.min(),Ge.min(),_r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.position=e,this.inclusive=n}}function wA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=we.comparator(we.fromName(o.referenceValue),n.key):r=Ea(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _A(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n="asc"){this.field=e,this.dir=n}}function Y7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{}class kt extends V2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new J7(e,n,r):n==="array-contains"?new eH(e,r):n==="in"?new z2(e,r):n==="not-in"?new tH(e,r):n==="array-contains-any"?new nH(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new X7(e,r):new Z7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ea(n,this.value)):n!==null&&_a(this.value)===_a(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zt extends V2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new zt(e,n)}matches(e){return Mu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Mu(t){return t.op==="and"}function i0(t){return t.op==="or"}function Ib(t){return F2(t)&&Mu(t)}function F2(t){for(const e of t.filters)if(e instanceof zt)return!1;return!0}function o0(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+Lu(t.value);if(Ib(t))return t.filters.map(e=>o0(e)).join(",");{const e=t.filters.map(n=>o0(n)).join(",");return`${t.op}(${e})`}}function j2(t,e){return t instanceof kt?function(r,s){return s instanceof kt&&r.op===s.op&&r.field.isEqual(s.field)&&Pi(r.value,s.value)}(t,e):t instanceof zt?function(r,s){return s instanceof zt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&j2(o,s.filters[a]),!0):!1}(t,e):void Oe(19439)}function U2(t,e){const n=t.filters.concat(e);return zt.create(n,t.op)}function $2(t){return t instanceof kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Lu(n.value)}`}(t):t instanceof zt?function(n){return n.op.toString()+" {"+n.getFilters().map($2).join(" ,")+"}"}(t):"Filter"}class J7 extends kt{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class X7 extends kt{constructor(e,n){super(e,"in",n),this.keys=B2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Z7 extends kt{constructor(e,n){super(e,"not-in",n),this.keys=B2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class eH extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sf(n)&&rf(n.arrayValue,this.value)}}class z2 extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rf(this.value.arrayValue,n)}}class tH extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!rf(this.value.arrayValue,n)}}class nH extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function a0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rH(t,e,n,r,s,i,o)}function Ol(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>o0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Lu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Lu(r)).join(",")),e.Te=n}return e.Te}function Nf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Y7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_A(t.startAt,e.startAt)&&_A(t.endAt,e.endAt)}function yg(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function vg(t,e){return t.filters.filter(n=>n instanceof kt&&n.field.isEqual(e))}function EA(t,e,n){let r=up,s=!0;for(const i of vg(t,e)){let o=up,a=!0;switch(i.op){case"<":case"<=":o=G7(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=up}yA({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function bA(t,e,n){let r=Go,s=!0;for(const i of vg(t,e)){let o=Go,a=!0;switch(i.op){case">=":case">":o=Q7(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Go}vA({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];vA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W2(t,e,n,r,s,i,o,a){return new ao(t,e,n,r,s,i,o,a)}function od(t){return new ao(t)}function SA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tb(t){return t.collectionGroup!==null}function su(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ht(ln.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new of(i,r))}),n.has(ln.keyField().canonicalString())||e.Ie.push(new of(ln.keyField(),r))}return e.Ie}function Nr(t){const e=Ee(t);return e.Ee||(e.Ee=H2(e,su(t))),e.Ee}function q2(t){const e=Ee(t);return e.de||(e.de=H2(e,t.explicitOrderBy)),e.de}function H2(t,e){if(t.limitType==="F")return a0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new of(s.field,i)});const n=t.endAt?new ba(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ba(t.startAt.position,t.startAt.inclusive):null;return a0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function l0(t,e){const n=t.filters.concat([e]);return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wg(t,e,n){return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return Nf(Nr(t),Nr(e))&&t.limitType===e.limitType}function K2(t){return`${Ol(Nr(t))}|lt:${t.limitType}`}function Ic(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>$2(s)).join(", ")}]`),Cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Lu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Lu(s)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function Of(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):we.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of su(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=wA(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,su(r),s)||r.endAt&&!function(o,a,l){const c=wA(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,su(r),s))}(t,e)}function G2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Q2(t){return(e,n)=>{let r=!1;for(const s of su(t)){const i=sH(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sH(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ea(l,c):Oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return A2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=new rn(we.comparator);function es(){return iH}const Y2=new rn(we.comparator);function Jd(...t){let e=Y2;for(const n of t)e=e.insert(n.key,n);return e}function J2(t){let e=Y2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gi(){return wh()}function X2(){return wh()}function wh(){return new lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const oH=new rn(we.comparator),aH=new Ht(we.comparator);function dt(...t){let e=aH;for(const n of t)e=e.add(n);return e}const lH=new Ht(rt);function xb(){return lH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jh(e)?"-0":e}}function Z2(t){return{integerValue:""+t}}function eO(t,e){return p2(e)?Z2(e):Ab(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this._=void 0}}function cH(t,e,n){return t instanceof Vu?function(s,i){const o={fields:{[C2]:{stringValue:R2},[N2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ry(i)&&(i=Cy(i)),i&&(o.fields[k2]=i),{mapValue:o}}(n,e):t instanceof Ll?nO(t,e):t instanceof Ml?rO(t,e):function(s,i){const o=tO(s,i),a=IA(o)+IA(s.Ae);return s0(o)&&s0(s.Ae)?Z2(a):Ab(s.serializer,a)}(t,e)}function uH(t,e,n){return t instanceof Ll?nO(t,e):t instanceof Ml?rO(t,e):n}function tO(t,e){return t instanceof Fu?function(r){return s0(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Vu extends Ny{}class Ll extends Ny{constructor(e){super(),this.elements=e}}function nO(t,e){const n=sO(e);for(const r of t.elements)n.some(s=>Pi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ml extends Ny{constructor(e){super(),this.elements=e}}function rO(t,e){let n=sO(e);for(const r of t.elements)n=n.filter(s=>!Pi(s,r));return{arrayValue:{values:n}}}class Fu extends Ny{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function IA(t){return pn(t.integerValue||t.doubleValue)}function sO(t){return sf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.field=e,this.transform=n}}function dH(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ll&&s instanceof Ll||r instanceof Ml&&s instanceof Ml?xu(r.elements,s.elements,Pi):r instanceof Fu&&s instanceof Fu?Pi(r.Ae,s.Ae):r instanceof Vu&&s instanceof Vu}(t.transform,e.transform)}class hH{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dy{}function iO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ld(t.key,yn.none()):new ad(t.key,t.data,yn.none());{const n=t.data,r=_r.empty();let s=new Ht(ln.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new co(t.key,r,new Zr(s.toArray()),yn.none())}}function fH(t,e,n){t instanceof ad?function(s,i,o){const a=s.value.clone(),l=xA(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof co?function(s,i,o){if(!fp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=xA(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(oO(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _h(t,e,n,r){return t instanceof ad?function(i,o,a,l){if(!fp(i.precondition,o))return a;const c=i.value.clone(),u=AA(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof co?function(i,o,a,l){if(!fp(i.precondition,o))return a;const c=AA(i.fieldTransforms,l,o),u=o.data;return u.setAll(oO(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return fp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mH(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=tO(r.transform,s||null);i!=null&&(n===null&&(n=_r.empty()),n.set(r.field,i))}return n||null}function TA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xu(r,s,(i,o)=>dH(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ad extends Dy{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class co extends Dy{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xA(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,uH(o,a,n[s]))}return r}function AA(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,cH(i,o,e))}return r}class ld extends Dy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pb extends Dy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fH(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_h(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_h(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=X2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=iO(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dt())}isEqual(e){return this.batchId===e.batchId&&xu(this.mutations,e.mutations,(n,r)=>TA(n,r))&&xu(this.baseMutations,e.baseMutations,(n,r)=>TA(n,r))}}class Cb{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return oH}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cb(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kb=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn,Dt;function lO(t){switch(t){case B.OK:return Oe(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return Oe(15467,{code:t})}}function cO(t){if(t===void 0)return Fn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Wn.OK:return B.OK;case Wn.CANCELLED:return B.CANCELLED;case Wn.UNKNOWN:return B.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return B.INTERNAL;case Wn.UNAVAILABLE:return B.UNAVAILABLE;case Wn.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Wn.NOT_FOUND:return B.NOT_FOUND;case Wn.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Wn.ABORTED:return B.ABORTED;case Wn.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Wn.DATA_LOSS:return B.DATA_LOSS;default:return Oe(39323,{code:t})}}(Dt=Wn||(Wn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=new la([4294967295,4294967295],0);function PA(t){const e=uO().encode(t),n=new YD;return n.update(e),new Uint8Array(n.digest())}function RA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new la([n,r],0),new la([s,i],0)]}class Nb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xd(`Invalid padding: ${n}`);if(r<0)throw new Xd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=la.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(la.fromNumber(r)));return s.compare(gH)===1&&(s=new la([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=PA(e),[r,s]=RA(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Nb(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=PA(e),[r,s]=RA(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mf(Ge.min(),s,new rn(rt),es(),dt())}}class Vf{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vf(r,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class dO{constructor(e,n){this.targetId=e,this.Ce=n}}class hO{constructor(e,n,r=Pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class CA{constructor(){this.ve=0,this.Fe=kA(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),n=dt(),r=dt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Oe(38017,{changeType:i})}}),new Vf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=kA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yH{constructor(e){this.Ge=e,this.ze=new Map,this.je=es(),this.Je=xm(),this.He=xm(),this.Ye=new rn(rt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(yg(i))if(r===0){const o=new we(i.path);this.et(n,o,an.newNoDocument(o,Ge.min()))}else ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}Eh==null||Eh.lt(function(u,h,f,p,_){var E,w,S;const g={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},b=h.unchangedNames;return b&&(g.bloomFilter={applied:_===0,hashCount:(b==null?void 0:b.hashCount)??0,bitmapLength:((w=(E=b==null?void 0:b.bits)==null?void 0:E.bitmap)==null?void 0:w.length)??0,padding:((S=b==null?void 0:b.bits)==null?void 0:S.padding)??0,mightContain:P=>(p==null?void 0:p.mightContain(P))??!1}),g}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=so(r).toUint8Array()}catch(l){if(l instanceof P2)return ws("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Nb(o,s,i)}catch(l){return ws(l instanceof Xd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&yg(a.target)){const l=new we(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,an.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=dt();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Mf(e,n,this.Ye,this.je,r);return this.je=es(),this.Je=xm(),this.He=xm(),this.Ye=new rn(rt),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new CA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ht(rt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ht(rt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xm(){return new rn(we.comparator)}function kA(){return new rn(we.comparator)}const vH={asc:"ASCENDING",desc:"DESCENDING"},wH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_H={and:"AND",or:"OR"};class EH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function c0(t,e){return t.useProto3Json||Cf(e)?e:{value:e}}function ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bH(t,e){return ju(t,e.toTimestamp())}function Un(t){return ze(!!t,49232),Ge.fromTimestamp(function(n){const r=ro(n);return new Vt(r.seconds,r.nanos)}(t))}function Db(t,e){return u0(t,e).canonicalString()}function u0(t,e){const n=function(s){return new It(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mO(t){const e=It.fromString(t);return ze(SO(e),10190,{key:e.toString()}),e}function af(t,e){return Db(t.databaseId,e.path)}function Ii(t,e){const n=mO(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(yO(n))}function pO(t,e){return Db(t.databaseId,e)}function gO(t){const e=mO(t);return e.length===4?It.emptyPath():yO(e)}function d0(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yO(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function NA(t,e,n){return{name:af(t,e),fields:n.value.mapValue.fields}}function Oy(t,e,n){const r=Ii(t,e.name),s=Un(e.updateTime),i=e.createTime?Un(e.createTime):Ge.min(),o=new _r({mapValue:{fields:e.fields}}),a=an.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function SH(t,e){return"found"in e?function(r,s){ze(!!s.found,43571),s.found.name,s.found.updateTime;const i=Ii(r,s.found.name),o=Un(s.found.updateTime),a=s.found.createTime?Un(s.found.createTime):Ge.min(),l=new _r({mapValue:{fields:s.found.fields}});return an.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){ze(!!s.missing,3894),ze(!!s.readTime,22933);const i=Ii(r,s.missing),o=Un(s.readTime);return an.newNoDocument(i,o)}(t,e):Oe(7234,{result:e})}function IH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Oe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ze(u===void 0||typeof u=="string",58123),Pn.fromBase64String(u||"")):(ze(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Pn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?B.UNKNOWN:cO(c.code);return new ee(u,c.message||"")}(o);n=new hO(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ii(t,r.document.name),i=Un(r.document.updateTime),o=r.document.createTime?Un(r.document.createTime):Ge.min(),a=new _r({mapValue:{fields:r.document.fields}}),l=an.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new mp(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ii(t,r.document),i=r.readTime?Un(r.readTime):Ge.min(),o=an.newNoDocument(s,i),a=r.removedTargetIds||[];n=new mp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ii(t,r.document),i=r.removedTargetIds||[];n=new mp([],i,s,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new pH(s,i),a=r.targetId;n=new dO(a,o)}}return n}function lf(t,e){let n;if(e instanceof ad)n={update:NA(t,e.key,e.value)};else if(e instanceof ld)n={delete:af(t,e.key)};else if(e instanceof co)n={update:NA(t,e.key,e.data),updateMask:CH(e.fieldMask)};else{if(!(e instanceof Pb))return Oe(16599,{Vt:e.type});n={verify:af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Vu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bH(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Oe(27497)}(t,e.precondition)),n}function h0(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?yn.updateTime(Un(i.updateTime)):i.exists!==void 0?yn.exists(i.exists):yn.none()}(e.currentDocument):yn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ze(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Vu;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new Ll(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new Ml(u)}else"increment"in a?l=new Fu(o,a.increment):Oe(16584,{proto:a});const c=ln.fromServerFormat(a.fieldPath);return new Lf(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Ii(t,e.update.name),i=new _r({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Zr(c.map(u=>ln.fromServerFormat(u)))}(e.updateMask);return new co(s,i,o,n,r)}return new ad(s,i,n,r)}if(e.delete){const s=Ii(t,e.delete);return new ld(s,n)}if(e.verify){const s=Ii(t,e.verify);return new Pb(s,n)}return Oe(1463,{proto:e})}function TH(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Un(s.updateTime):Un(i);return o.isEqual(Ge.min())&&(o=Un(i)),new hH(o,s.transformResults||[])}(n,e))):[]}function vO(t,e){return{documents:[pO(t,e.path)]}}function Ly(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pO(t,s);const i=function(c){if(c.length!==0)return bO(zt.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Mo(f.field),direction:AH(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=c0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function wO(t,e,n,r){const{ft:s,parent:i}=Ly(t,e),o={},a=[];let l=0;return n.forEach(c=>{const u=r?c.alias:"aggregate_"+l++;o[u]=c.alias,c.aggregateType==="count"?a.push({alias:u,count:{}}):c.aggregateType==="avg"?a.push({alias:u,avg:{field:Mo(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:u,sum:{field:Mo(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function _O(t){let e=gO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=EO(h);return f instanceof zt&&Ib(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(_){return new of(Tc(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Cf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new ba(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new ba(p,f)}(n.endAt)),W2(e,s,o,i,a,"F",l,c)}function xH(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Tc(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Tc(n.unaryFilter.field);return kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Tc(n.unaryFilter.field);return kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Tc(n.unaryFilter.field);return kt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return kt.create(Tc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zt.create(n.compositeFilter.filters.map(r=>EO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}}(n.compositeFilter.op))}(t):Oe(30097,{filter:t})}function AH(t){return vH[t]}function PH(t){return wH[t]}function RH(t){return _H[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function Tc(t){return ln.fromServerFormat(t.fieldPath)}function bO(t){return t instanceof kt?function(n){if(n.op==="=="){if(gA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(pA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(pA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:PH(n.op),value:n.value}}}(t):t instanceof zt?function(n){const r=n.getFilters().map(s=>bO(s));return r.length===1?r[0]:{compositeFilter:{op:RH(n.op),filters:r}}}(t):Oe(54877,{filter:t})}function CH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r,s,i=Ge.min(),o=Ge.min(),a=Pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.yt=e}}function kH(t,e){let n;if(e.document)n=Oy(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=we.fromSegments(e.noDocument.path),s=Fl(e.noDocument.readTime);n=an.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe(56709);{const r=we.fromSegments(e.unknownDocument.path),s=Fl(e.unknownDocument.version);n=an.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Vt(s[0],s[1]);return Ge.fromTimestamp(i)}(e.readTime)),n}function DA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:_g(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:af(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ju(i,o.version.toTimestamp()),createTime:ju(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Vl(e.version)};else{if(!e.isUnknownDocument())return Oe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Vl(e.version)}}return r}function _g(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fl(t){const e=new Vt(t.seconds,t.nanoseconds);return Ge.fromTimestamp(e)}function Ja(t,e){const n=(e.baseMutations||[]).map(i=>h0(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>h0(t.yt,i)),s=Vt.fromMillis(e.localWriteTimeMs);return new Rb(e.batchId,s,n,r)}function Zd(t){const e=Fl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Fl(t.lastLimboFreeSnapshotVersion):Ge.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return ze(o===1,1966,{count:o}),Nr(od(gO(i.documents[0])))}(t.query):function(i){return Nr(_O(i))}(t.query),new Bi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Pn.fromBase64String(t.resumeToken))}function TO(t,e){const n=Vl(e.snapshotVersion),r=Vl(e.lastLimboFreeSnapshotVersion);let s;s=yg(e.target)?vO(t.yt,e.target):Ly(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ol(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function My(t){const e=_O({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wg(e,e.limit,"L"):e}function ew(t,e){return new kb(e.largestBatchId,h0(t.yt,e.overlayMutation))}function OA(t,e){const n=e.path.lastSegment();return[t,kr(e.path.popLast()),n]}function LA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Vl(r.readTime),documentKey:kr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{getBundleMetadata(e,n){return MA(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Fl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return MA(e).put(function(s){return{bundleId:s.id,createTime:Vl(Un(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return VA(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:My(i.bundledQuery),readTime:Fl(i.readTime)}}(r)})}saveNamedQuery(e,n){return VA(e).put(function(s){return{name:s.name,readTime:Vl(Un(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function MA(t){return rr(t,xy)}function VA(t){return rr(t,Ay)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Vy(e,r)}getOverlay(e,n){return Md(e).get(OA(this.userId,n)).next(r=>r?ew(this.serializer,r):null)}getOverlays(e,n){const r=gi();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new kb(n,o);s.push(this.St(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(kr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Md(e).Z(t0,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=gi(),i=kr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Md(e).J(t0,o).next(a=>{for(const l of a){const c=ew(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=gi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Md(e).ee({index:E2,range:a},(l,c,u)=>{const h=ew(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>i)}St(e,n){return Md(e).put(function(s,i,o){const[a,l,c]=OA(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:lf(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Md(t){return rr(t,Py)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{bt(e){return rr(e,_b)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Pn.fromUint8Array(r):Pn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(pn(e.integerValue));else if("doubleValue"in e){const r=pn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Jh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ro(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(so(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?O2(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ky(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Oe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Ou,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(pn(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),we.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Xa.Kt=new Xa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=255;function OH(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function FA(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=OH(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class LH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=FA(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=FA(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(dc),this.sn(255)}_n(){this.an(dc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===dc?(this.sn(dc),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===dc?(this.an(dc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class MH{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class VH{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vd{constructor(){this.cn=new LH,this.ln=new MH(this.cn),this.hn=new VH(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Za(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:pp(this.En),directionalValue:pp(this.dn),orderedDocumentKey:pp(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function _o(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=jA(t.En,e.En),n!==0?n:(n=jA(t.dn,e.dn),n!==0?n:we.comparator(t.In,e.In)))}function jA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function pp(t){return tD()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function UA(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class $A{constructor(e){this.mn=new Ht((n,r)=>ln.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ze(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=X_(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ka(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ht(ln.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new wl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new wl(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new wl(r.field,r.dir==="asc"?0:1)));return new Pu(Pu.UNKNOWN_ID,this.collectionId,n,Ru.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){var n,r;if(ze(t instanceof kt||t instanceof zt,20012),t instanceof kt){if(t instanceof z2){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>kt.create(t.field,"==",i)))||[];return zt.create(s,"or")}return t}const e=t.filters.map(s=>xO(s));return zt.create(e,t.op)}function FH(t){if(t.getFilters().length===0)return[];const e=p0(xO(t));return ze(AO(e),7391),f0(e)||m0(e)?[e]:e.getFilters()}function f0(t){return t instanceof kt}function m0(t){return t instanceof zt&&Ib(t)}function AO(t){return f0(t)||m0(t)||function(n){if(n instanceof zt&&i0(n)){for(const r of n.getFilters())if(!f0(r)&&!m0(r))return!1;return!0}return!1}(t)}function p0(t){if(ze(t instanceof kt||t instanceof zt,34018),t instanceof kt)return t;if(t.filters.length===1)return p0(t.filters[0]);const e=t.filters.map(r=>p0(r));let n=zt.create(e,t.op);return n=Eg(n),AO(n)?n:(ze(n instanceof zt,64498),ze(Mu(n),40251),ze(n.filters.length>1,57927),n.filters.reduce((r,s)=>Ob(r,s)))}function Ob(t,e){let n;return ze(t instanceof kt||t instanceof zt,38388),ze(e instanceof kt||e instanceof zt,25473),n=t instanceof kt?e instanceof kt?function(s,i){return zt.create([s,i],"and")}(t,e):BA(t,e):e instanceof kt?BA(e,t):function(s,i){if(ze(s.filters.length>0&&i.filters.length>0,48005),Mu(s)&&Mu(i))return U2(s,i.getFilters());const o=i0(s)?s:i,a=i0(s)?i:s,l=o.filters.map(c=>Ob(c,a));return zt.create(l,"or")}(t,e),Eg(n)}function BA(t,e){if(Mu(e))return U2(e,t.getFilters());{const n=e.filters.map(r=>Ob(t,r));return zt.create(n,"or")}}function Eg(t){if(ze(t instanceof kt||t instanceof zt,11850),t instanceof kt)return t;const e=t.getFilters();if(e.length===1)return Eg(e[0]);if(F2(t))return t;const n=e.map(s=>Eg(s)),r=[];return n.forEach(s=>{s instanceof kt?r.push(s):s instanceof zt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:zt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(){this.Cn=new Lb}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(_s.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Lb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ht(It.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ht(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="IndexedDbIndexManager",Am=new Uint8Array(0);class UH{constructor(e,n){this.databaseId=n,this.vn=new Lb,this.Fn=new lo(r=>Ol(r),(r,s)=>Nf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:kr(s)};return WA(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[o2(n),""],!1,!0);return WA(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(pi(o.parent))}return r})}addFieldIndex(e,n){const r=Fd(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=fc(e);return i.next(a=>{o.put(LA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Fd(e),s=fc(e),i=hc(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Fd(e),r=hc(e),s=fc(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new $A(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=hc(e);let s=!0;const i=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=dt();const a=[];return M.forEach(i,(l,c)=>{re(zA,`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${Ol(n)}`);const u=function(S,P){const x=X_(P);if(x===void 0)return null;for(const O of vg(S,x.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),h=function(S,P){const x=new Map;for(const O of Ka(P))for(const T of vg(S,O.fieldPath))switch(T.op){case"==":case"in":x.set(O.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return x.set(O.fieldPath.canonicalString(),T.value),Array.from(x.values())}return null}(c,l),f=function(S,P){const x=[];let O=!0;for(const T of Ka(P)){const A=T.kind===0?EA(S,T.fieldPath,S.startAt):bA(S,T.fieldPath,S.startAt);x.push(A.value),O&&(O=A.inclusive)}return new ba(x,O)}(c,l),p=function(S,P){const x=[];let O=!0;for(const T of Ka(P)){const A=T.kind===0?bA(S,T.fieldPath,S.endAt):EA(S,T.fieldPath,S.endAt);x.push(A.value),O&&(O=A.inclusive)}return new ba(x,O)}(c,l),_=this.On(l,c,f),g=this.On(l,c,p),b=this.Nn(l,c,h),E=this.Bn(l.indexId,u,_,f.inclusive,g,p.inclusive,b);return M.forEach(E,w=>r.Y(w,n.limit).next(S=>{S.forEach(P=>{const x=we.fromSegments(P.documentKey);o.has(x)||(o=o.add(x),a.push(x))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=FH(zt.create(e.filters,"and")).map(r=>a0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):Am,p=this.kn(e,f,r[h%c],s),_=this.qn(e,f,i[h%c],o),g=a.map(b=>this.kn(e,f,b,!0));u.push(...this.createRange(p,_,g))}return u}kn(e,n,r,s){const i=new Za(e,we.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Za(e,we.empty(),n,r);return s?i.An():i}xn(e,n){const r=new $A(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return M.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ht(ln.comparator),u=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Vd;for(const s of Ka(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);Xa.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Vd;return Xa.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Vd;return Xa.Kt.Dt(Dl(this.databaseId,n),r.Pn(function(i){const o=Ka(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Vd);let i=0;for(const o of Ka(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&sf(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);Xa.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Vd;l.seed(a.un()),Xa.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof kt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Fd(e),s=fc(e);return(n?r.J(e0,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const f=h?new Ru(h.sequenceNumber,new _s(Fl(h.readTime),new we(pi(h.documentKey)),h.largestBatchId)):Ru.empty(),p=u.fields.map(([_,g])=>new wl(ln.fromServerFormat(_),g));return new Pu(u.indexId,u.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:rt(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Fd(e),i=fc(e);return this.Gn(e).next(o=>s.J(e0,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(LA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.zn(e,s,l).next(c=>{const u=this.jn(i,l);return c.isEqual(u)?M.resolve():this.Jn(e,i,l,c,u)}))))})}Hn(e,n,r,s){return hc(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return hc(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=hc(e);let i=new Ht(_o);return s.ee({index:_2,range:IDBKeyRange.only([r.indexId,this.uid,pp(this.$n(r,n))])},(o,a)=>{i=i.add(new Za(r.indexId,n,UA(a.arrayValue),UA(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new Ht(_o);const s=this.Qn(n,e);if(s==null)return r;const i=X_(n);if(i!=null){const o=e.data.field(i.fieldPath);if(sf(o))for(const a of o.arrayValue.values||[])r=r.add(new Za(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new Za(n.indexId,e.key,Am,s));return r}Jn(e,n,r,s,i){re(zA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,h,f){const p=l.getIterator(),_=c.getIterator();let g=uc(p),b=uc(_);for(;g||b;){let E=!1,w=!1;if(g&&b){const S=u(g,b);S<0?w=!0:S>0&&(E=!0)}else g!=null?w=!0:E=!0;E?(h(b),b=uc(_)):w?(f(g),g=uc(p)):(g=uc(p),b=uc(_))}}(s,i,_o,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return fc(e).ee({index:w2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>_o(o,a)).filter((o,a,l)=>!a||_o(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=_o(o,e),l=_o(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Am,we.empty()),l=s[o+1].Vn(this.uid,Am,we.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return _o(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qA)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Oe(44426))).next(qA)}}function WA(t){return rr(t,ef)}function hc(t){return rr(t,yh)}function Fd(t){return rr(t,wb)}function fc(t){return rr(t,gh)}function qA(t){ze(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;gb(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new _s(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PO=41943040;class Rr{static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t,e,n){const r=t.store(js),s=t.store(Cu),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(u,h,f)=>(a++,f.delete()));i.push(l.next(()=>{ze(a===1,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const h=g2(e,u.key.path,n.batchId);i.push(s.delete(h)),c.push(u.key)}return M.waitFor(i).next(()=>c)}function bg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oe(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(PO,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);class Fy{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){ze(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Fy(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Eo(e).ee({index:cl,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=xc(e),o=Eo(e);return o.add({}).next(a=>{ze(typeof a=="number",49019);const l=new Rb(a,n,r,s),c=function(p,_,g){const b=g.baseMutations.map(w=>lf(p.yt,w)),E=g.mutations.map(w=>lf(p.yt,w));return{userId:_,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:b,mutations:E}}(this.serializer,this.userId,l),u=[];let h=new Ht((f,p)=>rt(f.canonicalString(),p.canonicalString()));for(const f of s){const p=g2(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),u.push(o.put(c)),u.push(i.put(p,E7))}return h.forEach(f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Eo(e).get(n).next(r=>r?(ze(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ja(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Eo(e).ee({index:cl,range:s},(o,a,l)=>{a.userId===this.userId&&(ze(a.batchId>=r,47524,{tr:r}),i=Ja(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ca;return Eo(e).ee({index:cl,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ca],[this.userId,Number.POSITIVE_INFINITY]);return Eo(e).J(cl,n).next(r=>r.map(s=>Ja(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=lp(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return xc(e).ee({range:s},(o,a,l)=>{const[c,u,h]=o,f=pi(u);if(c===this.userId&&n.path.isEqual(f))return Eo(e).get(h).next(p=>{if(!p)throw Oe(61480,{nr:o,batchId:h});ze(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:h}),i.push(Ja(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(rt);const s=[];return n.forEach(i=>{const o=lp(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=xc(e).ee({range:a},(c,u,h)=>{const[f,p,_]=c,g=pi(p);f===this.userId&&i.path.isEqual(g)?r=r.add(_):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=lp(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ht(rt);return xc(e).ee({range:o},(l,c,u)=>{const[h,f,p]=l,_=pi(f);h===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(p)):u.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Eo(e).get(i).next(o=>{if(o===null)throw Oe(35274,{batchId:i});ze(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Ja(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return RO(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return xc(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=pi(i[1]);s.push(l)}else a.done()}).next(()=>{ze(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return CO(e,this.userId,n)}_r(e){return kO(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:ca,lastStreamToken:""})}}function CO(t,e,n){const r=lp(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return xc(t).ee({range:i,X:!0},(a,l,c)=>{const[u,h,f]=a;u===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Eo(t){return rr(t,js)}function xc(t){return rr(t,Cu)}function kO(t){return rr(t,Xh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jl(0)}static cr(){return new jl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new jl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Ge.fromTimestamp(new Vt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>mc(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ze(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return mc(e).ee((o,a)=>{const l=Zd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return mc(e).ee((r,s)=>{const i=Zd(s);n(i)})}lr(e){return KA(e).get(gg).next(n=>(ze(n!==null,2888),n))}hr(e,n){return KA(e).put(gg,n)}Pr(e,n){return mc(e).put(TO(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ol(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return mc(e).ee({range:s,index:v2},(o,a,l)=>{const c=Zd(a);Nf(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Vo(e);return n.forEach(o=>{const a=kr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Vo(e);return M.forEach(n,i=>{const o=kr(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Vo(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Vo(e);let i=dt();return s.ee({range:r,X:!0},(o,a,l)=>{const c=pi(o[1]),u=new we(c);i=i.add(u)}).next(()=>i)}containsKey(e,n){const r=kr(n.path),s=IDBKeyRange.bound([r],[o2(r)],!1,!0);let i=0;return Vo(e).ee({index:vb,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return mc(e).get(n).next(r=>r?Zd(r):null)}}function mc(t){return rr(t,ku)}function KA(t){return rr(t,_l)}function Vo(t){return rr(t,Nu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="LruGarbageCollector",NO=1048576;function QA([t,e],[n,r]){const s=rt(t,n);return s===0?rt(e,r):s}class BH{constructor(e){this.Ir=e,this.buffer=new Ht(QA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(GA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Na(n)?re(GA,"Ignoring IndexedDB error during garbage collection: ",n):await ka(n)}await this.Vr(3e5)})}}class zH{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Xr.ce);const r=new BH(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(HA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Sc()<=Ct.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function OO(t,e){return new zH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,n){this.db=e,this.garbageCollector=OO(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return Pm(e,r)}removeReference(e,n,r){return Pm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Pm(e,n)}br(e,n){return function(s,i){let o=!1;return kO(s).te(a=>CO(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ge.min()),Vo(e).delete(function(h){return[0,kr(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Pm(e,n)}Sr(e,n){const r=Vo(e);let s,i=Xr.ce;return r.ee({index:vb},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==Xr.ce&&n(new we(pi(s)),i),i=c,s=l):i=Xr.ce}).next(()=>{i!==Xr.ce&&n(new we(pi(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pm(t,e){return Vo(t).put(function(r,s){return{targetId:0,path:kr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.changes=new lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ba(e).put(r)}removeEntry(e,n,r){return Ba(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_g(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=an.newInvalidDocument(n);return Ba(e).ee({index:cp,range:IDBKeyRange.only(jd(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:an.newInvalidDocument(n)};return Ba(e).ee({index:cp,range:IDBKeyRange.only(jd(n))},(s,i)=>{r={document:this.Cr(n,i),size:bg(i)}}).next(()=>r)}getEntries(e,n){let r=es();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=es(),s=new rn(we.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,bg(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let s=new Ht(XA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(jd(s.first()),jd(s.last())),o=s.getIterator();let a=o.getNext();return Ba(e).ee({index:cp,range:i},(l,c,u)=>{const h=we.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&XA(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(jd(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),_g(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ba(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=es();for(const h of c){const f=this.Cr(we.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Of(n,f)||s.has(f.key))&&(u=u.insert(f.key,f))}return u})}getAllFromCollectionGroup(e,n,r,s){let i=es();const o=JA(n,r),a=JA(n,_s.max());return Ba(e).ee({index:y2,range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.Cr(we.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new HH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return YA(e).get(Z_).next(n=>(ze(!!n,20021),n))}Dr(e,n){return YA(e).put(Z_,n)}Cr(e,n){if(n){const r=kH(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ge.min())))return r}return an.newInvalidDocument(e)}}function MO(t){return new qH(t)}class HH extends LO{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new lo(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Ht((i,o)=>rt(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=DA(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=bg(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=DA(this.Nr.serializer,o.convertToNoDocument(Ge.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function YA(t){return rr(t,Zh)}function Ba(t){return rr(t,pg)}function jd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JA(t,e){const n=e.documentKey.path.toArray();return[t,_g(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=rt(n[i],r[i]),s)return s;return s=rt(n.length,r.length),s||(s=rt(n[n.length-2],r[r.length-2]),s||rt(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&_h(r.mutation,s,Zr.empty(),Vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=dt()){const s=gi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,dt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=es();const o=wh(),a=function(){return wh()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof co)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),_h(u.mutation,c,u.mutation.getFieldMask(),Vt.now())):o.set(c.key,Zr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>a.set(c,new KH(u,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=wh();let s=new rn((o,a)=>o-a),i=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Zr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||dt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=X2();u.forEach(f=>{if(!i.has(f)){const p=iO(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return we.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(gi());let a=Au,l=i;return o.next(c=>M.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?M.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,dt())).next(u=>({batchId:a,changes:J2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let s=Jd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jd();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,f){return new ao(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,an.newInvalidDocument(u)))});let a=Jd();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&_h(u.mutation,c,Zr.empty(),Vt.now()),Of(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Un(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:My(s.bundledQuery),readTime:Un(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(){this.overlays=new rn(we.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gi();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=gi(),i=n.length+1,o=new we(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new rn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=gi(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=gi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return M.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kb(n,r));let i=this.qr.get(n);i===void 0&&(i=dt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.Qr=new Ht(ur.$r),this.Ur=new Ht(ur.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ur(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ur(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new we(new It([])),r=new ur(n,e),s=new ur(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new we(new It([])),r=new ur(n,e),s=new ur(n,e+1);let i=dt();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ur(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ur{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return we.comparator(e.key,n.key)||rt(e.Yr,n.Yr)}static Kr(e,n){return rt(e.Yr,n.Yr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(ur.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Rb(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new ur(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ca:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ur(n,0),s=new ur(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(rt);return n.forEach(s=>{const i=new ur(s,0),o=new ur(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;we.isDocumentKey(i)||(i=i.child(""));const o=new ur(new we(i),0);let a=new Ht(rt);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new ur(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ur(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e){this.ri=e,this.docs=function(){return new rn(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=es();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():an.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=es();const o=n.path,a=new we(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||gb(d2(u),r)<=0||(s.has(u.key)||Of(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Oe(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZH(this)}getSize(e){return M.resolve(this.size)}}class ZH extends LO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.persistence=e,this.si=new lo(n=>Ol(n),Nf),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Mb,this.targetCount=0,this.ai=jl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Xr(0),this.li=!1,this.li=!0,this.hi=new YH,this.referenceDelegate=e(this),this.Pi=new eK(this),this.indexManager=new jH,this.remoteDocumentCache=function(s){return new XH(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new IO(n),this.Ii=new GH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new JH(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new tK(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class tK extends f2{constructor(e){super(),this.currentSequenceNumber=e}}class jy{constructor(e){this.persistence=e,this.Ri=new Mb,this.Vi=null}static mi(e){return new jy(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=we.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sg{constructor(e,n){this.persistence=e,this.pi=new lo(r=>kr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=OO(this,n)}static mi(e,n){return new Sg(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dp(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{constructor(e){this.serializer=e}k(e,n,r,s){const i=new Ty("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(kf)}(e),function(l){l.createObjectStore(Xh,{keyPath:_7}),l.createObjectStore(js,{keyPath:cA,autoIncrement:!0}).createIndex(cl,uA,{unique:!0}),l.createObjectStore(Cu)}(e),ZA(e),function(l){l.createObjectStore(Ga)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Nu),l.deleteObjectStore(ku),l.deleteObjectStore(_l)}(e),ZA(e)),o=o.next(()=>function(l){const c=l.store(_l),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ge.min().toTimestamp(),targetCount:0};return c.put(gg,u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(js).J().next(h=>{l.deleteObjectStore(js),l.createObjectStore(js,{keyPath:cA,autoIncrement:!0}).createIndex(cl,uA,{unique:!0});const f=c.store(js),p=h.map(_=>f.put(_));return M.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Du,{keyPath:R7})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Zh)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(xy,{keyPath:C7})})(e),function(l){l.createObjectStore(Ay,{keyPath:k7})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(Py,{keyPath:F7});c.createIndex(t0,j7,{unique:!1}),c.createIndex(E2,U7,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(pg,{keyPath:b7});c.createIndex(cp,S7),c.createIndex(y2,I7)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(Ga))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(wb,{keyPath:N7,autoIncrement:!0}).createIndex(e0,D7,{unique:!1}),l.createObjectStore(gh,{keyPath:O7}).createIndex(w2,L7,{unique:!1}),l.createObjectStore(yh,{keyPath:M7}).createIndex(_2,V7,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(gh).clear()}).next(()=>{n.objectStore(yh).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(_b,{keyPath:$7})})(e)})),r<18&&s>=18&&tD()&&(o=o.next(()=>{n.objectStore(gh).clear()}).next(()=>{n.objectStore(yh).clear()})),o}wi(e){let n=0;return e.store(Ga).ee((r,s)=>{n+=bg(s)}).next(()=>{const r={byteSize:n};return e.store(Zh).put(Z_,r)})}yi(e){const n=e.store(Xh),r=e.store(js);return n.J().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,ca],[i.userId,i.lastAcknowledgedBatchId]);return r.J(cl,o).next(a=>M.forEach(a,l=>{ze(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ja(this.serializer,l);return RO(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Nu),r=e.store(Ga);return e.store(_l).get(gg).next(s=>{const i=[];return r.ee((o,a)=>{const l=new It(o),c=function(h){return[0,kr(h)]}(l);i.push(n.get(c).next(u=>u?M.resolve():(h=>n.put({targetId:0,path:kr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}bi(e,n){e.createObjectStore(ef,{keyPath:P7});const r=n.store(ef),s=new Lb,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:kr(l)})}};return n.store(Ga).ee({X:!0},(o,a)=>{const l=new It(o);return i(l.popLast())}).next(()=>n.store(Cu).ee({X:!0},([o,a,l],c)=>{const u=pi(a);return i(u.popLast())}))}Di(e){const n=e.store(ku);return n.ee((r,s)=>{const i=Zd(s),o=TO(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(Ga),s=[];return r.ee((i,o)=>{const a=n.store(pg),l=function(h){return h.document?new we(It.fromString(h.document.name).popFirst(5)):h.noDocument?we.fromSegments(h.noDocument.path):h.unknownDocument?we.fromSegments(h.unknownDocument.path):Oe(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Fi(e,n){const r=n.store(js),s=MO(this.serializer),i=new Vb(jy.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??dt();Ja(this.serializer,l).keys().forEach(u=>c=c.add(u)),a.set(l.userId,c)}),M.forEach(a,(l,c)=>{const u=new hr(c),h=Vy.wt(this.serializer,u),f=i.getIndexManager(u),p=Fy.wt(u,this.serializer,f,i.referenceDelegate);return new VO(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new n0(n,Xr.ce),l).next()})})}}function ZA(t){t.createObjectStore(Nu,{keyPath:x7}).createIndex(vb,A7,{unique:!0}),t.createObjectStore(ku,{keyPath:"targetId"}).createIndex(v2,T7,{unique:!0}),t.createObjectStore(_l)}const bo="IndexedDbPersistence",tw=18e5,nw=5e3,rw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",FO="main";class Fb{constructor(e,n,r,s,i,o,a,l,c,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=u,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!Fb.v())throw new ee(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WH(this,s),this.$i=n+FO,this.serializer=new IO(l),this.Ui=new Si(this.$i,this.Ni,new nK(this.serializer)),this.hi=new DH,this.Pi=new $H(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MO(this.serializer),this.Ii=new NH,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&Fn(bo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(B.FAILED_PRECONDITION,rw);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Xr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Na(e))return re(bo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(bo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Ud(e).get(cc).next(n=>M.resolve(this.es(n)))}ts(e){return Rm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,tw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=rr(n,Du);return r.J().next(s=>{const i=this.ss(s,tw),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):Ud(e).get(cc).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,nw)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ee(B.FAILED_PRECONDITION,rw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rm(e).J().next(r=>this.ss(r,nw).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&re(bo,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kf,Du],e=>{const n=new n0(e,Xr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Rm(e).J().next(n=>this.ss(n,tw).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Fy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UH(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Vy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){re(bo,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?W7:l===17?T2:l===16?z7:l===15?Eb:l===14?I2:l===13?S2:l===12?B7:l===11?b2:void Oe(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new n0(a,this.ci?this.ci.next():Xr.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw Fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ee(B.FAILED_PRECONDITION,h2);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Ud(e).get(cc).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,nw)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(B.FAILED_PRECONDITION,rw)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ud(e).put(cc,n)}static v(){return Si.v()}Zi(e){const n=Ud(e);return n.get(cc).next(r=>this.es(r)?(re(bo,"Releasing primary lease."),n.delete(cc)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Fn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;eD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return re(bo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fn(bo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Fn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ud(t){return rr(t,kf)}function Rm(t){return rr(t,Du)}function jb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=dt(),s=dt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ub(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return eD()?8:m2(tr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new rK;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Sc()<=Ct.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Ic(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Sc()<=Ct.DEBUG&&re("QueryEngine","Query:",Ic(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Sc()<=Ct.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Ic(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):M.resolve())}ys(e,n){if(SA(n))return M.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=wg(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=dt(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,wg(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return SA(n)||s.isEqual(Ge.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(Sc()<=Ct.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ic(n)),this.vs(e,o,n,u2(s,Au)).next(a=>a))})}Ds(e,n){let r=new Ht(Q2(e));return n.forEach((s,i)=>{Of(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Sc()<=Ct.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Ic(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="LocalStore",sK=3e8;class iK{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new rn(rt),this.xs=new lo(i=>Ol(i),Nf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UO(t,e,n,r){return new iK(t,e,n,r)}async function $O(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=dt();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function oK(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let p=M.resolve();return f.forEach(_=>{p=p.next(()=>u.getEntry(l,_)).next(g=>{const b=c.docVersions.get(_);ze(b!==null,48541),g.version.compareTo(b)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=dt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function BO(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function aK(t,e){const n=Ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,u.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Pn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(h,p),function(g,b,E){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=sK?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,u)&&a.push(n.Pi.updateTargetData(i,p))});let l=es(),c=dt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(zO(i,o,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!r.isEqual(Ge.min())){const u=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function zO(t,e,n){let r=dt(),s=dt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=es();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re($b,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function lK(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ca),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uu(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Bi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function $u(t,e,n){const r=Ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Na(o))throw o;re($b,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Ig(t,e,n){const r=Ee(t);let s=Ge.min(),i=dt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ee(l),f=h.xs.get(u);return f!==void 0?M.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,u)}(r,o,Nr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ge.min(),n?i:dt())).next(a=>(HO(r,G2(e),a),{documents:a,Qs:i})))}function WO(t,e){const n=Ee(t),r=Ee(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function qO(t,e){const n=Ee(t),r=n.Os.get(e)||Ge.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,u2(r,Au),Number.MAX_SAFE_INTEGER)).then(s=>(HO(n,e,s),s))}function HO(t,e,n){let r=t.Os.get(e)||Ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}async function cK(t,e,n,r){const s=Ee(t);let i=dt(),o=es();for(const c of n){const u=e.$s(c.metadata.name);c.document&&(i=i.add(u));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(u,h)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),l=await Uu(s,function(u){return Nr(od(It.fromString(`__bundle__/docs/${u}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>zO(c,a,o).next(u=>(a.apply(c),u)).next(u=>s.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Pi.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,u.ks,u.qs)).next(()=>u.ks)))}async function uK(t,e,n=dt()){const r=await Uu(t,Nr(My(e.bundledQuery))),s=Ee(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Un(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const a=r.withResumeToken(Pn.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(i,a).next(()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Pi.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ii.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="firestore_clients";function eP(t,e){return`${KO}_${t}_${e}`}const GO="firestore_mutations";function tP(t,e,n){let r=`${GO}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const QO="firestore_targets";function sw(t,e){return`${QO}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="SharedClientState";class Tg{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ee(s.error.code,s.error.message))),o?new Tg(e,n,s.state,i):(Fn(di,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ee(r.error.code,r.error.message))),i?new bh(e,r.state,s):(Fn(di,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=xb();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=p2(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new xg(e,i):(Fn(di,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Bb{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Bb(n.clientId,n.onlineState):(Fn(di,`Failed to parse online state: ${e}`),null)}}class g0{constructor(){this.activeTargetIds=xb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iw{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new rn(rt),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=eP(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new g0),this.ro=new RegExp(`^${KO}_${o}_([^_]*)$`),this.io=new RegExp(`^${GO}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${QO}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(eP(this.persistenceKey,r));if(s){const i=xg.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(sw(this.persistenceKey,e));if(s){const i=bh.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sw(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return re(di,"READ",e,n),n}setItem(e,n){re(di,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){re(di,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(re(di,"EVENT",n.key,n.newValue),n.key===this.eo)return void Fn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=Xr.ce;if(i!=null)try{const a=JSON.parse(i);ze(typeof a=="number",30636,{So:i}),o=a}catch(a){Fn(di,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Xr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new Tg(this.currentUser,e,n,r),i=tP(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=tP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=sw(this.persistenceKey,e),i=new bh(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return xg.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Tg.Ws(new hr(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return bh.Ws(s,n)}uo(e){return Bb.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);re(di,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=xb();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class YO{constructor(){this.Mo=new g0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="ConnectivityMonitor";class rP{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(nP,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(nP,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm=null;function y0(){return Cm===null?Cm=function(){return 268435456+Math.round(2147483648*Math.random())}():Cm++,"0x"+Cm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="RestConnection",hK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===nf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=y0(),a=this.zo(e,n.toUriEncodedString());re(ow,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),u=ei(c);return this.Jo(e,a,l,r,u).then(h=>(re(ow,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ws(ow,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+id}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=hK[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="WebChannelConnection";class pK extends fK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=y0();return new Promise((a,l)=>{const c=new JD;c.setWithCredentials(!0),c.listenOnce(XD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ap.NO_ERROR:const h=c.getResponseJson();re(Ar,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case ap.TIMEOUT:re(Ar,`RPC '${e}' ${o} timed out`),l(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case ap.HTTP_ERROR:const f=c.getStatus();if(re(Ar,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const g=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(_.status);l(new ee(g,_.message))}else l(new ee(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ee(B.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{re(Ar,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(s);re(Ar,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",u,r,15)})}T_(e,n,r){const s=y0(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t2(),a=e2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");re(Ar,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let f=!1,p=!1;const _=new mK({Yo:b=>{p?re(Ar,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(f||(re(Ar,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),re(Ar,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Zo:()=>h.close()}),g=(b,E,w)=>{b.listen(E,S=>{try{w(S)}catch(P){setTimeout(()=>{throw P},0)}})};return g(h,Yd.EventType.OPEN,()=>{p||(re(Ar,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),g(h,Yd.EventType.CLOSE,()=>{p||(p=!0,re(Ar,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(h))}),g(h,Yd.EventType.ERROR,b=>{p||(p=!0,ws(Ar,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),_.a_(new ee(B.UNAVAILABLE,"The operation could not be completed")))}),g(h,Yd.EventType.MESSAGE,b=>{var E;if(!p){const w=b.data[0];ze(!!w,16349);const S=w,P=(S==null?void 0:S.error)||((E=S[0])==null?void 0:E.error);if(P){re(Ar,`RPC '${e}' stream ${s} received error:`,P);const x=P.status;let O=function(R){const N=Wn[R];if(N!==void 0)return cO(N)}(x),T=P.message;O===void 0&&(O=B.INTERNAL,T="Unknown error status: "+x+" with message "+P.message),p=!0,_.a_(new ee(O,T)),h.close()}else re(Ar,`RPC '${e}' stream ${s} received:`,w),_.u_(w)}}),g(a,ZD.STAT_EVENT,b=>{b.stat===G_.PROXY?re(Ar,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===G_.NOPROXY&&re(Ar,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(){return typeof window<"u"?window:null}function gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return new EH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="PersistentStream";class XO{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Fn(n.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ee(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(sP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(sP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gK extends XO{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IH(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?Un(o.readTime):Ge.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=d0(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=yg(l)?{documents:vO(i,l)}:{query:Ly(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fO(i,o.resumeToken);const c=c0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ge.min())>0){a.readTime=ju(i,o.snapshotVersion.toTimestamp());const c=c0(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=xH(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=d0(this.serializer),n.removeTarget=e,this.q_(n)}}class yK extends XO{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=TH(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=d0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lf(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{}class wK extends vK{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,u0(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,u0(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class _K{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fn(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="RemoteStore";class EK{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Oa(this)&&(re(Ul,"Restarting streams for network reachability change."),await async function(l){const c=Ee(l);c.Ea.add(4),await cd(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ff(c)}(this))})}),this.Ra=new _K(r,s)}}async function Ff(t){if(Oa(t))for(const e of t.da)await e(!0)}async function cd(t){for(const e of t.da)await e(!1)}function Uy(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hb(n)?qb(n):dd(n).O_()&&Wb(n,e))}function Bu(t,e){const n=Ee(t),r=dd(n);n.Ia.delete(e),r.O_()&&ZO(n,e),n.Ia.size===0&&(r.O_()?r.L_():Oa(n)&&n.Ra.set("Unknown"))}function Wb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dd(t).Y_(e)}function ZO(t,e){t.Va.Ue(e),dd(t).Z_(e)}function qb(t){t.Va=new yH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dd(t).start(),t.Ra.ua()}function Hb(t){return Oa(t)&&!dd(t).x_()&&t.Ia.size>0}function Oa(t){return Ee(t).Ea.size===0}function eL(t){t.Va=void 0}async function bK(t){t.Ra.set("Online")}async function SK(t){t.Ia.forEach((e,n)=>{Wb(t,e)})}async function IK(t,e){eL(t),Hb(t)?(t.Ra.ha(e),qb(t)):t.Ra.set("Unknown")}async function TK(t,e,n){if(t.Ra.set("Online"),e instanceof hO&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){re(Ul,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ag(t,r)}else if(e instanceof mp?t.Va.Ze(e):e instanceof dO?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ge.min()))try{const r=await BO(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Ia.get(c);u&&i.Ia.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.Ia.get(l);if(!u)return;i.Ia.set(l,u.withResumeToken(Pn.EMPTY_BYTE_STRING,u.snapshotVersion)),ZO(i,l);const h=new Bi(u.target,l,c,u.sequenceNumber);Wb(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){re(Ul,"Failed to raise snapshot:",r),await Ag(t,r)}}async function Ag(t,e,n){if(!Na(e))throw e;t.Ea.add(1),await cd(t),t.Ra.set("Offline"),n||(n=()=>BO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(Ul,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ff(t)})}function tL(t,e){return e().catch(n=>Ag(t,n,e))}async function ud(t){const e=Ee(t),n=Sa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ca;for(;xK(e);)try{const s=await lK(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,AK(e,s)}catch(s){await Ag(e,s)}nL(e)&&rL(e)}function xK(t){return Oa(t)&&t.Ta.length<10}function AK(t,e){t.Ta.push(e);const n=Sa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function nL(t){return Oa(t)&&!Sa(t).x_()&&t.Ta.length>0}function rL(t){Sa(t).start()}async function PK(t){Sa(t).ra()}async function RK(t){const e=Sa(t);for(const n of t.Ta)e.ea(n.mutations)}async function CK(t,e,n){const r=t.Ta.shift(),s=Cb.from(r,e,n);await tL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ud(t)}async function kK(t,e){e&&Sa(t).X_&&await async function(r,s){if(function(o){return lO(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();Sa(r).B_(),await tL(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ud(r)}}(t,e),nL(t)&&rL(t)}async function iP(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),re(Ul,"RemoteStore received new credentials");const r=Oa(n);n.Ea.add(3),await cd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ff(n)}async function v0(t,e){const n=Ee(t);e?(n.Ea.delete(2),await Ff(n)):e||(n.Ea.add(2),await cd(n),n.Ra.set("Unknown"))}function dd(t){return t.ma||(t.ma=function(n,r,s){const i=Ee(n);return i.sa(),new gK(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:bK.bind(null,t),t_:SK.bind(null,t),r_:IK.bind(null,t),H_:TK.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Hb(t)?qb(t):t.Ra.set("Unknown")):(await t.ma.stop(),eL(t))})),t.ma}function Sa(t){return t.fa||(t.fa=function(n,r,s){const i=Ee(n);return i.sa(),new yK(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:PK.bind(null,t),r_:kK.bind(null,t),ta:RK.bind(null,t),na:CK.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ud(t)):(await t.fa.stop(),t.Ta.length>0&&(re(Ul,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Kb(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hd(t,e){if(Fn("AsyncQueue",`${e}: ${t}`),Na(t))return new ee(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{static emptySet(e){return new El(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=Jd(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new El;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.ga=new rn(we.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $l{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $l(e,n,El.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class DK{constructor(){this.queries=aP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ee(n),i=s.queries;s.queries=aP(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ee(B.ABORTED,"Firestore shutting down"))}}function aP(){return new lo(t=>K2(t),Df)}async function Gb(t,e){const n=Ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new NK,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=hd(o,`Initialization of query '${Ic(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Yb(n)}async function Qb(t,e){const n=Ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OK(t,e){const n=Ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Yb(n)}function LK(t,e,n){const r=Ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Yb(t){t.Ca.forEach(e=>{e.next()})}var w0,lP;(lP=w0||(w0={})).Ma="default",lP.Cache="cache";class Jb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $l(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==w0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.serializer=e}$s(e){return Ii(this.serializer,e)}Us(e){return e.metadata.exists?Oy(this.serializer,e.document,!1):an.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Un(e)}}class Xb{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=iL(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=It.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new cP(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||dt()).add(i);n.set(o,a)}}return n}async ja(e){const n=await cK(e,new cP(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await uK(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function iL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.key=e}}class aL{constructor(e){this.key=e}}class lL{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=Q2(e),this.tu=new El(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new oP,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const f=s.get(u),p=Of(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;f&&p?f.data.isEqual(p.data)?_!==g&&(r.track({type:3,doc:p}),b=!0):this.su(f,p)||(r.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),b=!0):f&&!p&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(p?(o=o.add(p),i=g?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,h)=>function(p,_){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:b})}};return g(p)-g(_)}(u.type,h.type)||this.eu(u.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new $l(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new aL(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new oL(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=dt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const La="SyncEngine";class MK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VK{constructor(e){this.key=e,this.hu=!1}}class FK{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new lo(a=>K2(a),Df),this.Iu=new Map,this.Eu=new Set,this.du=new rn(we.comparator),this.Au=new Map,this.Ru=new Mb,this.Vu={},this.mu=new Map,this.fu=jl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jK(t,e,n=!0){const r=$y(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await cL(r,e,n,!0),s}async function UK(t,e){const n=$y(t);await cL(n,e,!0,!1)}async function cL(t,e,n,r){const s=await Uu(t.localStore,Nr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Zb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Uy(t.remoteStore,s),a}async function Zb(t,e,n,r,s){t.pu=(h,f,p)=>async function(g,b,E,w){let S=b.view.ru(E);S.Cs&&(S=await Ig(g.localStore,b.query,!1).then(({documents:T})=>b.view.ru(T,S)));const P=w&&w.targetChanges.get(b.targetId),x=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(S,g.isPrimaryClient,P,x);return _0(g,b.targetId,O.au),O.snapshot}(t,h,f,p);const i=await Ig(t.localStore,e,!0),o=new lL(e,i.Qs),a=o.ru(i.documents),l=Vf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);_0(t,n,c.au);const u=new MK(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function $K(t,e,n){const r=Ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Df(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $u(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bu(r.remoteStore,s.targetId),zu(r,s.targetId)}).catch(ka)):(zu(r,s.targetId),await $u(r.localStore,s.targetId,!0))}async function BK(t,e){const n=Ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bu(n.remoteStore,r.targetId))}async function zK(t,e,n){const r=rS(t);try{const s=await function(o,a){const l=Ee(o),c=Vt.now(),u=a.reduce((p,_)=>p.add(_.key),dt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=es(),g=dt();return l.Ns.getEntries(p,u).next(b=>{_=b,_.forEach((E,w)=>{w.isValidDocument()||(g=g.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,_)).next(b=>{h=b;const E=[];for(const w of a){const S=mH(w,h.get(w.key).overlayedDocument);S!=null&&E.push(new co(w.key,S,M2(S.value.mapValue),yn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(b=>{f=b;const E=b.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(p,b.batchId,E)})}).then(()=>({batchId:f.batchId,changes:J2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new rn(rt)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await uo(r,s.changes),await ud(r.remoteStore)}catch(s){const i=hd(s,"Failed to persist write");n.reject(i)}}async function uL(t,e){const n=Ee(t);try{const r=await aK(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ze(o.hu,14607):s.removedDocuments.size>0&&(ze(o.hu,42227),o.hu=!1))}),await uo(n,r,e)}catch(r){await ka(r)}}function uP(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ee(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&Yb(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WK(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new rn(we.comparator);o=o.insert(i,an.newNoDocument(i,Ge.min()));const a=dt().add(i),l=new Mf(Ge.min(),new Map,new rn(rt),o,a);await uL(r,l),r.du=r.du.remove(i),r.Au.delete(e),nS(r)}else await $u(r.localStore,e,!1).then(()=>zu(r,e,n)).catch(ka)}async function qK(t,e){const n=Ee(t),r=e.batch.batchId;try{const s=await oK(n.localStore,e);tS(n,r,null),eS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,s)}catch(s){await ka(s)}}async function HK(t,e,n){const r=Ee(t);try{const s=await function(o,a){const l=Ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ze(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);tS(r,e,n),eS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,s)}catch(s){await ka(s)}}async function KK(t,e){const n=Ee(t);Oa(n.remoteStore)||re(La,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Ee(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===ca)return void e.resolve();const s=n.mu.get(r)||[];s.push(e),n.mu.set(r,s)}catch(r){const s=hd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function eS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function tS(t,e,n){const r=Ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function zu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||dL(t,r)})}function dL(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),nS(t))}function _0(t,e,n){for(const r of n)r instanceof oL?(t.Ru.addReference(r.key,e),GK(t,r)):r instanceof aL?(re(La,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||dL(t,r.key)):Oe(19791,{wu:r})}function GK(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(re(La,"New document in limbo: "+n),t.Eu.add(r),nS(t))}function nS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new we(It.fromString(e)),r=t.fu.next();t.Au.set(r,new VK(n)),t.du=t.du.insert(n,r),Uy(t.remoteStore,new Bi(Nr(od(n.path)),r,"TargetPurposeLimboResolution",Xr.ce))}}async function uo(t,e,n){const r=Ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Ub.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const u=Ee(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.Es,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>M.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Na(h))throw h;re($b,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=u.Ms.get(f),_=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(_);u.Ms=u.Ms.insert(f,g)}}}(r.localStore,i))}async function QK(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){re(La,"User change. New user:",e.toKey());const r=await $O(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new ee(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uo(n,r.Ls)}}function YK(t,e){const n=Ee(t),r=n.Au.get(e);if(r&&r.hu)return dt().add(r.key);{let s=dt();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function JK(t,e){const n=Ee(t),r=await Ig(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&_0(n,e.targetId,s.au),s}async function XK(t,e){const n=Ee(t);return qO(n.localStore,e).then(r=>uo(n,r))}async function ZK(t,e,n,r){const s=Ee(t),i=await function(a,l){const c=Ee(a),u=Ee(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await ud(s.remoteStore):n==="acknowledged"||n==="rejected"?(tS(s,e,r||null),eS(s,e),function(a,l){Ee(Ee(a).mutationQueue).ir(l)}(s.localStore,e)):Oe(6720,"Unknown batchState",{Su:n}),await uo(s,i)):re(La,"Cannot apply mutation batch with id: "+e)}async function eG(t,e){const n=Ee(t);if($y(n),rS(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await dP(n,r.toArray());n.gu=!0,await v0(n.remoteStore,!0);for(const i of s)Uy(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(zu(n,o),$u(n.localStore,o,!0))),Bu(n.remoteStore,o)}),await s,await dP(n,r),function(o){const a=Ee(o);a.Au.forEach((l,c)=>{Bu(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new rn(we.comparator)}(n),n.gu=!1,await v0(n.remoteStore,!1)}}async function dP(t,e,n){const r=Ee(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Uu(r.localStore,Nr(l[0]));for(const c of l){const u=r.Tu.get(c),h=await JK(r,u);h.snapshot&&i.push(h.snapshot)}}else{const c=await WO(r.localStore,o);a=await Uu(r.localStore,c),await Zb(r,hL(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function hL(t){return W2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tG(t){return function(n){return Ee(Ee(n).persistence).Ts()}(Ee(t).localStore)}async function nG(t,e,n,r){const s=Ee(t);if(s.gu)return void re(La,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await qO(s.localStore,G2(i[0])),a=Mf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Pn.EMPTY_BYTE_STRING);await uo(s,o,a);break}case"rejected":await $u(s.localStore,e,!0),zu(s,e,r);break;default:Oe(64155,n)}}async function rG(t,e,n){const r=$y(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){re(La,"Adding an already active target "+s);continue}const i=await WO(r.localStore,s),o=await Uu(r.localStore,i);await Zb(r,hL(i),o.targetId,!1,o.resumeToken),Uy(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await $u(r.localStore,s,!1).then(()=>{Bu(r.remoteStore,s),zu(r,s)}).catch(ka)}}function $y(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WK.bind(null,e),e.Pu.H_=OK.bind(null,e.eventManager),e.Pu.yu=LK.bind(null,e.eventManager),e}function rS(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HK.bind(null,e),e}function sG(t,e,n){const r=Ee(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(p,_){const g=Ee(p),b=Un(_.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",E=>g.Ii.getBundleMetadata(E,_.id)).then(E=>!!E&&E.createTime.compareTo(b)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(iL(l));const c=new Xb(l,o.serializer);let u=await o.bu();for(;u;){const f=await c.Ga(u);f&&a._updateProgress(f),u=await o.bu()}const h=await c.ja(i.localStore);return await uo(i,h.Ha,void 0),await function(p,_){const g=Ee(p);return g.persistence.runTransaction("Save bundle","readwrite",b=>g.Ii.saveBundleMetadata(b,_))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return ws(La,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UO(this.persistence,new jO,e.initialUser,this.serializer)}Cu(e){return new Vb(jy.mi,this.serializer)}Du(e){return new YO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wu.provider={build:()=>new Wu};class sS extends Wu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Sg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new DO(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new Vb(r=>Sg.mi(r,n),this.serializer)}}class iS extends Wu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await rS(this.xu.syncEngine),await ud(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return UO(this.persistence,new jO,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new DO(r,e.asyncQueue,n)}Mu(e,n){const r=new v7(n,this.persistence);return new y7(e.asyncQueue,r)}Cu(e){const n=jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new Fb(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,JO(),gp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new YO}}class fL extends iS{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof iw&&(this.sharedClientState.syncEngine={Co:ZK.bind(null,n),vo:nG.bind(null,n),Fo:rG.bind(null,n),Ts:tG.bind(null,n),Do:XK.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await eG(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=JO();if(!iw.v(n))throw new ee(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new iw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ia{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QK.bind(null,this.syncEngine),await v0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DK}()}createDatastore(e){const n=nc(e.databaseInfo.databaseId),r=function(i){return new pK(i)}(e.databaseInfo);return function(i,o,a,l){return new wK(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new EK(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>uP(this.syncEngine,n,0),function(){return rP.v()?new rP:new dK}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const h=new FK(s,i,o,a,l,c);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ee(s);re(Ul,"RemoteStore shutting down."),i.Ea.add(5),await cd(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ia.provider={build:()=>new Ia};function hP(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new mr,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const s=await this.$u(r);return new sL(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new sL(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new ee(B.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ee(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=Ee(s),a={documents:i.map(h=>af(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,It.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const f=SH(o.serializer,h);c.set(f.key.toString(),f)});const u=[];return i.forEach(h=>{const f=c.get(h.toString());ze(!!f,55234,{key:h}),u.push(f)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ld(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=we.fromPath(r);this.mutations.push(new Pb(s,this.precondition(s)))}),await async function(r,s){const i=Ee(r),o={writes:s.map(a=>lf(i.serializer,a))};await i.Go("Commit",i.serializer.databaseId,It.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Oe(50498,{Gu:e.constructor.name});n=Ge.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ee(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ge.min())?yn.exists(!1):yn.updateTime(n):yn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ge.min()))throw new ee(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(n)}return yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new zb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new aG(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Yu(s)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!Cf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!lO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="FirestoreClient";class cG{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=hr.UNAUTHENTICATED,this.clientId=Sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re(Ta,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(Ta,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function aw(t,e){t.asyncQueue.verifyOperationInProgress(),re(Ta,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $O(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oS(t);re(Ta,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>iP(e.remoteStore,s)),t._onlineComponents=e}async function oS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Ta,"Using user provided OfflineComponentProvider");try{await aw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ws("Error using user provided cache. Falling back to memory cache: "+n),await aw(t,new Wu)}}else re(Ta,"Using default OfflineComponentProvider"),await aw(t,new sS(void 0));return t._offlineComponents}async function zy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Ta,"Using user provided OnlineComponentProvider"),await fP(t,t._uninitializedComponentsProvider._online)):(re(Ta,"Using default OnlineComponentProvider"),await fP(t,new Ia))),t._onlineComponents}function mL(t){return oS(t).then(e=>e.persistence)}function fd(t){return oS(t).then(e=>e.localStore)}function pL(t){return zy(t).then(e=>e.remoteStore)}function aS(t){return zy(t).then(e=>e.syncEngine)}function gL(t){return zy(t).then(e=>e.datastore)}async function qu(t){const e=await zy(t),n=e.eventManager;return n.onListen=jK.bind(null,e.syncEngine),n.onUnlisten=$K.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BK.bind(null,e.syncEngine),n}function uG(t){return t.asyncQueue.enqueue(async()=>{const e=await mL(t),n=await pL(t);return e.setNetworkEnabled(!0),function(s){const i=Ee(s);return i.Ea.delete(0),Ff(i)}(n)})}function dG(t){return t.asyncQueue.enqueue(async()=>{const e=await mL(t),n=await pL(t);return e.setNetworkEnabled(!1),async function(s){const i=Ee(s);i.Ea.add(0),await cd(i),i.Ra.set("Offline")}(n)})}function hG(t,e){const n=new mr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,u){const h=Ee(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,u))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new ee(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=hd(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await fd(t),e,n)),n.promise}function yL(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new By({next:f=>{u.Nu(),o.enqueueAndForget(()=>Qb(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new ee(B.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new ee(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Jb(od(a.path),u,{includeMetadataChanges:!0,qa:!0});return Gb(i,h)}(await qu(t),t.asyncQueue,e,n,r)),r.promise}function fG(t,e){const n=new mr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await Ig(s,i,!0),l=new lL(i,a.Qs),c=l.ru(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=hd(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await fd(t),e,n)),n.promise}function vL(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new By({next:f=>{u.Nu(),o.enqueueAndForget(()=>Qb(i,h)),f.fromCache&&l.source==="server"?c.reject(new ee(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Jb(a,u,{includeMetadataChanges:!0,qa:!0});return Gb(i,h)}(await qu(t),t.asyncQueue,e,n,r)),r.promise}function mG(t,e,n){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await gL(t);r.resolve(async function(o,a,l){var g;const c=Ee(o),{request:u,gt:h,parent:f}=wO(c.serializer,q2(a),l);c.connection.$o||delete u.parent;const p=(await c.Ho("RunAggregationQuery",c.serializer.databaseId,f,u,1)).filter(b=>!!b.result);ze(p.length===1,64727);const _=(g=p[0].result)==null?void 0:g.aggregateFields;return Object.keys(_).reduce((b,E)=>(b[h[E]]=_[E],b),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function pG(t,e){const n=new By(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){Ee(s).Ca.add(i),i.next()}(await qu(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){Ee(s).Ca.delete(i)}(await qu(t),n))}}function gG(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?uO().encode(o):o,function(u,h){return new iG(u,h)}(function(u,h){if(u instanceof Uint8Array)return hP(u,h);if(u instanceof ArrayBuffer)return hP(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,nc(e));t.asyncQueue.enqueueAndForget(async()=>{sG(await aS(t),s,r)})}function yG(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=Ee(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ii.getNamedQuery(o,s))}(await fd(t),e))}function wL(t,e){return function(r,s){return new oG(r,s)}(t,e)}function vG(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=Ee(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,f,p,_,g){h=[...h],f=[...f],h.sort(p),f.sort(p);const b=h.length,E=f.length;let w=0,S=0;for(;w<E&&S<b;){const P=p(h[S],f[w]);P<0?g(h[S++]):P>0?_(f[w++]):(w++,S++)}for(;w<E;)_(f[w++]);for(;S<b;)g(h[S++])}(c,s,f7,u=>{a.push(o.addFieldIndex(l,u))},u=>{a.push(o.deleteFieldIndex(l,u))})).next(()=>M.waitFor(a)))}(await fd(t),e))}function wG(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){Ee(r).Fs.Vs=s}(await fd(t),e))}function _G(t){return t.asyncQueue.enqueue(async()=>function(n){const r=Ee(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await fd(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="firestore.googleapis.com",pP=!0;class gP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EL,this.ssl=pP}else this.host=e.host,this.ssl=e.ssl??pP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NO)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_L(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i2;switch(r.type){case"firstParty":return new o7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mP.get(n);r&&(re("ComponentProvider","Removing Datastore"),mP.delete(n),r.terminate())}(this),Promise.resolve()}}function bL(t,e,n,r={}){var c;t=Tt(t,jf);const s=ei(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(If(`https://${a}`),yy("Firestore",!0)),i.host!==EL&&i.host!==a&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Qs(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=hr.MOCK_USER;else{u=XN(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new hr(f)}t._authCredentials=new r7(new s2(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nr(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tc(n,Wt._jsonSchema))return new Wt(e,r||null,new we(It.fromString(n.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:Hn("string",Wt._jsonSchemaVersion),referencePath:Hn("string")};class Ws extends nr{constructor(e,n,r){super(e,n,od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new we(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function De(t,e,...n){if(t=wt(t),pb("collection","path",e),t instanceof jf){const r=It.fromString(e,...n);return sA(r),new Ws(t,null,r)}{if(!(t instanceof Wt||t instanceof Ws))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return sA(r),new Ws(t.firestore,null,r)}}function EG(t,e){if(t=Tt(t,jf),pb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new nr(t,null,function(r){return new ao(It.emptyPath(),r)}(e))}function Ce(t,e,...n){if(t=wt(t),arguments.length===1&&(e=Sy.newId()),pb("doc","path",e),t instanceof jf){const r=It.fromString(e,...n);return rA(r),new Wt(t,null,new we(r))}{if(!(t instanceof Wt||t instanceof Ws))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return rA(r),new Wt(t.firestore,t instanceof Ws?t.converter:null,new we(r))}}function bG(t,e){return t=wt(t),e=wt(e),(t instanceof Wt||t instanceof Ws)&&(e instanceof Wt||e instanceof Ws)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function lS(t,e){return t=wt(t),e=wt(e),t instanceof nr&&e instanceof nr&&t.firestore===e.firestore&&Df(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="AsyncQueue";class vP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zb(this,"async_queue_retry"),this._c=()=>{const r=gp();r&&re(yP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new mr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Na(e))throw e;re(yP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fn("INTERNAL UNHANDLED ERROR: ",wP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Kb.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Oe(47125,{Pc:wP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class SL{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG=-1;class Qt extends jf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vP,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vP(e),this._firestoreClient=void 0,await e}}}function IL(t,e,n){n||(n=nf);const r=Xl(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Qs(i,e))return s;throw new ee(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ee(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NO)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ei(e.host)&&If(e.host),r.initialize({options:e,instanceIdentifier:n})}function IG(t,e){const n=typeof t=="object"?t:wy(),r=typeof t=="string"?t:e||nf,s=Xl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=tb("firestore");i&&bL(s,...i)}return s}function vn(t){if(t._terminated)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TL(t),t._firestoreClient}function TL(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,u){return new K7(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,_L(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new cG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function TG(t,e){ws("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return xL(t,Ia.provider,{build:r=>new iS(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function xG(t){ws("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();xL(t,Ia.provider,{build:n=>new fL(n,e.cacheSizeBytes)})}function xL(t,e,n){if((t=Tt(t,Qt))._firestoreClient||t._terminated)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ee(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},TL(t)}function AG(t){if(t._initialized&&!t._terminated)throw new ee(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Si.v())return Promise.resolve();const s=r+FO;await Si.delete(s)}(jb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function PG(t){return function(n){const r=new mr;return n.asyncQueue.enqueueAndForget(async()=>KK(await aS(n),r)),r.promise}(vn(t=Tt(t,Qt)))}function cS(t){return uG(vn(t=Tt(t,Qt)))}function uS(t){return dG(vn(t=Tt(t,Qt)))}function RG(t){return Jz(t.app,"firestore",t._databaseId.database),t._delete()}function E0(t,e){const n=vn(t=Tt(t,Qt)),r=new SL;return gG(n,t._databaseId,e,r),r}function AL(t,e){return yG(vn(t=Tt(t,Qt)),e).then(n=>n?new nr(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class PL{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qr(Pn.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qr(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tc(e,Qr._jsonSchema))return Qr.fromBase64String(e.bytes)}}Qr._jsonSchemaVersion="firestore/bytes/1.0",Qr._jsonSchema={type:Hn("string",Qr._jsonSchemaVersion),bytes:Hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function CG(){return new Ma(J_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qs._jsonSchemaVersion}}static fromJSON(e){if(tc(e,qs._jsonSchema))return new qs(e.latitude,e.longitude)}}qs._jsonSchemaVersion="firestore/geoPoint/1.0",qs._jsonSchema={type:Hn("string",qs._jsonSchemaVersion),latitude:Hn("number"),longitude:Hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tc(e,Cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cs(e.vectorValues);throw new ee(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cs._jsonSchemaVersion="firestore/vectorValue/1.0",Cs._jsonSchema={type:Hn("string",Cs._jsonSchemaVersion),vectorValues:Hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG=/^__.*__$/;class NG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,n,this.fieldTransforms):new ad(e,this.data,n,this.fieldTransforms)}}class RL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:t})}}class Wy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CL(this.Ac)&&kG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nc(e)}Cc(e,n,r,s=!1){return new Wy({Ac:e,methodName:n,Dc:r,path:ln.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rc(t){const e=t._freezeSettings(),n=nc(t._databaseId);return new DG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qy(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);yS("Data must be an object, but it was:",o,r);const a=DL(r,o);let l,c;if(i.merge)l=new Zr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=cf(e,h,n);if(!o.contains(f))throw new ee(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);LL(u,f)||u.push(f)}l=new Zr(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new NG(new _r(a),l,c)}class Uf extends Va{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uf}}function kL(t,e,n){return new Wy({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dS extends Va{_toFieldTransform(e){return new Lf(e.path,new Vu)}isEqual(e){return e instanceof dS}}class hS extends Va{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=kL(this,e,!0),r=this.vc.map(i=>sc(i,n)),s=new Ll(r);return new Lf(e.path,s)}isEqual(e){return e instanceof hS&&Qs(this.vc,e.vc)}}class fS extends Va{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=kL(this,e,!0),r=this.vc.map(i=>sc(i,n)),s=new Ml(r);return new Lf(e.path,s)}isEqual(e){return e instanceof fS&&Qs(this.vc,e.vc)}}class mS extends Va{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Fu(e.serializer,eO(e.serializer,this.Fc));return new Lf(e.path,n)}isEqual(e){return e instanceof mS&&this.Fc===e.Fc}}function pS(t,e,n,r){const s=t.Cc(1,e,n);yS("Data must be an object, but it was:",s,r);const i=[],o=_r.empty();Da(r,(l,c)=>{const u=Hy(e,l,n);c=wt(c);const h=s.yc(u);if(c instanceof Uf)i.push(u);else{const f=sc(c,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new Zr(i);return new RL(o,a,s.fieldTransforms)}function gS(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[cf(e,r,n)],l=[s];if(i.length%2!=0)throw new ee(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(cf(e,i[f])),l.push(i[f+1]);const c=[],u=_r.empty();for(let f=a.length-1;f>=0;--f)if(!LL(c,a[f])){const p=a[f];let _=l[f];_=wt(_);const g=o.yc(p);if(_ instanceof Uf)c.push(p);else{const b=sc(_,g);b!=null&&(c.push(p),u.set(p,b))}}const h=new Zr(c);return new RL(u,h,o.fieldTransforms)}function NL(t,e,n,r=!1){return sc(n,t.Cc(r?4:3,e))}function sc(t,e){if(OL(t=wt(t)))return yS("Unsupported field value:",e,t),DL(t,e);if(t instanceof Va)return function(r,s){if(!CL(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=sc(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Vt.fromDate(r);return{timestampValue:ju(s.serializer,i)}}if(r instanceof Vt){const i=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ju(s.serializer,i)}}if(r instanceof qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qr)return{bytesValue:fO(s.serializer,r._byteString)};if(r instanceof Wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Db(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cs)return function(o,a){return{mapValue:{fields:{[bb]:{stringValue:Sb},[Ou]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Ab(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Iy(r)}`)}(t,e)}function DL(t,e){const n={};return A2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(t,(r,s)=>{const i=sc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function OL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof qs||t instanceof Qr||t instanceof Wt||t instanceof Va||t instanceof Cs)}function yS(t,e,n){if(!OL(n)||!l2(n)){const r=Iy(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function cf(t,e,n){if((e=wt(e))instanceof Ma)return e._internalPath;if(typeof e=="string")return Hy(t,e);throw Pg("Field path arguments must be of type string or ",t,!1,void 0,n)}const OG=new RegExp("[~\\*/\\[\\]]");function Hy(t,e,n){if(e.search(OG)>=0)throw Pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ma(...e.split("."))._internalPath}catch{throw Pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pg(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ee(B.INVALID_ARGUMENT,a+t+l)}function LL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ky("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LG extends uf{data(){return super.data()}}function Ky(t,e){return typeof e=="string"?Hy(t,e):e instanceof Ma?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vS{}class md extends vS{}function Qe(t,e,...n){let r=[];e instanceof vS&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof ic).length,a=i.filter(l=>l instanceof pd).length;if(o>1||o>0&&a>0)throw new ee(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class pd extends md{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pd(e,n,r)}_apply(e){const n=this._parse(e);return FL(e._query,n),new nr(e.firestore,e.converter,l0(e._query,n))}_parse(e){const n=rc(e.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ee(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){EP(h,u);const _=[];for(const g of h)_.push(_P(l,i,g));f={arrayValue:{values:_}}}else f=_P(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||EP(h,u),f=NL(a,o,h,u==="in"||u==="not-in");return kt.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qe(t,e,n){const r=e,s=Ky("where",t);return pd._create(s,r,n)}class ic extends vS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ic(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)FL(o,l),o=l0(o,l)}(e._query,n),new nr(e.firestore,e.converter,l0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function MG(...t){return t.forEach(e=>jL("or",e)),ic._create("or",t)}function VG(...t){return t.forEach(e=>jL("and",e)),ic._create("and",t)}class Gy extends md{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new of(i,o)}(e._query,this._field,this._direction);return new nr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ao(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Hi(t,e="asc"){const n=e,r=Ky("orderBy",t);return Gy._create(r,n)}class $f extends md{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $f(e,n,r)}_apply(e){return new nr(e.firestore,e.converter,wg(e._query,this._limit,this._limitType))}}function Bl(t){return c2("limit",t),$f._create("limit",t,"F")}function FG(t){return c2("limitToLast",t),$f._create("limitToLast",t,"L")}class Bf extends md{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=VL(e,this.type,this._docOrFields,this._inclusive);return new nr(e.firestore,e.converter,function(s,i){return new ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function jG(...t){return Bf._create("startAt",t,!0)}function UG(...t){return Bf._create("startAfter",t,!1)}class zf extends md{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new zf(e,n,r)}_apply(e){const n=VL(e,this.type,this._docOrFields,this._inclusive);return new nr(e.firestore,e.converter,function(s,i){return new ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function $G(...t){return zf._create("endBefore",t,!1)}function BG(...t){return zf._create("endAt",t,!0)}function VL(t,e,n,r){if(n[0]=wt(n[0]),n[0]instanceof uf)return function(i,o,a,l,c){if(!l)throw new ee(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of su(i))if(h.field.isKeyField())u.push(Dl(o,l.key));else{const f=l.data.field(h.field);if(Ry(f))throw new ee(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=h.field.canonicalString();throw new ee(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(f)}return new ba(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=rc(t.firestore);return function(o,a,l,c,u,h){const f=o.explicitOrderBy;if(u.length>f.length)throw new ee(B.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let _=0;_<u.length;_++){const g=u[_];if(f[_].field.isKeyField()){if(typeof g!="string")throw new ee(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!Tb(o)&&g.indexOf("/")!==-1)throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);const b=o.path.child(It.fromString(g));if(!we.isDocumentKey(b))throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const E=new we(b);p.push(Dl(a,E))}else{const b=NL(l,c,g);p.push(b)}}return new ba(p,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function _P(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tb(e)&&n.indexOf("/")!==-1)throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!we.isDocumentKey(r))throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dl(t,new we(r))}if(n instanceof Wt)return Dl(t,n._key);throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iy(n)}.`)}function EP(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FL(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function jL(t,e){if(!(e instanceof pd||e instanceof ic))throw new ee(B.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class wS{convertValue(e,n="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Da(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Ou].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>pn(o.doubleValue));return new Cs(n)}convertGeoPoint(e){return new qs(pn(e.latitude),pn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tf(e));default:return null}}convertTimestamp(e){const n=ro(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);ze(SO(r),9688,{name:e});const s=new wa(r.get(1),r.get(3)),i=new we(r.popFirst(5));return s.isEqual(n)||Fn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class _S extends wS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(t){return new Hu("sum",cf("sum",t))}function WG(t){return new Hu("avg",cf("average",t))}function UL(){return new Hu("count")}function qG(t,e){var n,r;return t instanceof Hu&&e instanceof Hu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function HG(t,e){return lS(t.query,e.query)&&Qs(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="NOT SUPPORTED";class zi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class is extends uf{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ky("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=is._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function KG(t,e,n){if(tc(e,is._jsonSchema)){if(e.bundle===$L)throw new ee(B.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=nc(t._databaseId),s=wL(e.bundle,r),i=s.Wu(),o=new Xb(s.getMetadata(),r);for(const u of i)o.Ga(u);const a=o.documents;if(a.length!==1)throw new ee(B.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=Oy(r,a[0].document),c=new we(It.fromString(e.bundleName));return new is(t,new _S(t),c,l,new zi(!1,!1),n||null)}}is._jsonSchemaVersion="firestore/documentSnapshot/1.0",is._jsonSchema={type:Hn("string",is._jsonSchemaVersion),bundleSource:Hn("string","DocumentSnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Sh extends is{data(e={}){return super.data(e)}}class os{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new zi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Sh(this._firestore,this._userDataWriter,r.key,r,new zi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Sh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new zi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Sh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new zi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:QG(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=os._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GG(t,e,n){if(tc(e,os._jsonSchema)){if(e.bundle===$L)throw new ee(B.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=nc(t._databaseId),s=wL(e.bundle,r),i=s.Wu(),o=new Xb(s.getMetadata(),r);for(const f of i)o.Ga(f);if(o.queries.length!==1)throw new ee(B.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=My(o.queries[0].bundledQuery),l=o.documents;let c=new El;l.map(f=>{const p=Oy(r,f.document);c=c.add(p)});const u=$l.fromInitialDocuments(a,c,dt(),!1,!1),h=new nr(t,n||null,a);return new os(t,new _S(t),h,u)}}function QG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:t})}}function YG(t,e){return t instanceof is&&e instanceof is?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof os&&e instanceof os&&t._firestore===e._firestore&&lS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t){t=Tt(t,Wt);const e=Tt(t.firestore,Qt);return yL(vn(e),t._key).then(n=>ES(e,t,n))}os._jsonSchemaVersion="firestore/querySnapshot/1.0",os._jsonSchema={type:Hn("string",os._jsonSchemaVersion),bundleSource:Hn("string","QuerySnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Fa extends wS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function JG(t){t=Tt(t,Wt);const e=Tt(t.firestore,Qt),n=vn(e),r=new Fa(e);return hG(n,t._key).then(s=>new is(e,r,t._key,s,new zi(s!==null&&s.hasLocalMutations,!0),t.converter))}function XG(t){t=Tt(t,Wt);const e=Tt(t.firestore,Qt);return yL(vn(e),t._key,{source:"server"}).then(n=>ES(e,t,n))}function Ye(t){t=Tt(t,nr);const e=Tt(t.firestore,Qt),n=vn(e),r=new Fa(e);return ML(t._query),vL(n,t._query).then(s=>new os(e,r,t,s))}function ZG(t){t=Tt(t,nr);const e=Tt(t.firestore,Qt),n=vn(e),r=new Fa(e);return fG(n,t._query).then(s=>new os(e,r,t,s))}function eQ(t){t=Tt(t,nr);const e=Tt(t.firestore,Qt),n=vn(e),r=new Fa(e);return vL(n,t._query,{source:"server"}).then(s=>new os(e,r,t,s))}function en(t,e,n){t=Tt(t,Wt);const r=Tt(t.firestore,Qt),s=Qy(t.converter,e,n);return gd(r,[qy(rc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yn.none())])}function cn(t,e,n,...r){t=Tt(t,Wt);const s=Tt(t.firestore,Qt),i=rc(s);let o;return o=typeof(e=wt(e))=="string"||e instanceof Ma?gS(i,"updateDoc",t._key,e,n,r):pS(i,"updateDoc",t._key,e),gd(s,[o.toMutation(t._key,yn.exists(!0))])}function Xt(t){return gd(Tt(t.firestore,Qt),[new ld(t._key,yn.none())])}function ys(t,e){const n=Tt(t.firestore,Qt),r=Ce(t),s=Qy(t.converter,e);return gd(n,[qy(rc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}function df(t,...e){var l,c,u;t=wt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||iu(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(iu(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(u=h.complete)==null?void 0:u.bind(h)}let i,o,a;if(t instanceof Wt)o=Tt(t.firestore,Qt),a=od(t._key.path),i={next:h=>{e[r]&&e[r](ES(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Tt(t,nr);o=Tt(h.firestore,Qt),a=h._query;const f=new Fa(o);i={next:p=>{e[r]&&e[r](new os(o,f,h,p))},error:e[r+1],complete:e[r+2]},ML(t._query)}return function(f,p,_,g){const b=new By(g),E=new Jb(p,b,_);return f.asyncQueue.enqueueAndForget(async()=>Gb(await qu(f),E)),()=>{b.Nu(),f.asyncQueue.enqueueAndForget(async()=>Qb(await qu(f),E))}}(vn(o),a,s,i)}function tQ(t,e,...n){const r=wt(t),s=function(l){const c={bundle:"",bundleName:"",bundleSource:""},u=["bundle","bundleName","bundleSource"];for(const h of u){if(!(h in l)){c.error=`snapshotJson missing required field: ${h}`;break}const f=l[h];if(typeof f!="string"){c.error=`snapshotJson field '${h}' must be a string.`;break}if(f.length===0){c.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?c.bundle=f:h==="bundleName"?c.bundleName=f:h==="bundleSource"&&(c.bundleSource=f)}return c}(e);if(s.error)throw new ee(B.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof n[o]!="object"||iu(n[o])||(i=n[o++]),s.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&iu(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,u,h,f,p){let _,g=!1;return E0(c,u.bundle).then(()=>AL(c,u.bundleName)).then(E=>{E&&!g&&(p&&E.withConverter(p),_=df(E,h||{},f))}).catch(E=>(f.error&&f.error(E),()=>{})),()=>{g||(g=!0,_&&_())}}(r,s,i,a,n[o])}if(s.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&iu(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,u,h,f,p){let _,g=!1;return E0(c,u.bundle).then(()=>{if(!g){const E=new Wt(c,p||null,we.fromPath(u.bundleName));_=df(E,h||{},f)}}).catch(E=>(f.error&&f.error(E),()=>{})),()=>{g||(g=!0,_&&_())}}(r,s,i,a,n[o])}throw new ee(B.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function nQ(t,e){return pG(vn(t=Tt(t,Qt)),iu(e)?e:{next:e})}function gd(t,e){return function(r,s){const i=new mr;return r.asyncQueue.enqueueAndForget(async()=>zK(await aS(r),s,i)),i.promise}(vn(t),e)}function ES(t,e,n){const r=n.docs.get(e._key),s=new Fa(t);return new is(t,s,e._key,r,new zi(n.hasPendingWrites,n.fromCache),e.converter)}function BL(t){return zL(t,{count:UL()})}function zL(t,e){const n=Tt(t.firestore,Qt),r=vn(n),s=x2(e,(i,o)=>new aO(o,i.aggregateType,i._internalFieldPath));return mG(r,t._query,s).then(i=>function(a,l,c){const u=new Fa(a);return new PL(l,u,c)}(n,t,i))}class rQ{constructor(e){this.kind="memory",this._onlineComponentProvider=Ia.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new sS(void 0)}}toJSON(){return{kind:this.kind}}}class sQ{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=WL(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class iQ{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Wu.provider}toJSON(){return{kind:this.kind}}}class oQ{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new sS(e)}}toJSON(){return{kind:this.kind}}}function aQ(){return new iQ}function lQ(t){return new oQ(t==null?void 0:t.cacheSizeBytes)}function cQ(t){return new rQ(t)}function uQ(t){return new sQ(t)}class dQ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ia.provider,this._offlineComponentProvider={build:n=>new iS(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class hQ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ia.provider,this._offlineComponentProvider={build:n=>new fL(n,e==null?void 0:e.cacheSizeBytes)}}}function WL(t){return new dQ(t==null?void 0:t.forceOwnership)}function fQ(){return new hQ}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rc(e)}set(e,n,r){this._verifyNotCommitted();const s=Qo(e,this._firestore),i=Qy(s.converter,n,r),o=qy(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,yn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Qo(e,this._firestore);let o;return o=typeof(n=wt(n))=="string"||n instanceof Ma?gS(this._dataReader,"WriteBatch.update",i._key,n,r,s):pS(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qo(e,this._firestore);return this._mutations=this._mutations.concat(new ld(n._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qo(t,e){if((t=wt(t)).firestore!==e)throw new ee(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=rc(e)}get(e){const n=Qo(e,this._firestore),r=new _S(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Oe(24041);const i=s[0];if(i.isFoundDocument())return new uf(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new uf(this._firestore,r,n._key,null,n.converter);throw Oe(18433,{doc:i})})}set(e,n,r){const s=Qo(e,this._firestore),i=Qy(s.converter,n,r),o=qy(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=Qo(e,this._firestore);let o;return o=typeof(n=wt(n))=="string"||n instanceof Ma?gS(this._dataReader,"Transaction.update",i._key,n,r,s):pS(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=Qo(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL extends pQ{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Qo(e,this._firestore),r=new Fa(this._firestore);return super.get(e).then(s=>new is(this._firestore,r,n._key,s._document,new zi(!1,!1),n.converter))}}function gQ(t,e,n){t=Tt(t,Qt);const r={...mQ,...n};return function(i){if(i.maxAttempts<1)throw new ee(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new mr;return i.asyncQueue.enqueueAndForget(async()=>{const c=await gL(i);new lG(i.asyncQueue,c,a,o,l).ju()}),l.promise}(vn(t),s=>e(new HL(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yQ(){return new Uf("deleteField")}function Be(){return new dS("serverTimestamp")}function vQ(...t){return new hS("arrayUnion",t)}function wQ(...t){return new fS("arrayRemove",t)}function _Q(t){return new mS("increment",t)}function EQ(t){return new Cs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){return vn(t=Tt(t,Qt)),new qL(t,e=>gd(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(t,e){const n=vn(t=Tt(t,Qt));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return ws("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(u){throw new ee(B.INVALID_ARGUMENT,"Failed to parse JSON: "+(u==null?void 0:u.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=bP(l,"collectionGroup"),u=[];if(Array.isArray(l.fields))for(const h of l.fields){const f=Hy("setIndexConfiguration",bP(h,"fieldPath"));h.arrayConfig==="CONTAINS"?u.push(new wl(f,2)):h.order==="ASCENDING"?u.push(new wl(f,0)):h.order==="DESCENDING"&&u.push(new wl(f,1))}a.push(new Pu(Pu.UNKNOWN_ID,c,u,Ru.empty()))}return a}(e);return vG(n,r)}function bP(t,e){if(typeof t[e]!="string")throw new ee(B.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function SQ(t){var s;t=Tt(t,Qt);const e=SP.get(t);if(e)return e;if(((s=vn(t)._uninitializedComponentsProvider)==null?void 0:s._offline.kind)!=="persistent")return null;const r=new KL(t);return SP.set(t,r),r}function IQ(t){GL(t,!0)}function TQ(t){GL(t,!1)}function xQ(t){_G(vn(t._firestore)).then(e=>re("deleting all persistent cache indexes succeeded")).catch(e=>ws("deleting all persistent cache indexes failed",e))}function GL(t,e){wG(vn(t._firestore),e).then(n=>re(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>ws(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const SP=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQ(t){var r;const e=vn(Tt(t.firestore,Qt)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:Ly(n,Nr(t._query)).ft}function PQ(t,e){var i;const n=x2(e,(o,a)=>new aO(a,o.aggregateType,o._internalFieldPath)),r=vn(Tt(t.firestore,Qt)),s=(i=r._onlineComponents)==null?void 0:i.datastore.serializer;return s===void 0?null:wO(s,q2(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return SS.instance.onExistenceFilterMismatch(e)}}class SS{constructor(){this.Mc=new Map}static get instance(){return km||(km=new SS,function(n){if(Eh)throw new Error("a TestingHooksSpi instance is already set");Eh=n}(km)),km}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let km=null;(function(e,n=!0){(function(s){id=s})(Zl),Ai(new Ys("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Qt(new s7(r.getProvider("auth-internal")),new a7(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(c.options.projectId,u)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),gs(tA,nA,e),gs(tA,nA,"esm2020")})();const Jn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:wS,AggregateField:Hu,AggregateQuerySnapshot:PL,Bytes:Qr,CACHE_SIZE_UNLIMITED:SG,CollectionReference:Ws,DocumentReference:Wt,DocumentSnapshot:is,FieldPath:Ma,FieldValue:Va,Firestore:Qt,FirestoreError:ee,GeoPoint:qs,LoadBundleTask:SL,PersistentCacheIndexManager:KL,Query:nr,QueryCompositeFilterConstraint:ic,QueryConstraint:md,QueryDocumentSnapshot:Sh,QueryEndAtConstraint:zf,QueryFieldFilterConstraint:pd,QueryLimitConstraint:$f,QueryOrderByConstraint:Gy,QuerySnapshot:os,QueryStartAtConstraint:Bf,SnapshotMetadata:zi,Timestamp:Vt,Transaction:HL,VectorValue:Cs,WriteBatch:qL,_AutoId:Sy,_ByteString:Pn,_DatabaseId:wa,_DocumentKey:we,_EmptyAppCheckTokenProvider:l7,_EmptyAuthCredentialsProvider:i2,_FieldPath:ln,_TestingHooks:RQ,_cast:Tt,_debugAssert:n7,_internalAggregationQueryToProtoRunAggregationQueryRequest:PQ,_internalQueryToProtoQueryTarget:AQ,_isBase64Available:q7,_logWarn:ws,_validateIsNotUsedTogether:a2,addDoc:ys,aggregateFieldEqual:qG,aggregateQuerySnapshotEqual:HG,and:VG,arrayRemove:wQ,arrayUnion:vQ,average:WG,clearIndexedDbPersistence:AG,collection:De,collectionGroup:EG,connectFirestoreEmulator:bL,count:UL,deleteAllPersistentCacheIndexes:xQ,deleteDoc:Xt,deleteField:yQ,disableNetwork:uS,disablePersistentCacheIndexAutoCreation:TQ,doc:Ce,documentId:CG,documentSnapshotFromJSON:KG,enableIndexedDbPersistence:TG,enableMultiTabIndexedDbPersistence:xG,enableNetwork:cS,enablePersistentCacheIndexAutoCreation:IQ,endAt:BG,endBefore:$G,ensureFirestoreConfigured:vn,executeWrite:gd,getAggregateFromServer:zL,getCountFromServer:BL,getDoc:Zt,getDocFromCache:JG,getDocFromServer:XG,getDocs:Ye,getDocsFromCache:ZG,getDocsFromServer:eQ,getFirestore:IG,getPersistentCacheIndexManager:SQ,increment:_Q,initializeFirestore:IL,limit:Bl,limitToLast:FG,loadBundle:E0,memoryEagerGarbageCollector:aQ,memoryLocalCache:cQ,memoryLruGarbageCollector:lQ,namedQuery:AL,onSnapshot:df,onSnapshotResume:tQ,onSnapshotsInSync:nQ,or:MG,orderBy:Hi,persistentLocalCache:uQ,persistentMultipleTabManager:fQ,persistentSingleTabManager:WL,query:Qe,queryEqual:lS,querySnapshotFromJSON:GG,refEqual:bG,runTransaction:gQ,serverTimestamp:Be,setDoc:en,setIndexConfiguration:bQ,setLogLevel:n2,snapshotEqual:YG,startAfter:UG,startAt:jG,sum:zG,terminate:RG,updateDoc:cn,vector:EQ,waitForPendingWrites:PG,where:qe,writeBatch:bS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CQ="type.googleapis.com/google.protobuf.Int64Value",kQ="type.googleapis.com/google.protobuf.UInt64Value";function QL(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Rg(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Rg(e));if(typeof t=="function"||typeof t=="object")return QL(t,e=>Rg(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ku(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case CQ:case kQ:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ku(e)):typeof t=="function"||typeof t=="object"?QL(t,e=>Ku(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ts extends ti{constructor(e,n,r){super(`${IS}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ts.prototype)}}function NQ(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Cg(t,e){let n=NQ(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!IP[o])return new ts("internal","internal");n=IP[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Ku(s))}}catch{}return n==="ok"?null:new ts(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Gr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="us-central1",OQ=/^data: (.*?)(?:\n|$)/;function LQ(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ts("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class MQ{constructor(e,n,r,s,i=b0,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new DQ(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=b0}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function VQ(t,e,n){const r=ei(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(If(t.emulatorOrigin+"/backends"),yy("Functions",!0))}function FQ(t,e,n){const r=s=>UQ(t,e,s,{});return r.stream=(s,i)=>BQ(t,e,s,i),r}function YL(t){return t.emulatorOrigin&&ei(t.emulatorOrigin)?"include":void 0}async function jQ(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:YL(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function JL(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function UQ(t,e,n,r){const s=t._url(e);return $Q(t,s,n,r)}async function $Q(t,e,n,r){n=Rg(n);const s={data:n},i=await JL(t,r),o=r.timeout||7e4,a=LQ(o),l=await Promise.race([jQ(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new ts("cancelled","Firebase Functions instance was deleted.");const c=Cg(l.status,l.json);if(c)throw c;if(!l.json)throw new ts("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new ts("internal","Response is missing data field.");return{data:Ku(u)}}function BQ(t,e,n,r){const s=t._url(e);return zQ(t,s,n,r||{})}async function zQ(t,e,n,r){var f;n=Rg(n);const s={data:n},i=await JL(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:YL(t)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const g=new ts("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const _=Cg(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let a,l;const c=new Promise((p,_)=>{a=p,l=_});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const p=new ts("cancelled","Request was cancelled.");l(p)});const u=o.body.getReader(),h=WQ(u,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:_,done:g}=await p.read();return{value:_,done:g}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function WQ(t,e,n,r){const s=(o,a)=>{const l=o.match(OQ);if(!l)return;const c=l[1];try{const u=JSON.parse(c);if("result"in u){e(Ku(u.result));return}if("message"in u){a.enqueue(Ku(u.message));return}if("error"in u){const h=Cg(0,u);a.error(h),n(h);return}}catch(u){if(u instanceof ts){a.error(u),n(u);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new ts("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:u}=await t.read();if(u){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new ts("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const u=c instanceof ts?c:Cg(0,null);o.error(u),n(u)}}},cancel(){return t.cancel()}})}const TP="@firebase/functions",xP="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qQ="auth-internal",HQ="app-check-internal",KQ="messaging-internal";function GQ(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(qQ),o=n.getProvider(KQ),a=n.getProvider(HQ);return new MQ(s,i,o,a,r)};Ai(new Ys(IS,e,"PUBLIC").setMultipleInstances(!0)),gs(TP,xP,t),gs(TP,xP,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QQ(t=wy(),e=b0){const r=Xl(wt(t),IS).getImmediate({identifier:e}),s=tb("functions");return s&&YQ(r,...s),r}function YQ(t,e,n){VQ(wt(t),e,n)}function JQ(t,e,n){return FQ(wt(t),e)}GQ();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL="firebasestorage.googleapis.com",ZL="storageBucket",XQ=2*60*1e3,ZQ=10*60*1e3,eY=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends ti{constructor(e,n,r=0){super(lw(e),`Firebase Storage: ${n} (${lw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hn||(hn={}));function lw(t){return"storage/"+t}function TS(){const t="An unknown error occurred, please check the error payload for server response.";return new Cn(hn.UNKNOWN,t)}function tY(t){return new Cn(hn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nY(t){return new Cn(hn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Cn(hn.UNAUTHENTICATED,t)}function sY(){return new Cn(hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function iY(t){return new Cn(hn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function eM(){return new Cn(hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tM(){return new Cn(hn.CANCELED,"User canceled the upload/download.")}function oY(t){return new Cn(hn.INVALID_URL,"Invalid URL '"+t+"'.")}function aY(t){return new Cn(hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lY(){return new Cn(hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZL+"' property when initializing the app?")}function nM(){return new Cn(hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cY(){return new Cn(hn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function uY(){return new Cn(hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dY(t){return new Cn(hn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function S0(t){return new Cn(hn.INVALID_ARGUMENT,t)}function rM(){return new Cn(hn.APP_DELETED,"The Firebase app was deleted.")}function hY(t){return new Cn(hn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ih(t,e){return new Cn(hn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $d(t){throw new Cn(hn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fs.makeFromUrl(e,n)}catch{return new fs(e,"")}if(r.path==="")return r;throw aY(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),_={bucket:1,path:3},g=n===XL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",E=new RegExp(`^https?://${g}/${s}/${b}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:p,indices:_,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<S.length;P++){const x=S[P],O=x.regex.exec(e);if(O){const T=O[x.indices.bucket];let A=O[x.indices.path];A||(A=""),r=new fs(T,A),x.postModify(r);break}}if(r==null)throw oY(e);return r}}class fY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(p,l())},b)}function f(){i&&clearTimeout(i)}function p(b,...E){if(c){f();return}if(b){f(),u.call(null,b,...E);return}if(l()||o){f(),u.call(null,b,...E);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,h(S)}let _=!1;function g(b){_||(_=!0,f(),!c&&(s!==null?(b||(a=2),clearTimeout(s),h(0)):b||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function pY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(t){return t!==void 0}function yY(t){return typeof t=="function"}function vY(t){return typeof t=="object"&&!Array.isArray(t)}function Yy(t){return typeof t=="string"||t instanceof String}function AP(t){return xS()&&t instanceof Blob}function xS(){return typeof Blob<"u"}function PP(t,e,n,r){if(r<e)throw S0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw S0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sM(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var bl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(bl||(bl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY{constructor(e,n,r,s,i,o,a,l,c,u,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,g)=>{this.resolve_=_,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Nm(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===bl.NO_ERROR,l=i.getStatus();if(!a||iM(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===bl.ABORT;r(!1,new Nm(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Nm(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());gY(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=TS();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?rM():tM();o(l)}else{const l=eM();o(l)}};this.canceled_?n(!1,new Nm(!1,null,!0)):this.backoffId_=mY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&pY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _Y(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function EY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function SY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function IY(t,e,n,r,s,i,o=!0,a=!1){const l=sM(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return bY(u,e),_Y(u,n),EY(u,i),SY(u,r),new wY(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xY(...t){const e=TY();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(xS())return new Blob(t);throw new Cn(hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function AY(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PY(t){if(typeof atob>"u")throw dY("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cw{constructor(e,n){this.data=e,this.contentType=n||null}}function RY(t,e){switch(t){case yi.RAW:return new cw(oM(e));case yi.BASE64:case yi.BASE64URL:return new cw(aM(t,e));case yi.DATA_URL:return new cw(kY(e),NY(e))}throw TS()}function oM(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function CY(t){let e;try{e=decodeURIComponent(t)}catch{throw Ih(yi.DATA_URL,"Malformed data URL.")}return oM(e)}function aM(t,e){switch(t){case yi.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ih(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case yi.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ih(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=PY(e)}catch(s){throw s.message.includes("polyfill")?s:Ih(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class lM{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ih(yi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=DY(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function kY(t){const e=new lM(t);return e.base64?aM(yi.BASE64,e.rest):CY(e.rest)}function NY(t){return new lM(t).contentType}function DY(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){let r=0,s="";AP(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(AP(this.data_)){const r=this.data_,s=AY(r,e,n);return s===null?null:new Vi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Vi(r,!0)}}static getBlob(...e){if(xS()){const n=e.map(r=>r instanceof Vi?r.data_:r);return new Vi(xY.apply(null,n))}else{const n=e.map(o=>Yy(o)?RY(yi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Vi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){let e;try{e=JSON.parse(t)}catch{return null}return vY(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LY(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(t,e){return e}class Lr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||MY}}let Dm=null;function VY(t){return!Yy(t)||t.length<2?t:uM(t)}function AS(){if(Dm)return Dm;const t=[];t.push(new Lr("bucket")),t.push(new Lr("generation")),t.push(new Lr("metageneration")),t.push(new Lr("name","fullPath",!0));function e(i,o){return VY(o)}const n=new Lr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Lr("size");return s.xform=r,t.push(s),t.push(new Lr("timeCreated")),t.push(new Lr("updated")),t.push(new Lr("md5Hash",null,!0)),t.push(new Lr("cacheControl",null,!0)),t.push(new Lr("contentDisposition",null,!0)),t.push(new Lr("contentEncoding",null,!0)),t.push(new Lr("contentLanguage",null,!0)),t.push(new Lr("contentType",null,!0)),t.push(new Lr("metadata","customMetadata",!0)),Dm=t,Dm}function FY(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new fs(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function jY(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return FY(r,t),r}function dM(t,e,n){const r=cM(e);return r===null?null:jY(t,r,n)}function UY(t,e,n,r){const s=cM(e);if(s===null||!Yy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,h=t.fullPath,f="/b/"+o(u)+"/o/"+o(h),p=Wf(f,n,r),_=sM({alt:"media",token:c});return p+_})[0]}function hM(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class yd{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){if(!t)throw TS()}function PS(t,e){function n(r,s){const i=dM(t,s,e);return Ki(i!==null),i}return n}function $Y(t,e){function n(r,s){const i=dM(t,s,e);return Ki(i!==null),UY(i,s,t.host,t._protocol)}return n}function qf(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=sY():s=rY():n.getStatus()===402?s=nY(t.bucket):n.getStatus()===403?s=iY(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function fM(t){const e=qf(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=tY(t.path)),i.serverResponse=s.serverResponse,i}return n}function BY(t,e,n){const r=e.fullServerUrl(),s=Wf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new yd(s,i,PS(t,n),o);return a.errorHandler=fM(e),a}function zY(t,e,n){const r=e.fullServerUrl(),s=Wf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new yd(s,i,$Y(t,n),o);return a.errorHandler=fM(e),a}function WY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function mM(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=WY(null,e)),r}function pM(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let P=0;P<2;P++)S=S+Math.random().toString().slice(2);return S}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=mM(e,r,s),u=hM(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Vi.getBlob(h,r,f);if(p===null)throw nM();const _={name:c.fullPath},g=Wf(i,t.host,t._protocol),b="POST",E=t.maxUploadRetryTime,w=new yd(g,b,PS(t,n),E);return w.urlParams=_,w.headers=o,w.body=p.uploadData(),w.errorHandler=qf(e),w}class kg{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function RS(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ki(!1)}return Ki(!!n&&(e||["active"]).indexOf(n)!==-1),n}function qY(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=mM(e,r,s),a={name:o.fullPath},l=Wf(i,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=hM(o,n),f=t.maxUploadRetryTime;function p(g){RS(g);let b;try{b=g.getResponseHeader("X-Goog-Upload-URL")}catch{Ki(!1)}return Ki(Yy(b)),b}const _=new yd(l,c,p,f);return _.urlParams=a,_.headers=u,_.body=h,_.errorHandler=qf(e),_}function HY(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const u=RS(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ki(!1)}h||Ki(!1);const f=Number(h);return Ki(!isNaN(f)),new kg(f,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new yd(n,o,i,a);return l.headers=s,l.errorHandler=qf(e),l}const RP=256*1024;function KY(t,e,n,r,s,i,o,a){const l=new kg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw cY();const c=l.total-l.current;let u=c;s>0&&(u=Math.min(u,s));const h=l.current,f=h+u;let p="";u===0?p="finalize":c===u?p="upload, finalize":p="upload";const _={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw nM();function b(P,x){const O=RS(P,["active","final"]),T=l.current+u,A=r.size();let R;return O==="final"?R=PS(e,i)(P,x):R=null,new kg(T,A,O==="final",R)}const E="POST",w=e.maxUploadRetryTime,S=new yd(n,E,b,w);return S.headers=_,S.body=g.uploadData(),S.progressCallback=a||null,S.errorHandler=qf(t),S}const Hr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function uw(t){switch(t){case"running":case"pausing":case"canceling":return Hr.RUNNING;case"paused":return Hr.PAUSED;case"success":return Hr.SUCCESS;case"canceled":return Hr.CANCELED;case"error":return Hr.ERROR;default:return Hr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GY{constructor(e,n,r){if(yY(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class QY{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw $d("cannot .send() more than once");if(ei(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $d("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $d("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $d("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $d("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YY extends QY{initXhr(){this.xhr_.responseType="text"}}function el(){return new YY}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=AS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(hn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(iM(s.status,[]))if(i)s=eM();else{this.sleepTime=Math.max(this.sleepTime*2,eY),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(hn.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=qY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,el,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=HY(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,el,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=RP*this._chunkMultiplier,n=new kg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=KY(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,el,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RP*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=BY(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,el,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=pM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,el,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=tM(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=uw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new GY(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(uw(this._state)){case Hr.SUCCESS:pc(this._resolve.bind(null,this.snapshot))();break;case Hr.CANCELED:case Hr.ERROR:const n=this._reject;pc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(uw(this._state)){case Hr.RUNNING:case Hr.PAUSED:e.next&&pc(e.next.bind(e,this.snapshot))();break;case Hr.SUCCESS:e.complete&&pc(e.complete.bind(e))();break;case Hr.CANCELED:case Hr.ERROR:e.error&&pc(e.error.bind(e,this._error))();break;default:e.error&&pc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this._service=e,n instanceof fs?this._location=n:this._location=fs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zl(e,n)}get root(){const e=new fs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uM(this._location.path)}get storage(){return this._service}get parent(){const e=OY(this._location.path);if(e===null)return null;const n=new fs(this._location.bucket,e);return new zl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw hY(e)}}function XY(t,e,n){t._throwIfRoot("uploadBytes");const r=pM(t.storage,t._location,AS(),new Vi(e,!0),n);return t.storage.makeRequestWithTokens(r,el).then(s=>({metadata:s,ref:t}))}function ZY(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new JY(t,new Vi(e),n)}function eJ(t){t._throwIfRoot("getDownloadURL");const e=zY(t.storage,t._location,AS());return t.storage.makeRequestWithTokens(e,el).then(n=>{if(n===null)throw uY();return n})}function tJ(t,e){const n=LY(t._location.path,e),r=new fs(t._location.bucket,n);return new zl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(t){return/^[A-Za-z]+:\/\//.test(t)}function rJ(t,e){return new zl(t,e)}function gM(t,e){if(t instanceof CS){const n=t;if(n._bucket==null)throw lY();const r=new zl(n,n._bucket);return e!=null?gM(r,e):r}else return e!==void 0?tJ(t,e):t}function sJ(t,e){if(e&&nJ(e)){if(t instanceof CS)return rJ(t,e);throw S0("To use ref(service, url), the first argument must be a Storage instance.")}else return gM(t,e)}function CP(t,e){const n=e==null?void 0:e[ZL];return n==null?null:fs.makeFromBucketSpec(n,t)}function iJ(t,e,n,r={}){t.host=`${e}:${n}`;const s=ei(e);s&&(If(`https://${t.host}/b`),yy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:XN(i,t.app.options.projectId))}class CS{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=XL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XQ,this._maxUploadRetryTime=ZQ,this._requests=new Set,s!=null?this._bucket=fs.makeFromBucketSpec(s,this._host):this._bucket=CP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fs.makeFromBucketSpec(this._url,e):this._bucket=CP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new fY(rM());{const o=IY(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const kP="@firebase/storage",NP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="storage";function Pee(t,e,n){return t=wt(t),XY(t,e,n)}function oJ(t,e,n){return t=wt(t),ZY(t,e,n)}function aJ(t){return t=wt(t),eJ(t)}function lJ(t,e){return t=wt(t),sJ(t,e)}function vM(t=wy(),e){t=wt(t);const r=Xl(t,yM).getImmediate({identifier:e}),s=tb("storage");return s&&cJ(r,...s),r}function cJ(t,e,n,r={}){iJ(t,e,n,r)}function uJ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new CS(n,r,s,e,Zl)}function dJ(){Ai(new Ys(yM,uJ,"PUBLIC").setMultipleInstances(!0)),gs(kP,NP,""),gs(kP,NP,"esm2020")}dJ();const hJ={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},Ng={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:Ng.projectId,authDomain:Ng.authDomain,emulatorMode:!1});const Jy=sD(Ng);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Bt=AD(Jy,{persistence:[ub,W_]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const z=IL(Jy,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{n2("error")}catch{}const wM=QQ(Jy,"us-central1");vM(Jy);console.log(" Firebase initialized successfully");const fJ=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(fJ,100);let Qa=0;const dw=3,mJ=1e3,_M=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&Qa<dw){Qa++;const r=Math.min(mJ*Math.pow(2,Qa-1),1e4);console.log(` Attempting to reconnect (${Qa}/${dw}) in ${r}ms...`);try{await uS(z),await new Promise(s=>setTimeout(s,r)),await cS(z),console.log(" Firestore reconnected successfully"),Qa=0}catch(s){console.error(" Failed to reconnect:",s),Qa>=dw&&(console.error(" Maximum reconnection attempts reached."),pJ())}}},pJ=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await cS(z),Qa=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await uS(z),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(_M(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const mn=Object.freeze(Object.defineProperty({__proto__:null,auth:Bt,db:z,firebaseConfig:Ng,functions:wM,handleFirestoreError:_M},Symbol.toStringTag,{value:"Module"})),_t=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},gJ=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Wl=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Wl(n)).filter(n=>n!==void 0);if(t instanceof Date||!gJ(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Wl(r);s!==void 0&&(e[n]=s)}return e},yp={async create(t){await en(Ce(z,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Be()})},async getById(t){const e=Ce(z,"profiles",t),n=await Zt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:_t(r.createdAt)}}return null},async update(t,e){const n=Ce(z,"profiles",t);await cn(n,{...e,updatedAt:Be()})},async getByShopId(t){const e=Qe(De(z,"profiles"),qe("shopId","==",t));return(await Ye(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:_t(s.createdAt)}})}},I0={async create(t){return(await ys(De(z,"referrals"),{...t,createdAt:Be(),updatedAt:Be()})).id},async getByReferrerId(t){try{const e=Qe(De(z,"referrals"),qe("referrerId","==",t),Hi("createdAt","desc"));return(await Ye(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:_t(r.data().createdAt),updatedAt:_t(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Qe(De(z,"referrals"),qe("referrerId","==",t));return(await Ye(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:_t(i.data().createdAt),updatedAt:_t(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,u;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((u=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:u.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Qe(De(z,"referrals"),qe("referralCode","==",t),Bl(1)),n=await Ye(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:_t(r.data().createdAt),updatedAt:_t(r.data().updatedAt)}},async updateStatus(t,e){await cn(Ce(z,"referrals",t),{status:e,updatedAt:Be()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},EM={async getByUserId(t){const e=Qe(De(z,"profiles"),qe("userId","==",t)),n=await Ye(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:_t(s.createdAt),updatedAt:_t(s.updatedAt)}}return null},async update(t,e){const n=Qe(De(z,"profiles"),qe("userId","==",t)),r=await Ye(n);if(!r.empty){const s=Ce(z,"profiles",r.docs[0].id);await cn(s,{...e,updatedAt:Be()})}}},Yo={async create(t){return(await ys(De(z,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Be(),updatedAt:Be()})).id},async getByMerchantId(t){const e=Qe(De(z,"merchantWallets"),qe("merchantUserId","==",t)),r=(await Ye(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:_t(l.createdAt),updatedAt:_t(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,u=l.createdAt;return c&&u?u.getTime()-c.getTime():c&&!u?-1:!c&&u?1:0});const s=Qe(De(z,"wallets"),qe("userId","==",t));return(await Ye(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:_t(l.createdAt),updatedAt:_t(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,u=l.createdAt;return c&&u?u.getTime()-c.getTime():c&&!u?-1:!c&&u?1:0})},async getById(t){const e=Ce(z,"merchantWallets",t),n=await Zt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:_t(r.createdAt),updatedAt:_t(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=Qe(De(z,"merchantWallets"),qe("iccid","==",t)),n=await Ye(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:_t(s.createdAt),updatedAt:_t(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=Qe(De(z,"merchantWallets"),qe("msisdn","==",t)),r=await Ye(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:_t(l.createdAt),updatedAt:_t(l.updatedAt)}}const s=Qe(De(z,"merchantWallets")),i=await Ye(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:_t(l.createdAt),updatedAt:_t(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Ce(z,"merchantWallets",t);await cn(n,{...e,updatedAt:Be()})},async updateUsage(t,e,n){const r=Ce(z,"merchantWallets",t),s={updatedAt:Be()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await cn(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,u)=>(u%a===0&&l.push(o.slice(u,u+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Qe(De(z,"merchantWallets"),qe("msisdn","in",o)),c=(await Ye(a)).docs.map(async u=>{try{const h=u.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await cn(u.ref,{merchantUserId:e,updatedAt:Be()}),s+=1}catch(h){console.error("Failed to reassign wallet",u.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Ce(z,"merchantWallets",t);await Xt(e)}},kS={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await se(async()=>{const{calculateCommission:c,calculateProfit:u}=await Promise.resolve().then(()=>ul);return{calculateCommission:c,calculateProfit:u}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,u])=>u!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Be(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await ys(De(z,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await se(async()=>{const{ProfitService:u}=await import("./profitService-B3iovAHD.js");return{ProfitService:u}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const u=await Yo.getById(c),h=Number((u==null?void 0:u.transferUsage)||0),f=Number((u==null?void 0:u.withdrawUsage)||0),p=Number(t.amount||0),_=String((t==null?void 0:t.originType)||"").trim()==="withdraw",g=String(t.txnType||"")==="receive";_||g?await Yo.updateUsage(c,void 0,f+p):await Yo.updateUsage(c,h+p,void 0)}}catch{}try{const c=Number(t.amount||0),u=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let p="";if(h)try{const g=await Yo.getById(h);p=String((g==null?void 0:g.msisdn)||(g==null?void 0:g.label)||h).trim()}catch{}let _="";f==="withdraw"?_=p?`   ${c}   ${p}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?_=`   ${c}   ${p||" "}   ${u||""}    ${r}`:_=p?`  ${c}   ${p}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Qe(De(z,"transactions"),qe("shopId","==",t),Hi("createdAt","desc"));return(await Ye(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:_t(r.data().createdAt),confirmedAt:r.data().confirmedAt?_t(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Qe(De(z,"transactions"),qe("merchantUserId","==",t),Hi("createdAt","desc"));return(await Ye(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:_t(r.data().createdAt),confirmedAt:r.data().confirmedAt?_t(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Qe(De(z,"transactions"),qe("merchantUserId","==",t)),n=Qe(De(z,"transactions"),qe("userId","==",t)),[r,s]=await Promise.all([Ye(e),Ye(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:_t(c.createdAt),confirmedAt:c.confirmedAt?_t(c.confirmedAt):void 0})}return a.sort((l,c)=>{const u=l.createdAt,h=c.createdAt;return u&&h?h.getTime()-u.getTime():u&&!h?-1:!u&&h?1:0})},async updateStatus(t,e,n){const r=Ce(z,"transactions",t);await cn(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function yJ(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await kS.create(e);try{const{calculateCommission:r}=await se(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>ul);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Yr.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await se(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>ul);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Yr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const u=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Yr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:u,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await se(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>k0);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const vJ="https://summer-cake-5149.alkaptin2030.workers.dev",bM={async getTelegramWorkerUrl(){var t;try{const e=Ce(z,"systemSettings","core"),n=await Zt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Ce(z,"systemSettings","core");await en(e,{telegramWorkerUrl:t,updatedAt:Be()},{merge:!0})}},wJ={async send(t,e){try{const n=await Yr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await bM.getTelegramWorkerUrl()||vJ).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},_J={async log(t,e,n,r,s){await ys(De(z,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Be()})},async getLogs(t=100){const e=Qe(De(z,"auditLogs"),Hi("createdAt","desc"),Bl(t));return(await Ye(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:_t(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Qe(De(z,"deletedTransactions"),Hi("deletedAt","desc"));return(await Ye(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:_t(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Qe(De(z,"deletedTransactions"),qe("userId","==",t),Hi("deletedAt","desc"));return(await Ye(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:_t(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Qe(De(z,"deletedTransactions"),qe("userId","==",t));return(await Ye(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:_t(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Be(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await ys(De(z,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Qe(De(z,"deletedTransactions"),qe("originalTransactionId","==",t),qe("userId","==",e)),r=await Ye(n);r.empty?await ys(De(z,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Be()}):await Promise.all(r.docs.map(s=>cn(s.ref,{permanent:!0,deletedAt:Be()}))),console.log("    :",t);try{const s=Qe(De(z,"userTransactions"),qe("userId","==",e)),o=(await Ye(s)).docs.filter(a=>{var c,u;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((u=l.receipt)==null?void 0:u.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Xt(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Ce(z,"transactions",t);(await Zt(s)).exists()&&(console.log("     transactions  "),await Xt(s));const o=Qe(De(z,"transactions"),qe("transactionId","==",t)),a=await Ye(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(u=>Xt(u.ref))));const l=Qe(De(z,"transactions"),qe("originalTransactionId","==",t)),c=await Ye(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(u=>Xt(u.ref))));try{const u=Qe(De(z,"deletedTransactions"),qe("userId","==",e),qe("originalTransactionId","==",t)),h=await Ye(u),f=h.docs.map(_=>{var g;return String(((g=_.data())==null?void 0:g.reference)||"")}).filter(Boolean),p=h.docs.map(_=>{var g;return String(((g=_.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const _ of f){const g=Qe(De(z,"transactions"),qe("reference","==",_)),b=await Ye(g);b.empty||(console.log(`  ${b.size}   transactions  reference=${_}`),await Promise.all(b.docs.map(E=>Xt(E.ref))))}for(const _ of p){try{const E=Ce(z,"transactions",_);(await Zt(E)).exists()&&(console.log("     transactions  :",_),await Xt(E))}catch{}const g=Qe(De(z,"transactions"),qe("transactionId","==",_)),b=await Ye(g);b.empty||(console.log(`  ${b.size}   transactions  transactionId=${_}`),await Promise.all(b.docs.map(E=>Xt(E.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},SM={async add(t){const e=De(z,"daily_reports_archive");return(await ys(e,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,createdAt:Be(),updatedAt:Be()})).id},async getByUser(t,e=50){var n,r,s,i;try{const o=Qe(De(z,"daily_reports_archive"),qe("userId","==",t),Bl(e)),a=await Ye(o);let l=[];try{l=(await Ye(Qe(De(z,"deletedDailyArchives"),qe("userId","==",t)))).docs.map(_=>{var g,b;return{id:_.id,reportDate:String(((g=_.data())==null?void 0:g.reportDate)||""),archiveId:String(((b=_.data())==null?void 0:b.archiveId)||"")}})}catch{}const c=(p,_)=>l.some(g=>g.archiveId&&g.archiveId===p||g.reportDate&&g.reportDate===_),u=a.docs.map(p=>({id:p.id,userId:String(p.data().userId),reportDate:String(p.data().reportDate),totalTransactions:Number(p.data().totalTransactions||0),totalAmount:Number(p.data().totalAmount||0),totalWithdrawn:Number(p.data().totalWithdrawn||0),totalSent:Number(p.data().totalSent||0),profit:p.data().profit!==void 0?Number(p.data().profit):void 0,walletId:p.data().walletId??null,createdAt:_t(p.data().createdAt||p.data().updatedAt)})).filter(p=>!c(p.id,p.reportDate)),h=new Map;for(const p of u){const _=h.get(p.reportDate);(!_||(((r=(n=p.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=_.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(p.reportDate,p)}const f=Array.from(h.values());return f.sort((p,_)=>p.reportDate<_.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Qe(De(z,"daily_reports_archive"),qe("userId","==",t)),s=await Ye(r);let i=0;for(const o of s.docs){const a=_t(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Xt(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Qe(De(z,"daily_reports_archive"),qe("userId","==",t)),s=(await Ye(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:_t(o.data().createdAt)}));if(s.sort((o,a)=>{var u,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((u=o.createdAt)==null?void 0:u.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Xt(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=Qe(De(z,"daily_reports_archive"),qe("userId","==",t)),n=await Ye(e);let r=0;for(const s of n.docs)try{await Xt(s.ref),r++}catch{const o=s.data();try{await ys(De(z,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Be()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Yr={async getUserData(t){try{console.log("     :",{userId:t});const e=Ce(z,"users",t),n=await Zt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:_t(r.createdAt),updatedAt:_t(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},async syncDeletedTransactionsLocal(t){try{const e=Qe(De(z,"deletedTransactions"),qe("userId","==",t));(await Ye(e)).docs.forEach(r=>{const s=r.data();if(!((s==null?void 0:s.permanent)===!0))return;const o=String((s==null?void 0:s.originalTransactionId)||""),a=String((s==null?void 0:s.transactionId)||""),l=String((s==null?void 0:s.reference)||"");o&&this.removeLocalReceiptById(t,o),a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptByRef(t,l)})}catch(e){console.warn("syncDeletedTransactionsLocal failed:",e)}},async factoryResetUserData(t){const e={},n=[],r=async(a,l,c)=>{try{const u=Qe(De(z,a),qe(l,"==",c)),h=await Ye(u);h.empty||await Promise.all(h.docs.map(f=>Xt(f.ref))),e[`${a}:${l}`]=(e[`${a}:${l}`]||0)+h.size}catch(u){console.error(`factoryResetUserData client: error deleting from ${a} by ${l}=`,u),n.push(`${a}:${l}: ${(u==null?void 0:u.message)||String(u)}`)}};let s=null;try{const a=await Zt(Ce(z,"profiles",t));if(a.exists()){const l=a.data();l!=null&&l.shopId&&(s=String(l.shopId))}}catch(a){console.warn("factoryResetUserData client: failed to fetch profile for shopId:",a)}await r("userTransactions","userId",t),await r("userTransactions","merchantUserId",t),await r("userTransactions","createdBy",t),await r("transactions","userId",t),await r("transactions","createdBy",t),await r("deletedTransactions","userId",t),await r("daily_reports_archive","userId",t),await r("deletedDailyArchives","userId",t),await r("wallets","userId",t),await r("wallets","merchantUserId",t),await r("dailySales","userId",t),await r("products","userId",t),await r("debts","userId",t),await r("installments","userId",t),s?(await r("shop_expenses","shopId",s),await r("deficiencies","shopId",s),await r("categories","shopId",s)):(await r("shop_expenses","userId",t),await r("deficiencies","userId",t),await r("categories","shopId",t)),await r("maintenance_items","userId",t),await r("cashSummaries","userId",t),await r("deviceTokens","userId",t);try{const a=Ce(z,"users",t);await en(a,{cashBalance:0,walletBalances:{},debts:[],debtsDeletedAt:Be(),reportsData:{},lastUpdated:new Date().toISOString()},{merge:!0}),e["users:embedded"]=(e["users:embedded"]||0)+1}catch(a){console.error("factoryResetUserData client: error clearing embedded user fields:",a),n.push(`users:embedded: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=await Ye(De(z,"users",t,"debts"));a.empty||await Promise.all(a.docs.map(l=>Xt(l.ref))),e["users/debts"]=(e["users/debts"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting debts subcollection:",a),n.push(`users/debts: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=await Ye(De(z,"users",t,"dailySales"));a.empty||await Promise.all(a.docs.map(l=>Xt(l.ref))),e["users/dailySales"]=(e["users/dailySales"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting dailySales subcollection:",a),n.push(`users/dailySales: ${(a==null?void 0:a.message)||String(a)}`)}const i=[];try{const a=await Ye(Qe(De(z,"merchantWallets"),qe("merchantUserId","==",t)));a.empty||(a.docs.forEach(l=>i.push(l.id)),await Promise.all(a.docs.map(l=>Xt(l.ref)))),e["merchantWallets:merchantUserId"]=(e["merchantWallets:merchantUserId"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting merchantWallets:",a),n.push(`merchantWallets:merchantUserId: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=await Ye(De(z,"users",t,"wallets"));a.empty||(a.docs.forEach(l=>i.push(l.id)),await Promise.all(a.docs.map(l=>Xt(l.ref)))),e["users/wallets"]=(e["users/wallets"]||0)+a.size}catch(a){console.error("factoryResetUserData client: error deleting user wallets subcollection:",a),n.push(`users/wallets: ${(a==null?void 0:a.message)||String(a)}`)}const o=Array.from(new Set(i));for(const a of o){try{await Xt(Ce(z,"walletLimits",a)),e["walletLimits:doc"]=(e["walletLimits:doc"]||0)+1}catch(l){console.warn("factoryResetUserData client: error deleting walletLimits doc:",l),n.push(`walletLimits:doc:${a}: ${(l==null?void 0:l.message)||String(l)}`)}try{await Xt(Ce(z,"walletDailyLimits",a)),e["walletDailyLimits:doc"]=(e["walletDailyLimits:doc"]||0)+1}catch(l){console.warn("factoryResetUserData client: error deleting walletDailyLimits doc:",l),n.push(`walletDailyLimits:doc:${a}: ${(l==null?void 0:l.message)||String(l)}`)}}if(await r("walletLimits","ownerId",t),await r("walletDailyLimits","ownerId",t),s)try{await en(Ce(z,"dashboardData",s),{cashBalance:0,walletBalances:{},lastUpdated:new Date().toISOString()},{merge:!0}),e["dashboardData:shop"]=(e["dashboardData:shop"]||0)+1}catch(a){console.error("factoryResetUserData client: error resetting dashboardData:",a),n.push(`dashboardData:shop:${s}: ${(a==null?void 0:a.message)||String(a)}`)}try{const a=typeof localStorage<"u"?localStorage:null;if(a){const l=[];for(let c=0;c<a.length;c++){const u=a.key(c);u&&(u.includes(t)||u.startsWith("cashBalance_")||u.startsWith("walletBalances_")||u.startsWith("walletBalances_backup_")||u.startsWith("debts_")||u.startsWith("shopProducts_")||u.startsWith("deficiencies_"))&&l.push(u)}l.forEach(c=>{try{a.removeItem(c)}catch{}})}}catch(a){console.warn("factoryResetUserData client: failed to cleanup localStorage:",a)}try{await ys(De(z,"factoryResets"),{userId:t,summary:e,errors:n,createdAt:Be()})}catch(a){console.warn("factoryResetUserData client: failed to log factory reset:",a)}return{success:n.length===0,summary:e,errors:n}},async saveUserData(t,e){try{const n=Ce(z,"users",t),r=Wl(e);await en(n,{...r||{},updatedAt:Be()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Ce(z,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Wl(r);let i={};try{const l=await Zt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Be()};console.log("   :",o);let a=3;for(;a>0;)try{await en(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=Qe(De(z,"userTransactions"),qe("userId","==",t),Hi("createdAt","desc"),Bl(200));e=await Ye(l)}catch(l){const c=String((l==null?void 0:l.message)||""),u=Qe(De(z,"userTransactions"),qe("userId","==",t));e=await Ye(u)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:_t(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const u=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-u})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=Qe(De(z,"deletedTransactions"),qe("userId","==",t),qe("reference","==",o));if(!(await Ye(a)).empty)return console.log("          ."),"skip-deleted"}{const a=Qe(De(z,"deletedTransactions"),qe("userId","==",t),qe("permanent","==",!0)),l=await Ye(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),p=String(f.originalTransactionId||f.transactionId||h.id||""),_=String(f.reference||"");return p&&c.includes(p)||_&&c.includes(_)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=Qe(De(z,"userTransactions"),qe("userId","==",t));if(s.transactionId){const E=Qe(De(z,"userTransactions"),qe("userId","==",t),qe("transactionId","==",s.transactionId)),w=await Ye(E);if(!w.empty){const S=w.docs[0];return await cn(Ce(z,"userTransactions",S.id),{...s,uploadedAt:Be()}),S.id}}if(s.reference){const E=Qe(De(z,"userTransactions"),qe("userId","==",t),qe("reference","==",s.reference)),w=await Ye(E);if(!w.empty){const S=w.docs[0];return await cn(Ce(z,"userTransactions",S.id),{...s,uploadedAt:Be()}),S.id}}const a=Qe(De(z,"userTransactions"),qe("userId","==",t),Hi("createdAt","desc"),Bl(10)),l=await Ye(a),c=s.type||s.txnType,u=Number(s.amount||0),h=s.senderName,f=s.senderMsisdn||s.senderPhone||s.sender_msisdn,p=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,_=s.createdAt?new Date(String(s.createdAt)):new Date,g=60*1e3,b=l.docs.find(E=>{const w=E.data(),S=w.type||w.txnType,P=Number(w.amount||0),x=w.senderName,O=w.senderMsisdn||w.senderPhone||w.sender_msisdn,T=w.receiverMsisdn||w.receiverPhone||w.receiver_msisdn,A=_t(w.createdAt);return!(Math.abs(A.getTime()-_.getTime())<=g)||P!==u||S!==c?!1:c==="machine_withdrawal"?x===h:O===f&&T===p});if(b)return console.log("            :",b.id),await cn(Ce(z,"userTransactions",b.id),{...s,uploadedAt:Be()}),b.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await ys(De(z,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Be(),uploadedAt:Be()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Ce(z,"userTransactions",e),a=await Zt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(u=>String(u||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Xt(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=Qe(De(z,"userTransactions"),qe("userId","==",t)),r=await Ye(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,u=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(p=>p===!0);return u&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),u}),i=[Qe(De(z,"userTransactions"),qe("merchantUserId","==",t)),Qe(De(z,"userTransactions"),qe("createdBy","==",t))];for(const o of i)try{const l=(await Ye(o)).docs.filter(c=>{var f,p;const u=c.data(),h=c.id;return u.id===e||u.transactionId===e||h===e||u.originalTransactionId===e||((f=u.receipt)==null?void 0:f.transactionId)===e||((p=u.receipt)==null?void 0:p.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Xt(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Ce(z,"transactions",e);if((await Zt(a)).exists())console.log("     transactions   "),await Xt(a);else{const c=Qe(De(z,"transactions"),qe("transactionId","==",e)),u=await Ye(c);u.empty||(console.log(`   ${u.size}   transactions  transactionId `),await Promise.all(u.docs.map(p=>Xt(p.ref))));const h=Qe(De(z,"transactions"),qe("originalTransactionId","==",e)),f=await Ye(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(p=>Xt(p.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},T0={async getToday(t){const e=Ce(z,"dailyStats",t,"today","data"),n=await Zt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Ce(z,"dailyStats",t,"today","data");await en(n,{...Wl(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Ce(z,"dailyStats",t,"history",e);await en(r,Wl(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},EJ={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Be()};return(await ys(De(z,"installments"),n)).id},async getByUser(t){try{const e=Qe(De(z,"installments"),qe("userId","==",t));return(await Ye(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("installments fetch error",e),[]}},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await cn(Ce(z,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Xt(Ce(z,"installments",t)),!0}},gc=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:EJ,auditLogService:_J,dailyReportsArchiveService:SM,dailyStatsService:T0,merchantWalletService:Yo,profileService:yp,profileServiceExtra:EM,recordAutoTransaction:yJ,referralService:I0,sanitizeFirestoreData:Wl,systemSettingsService:bM,telegramNotifier:wJ,transactionService:kS,userDataService:Yr},Symbol.toStringTag,{value:"Module"}));var tl=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t.BRANCH="branch",t))(tl||{});const Sl=t=>{if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();if(t.seconds!==void 0&&typeof t.seconds=="number")return new Date(t.seconds*1e3);const e=new Date(t);return isNaN(e.getTime())?null:e},bJ=(t,e=new Date)=>{const n=Sl(e)||new Date;switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},DP=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const r=new Date,s=Sl(t.activatedAt);return s&&r.getTime()-s.getTime()<4*60*60*1e3,!0}const e=new Date,n=Sl(t.endDate);if(!n){const r=Sl(t.activatedAt);return r&&e.getTime()-r.getTime()<4*60*60*1e3,!0}return e<=n},SJ=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=Sl(t.endDate);if(!n)return null;const r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},Ree=async(t,e,n,r)=>{try{const s=new Date,i=bJ(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Ce(z,"users",t);await cn(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});try{const l=await Zt(a);if(l.exists()){const c=l.data();if(c.ownerId){const u=c.ownerId;try{const h=Ce(z,"users",u,"branches",t);await cn(h,{isActive:!0,updatedAt:new Date})}catch(h){console.warn("Could not update branch reference in parent subcollection",h)}}}}catch(l){console.warn("Error syncing branch status to parent:",l)}if(console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},Cee=async t=>{try{const e=bS(z),n=Ce(z,"users",t);e.update(n,{"subscription.isActive":!1,isActive:!1,"branchPackage.status":"canceled","branchPackage.canceledAt":new Date,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date});const r=Qe(De(z,"users"),qe("ownerId","==",t)),s=await Ye(r);s.forEach(i=>{e.update(i.ref,{isActive:!1,"subscription.isActive":!1,updatedAt:new Date})}),await e.commit(),console.log(`      ${t}   (${s.size})`)}catch(e){throw console.error("     :",e),new Error("    ")}},IJ=async t=>{try{const e=bS(z),n=Ce(z,"users",t);e.update(n,{"branchPackage.status":"expired","branchPackage.expiredAt":new Date,updatedAt:new Date});const r=Qe(De(z,"users"),qe("ownerId","==",t));(await Ye(r)).forEach(i=>{e.update(i.ref,{isActive:!1,updatedAt:new Date})}),await e.commit(),console.log(` Branch package expired for user ${t}`)}catch(e){console.error("Failed to expire branch package:",e)}},TJ=async(t,e)=>{if((e==null?void 0:e.status)!=="active"||!e.endDate)return;const n=Sl(e.endDate);n&&new Date>n&&(console.log(`Branch package expired for user ${t}. Deactivating...`),await IJ(t))},xJ=async t=>{try{const e=Ce(z,"users",t),n=await Zt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},kee=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";case"branch":return" ";default:return" "}},Nee=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=SJ(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},AJ=t=>{const e=Sl(t);return e?e.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" "};/*! Capacitor: https://capacitorjs.com/ - MIT License */const PJ=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(i,o)=>{n.platforms.set(i,o)},s=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=r,n.setPlatform=s,n},RJ=t=>t.CapacitorPlatforms=PJ(t),IM=RJ(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});IM.addPlatform;IM.setPlatform;var Gu;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Gu||(Gu={}));class hw extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const CJ=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},kJ=t=>{var e,n,r,s,i;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},l=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,u=()=>o!==null?o.name:CJ(t),h=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||u,f=()=>h()!=="web",p=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||f,_=T=>{const A=P.get(T);return!!(A!=null&&A.platforms.has(h())||E(T))},g=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||_,b=T=>{var A;return(A=a.PluginHeaders)===null||A===void 0?void 0:A.find(R=>R.name===T)},E=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||b,w=T=>t.console.error(T),S=(T,A,R)=>Promise.reject(`${R} does not have an implementation of "${A}".`),P=new Map,x=(T,A={})=>{const R=P.get(T);if(R)return console.warn(`Capacitor plugin "${T}" already registered. Cannot register plugins twice.`),R.proxy;const N=h(),C=E(T);let L;const D=async()=>(!L&&N in A?L=typeof A[N]=="function"?L=await A[N]():L=A[N]:o!==null&&!L&&"web"in A&&(L=typeof A.web=="function"?L=await A.web():L=A.web),L),J=(oe,ge)=>{var pe,Me;if(C){const ve=C==null?void 0:C.methods.find(F=>ge===F.name);if(ve)return ve.rtype==="promise"?F=>a.nativePromise(T,ge.toString(),F):(F,ot)=>a.nativeCallback(T,ge.toString(),F,ot);if(oe)return(pe=oe[ge])===null||pe===void 0?void 0:pe.bind(oe)}else{if(oe)return(Me=oe[ge])===null||Me===void 0?void 0:Me.bind(oe);throw new hw(`"${T}" plugin is not implemented on ${N}`,Gu.Unimplemented)}},Le=oe=>{let ge;const pe=(...Me)=>{const ve=D().then(F=>{const ot=J(F,oe);if(ot){const et=ot(...Me);return ge=et==null?void 0:et.remove,et}else throw new hw(`"${T}.${oe}()" is not implemented on ${N}`,Gu.Unimplemented)});return oe==="addListener"&&(ve.remove=async()=>ge()),ve};return pe.toString=()=>`${oe.toString()}() { [capacitor code] }`,Object.defineProperty(pe,"name",{value:oe,writable:!1,configurable:!1}),pe},ke=Le("addListener"),We=Le("removeListener"),W=(oe,ge)=>{const pe=ke({eventName:oe},ge),Me=async()=>{const F=await pe;We({eventName:oe,callbackId:F},ge)},ve=new Promise(F=>pe.then(()=>F({remove:Me})));return ve.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Me()},ve},q=new Proxy({},{get(oe,ge){switch(ge){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?W:ke;case"removeListener":return We;default:return Le(ge)}}});return l[T]=q,P.set(T,{name:T,proxy:q,platforms:new Set([...Object.keys(A),...C?[N]:[]])}),q},O=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||x;return a.convertFileSrc||(a.convertFileSrc=T=>T),a.getPlatform=h,a.handleError=w,a.isNativePlatform=p,a.isPluginAvailable=g,a.pluginMethodNoop=S,a.registerPlugin=O,a.Exception=hw,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},NJ=t=>t.Capacitor=kJ(t),Re=NJ(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vd=Re.registerPlugin;Re.Plugins;class TM{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const i=async()=>this.removeListener(e,n),o=Promise.resolve({remove:i});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const r=this.listeners[e];r&&r.forEach(s=>s(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Re.Exception(e,Gu.Unimplemented)}unavailable(e="not available"){return new Re.Exception(e,Gu.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const OP=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),LP=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class DJ extends TM{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=LP(s).trim(),i=LP(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=OP(e.key),r=OP(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}vd("CapacitorCookies",{web:()=>new DJ});const OJ=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),LJ=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},MJ=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,VJ=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=LJ(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class FJ extends TM{async request(e){const n=VJ(e,e.webFetchExtra),r=MJ(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await OJ(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const u={};return i.headers.forEach((h,f)=>{u[f]=h}),{data:l,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}vd("CapacitorHttp",{web:()=>new FJ});const nl=vd("Preferences",{web:()=>se(()=>import("./web-HM_mEuyk.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),fw=Object.freeze(Object.defineProperty({__proto__:null,Preferences:nl},Symbol.toStringTag,{value:"Module"}));var jJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],UJ=jJ.reduce((t,e)=>{const n=qN(`Primitive.${e}`),r=v.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),$J="Label",xM=v.forwardRef((t,e)=>m.jsx(UJ.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));xM.displayName=$J;var AM=xM;const BJ=DE("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ps=v.forwardRef(({className:t,...e},n)=>m.jsx(AM,{ref:n,className:dn(BJ(),t),...e}));Ps.displayName=AM.displayName;var mw="focusScope.autoFocusOnMount",pw="focusScope.autoFocusOnUnmount",MP={bubbles:!1,cancelable:!0},zJ="FocusScope",PM=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=v.useState(null),c=Ti(s),u=Ti(i),h=v.useRef(null),f=Sr(e,g=>l(g)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let g=function(S){if(p.paused||!a)return;const P=S.target;a.contains(P)?h.current=P:To(h.current,{select:!0})},b=function(S){if(p.paused||!a)return;const P=S.relatedTarget;P!==null&&(a.contains(P)||To(h.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const x of S)x.removedNodes.length>0&&To(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(E);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[r,a,p.paused]),v.useEffect(()=>{if(a){FP.add(p);const g=document.activeElement;if(!a.contains(g)){const E=new CustomEvent(mw,MP);a.addEventListener(mw,c),a.dispatchEvent(E),E.defaultPrevented||(WJ(QJ(RM(a)),{select:!0}),document.activeElement===g&&To(a))}return()=>{a.removeEventListener(mw,c),setTimeout(()=>{const E=new CustomEvent(pw,MP);a.addEventListener(pw,u),a.dispatchEvent(E),E.defaultPrevented||To(g??document.body,{select:!0}),a.removeEventListener(pw,u),FP.remove(p)},0)}}},[a,c,u,p]);const _=v.useCallback(g=>{if(!n&&!r||p.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,E=document.activeElement;if(b&&E){const w=g.currentTarget,[S,P]=qJ(w);S&&P?!g.shiftKey&&E===P?(g.preventDefault(),n&&To(S,{select:!0})):g.shiftKey&&E===S&&(g.preventDefault(),n&&To(P,{select:!0})):E===w&&g.preventDefault()}},[n,r,p.paused]);return m.jsx(Rn.div,{tabIndex:-1,...o,ref:f,onKeyDown:_})});PM.displayName=zJ;function WJ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(To(r,{select:e}),document.activeElement!==n)return}function qJ(t){const e=RM(t),n=VP(e,t),r=VP(e.reverse(),t);return[n,r]}function RM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function VP(t,e){for(const n of t)if(!HJ(n,{upTo:e}))return n}function HJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function KJ(t){return t instanceof HTMLInputElement&&"select"in t}function To(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&KJ(t)&&e&&t.select()}}var FP=GJ();function GJ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=jP(t,e),t.unshift(e)},remove(e){var n;t=jP(t,e),(n=t[0])==null||n.resume()}}}function jP(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function QJ(t){return t.filter(e=>e.tagName!=="A")}var gw=0;function YJ(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??UP()),document.body.insertAdjacentElement("beforeend",t[1]??UP()),gw++,()=>{gw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),gw--}},[])}function UP(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var fi=function(){return fi=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fi.apply(this,arguments)};function CM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function JJ(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var vp="right-scroll-bar-position",wp="width-before-scroll-bar",XJ="with-scroll-bars-hidden",ZJ="--removed-body-scroll-bar-size";function yw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function eX(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var tX=typeof window<"u"?v.useLayoutEffect:v.useEffect,$P=new WeakMap;function nX(t,e){var n=eX(null,function(r){return t.forEach(function(s){return yw(s,r)})});return tX(function(){var r=$P.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||yw(a,null)}),i.forEach(function(a){s.has(a)||yw(a,o)})}$P.set(n,t)},[t]),n}function rX(t){return t}function sX(t,e){e===void 0&&(e=rX);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function iX(t){t===void 0&&(t={});var e=sX(null);return e.options=fi({async:!0,ssr:!1},t),e}var kM=function(t){var e=t.sideCar,n=CM(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,fi({},n))};kM.isSideCarExport=!0;function oX(t,e){return t.useMedium(e),kM}var NM=iX(),vw=function(){},Xy=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:vw,onWheelCapture:vw,onTouchMoveCapture:vw}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,_=t.noIsolation,g=t.inert,b=t.allowPinchZoom,E=t.as,w=E===void 0?"div":E,S=t.gapMode,P=CM(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,O=nX([n,e]),T=fi(fi({},P),s);return v.createElement(v.Fragment,null,u&&v.createElement(x,{sideCar:NM,removeScrollBar:c,shards:h,noRelative:p,noIsolation:_,inert:g,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),o?v.cloneElement(v.Children.only(a),fi(fi({},T),{ref:O})):v.createElement(w,fi({},T,{className:l,ref:O}),a))});Xy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xy.classNames={fullWidth:wp,zeroRight:vp};var aX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=aX();return e&&t.setAttribute("nonce",e),t}function cX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function uX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=lX())&&(cX(e,n),uX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},hX=function(){var t=dX();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},DM=function(){var t=hX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},fX={left:0,top:0,right:0,gap:0},ww=function(t){return parseInt(t||"",10)||0},mX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[ww(n),ww(r),ww(s)]},pX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return fX;var e=mX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},gX=DM(),ou="data-scroll-locked",yX=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(XJ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ou,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wp,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(vp," .").concat(vp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wp," .").concat(wp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ou,`] {
    `).concat(ZJ,": ").concat(a,`px;
  }
`)},BP=function(){var t=parseInt(document.body.getAttribute(ou)||"0",10);return isFinite(t)?t:0},vX=function(){v.useEffect(function(){return document.body.setAttribute(ou,(BP()+1).toString()),function(){var t=BP()-1;t<=0?document.body.removeAttribute(ou):document.body.setAttribute(ou,t.toString())}},[])},wX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;vX();var i=v.useMemo(function(){return pX(s)},[s]);return v.createElement(gX,{styles:yX(i,!e,s,n?"":"!important")})},x0=!1;if(typeof window<"u")try{var Om=Object.defineProperty({},"passive",{get:function(){return x0=!0,!0}});window.addEventListener("test",Om,Om),window.removeEventListener("test",Om,Om)}catch{x0=!1}var yc=x0?{passive:!1}:!1,_X=function(t){return t.tagName==="TEXTAREA"},OM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_X(t)&&n[e]==="visible")},EX=function(t){return OM(t,"overflowY")},bX=function(t){return OM(t,"overflowX")},zP=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=LM(t,r);if(s){var i=MM(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},IX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},LM=function(t,e){return t==="v"?EX(e):bX(e)},MM=function(t,e){return t==="v"?SX(e):IX(e)},TX=function(t,e){return t==="h"&&e==="rtl"?-1:1},xX=function(t,e,n,r,s){var i=TX(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,f=0;do{if(!a)break;var p=MM(t,a),_=p[0],g=p[1],b=p[2],E=g-b-i*_;(_||E)&&LM(t,a)&&(h+=E,f+=_);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Lm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},WP=function(t){return[t.deltaX,t.deltaY]},qP=function(t){return t&&"current"in t?t.current:t},AX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},PX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},RX=0,vc=[];function CX(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),s=v.useState(RX++)[0],i=v.useState(DM)[0],o=v.useRef(t);v.useEffect(function(){o.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=JJ([t.lockRef.current],(t.shards||[]).map(qP),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var E=Lm(g),w=n.current,S="deltaX"in g?g.deltaX:w[0]-E[0],P="deltaY"in g?g.deltaY:w[1]-E[1],x,O=g.target,T=Math.abs(S)>Math.abs(P)?"h":"v";if("touches"in g&&T==="h"&&O.type==="range")return!1;var A=window.getSelection(),R=A&&A.anchorNode,N=R?R===O||R.contains(O):!1;if(N)return!1;var C=zP(T,O);if(!C)return!0;if(C?x=T:(x=T==="v"?"h":"v",C=zP(T,O)),!C)return!1;if(!r.current&&"changedTouches"in g&&(S||P)&&(r.current=x),!x)return!0;var L=r.current||x;return xX(L,b,g,L==="h"?S:P)},[]),l=v.useCallback(function(g){var b=g;if(!(!vc.length||vc[vc.length-1]!==i)){var E="deltaY"in b?WP(b):Lm(b),w=e.current.filter(function(x){return x.name===b.type&&(x.target===b.target||b.target===x.shadowParent)&&AX(x.delta,E)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(qP).filter(Boolean).filter(function(x){return x.contains(b.target)}),P=S.length>0?a(b,S[0]):!o.current.noIsolation;P&&b.cancelable&&b.preventDefault()}}},[]),c=v.useCallback(function(g,b,E,w){var S={name:g,delta:b,target:E,should:w,shadowParent:kX(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(P){return P!==S})},1)},[]),u=v.useCallback(function(g){n.current=Lm(g),r.current=void 0},[]),h=v.useCallback(function(g){c(g.type,WP(g),g.target,a(g,t.lockRef.current))},[]),f=v.useCallback(function(g){c(g.type,Lm(g),g.target,a(g,t.lockRef.current))},[]);v.useEffect(function(){return vc.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,yc),document.addEventListener("touchmove",l,yc),document.addEventListener("touchstart",u,yc),function(){vc=vc.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,yc),document.removeEventListener("touchmove",l,yc),document.removeEventListener("touchstart",u,yc)}},[]);var p=t.removeScrollBar,_=t.inert;return v.createElement(v.Fragment,null,_?v.createElement(i,{styles:PX(s)}):null,p?v.createElement(wX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function kX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const NX=oX(NM,CX);var VM=v.forwardRef(function(t,e){return v.createElement(Xy,fi({},t,{ref:e,sideCar:NX}))});VM.classNames=Xy.classNames;var DX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},wc=new WeakMap,Mm=new WeakMap,Vm={},_w=0,FM=function(t){return t&&(t.host||FM(t.parentNode))},OX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=FM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},LX=function(t,e,n,r){var s=OX(e,Array.isArray(t)?t:[t]);Vm[n]||(Vm[n]=new WeakMap);var i=Vm[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),_=p!==null&&p!=="false",g=(wc.get(f)||0)+1,b=(i.get(f)||0)+1;wc.set(f,g),i.set(f,b),o.push(f),g===1&&_&&Mm.set(f,!0),b===1&&f.setAttribute(n,"true"),_||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(e),a.clear(),_w++,function(){o.forEach(function(h){var f=wc.get(h)-1,p=i.get(h)-1;wc.set(h,f),i.set(h,p),f||(Mm.has(h)||h.removeAttribute(r),Mm.delete(h)),p||h.removeAttribute(n)}),_w--,_w||(wc=new WeakMap,wc=new WeakMap,Mm=new WeakMap,Vm={})}},MX=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=DX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),LX(r,s,n,"aria-hidden")):function(){return null}};function VX(t){const e=FX(t),n=v.forwardRef((r,s)=>{const{children:i,...o}=r,a=v.Children.toArray(i),l=a.find(UX);if(l){const c=l.props.children,u=a.map(h=>h===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:s,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function FX(t){const e=v.forwardRef((n,r)=>{const{children:s,...i}=n;if(v.isValidElement(s)){const o=BX(s),a=$X(i,s.props);return s.type!==v.Fragment&&(a.ref=r?Ef(r,o):o),v.cloneElement(s,a)}return v.Children.count(s)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var jX=Symbol("radix.slottable");function UX(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===jX}function $X(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function BX(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Zy="Dialog",[jM,Dee]=Zu(Zy),[zX,ri]=jM(Zy),UM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=v.useRef(null),l=v.useRef(null),[c,u]=RE({prop:r,defaultProp:s??!1,onChange:i,caller:Zy});return m.jsx(zX,{scope:e,triggerRef:a,contentRef:l,contentId:jv(),titleId:jv(),descriptionId:jv(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};UM.displayName=Zy;var $M="DialogTrigger",BM=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri($M,n),i=Sr(e,s.triggerRef);return m.jsx(Rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":OS(s.open),...r,ref:i,onClick:tn(t.onClick,s.onOpenToggle)})});BM.displayName=$M;var NS="DialogPortal",[WX,zM]=jM(NS,{forceMount:void 0}),WM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ri(NS,e);return m.jsx(WX,{scope:e,forceMount:n,children:v.Children.map(r,o=>m.jsx(Ql,{present:n||i.open,children:m.jsx(PE,{asChild:!0,container:s,children:o})}))})};WM.displayName=NS;var Dg="DialogOverlay",qM=v.forwardRef((t,e)=>{const n=zM(Dg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ri(Dg,t.__scopeDialog);return i.modal?m.jsx(Ql,{present:r||i.open,children:m.jsx(HX,{...s,ref:e})}):null});qM.displayName=Dg;var qX=VX("DialogOverlay.RemoveScroll"),HX=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(Dg,n);return m.jsx(VM,{as:qX,allowPinchZoom:!0,shards:[s.contentRef],children:m.jsx(Rn.div,{"data-state":OS(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ql="DialogContent",HM=v.forwardRef((t,e)=>{const n=zM(ql,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ri(ql,t.__scopeDialog);return m.jsx(Ql,{present:r||i.open,children:i.modal?m.jsx(KX,{...s,ref:e}):m.jsx(GX,{...s,ref:e})})});HM.displayName=ql;var KX=v.forwardRef((t,e)=>{const n=ri(ql,t.__scopeDialog),r=v.useRef(null),s=Sr(e,n.contentRef,r);return v.useEffect(()=>{const i=r.current;if(i)return MX(i)},[]),m.jsx(KM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tn(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:tn(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:tn(t.onFocusOutside,i=>i.preventDefault())})}),GX=v.forwardRef((t,e)=>{const n=ri(ql,t.__scopeDialog),r=v.useRef(!1),s=v.useRef(!1);return m.jsx(KM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),KM=v.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ri(ql,n),l=v.useRef(null),c=Sr(e,l);return YJ(),m.jsxs(m.Fragment,{children:[m.jsx(PM,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:m.jsx(ny,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":OS(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(QX,{titleId:a.titleId}),m.jsx(JX,{contentRef:l,descriptionId:a.descriptionId})]})]})}),DS="DialogTitle",GM=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(DS,n);return m.jsx(Rn.h2,{id:s.titleId,...r,ref:e})});GM.displayName=DS;var QM="DialogDescription",YM=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(QM,n);return m.jsx(Rn.p,{id:s.descriptionId,...r,ref:e})});YM.displayName=QM;var JM="DialogClose",XM=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ri(JM,n);return m.jsx(Rn.button,{type:"button",...r,ref:e,onClick:tn(t.onClick,()=>s.onOpenChange(!1))})});XM.displayName=JM;function OS(t){return t?"open":"closed"}var ZM="DialogTitleWarning",[Oee,eV]=xU(ZM,{contentName:ql,titleName:DS,docsSlug:"dialog"}),QX=({titleId:t})=>{const e=eV(ZM),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},YX="DialogDescriptionWarning",JX=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eV(YX).contentName}}.`;return v.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},XX=UM,ZX=BM,eZ=WM,tV=qM,nV=HM,rV=GM,sV=YM,tZ=XM;const Il=XX,Lee=ZX,nZ=eZ,iV=v.forwardRef(({className:t,...e},n)=>m.jsx(tV,{ref:n,className:dn("fixed inset-0 z-[9998] bg-black/30 dark:bg-black backdrop-blur-[5px] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));iV.displayName=tV.displayName;const ua=v.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,overlayClassName:i,...o},a)=>m.jsxs(nZ,{children:[m.jsx(iV,{className:i}),m.jsxs(nV,{ref:a,className:dn("fixed left-[50%] top-[50%] z-[9999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background dark:bg-[#0f172a] dark:text-slate-100 dark:border-slate-800 p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:l=>{r&&l.preventDefault()},onEscapeKeyDown:l=>{s&&l.preventDefault()},...o,children:[e,!n&&m.jsxs(tZ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(ko,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ua.displayName=nV.displayName;const da=({className:t,...e})=>m.jsx("div",{className:dn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});da.displayName="DialogHeader";const ev=({className:t,...e})=>m.jsx("div",{className:dn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ev.displayName="DialogFooter";const ha=v.forwardRef(({className:t,...e},n)=>m.jsx(rV,{ref:n,className:dn("text-lg font-semibold leading-none tracking-tight",t),...e}));ha.displayName=rV.displayName;const Og=v.forwardRef(({className:t,...e},n)=>m.jsx(sV,{ref:n,className:dn("text-sm text-muted-foreground",t),...e}));Og.displayName=sV.displayName;const HP="master_pin",Ni=new Map;function rl(t){return t?`${HP}_${t}`:HP}async function rZ(t){try{const e=await Yr.getUserData(t),n=(e==null?void 0:e.security)&&e.security.masterPin||(e==null?void 0:e.masterPin)||null;return typeof n=="string"&&n.length>0?n:null}catch{try{const e=Ce(z,"users",t),n=await Zt(e);if(n.exists()){const r=n.data(),s=(r==null?void 0:r.security)&&r.security.masterPin||(r==null?void 0:r.masterPin)||null;return typeof s=="string"&&s.length>0?s:null}}catch{}return null}}function KP(t){try{const e=localStorage.getItem(rl(t));return e&&e.length>0?e:null}catch{return null}}async function Ew(t,e){try{const n={security:{masterPin:e||null,masterPinUpdatedAt:Be()},updatedAt:Be()};await en(Ce(z,"users",t),n,{merge:!0})}catch{try{await cn(Ce(z,"users",t),{security:{masterPin:e||null,masterPinUpdatedAt:Be()},updatedAt:Be()})}catch{}}}function _c(t,e){try{const n=rl(t);e?localStorage.setItem(n,e):localStorage.removeItem(n)}catch{}}class za{static async hasMasterPin(e){const n=rl(e);if(Ni.has(n)){const s=Ni.get(n);return s!==""&&s!=null}const r=KP(e);if(r)return Ni.set(n,r),!0;if(e){const s=KP(void 0);if(s){Ni.set(n,s),_c(e,s);try{_c(void 0,null)}catch{}return await Ew(e,s),!0}}if(e){const s=await rZ(e);if(s){Ni.set(n,s),_c(e,s);try{_c(void 0,null)}catch{}return!0}}return!1}static async createMasterPin(e,n){try{if(!e||e.length<4)return!1;const r=btoa(e),s=rl(n);return Ni.set(s,r),_c(n,r),n&&await Ew(n,r),!0}catch(r){return console.error("Error creating master PIN:",r),!1}}static async verifyMasterPin(e,n){try{const r=rl(n);if(!await this.hasMasterPin(n))return!1;const s=Ni.get(r);return s?atob(s)===e:!1}catch(r){return console.error("Error verifying master PIN:",r),!1}}static async changeMasterPin(e,n,r){try{return await this.verifyMasterPin(e,r)?await this.createMasterPin(n,r):!1}catch(s){return console.error("Error changing master PIN:",s),!1}}static async deleteMasterPin(e){try{const n=rl(e);return Ni.delete(n),_c(e,null),e&&await Ew(e,null),!0}catch(n){return console.error("Error deleting master PIN:",n),!1}}static async getMasterPin(e){try{const n=rl(e);if(!await this.hasMasterPin(e))return null;const r=Ni.get(n);return r?atob(r):null}catch(n){return console.error("Error getting master PIN:",n),null}}}const oV=({open:t,onOpenChange:e,title:n="  ",description:r="     ",onSuccess:s})=>{const{toast:i}=Gl(),[o,a]=v.useState(""),[l,c]=v.useState(!1),[u,h]=v.useState(null),f=async()=>{h(null);try{const _=Bt.currentUser;if(!_||!_.email){h("    .    .");return}c(!0);const g=ec.credential(_.email,o);await a8(_,g),c(!1),a(""),i({title:" ",description:"     "}),s(),e&&e(!1)}catch(_){console.error("    :",_),c(!1);const g=(_==null?void 0:_.code)||"";h(g==="auth/wrong-password"?"   .   .":g==="auth/too-many-requests"?"  .     .":"   .   .")}},p=_=>{e&&e(_),_||(a(""),h(null),c(!1))};return m.jsx(Il,{open:t,onOpenChange:p,children:m.jsxs(ua,{className:"sm:max-w-[400px] bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",dir:"rtl",children:[m.jsxs(da,{children:[m.jsx(ha,{className:"text-right text-gray-900 dark:text-gray-100",children:n}),m.jsx(Og,{className:"text-right text-gray-500 dark:text-gray-400",children:r})]}),m.jsxs("div",{className:"grid gap-4 py-2",children:[m.jsxs("div",{className:"grid grid-cols-4 items-center gap-2",children:[m.jsx("label",{htmlFor:"password",className:"text-right col-span-1 text-sm text-gray-700 dark:text-gray-300",children:" "}),m.jsxs("div",{className:"col-span-3 relative",children:[m.jsx(iy,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),m.jsx(Zn,{id:"password",type:"password",value:o,onChange:_=>a(_.target.value),placeholder:"    ",autoComplete:"off",className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100"})]})]}),u&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-xs text-right",children:u})]}),m.jsxs(ev,{className:"flex justify-end gap-2",children:[m.jsx(vt,{variant:"outline",onClick:()=>p(!1),disabled:l,className:"dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",children:""}),m.jsx(vt,{onClick:f,disabled:l,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:l?" ...":""})]})]})})},Mee=Object.freeze(Object.defineProperty({__proto__:null,default:oV},Symbol.toStringTag,{value:"Module"})),A0=({open:t,onOpenChange:e,onSuccess:n,title:r="  ",description:s="      ",mode:i="verify",className:o,overlayClassName:a})=>{const[l,c]=v.useState(""),[u,h]=v.useState(""),[f,p]=v.useState(""),[_,g]=v.useState(!1),[b,E]=v.useState(!1),[w,S]=v.useState(!1),[P,x]=v.useState(""),[O,T]=v.useState(!1),{toast:A}=Gl(),{user:R,profile:N}=Ss(),C=R==null?void 0:R.uid,[L,D]=v.useState(!1),[J,Le]=v.useState(!1),ke=(N==null?void 0:N.role)==="admin"||(N==null?void 0:N.role)==="staff",[We,W]=v.useState(!1),[q,oe]=v.useState(!1),ge=v.useRef(null);v.useEffect(()=>{let ve=!0;return t&&(async()=>{try{const ot=await za.hasMasterPin(C);ve&&D(ot)}catch{}})(),()=>{ve=!1}},[C,t]);const pe=async ve=>{ve.preventDefault(),x(""),T(!0);try{if(i==="verify"){if(!l){x("    "),T(!1);return}if(!await za.verifyMasterPin(l,C)){x("   "),T(!1);return}A({title:" ",description:"     "}),n==null||n(),Me()}else if(i==="create"){if(!u||u.length<4){x("      4   "),T(!1);return}if(u!==f){x("     "),T(!1);return}if(!await za.createMasterPin(u,C)){x("    "),T(!1);return}A({title:"    ",description:"     "}),n==null||n(),Me()}else if(i==="change"){if(!C){x("        .         ."),T(!1);return}if(L&&!J&&!q){if(!l){x("        "),T(!1);return}if(!await za.verifyMasterPin(l,C)){x("    "),T(!1);return}}if(!u||u.length<4){x("      4   "),T(!1);return}if(u!==f){x("     "),T(!1);return}if(!(L?J&&ke||q?await za.createMasterPin(u,C):await za.changeMasterPin(l,u,C):await za.createMasterPin(u,C))){x("    "),T(!1);return}A({title:L?J&&ke||q?"     ":"    ":"    ",description:L?J&&ke||q?"      ":"     ":"     "}),n==null||n(),Me()}}catch{x("     ")}finally{T(!1)}},Me=()=>{c(""),h(""),p(""),x(""),g(!1),E(!1),S(!1),oe(!1),W(!1),e(!1)};return m.jsx(Il,{open:t,onOpenChange:Me,children:m.jsxs(ua,{className:dn("sm:max-w-md bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800",o),dir:"rtl",overlayClassName:a,children:[m.jsx(da,{children:m.jsxs(ha,{className:"flex items-center gap-2 text-center justify-center text-gray-900 dark:text-gray-100",children:[m.jsx(LE,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),r]})}),m.jsx("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 mb-4",children:s}),m.jsxs("form",{ref:ge,onSubmit:pe,className:"space-y-4",children:[(i==="verify"||i==="change"&&L)&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ps,{htmlFor:"currentPin",className:"text-right block text-gray-700 dark:text-gray-300",children:i==="verify"?"  ":"  "}),m.jsxs("div",{className:"relative",children:[m.jsx(Zn,{id:"currentPin",type:_?"text":"password",autoComplete:"off",value:l,onChange:ve=>c(ve.target.value),onKeyDown:ve=>{var F;if(ve.key==="Enter")try{(F=ge.current)==null||F.requestSubmit()}catch{}},placeholder:i==="verify"?"   ":"   ",className:"pr-10 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100",dir:"ltr",inputMode:"numeric",autoFocus:!0,disabled:i==="change"&&q}),m.jsx(vt,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 dark:text-gray-400",onClick:()=>g(!_),children:_?m.jsx(uh,{className:"h-4 w-4"}):m.jsx(dh,{className:"h-4 w-4"})})]}),i==="change"&&L&&ke&&m.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 flex items-center justify-between",children:[m.jsx("span",{children:"  "}),m.jsx(vt,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 dark:border-gray-700 dark:text-gray-300",onClick:()=>{Le(ve=>!ve)},children:J?"   ":"    "})]}),i==="change"&&L&&m.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 flex items-center justify-between",children:[m.jsx("span",{children:"       "}),m.jsx(vt,{type:"button",variant:"secondary",size:"sm",className:"h-7 px-2 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",onClick:()=>W(!0),children:"  "})]}),i==="change"&&q&&m.jsx("div",{className:"text-[11px] text-green-600 dark:text-green-400",children:"          "})]}),(i==="create"||i==="change")&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ps,{htmlFor:"newPin",className:"text-right block text-gray-700 dark:text-gray-300",children:i==="create"?"   ":"  "}),m.jsxs("div",{className:"relative",children:[m.jsx(Zn,{id:"newPin",type:b?"text":"password",autoComplete:"off",value:u,onChange:ve=>h(ve.target.value),onKeyDown:ve=>{var F;if(ve.key==="Enter")try{(F=ge.current)==null||F.requestSubmit()}catch{}},placeholder:"   ",className:"pr-10 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100",dir:"ltr",inputMode:"numeric"}),m.jsx(vt,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 dark:text-gray-400",onClick:()=>E(!b),children:b?m.jsx(uh,{className:"h-4 w-4"}):m.jsx(dh,{className:"h-4 w-4"})})]})]}),(i==="create"||i==="change")&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ps,{htmlFor:"confirmPin",className:"text-right block text-gray-700 dark:text-gray-300",children:"   "}),m.jsxs("div",{className:"relative",children:[m.jsx(Zn,{id:"confirmPin",type:w?"text":"password",autoComplete:"off",value:f,onChange:ve=>p(ve.target.value),onKeyDown:ve=>{var F;if(ve.key==="Enter")try{(F=ge.current)==null||F.requestSubmit()}catch{}},placeholder:"    ",className:"pr-10 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100",dir:"ltr",inputMode:"numeric"}),m.jsx(vt,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-500 dark:text-gray-400",onClick:()=>S(!w),children:w?m.jsx(uh,{className:"h-4 w-4"}):m.jsx(dh,{className:"h-4 w-4"})})]})]}),P&&m.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/30 p-3 rounded-lg border border-red-100 dark:border-red-900/50",children:[m.jsx(j4,{className:"h-4 w-4"}),P]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx(vt,{type:"button",variant:"outline",onClick:Me,className:"flex-1 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800",children:""}),m.jsx(vt,{type:"submit",disabled:O,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:O?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):m.jsxs(m.Fragment,{children:[m.jsx(iy,{className:"h-4 w-4 mr-2"}),i==="verify"?"":i==="create"?"":""]})})]})]}),m.jsx(oV,{open:We,onOpenChange:W,title:"   ",description:"         ",onSuccess:()=>{oe(!0),W(!1),x("")}})]})})},Vee=Object.freeze(Object.defineProperty({__proto__:null,MasterPinDialog:A0,default:A0},Symbol.toStringTag,{value:"Module"})),sZ={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},aV=v.createContext(void 0);function Ss(){const t=v.useContext(aV);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Ec=2,iZ=1e3*60*60*24,oZ=({children:t})=>{const[e,n]=v.useState(null),[r,s]=v.useState(null),[i,o]=v.useState(null),[a,l]=v.useState(!1),[c,u]=v.useState(!0),h=v.useRef(null),f=v.useRef(null),[p,_]=v.useState(!1),[g,b]=v.useState(Ec),[E,w]=v.useState([]),[S,P]=v.useState(!1),[x,O]=v.useState(null),[T,A]=v.useState(!1),[R,N]=v.useState(!1),{toast:C}=Gl(),L=()=>{try{const K="device_id",ce=localStorage.getItem(K);if(ce&&ce.length>0)return ce;const Pe=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`dev-${Math.random().toString(36).slice(2)}-${Date.now()}`;return localStorage.setItem(K,Pe),Pe}catch{return"unknown-device"}},D=()=>{try{const K=typeof window<"u"?window:null,ce=typeof navigator<"u"&&navigator.userAgent||"",Pe=typeof navigator<"u"&&navigator.platform||"",Xe=ce.toLowerCase(),xe=Pe.toLowerCase();return K&&K.electronAPI?Xe.includes("windows")?{deviceName:"  - ",deviceType:"desktop"}:Xe.includes("mac")?{deviceName:"  - ",deviceType:"desktop"}:Xe.includes("linux")?{deviceName:"  - ",deviceType:"desktop"}:{deviceName:"  ",deviceType:"desktop"}:/android/i.test(ce)?{deviceName:" ",deviceType:"mobile-web"}:/iphone|ipad|ipod/i.test(ce)?{deviceName:" iOS",deviceType:"mobile-web"}:/mobile/i.test(ce)?{deviceName:" ",deviceType:"mobile-web"}:xe.includes("win")?{deviceName:"   - ",deviceType:"web"}:xe.includes("mac")?{deviceName:"   - ",deviceType:"web"}:xe.includes("linux")?{deviceName:"   - ",deviceType:"web"}:{deviceName:"  ",deviceType:"web"}}catch{return{deviceName:"  ",deviceType:"unknown"}}},J=K=>{const ce=String(K||"").toLowerCase();return ce==="desktop"?"  ":ce==="web"?"  ":ce==="mobile-web"?" ":ce==="android"?" ":" "},Le=async()=>{if(!(e!=null&&e.uid)){w([]);return}P(!0);try{const K=De(z,"userSessions"),ce=Qe(K,qe("userId","==",e.uid)),Pe=await Ye(ce),Xe=Date.now(),xe=1e3*60*60*24,je=Pe.docs.map(be=>{const Ne=be.data(),Ze=Ne.forcedLogout===!0;let Pt,Q;try{const Ie=Ne.createdAt;Pt=Ie&&typeof Ie.toDate=="function"?Ie.toDate():Ie?new Date(Ie):void 0}catch{Pt=void 0}try{const Ie=Ne.lastSeen;Q=Ie&&typeof Ie.toDate=="function"?Ie.toDate():Ie?new Date(Ie):Pt}catch{Q=Pt}return{id:be.id,deviceId:String(Ne.deviceId||""),deviceName:Ne.deviceName?String(Ne.deviceName):void 0,deviceType:Ne.deviceType?String(Ne.deviceType):void 0,createdAt:Pt,lastSeen:Q,forcedLogout:Ze}}).filter(be=>{if(be.forcedLogout||!be.lastSeen)return!1;const Ne=be.lastSeen.getTime();return!Ne||isNaN(Ne)?!1:Xe-Ne<xe}).sort((be,Ne)=>{const Ze=be.createdAt instanceof Date?be.createdAt.getTime():0;return(Ne.createdAt instanceof Date?Ne.createdAt.getTime():0)-Ze});w(je)}catch{w([])}finally{P(!1)}},ke=async K=>{try{const ce=L(),Pe=D(),Xe=De(z,"userSessions"),xe=Qe(Xe,qe("userId","==",K),qe("deviceId","==",ce)),je=await Ye(xe);if(!je.empty){const be=je.docs[0].ref;await cn(be,{lastSeen:Be(),deviceName:Pe.deviceName,deviceType:Pe.deviceType});return}await ys(Xe,{userId:K,deviceId:ce,deviceName:Pe.deviceName,deviceType:Pe.deviceType,createdAt:Be(),lastSeen:Be()})}catch(ce){console.error("session registration error:",ce)}},We=async K=>{try{const ce=L(),Pe=De(z,"userSessions"),Xe=Qe(Pe,qe("userId","==",K),qe("deviceId","==",ce)),je=(await Ye(Xe)).docs.map(be=>Xt(be.ref));je.length>0&&await Promise.all(je)}catch(ce){console.error("session clear error:",ce)}},W=(K,ce)=>{if(ce===!0)return null;const Xe=typeof K=="number"?K:parseInt(String(K??""),10);return!isNaN(Xe)&&Xe>0?Xe:Ec},q=async K=>{try{const ce=Ce(z,"users",K),Pe=await Zt(ce);if(!Pe.exists())return b(Ec),Ec;const Xe=Pe.data(),xe=W(Xe.sessionLimit,Xe.sessionLimitDisabled);return b(xe),xe}catch(ce){return console.error("session limit load error:",ce),b(Ec),Ec}},oe=(K,ce)=>{try{const Pe=L(),Xe=De(z,"userSessions"),xe=Qe(Xe,qe("userId","==",K));if(f.current)try{f.current()}catch{}f.current=df(xe,je=>{try{const be=je.docs.map(ae=>{const Ue=ae.data();let Je,Et;try{const Kt=Ue.createdAt;Je=Kt&&typeof Kt.toDate=="function"?Kt.toDate():new Date(Kt||Date.now())}catch{Je=new Date}try{const Kt=Ue.lastSeen;Et=Kt&&typeof Kt.toDate=="function"?Kt.toDate():new Date(Kt||Je)}catch{Et=Je}return{id:ae.id,deviceId:String(Ue.deviceId||""),createdAt:Je,lastSeen:Et,forcedLogout:Ue.forcedLogout===!0}});be.sort((ae,Ue)=>{const Je=ae.createdAt instanceof Date?ae.createdAt.getTime():0,Et=Ue.createdAt instanceof Date?Ue.createdAt.getTime():0;return Je-Et});const Ne=Date.now(),Ze=be.filter(ae=>{const Ue=ae.lastSeen instanceof Date?ae.lastSeen:ae.createdAt;return!(Ue instanceof Date)||isNaN(Ue.getTime())||ae.forcedLogout?!1:Ne-Ue.getTime()<iZ}),Pt=be.filter(ae=>!Ze.some(Ue=>Ue.id===ae.id));if(Pt.length>0&&Pt.forEach(ae=>{try{Xt(Ce(z,"userSessions",ae.id))}catch{}}),be.some(ae=>ae.deviceId===Pe&&ae.forcedLogout)){_(!0);try{ot()}catch{}return}if(ce==null||ce<=0){_(!1);return}const Ie=Ze,ye=Ie.slice(0,ce).some(ae=>ae.deviceId===Pe),it=Ie.length>ce&&!ye;_(it)}catch(be){console.error("sessions listener error:",be),_(!1)}},je=>{console.error("sessions listener subscribe error:",je),_(!1)})}catch(Pe){console.error("attachSessionsListener error:",Pe),_(!1)}};v.useEffect(()=>{const K=()=>{console.log(" Received userSubscriptionUpdated event - Refreshing profile..."),e&&(ge(e.uid,!0),wn())};return window.addEventListener("userSubscriptionUpdated",K),()=>{window.removeEventListener("userSubscriptionUpdated",K)}},[e]);const ge=async(K,ce=!1)=>{var Pe,Xe,xe,je,be,Ne,Ze,Pt;try{const Q=Ce(z,"profiles",K),Ie=`profile_cache_v2_${K}`,Te=Date.now(),ye=1e3*60*60*24;if(!ce)try{const ae=localStorage.getItem(Ie);if(ae){const{data:Ue,timestamp:Je}=JSON.parse(ae);if(Te-Je<ye&&(s(Ue),u(!1),console.log(" Profile loaded from cache (valid)"),!(Te-Je>1e3*60*60)))return}}catch(ae){console.warn("Cache parse error:",ae)}const it=await Zt(Q);if(it.exists()){const ae=it.data(),Ue={userId:it.id,shopId:ae.shopId,role:ae.role,fullName:ae.fullName,phone:ae.phone,sim1Number:ae.sim1Number||null,sim2Number:ae.sim2Number||null,shopName:ae.shopName||null,approved:ae.approved,avatarId:ae.avatarId,bridgeLink:ae.bridgeLink||null,bridgeDeviceId:ae.bridgeDeviceId||null,showWithdrawNote:ae.showWithdrawNote!==void 0?!!ae.showWithdrawNote:!0,isReceiptNoteEnabled:ae.isReceiptNoteEnabled!==void 0?!!ae.isReceiptNoteEnabled:!0,smsReadingEnabled:ae.smsReadingEnabled!==void 0?!!ae.smsReadingEnabled:!1,smsAutoRegisterEnabled:ae.smsAutoRegisterEnabled!==void 0?!!ae.smsAutoRegisterEnabled:!1,createdAt:((Xe=(Pe=ae.createdAt)==null?void 0:Pe.toDate)==null?void 0:Xe.call(Pe))||new Date,updatedAt:((je=(xe=ae.updatedAt)==null?void 0:xe.toDate)==null?void 0:je.call(xe))||new Date,trialStarted:ae.trialStarted||!1,trialStartDate:(Ne=(be=ae.trialStartDate)==null?void 0:be.toDate)==null?void 0:Ne.call(be),trialEndDate:(Pt=(Ze=ae.trialEndDate)==null?void 0:Ze.toDate)==null?void 0:Pt.call(Ze),trialExpired:ae.trialExpired||!1,referralCode:ae.referralCode||null,referredBy:ae.referredBy||null};s(Ue);try{localStorage.setItem(Ie,JSON.stringify({data:Ue,timestamp:Te})),Ue.shopId&&localStorage.setItem("shopId",Ue.shopId)}catch{}}else try{const ae=await EM.getByUserId(K);if(ae){const Ue={userId:K,shopId:ae.shopId,role:ae.role||"user",fullName:ae.fullName||null,phone:ae.phone||null,shopName:ae.shopName||null,approved:ae.approved??!1,avatarId:ae.avatarId||void 0,bridgeLink:ae.bridgeLink||null,bridgeDeviceId:ae.bridgeDeviceId||null,createdAt:Be(),updatedAt:Be()};await en(Ce(z,"profiles",K),Ue,{merge:!0}),s({...ae,userId:K})}else await Me(K)}catch(ae){console.error("Profile migration error:",ae)}u(!1)}catch(Q){console.error("Error fetching profile:",Q),u(!1)}},pe=async K=>{try{const ce=Ce(z,"users",K.uid);(await Zt(ce)).exists()?(await cn(ce,{lastLogin:Be(),updatedAt:Be()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",K.uid)):(await en(ce,{email:K.email||"",displayName:K.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Be(),updatedAt:Be(),lastLogin:Be()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",K.uid))}catch(ce){console.error(" ensureAdminUserDoc error:",ce)}},Me=async(K,ce,Pe,Xe,xe)=>{var je,be;try{console.log("Creating default profile for user:",K);const Ne=I0.generateReferralCode(K);let Ze=null;const Pt={userId:K,shopId:"default-shop",role:"user",fullName:ce||" ",phone:Pe||null,shopName:Xe||null,approved:!1,referralCode:Ne,referredBy:xe||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(Pt),console.log("Created temporary profile:",Pt);try{const{doc:Q,setDoc:Ie,serverTimestamp:Te}=await se(async()=>{const{doc:Ue,setDoc:Je,serverTimestamp:Et}=await Promise.resolve().then(()=>Jn);return{doc:Ue,setDoc:Je,serverTimestamp:Et}},void 0,import.meta.url),{db:ye}=await se(async()=>{const{db:Ue}=await Promise.resolve().then(()=>mn);return{db:Ue}},void 0,import.meta.url),it={email:((je=Bt.currentUser)==null?void 0:je.email)||"",displayName:ce||" ",phone:Pe||null,shopName:Xe||null,isActive:!1,referralCode:Ne,referredBy:xe||null,createdAt:Te(),lastLogin:null,updatedAt:Te()};if(console.log("Attempting to add user to admin collection with data:",it),await Ie(Q(ye,"users",K),it,{merge:!0}),console.log(" User successfully added to admin collection:",it),xe)try{const{query:Ue,collection:Je,where:Et,limit:Kt,getDocs:Ln}=await se(async()=>{const{query:G,collection:$,where:U,limit:Y,getDocs:te}=await Promise.resolve().then(()=>Jn);return{query:G,collection:$,where:U,limit:Y,getDocs:te}},void 0,import.meta.url),{db:gr}=await se(async()=>{const{db:G}=await Promise.resolve().then(()=>mn);return{db:G}},void 0,import.meta.url),zr=Ue(Je(gr,"users"),Et("referralCode","==",xe),Kt(1)),_n=await Ln(zr);_n.empty?console.log(" Referral code not found in users collection:",xe):(Ze=_n.docs[0].id,await I0.create({referrerId:Ze,referredUserId:K,referredUserEmail:((be=Bt.currentUser)==null?void 0:be.email)||"",referralCode:xe,status:"completed"}),console.log(" Referral record created successfully for referrer:",Ze))}catch(Ue){console.error(" Error creating referral record:",Ue)}const ae=await Zt(Q(ye,"users",K));ae.exists()?console.log(" User document verified in Firestore:",ae.data()):console.log(" User document not found after creation")}catch(Q){console.error(" Error adding user to admin collection:",Q)}try{const{addDoc:Q,collection:Ie,serverTimestamp:Te}=await se(async()=>{const{addDoc:Je,collection:Et,serverTimestamp:Kt}=await Promise.resolve().then(()=>Jn);return{addDoc:Je,collection:Et,serverTimestamp:Kt}},void 0,import.meta.url),{db:ye}=await se(async()=>{const{db:Je}=await Promise.resolve().then(()=>mn);return{db:Je}},void 0,import.meta.url),ae=(await Q(Ie(ye,"shops"),{name:Xe||" ",ownerId:K,createdAt:Te(),updatedAt:Te(),isActive:!0})).id;await yp.create({userId:K,shopId:ae,role:"user",fullName:" ",phone:null});try{await yp.update(K,{referralCode:Ne,referredBy:Ze||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(Je){console.warn(" Failed to update profile with referral fields:",Je)}const Ue=await yp.getById(K);Ue&&(s(Ue),console.log("Updated with Firebase profile:",Ue))}catch(Q){console.error("Error creating profile:",Q),console.log("Using local profile - Firebase unavailable")}}catch(Ne){console.error("Error creating default profile:",Ne)}};v.useEffect(()=>{console.log(" Setting up auth state listener"),u(!0);const K=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),u(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const ce=localStorage.getItem("demoUser"),Pe=localStorage.getItem("demoProfile");if(ce&&Pe){console.log(" Found demo user in localStorage");try{const xe=JSON.parse(ce),je=JSON.parse(Pe);n(xe),s(je),clearTimeout(K),u(!1);return}catch(xe){console.error("Error parsing demo user data:",xe),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const Xe=g8(Bt,async xe=>{if(console.log(" Auth state changed:",{uid:xe==null?void 0:xe.uid,email:xe==null?void 0:xe.email,emailVerified:xe==null?void 0:xe.emailVerified,timestamp:new Date().toISOString()}),n(xe),xe){console.log(" User authenticated, starting profile hydration for:",xe.uid);try{const je=await q(xe.uid);await ke(xe.uid),oe(xe.uid,je)}catch(je){console.error("session registration on auth change error:",je)}try{await nl.set({key:"current_user_id",value:xe.uid}),console.log(" Synced current_user_id to Native:",xe.uid)}catch(je){console.error("Failed to sync user ID to native:",je)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}ge(xe.uid),wn(),pe(xe)}else{if(console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),_(!1),f.current){try{f.current()}catch{}f.current=null}u(!1);try{await nl.remove({key:"current_user_id"}),await nl.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(K)});return()=>{clearTimeout(K),Xe()}},[]),v.useEffect(()=>{const K=async()=>{try{await sr(),await wn(!0)}catch{}};try{window.addEventListener("app:softRefresh",K)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",K)}catch{}}},[e==null?void 0:e.uid]),v.useEffect(()=>{const K=()=>{try{wn(!0)}catch{}};try{window.addEventListener("userSubscriptionUpdated",K),window.addEventListener("subscriptionActivated",K)}catch{}return()=>{try{window.removeEventListener("userSubscriptionUpdated",K),window.removeEventListener("subscriptionActivated",K)}catch{}}},[e==null?void 0:e.uid]),v.useEffect(()=>{e!=null&&e.uid&&Yr.syncDeletedTransactionsLocal(e.uid)},[e==null?void 0:e.uid]);const ve=async(K,ce,Pe,Xe,xe,je)=>{try{const be=(K||"").trim().toLowerCase(),Ne=(ce||"").trim();console.log(" Attempting to sign up user:",be);const Ze=await Ux(Bt,be,Ne);console.log(" Sign up successful:",Ze.user.uid),await Me(Ze.user.uid,Pe,Xe,xe,je),await pe(Ze.user);try{await ge(Ze.user.uid),await wn()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(be){console.error(" Sign up error:",be);let Ne="    ";return be.code==="auth/email-already-in-use"?Ne="    ":be.code==="auth/weak-password"?Ne="   ":be.code==="auth/invalid-email"&&(Ne="   "),{error:{...be,message:Ne}}}},F=async(K,ce)=>{var xe;const Pe=(K||"").trim().toLowerCase(),Xe=(ce||"").trim();try{const je=Te=>Te.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),be=Te=>Te.replace(/[-]/g,ye=>String("0123456789"["".indexOf(ye)])).replace(/[-]/g,ye=>String("0123456789"["".indexOf(ye)])),Ne=Te=>Te.replace(/[0-9]/g,ye=>""[Number(ye)]),Ze=Te=>be(je(Te));if(console.log(" Attempting to sign in user:",Pe),Pe==="test@example.com"&&Xe==="123456"){console.log(" Demo user login detected");const Te={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},ye={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(Te)),localStorage.setItem("demoProfile",JSON.stringify(ye)),n(Te),s(ye),u(!1),console.log(" Demo user signed in successfully"),{error:null}}let Pt;const Q=[Ze(Xe),je(Xe),Ne(je(Xe))];let Ie=null;for(const Te of Q)try{Te!==Xe&&console.log(" Trying password variant"),Pt=await c8(Bt,Pe,Te);break}catch(ye){if(Ie=ye,(ye==null?void 0:ye.code)!=="auth/wrong-password"&&(ye==null?void 0:ye.code)!=="auth/invalid-credential")throw ye}if(!Pt)throw Ie||new Error("auth/invalid-credential");console.log(" Sign in successful:",Pt.user.uid);try{if((await Zt(Ce(z,"deletedUsers",Pt.user.uid))).exists())return console.log(" User is deleted, signing out"),await $x(Bt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(Te){console.error("Error checking deleted users:",Te)}await pe(Pt.user);try{await ge(Pt.user.uid),await wn()}catch{}return{error:null}}catch(je){if(console.error(" Sign in error:",je),Pe==="test@example.com"&&je.code==="auth/user-not-found"){console.log(" Creating test user...");try{const Ze=await Ux(Bt,Pe,Xe);return console.log(" Test user created:",Ze.user.uid),await Me(Ze.user.uid," ","01000000000"," "),{error:null}}catch(Ze){return console.error(" Error creating test user:",Ze),{error:Ze}}}let be="    ",Ne=je==null?void 0:je.code;if(Ne==="auth/invalid-credential")try{const Ze=await d8(Bt,((xe=je==null?void 0:je.customData)==null?void 0:xe.email)||"");Array.isArray(Ze)&&Ze.length===0?(Ne="auth/user-not-found",be="     "):(Ne="auth/wrong-password",be="   ")}catch{be="      "}else Ne==="auth/invalid-email"?be="    ":Ne==="auth/user-not-found"?be="     ":Ne==="auth/wrong-password"?be="   ":Ne==="auth/too-many-requests"&&(be="      ");return{error:{...je,code:Ne,message:be}}}},ot=async()=>{try{const K=e==null?void 0:e.uid;if(localStorage.getItem("demoUser"))console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),u(!1);else{if(K)try{await We(K)}catch(xe){console.error("session clear on sign out error:",xe)}await $x(Bt)}K&&(localStorage.removeItem(`sub_cache_${K}`),localStorage.removeItem(`profile_cache_v2_${K}`),console.log(" Cleared user caches for:",K));try{await nl.remove({key:"selected_wallet_id"}),await nl.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(xe){console.error(" Failed to clear Preferences:",xe)}const Xe=(()=>{try{const xe=typeof window<"u"?window:null,je=!!(xe&&xe.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),be=typeof window<"u"&&window.location.protocol==="file:",Ne=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return je||be||Ne||typeof import.meta<"u"&&sZ&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(Xe)}catch{window.location.href=Xe}}catch(K){console.error("Sign out error:",K)}},et=async K=>{try{return await l8(Bt,K),{error:null}}catch(ce){console.error("Reset password error:",ce);let Pe="        ";return ce.code==="auth/user-not-found"?Pe="     ":ce.code==="auth/invalid-email"&&(Pe="   "),{error:{...ce,message:Pe}}}},wn=async(K=!1)=>{var xe,je,be,Ne,Ze,Pt,Q,Ie,Te,ye,it,ae,Ue,Je,Et,Kt,Ln,gr,zr,_n,G;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}h.current&&(h.current(),h.current=null),console.log("Checking subscription status for user:",e.uid,{force:K});const ce=`sub_cache_${e.uid}`,Pe=Date.now(),Xe=1e3*60*60*24;if(!K)try{const $=localStorage.getItem(ce);if($){const{data:U,timestamp:Y}=JSON.parse($);if(Pe-Y<Xe){const te={...U,subscription:U.subscription?{...U.subscription,activatedAt:U.subscription.activatedAt?{toDate:()=>new Date(U.subscription.activatedAt)}:null,endDate:U.subscription.endDate?{toDate:()=>new Date(U.subscription.endDate)}:null}:null,branchPackage:U.branchPackage?{...U.branchPackage,activatedAt:U.branchPackage.activatedAt?{toDate:()=>new Date(U.branchPackage.activatedAt)}:null,endDate:U.branchPackage.endDate?{toDate:()=>new Date(U.branchPackage.endDate)}:null}:null,freeTrialStartDate:U.freeTrialStartDate?{toDate:()=>new Date(U.freeTrialStartDate)}:null,freeTrialEndDate:U.freeTrialEndDate?{toDate:()=>new Date(U.freeTrialEndDate)}:null};o(te);const ne=((xe=U==null?void 0:U.branchPackage)==null?void 0:xe.status)==="active";let ue=!1;if(ne)ue=!0;else{const me=te.subscription;ue=DP(me)}l(ue),console.log(" Subscription loaded from cache (Client-side validity check applied)");return}}}catch($){console.warn("Subscription Cache parse error:",$)}try{const $=Ce(z,"users",e.uid),U=await Zt($);if(U.exists()){const Y=U.data();o(Y);try{const me={...Y,subscription:Y.subscription?{...Y.subscription,activatedAt:((Ne=(be=(je=Y.subscription.activatedAt)==null?void 0:je.toDate)==null?void 0:be.call(je))==null?void 0:Ne.toISOString())||Y.subscription.activatedAt,endDate:((Q=(Pt=(Ze=Y.subscription.endDate)==null?void 0:Ze.toDate)==null?void 0:Pt.call(Ze))==null?void 0:Q.toISOString())||Y.subscription.endDate}:null,branchPackage:Y.branchPackage?{...Y.branchPackage,activatedAt:((ye=(Te=(Ie=Y.branchPackage.activatedAt)==null?void 0:Ie.toDate)==null?void 0:Te.call(Ie))==null?void 0:ye.toISOString())||Y.branchPackage.activatedAt,endDate:((Ue=(ae=(it=Y.branchPackage.endDate)==null?void 0:it.toDate)==null?void 0:ae.call(it))==null?void 0:Ue.toISOString())||Y.branchPackage.endDate}:null,freeTrialStartDate:((Kt=(Et=(Je=Y.freeTrialStartDate)==null?void 0:Je.toDate)==null?void 0:Et.call(Je))==null?void 0:Kt.toISOString())||Y.freeTrialStartDate,freeTrialEndDate:((zr=(gr=(Ln=Y.freeTrialEndDate)==null?void 0:Ln.toDate)==null?void 0:gr.call(Ln))==null?void 0:zr.toISOString())||Y.freeTrialEndDate};localStorage.setItem(ce,JSON.stringify({data:me,timestamp:Pe}))}catch{}console.log(" Subscription Data Details (Fetched):",{userId:e.uid,isActive:(_n=Y.subscription)==null?void 0:_n.isActive});const te=((G=Y==null?void 0:Y.branchPackage)==null?void 0:G.status)==="active";let ne=!1;if(te){const me=Y.branchPackage;let X=!1;if(me.endDate){const le=me.endDate.toDate?me.endDate.toDate():new Date(me.endDate);!isNaN(le.getTime())&&new Date>le&&(X=!0,TJ(e.uid,me).catch(console.error))}ne=!X}const ue=ne||DP(Y.subscription);l(ue)}}catch($){console.error("Error checking subscription status:",$)}},sr=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await ge(e.uid,!0),await wn(!0)}catch(K){console.error("Error refreshing profile:",K)}},$n={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:ve,signIn:F,signOut:ot,resetPassword:et,updateUserProfile:async K=>{if(e)try{const ce={updatedAt:Be()};if(K.fullName!==void 0&&(ce.fullName=K.fullName),K.phone!==void 0&&(ce.phone=K.phone),K.sim1Number!==void 0){const Pe=(K.sim1Number||"").trim();ce.sim1Number=Pe.length?Pe:null}if(K.sim2Number!==void 0){const Pe=(K.sim2Number||"").trim();ce.sim2Number=Pe.length?Pe:null}if(K.bridgeLink!==void 0){const Pe=(K.bridgeLink||"").trim();ce.bridgeLink=Pe.length?Pe:null}if(K.bridgeDeviceId!==void 0){const Pe=(K.bridgeDeviceId||"").trim();ce.bridgeDeviceId=Pe.length?Pe:null}K.showWithdrawNote!==void 0&&(ce.showWithdrawNote=!!K.showWithdrawNote),K.isReceiptNoteEnabled!==void 0&&(ce.isReceiptNoteEnabled=!!K.isReceiptNoteEnabled),K.smsReadingEnabled!==void 0&&(ce.smsReadingEnabled=!!K.smsReadingEnabled),K.smsAutoRegisterEnabled!==void 0&&(ce.smsAutoRegisterEnabled=!!K.smsAutoRegisterEnabled),await cn(Ce(z,"profiles",e.uid),ce),await ge(e.uid,!0)}catch(ce){console.error("Error updating user profile:",ce)}},updateAvatarId:async K=>{if(e)try{await cn(Ce(z,"profiles",e.uid),{avatarId:K,updatedAt:Be()}),await ge(e.uid)}catch(ce){console.error("Error updating avatarId:",ce)}},refreshProfile:sr,checkSubscriptionStatus:wn,isSessionBlocked:p};return m.jsxs(aV.Provider,{value:$n,children:[t,p&&m.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 p-4",children:[m.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"mb-3 text-lg font-semibold text-gray-900",children:"   "}),m.jsx("p",{className:"mb-1 text-sm text-gray-700",children:"       ."}),m.jsx("p",{className:"mb-1 text-sm text-gray-700",children:"          ."}),m.jsx("p",{className:"text-sm text-gray-700",children:"                   ."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(vt,{onClick:()=>{N(!R),R||Le()},variant:"outline",className:"w-full",children:R?"  ":"  "}),R&&m.jsxs("div",{className:"space-y-3 mt-4",children:[S&&m.jsx("p",{className:"text-center text-sm text-gray-500",children:" ..."}),!S&&E.length===0&&m.jsx("p",{className:"text-center text-sm text-gray-500",children:"   "}),!S&&E.map(K=>{const ce=K.deviceId&&K.deviceId===L(),Pe=J(K.deviceType);return m.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border p-3 text-right",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium text-gray-900",children:K.deviceName||"  "}),ce&&m.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:" "})]}),m.jsxs("div",{className:"text-xs text-gray-500",children:[Pe,K.lastSeen&&`  ${AJ(K.lastSeen)}`]}),!ce&&m.jsx(vt,{size:"sm",variant:"destructive",className:"w-full mt-2 h-8 text-xs",onClick:()=>{O(K.id),A(!0)},children:" "})]},K.id)})]})]})]}),m.jsx(A0,{open:T,onOpenChange:K=>{A(K),K||O(null)},mode:"verify",title:"   ",description:"         .",onSuccess:async()=>{if(x)try{await cn(Ce(z,"userSessions",x),{forcedLogout:!0}),w(K=>K.filter(ce=>ce.id!==x)),C({title:"   ",description:"       ."})}catch{C({title:"   ",description:"     .",variant:"destructive"})}O(null),A(!1)}})]})]})};function aZ(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var tv="Checkbox",[lZ]=Zu(tv),[cZ,LS]=lZ(tv);function uZ(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:h}=t,[f,p]=RE({prop:n,defaultProp:s??!1,onChange:l,caller:tv}),[_,g]=v.useState(null),[b,E]=v.useState(null),w=v.useRef(!1),S=_?!!o||!!_.closest("form"):!0,P={checked:f,disabled:i,setChecked:p,control:_,setControl:g,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:c,defaultChecked:fa(s)?!1:s,isFormControl:S,bubbleInput:b,setBubbleInput:E};return m.jsx(cZ,{scope:e,...P,children:dZ(h)?h(P):r})}var lV="CheckboxTrigger",cV=v.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:_}=LS(lV,t),g=Sr(s,u),b=v.useRef(l);return v.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const w=()=>h(b.current);return E.addEventListener("reset",w),()=>E.removeEventListener("reset",w)}},[i,h]),m.jsx(Rn.button,{type:"button",role:"checkbox","aria-checked":fa(l)?"mixed":l,"aria-required":c,"data-state":mV(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:tn(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:tn(n,E=>{h(w=>fa(w)?!0:!w),_&&p&&(f.current=E.isPropagationStopped(),f.current||E.stopPropagation())})})});cV.displayName=lV;var MS=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...h}=t;return m.jsx(uZ,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>m.jsxs(m.Fragment,{children:[m.jsx(cV,{...h,ref:e,__scopeCheckbox:n}),f&&m.jsx(fV,{__scopeCheckbox:n})]})})});MS.displayName=tv;var uV="CheckboxIndicator",dV=v.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=LS(uV,n);return m.jsx(Ql,{present:r||fa(i.checked)||i.checked===!0,children:m.jsx(Rn.span,{"data-state":mV(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});dV.displayName=uV;var hV="CheckboxBubbleInput",fV=v.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:h,bubbleInput:f,setBubbleInput:p}=LS(hV,t),_=Sr(n,p),g=aZ(i),b=sN(r);v.useEffect(()=>{const w=f;if(!w)return;const S=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(S,"checked").set,O=!s.current;if(g!==i&&x){const T=new Event("click",{bubbles:O});w.indeterminate=fa(i),x.call(w,fa(i)?!1:i),w.dispatchEvent(T)}},[f,g,i,s]);const E=v.useRef(fa(i)?!1:i);return m.jsx(Rn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:l,name:c,value:u,form:h,...e,tabIndex:-1,ref:_,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});fV.displayName=hV;function dZ(t){return typeof t=="function"}function fa(t){return t==="indeterminate"}function mV(t){return fa(t)?"indeterminate":t?"checked":"unchecked"}const pV=v.forwardRef(({className:t,...e},n)=>m.jsx(MS,{ref:n,className:dn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:m.jsx(dV,{className:dn("flex items-center justify-center text-current"),children:m.jsx(V4,{className:"h-4 w-4"})})}));pV.displayName=MS.displayName;const Lg=()=>{const[t,e]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[l,c]=v.useState(typeof navigator<"u"?!navigator.onLine:!1);v.useEffect(()=>{const P=()=>c(!navigator.onLine);return window.addEventListener("online",P),window.addEventListener("offline",P),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",P)}},[]);const[u,h]=v.useState(!0),{signIn:f,user:p,checkSubscriptionStatus:_,loading:g}=Ss(),b=Jl();v.useEffect(()=>{try{p&&!g&&b("/user/dashboard")}catch{}},[p,g,b]),v.useEffect(()=>{try{const P=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;P&&e(P)}catch{}try{const P=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;P==="true"?h(!0):P==="false"&&h(!1)}catch{}(async()=>{var P,x;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const O=await((x=(P=navigator.credentials).get)==null?void 0:x.call(P,{password:!0,mediation:"optional"}));O&&O.type==="password"&&(O.id&&e(O.id),O.password&&r(O.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const O=sessionStorage.getItem("cashy:rememberedPassword");O&&!n&&r(O)}catch{}}catch{}})()},[]);const E=async P=>{if(P.preventDefault(),o){jt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){jt.error("   .      .");return}const x=(t||"").trim().toLowerCase(),O=(n||"").trim();if(console.log("    :",{email:x,password:"***"}),!t||!n){jt.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(x)){jt.error("    ");return}a(!0);try{try{await f8(Bt,u?ub:db);try{window.localStorage.setItem("cashy:rememberLogin",u?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:T}=await f(x,O);if(console.log(" SignIn result:",{error:T}),T){console.error("    :",T);const A=T==null?void 0:T.code;A==="auth/user-not-found"?jt.error("     "):A==="auth/wrong-password"?jt.error("   "):A==="auth/invalid-credential"?jt.error("      "):A==="auth/too-many-requests"?jt.error("      "):jt.error((T==null?void 0:T.message)||"    ")}else{console.log("    !"),jt.success("   !");try{if(u&&navigator.credentials&&window.PasswordCredential){const A=new window.PasswordCredential({id:x,name:x,password:O});await navigator.credentials.store(A)}if(u)try{sessionStorage.setItem("cashy:rememberedPassword",O)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(T){console.error("   :",T),jt.error("   ")}finally{a(!1)}},w=P=>{if(o){P.preventDefault(),P.stopPropagation(),jt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){P.preventDefault(),P.stopPropagation(),jt.error("   .      .");return}t||jt.error("   "),n||jt.error("   ");const x=(t||"").trim().toLowerCase();x&&!/^\S+@\S+\.\S+$/.test(x)&&jt.error("    ")},S=()=>{b("/user/forgot-password")};return v.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const P=document.documentElement,x=document.body,O=P.style.overflow,T=x.style.overflow,A=P.style.overscrollBehaviorY,R=x.style.overscrollBehaviorY;return P.style.overflow="hidden",x.style.overflow="hidden",P.style.overscrollBehaviorY="none",x.style.overscrollBehaviorY="none",()=>{P.style.overflow=O||"",x.style.overflow=T||"",P.style.overscrollBehaviorY=A||"",x.style.overscrollBehaviorY=R||""}},[]),m.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&m.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:m.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),m.jsx("div",{className:"absolute inset-0 bg-black/40"}),m.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:m.jsx(I3,{className:"w-10 h-10 text-white"})}),m.jsx("div",{className:"flex items-center justify-center mb-2",children:m.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),m.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),m.jsx("p",{className:"text-white/80",children:"    "})]}),m.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[m.jsxs("form",{onSubmit:E,className:"space-y-6",autoComplete:"on",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),m.jsxs("div",{className:"relative",children:[m.jsx(S_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),m.jsx(Zn,{id:"username",type:"email",placeholder:"  ",value:t,onChange:P=>{const x=P.target.value;e(x);try{window.localStorage.setItem("cashy:lastEmail",x)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),m.jsxs("div",{className:"relative",children:[m.jsx(iy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),m.jsx(Zn,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:P=>r(P.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),m.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?m.jsx(uh,{className:"w-5 h-5"}):m.jsx(dh,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[m.jsx(pV,{id:"rememberLogin",checked:u,onCheckedChange:P=>h(!!P)}),m.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsxs(vt,{type:"button",variant:"ghost",size:"sm",onClick:S,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[m.jsx(S_,{className:"w-4 h-4 ml-1"}),"  "]})}),m.jsx("button",{type:"submit",onClick:w,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx(Dk,{className:"w-5 h-5 ml-2"})," "]})})]}),m.jsxs("div",{className:"mt-6 text-center space-y-3",children:[m.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",m.jsx(M_,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),m.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",m.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",m.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},hZ=Object.freeze(Object.defineProperty({__proto__:null,default:Lg},Symbol.toStringTag,{value:"Module"})),VS=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:dn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));VS.displayName="Card";const FS=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:dn("flex flex-col space-y-1.5 p-6",t),...e}));FS.displayName="CardHeader";const jS=v.forwardRef(({className:t,...e},n)=>m.jsx("h3",{ref:n,className:dn("text-2xl font-semibold leading-none tracking-tight",t),...e}));jS.displayName="CardTitle";const gV=v.forwardRef(({className:t,...e},n)=>m.jsx("p",{ref:n,className:dn("text-sm text-muted-foreground",t),...e}));gV.displayName="CardDescription";const US=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:dn("p-6 pt-0",t),...e}));US.displayName="CardContent";const fZ=v.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:dn("flex items-center p-6 pt-0",t),...e}));fZ.displayName="CardFooter";function yV({open:t,onOpenChange:e,onSuccess:n}){const{user:r,userSubscription:s}=Ss(),[i,o]=v.useState("1"),[a,l]=v.useState("basic"),[c,u]=v.useState(!1),[h,f]=v.useState(null),p=async()=>{var _;if(r){u(!0),f(null);try{const g=((_=s==null?void 0:s.branchPackage)==null?void 0:_.limit)||0;await cn(Ce(z,"users",r.uid),{branchPackage:{status:"pending",requested:!0,limit:g+parseInt(i),packageType:a,requestedAt:new Date().toISOString()}}),f("       ."),window.dispatchEvent(new Event("userSubscriptionUpdated")),setTimeout(()=>{e(!1),n&&n()},1500)}catch(g){f("  : "+g.message)}finally{u(!1)}}};return m.jsx(Il,{open:t,onOpenChange:e,children:m.jsxs(ua,{children:[m.jsx(da,{children:m.jsx(ha,{children:" "})}),m.jsxs("div",{className:"grid gap-4 py-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx(Ps,{children:"   "}),m.jsx(Zn,{type:"number",min:"1",value:i,onChange:_=>o(_.target.value),placeholder:"   "})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(Ps,{children:" "}),m.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a,onChange:_=>l(_.target.value),children:[m.jsx("option",{value:"basic",children:"  ()"}),m.jsx("option",{value:"quarterly",children:"   (3 )"}),m.jsx("option",{value:"pro",children:"  ()"}),m.jsx("option",{value:"enterprise",children:"  ( )"})]})]}),h&&m.jsx("p",{className:`text-sm ${h.includes("")?"text-green-600":"text-red-600"}`,children:h})]}),m.jsxs(ev,{children:[m.jsx(vt,{variant:"outline",onClick:()=>e(!1),children:""}),m.jsx(vt,{onClick:p,disabled:c,className:"bg-black text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200",children:c?" ...":" "})]})]})})}const Fee=Object.freeze(Object.defineProperty({__proto__:null,BranchRequestDialog:yV},Symbol.toStringTag,{value:"Module"}));function GP(){var N,C,L,D;const{user:t,profile:e,isSubscriptionActive:n,userSubscription:r}=Ss(),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[l,c]=v.useState(""),[u,h]=v.useState(""),[f,p]=v.useState(""),[_,g]=v.useState(""),[b,E]=v.useState(!1),[w,S]=v.useState(null),[P,x]=v.useState(0),O=((N=r==null?void 0:r.branchPackage)==null?void 0:N.status)==="active",T=((C=r==null?void 0:r.branchPackage)==null?void 0:C.limit)||0;V.useEffect(()=>{t&&(async()=>{try{const Le=Qe(De(z,"shops"),qe("ownerId","==",t.uid)),ke=await BL(Le);x(ke.data().count)}catch(Le){console.error("Error fetching shops count:",Le)}})()},[t]),(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="merchant"||n||O&&P<T;const A=()=>{c(""),h(""),p(""),g("")},R=async()=>{S(null);const J=l.trim(),Le=u.trim(),ke=f.trim(),We=_;if(O&&P>=T&&(e==null?void 0:e.role)!=="admin"&&(e==null?void 0:e.role)!=="merchant"){S(`        (${T}).   .`);return}if(!J||!Le||!ke||!We){S("    .");return}try{E(!0);const q=await JQ(wM,"createShopAndManager")({shopName:J,managerName:Le,email:ke,password:We,branchCode:null}),oe=q==null?void 0:q.data;oe!=null&&oe.success?(S(`   (${oe.shopId})   .`),A(),i(!1)):S("     .")}catch(W){const q=(W==null?void 0:W.message)||"     ";S(q)}finally{E(!1)}};return m.jsxs("div",{className:"container mx-auto p-4",children:[m.jsxs(VS,{children:[m.jsx(FS,{children:m.jsx(jS,{children:"  (CPanel)"})}),m.jsxs(US,{children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{children:m.jsx("p",{className:"text-sm text-muted-foreground",children:"           ."})}),m.jsxs("div",{className:"flex gap-2",children:[!O&&((L=r==null?void 0:r.branchPackage)==null?void 0:L.status)!=="pending"&&m.jsx(vt,{onClick:()=>a(!0),variant:"outline",children:"  "}),((D=r==null?void 0:r.branchPackage)==null?void 0:D.status)==="pending"&&m.jsx(vt,{disabled:!0,variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50",children:"  "}),m.jsx(vt,{onClick:()=>i(!0),disabled:!1,children:" "})]})]}),!t&&m.jsx("p",{className:"mt-3 text-sm text-red-600",children:"      ."}),O&&m.jsxs("p",{className:"mt-3 text-sm text-green-600 font-medium",children:["  :  ",P,"   ",T," ."]}),t&&!1]})]}),m.jsx(Il,{open:s,onOpenChange:i,children:m.jsxs(ua,{children:[m.jsx(da,{children:m.jsx(ha,{children:"  "})}),m.jsxs("div",{className:"grid gap-4 py-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx(Ps,{htmlFor:"shopName",children:" "}),m.jsx(Zn,{id:"shopName",value:l,onChange:J=>c(J.target.value),placeholder:":  "})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(Ps,{htmlFor:"managerName",children:" "}),m.jsx(Zn,{id:"managerName",value:u,onChange:J=>h(J.target.value),placeholder:":  "})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(Ps,{htmlFor:"email",children:""}),m.jsx(Zn,{id:"email",type:"email",value:f,onChange:J=>p(J.target.value),placeholder:"example@mail.com"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(Ps,{htmlFor:"password",children:""}),m.jsx(Zn,{id:"password",type:"password",value:_,onChange:J=>g(J.target.value),placeholder:""})]}),w&&m.jsx("p",{className:"text-sm text-muted-foreground",children:w})]}),m.jsxs(ev,{children:[m.jsx(vt,{variant:"outline",onClick:()=>i(!1),disabled:b,children:""}),m.jsx(vt,{onClick:R,disabled:b||!1,children:b?" ...":" "})]})]})}),m.jsx(yV,{open:o,onOpenChange:a})]})}const QP=()=>{const[t,e]=v.useState(""),[n,r]=v.useState(""),[s,i]=v.useState(!1),[o,a]=v.useState(!1),{signIn:l}=Ss(),c=Jl();v.useEffect(()=>{try{const h=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;h&&e(h)}catch{}},[]);const u=async h=>{var f;if(h.preventDefault(),o){jt.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){jt.error("   .      .");return}if(!t||!n){jt.error("     ");return}a(!0);try{const{error:p}=await l(t,n);if(p){const _=p==null?void 0:p.code;_==="auth/invalid-email"?jt.error("    "):_==="auth/user-not-found"?jt.error("     "):_==="auth/wrong-password"?jt.error("   "):_==="auth/invalid-credential"?jt.error("      "):_==="auth/too-many-requests"?jt.error("      "):jt.error((p==null?void 0:p.message)||"    ");return}try{const _=(f=Bt.currentUser)==null?void 0:f.uid;_&&await en(Ce(z,"users",_),{branchPackage:{requested:!0,status:"pending",requestedAt:Be()},updatedAt:Be()},{merge:!0})}catch(_){console.warn("    :",_)}jt.success("   "),c("/cpanel")}catch(p){jt.error((p==null?void 0:p.message)||"     ")}finally{a(!1)}};return m.jsx("div",{className:"min-h-screen bg-background px-4 py-8 flex items-center justify-center",children:m.jsxs(VS,{className:"w-full max-w-md",children:[m.jsxs(FS,{children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(LE,{className:"w-6 h-6"}),m.jsx(jS,{children:"   "})]}),m.jsx(gV,{children:"     "})]}),m.jsx(US,{children:m.jsxs("form",{onSubmit:u,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ps,{htmlFor:"email",children:" "}),m.jsxs("div",{className:"relative",children:[m.jsx(S_,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),m.jsx(Zn,{id:"email",type:"email",value:t,onChange:h=>{const f=h.target.value;e(f);try{window.localStorage.setItem("cashy:lastEmail",f)}catch{}},placeholder:"example@mail.com",className:"pr-10"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ps,{htmlFor:"password",children:" "}),m.jsxs("div",{className:"relative",children:[m.jsx(iy,{className:"absolute right-3 top-2.5 w-5 h-5 text-muted-foreground"}),m.jsx(Zn,{id:"password",type:s?"text":"password",value:n,onChange:h=>r(h.target.value),placeholder:"",className:"pr-10"}),m.jsx("button",{type:"button",onClick:()=>i(h=>!h),className:"absolute left-3 top-2.5 text-muted-foreground","aria-label":s?"  ":"  ",children:s?m.jsx(uh,{className:"w-5 h-5"}):m.jsx(dh,{className:"w-5 h-5"})})]})]}),m.jsx("button",{type:"submit",onClick:h=>{o?(h.preventDefault(),h.stopPropagation(),jt.info("     ...")):typeof navigator<"u"&&navigator.onLine===!1?(h.preventDefault(),h.stopPropagation(),jt.error("   .      .")):(t||jt.error("   "),n||jt.error("   "))},className:"w-full inline-flex items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-white hover:opacity-90",children:o?m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx(Dk,{className:"w-5 h-5 ml-2"})," "]})}),m.jsxs("div",{className:"mt-4 text-center space-y-3",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"  "}),m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(M_,{to:"/user/forgot-password",className:"text-primary text-sm",children:"   "}),m.jsx("span",{className:"text-muted-foreground",children:""}),m.jsx(M_,{to:"/auth?mode=signup",className:"text-primary text-sm",children:"  "})]})]})]})})]})})};function mZ({size:t=24,className:e,...n}){return m.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,...n,children:[m.jsx("rect",{x:"5",y:"2.5",width:"14",height:"19",rx:"2.5",stroke:"currentColor",strokeWidth:"1.5"}),m.jsx("rect",{x:"7",y:"4.5",width:"10",height:"5.5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),m.jsx("path",{d:"M9.5 11.5h5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),m.jsx("circle",{cx:"8.5",cy:"14",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),m.jsx("circle",{cx:"12",cy:"14",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),m.jsx("circle",{cx:"15.5",cy:"14",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),m.jsx("circle",{cx:"8.5",cy:"17",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),m.jsx("circle",{cx:"12",cy:"17",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),m.jsx("circle",{cx:"15.5",cy:"17",r:"0.9",stroke:"currentColor",strokeWidth:"1"}),m.jsx("rect",{x:"8",y:"19",width:"9",height:"1.8",rx:"0.6",stroke:"currentColor",strokeWidth:"1"})]})}const YP=t=>{try{const e=t||"default",n=localStorage.getItem(`hiddenQuickActions_${e}`)??localStorage.getItem("hiddenQuickActions"),r=n?JSON.parse(n):[];return Array.isArray(r)?r.filter(s=>typeof s=="string"):[]}catch{return[]}},pZ=()=>{const t=Jl(),e=Zs(),{signOut:n,user:r,userSubscription:s}=Ss(),{toast:i}=Gl(),[o,a]=v.useState(!1),[l,c]=v.useState(!1),[u,h]=v.useState(()=>YP(r==null?void 0:r.uid)),[f,p]=v.useState(0);V.useEffect(()=>{const x=T=>{p(T.detail.count)};window.addEventListener("support-chat-unread",x);const O=localStorage.getItem("support_chat_unread_count");return O&&p(parseInt(O,10)),()=>window.removeEventListener("support-chat-unread",x)},[]),V.useEffect(()=>{h(YP(r==null?void 0:r.uid))},[r==null?void 0:r.uid]);const _=(x,O,T={},A={})=>{if(e.pathname.startsWith("/user/dashboard"))window.dispatchEvent(new CustomEvent("dashboard-navigation-action",{detail:{action:x,payload:A}}));else{const R=O?{[O]:!0,...T}:{...T};t("/user/dashboard",{state:R})}},g=[{id:"home",label:"",icon:Q4,path:"/user/dashboard",action:()=>{const x=()=>{const O=document.getElementById("dashboard-content-container");O&&(O.scrollTop=0,O.scrollTo(0,0));const T=document.querySelector(".user-dashboard");T&&(T.scrollTop=0,T.scrollTo(0,0)),window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0};e.pathname==="/user/dashboard"?(e.state&&Object.keys(e.state).length>0&&t("/user/dashboard",{replace:!0,state:{}}),x()):t("/user/dashboard"),setTimeout(x,10),setTimeout(x,50),setTimeout(x,150),setTimeout(x,300)}},{id:"debts",label:"",icon:K4,path:"/debts",action:()=>{var x;(x=e.state)!=null&&x.openDebtDialog||_("debts","openDebtDialog")}},{id:"transfer",label:"",icon:D4,path:"/transfer",action:()=>{_("transaction-section","openTransactionSection",{transactionType:"transfer",startNewTransaction:!0},{transactionType:"transfer",startNewTransaction:!0,skipAnimation:!0})}},{id:"add",label:"",icon:OT,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:C4,path:"/withdraw",action:()=>{_("transaction-section","openTransactionSection",{transactionType:"withdraw",startNewTransaction:!0},{transactionType:"withdraw",startNewTransaction:!0,skipAnimation:!0})}},{id:"support",label:"",icon:bc,path:"#",action:()=>{window.dispatchEvent(new CustomEvent("open-support-chat"))}},{id:"settings",label:"",icon:MT,path:"/user/dashboard",action:()=>{_("profile-settings","openProfileSettings")}}],E=[{id:"installment",label:"",icon:L4,action:()=>{var O,T;a(!1);const x=(O=s==null?void 0:s.subscription)==null?void 0:O.planType;if(x===tl.TAHWEELA||x===tl.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}(T=e.state)!=null&&T.openInstallment||_("installment","openInstallment")},color:"#7C3AED"},{id:"maintenance",label:"",icon:x3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openMaintenanceDialog)&&_("maintenance","openMaintenanceDialog")},color:"#0EA5E9"},{id:"machine",label:"",icon:mZ,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openMachineDailyDialog)&&_("machine-daily","openMachineDailyDialog")},color:"#F59E0B"},{id:"credit-cards",label:" ",icon:z4,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openCreditCardsDialog)&&_("credit-cards","openCreditCardsDialog")},color:"#8B5CF6"},{id:"sales",label:"",icon:E3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openSalesDialog)&&_("sales","openSalesDialog")},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:LT,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openShopExpensesDialog)&&_("shop-expenses","openShopExpensesDialog")},color:"#F97316"},{id:"deficiencies",label:"",icon:Ok,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openDeficienciesDialog)&&_("deficiencies","openDeficienciesDialog")},color:"#DB2777"},{id:"branch-management",label:" ",icon:y3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openBranchManagement)&&_("branch-management","openBranchManagement")},color:"#14b8a6"},{id:"my-client-numbers",label:"",icon:o3,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openMyClientNumbersDialog)&&_("my-client-numbers","openMyClientNumbersDialog")},color:"#22C55E"},{id:"add-wallet",label:" ",icon:OT,action:()=>{a(!1),e.pathname!=="/user/add-wallet"&&t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:$4,action:()=>{var x;a(!1),!((x=e.state)!=null&&x.openCashierShiftModal)&&_("cashier-shift","openCashierShiftModal")},color:"#3B82F6"}].filter(x=>!u.includes(x.id)),w=[{id:"shop-expenses-settings",label:" ",icon:LT,action:()=>{var x;c(!1),!((x=e.state)!=null&&x.openShopExpensesDialog)&&t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:MT,action:()=>{c(!1),e.pathname.startsWith("/user/dashboard")?window.dispatchEvent(new CustomEvent("dashboard-navigation-action",{detail:{action:"profile-settings"}})):t("/user/dashboard",{state:{openProfileSettings:!0}})},color:"#6366F1"},{id:"logout",label:" ",icon:e3,action:async()=>{c(!1);try{await n()}catch(x){console.error("Logout error:",x)}},color:"#EF4444"}],S=(x,O,T,A)=>{var D;const N=((D=s==null?void 0:s.subscription)==null?void 0:D.planType)===tl.TAHWEELA,C=J=>["/user/dashboard","/profile-settings"].includes(J),L=J=>J==="debts";if(T){if(N&&!L(A)&&!C(x)){i({title:"  ",description:"      .",variant:"destructive"});return}T()}else if(O&&x==="/add"){if(N){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!O){if(N&&!C(x)){i({title:"  ",description:"      .",variant:"destructive"});return}if(e.pathname===x&&!T)return;t(x)}},P=x=>e.pathname===x;return m.jsxs("div",{className:"mobile-bottom-nav",children:[o&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),m.jsx("div",{className:"quick-actions-bottomsheet",children:m.jsx("div",{className:"quick-actions-grid",children:E.map((x,O)=>m.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var A;if(((A=s==null?void 0:s.subscription)==null?void 0:A.planType)===tl.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),x.action()},style:{"--action-color":x.color,"--animation-delay":"0s"},children:[m.jsx("div",{className:"quick-action-icon",children:m.jsx(x.icon,{className:"action-icon"})}),m.jsx("span",{className:"quick-action-label",children:x.label})]},x.id))})})]}),l&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),m.jsx("div",{className:"quick-actions-bottomsheet",children:m.jsx("div",{className:"quick-actions-grid",children:w.map((x,O)=>m.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var R;const T=(R=s==null?void 0:s.subscription)==null?void 0:R.planType,A=new Set(["logout","profile-settings"]);if(T===tl.TAHWEELA&&!A.has(x.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),x.action()},style:{"--action-color":x.color,"--animation-delay":`${O*.06}s`},children:[m.jsx("div",{className:"quick-action-icon",children:m.jsx(x.icon,{className:"action-icon"})}),m.jsx("span",{className:"quick-action-label",children:x.label})]},x.id))})})]}),m.jsx("nav",{className:"mobile-bottom-nav-container",children:g.map(x=>{const O=x.icon,T=P(x.path);return m.jsxs("button",{onClick:()=>S(x.path,x.isSpecial,x.action,x.id),className:`mobile-nav-item ${T?"active":""} ${x.isSpecial?"special":""}`,type:"button","aria-label":x.label,style:{backgroundColor:"transparent"},children:[m.jsxs("div",{className:`nav-icon-container relative ${x.isSpecial?"special-icon":""} ${x.isSpecial&&x.id==="add"&&o?"special-open":""}`,children:[m.jsx(O,{className:`nav-icon ${T?"active-icon":""} ${x.isSpecial?"special-icon-svg":""} ${x.isSpecial&&x.id==="settings"&&l?"rotated":""}`}),x.id==="support"&&f>0&&m.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white shadow-sm ring-1 ring-white",children:f>99?"99+":f})]}),!x.isSpecial&&m.jsx("span",{className:`nav-label ${T?"active-label":""}`,children:x.label})]},x.id)})})]})};var OR,LR;const $c=(LR=(OR=import.meta)==null?void 0:OR.env)==null?void 0:LR.VITE_ANDROID_DOWNLOAD_URL;var MR,VR;const Bc=(VR=(MR=import.meta)==null?void 0:MR.env)==null?void 0:VR.VITE_PC_DOWNLOAD_URL;var FR,jR;const zc=(jR=(FR=import.meta)==null?void 0:FR.env)==null?void 0:jR.VITE_PC32_DOWNLOAD_URL;var UR,$R;const Wc=($R=(UR=import.meta)==null?void 0:UR.env)==null?void 0:$R.VITE_ANDROID_VERSION;var BR,zR;const qc=(zR=(BR=import.meta)==null?void 0:BR.env)==null?void 0:zR.VITE_PC_VERSION;var WR,qR;const Hc=(qR=(WR=import.meta)==null?void 0:WR.env)==null?void 0:qR.VITE_PC32_VERSION;function cr(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function gZ(t){if(t&&_p(t)!==void 0)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Qu=["siteContent","appDownloads"],Mg=["siteContent","desktop_updates"],Vg=["siteContent","android_updates"],Ac="appDownloadsCache",yZ=6*60*60*1e3,vZ=["1LMXQdSVB3-gIW-89fwWoq113IIEelhxR"];function _p(t){if(t){for(const e of vZ)if(t.includes(e))return;return t}}function sl(t){return{...t,androidUrl:_p(t.androidUrl),pcUrl:_p(t.pcUrl),pc32Url:_p(t.pc32Url)}}function wZ(){try{const e=localStorage.getItem(Ac);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||$c,pcUrl:(n==null?void 0:n.pcUrl)||Bc,pc32Url:(n==null?void 0:n.pc32Url)||zc,androidVersion:(n==null?void 0:n.androidVersion)||Wc,pcVersion:(n==null?void 0:n.pcVersion)||qc,pc32Version:(n==null?void 0:n.pc32Version)||Hc,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=cr(r.pcUrl)),r.androidVersion||(r.androidVersion=cr(r.androidUrl)),r.pc32Version||(r.pc32Version=cr(r.pc32Url)),sl(r)}}catch{}const t={androidUrl:$c,pcUrl:Bc,pc32Url:zc,androidVersion:Wc,pcVersion:qc,pc32Version:Hc};return t.pcVersion||(t.pcVersion=cr(t.pcUrl)),t.androidVersion||(t.androidVersion=cr(t.androidUrl)),t.pc32Version||(t.pc32Version=cr(t.pc32Url)),sl(t)}async function vV(t=!1){try{if(!t)try{const r=localStorage.getItem(Ac),s=localStorage.getItem(Ac+"_ts");if(r&&s&&Date.now()-Number(s)<yZ){const o=JSON.parse(r);return sl(o)}}catch{}const e=await Zt(Ce(z,Qu[0],Qu[1]));if(e.exists()){const r=e.data();try{localStorage.setItem(Ac,JSON.stringify(r)),localStorage.setItem(Ac+"_ts",String(Date.now()))}catch{}const s={androidUrl:(r==null?void 0:r.androidUrl)||$c,pcUrl:(r==null?void 0:r.pcUrl)||Bc,pc32Url:(r==null?void 0:r.pc32Url)||zc,androidVersion:(r==null?void 0:r.androidVersion)||Wc,pcVersion:(r==null?void 0:r.pcVersion)||qc,pc32Version:(r==null?void 0:r.pc32Version)||Hc,updatedAt:r==null?void 0:r.updatedAt,updatedBy:r==null?void 0:r.updatedBy};return s.pcVersion||(s.pcVersion=cr(s.pcUrl)),s.androidVersion||(s.androidVersion=cr(s.androidUrl)),s.pc32Version||(s.pc32Version=cr(s.pc32Url)),sl(s)}const n={androidUrl:$c,pcUrl:Bc,pc32Url:zc,androidVersion:Wc,pcVersion:qc,pc32Version:Hc};return n.pcVersion||(n.pcVersion=cr(n.pcUrl)),n.androidVersion||(n.androidVersion=cr(n.androidUrl)),n.pc32Version||(n.pc32Version=cr(n.pc32Url)),sl(n)}catch(e){const n=(e==null?void 0:e.message)||"";((e==null?void 0:e.code)||"")==="permission-denied"||n.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",e):console.error(" Error loading app downloads:",e);try{const i=localStorage.getItem(Ac);if(i){const o=JSON.parse(i),a={androidUrl:(o==null?void 0:o.androidUrl)||$c,pcUrl:(o==null?void 0:o.pcUrl)||Bc,pc32Url:(o==null?void 0:o.pc32Url)||zc,androidVersion:(o==null?void 0:o.androidVersion)||Wc,pcVersion:(o==null?void 0:o.pcVersion)||qc,pc32Version:(o==null?void 0:o.pc32Version)||Hc,updatedAt:o==null?void 0:o.updatedAt,updatedBy:o==null?void 0:o.updatedBy};return a.pcVersion||(a.pcVersion=cr(a.pcUrl)),a.androidVersion||(a.androidVersion=cr(a.androidUrl)),a.pc32Version||(a.pc32Version=cr(a.pc32Url)),sl(a)}}catch{}const s={androidUrl:$c,pcUrl:Bc,pc32Url:zc,androidVersion:Wc,pcVersion:qc,pc32Version:Hc};return s.pcVersion||(s.pcVersion=cr(s.pcUrl)),s.androidVersion||(s.androidVersion=cr(s.androidUrl)),s.pc32Version||(s.pc32Version=cr(s.pc32Url)),sl(s)}}function _Z(t){return vV().then(t),()=>{}}async function EZ(t,e,n,r,s,i=12e4){const o=vM(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=lJ(o,l);return new Promise((u,h)=>{const f=oJ(c,t);let p=!1;const _=setTimeout(()=>{p=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",g=>{const b=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(b)},g=>{clearTimeout(_),h(g)},async()=>{try{if(clearTimeout(_),p)return;const g=await aJ(c),b={updatedAt:Be(),updatedBy:n||"admin"};e==="android"?(b.androidUrl=g,r&&(b.androidVersion=r)):e==="pc"?(b.pcUrl=g,r&&(b.pcVersion=r)):(b.pc32Url=g,r&&(b.pc32Version=r));const E=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),w=en(Ce(z,Qu[0],Qu[1]),b,{merge:!0});let S=!1;const P=new Promise(x=>setTimeout(()=>{S=!0,x()},E));try{await Promise.race([w,P])}catch(x){console.warn(" Firestore write error, proceeding with URL only:",x)}S&&console.warn(" Firestore update timed out;             ."),u(g)}catch(g){h(g)}})})}async function bZ(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Be(),updatedBy:e||"admin"};await en(Ce(z,Qu[0],Qu[1]),r,{merge:!0})}async function SZ(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Be(),updatedBy:e||"admin"};await en(Ce(z,Mg[0],Mg[1]),r,{merge:!0})}function wV(t){const e=Ce(z,Mg[0],Mg[1]);return df(e,r=>{if(r.exists()){const s=r.data(),i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:(s==null?void 0:s.force)===!0||(s==null?void 0:s.force)==="true"};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)}},r=>{console.warn("Error listening to desktop updates:",r)})}function _V(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function IZ(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Be(),updatedBy:e||"admin"};await en(Ce(z,Vg[0],Vg[1]),r,{merge:!0})}async function EV(){try{const t=Ce(z,Vg[0],Vg[1]),e=await Zt(t),n=(e.exists()?e.data():{})||{},r={version:n!=null&&n.version?String(n.version):void 0,url:n!=null&&n.url?String(n.url):void 0,notes:n!=null&&n.notes?String(n.notes):void 0,force:!!(n!=null&&n.force),code:typeof(n==null?void 0:n.code)=="number"?n.code:typeof(n==null?void 0:n.versionCode)=="number"?n.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(r))}catch{}return r}catch(t){console.warn("Error fetching android updates:",t);try{const e=localStorage.getItem("android_update_cache");if(e)return JSON.parse(e)}catch{}return{}}}function TZ(t){return EV().then(t),()=>{}}const xZ=Object.freeze(Object.defineProperty({__proto__:null,fetchAndroidUpdates:EV,getAppDownloads:vV,getCachedOrEnvAppDownloads:wZ,listenAndroidUpdates:TZ,listenAppDownloads:_Z,listenDesktopUpdates:wV,resolveDownloadUrl:gZ,selectDesktopUrl:_V,setAndroidUpdateInfo:IZ,setAppDownloadLinks:bZ,setDesktopUpdateInfo:SZ,uploadAppBinaryResumable:EZ},Symbol.toStringTag,{value:"Module"})),AZ=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=V.useState(!1),[s,i]=V.useState(!1),[o,a]=V.useState(!1),[l,c]=V.useState(0),[u,h]=V.useState(""),[f,p]=V.useState(!1),_=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(x){console.warn("failed to minimize",x)}},g=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(x){console.warn("failed to close",x)}},b=async()=>{if(!f){p(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>p(!1),600);return}try{window.location.reload()}catch{}}catch(x){console.warn("failed to soft refresh",x),p(!1)}}};if(V.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(x=>{const O=(x==null?void 0:x.percent)==null?0:Number(x.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(O)?0:O)))}),t.checkUpdate()}catch(x){console.warn("update init failed",x)}},[e,t]),V.useEffect(()=>{const x=wV(O=>{if(String((O==null?void 0:O.version)||"")){r(!0);const A=_V({downloadURL_64:O==null?void 0:O.downloadURL_64,downloadURL_32:O==null?void 0:O.downloadURL_32})||"";h(A)}});return()=>{try{x()}catch{}}},[]),!e)return null;const[w,S]=V.useState(!1),P=async()=>{try{if(!t)return;w?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),S(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),S(!0))}catch(x){console.warn("window toggle failed",x)}};return m.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[m.jsx("button",{type:"button","aria-label":"",title:"",onClick:g,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:m.jsx(ko,{className:"w-5 h-5"})}),m.jsx("button",{type:"button","aria-label":"",title:" ",onClick:b,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:m.jsx(OE,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),m.jsx("button",{type:"button","aria-label":"",title:"",onClick:_,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:m.jsx(s3,{className:"w-5 h-5"})}),m.jsx("button",{type:"button","aria-label":"/",title:w?"  ":"   ",onClick:P,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:m.jsx(p3,{className:"w-5 h-5"})})]})},P0=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=v.useState(`${n}logo.svg`),[i,o]=v.useState(0),a=v.useCallback(()=>{o(u=>{const h=u+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return m.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),m.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},PZ=vd("SplashScreen",{web:()=>se(()=>import("./web-BkYt7pDM.js"),[],import.meta.url).then(t=>new t.SplashScreenWeb)});var R0;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(R0||(R0={}));var JP;(function(t){t.None="NONE",t.Slide="SLIDE",t.Fade="FADE"})(JP||(JP={}));const bw=vd("StatusBar"),XP=vd("AppLauncher",{web:()=>se(()=>import("./web-C_fsqAW8.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function RZ(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{Re&&Re.getPlatform()!=="web"&&(XP.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{Re&&Re.getPlatform()!=="web"&&XP.openUrl({url:n})}catch{}}}function bV(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function CZ(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?bV(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*7115*7*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function jee(t,e,n){const r=bV(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function kZ(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function NZ(t){const e=kZ(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function Uee(t,e,n){const r=CZ(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=NZ(t||e);RZ(r,s)}async function DZ(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function $S(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function OZ(t,e,n=0){const r=$S(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const ul=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:$S,calculateProfit:OZ},Symbol.toStringTag,{value:"Module"})),LZ=t=>t==="withdraw"||t==="receive"?"receive":"send",MZ=async t=>{if(!t)return null;const e=Qe(De(z,"transactions"),qe("reference","==",t),Bl(1)),n=await Ye(e);return n.empty?null:n.docs[0].id},VZ=async t=>{var e;try{const n=await nl.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return $Z(t||((e=Bt.currentUser)==null?void 0:e.uid)||"")||null},Sw=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await Yo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},SV=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await MZ(t.reference);if(e)return{id:e,duplicate:!0};const n=LZ(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Sw(t.receiverMsisdn);if(o||(o=await Sw(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Sw(a))}r=o||await VZ(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await kS.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await DZ(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=$S(t.amount,n);await Yr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},Ep=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},C0=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Bt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(g=>Ep(g)).filter(g=>!!g):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=g=>String(g||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(g=>({walletId:String((g==null?void 0:g.id)||""),msisdn:Ep(String((g==null?void 0:g.phone)||(g==null?void 0:g.msisdn)||"")),isDefault:!!(g!=null&&g.isDefault)})).filter(g=>g.walletId&&g.msisdn):[],u=new Map;for(const g of s){const b=l(g);for(const E of c){const w=l(E.msisdn);if(E.msisdn===g){u.set(E.walletId,E.msisdn);continue}if(w.slice(-5)===b.slice(-5)){u.set(E.walletId,E.msisdn);continue}}}if(u.size===1){const[g,b]=Array.from(u.entries())[0];return{walletId:g,msisdn:b}}const f=(await Yo.getByMerchantId(r)||[]).map(g=>({walletId:String((g==null?void 0:g.id)||""),msisdn:Ep(String((g==null?void 0:g.msisdn)||"")),isDefault:!!(g!=null&&g.isDefault)})).filter(g=>g.walletId&&g.msisdn),p=[...c,...f],_=new Map;for(const g of s){const b=l(g);for(const E of p){const w=l(E.msisdn);if(E.msisdn===g){_.set(E.walletId,E.msisdn);continue}if(w.slice(-5)===b.slice(-5)){_.set(E.walletId,E.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",_.size)}catch{}if(_.size===1){const[g,b]=Array.from(_.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:g,msisdn:b})}catch{}return{walletId:g,msisdn:b}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function FZ(t,e){try{const n=i=>Ep(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(u=>u.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(u=>s(u.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function jZ(t){var e;try{const n=t.userId||((e=Bt.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await C0(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");if(a&&o[a]&&o[a].walletId)return{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")};if(l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId)return{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")};if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";if(t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||""),c){const u=await C0([c],n);if(u)return u}}return null}catch{return null}}function UZ(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Bt.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const $Z=t=>{var e,n;try{const r=t||((e=Bt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const u=JSON.parse(c);if(Array.isArray(u)&&u.length>0){const h=u.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=u[0])==null?void 0:n.id)||null}}}}catch{}return null};function IV(){return typeof window>"u"?()=>{}:()=>{}}const Po=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:UZ,detectWalletFromSim:FZ,identifyWalletBySim:C0,initMobileSmsBridge:IV,processMobileTransactionNotification:SV,resolveWalletBySimOrSlot:jZ},Symbol.toStringTag,{value:"Module"})),BZ=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},zZ=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},WZ=()=>{var t,e;try{const n=((t=Bt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},qZ=()=>{var t;try{const e=((t=Bt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Iw=async(t,e)=>{var S;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=BZ(n),u=zZ(n);if(!c||c<=0)return;const h=((S=Bt.currentUser)==null?void 0:S.uid)||"",f=WZ()||void 0,p=qZ()||"",_=f||"default-line";if(!h||!f||!p)return;try{const P=await xJ(h);if((P==null?void 0:P.planType)===tl.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const g=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,b=`VF-${btoa(unescape(encodeURIComponent(g))).slice(0,24)}`,E=a?"withdraw":l?"transfer":"withdraw",w={type:E,amount:c,provider:"vodafone_cash",shopId:p,lineId:_,walletId:f,senderMsisdn:E==="transfer"&&u||void 0,receiverMsisdn:E==="withdraw"&&u||void 0,reference:b,createdBy:h,merchantUserId:h,note:"  "};try{await SV(w)}catch{}};let So={};const us={invalidateCache:t=>{const e=t||"default";delete So[e]},async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Yr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=a=>{if(!a)return null;try{return a!=null&&a.toDate?a.toDate():new Date(a)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)},o=us.getReportsData(t);o.lastDailyResetDate&&(!i.lastDailyResetDate||o.lastDailyResetDate.getTime()>i.lastDailyResetDate.getTime())&&(i.lastDailyResetDate=o.lastDailyResetDate,i.hiddenDailyTransactionIds=o.hiddenDailyTransactionIds,i.dailyProfit=o.dailyProfit,i.lastDailyProfitResetDate=o.lastDailyProfitResetDate),o.lastMonthlyResetDate&&(!i.lastMonthlyResetDate||o.lastMonthlyResetDate.getTime()>i.lastMonthlyResetDate.getTime())&&(i.lastMonthlyResetDate=o.lastMonthlyResetDate,i.hiddenMonthlyTransactionIds=o.hiddenMonthlyTransactionIds,i.monthlyProfit=o.monthlyProfit,i.lastMonthlyProfitResetDate=o.lastMonthlyProfitResetDate);try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData";let n=us.getReportsData(t);const r=!1,s=!1;if(n.lastDailyResetDate||(n.lastDailyResetDate=new Date),n.lastDailyProfitResetDate||(n.lastDailyProfitResetDate=new Date),n.lastMonthlyResetDate||(n.lastMonthlyResetDate=new Date),n.lastMonthlyProfitResetDate||(n.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(n)),So[t||"default"]=n,t)try{Yr.updateUserData(t,{reportsData:{...n}})}catch(i){console.warn("     Firebase   :",i)}return{dailyReset:r,monthlyReset:s}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const u=new Date(c.createdAt);return u.getMonth()===a&&u.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),So[n||"default"]=i,n)try{Yr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t||"default";if(So[e])return{...So[e]};const n=t?`reportsData_${t}`:"reportsData",r=localStorage.getItem(n);let s={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(r){const i=JSON.parse(r);s={lastDailyResetDate:i.lastDailyResetDate?new Date(i.lastDailyResetDate):null,lastMonthlyResetDate:i.lastMonthlyResetDate?new Date(i.lastMonthlyResetDate):null,hiddenDailyTransactionIds:i.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:i.hiddenMonthlyTransactionIds||[],dailyProfit:i.dailyProfit||0,monthlyProfit:i.monthlyProfit||0,lastDailyProfitResetDate:i.lastDailyProfitResetDate?new Date(i.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:i.lastMonthlyProfitResetDate?new Date(i.lastMonthlyProfitResetDate):null}}else if(t){const i=localStorage.getItem("reportsData");if(i)try{const o=JSON.parse(i);s={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null},localStorage.setItem(n,JSON.stringify(s))}catch{}}return So[e]=s,{...s}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=us.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=us.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),So[n||"default"]=s,n)try{Yr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=us.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=us.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=us.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),So[e||"default"]=r,e)try{Yr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},HZ=us,$ee=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:HZ,reportsService:us},Symbol.toStringTag,{value:"Module"})),Fg={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Ce(z,"walletLimits",t),s={updatedAt:Be(),ownerId:(n=Bt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await en(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Ce(z,"walletLimits",t);let r;try{r=await Zt(n)}catch(i){return console.error("     (     ):",i),null}if(r.exists()){const i=r.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||Vt.now()}}const s={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Vt.now()};return await en(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Be(),ownerId:(e=Bt.currentUser)==null?void 0:e.uid}),s}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Ce(z,"walletLimits",t);return await en(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Be(),updatedAt:Be(),ownerId:(e=Bt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Ce(z,"walletLimits",t);return await en(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Be(),updatedAt:Be(),ownerId:(e=Bt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Ce(z,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Be()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await en(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n,r){try{const s=Ce(z,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Be()},a=new Date,l=r?new Date(r):a,c=l.getDate()===a.getDate()&&l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear(),u=l.getMonth()===a.getMonth()&&l.getFullYear()===a.getFullYear();return n==="transfer"?(c&&(o.dailyTransferUsed=Math.max(0,(i.dailyTransferUsed||0)-e)),u&&(o.monthlyTransferUsed=Math.max(0,(i.monthlyTransferUsed||0)-e))):(c&&(o.dailyWithdrawUsed=Math.max(0,(i.dailyWithdrawUsed||0)-e)),u&&(o.monthlyWithdrawUsed=Math.max(0,(i.monthlyWithdrawUsed||0)-e))),Object.keys(o).length<=1?i:(await en(s,{...o},{merge:!0}),await this.getWalletLimits(t))}catch(s){throw console.error("      :",s),s}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Ce(z,"walletLimits",t);return await en(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Be(),lastMonthlyReset:Be(),updatedAt:Be(),ownerId:(e=Bt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},k0=Object.freeze(Object.defineProperty({__proto__:null,default:Fg,walletDailyLimitsService:Fg},Symbol.toStringTag,{value:"Module"}));class KZ{constructor(){Td(this,"intervalId",null);Td(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Bt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await T0.getToday(n);await T0.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await us.syncReportsDataFromFirebase(e);const n=us.getReportsData(e);if(!n.lastDailyResetDate||!us.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Yr.getUserTransactions(e),l=w=>{const S=String(w||"").toLowerCase();return["completed","confirmed","success"].includes(S)?"completed":["failed","error"].includes(S)?"failed":["cancelled","canceled"].includes(S)?"cancelled":"pending"},c=(a||[]).filter(w=>{var P,x;const S=(P=w==null?void 0:w.createdAt)!=null&&P.toDate?w.createdAt.toDate():(w==null?void 0:w.createdAt)instanceof Date?w.createdAt:new Date(w==null?void 0:w.createdAt);return((x=S==null?void 0:S.toDateString)==null?void 0:x.call(S))===o&&l(w==null?void 0:w.status)==="completed"}),u=c.length,h=c.reduce((w,S)=>w+Number(S.amount||0),0),f=w=>{const S=String(((w==null?void 0:w.type)??(w==null?void 0:w.txnType))||"").toLowerCase();return S==="withdraw"||S==="withdrawal"||S==="receive"},p=w=>{const S=String(((w==null?void 0:w.type)??(w==null?void 0:w.txnType))||"").toLowerCase();return S==="send"||S==="transfer"},_=c.filter(f).reduce((w,S)=>{const P=S.withdrawnAmount!==void 0?Number(S.withdrawnAmount):Number(S.amount||0);return w+P},0),g=c.filter(w=>p(w)&&!["  "].includes(String((w==null?void 0:w.title)||""))).reduce((w,S)=>{const P=S.sentAmount!==void 0?Number(S.sentAmount):Number(S.amount||0);return w+P},0),b=c.reduce((w,S)=>w+Number(us.calculateTransactionProfit(S)||0),0),E=new Date(i).toISOString().slice(0,10);await SM.add({userId:e,reportDate:E,totalTransactions:u,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(_.toFixed(2)),totalSent:Number(g.toFixed(2)),profit:Number(b.toFixed(2)),walletId:null}),console.log("    :",E)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await Yo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await Fg.resetDailyLimits(i)}catch{}if(r)try{await Fg.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const ZP=new KZ,Tw=768;function TV(){const[t,e]=v.useState(void 0);return v.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Tw-1}px)`),r=()=>{e(window.innerWidth<Tw)};return n.addEventListener("change",r),e(window.innerWidth<Tw),()=>n.removeEventListener("change",r)},[]),!!t}function GZ(){const[t,e]=v.useState("default"),[n,r]=v.useState(!1);return v.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const xV=v.createContext(void 0);function QZ({children:t}){const{profile:e,user:n,loading:r}=Ss(),[s,i]=v.useState(null),[o,a]=v.useState(null),[l,c]=v.useState(!0);v.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),v.useEffect(()=>{const h=()=>{const p=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const _=localStorage.getItem(p);i(_||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=p=>{const _=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!p.key||p.key!==_))try{const g=localStorage.getItem(_);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const u={shopId:s,shopName:o,loading:l};return m.jsx(xV.Provider,{value:u,children:t})}function YZ(){const t=v.useContext(xV);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}const Pr={phoneNumber:"201000392539",defaultMessage:"    ",isEnabled:!0,lastUpdated:new Date},AV="whatsapp-settings",PV="app-settings",bp="whatsapp_settings_cache",N0=async()=>{var t;try{if(!Bt.currentUser){try{const r=localStorage.getItem(bp);if(r){const s=JSON.parse(r);return{phoneNumber:s.phoneNumber||Pr.phoneNumber,defaultMessage:s.defaultMessage||Pr.defaultMessage,isEnabled:s.isEnabled!==void 0?s.isEnabled:Pr.isEnabled,lastUpdated:s.lastUpdated?new Date(s.lastUpdated):Pr.lastUpdated}}}catch{}return Pr}const e=Ce(z,PV,AV),n=await Zt(e);if(n.exists()){const r=n.data(),s={phoneNumber:r.phoneNumber||Pr.phoneNumber,defaultMessage:r.defaultMessage||Pr.defaultMessage,isEnabled:r.isEnabled!==void 0?r.isEnabled:Pr.isEnabled,lastUpdated:((t=r.lastUpdated)==null?void 0:t.toDate())||Pr.lastUpdated};try{localStorage.setItem(bp,JSON.stringify(s))}catch{}return s}else return await RV(Pr),Pr}catch{try{const n=localStorage.getItem(bp);if(n){const r=JSON.parse(n);return{phoneNumber:r.phoneNumber||Pr.phoneNumber,defaultMessage:r.defaultMessage||Pr.defaultMessage,isEnabled:r.isEnabled!==void 0?r.isEnabled:Pr.isEnabled,lastUpdated:r.lastUpdated?new Date(r.lastUpdated):Pr.lastUpdated}}}catch{}return Pr}},RV=async t=>{try{const e=Ce(z,PV,AV),n={...t,lastUpdated:new Date};await en(e,n,{merge:!0});try{localStorage.setItem(bp,JSON.stringify(n))}catch{}return!0}catch(e){return console.error("    :",e),!1}},CV=t=>{const e=t.replace(/\D/g,"");if(e.length<10)throw new Error("      10   ");return e},Bee=t=>{try{const e=CV(t);return e.length>=10&&e.length<=15}catch{return!1}},JZ=(t,e)=>{const n=CV(t),r=encodeURIComponent(e);return`https://wa.me/${n}?text=${r}`},zee=()=>{const[t,e]=V.useState(null),[n,r]=V.useState(!0),[s,i]=V.useState(null);return V.useEffect(()=>{(async()=>{try{r(!0);const l=await N0();e(l),i(null)}catch(l){i("    "),console.error(l)}finally{r(!1)}})()},[]),{settings:t,loading:n,error:s,updateSettings:async a=>{try{return r(!0),await RV(a)&&t?(e({...t,...a,lastUpdated:new Date}),i(null),!0):(i("   "),!1)}catch(l){return i("   "),console.error(l),!1}finally{r(!1)}},refreshSettings:()=>N0().then(e)}},Fm="https://cashy-link-chat.shop",eR=({position:t="left"})=>{const[e,n]=v.useState(!0),[r,s]=v.useState(!1),[i,o]=v.useState(null),[a,l]=v.useState(""),[c,u]=v.useState(""),[h,f]=v.useState(()=>{if(typeof window<"u"){const Q=localStorage.getItem("support_chat_messages");return Q?JSON.parse(Q):[]}return[]}),[p,_]=v.useState(null),[g,b]=v.useState(null),[E,w]=v.useState(!1),[S,P]=v.useState(()=>{if(typeof window<"u"){const Q=localStorage.getItem("support_chat_unread_count");return Q?parseInt(Q,10):0}return 0}),[x,O]=v.useState(new Set),[T,A]=v.useState(null),[R,N]=v.useState(!1),[C,L]=v.useState({name:"",email:"",phone:""});v.useEffect(()=>{const Q=localStorage.getItem("support_chat_user_data");if(Q)try{const Ie=JSON.parse(Q);L(Te=>({...Te,...Ie}))}catch(Ie){console.error("Error parsing saved chat user data",Ie)}},[]);const[D,J]=v.useState(null),Le=v.useRef(null),ke=v.useRef(null),We=v.useRef(null),W=v.useRef(r),q=v.useRef(null);v.useEffect(()=>{window.dispatchEvent(new CustomEvent("support-chat-unread",{detail:{count:S}}))},[S]),v.useEffect(()=>{W.current=r},[r]),v.useEffect(()=>{const Q=()=>{T&&$n(T),s(!0),P(0)};return window.addEventListener("open-support-chat",Q),()=>window.removeEventListener("open-support-chat",Q)},[T]);const oe=()=>{var Q;(Q=We.current)==null||Q.scrollIntoView({behavior:"auto"})};v.useEffect(()=>{oe()},[h,r,R]);const{toast:ge}=Gl(),{user:pe}=Ss(),Me=Zs(),ve=TV(),F=Re.isNativePlatform(),ot=ve||F;v.useEffect(()=>{pe&&L(Q=>({...Q,name:pe.displayName||Q.name,email:pe.email||Q.email,phone:pe.phoneNumber||Q.phone}))},[pe]);const et=Me.pathname.startsWith("/admin"),wn=Me.pathname.startsWith("/profile-settings");v.useEffect(()=>{localStorage.setItem("support_chat_messages",JSON.stringify(h))},[h]),v.useEffect(()=>{localStorage.setItem("support_chat_unread_count",S.toString())},[S]),v.useEffect(()=>{const Q=localStorage.getItem("support_chat_user_id");Q&&(A(Q),$n(Q))},[]),v.useEffect(()=>()=>{ke.current!==null&&(window.clearInterval(ke.current),ke.current=null)},[]);const sr=async()=>{N(!0)},ir=async()=>{if(!C.name||!C.email||!C.phone){ge({title:" ",description:"    ",variant:"destructive"});return}try{let Q=pe==null?void 0:pe.uid;if(!Q){if(C.phone){const ye=C.phone.replace(/[^0-9]/g,"");ye.length>=5&&(Q=`user_${ye}`)}if(!Q){const ye=localStorage.getItem("support_chat_user_id");ye?Q=ye:Q=`guest_${Date.now()}_${Math.random().toString(36).slice(2,10)}`}}const Te=await(await fetch(`${Fm}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Q,name:C.name,email:C.email,phone:C.phone})})).json().catch(()=>null);if((Te==null?void 0:Te.status)==="missing_fields"){ge({title:" ",description:"    ",variant:"destructive"});return}if((Te==null?void 0:Te.status)!=="registered"){const ye=localStorage.getItem("support_chat_user_id");if(!(Q===ye||(pe==null?void 0:pe.uid)&&Q===pe.uid)){ge({title:"",description:"    ",variant:"destructive"});return}}localStorage.setItem("support_chat_user_data",JSON.stringify({name:C.name,email:C.email,phone:C.phone})),o("local"),A(Q),localStorage.setItem("support_chat_user_id",Q),N(!1),$n(Q)}catch(Q){console.error("Registration check failed:",Q),ge({title:"  ",description:"    ",variant:"destructive"})}},pr=Q=>{if(!Q)return new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});let Ie;if(typeof Q=="object"&&Q.toDate)Ie=Q.toDate();else if(typeof Q=="string")Ie=new Date(Q);else return"";if(isNaN(Ie.getTime()))return"";const Te=new Date;return Ie.getDate()===Te.getDate()&&Ie.getMonth()===Te.getMonth()&&Ie.getFullYear()===Te.getFullYear()?Ie.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):`${Ie.toLocaleDateString()} ${Ie.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`},$n=Q=>{if(ke.current!==null)return;const Ie=window.setInterval(async()=>{try{const Te=await fetch(`${Fm}/get/${Q}`);if(!Te.ok)return;const ye=await Te.json().catch(()=>null);if(!ye)return;const it=`server_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;let ae=null,Ue=ye.message||ye.msg||ye.text||ye.imageUrl||ye.url||ye.image||ye.data||ye.content;ye.imageBase64&&(Ue=`data:image/jpeg;base64,${ye.imageBase64}`);let Je=ye.type;if(Ue&&typeof Ue=="string"&&(Ue.startsWith("data:image")||Ue.match(/\.(jpeg|jpg|gif|png|webp)$/i)||Ue.length>200&&!Ue.includes(" ")&&/^[A-Za-z0-9+/=]+$/.test(Ue))&&(Je="image"),!Je&&Ue&&(Je="text"),Je==="text"&&Ue&&(ae={id:it,senderType:"admin",message:Ue,content:Ue,type:"text",timestamp:new Date().toISOString()}),Je==="image"&&Ue){let Et=Ue;!Et.startsWith("http")&&!Et.startsWith("data:image")&&(Et=`data:image/jpeg;base64,${Ue}`),ae={id:it,senderType:"admin",message:"",content:Et,imageUrl:Et,type:"image",timestamp:new Date().toISOString()}}ae&&(f(Et=>[...Et,ae]),q.current&&(q.current.currentTime=0,q.current.play().catch(Et=>console.error("Error playing notification sound:",Et))),W.current||P(Et=>Et+1),O(Et=>new Set([...Et,it])),setTimeout(()=>{O(Et=>{const Kt=new Set(Et);return Kt.delete(it),Kt})},5e3))}catch(Te){console.error("Error polling support messages:",Te)}},3e3);ke.current=Ie},K=()=>{ke.current!==null&&(window.clearInterval(ke.current),ke.current=null)},ce=async()=>{if(!a.trim())return;const Q=a;l("");let Ie=T;if(!Ie){const it=localStorage.getItem("support_chat_user_id");if(it)Ie=it;else{const ae=`web_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;localStorage.setItem("support_chat_user_id",ae),Ie=ae}A(Ie)}const Te=`client_${Date.now()}_${Math.random().toString(36).slice(2,10)}`,ye={id:Te,senderType:"client",message:Q,content:Q,timestamp:new Date().toISOString()};f(it=>[...it,ye]);try{await fetch(`${Fm}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Ie,type:"text",message:Q,name:C.name,email:C.email,phone:C.phone})}),$n(Ie)}catch(it){console.error("Error sending support message:",it),f(ae=>ae.filter(Ue=>Ue.id!==Te)),l(Q),ge({title:"  ",description:"   ",variant:"destructive"})}},Pe=async()=>{if(!c.trim())return;const Q=c;u("");try{const Ie=await N0(),Te=JZ(Ie.phoneNumber,Q);window.open(Te,"_blank")}catch(Ie){console.error("Error opening WhatsApp:",Ie),ge({title:"",description:"      ",variant:"destructive"}),u(Q)}},Xe=async()=>{o(null),f([]),localStorage.removeItem("support_chat_messages"),localStorage.removeItem("support_chat_user_id"),l(""),_(null),b(null),P(0),K(),ge({title:"  ",description:"     "})},xe=Q=>{var Te;const Ie=(Te=Q.target.files)==null?void 0:Te[0];if(Ie){if(!Ie.type.startsWith("image/")){ge({title:"   ",description:"   ",variant:"destructive"});return}if(Ie.size>5*1024*1024){ge({title:"   ",description:"     5 ",variant:"destructive"});return}_(Ie);const ye=new FileReader;ye.onload=it=>{var ae;b((ae=it.target)==null?void 0:ae.result)},ye.readAsDataURL(Ie)}},je=Q=>new Promise((Ie,Te)=>{const ye=new FileReader;ye.onload=()=>{const it=ye.result.split(",")[1];Ie(it)},ye.onerror=Te,ye.readAsDataURL(Q)}),be=async()=>{if(!p)return;const Q=p;_(null),b(null),w(!0);let Ie=T;if(!Ie){const Te=localStorage.getItem("support_chat_user_id");if(Te)Ie=Te;else{const ye=`web_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;localStorage.setItem("support_chat_user_id",ye),Ie=ye}A(Ie)}try{const Te=await je(Q);await fetch(`${Fm}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Ie,name:C.name,email:C.email,phone:C.phone,type:"image",imageBase64:Te})});const it={id:`client_img_${Date.now()}_${Math.random().toString(36).slice(2,10)}`,senderType:"client",message:"",content:"",imageUrl:`data:image/jpeg;base64,${Te}`,type:"image",timestamp:new Date().toISOString()};f(ae=>[...ae,it]),$n(Ie),ge({title:" ",description:"   "})}catch(Te){console.error("Error sending image:",Te),ge({title:"",description:"   .    .",variant:"destructive"})}finally{w(!1),Le.current&&(Le.current.value="")}},Ne=()=>{var Q;(Q=Le.current)==null||Q.click()},Ze=()=>{s(!1),P(0)},Pt=()=>{r||(P(0),T&&$n(T)),s(!r)};return et||wn||!e?null:m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
           @keyframes pulse {
             0% {
               transform: scale(1);
               box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
             }
             70% {
               transform: scale(1.05);
               box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
             }
             100% {
               transform: scale(1);
               box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
             }
           }

           @keyframes slideIn {
             0% {
               transform: translateX(${t==="left"?"-100%":"100%"});
               opacity: 0;
             }
             100% {
               transform: translateX(0);
               opacity: 1;
             }
           }

           .chat-container {
             position: fixed;
             bottom: 40px;
             ${t}: 40px;
             z-index: 100;
             animation: slideIn 0.8s ease-out;
           }

           .chat-float {
             width: 60px;
             height: 60px;
             background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 0.9));
             color: #FFF;
             border-radius: 50px;
             text-align: center;
             font-size: 30px;
             box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
             cursor: pointer;
             animation: pulse 2s infinite;
             transition: all 0.3s ease;
             display: flex;
             align-items: center;
             justify-content: center;
             border: 2px solid rgba(255, 255, 255, 0.3);
             outline: none;
             position: relative;
             backdrop-filter: blur(10px);
           }

           .chat-float:hover {
             transform: scale(1.1) rotate(5deg);
             box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
           }

           .chat-dialog {
             position: absolute;
             bottom: 80px;
             ${t}: 0;
             width: 350px;
             max-height: 70vh;
             background: white;
             border-radius: 16px;
             box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
             border: 1px solid rgba(59, 130, 246, 0.2);
             overflow: hidden;
             transform-origin: bottom ${t};
             animation: slideIn 0.3s ease-out;
             display: flex;
             flex-direction: column;
           }

           .messages-container {
             flex: 1;
             overflow-y: auto;
             padding: 16px;
             background: #f8fafc;
             min-height: 0;
           }

           .message {
             margin-bottom: 12px;
             padding: 8px 12px;
             border-radius: 12px;
             max-width: 80%;
             word-wrap: break-word;
           }

           .message.client {
             background: linear-gradient(135deg, #3b82f6, #2563eb);
             color: white;
             margin-left: auto;
             text-align: right;
           }

           .message.admin {
-                background: #e2e8f0;
-                color: #334155;
+                background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
+                color: #0f172a;
+                border: 2px solid #0ea5e9;
+                box-shadow: 0 2px 8px rgba(14, 165, 233, 0.2);
             margin-right: auto;
+             position: relative;
+           }
+           
+           .message.admin.new-message {
+             animation: newMessagePulse 2s ease-in-out;
+             border-color: #10b981;
+             background: linear-gradient(135deg, #f0fdf4, #dcfce7);
+             box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
+           }
+           
+           .message.admin.new-message::before {
+             content: "";
+             position: absolute;
+             top: -8px;
+             right: -8px;
+             background: #10b981;
+             color: white;
+             font-size: 10px;
+             padding: 2px 6px;
+             border-radius: 8px;
+             font-weight: bold;
+           }
+           
+           @keyframes newMessagePulse {
+             0% {
+               transform: scale(1);
+               box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
+             }
+             50% {
+               transform: scale(1.02);
+               box-shadow: 0 6px 16px rgba(16, 185, 129, 0.5);
+             }
+             100% {
+               transform: scale(1);
+               box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
+             }
            }
            margin-right: auto;
          }

          @media (max-width: 768px) {
            .chat-container {
              bottom: 80px;
              ${t}: 16px;
              pointer-events: none;
            }
            
            .chat-dialog {
              width: 300px;
              max-height: 400px;
              pointer-events: auto;
              bottom: 0;
            }
            
            .chat-float {
              display: none !important;
            }
          }
        `}),m.jsxs("div",{className:"chat-container",children:[r&&m.jsxs("div",{className:"chat-dialog",children:[m.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(bc,{className:"h-5 w-5"}),m.jsx("span",{className:"font-semibold",children:"   cashy link"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[i&&m.jsx(vt,{variant:"ghost",size:"sm",onClick:Xe,className:"text-white hover:bg-red-500/20 h-8 w-8 p-0",title:" ",children:m.jsx(w3,{className:"h-4 w-4"})}),m.jsx(vt,{variant:"ghost",size:"sm",onClick:Ze,className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:m.jsx(ko,{className:"h-4 w-4"})})]})]}),!i&&!R?m.jsxs("div",{className:"p-6 space-y-4",children:[m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:"    "}),m.jsx("p",{className:"text-sm text-gray-500",children:"  .    :"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs(vt,{onClick:sr,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[m.jsx(bc,{className:"w-4 h-4 ml-2"}),"   "]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("span",{className:"w-full border-t"})}),m.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:m.jsx("span",{className:"bg-white px-2 text-gray-500",children:""})})]}),m.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-medium",children:[m.jsx(bc,{className:"w-4 h-4"}),m.jsx("span",{children:""})]}),m.jsx(Zn,{dir:"ltr",placeholder:"  ...",value:c,onChange:Q=>u(Q.target.value),className:"mb-2 bg-white"}),m.jsx(vt,{className:"w-full bg-[#25D366] hover:bg-[#128C7E] text-white",onClick:Pe,children:" "})]})]})]}):R&&!i?m.jsxs("div",{className:"p-6 space-y-4",children:[m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:" "}),m.jsx("p",{className:"text-sm text-gray-500",children:"    "})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-1 block",children:""}),m.jsx(Zn,{placeholder:" ",value:C.name,onChange:Q=>L({...C,name:Q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-1 block",children:" "}),m.jsx(Zn,{placeholder:"example@email.com",type:"email",value:C.email,onChange:Q=>L({...C,email:Q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-1 block",children:" "}),m.jsx(Zn,{placeholder:"01xxxxxxxxx",type:"tel",value:C.phone,onChange:Q=>L({...C,phone:Q.target.value})})]}),m.jsx(vt,{onClick:ir,className:"w-full mt-4 bg-blue-600 text-white hover:bg-blue-700",children:"  "}),m.jsx(vt,{variant:"ghost",onClick:()=>N(!1),className:"w-full",children:""})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"messages-container",children:[h.length===0?m.jsxs("div",{className:"text-center text-gray-500 py-8",children:[m.jsx(bc,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),m.jsx("p",{children:"   "}),m.jsx("p",{className:"text-sm",children:"   "})]}):h.map(Q=>m.jsx("div",{className:`flex mb-4 ${Q.senderType==="client"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${Q.senderType==="client"?"bg-blue-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[Q.type==="image"?m.jsxs("div",{children:[m.jsx("img",{src:Q.imageUrl||"https://placehold.co/300x200?text=Image+Unavailable",alt:" ",className:"max-w-full h-auto rounded-lg mb-2 cursor-pointer",onClick:()=>Q.imageUrl&&J(Q.imageUrl),style:{maxHeight:"200px"}}),Q.message&&m.jsx("div",{className:"text-sm",children:Q.message})]}):m.jsx("div",{className:"text-sm",children:Q.message||Q.content||" "}),m.jsx("span",{className:"text-[10px] opacity-70 mt-1 block",children:pr(Q.timestamp)})]})},Q.id)),m.jsx("div",{ref:We})]}),m.jsxs("div",{className:"p-4 border-t bg-white",children:[g&&m.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:" :"}),m.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>{_(null),b(null),Le.current&&(Le.current.value="")},className:"h-6 w-6 p-0 text-gray-500 hover:text-red-500",children:m.jsx(ko,{className:"h-4 w-4"})})]}),m.jsx("img",{src:g,alt:"",className:"max-w-full h-auto rounded-lg",style:{maxHeight:"150px"}}),m.jsx("div",{className:"flex gap-2 mt-2",children:m.jsx(vt,{onClick:be,disabled:E,size:"sm",className:"bg-green-600 hover:bg-green-700 flex-1",children:E?" ...":" "})})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Zn,{placeholder:"  ...",value:a,onChange:Q=>l(Q.target.value),onKeyPress:Q=>Q.key==="Enter"&&ce(),className:"flex-1 text-right",dir:"rtl"}),m.jsx("input",{type:"file",ref:Le,onChange:xe,accept:"image/*",className:"hidden"}),m.jsx(vt,{onClick:Ne,size:"sm",variant:"outline",className:"px-3",title:" ",children:m.jsx(J4,{className:"h-4 w-4"})}),m.jsx(vt,{onClick:ce,disabled:!a.trim(),size:"sm",className:"bg-blue-600 hover:bg-blue-700 px-3",children:m.jsx(d3,{className:"h-4 w-4"})})]})]})]})]}),!ot&&m.jsxs("button",{className:"chat-float",onClick:Pt,title:"  ",children:[!r&&m.jsx("div",{onClick:Q=>{Q.stopPropagation(),n(!1)},className:"absolute -top-1 -left-1 bg-gray-200 hover:bg-red-500 hover:text-white text-gray-600 rounded-full p-0.5 w-5 h-5 flex items-center justify-center shadow-md cursor-pointer transition-colors z-[102]",title:"",children:m.jsx(ko,{size:12})}),!r&&S>0&&m.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center min-w-[24px] shadow-lg",children:S>99?"99+":S}),r?m.jsx(ko,{className:"h-6 w-6"}):m.jsx(bc,{className:"h-6 w-6"})]}),D&&m.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>J(null),children:m.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full flex items-center justify-center",onClick:Q=>Q.stopPropagation(),children:[m.jsx("button",{onClick:()=>J(null),className:"absolute -top-12 right-0 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 transition-colors",children:m.jsx(ko,{className:"h-6 w-6"})}),m.jsx("img",{src:D,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"})]})}),m.jsx("audio",{ref:q,src:"https://res.cloudinary.com/dxfq3iotg/video/upload/v1557233524/success.mp3",hidden:!0})]})]})},XZ={},tR=V.lazy(()=>se(()=>import("./Index-CcosJwmn.js"),[],import.meta.url)),jm=V.lazy(()=>se(()=>import("./LandingPage-Cdqcv4id.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),nR=V.lazy(()=>se(()=>import("./SubscriptionsPage-lLk8EQkR.js"),__vite__mapDeps([9,10,11,2,3,12,7]),import.meta.url)),rR=V.lazy(()=>se(()=>import("./AuthPage-3ymRg6Vo.js"),__vite__mapDeps([13,1,5]),import.meta.url)),Um=V.lazy(()=>se(()=>import("./TopUpPage-nFu59RP6.js"),__vite__mapDeps([14,15]),import.meta.url)),sR=V.lazy(()=>se(()=>import("./AdminTopupsPage-8UHCH2u5.js"),__vite__mapDeps([16,15]),import.meta.url)),iR=V.lazy(()=>se(()=>import("./AdminNotificationsPage-kJiPNhxb.js"),__vite__mapDeps([17,18,19,20]),import.meta.url)),$m=V.lazy(()=>se(()=>import("./UserRegisterPage-CYIkXzjO.js"),__vite__mapDeps([21,22,23,24]),import.meta.url)),oR=V.lazy(()=>se(()=>import("./UserAccountSetupPage-CfJQ6gp7.js"),__vite__mapDeps([25,22,7]),import.meta.url)),aR=V.lazy(()=>se(()=>import("./ForgotPasswordCodePage-THQR3BPd.js"),[],import.meta.url)),lR=V.lazy(()=>se(()=>import("./DashboardLoginPage-DxsvpUhr.js"),[],import.meta.url)),cR=V.lazy(()=>se(()=>import("./ProtectedDashboard-K-13upKR.js"),__vite__mapDeps([26,15,27,28,23,29]),import.meta.url)),Sp=V.lazy(()=>se(()=>import("./ProtectedUserDashboard-FJjhr7Xd.js"),__vite__mapDeps([30,31,20]),import.meta.url)),uR=V.lazy(()=>se(()=>import("./MerchantDashboard-Du67Vsfp.js"),__vite__mapDeps([32,33,15,34,35,36,37,38,18,39,40,23,3,41,5]),import.meta.url)),dR=V.lazy(()=>se(()=>import("./PendingApprovalPage-CdoC-fdy.js"),__vite__mapDeps([42,43]),import.meta.url)),hR=V.lazy(()=>se(()=>import("./AdminLogin-CuOCVnMI.js"),[],import.meta.url)),fR=V.lazy(()=>se(()=>import("./ProtectedAdminDashboard-Dj6xNvps.js"),__vite__mapDeps([44,10,45,33,15,34,46,43,18,22,35,47,48,41,49,31,19,11,1,6,8,7,50,51,52,53,5,54,55]),import.meta.url)),mR=V.lazy(()=>se(()=>import("./AuthTestPage-DTSrtGsO.js"),[],import.meta.url)),pR=V.lazy(()=>se(()=>import("./ProfileSettingsPage-BvFHeoPd.js").then(t=>t.b),__vite__mapDeps([56,46,41,18,15,28,52,54,7,48,8,3]),import.meta.url)),gR=V.lazy(()=>se(()=>import("./TransactionsPage-vZbFUf7u.js"),__vite__mapDeps([57,15,35,51,34,58,59,47,39,7,40,5,60,11,61,55,28,62,27,48,29,3,63,54]),import.meta.url)),yR=V.lazy(()=>se(()=>import("./WalletAdditionPage-ecXERgDK.js"),__vite__mapDeps([64,15,3,23,65]),import.meta.url)),vR=V.lazy(()=>se(()=>import("./ReferralsPage-DGZtjXYw.js"),__vite__mapDeps([66,35,22,24,20,7,49,52,54]),import.meta.url)),wR=V.lazy(()=>se(()=>import("./NotFound-DIpkr8tT.js"),[],import.meta.url)),_R=V.lazy(()=>se(()=>import("./PrivacyPolicyPage-DWWpFyh8.js"),[],import.meta.url)),il=new pB({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=EB({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});_B({queryClient:il,persister:t,maxAge:24*60*60*1e3})}catch{}const ZZ=()=>{if(!((Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return m.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:m.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:m.jsx(OE,{className:"w-5 h-5"})})})},ER=()=>{const t=Zs(),{user:e,loading:n}=Ss(),r=(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?m.jsx(pZ,{}):null},eee=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},xw=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await se(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>Po);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},tee=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await se(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>Po);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],u=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(u.length>0){const h=u.find(p=>!!(p!=null&&p.isDefault)),f=String(((h==null?void 0:h.id)??((e=u[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},bR=()=>{var _n;const t=TV(),e=(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android",{profile:n,user:r}=Ss(),{shopId:s}=YZ(),i=Zs(),o=(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android"&&i.pathname==="/"&&!!r;V.useEffect(()=>{(async()=>{if(Re.isNativePlatform())try{await bw.setOverlaysWebView({overlay:!1}),await bw.setStyle({style:R0.Dark}),Re.getPlatform()==="android"&&await bw.setBackgroundColor({color:"#000000"})}catch($){console.warn("StatusBar config failed",$)}})()},[]),V.useEffect(()=>{const G=window.electronAPI;if(G){try{const $=localStorage.getItem("adbSmsReadingEnabled")==="true";G.toggleAdbSms&&G.toggleAdbSms($)}catch{}G.onAdbSmsReceived&&G.onAdbSmsReceived($=>{console.log("[App] ADB SMS Received:",$);const U={text:$.text,sender:$.sender,msisdn:$.sender,receivedAt:Date.now()};window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:U}))})}},[]);const a=i.pathname.startsWith("/user/login")||i.pathname.startsWith("/auth")||i.pathname.startsWith("/landing")||i.pathname==="/"&&!o&&!r,l=!!r&&!a||i.pathname.startsWith("/user/dashboard")||o;V.useEffect(()=>{r&&console.log("Dashboard State Check:",{path:i.pathname,isUserDashboard:l,isAuthOrLanding:a,userUid:r.uid})},[i.pathname,l,r]);const c=Jl(),{toast:u}=Gl(),[h,f]=V.useState(!1),[p,_]=V.useState(null),[g,b]=V.useState(!1),[E,w]=V.useState(null),[S,P]=V.useState(!1),[x,O]=V.useState(""),[T,A]=V.useState(""),[R,N]=V.useState(null),[C,L]=V.useState(null),D=V.useRef(null),J=V.useRef(null),Le=V.useRef(!1),ke=V.useRef(null),We=V.useRef(""),W=V.useRef(""),q=V.useRef(new Set);V.useEffect(()=>{try{const G=localStorage.getItem("sms_suppressed_ids")||"[]",$=Array.isArray(JSON.parse(G))?JSON.parse(G):[];q.current=new Set($.map(U=>String(U||"")))}catch{}},[]);const[oe,ge]=V.useState(!1),pe=V.useRef(n);V.useEffect(()=>{pe.current=n},[n]),GZ(),V.useEffect(()=>{(async()=>{if(e)try{localStorage.getItem("hasCheckedNotificationPermission_v1")||localStorage.setItem("hasCheckedNotificationPermission_v1","true")}catch{}})();const $=U=>{};return window.addEventListener("notificationListenerStatus",$),()=>window.removeEventListener("notificationListenerStatus",$)},[u,e]),V.useEffect(()=>{if(!r)return;let G;return(async()=>{try{const{collection:U,query:Y,where:te,onSnapshot:ne}=await se(async()=>{const{collection:X,query:le,where:ie,onSnapshot:de}=await Promise.resolve().then(()=>Jn);return{collection:X,query:le,where:ie,onSnapshot:de}},void 0,import.meta.url),{db:ue}=await se(async()=>{const{db:X}=await Promise.resolve().then(()=>mn);return{db:X}},void 0,import.meta.url),me=Y(U(ue,"pendingSmsPopups"),te("userId","==",r.uid),te("status","==","pending"));G=ne(me,X=>{X.docChanges().forEach(le=>{var ie,de;if(le.type==="added"){if(le.doc.metadata.hasPendingWrites)return;const fe=le.doc.data(),Ae=((de=(ie=fe.createdAt)==null?void 0:ie.toMillis)==null?void 0:de.call(ie))||Date.now();if(Date.now()-Ae>5*60*1e3)return;const _e=fe.payload;if(_e){if(_e.popupId&&q.current.has(_e.popupId))return;ot({..._e,popupId:le.doc.id}),ve(!0);try{Ue()}catch{}}}else le.type==="modified"?le.doc.data().status!=="pending"&&ot(Ae=>(Ae==null?void 0:Ae.popupId)===le.doc.id?(ve(!1),null):Ae):le.type==="removed"&&ot(fe=>(fe==null?void 0:fe.popupId)===le.doc.id?(ve(!1),null):fe)})})}catch(U){console.error("Error setting up popup listener:",U)}})(),()=>{G&&G()}},[r]);const[Me,ve]=V.useState(!1),[F,ot]=V.useState(null),[et,wn]=V.useState(""),[sr,ir]=V.useState(!1),[pr,$n]=V.useState(!1),[K,ce]=V.useState(""),[Pe,Xe]=V.useState(""),[xe,je]=V.useState(!1),[be,Ne]=V.useState(0),[Ze,Pt]=V.useState(!1),[Q,Ie]=V.useState(""),[Te,ye]=V.useState("");V.useEffect(()=>{try{const G=(r==null?void 0:r.uid)||"default",$=localStorage.getItem(`sim1Number_${G}`)??localStorage.getItem("sim1Number")??"",U=localStorage.getItem(`sim2Number_${G}`)??localStorage.getItem("sim2Number")??"";Ie($),ye(U),We.current=$,W.current=U}catch{}},[r==null?void 0:r.uid]);const it=async(G,$)=>{if(!(!G||!F))try{const{resolveWalletBySimOrSlot:U,merchantWalletService:Y,detectWalletFromSim:te}=await se(async()=>{const{resolveWalletBySimOrSlot:me,merchantWalletService:X,detectWalletFromSim:le}=await Promise.resolve().then(()=>Po);return{resolveWalletBySimOrSlot:me,merchantWalletService:X,detectWalletFromSim:le}},void 0,import.meta.url),ne=(r==null?void 0:r.uid)||"";ot(me=>me?{...me,simNumber:G,simLabel:$}:null);let ue=await U({simNumbers:[G],userId:ne});if(!ue||!ue.walletId)try{const me=await Y.getByMerchantId(ne),X=localStorage.getItem(`wallets_${ne}`),le=X?JSON.parse(X):[],ie=(Array.isArray(le)?le:[]).map(_e=>({id:String((_e==null?void 0:_e.id)||""),phone:String((_e==null?void 0:_e.phone)||(_e==null?void 0:_e.msisdn)||""),isDefault:!!(_e!=null&&_e.isDefault)})),de=(Array.isArray(me)?me:[]).map(_e=>({id:String((_e==null?void 0:_e.id)||""),msisdn:String((_e==null?void 0:_e.msisdn)||""),isDefault:!!(_e!=null&&_e.isDefault)})),fe=[...ie,...de],Ae=await te([G],fe);Ae&&Ae.walletId&&(ue={walletId:Ae.walletId,msisdn:Ae.msisdn})}catch{}if(ue&&ue.walletId){ot(me=>me?{...me,walletMsisdn:ue.msisdn}:null),localStorage.setItem(`selectedWallet_${ne}`,ue.walletId);try{localStorage.setItem(`selectedWallet_${ne}_${s||""}`,ue.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:ue.walletId}}))}catch{}try{const{Preferences:me}=await se(async()=>{const{Preferences:X}=await Promise.resolve().then(()=>fw);return{Preferences:X}},void 0,import.meta.url);await me.set({key:"selected_wallet_id",value:ue.walletId})}catch{}}}catch{}},ae=V.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}Pt(!1);try{c("/user/login")}catch{}},[c]);V.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&Pt(!0)}catch{!r&&e&&Pt(!0)}},[r,e]);const Ue=V.useCallback(()=>{try{const G=window.AudioContext||window.webkitAudioContext;if(!G)return;const $=new G,U=$.createOscillator(),Y=$.createGain();U.type="sine",Y.gain.setValueAtTime(0,$.currentTime),U.connect(Y),Y.connect($.destination);const te=$.currentTime;U.frequency.setValueAtTime(800,te),Y.gain.linearRampToValueAtTime(.15,te+.02),U.start(te),U.frequency.exponentialRampToValueAtTime(1200,te+.08),Y.gain.exponentialRampToValueAtTime(1e-5,te+.32),U.stop(te+.35)}catch{}},[]),Je=G=>{try{const $=String(G||"").replace(/[^0-9+]/g,"");if(!$)return"";if($.startsWith("+20")){const U=$.slice(3);return U.startsWith("1")?"0"+U:U}if($.startsWith("0020")){const U=$.slice(4);return U.startsWith("1")?"0"+U:U}if($.startsWith("20")){const U=$.slice(2);return U.startsWith("1")?"0"+U:U}return $.startsWith("0")?$:/^(10|11|12|15)/.test($)?"0"+$:$}catch{return""}},Et=G=>{try{const $=String(G||""),U=$.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let Y=U?parseFloat(String(U[1]).replace(",",".")):0;const te=$.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let ne=te?Je(te[1]):void 0;const ue=$.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),me=$.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),X=ue?String(ue[1]).trim():me?String(me[1]).trim():void 0,le=$.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),ie=$.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),de=$.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!Y||Y<=0){const Ae=$.match(/Received\s*EGP\s*([0-9.,]+)/i)||$.match(/Received\s*EGP([0-9.,]+)/i);Ae&&(Y=parseFloat(String(Ae[1]).replace(/,/g,"")))}if(!ne){const Ae=$.match(/from\s+([0-9+]+)/i);Ae&&(ne=Je(Ae[1]))}const fe=le?String(le[1]).trim():ie?String(ie[1]).trim():de?String(de[1]).trim():void 0;return{amount:Y,sender:ne,senderName:X,reference:fe}}catch{return{amount:0}}};V.useEffect(()=>{(async()=>{var G;try{if(!Me||!F){ir(!1);return}const{auth:$}=await se(async()=>{const{auth:ne}=await Promise.resolve().then(()=>mn);return{auth:ne}},void 0,import.meta.url),U=((G=$.currentUser)==null?void 0:G.uid)||"",Y=U?`selectedWallet_${U}`:"selectedWallet_default",te=localStorage.getItem(Y)||"";if(!te){ir(!0);return}try{const{merchantWalletService:ne}=await se(async()=>{const{merchantWalletService:X}=await Promise.resolve().then(()=>gc);return{merchantWalletService:X}},void 0,import.meta.url),ue=await ne.getById(te),me=ue&&ue.defaultWithdrawCommission!=null;ir(!me)}catch{ir(!0)}}catch{ir(!0)}})()},[Me,F]);const Kt=async G=>{try{const{merchantWalletService:$,detectWalletFromSim:U}=await se(async()=>{const{merchantWalletService:ie,detectWalletFromSim:de}=await Promise.resolve().then(()=>Po);return{merchantWalletService:ie,detectWalletFromSim:de}},void 0,import.meta.url),Y=(r==null?void 0:r.uid)||"";if(!Y)return;const te=`wallets_${Y}`,ne=typeof localStorage<"u"?localStorage.getItem(te):null,ue=ne?JSON.parse(ne):[],me=await $.getByMerchantId(Y),X=[...(Array.isArray(ue)?ue:[]).map(ie=>({id:String((ie==null?void 0:ie.id)||""),phone:String((ie==null?void 0:ie.phone)||(ie==null?void 0:ie.msisdn)||""),isDefault:!!(ie!=null&&ie.isDefault)})),...(Array.isArray(me)?me:[]).map(ie=>({id:String((ie==null?void 0:ie.id)||""),msisdn:String((ie==null?void 0:ie.msisdn)||""),isDefault:!!(ie!=null&&ie.isDefault)}))],le=await U(G||[],X);if(le&&le.walletId)try{localStorage.setItem(`selectedWallet_${Y}`,le.walletId)}catch{}}catch{}};v.useEffect(()=>{const G=async $=>{var U;try{const Y=($==null?void 0:$.detail)||{},te=String(Y.text||"").trim(),ne=String(Y.title||"").trim();if(!te)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*|instapay|received\s*egp|transaction/i.test(`${ne} ${te}`)){try{Iw(Y,{toast:u})}catch{}return}const{auth:me}=await se(async()=>{const{auth:ut}=await Promise.resolve().then(()=>mn);return{auth:ut}},void 0,import.meta.url),X=((U=me.currentUser)==null?void 0:U.uid)||"";let le=s||"";if(!X){try{u({title:"  ",description:"   "})}catch{}return}if(!le)try{const{doc:ut,getDoc:St}=await se(async()=>{const{doc:En,getDoc:fn}=await Promise.resolve().then(()=>Jn);return{doc:En,getDoc:fn}},void 0,import.meta.url),{db:$e}=await se(async()=>{const{db:En}=await Promise.resolve().then(()=>mn);return{db:En}},void 0,import.meta.url),xt=await St(ut($e,"profiles",X));if(xt.exists()){const En=xt.data(),fn=String((En==null?void 0:En.shopId)||"").trim();fn&&(le=fn)}}catch{}let ie="",de="",fe=!1;try{const ut=X||"default";ie=(localStorage.getItem(`sim1Number_${ut}`)??localStorage.getItem("sim1Number")??"").trim(),de=(localStorage.getItem(`sim2Number_${ut}`)??localStorage.getItem("sim2Number")??"").trim(),fe=(localStorage.getItem(`smsAutoRegisterEnabled_${ut}`)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"}catch{}try{const{Preferences:ut}=await se(async()=>{const{Preferences:xt}=await Promise.resolve().then(()=>fw);return{Preferences:xt}},void 0,import.meta.url),St=await ut.get({key:"sim1_number"}),$e=await ut.get({key:"sim2_number"});!ie&&(St!=null&&St.value)&&(ie=String(St.value).trim()),!de&&($e!=null&&$e.value)&&(de=String($e.value).trim()),!ie&&We.current&&(ie=We.current),!de&&W.current&&(de=W.current)}catch{}let Ae=[];const _e=Array.isArray((($==null?void 0:$.detail)||{}).activeSimMsisdns)?$.detail.activeSimMsisdns.map(ut=>String(ut||"")):[];_e.length>0?Ae=_e:Ae=[ie,de].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(Ae))}catch{}let tt="";try{const ut=localStorage.getItem("lastSmsSimMsisdn")||"";ut&&Ae.includes(ut)&&(tt=ut)}catch{}if(tt||(tt=Ae[0]||""),tt)try{localStorage.setItem("lastSmsSimMsisdn",tt)}catch{}const{resolveWalletBySimOrSlot:at,bindSlotWalletMapping:Bn,merchantWalletService:Kn}=await se(async()=>{const{resolveWalletBySimOrSlot:ut,bindSlotWalletMapping:St,merchantWalletService:$e}=await Promise.resolve().then(()=>Po);return{resolveWalletBySimOrSlot:ut,bindSlotWalletMapping:St,merchantWalletService:$e}},void 0,import.meta.url),bt=X;let st=await at({simNumbers:Ae,userId:bt});if(!st&&Ae.length>0){try{await Kt(Ae)}catch{}const ut=localStorage.getItem(`selectedWallet_${bt}`)||"";if(ut)try{const St=await Kn.getById(ut);st={walletId:ut,msisdn:String((St==null?void 0:St.msisdn)||"")}}catch{}}if(st&&st.walletId){try{localStorage.setItem(`selectedWallet_${bt}`,st.walletId)}catch{}try{Bn({userId:bt,walletId:st.walletId,msisdn:st.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:st.walletId}}))}catch{}try{const ut=String(st.msisdn||"").trim();ut&&(tt=ut,localStorage.setItem("lastSmsSimMsisdn",ut))}catch{}}const Ke=Et(te),yr=Number(Ke.amount||0);if(!yr||yr<=0){try{Iw(Y,{toast:u})}catch{}return}const Ot=(st==null?void 0:st.msisdn)||await xw(X),Gt=Ke.reference||`VF-${Date.now()}`,$t={amount:yr,sender:String(Ke.sender||""),senderName:Ke.senderName,text:te,simNumber:tt};if(fe)try{await Ln({...$t,reference:Gt,walletMsisdn:Ot})}catch{}else{try{const{addDoc:ut,collection:St,serverTimestamp:$e}=await se(async()=>{const{addDoc:Yt,collection:zn,serverTimestamp:Ve}=await Promise.resolve().then(()=>Jn);return{addDoc:Yt,collection:zn,serverTimestamp:Ve}},void 0,import.meta.url),{db:xt}=await se(async()=>{const{db:Yt}=await Promise.resolve().then(()=>mn);return{db:Yt}},void 0,import.meta.url),En=await ut(St(xt,"pendingSmsPopups"),{userId:X,shopId:le,payload:{...$t,reference:Gt,walletMsisdn:Ot,sim1Number:ie,sim2Number:de},status:"pending",createdAt:$e()}),fn=/Received\s*EGP/i.test(String(te))?"InstaPay":"VF-Cash";ot({...$t,reference:Gt,providerLabel:fn,walletMsisdn:Ot,popupId:En.id})}catch{const ut=/Received\s*EGP/i.test(String(te))?"InstaPay":"VF-Cash";ot({...$t,reference:Gt,providerLabel:ut,walletMsisdn:Ot})}ve(!0);try{Ue()}catch{}}}catch{try{Iw(($==null?void 0:$.detail)||{},{toast:u})}catch{}}};try{window.addEventListener("vfNotificationReceived",G)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",G)}catch{}}},[u,s]),v.useEffect(()=>{const G=window.electronAPI;G&&typeof G.onAdbSmsReceived=="function"&&G.onAdbSmsReceived($=>{const U={sender:$.sender,text:$.text,msisdn:$.sender,deviceId:$.deviceId,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("mobileSmsReceived",{detail:U}))})},[]),v.useEffect(()=>{const G=async $=>{try{const U=($==null?void 0:$.detail)||{},Y=String(U.text||"");if(!Y)return;const te=(n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true",ne=localStorage.getItem("adbSmsReadingEnabled")==="true";if(!te&&!ne)return;const ue=/Received\s*EGP/i.test(Y),me=eee(Y,String(U.sender||U.msisdn||""));if(!ue&&!me)return;const X=(r==null?void 0:r.uid)||"";if(!X)return;let le=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const ie=pe.current;let de=(ie==null?void 0:ie.sim1Number)||"",fe=(ie==null?void 0:ie.sim2Number)||"";de||(de=localStorage.getItem(`sim1Number_${X}`)||localStorage.getItem("sim1Number")||""),fe||(fe=localStorage.getItem(`sim2Number_${X}`)||localStorage.getItem("sim2Number")||""),!de&&We.current&&(de=We.current),!fe&&W.current&&(fe=W.current),de=String(de).trim(),fe=String(fe).trim();const Ae=String(U.msisdn||U.sender||""),_e=Je(Ae),tt=Et(Y);let at=Number(tt.amount||0),Bn=tt.sender||_e||String(U.sender||""),Kn=tt.senderName,bt=tt.reference||"";if(ue){const $e=String(Y).match(/Received\s*EGP\s*([0-9.,]+)/i);$e&&(at=parseFloat(String($e[1]).replace(/,/g,"")));const xt=String(Y).match(/from\s+([0-9+]+)/i);xt&&(Bn=Je(xt[1]));const En=String(Y).match(/Ref:\s*([A-Za-z0-9\-]+)/i);En&&(bt=String(En[1]).trim())}if(!at||at<=0)return;let st="",Ke="";const yr=[de,fe].filter(Boolean).map($e=>Je($e));if(_e&&yr.includes(_e)&&(st=_e,st===Je(de)?Ke="SIM 1":st===Je(fe)&&(Ke="SIM 2")),!Ke){const $e=U==null?void 0:U.slot,xt=$e!=null?Number($e):-1;xt===0?(Ke="SIM 1",st=de?Je(de):""):xt===1&&(Ke="SIM 2",st=fe?Je(fe):"")}!Ke&&st&&(st===Je(de)?Ke="SIM 1":st===Je(fe)&&(Ke="SIM 2"));const Ot=ue?"InstaPay":"VF-Cash",Gt={amount:at,sender:Bn,senderName:Kn,text:Y,simNumber:st,simLabel:Ke},$t=X?`smsAutoRegisterEnabled_${X}`:"smsAutoRegisterEnabled",St=(localStorage.getItem($t)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!St){ot({...Gt,reference:bt,providerLabel:Ot,walletMsisdn:""}),ve(!0);try{Ue()}catch{}}(async()=>{try{const{resolveWalletBySimOrSlot:$e,bindSlotWalletMapping:xt,merchantWalletService:En}=await se(async()=>{const{resolveWalletBySimOrSlot:Ve,bindSlotWalletMapping:ht,merchantWalletService:ft}=await Promise.resolve().then(()=>Po);return{resolveWalletBySimOrSlot:Ve,bindSlotWalletMapping:ht,merchantWalletService:ft}},void 0,import.meta.url);let fn=Array.isArray(U.activeSimMsisdns)&&U.activeSimMsisdns.length>0?U.activeSimMsisdns.map(Ve=>Je(String(Ve||""))):_e?[_e]:[];fn.length===0&&(fn=[Je(de),Je(fe)].filter(Boolean));let Yt=await $e({simNumbers:fn,subId:Number((U==null?void 0:U.subId)||-1),slotIndex:Number((U==null?void 0:U.slot)||-1),userId:X});if(!Yt&&fn.length>0){try{await Kt(fn)}catch{}const Ve=localStorage.getItem(`selectedWallet_${X}`)||"";if(Ve)try{const ht=await En.getById(Ve);Yt={walletId:Ve,msisdn:String((ht==null?void 0:ht.msisdn)||"")}}catch{}}if(Yt&&Yt.walletId){try{localStorage.setItem(`selectedWallet_${X}`,Yt.walletId)}catch{}try{xt({userId:X,subId:Number((U==null?void 0:U.subId)||-1),slotIndex:Number((U==null?void 0:U.slot)||-1),walletId:Yt.walletId,msisdn:Yt.msisdn})}catch{}}const zn=(Yt==null?void 0:Yt.msisdn)||(X?await xw(X):"");if(ot(Ve=>Ve?{...Ve,walletMsisdn:zn}:null),St)try{await Ln({...Gt,reference:bt,walletMsisdn:zn})}catch{}else try{const{addDoc:Ve,collection:ht,serverTimestamp:ft}=await se(async()=>{const{addDoc:lt,collection:kn,serverTimestamp:Gn}=await Promise.resolve().then(()=>Jn);return{addDoc:lt,collection:kn,serverTimestamp:Gn}},void 0,import.meta.url),{db:Ut}=await se(async()=>{const{db:lt}=await Promise.resolve().then(()=>mn);return{db:lt}},void 0,import.meta.url),Ft=await Ve(ht(Ut,"pendingSmsPopups"),{userId:X,shopId:le,payload:{...Gt,reference:bt,walletMsisdn:zn,sim1Number:de,sim2Number:fe},status:"pending",createdAt:ft()});ot(lt=>lt?{...lt,popupId:Ft.id}:null)}catch{}}catch($e){console.error("Background SMS processing error",$e)}})()}catch(U){console.error("SMS Handler Error",U)}};try{window.addEventListener("mobileSmsReceived",G)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",G)}catch{}}},[u,s,n,r]),v.useEffect(()=>{},[u,s]),v.useEffect(()=>{},[u,s]);const Ln=async G=>{var $,U,Y;try{const te=G||F;if(!te)return;const{amount:ne,sender:ue,text:me,simNumber:X,senderName:le}=te,ie=String(me||"");let de=Number(ne||0);const fe=typeof(G==null?void 0:G.deferredMode)=="boolean"?G.deferredMode:pr,Ae=(G==null?void 0:G.debtorName)??K,_e=(G==null?void 0:G.debtorNote)??Pe;try{ve(!1)}catch{}try{}catch{}const tt=/Received\s*EGP/i.test(ie)?"instapay":"vodafone_cash";if(!de||de<=0){const Ve=ie.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(Ve&&(de=parseFloat(String(Ve[1]).replace(",","."))),!de||de<=0){const ht=ie.match(/Received\s*EGP\s*([0-9.,]+)/i)||ie.match(/Received\s*EGP([0-9.,]+)/i);ht&&(de=parseFloat(String(ht[1]).replace(/,/g,"")))}}let at=String(ue||"").trim();if(!at){const Ve=ie.match(/\s+\s+(\d+)/i);at=Ve?Je(Ve[1]):""}let Bn=String((te==null?void 0:te.reference)||"").trim();if(!Bn){const Ve=ie.match(/\s*\s*([\d\.]+)/i);Bn=Ve?String(Ve[1]).trim():String(Date.now())}if(!de||de<=0){try{u({title:"      ",variant:"destructive"})}catch{}return}const{auth:Kn}=await se(async()=>{const{auth:Ve}=await Promise.resolve().then(()=>mn);return{auth:Ve}},void 0,import.meta.url),bt=(($=Kn.currentUser)==null?void 0:$.uid)||"";let st=s||"";if(!bt){try{u({title:"  ",description:"   "})}catch{}return}if(!st)try{const{doc:Ve,getDoc:ht}=await se(async()=>{const{doc:Ft,getDoc:lt}=await Promise.resolve().then(()=>Jn);return{doc:Ft,getDoc:lt}},void 0,import.meta.url),{db:ft}=await se(async()=>{const{db:Ft}=await Promise.resolve().then(()=>mn);return{db:Ft}},void 0,import.meta.url),Ut=await ht(Ve(ft,"profiles",bt));if(Ut.exists()){const Ft=Ut.data(),lt=String((Ft==null?void 0:Ft.shopId)||"").trim();lt&&(st=lt)}}catch{}if(!st){try{u({title:"  ",description:"   "})}catch{}return}let Ke="";if(X)try{const{detectWalletFromSim:Ve}=await se(async()=>{const{detectWalletFromSim:mt}=await Promise.resolve().then(()=>Po);return{detectWalletFromSim:mt}},void 0,import.meta.url),{merchantWalletService:ht}=await se(async()=>{const{merchantWalletService:mt}=await Promise.resolve().then(()=>gc);return{merchantWalletService:mt}},void 0,import.meta.url),ft=await ht.getByMerchantId(bt),Ut=localStorage.getItem(`wallets_${bt}`),Ft=Ut?JSON.parse(Ut):[],lt=(Array.isArray(Ft)?Ft:[]).map(mt=>({id:String((mt==null?void 0:mt.id)||""),phone:String((mt==null?void 0:mt.phone)||(mt==null?void 0:mt.msisdn)||""),isDefault:!!(mt!=null&&mt.isDefault)})),kn=(Array.isArray(ft)?ft:[]).map(mt=>({id:String((mt==null?void 0:mt.id)||""),msisdn:String((mt==null?void 0:mt.msisdn)||""),isDefault:!!(mt!=null&&mt.isDefault)})),Gn=[...lt,...kn],or=await Ve([X],Gn);or&&or.walletId&&(Ke=or.walletId)}catch{}if(Ke||(Ke=await tee(bt)),!Ke)try{const{doc:Ve,getDoc:ht}=await se(async()=>{const{doc:gt,getDoc:Wr}=await Promise.resolve().then(()=>Jn);return{doc:gt,getDoc:Wr}},void 0,import.meta.url),{db:ft}=await se(async()=>{const{db:gt}=await Promise.resolve().then(()=>mn);return{db:gt}},void 0,import.meta.url);let Ut="",Ft="";try{const gt=await ht(Ve(ft,"profiles",bt));if(gt.exists()){const Wr=gt.data();Ut=String((Wr==null?void 0:Wr.sim1Number)||"").trim(),Ft=String((Wr==null?void 0:Wr.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:lt}=await se(async()=>{const{detectWalletFromSim:gt}=await Promise.resolve().then(()=>Po);return{detectWalletFromSim:gt}},void 0,import.meta.url),{merchantWalletService:kn}=await se(async()=>{const{merchantWalletService:gt}=await Promise.resolve().then(()=>gc);return{merchantWalletService:gt}},void 0,import.meta.url),Gn=`wallets_${bt}`,or=localStorage.getItem(Gn),mt=or?JSON.parse(or):[],bn=await kn.getByMerchantId(bt),Sn=(Array.isArray(mt)?mt:[]).map(gt=>({id:String((gt==null?void 0:gt.id)||""),phone:String((gt==null?void 0:gt.phone)||(gt==null?void 0:gt.msisdn)||""),isDefault:!!(gt!=null&&gt.isDefault)})),In=(Array.isArray(bn)?bn:[]).map(gt=>({id:String((gt==null?void 0:gt.id)||""),msisdn:String((gt==null?void 0:gt.msisdn)||""),isDefault:!!(gt!=null&&gt.isDefault)})),Or=[...Sn,...In],Qn=X||String(localStorage.getItem("lastSmsSimMsisdn")||"");let Mn=(Qn?[Qn]:[]).filter(Boolean);Mn.length===0&&(Mn=[Ut,Ft].filter(Boolean));const Rt=await lt(Mn,Or);if(Rt&&Rt.walletId){Ke=Rt.walletId;try{localStorage.setItem(`selectedWallet_${bt}`,Ke)}catch{}}}catch{}if(!Ke){try{u({title:"   ",description:"       "})}catch{}return}try{const Ve=bt;try{localStorage.setItem(`selectedWallet_${Ve}`,Ke)}catch{}try{localStorage.setItem(`selectedWallet_${Ve}_${st}`,Ke)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ke}}))}catch{}try{const{Preferences:ht}=await se(async()=>{const{Preferences:ft}=await Promise.resolve().then(()=>fw);return{Preferences:ft}},void 0,import.meta.url);await ht.set({key:"selected_wallet_id",value:Ke}),await ht.set({key:"current_user_id",value:Ve})}catch{}}catch{}const{recordAutoTransaction:yr,userDataService:Ot}=await se(async()=>{const{recordAutoTransaction:Ve,userDataService:ht}=await Promise.resolve().then(()=>gc);return{recordAutoTransaction:Ve,userDataService:ht}},void 0,import.meta.url),Gt=et&&et.trim()!==""?Math.max(0,parseFloat(et)):null;let $t=0;if(Gt!=null)$t=Gt;else try{const{merchantWalletService:Ve}=await se(async()=>{const{merchantWalletService:Ut}=await Promise.resolve().then(()=>gc);return{merchantWalletService:Ut}},void 0,import.meta.url),ht=await Ve.getById(String(Ke)),ft=ht&&ht.defaultWithdrawCommission;if(ft!=null)$t=Math.round((Number(ft)||0)*Number(de)/1e3*100)/100;else{const{calculateCommission:Ut}=await se(async()=>{const{calculateCommission:Ft}=await Promise.resolve().then(()=>ul);return{calculateCommission:Ft}},void 0,import.meta.url);$t=Ut(Number(de),"receive")}}catch{const{calculateCommission:Ve}=await se(async()=>{const{calculateCommission:ht}=await Promise.resolve().then(()=>ul);return{calculateCommission:ht}},void 0,import.meta.url);$t=Ve(Number(de),"receive")}try{const{walletDailyLimitsService:Ve}=await se(async()=>{const{walletDailyLimitsService:ft}=await Promise.resolve().then(()=>k0);return{walletDailyLimitsService:ft}},void 0,import.meta.url),ht=await Ve.canPerformOperation(String(Ke),Math.max(0,Number(de||0)),"withdraw");if(!ht.canPerform)try{u({title:"  ",description:String(ht.message||"      "),variant:"destructive"})}catch{}}catch{}const ut=Bn||`${ie}|${Date.now()}`,St=X||String(localStorage.getItem("lastSmsSimMsisdn")||""),xt=String((te==null?void 0:te.walletMsisdn)||"").trim()||St||await xw(bt)||"",En=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(fe)try{const Ve=await Ot.getUserData(bt),ht=Array.isArray(Ve==null?void 0:Ve.debts)?Ve.debts:[],ft=En==="add"?Number(de)+Number($t):Number(de),Ut={id:`DEBT-${Date.now()}`,debtorName:Ae||le||at||"",amount:Math.round(Number(ft)*100)/100,reason:_e||"  VodafoneCash",customerId:void 0,mobile:at,status:"pending",createdAt:new Date},Ft=[Ut,...ht];await Ot.updateUserData(bt,{debts:Ft});try{const lt=$t;await Ot.saveUserTransaction(bt,{type:"withdraw",amount:de,withdrawnAmount:de,commission:lt,status:"pending",createdAt:new Date,senderMsisdn:at,receiverMsisdn:xt,senderName:le,walletId:Ke,fromWallet:Ke,lineId:xt,provider:tt,reference:ut,transactionId:`DEFER-${Date.now()}`,linkedDebtId:Ut.id})}catch{}try{const lt=(G==null?void 0:G.popupId)||(F==null?void 0:F.popupId)||"";if(lt){const{doc:kn,updateDoc:Gn,serverTimestamp:or}=await se(async()=>{const{doc:bn,updateDoc:Sn,serverTimestamp:In}=await Promise.resolve().then(()=>Jn);return{doc:bn,updateDoc:Sn,serverTimestamp:In}},void 0,import.meta.url),{db:mt}=await se(async()=>{const{db:bn}=await Promise.resolve().then(()=>mn);return{db:bn}},void 0,import.meta.url);try{await Gn(kn(mt,"pendingSmsPopups",lt),{status:"confirmed",confirmedAt:or()})}catch{}try{(Y=(U=q.current)==null?void 0:U.add)==null||Y.call(U,lt);const bn=Array.from(q.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(bn))}catch{}}}catch{}try{u({title:"  ",description:"      "})}catch{}return}catch{}ve(!1),ot(null);try{u({title:"  ..."})}catch{}const fn=`TX-${Date.now()}`,Yt=Math.max(0,Number(de||0)),zn=Math.max(0,$t);try{const Ve=`cashBalance_${bt}_${st||"main"}`,ht=`walletBalances_${bt}_${st||"main"}`,ft=localStorage.getItem(Ve),Ut=localStorage.getItem(ht);let Ft=ft?parseFloat(ft):0,lt=Ut?JSON.parse(Ut):{};lt[Ke]=(Number(lt[Ke])||0)+Yt,Ft=Ft-Yt+zn;const kn={id:fn,type:"withdraw",senderPhone:at,receiverPhone:xt,amount:de,status:"completed",createdAt:new Date,withdrawnAmount:de,commission:zn,fromWallet:Ke,senderName:le,provider:tt,reference:ut,shopName:"  ()"};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{delta:{amount:Yt,commission:zn,walletId:Ke,type:"withdraw"},limitUpdate:{walletId:Ke,amount:Yt,type:"withdraw"}}}))}catch(Ve){console.error("Optimistic update failed",Ve)}(async()=>{var ht,ft,Ut,Ft;let Ve="";try{Ve=await yr({shopId:st,lineId:xt,walletId:Ke,amount:de,note:"SMS-ManualConfirm",provider:tt,createdBy:bt,senderMsisdn:at,senderName:le,reference:ut,text:ie});try{const lt=(G==null?void 0:G.popupId)||(F==null?void 0:F.popupId)||"";if(lt){const{doc:kn,updateDoc:Gn,serverTimestamp:or}=await se(async()=>{const{doc:bn,updateDoc:Sn,serverTimestamp:In}=await Promise.resolve().then(()=>Jn);return{doc:bn,updateDoc:Sn,serverTimestamp:In}},void 0,import.meta.url),{db:mt}=await se(async()=>{const{db:bn}=await Promise.resolve().then(()=>mn);return{db:bn}},void 0,import.meta.url);try{await Gn(kn(mt,"pendingSmsPopups",lt),{status:"confirmed",confirmedAt:or()})}catch{}try{(ft=(ht=q.current)==null?void 0:ht.add)==null||ft.call(ht,lt);const bn=Array.from(q.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(bn))}catch{}}}catch{}}catch(lt){console.error(lt)}try{const lt=Math.max(0,Number(de||0)),{doc:kn,getDoc:Gn,updateDoc:or}=await se(async()=>{const{doc:Mn,getDoc:Rt,updateDoc:gt}=await Promise.resolve().then(()=>Jn);return{doc:Mn,getDoc:Rt,updateDoc:gt}},void 0,import.meta.url),{db:mt}=await se(async()=>{const{db:Mn}=await Promise.resolve().then(()=>mn);return{db:Mn}},void 0,import.meta.url),bn=kn(mt,"dashboardData",st),Sn=await Gn(bn);let In=Sn.exists()?Number(((Ut=Sn.data())==null?void 0:Ut.cashBalance)||0):0;const Or=Sn.exists()?((Ft=Sn.data())==null?void 0:Ft.walletBalances)||{}:{},Qn=Number(Or[Ke]||0);Or[Ke]=Qn+lt,In=In-lt+Math.max(0,$t),await or(bn,{cashBalance:In,walletBalances:Or,lastUpdated:new Date().toISOString()});try{const Mn={id:Ve||`TX-${Date.now()}`,type:"withdraw",senderPhone:at,receiverPhone:xt,amount:de,status:"completed",createdAt:new Date,withdrawnAmount:de,commission:$t,fromWallet:Ke,senderName:le,provider:tt,reference:ut,shopName:" "};window.dispatchEvent(new CustomEvent("dashboard:external-update",{detail:{cashBalance:In,walletBalances:Or,newTransaction:Mn}}))}catch{}try{const{walletDailyLimitsService:Mn}=await se(async()=>{const{walletDailyLimitsService:Rt}=await Promise.resolve().then(()=>k0);return{walletDailyLimitsService:Rt}},void 0,import.meta.url);await Mn.updateUsage(String(Ke),lt,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Ke)}}))}catch{}}catch{}}catch{}(async()=>{try{const lt=$t;await Ot.saveUserTransaction(bt,{type:"withdraw",amount:de,withdrawnAmount:de,commission:lt,status:"completed",createdAt:new Date,senderMsisdn:at,receiverMsisdn:xt,senderName:le,walletId:Ke,fromWallet:Ke,lineId:xt,provider:tt,reference:ut,transactionId:Ve||fn});try{window.dispatchEvent(new CustomEvent("transaction-created"))}catch{}}catch{}})(),il.invalidateQueries({queryKey:["dashboardData"]}),il.invalidateQueries({queryKey:["transactions"]}),il.invalidateQueries({queryKey:["walletDailyLimits"]}),il.invalidateQueries({queryKey:["wallets"]}),il.invalidateQueries({queryKey:["user-stats"]});try{u({title:`     ${Ve||fn}`})}catch{}})()}catch(te){try{u({title:String((te==null?void 0:te.message)||"  "),variant:"destructive"})}catch{}}};v.useEffect(()=>{try{ZP.start()}catch{}return()=>{try{ZP.stop()}catch{}}},[]),v.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const G=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),$=String(localStorage.getItem("android_installed_version")||"").trim(),U=localStorage.getItem("android_last_ack_code"),Y=localStorage.getItem("android_installed_code"),te=U?Number(U):null,ne=Y?Number(Y):null,ue=G||$,me=te??ne??null;ue&&O(ue),me&&L(me);const{doc:X,getDoc:le}=await se(async()=>{const{doc:fe,getDoc:Ae}=await Promise.resolve().then(()=>Jn);return{doc:fe,getDoc:Ae}},void 0,import.meta.url),{db:ie}=await se(async()=>{const{db:fe}=await Promise.resolve().then(()=>mn);return{db:fe}},void 0,import.meta.url),de=await le(X(ie,"profiles",r.uid));if(de.exists()){const fe=de.data(),Ae=String((fe==null?void 0:fe.lastAckAndroidVersion)||(fe==null?void 0:fe.androidInstalledVersion)||(fe==null?void 0:fe.lastAckUpdateId)||"").trim(),_e=typeof(fe==null?void 0:fe.lastAckAndroidCode)=="number"?fe.lastAckAndroidCode:typeof(fe==null?void 0:fe.androidInstalledCode)=="number"?fe.androidInstalledCode:null,tt=(Bn,Kn)=>{const bt=String(Bn||"").replace(/^v/i,"").split(".").map(Ke=>parseInt(Ke,10)||0),st=String(Kn||"").replace(/^v/i,"").split(".").map(Ke=>parseInt(Ke,10)||0);for(let Ke=0;Ke<Math.max(bt.length,st.length);Ke++){const yr=bt[Ke]||0,Ot=st[Ke]||0;if(yr>Ot)return 1;if(yr<Ot)return-1}return 0};let at=!1;if(typeof _e=="number"&&typeof me=="number"?at=_e>me:typeof _e=="number"&&me==null?at=!0:Ae&&ue?at=tt(Ae,ue)>0:Ae&&!ue&&(at=!0),at){if(Ae){try{localStorage.setItem("android_installed_version",Ae)}catch{}O(Ae)}if(typeof _e=="number"){try{localStorage.setItem("android_installed_code",String(_e))}catch{}L(_e)}}else if(typeof _e=="number"&&me==null){try{localStorage.setItem("android_installed_code",String(_e))}catch{}L(_e)}}}catch{}})()},[r==null?void 0:r.uid]),v.useEffect(()=>{try{const $=String((window==null?void 0:window.__nativeAppVersion)||"").trim();$&&A($);const U=window==null?void 0:window.__nativeAppVersionCode;if(typeof U=="number"){N(U);try{localStorage.setItem("android_installed_code",String(U))}catch{}}try{$&&localStorage.setItem("android_installed_version",$)}catch{}}catch{}const G=$=>{var U,Y;try{const te=String((((U=$==null?void 0:$.detail)==null?void 0:U.version)??"")||"").trim(),ne=(Y=$==null?void 0:$.detail)==null?void 0:Y.code;te&&A(te);try{te&&localStorage.setItem("android_installed_version",te)}catch{}typeof ne=="number"&&N(ne)}catch{}};try{window.addEventListener("native-app-version",G)}catch{}return()=>{try{window.removeEventListener("native-app-version",G)}catch{}}},[]),v.useEffect(()=>{try{const G=(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android",$=String(T||"").trim();if(!G||!$||!(r!=null&&r.uid))return;(async()=>{try{const{doc:U,setDoc:Y,serverTimestamp:te}=await se(async()=>{const{doc:ue,setDoc:me,serverTimestamp:X}=await Promise.resolve().then(()=>Jn);return{doc:ue,setDoc:me,serverTimestamp:X}},void 0,import.meta.url),{db:ne}=await se(async()=>{const{db:ue}=await Promise.resolve().then(()=>mn);return{db:ue}},void 0,import.meta.url);await Y(U(ne,"profiles",r.uid),{androidInstalledVersion:$,androidInstalledAt:te()},{merge:!0});try{localStorage.setItem("android_installed_version",$)}catch{}}catch{}})()}catch{}},[T,r==null?void 0:r.uid]),v.useEffect(()=>{Re!=null&&Re.isNativePlatform&&Re.getPlatform()==="android"&&(async()=>{try{await se(()=>import("./ProtectedUserDashboard-FJjhr7Xd.js"),__vite__mapDeps([30,31,20]),import.meta.url),await se(()=>import("./UserDashboardPage-C8NukZg-.js").then($=>$.U),__vite__mapDeps([67,56,46,41,18,15,28,52,54,7,48,8,3,35,51,34,33,45,43,31,19,27,11,29,59,23,40,2]),import.meta.url),await se(()=>Promise.resolve().then(()=>hZ),void 0,import.meta.url),await se(()=>import("./ProfileSettingsPage-BvFHeoPd.js").then($=>$.b),__vite__mapDeps([56,46,41,18,15,28,52,54,7,48,8,3]),import.meta.url),await se(()=>import("./TransactionsPage-vZbFUf7u.js"),__vite__mapDeps([57,15,35,51,34,58,59,47,39,7,40,5,60,11,61,55,28,62,27,48,29,3,63,54]),import.meta.url)}catch{}})()},[]),v.useEffect(()=>{if(!t)return;const G=document.createElement("style");G.setAttribute("data-disable-pull-to-refresh","true"),G.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(G);let $=0,U=null;const Y=ne=>{var ue,me;$=((me=(ue=ne.touches)==null?void 0:ue[0])==null?void 0:me.clientY)||0,U=ne.target},te=ne=>{var fe,Ae;const ue=((Ae=(fe=ne.touches)==null?void 0:fe[0])==null?void 0:Ae.clientY)||0,me=document.scrollingElement||document.documentElement,X=me.scrollTop||window.scrollY||0,le=me.scrollHeight-me.clientHeight||0,ie=U||null,de=(()=>{let _e=ie;for(;_e&&_e!==document.body;){const at=window.getComputedStyle(_e).overflowY;if((at==="auto"||at==="scroll")&&_e.scrollHeight>_e.clientHeight)return!0;_e=_e.parentElement}return!1})();!de&&X<=0&&ue>$&&ne.cancelable&&ne.preventDefault(),!de&&X>=le&&ue<$&&ne.cancelable&&ne.preventDefault()};return document.addEventListener("touchstart",Y,{passive:!0}),document.addEventListener("touchmove",te,{passive:!1}),()=>{document.removeEventListener("touchstart",Y),document.removeEventListener("touchmove",te);try{document.head.removeChild(G)}catch{}}},[t]),v.useEffect(()=>{if(!((Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android"))return;try{const Y=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=Y,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const Y=(window.location.assign||(te=>{})).bind(window.location);window.__originalAssign=Y,window.location.assign=te=>{try{if(String(te||"").startsWith("/user/dashboard")){c("/user/dashboard");return}}catch{}try{Y(te)}catch{}}}catch{}let $=null,U=!1;return(async()=>{try{const{listenAndroidUpdates:Y}=await se(async()=>{const{listenAndroidUpdates:te}=await Promise.resolve().then(()=>xZ);return{listenAndroidUpdates:te}},void 0,import.meta.url);$=Y(te=>{if(U)return;const ne=String((te==null?void 0:te.version)||"").trim(),ue=String((te==null?void 0:te.url)||"").trim(),me=String((te==null?void 0:te.notes)||"").trim(),X=!!(te!=null&&te.force),le=typeof(te==null?void 0:te.code)=="number"?te.code:void 0,ie=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),de=String(x||ie||"").trim(),fe=(Ot,Gt)=>{const $t=String(Ot||"").replace(/^v/i,"").split(".").map(St=>parseInt(St,10)||0),ut=String(Gt||"").replace(/^v/i,"").split(".").map(St=>parseInt(St,10)||0);for(let St=0;St<Math.max($t.length,ut.length);St++){const $e=$t[St]||0,xt=ut[St]||0;if($e>xt)return 1;if($e<xt)return-1}return 0},Ae=String(T||"").trim(),_e=String(localStorage.getItem("android_installed_version")||"").trim(),tt=localStorage.getItem("android_installed_code"),at=tt?Number(tt):null,Bn=[R,C,at].filter(Ot=>typeof Ot=="number").reduce((Ot,Gt)=>Ot===void 0?Gt:Math.max(Ot,Gt),void 0),Kn=typeof le=="number"&&typeof Bn=="number"?le>Bn:void 0,bt=(()=>{const Ot=[Ae,de,_e].filter(Boolean);return Ot.length===0?"":Ot.reduce((Gt,$t)=>fe($t,Gt)>0?$t:Gt)})(),st=fe(ne,bt)>0;if(!!ue&&(!!ne||typeof le=="number")&&(Kn!==void 0?Kn:st)){const Ot="   ",Gt=`${me?me+`
`:""} : ${ne}`;_({title:Ot,message:Gt,apkUrl:ue,force:X,versionId:ne,versionCode:le}),f(!0)}else try{f(!1)}catch{}})}catch{}})(),()=>{U=!0;try{typeof $=="function"&&$()}catch{}}},[x,T]),v.useEffect(()=>{const G=U=>{const Y=(U==null?void 0:U.detail)||{};try{D.current&&(clearTimeout(D.current),D.current=null)}catch{}try{J.current&&(clearInterval(J.current),J.current=null)}catch{}b(!0),w({percent:Y.percent??null,downloaded:Y.downloaded??0,total:Y.total??0})},$=()=>{try{D.current&&(clearTimeout(D.current),D.current=null)}catch{}try{J.current&&(clearInterval(J.current),J.current=null)}catch{}b(!1),P(!0),w({percent:100,downloaded:((E==null?void 0:E.total)??(E==null?void 0:E.downloaded)??0)||0,total:(E==null?void 0:E.total)??0});try{const U=String((p==null?void 0:p.versionId)||"").trim();if(U){try{localStorage.setItem("android_last_ack_version_id",U)}catch{}try{localStorage.setItem("android_installed_version",U)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:Y,setDoc:te,serverTimestamp:ne}=await se(async()=>{const{doc:me,setDoc:X,serverTimestamp:le}=await Promise.resolve().then(()=>Jn);return{doc:me,setDoc:X,serverTimestamp:le}},void 0,import.meta.url),{db:ue}=await se(async()=>{const{db:me}=await Promise.resolve().then(()=>mn);return{db:me}},void 0,import.meta.url);await te(Y(ue,"profiles",r.uid),{lastAckAndroidVersion:U,androidInstalledVersion:U,lastAckAt:ne(),androidInstalledAt:ne()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",G),window.addEventListener("androidUpdateDownloaded",$),()=>{window.removeEventListener("androidUpdateProgress",G),window.removeEventListener("androidUpdateDownloaded",$)}},[]),v.useEffect(()=>{let G=!0;return(async()=>{var $;try{const{auth:U}=await se(async()=>{const{auth:fe}=await Promise.resolve().then(()=>mn);return{auth:fe}},void 0,import.meta.url),Y=(($=U.currentUser)==null?void 0:$.uid)||"";if(!Y)return;const{db:te}=await se(async()=>{const{db:fe}=await Promise.resolve().then(()=>mn);return{db:fe}},void 0,import.meta.url),{collection:ne,query:ue,where:me,onSnapshot:X,deleteDoc:le}=await se(async()=>{const{collection:fe,query:Ae,where:_e,onSnapshot:tt,deleteDoc:at}=await Promise.resolve().then(()=>Jn);return{collection:fe,query:Ae,where:_e,onSnapshot:tt,deleteDoc:at}},void 0,import.meta.url),ie=ue(ne(te,"pendingSmsPopups"),me("userId","==",Y),me("status","==","pending"),limit(20)),de=X(ie,fe=>{var Ae,_e,tt,at,Bn,Kn,bt,st,Ke,yr,Ot,Gt,$t;if(G)try{const ut=typeof fe.docChanges=="function"?fe.docChanges():[];console.log("Web Popup: Snapshot received",ut.length,"changes");for(const St of ut){if(St.type==="added"){const $e=St.doc.data()||{},xt=St.doc.id;console.log("Web Popup: Received document",xt,$e),(_e=(Ae=q.current)==null?void 0:Ae.has)!=null&&_e.call(Ae,xt)&&console.log("Web Popup: ID is in suppressed list",xt);try{const Qn=$e.createdAt||$e.timestamp||($e.payload||{}).createdAt||($e.payload||{}).timestamp,Mn=Qn&&typeof Qn.toMillis=="function"?Qn.toMillis():typeof $e.createdAtMs=="number"?$e.createdAtMs:typeof($e.payload||{}).createdAtMs=="number"?($e.payload||{}).createdAtMs:null;if(typeof Mn=="number"&&Mn<Date.now()-36e5){console.log("Web Popup: Cleaning up old popup",xt),le(St.doc.ref).catch(()=>{});continue}}catch{}let En=$e.amount??((tt=$e.payload)==null?void 0:tt.amount)??null,fn=$e.sender??((at=$e.payload)==null?void 0:at.sender)??"";const Yt=$e.senderName??((Bn=$e.payload)==null?void 0:Bn.senderName)??"";let zn=$e.reference??((Kn=$e.payload)==null?void 0:Kn.reference)??"";const Ve=$e.text??((bt=$e.payload)==null?void 0:bt.text)??"";let ht=$e.simNumber??((st=$e.payload)==null?void 0:st.simNumber)??"",ft=$e.simSlot??((Ke=$e.payload)==null?void 0:Ke.simSlot);ft==null&&(ft=$e.slot??((yr=$e.payload)==null?void 0:yr.slot)),ft==null&&(ft=$e.sim_slot??((Ot=$e.payload)==null?void 0:Ot.sim_slot)),ft==null&&(ft=$e.lineId??((Gt=$e.payload)==null?void 0:Gt.lineId));const Ut=ft!=null?String(ft):"",Ft=(r==null?void 0:r.uid)||"default";let lt=localStorage.getItem(`sim1Number_${Ft}`)??localStorage.getItem("sim1Number")??"",kn=localStorage.getItem(`sim2Number_${Ft}`)??localStorage.getItem("sim2Number")??"";const Gn=$e.payload||{},or=Gn.sim1Number||Gn.sim1||$e.sim1Number||"",mt=Gn.sim2Number||Gn.sim2||$e.sim2Number||"";or&&(lt=String(or).trim(),Ie(lt)),mt&&(kn=String(mt).trim(),ye(kn));let bn=ht,Sn="";Ut==="1"?(Sn="SIM 2",kn&&(bn=kn)):(Ut==="0"||!Ut)&&(Sn="SIM 1",lt&&(bn=lt));const In=$e.walletMsisdn??(($t=$e.payload)==null?void 0:$t.walletMsisdn)??"";let Or="VF-Cash";if(/Received\s*EGP/i.test(String(Ve))){Or="InstaPay";const Qn=String(Ve).match(/Received\s*EGP\s*([0-9.,]+)/i);Qn&&(En=parseFloat(String(Qn[1]).replace(/,/g,"")));const Mn=String(Ve).match(/from\s+([0-9+]+)/i);Mn&&(fn=Je(Mn[1]));const Rt=String(Ve).match(/Ref:\s*([A-Za-z0-9\-]+)/i);Rt&&(zn=String(Rt[1]).trim())}if(G){console.log("Web Popup: Opening modal for",xt),ot({amount:Number(En||0),sender:String(fn||""),senderName:Yt,reference:String(zn||""),text:Ve,simNumber:bn,simLabel:Sn,walletMsisdn:In,providerLabel:Or,popupId:xt,sim1Number:lt,sim2Number:kn}),ve(!0);try{u({title:" ",description:`   ${En}  ${fn}`})}catch{}try{Ue()}catch(Qn){console.error("PlayBell failed",Qn)}}}St.type}}catch{}});ke.current=de}catch{}})(),()=>{G=!1;try{const $=ke.current;typeof $=="function"&&$()}catch{}}},[r==null?void 0:r.uid]),v.useEffect(()=>{const G=(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android"||/android/i.test(navigator.userAgent.toLowerCase()),$=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(G||$)return;let U=!1;return(async()=>{try{const Y="0.0.0",te=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!te.ok)return;const ne=await te.json(),ue=String((ne==null?void 0:ne.version)||"0.0.0"),me=!!(ne!=null&&ne.force);if(!U&&((le,ie)=>{const de=String(le).split(".").map(Ae=>parseInt(Ae,10)||0),fe=String(ie).split(".").map(Ae=>parseInt(Ae,10)||0);for(let Ae=0;Ae<Math.max(de.length,fe.length);Ae++){const _e=de[Ae]||0,tt=fe[Ae]||0;if(_e>tt)return 1;if(_e<tt)return-1}return 0})(ue,Y)>0){if(me){try{window.location.reload()}catch{}return}try{u({title:"  ",description:` ${ue}      `})}catch{}}}catch{}})(),()=>{U=!0}},[]),v.useEffect(()=>{if(Me)try{const G=(r==null?void 0:r.uid)||"default",$=localStorage.getItem(`sim1Number_${G}`)??localStorage.getItem("sim1Number")??"",U=localStorage.getItem(`sim2Number_${G}`)??localStorage.getItem("sim2Number")??"";Ie($),ye(U)}catch{}},[Me,r==null?void 0:r.uid]);const gr=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),zr=(()=>{const G=(U,Y)=>{const te=String(U||"").replace(/^v/i,"").split(".").map(ue=>parseInt(ue,10)||0),ne=String(Y||"").replace(/^v/i,"").split(".").map(ue=>parseInt(ue,10)||0);for(let ue=0;ue<Math.max(te.length,ne.length);ue++){const me=te[ue]||0,X=ne[ue]||0;if(me>X)return 1;if(me<X)return-1}return 0},$=[T,x,gr].filter(Boolean);return $.length===0?"":$.reduce((U,Y)=>G(Y,U)>0?Y:U)})();return m.jsxs(m.Fragment,{children:[m.jsx(Il,{open:Ze,onOpenChange:()=>{},children:m.jsxs(ua,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:G=>{try{G.preventDefault()}catch{}},onEscapeKeyDown:G=>{try{G.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[m.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),m.jsx(da,{className:"text-center",children:m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:m.jsx(LE,{className:"w-6 h-6"})}),m.jsx(ha,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),m.jsx("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:m.jsxs("div",{className:"mt-4 text-center text-gray-700 leading-relaxed",children:[m.jsx("p",{children:"   .                    ."}),m.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"        ."})]})}),m.jsx("div",{className:"mt-4",children:m.jsx(vt,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:ae,children:"  "})})]})}),(()=>{try{const G=(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android",$=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),oe&&(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android"&&m.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:m.jsx("span",{className:"text-2xl",children:"!"})}),m.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),m.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),m.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:m.jsx(vt,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),h&&p&&m.jsx(Il,{open:h,onOpenChange:G=>{p!=null&&p.force||f(G)},children:m.jsxs(ua,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[m.jsxs(da,{className:"text-center",children:[m.jsx(ha,{className:"text-base md:text-lg font-bold text-gray-900",children:p.title}),m.jsx(Og,{className:"text-sm text-gray-700 whitespace-pre-line",children:p.message}),m.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:zr?`  : v${zr}`:""})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!p.force&&!g&&!S&&m.jsx(vt,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>f(!1),children:""}),!S&&m.jsx(vt,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const G=String((p==null?void 0:p.versionId)||"").trim(),$=p==null?void 0:p.versionCode;if(G)try{localStorage.setItem("android_last_ack_version_id",G)}catch{}if(typeof $=="number")try{localStorage.setItem("android_last_ack_code",String($))}catch{}if((async()=>{try{if(r!=null&&r.uid&&G){const{doc:Y,setDoc:te,serverTimestamp:ne}=await se(async()=>{const{doc:X,setDoc:le,serverTimestamp:ie}=await Promise.resolve().then(()=>Jn);return{doc:X,setDoc:le,serverTimestamp:ie}},void 0,import.meta.url),{db:ue}=await se(async()=>{const{db:X}=await Promise.resolve().then(()=>mn);return{db:X}},void 0,import.meta.url),me={lastAckAndroidVersion:G,lastAckAt:ne()};typeof $=="number"&&(me.lastAckAndroidCode=$),await te(Y(ue,"profiles",r.uid),me,{merge:!0})}}catch{}})(),(Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android"){const Y=p.apkUrl,te=`cashy://update?url=${encodeURIComponent(Y)}`;b(!0),w({percent:0,downloaded:0,total:0});try{J.current&&clearInterval(J.current),J.current=setInterval(()=>{w(ne=>{const ue=typeof(ne==null?void 0:ne.percent)=="number"?ne.percent:0,me=Le.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(ue+me))),downloaded:(ne==null?void 0:ne.downloaded)??0,total:(ne==null?void 0:ne.total)??0}})},600)}catch{}window.location.href=te;try{D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{try{Le.current=!1}catch{}try{D.current=null}catch{}},8e3)}catch{}}else{const Y=p.apkUrl;try{window.open(Y,"_blank")}catch{}}}catch{}},children:g?" ...":" "}),S&&m.jsx(vt,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((Re==null?void 0:Re.isNativePlatform)&&Re.getPlatform()==="android"){f(!1);try{const $=String((p==null?void 0:p.versionId)||"").trim();if($){try{localStorage.setItem("android_last_ack_version_id",$)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:U,setDoc:Y,serverTimestamp:te}=await se(async()=>{const{doc:X,setDoc:le,serverTimestamp:ie}=await Promise.resolve().then(()=>Jn);return{doc:X,setDoc:le,serverTimestamp:ie}},void 0,import.meta.url),{db:ne}=await se(async()=>{const{db:X}=await Promise.resolve().then(()=>mn);return{db:X}},void 0,import.meta.url),ue={lastAckAndroidVersion:$,androidInstalledVersion:$,lastAckAt:te(),androidInstalledAt:te()},me=p==null?void 0:p.versionCode;if(typeof me=="number"){ue.lastAckAndroidCode=me,ue.androidInstalledCode=me;try{localStorage.setItem("android_installed_code",String(me)),localStorage.setItem("android_last_ack_code",String(me))}catch{}}await Y(U(ne,"profiles",r.uid),ue,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),g&&m.jsxs("div",{className:"mt-3 text-center",children:[m.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:m.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((E==null?void 0:E.percent)||0)))}%`}})}),m.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((E==null?void 0:E.percent)||0),"%"]})]})]})}),!!r&&Me&&m.jsx(Il,{open:Me,onOpenChange:async G=>{G&&ve(!0)},children:m.jsxs(ua,{className:"sm:max-w-[420px] rounded-2xl shadow-xl z-[9999]",onInteractOutside:G=>{G.preventDefault()},onEscapeKeyDown:G=>{G.preventDefault()},hideClose:!0,children:[m.jsxs("div",{className:"absolute left-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground cursor-pointer z-50",onClick:async()=>{if(ve(!1),F!=null&&F.popupId)try{const{db:G}=await se(async()=>{const{db:te}=await Promise.resolve().then(()=>mn);return{db:te}},void 0,import.meta.url),{doc:$,updateDoc:U,serverTimestamp:Y}=await se(async()=>{const{doc:te,updateDoc:ne,serverTimestamp:ue}=await Promise.resolve().then(()=>Jn);return{doc:te,updateDoc:ne,serverTimestamp:ue}},void 0,import.meta.url);await U($(G,"pendingSmsPopups",F.popupId),{status:"dismissed",dismissedAt:Y()})}catch{}},children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",children:[m.jsx("path",{d:"M18 6 6 18"}),m.jsx("path",{d:"m6 6 12 12"})]}),m.jsx("span",{className:"sr-only",children:"Close"})]}),m.jsxs(da,{children:[m.jsx(ha,{children:F!=null&&F.providerLabel?m.jsxs(m.Fragment,{children:["   ",m.jsx("span",{className:"text-red-600",children:F.providerLabel})]}):"   "}),m.jsx(Og,{})]}),m.jsxs("div",{className:"text-sm",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[m.jsx(vt,{variant:(F==null?void 0:F.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(F==null?void 0:F.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>it((F==null?void 0:F.sim1Number)||Q,"SIM 1"),disabled:!(F!=null&&F.sim1Number||Q),children:(F==null?void 0:F.sim1Number)||Q||" "}),m.jsx(vt,{variant:(F==null?void 0:F.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(F==null?void 0:F.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>it((F==null?void 0:F.sim2Number)||Te,"SIM 2"),disabled:!(F!=null&&F.sim2Number||Te),children:(F==null?void 0:F.sim2Number)||Te||" "})]}),m.jsx("div",{className:"border rounded-lg p-3",children:m.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"font-bold",children:[" ",(_n=F==null?void 0:F.amount)==null?void 0:_n.toLocaleString()]}),m.jsx("div",{className:"font-mono",children:(F==null?void 0:F.sender)||""}),m.jsxs("div",{className:"font-mono",children:[(F==null?void 0:F.simLabel)&&m.jsx("span",{className:`inline-flex items-center justify-center rounded-md px-1.5 py-0.5 text-xs font-bold mr-2 ${F.simLabel==="SIM 1"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:F.simLabel}),(F==null?void 0:F.simNumber)||"-"]}),(F==null?void 0:F.senderName)&&m.jsx("div",{children:F==null?void 0:F.senderName}),(F==null?void 0:F.reference)&&m.jsx("div",{className:"font-mono",children:F==null?void 0:F.reference}),(F==null?void 0:F.walletMsisdn)&&m.jsx("div",{className:"font-mono",children:F==null?void 0:F.walletMsisdn})]}),m.jsxs("div",{className:"space-y-2 text-right",children:[m.jsx("div",{children:"  "}),m.jsx("div",{children:" "}),m.jsx("div",{children:" "}),(F==null?void 0:F.senderName)&&m.jsx("div",{children:"  "}),(F==null?void 0:F.reference)&&m.jsx("div",{children:"  "}),(F==null?void 0:F.walletMsisdn)&&m.jsx("div",{children:"  "})]})]})}),sr&&m.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[m.jsx("span",{className:"flex-1",children:"  ()"}),m.jsx("input",{type:"number",step:"0.01",min:"0",value:et,onChange:G=>wn(G.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),xe&&m.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"text-sm",children:" "}),m.jsxs("div",{className:"font-bold",children:[" ",be.toLocaleString()]})]}),m.jsx("div",{className:"mt-3",children:m.jsx("input",{type:"text",value:K,onChange:G=>ce(G.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),m.jsx("div",{className:"mt-3",children:m.jsx(vt,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{$n(!0),je(!1)},children:""})})]}),pr&&!xe&&m.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),m.jsx("div",{className:"pt-2",children:m.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var G;try{const U=String((F==null?void 0:F.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),Y=U?parseFloat(String(U[1]).replace(",",".")):Number((F==null?void 0:F.amount)||0),{auth:te}=await se(async()=>{const{auth:fe}=await Promise.resolve().then(()=>mn);return{auth:fe}},void 0,import.meta.url),ne=((G=te.currentUser)==null?void 0:G.uid)||"",ue=ne?`selectedWallet_${ne}`:"selectedWallet_default",me=localStorage.getItem(ue)||"",X=et&&et.trim()!==""?Math.max(0,parseFloat(et)):null;let le=0;if(X!=null)le=X;else try{const{merchantWalletService:fe}=await se(async()=>{const{merchantWalletService:tt}=await Promise.resolve().then(()=>gc);return{merchantWalletService:tt}},void 0,import.meta.url),Ae=await fe.getById(String(me)),_e=Ae&&Ae.defaultWithdrawCommission;if(_e!=null)le=Math.round((Number(_e)||0)*Number(Y)/1e3*100)/100;else{const{calculateCommission:tt}=await se(async()=>{const{calculateCommission:at}=await Promise.resolve().then(()=>ul);return{calculateCommission:at}},void 0,import.meta.url);le=tt(Number(Y),"receive")}}catch{const{calculateCommission:fe}=await se(async()=>{const{calculateCommission:Ae}=await Promise.resolve().then(()=>ul);return{calculateCommission:Ae}},void 0,import.meta.url);le=fe(Number(Y),"receive")}const de=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(Y)+Number(le):Number(Y);Ne(Math.round(de*100)/100),je(!0)}catch{je(!0)}},children:""})})]}),m.jsx("div",{className:"pt-3",children:m.jsx(vt,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const G=String((F==null?void 0:F.text)||""),$=G.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),U=$?parseFloat(String($[1]).replace(",",".")):Number((F==null?void 0:F.amount)||0),Y=G.match(/\s+\s+(\d+)/i),te=String((F==null?void 0:F.sender)||(Y?Y[1]:"")||""),ne=G.match(/\s*\s*([\d\.]+)/i),ue=String((F==null?void 0:F.reference)||(ne?ne[1]:String(Date.now())));Ln({...F,amount:U,sender:te,reference:ue,deferredMode:pr,debtorName:K,debtorNote:Pe})}catch{Ln()}},children:" "})})]})})]})},SR=()=>{const t=Zs(),{user:e}=Ss(),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login")||t.pathname==="/"||t.pathname.startsWith("/landing");return e&&!n?m.jsxs(m.Fragment,{children:[m.jsx(c$,{}),m.jsx(W$,{})]}):null},IR=()=>{const{user:t,loading:e}=Ss();return e?m.jsx(P0,{}):t?m.jsx(Sp,{}):m.jsx(Lg,{})},nee=()=>(v.useEffect(()=>{const t=async()=>{try{await PZ.hide()}catch(n){console.warn("Error hiding splash screen:",n)}},e=document.getElementById("app-loading-screen");e&&(e.style.opacity="0",e.style.transition="opacity 0.2s ease",setTimeout(()=>e.remove(),200)),t()},[]),m.jsx(gB,{client:il,children:m.jsx(I9,{children:m.jsxs(D5,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(Re!=null&&Re.isNativePlatform&&Re.getPlatform()==="android")&&m.jsx(AZ,{}),m.jsx(ZZ,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&XZ||Re!=null&&Re.isNativePlatform&&Re.getPlatform()==="android")?m.jsxs(_9,{children:[m.jsx(bR,{}),m.jsx(SR,{}),m.jsx(v.Suspense,{fallback:m.jsx(P0,{}),children:m.jsxs(yx,{children:[m.jsx(He,{path:"/",element:Re!=null&&Re.isNativePlatform&&Re.getPlatform()==="android"?m.jsx(IR,{}):m.jsx(jm,{})}),m.jsx(He,{path:"/dashboard-redirect",element:m.jsx(tR,{})}),m.jsx(He,{path:"/landing",element:m.jsx(jm,{})}),m.jsx(He,{path:"/subscriptions",element:m.jsx(nR,{})}),m.jsx(He,{path:"/auth",element:m.jsx(rR,{})}),m.jsx(He,{path:"/user/login",element:m.jsx(Lg,{})}),m.jsx(He,{path:"/user/forgot-password",element:m.jsx(aR,{})}),m.jsx(He,{path:"/user/register",element:m.jsx($m,{})}),m.jsx(He,{path:"/register",element:m.jsx($m,{})}),m.jsx(He,{path:"/user/account-setup",element:m.jsx(oR,{})}),m.jsx(He,{path:"/user/pending-approval",element:m.jsx(dR,{})}),m.jsx(He,{path:"/user/dashboard",element:m.jsx(Sp,{})}),m.jsx(He,{path:"/branch/:shopId/dashboard",element:m.jsx(Sp,{})}),m.jsx(He,{path:"/user/add-wallet",element:m.jsx(yR,{})}),m.jsx(He,{path:"/admin/login",element:m.jsx(hR,{})}),m.jsx(He,{path:"/admin/dashboard",element:m.jsx(fR,{})}),m.jsx(He,{path:"/admin/topups",element:m.jsx(sR,{})}),m.jsx(He,{path:"/admin/notifications",element:m.jsx(iR,{})}),m.jsx(He,{path:"/profile-settings",element:m.jsx(pR,{})}),m.jsx(He,{path:"/transactions",element:m.jsx(gR,{})}),m.jsx(He,{path:"/referrals",element:m.jsx(vR,{})}),m.jsx(He,{path:"/privacy-policy",element:m.jsx(_R,{})}),m.jsx(He,{path:"/cpanel",element:m.jsx(GP,{})}),m.jsx(He,{path:"/cpanel/login",element:m.jsx(QP,{})}),m.jsx(He,{path:"/auth-test",element:m.jsx(mR,{})}),m.jsx(He,{path:"/topup",element:m.jsx(Um,{})}),m.jsx(He,{path:"/recharge",element:m.jsx(Um,{})}),m.jsx(He,{path:"/merchant/*",element:m.jsx(uR,{})}),m.jsx(He,{path:"/dashboard/login",element:m.jsx(lR,{})}),m.jsx(He,{path:"/dashboard",element:m.jsx(cR,{})}),m.jsx(He,{path:"*",element:m.jsx(wR,{})})]})}),m.jsx(eR,{position:"right"}),m.jsx(ER,{})]}):m.jsxs(w9,{children:[m.jsx(bR,{}),m.jsx(SR,{}),m.jsx(v.Suspense,{fallback:m.jsx(P0,{}),children:m.jsxs(yx,{children:[m.jsx(He,{path:"/",element:Re!=null&&Re.isNativePlatform&&Re.getPlatform()==="android"?m.jsx(IR,{}):m.jsx(jm,{})}),m.jsx(He,{path:"/dashboard-redirect",element:m.jsx(tR,{})}),m.jsx(He,{path:"/landing",element:m.jsx(jm,{})}),m.jsx(He,{path:"/subscriptions",element:m.jsx(nR,{})}),m.jsx(He,{path:"/auth",element:m.jsx(rR,{})}),m.jsx(He,{path:"/user/login",element:m.jsx(Lg,{})}),m.jsx(He,{path:"/user/forgot-password",element:m.jsx(aR,{})}),m.jsx(He,{path:"/user/register",element:m.jsx($m,{})}),m.jsx(He,{path:"/register",element:m.jsx($m,{})}),m.jsx(He,{path:"/user/account-setup",element:m.jsx(oR,{})}),m.jsx(He,{path:"/user/pending-approval",element:m.jsx(dR,{})}),m.jsx(He,{path:"/user/dashboard",element:m.jsx(Sp,{})}),m.jsx(He,{path:"/user/add-wallet",element:m.jsx(yR,{})}),m.jsx(He,{path:"/admin/login",element:m.jsx(hR,{})}),m.jsx(He,{path:"/admin/dashboard",element:m.jsx(fR,{})}),m.jsx(He,{path:"/admin/topups",element:m.jsx(sR,{})}),m.jsx(He,{path:"/admin/notifications",element:m.jsx(iR,{})}),m.jsx(He,{path:"/profile-settings",element:m.jsx(pR,{})}),m.jsx(He,{path:"/transactions",element:m.jsx(gR,{})}),m.jsx(He,{path:"/referrals",element:m.jsx(vR,{})}),m.jsx(He,{path:"/privacy-policy",element:m.jsx(_R,{})}),m.jsx(He,{path:"/cpanel",element:m.jsx(GP,{})}),m.jsx(He,{path:"/cpanel/login",element:m.jsx(QP,{})}),m.jsx(He,{path:"/auth-test",element:m.jsx(mR,{})}),m.jsx(He,{path:"/topup",element:m.jsx(Um,{})}),m.jsx(He,{path:"/recharge",element:m.jsx(Um,{})}),m.jsx(He,{path:"/merchant/*",element:m.jsx(uR,{})}),m.jsx(He,{path:"/dashboard/login",element:m.jsx(lR,{})}),m.jsx(He,{path:"/dashboard",element:m.jsx(cR,{})}),m.jsx(He,{path:"*",element:m.jsx(wR,{})})]})}),m.jsx(eR,{position:"right"}),m.jsx(ER,{})]})]})})})),kV=v.createContext(void 0),ree=({children:t})=>{const[e,n]=v.useState(null),[r,s]=v.useState(!1),[i,o]=v.useState(null),{profile:a,user:l}=Ss();v.useEffect(()=>{try{const p=localStorage.getItem("cashier_shift_user"),_=localStorage.getItem("cashier_shift_active"),g=localStorage.getItem("cashier_shift_start_at");p&&n(JSON.parse(p)),_&&s(_==="true"),g&&o(Number(g))}catch{}},[]);const c=async()=>{if(a!=null&&a.shopId)try{const p=Ce(z,"cashierShift",a.shopId),_=await Zt(p);if(_.exists()){const g=_.data(),b=(g==null?void 0:g.shiftUser)||null,E=!!(g!=null&&g.isShiftActive),w=(g==null?void 0:g.shiftStartAt)??null;let S=b;if(!S)try{const P=localStorage.getItem("cashier_shift_user"),x=P?JSON.parse(P):null;x&&(S=x)}catch{}n(S),s(E),o(typeof w=="number"?w:w?Number(w):null);try{S?localStorage.setItem("cashier_shift_user",JSON.stringify(S)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",E?"true":"false"),w!=null&&localStorage.setItem("cashier_shift_start_at",String(w))}catch{}}else await en(p,{isShiftActive:!1,shiftStartAt:null,shiftUser:null})}catch(p){console.warn("Failed to refresh shift status:",p)}};v.useEffect(()=>{c()},[a==null?void 0:a.shopId]);const u=p=>{n(p);try{p?localStorage.setItem("cashier_shift_user",JSON.stringify(p)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const _=Ce(z,"cashierShift",a.shopId);cn(_,{shiftUser:p||null})}}catch{}},h=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const p=Date.now();o(p);try{localStorage.setItem("cashier_shift_start_at",String(p))}catch{}try{if(a!=null&&a.shopId){const _=Ce(z,"cashierShift",a.shopId);cn(_,{isShiftActive:!0,shiftStartAt:p})}}catch{}try{const g=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,b=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,E=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(g);if(w==null){const P=localStorage.getItem(b);if(P!=null){w=P;try{localStorage.setItem(g,P),localStorage.removeItem(b)}catch{}}}if(w==null&&(l!=null&&l.uid)){const P=localStorage.getItem("cashBalance"),x=localStorage.getItem("userCashBalance");if(P!=null){try{localStorage.setItem(g,P),localStorage.removeItem("cashBalance")}catch{}w=P}else if(x!=null){try{localStorage.setItem(g,x),localStorage.removeItem("userCashBalance")}catch{}w=x}}const S=localStorage.getItem(E);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),S?localStorage.setItem("shiftStartWalletBalances",S):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const _=Ce(z,"dashboardData",a.shopId),g=await Zt(_);if(g.exists()){const b=g.data(),E=Number((b==null?void 0:b.cashBalance)??0),w=(b==null?void 0:b.walletBalances)??{};try{const S=localStorage.getItem("shiftStartDrawerFunds"),P=localStorage.getItem("shiftStartWalletBalances"),x=S?parseFloat(S):0,O=P?JSON.parse(P):{},T=!S||!Number.isFinite(x)||x===0,A=!P||Object.keys(O||{}).length===0;T&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(E)?E:0)),A&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(_){console.warn("Shift start Firebase read failed:",_)}})()}catch{}},f=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const p=Ce(z,"cashierShift",a.shopId);cn(p,{isShiftActive:!1})}}catch{}};return m.jsx(kV.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:u,startShift:h,endShift:f,refreshShiftStatus:c},children:t})},Wee=()=>{const t=v.useContext(kV);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class see extends v.Component{constructor(){super(...arguments);Td(this,"state",{hasError:!1,error:null});Td(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return m.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(Ok,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,m.jsxs(vt,{onClick:this.handleReload,className:"w-full gap-2",children:[m.jsx(OE,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{IV()}catch{}const iee=()=>{const{theme:t="system"}=qk();return v.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};ok(document.getElementById("root")).render(m.jsx(see,{children:m.jsx(h$,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:m.jsx(oZ,{children:m.jsx(ree,{children:m.jsxs(QZ,{children:[m.jsx(nee,{}),m.jsx(iee,{})]})})})})}));export{Yo as $,ys as A,vt as B,VS as C,Be as D,S_ as E,iy as F,uh as G,dh as H,Zn as I,Dk as J,l8 as K,M_ as L,bc as M,vee as N,df as O,o3 as P,Ce as Q,V as R,y3 as S,DP as T,I3 as U,LE as V,jt as W,c8 as X,en as Y,Mt as Z,Zt as _,Jl as a,C4 as a$,OT as a0,z4 as a1,j4 as a2,tl as a3,xJ as a4,Fg as a5,I0 as a6,$4 as a7,dn as a8,DE as a9,aJ as aA,TM as aB,s3 as aC,A0 as aD,qe as aE,Wee as aF,se as aG,mZ as aH,OE as aI,Og as aJ,Xt as aK,pV as aL,ev as aM,V4 as aN,K4 as aO,yp as aP,TV as aQ,Re as aR,e3 as aS,D4 as aT,JG as aU,$S as aV,P0 as aW,MT as aX,yV as aY,yx as aZ,He as a_,Zs as aa,us as ab,Yr as ac,YZ as ad,Il as ae,ua as af,da as ag,ha as ah,Zu as ai,DU as aj,jv as ak,Rn as al,tn as am,Sr as an,RE as ao,Ti as ap,cn as aq,LT as ar,w3 as as,ko as at,za as au,CV as av,Bee as aw,vM as ax,lJ as ay,Pee as az,zee as b,hee as b$,x3 as b0,wJ as b1,vQ as b2,TU as b3,_J as b4,L4 as b5,oV as b6,Ql as b7,qN as b8,Dee as b9,ny as bA,h5 as bB,f5 as bC,Xi as bD,r4 as bE,_f as bF,Lee as bG,Ok as bH,sD as bI,Ng as bJ,Iee as bK,IG as bL,Ux as bM,$x as bN,bee as bO,_ee as bP,qk as bQ,bV as bR,AJ as bS,kee as bT,Nee as bU,SJ as bV,jee as bW,RZ as bX,hy as bY,Q5 as bZ,$5 as b_,XX as ba,eZ as bb,Oee as bc,nV as bd,rV as be,sV as bf,tZ as bg,tV as bh,ZX as bi,D9 as bj,_Z as bk,E3 as bl,aZ as bm,sN as bn,kS as bo,OZ as bp,Ef as bq,oN as br,cee as bs,d5 as bt,PE as bu,MX as bv,ak as bw,YJ as bx,VM as by,PM as bz,FS as c,C_ as c0,Fr as c1,fy as c2,j5 as c3,U5 as c4,Zp as c5,TN as c6,cB as c7,W5 as c8,jr as c9,Jn as cA,mn as cB,gc as cC,fw as cD,Mee as cE,Vee as cF,Fee as cG,xZ as cH,$ee as cI,k0 as cJ,fee as ca,gee as cb,ec as cc,a8 as cd,See as ce,wV as cf,_V as cg,Sl as ch,bJ as ci,TZ as cj,Ree as ck,IZ as cl,Cee as cm,SZ as cn,HR as co,aee as cp,Vt as cq,yee as cr,SM as cs,nl as ct,d3 as cu,bS as cv,kZ as cw,CZ as cx,Uee as cy,EJ as cz,jS as d,gV as e,US as f,fZ as g,JZ as h,wee as i,m as j,wZ as k,Gl as l,vV as m,gZ as n,Bt as o,De as p,Qe as q,v as r,z as s,Hi as t,Ss as u,Bl as v,Ye as w,Ps as x,JQ as y,wM as z};
//# sourceMappingURL=index-mBSeGJ8K.js.map
