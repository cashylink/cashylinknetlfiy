{"version":3,"file":"WalletsManagement-DpgCwtuT.js","sources":["../../node_modules/lucide-react/dist/esm/icons/toggle-left.js","../../node_modules/lucide-react/dist/esm/icons/toggle-right.js","../../src/components/merchant/WalletFormDialog.tsx","../../src/components/merchant/WalletsManagement.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"3\", key: \"u3jwor\" }],\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"5\", rx: \"7\", key: \"g7kal2\" }]\n];\nconst ToggleLeft = createLucideIcon(\"toggle-left\", __iconNode);\n\nexport { __iconNode, ToggleLeft as default };\n//# sourceMappingURL=toggle-left.js.map\n","/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"3\", key: \"1afu0r\" }],\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"5\", rx: \"7\", key: \"g7kal2\" }]\n];\nconst ToggleRight = createLucideIcon(\"toggle-right\", __iconNode);\n\nexport { __iconNode, ToggleRight as default };\n//# sourceMappingURL=toggle-right.js.map\n","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { useFirebaseAuth } from \"@/contexts/FirebaseAuthContext\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { SubscriptionPlan, getUserSubscription } from \"@/utils/subscriptionService\";\r\nimport { merchantWalletService } from \"@/integrations/firebase/services\";\r\nimport { walletDailyLimitsService } from \"@/utils/walletDailyLimitsService\";\r\nimport { MdRefresh } from \"react-icons/md\";\r\n\r\ninterface Wallet {\r\n  id?: string;\r\n  provider: string;\r\n  msisdn: string;\r\n  label?: string;\r\n  isActive: boolean;\r\n  dailyLimit: number;\r\n  monthlyLimit: number;\r\n  transferLimit: number;\r\n  withdrawLimit: number;\r\n  dailyTransferLimit?: number;\r\n  dailyWithdrawLimit?: number;\r\n  monthlyTransferLimit?: number;\r\n  monthlyWithdrawLimit?: number;\r\n  ownerName?: string;\r\n  nationalId?: string;\r\n}\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  wallet?: Wallet | null;\r\n  onSuccess: (newWallet?: Wallet) => void;\r\n}\r\n\r\nexport function WalletFormDialog({ open, onOpenChange, wallet, onSuccess }: Props) {\r\n  const [formData, setFormData] = useState({\r\n    provider: wallet?.provider || '',\r\n    msisdn: wallet?.msisdn || '',\r\n    dailyLimit: wallet?.dailyLimit || 0,\r\n    monthlyLimit: wallet?.monthlyLimit || 0,\r\n    transferLimit: wallet?.transferLimit || 200000,\r\n    withdrawLimit: wallet?.withdrawLimit || 200000,\r\n    dailyTransferLimit: wallet?.dailyTransferLimit || 60000,\r\n    dailyWithdrawLimit: wallet?.dailyWithdrawLimit || 100000,\r\n    monthlyTransferLimit: wallet?.monthlyTransferLimit || wallet?.transferLimit || 200000,\r\n    monthlyWithdrawLimit: wallet?.monthlyWithdrawLimit || wallet?.withdrawLimit || 200000,\r\n    ownerName: wallet?.ownerName || '',\r\n    nationalId: wallet?.nationalId || ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [validationError, setValidationError] = useState<string | null>(null);\r\n  const { user, userSubscription } = useFirebaseAuth();\r\n  const { toast } = useToast();\r\n\r\n  // تحديث قيم النموذج عند فتح الحوار في وضع التعديل أو تغيّر المحفظة\r\n  useEffect(() => {\r\n    if (open && wallet) {\r\n      setFormData({\r\n        provider: wallet.provider || '',\r\n        msisdn: wallet.msisdn || '',\r\n        dailyLimit: wallet.dailyLimit ?? 0,\r\n        monthlyLimit: wallet.monthlyLimit ?? 0,\r\n        transferLimit: wallet.transferLimit ?? 200000,\r\n        withdrawLimit: wallet.withdrawLimit ?? 200000,\r\n        dailyTransferLimit: wallet.dailyTransferLimit ?? 60000,\r\n        dailyWithdrawLimit: wallet.dailyWithdrawLimit ?? 100000,\r\n        monthlyTransferLimit: wallet.monthlyTransferLimit ?? wallet.transferLimit ?? 200000,\r\n        monthlyWithdrawLimit: wallet.monthlyWithdrawLimit ?? wallet.withdrawLimit ?? 200000,\r\n        ownerName: wallet.ownerName || '',\r\n        nationalId: wallet.nationalId || ''\r\n      });\r\n      setValidationError(null);\r\n    } else if (open && !wallet) {\r\n      setFormData({\r\n        provider: '',\r\n        msisdn: '',\r\n        dailyLimit: 0,\r\n        monthlyLimit: 0,\r\n        transferLimit: 200000,\r\n        withdrawLimit: 200000,\r\n        dailyTransferLimit: 60000,\r\n        dailyWithdrawLimit: 100000,\r\n        monthlyTransferLimit: 200000,\r\n        monthlyWithdrawLimit: 200000,\r\n        ownerName: '',\r\n        nationalId: ''\r\n      });\r\n      setValidationError(null);\r\n    }\r\n  }, [wallet, open]);\r\n\r\n  // دالة للتحقق من تطابق المزود مع البادئة\r\n  const providerMatches = (msisdn: string, provider: string) => {\r\n    const prefix = msisdn.slice(0, 3);\r\n    return (\r\n      (provider === 'vodafone_cash' && prefix === '010') ||\r\n      (provider === 'orange_cash' && prefix === '012') ||\r\n      (provider === 'etisalat_cash' && prefix === '011') ||\r\n      (provider === 'instapay' && prefix === '015')\r\n    );\r\n  };\r\n\r\n  // دالة لتحويل رموز الأخطاء إلى رسائل واضحة\r\n  const mapErrorMessage = (code: string) => {\r\n    switch (code) {\r\n      case 'INVALID_MSISDN':\r\n        return 'رقم المحفظة غير صالح.';\r\n      case 'PROVIDER_MISMATCH':\r\n        return 'المزوّد لا يطابق مقدمة الرقم.';\r\n      case 'ALREADY_EXISTS':\r\n        return 'المحفظة مضافة قبل كده.';\r\n      case 'RLS_DENIED':\r\n        return 'ليست لديك صلاحية لإضافة المحفظة.';\r\n      default:\r\n        return 'خطأ غير متوقع.';\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setValidationError(null);\r\n\r\n    // التحقق من صحة رقم الهاتف\r\n    if (!/^01\\d{9}$/.test(formData.msisdn)) {\r\n      setValidationError(\"اكتب رقم 11 رقم يبدأ بـ 01.\");\r\n      return;\r\n    }\r\n\r\n    // التحقق من تطابق المزود مع البادئة\r\n    if (!providerMatches(formData.msisdn, formData.provider)) {\r\n      setValidationError(\"مقدم الخدمة لا يتطابق مع مقدمة الرقم.\");\r\n      return;\r\n    }\r\n\r\n    // تحقق من حد باقة زيرو: لا يسمح بأكثر من 5 محافظ\r\n    if (!wallet?.id && user?.uid) {\r\n      try {\r\n        let isZeroPlan = false;\r\n        const rawLocalPlan: any = (userSubscription as any)?.subscription?.planType ?? (userSubscription as any)?.planType ?? null;\r\n        const planLocalStr = typeof rawLocalPlan === 'string' ? rawLocalPlan.toLowerCase() : null;\r\n        if (rawLocalPlan === SubscriptionPlan.ZERO || planLocalStr === 'zero' || rawLocalPlan === 0 || planLocalStr === '0') {\r\n          isZeroPlan = true;\r\n        } else {\r\n          const remoteSub: any = await getUserSubscription(user.uid);\r\n          const rawRemotePlan: any = remoteSub?.planType ?? remoteSub?.plan ?? null;\r\n          const planRemoteStr = typeof rawRemotePlan === 'string' ? rawRemotePlan.toLowerCase() : null;\r\n          isZeroPlan = rawRemotePlan === SubscriptionPlan.ZERO || planRemoteStr === 'zero' || rawRemotePlan === 0 || planRemoteStr === '0';\r\n        }\r\n\r\n        if (isZeroPlan) {\r\n          const existingWallets = await merchantWalletService.getByMerchantId(user.uid);\r\n          if (existingWallets.length >= 5) {\r\n            setValidationError(\"باقة زيرو تسمح بإضافة 5 محافظ فقط. قم بالترقية.\");\r\n            toast({\r\n              title: \"تحذير\",\r\n              description: \"لا يمكنك إضافة أكثر من 5 محافظ في باقة زيرو. قم بالترقية.\",\r\n              variant: \"destructive\"\r\n            });\r\n            return;\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.warn('Zero plan limit check failed:', err);\r\n      }\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n  try {\r\n    if (!user?.uid) {\r\n      // منع إنشاء/حفظ محفظة بدون تسجيل دخول — بدون تغييرات UI\r\n      console.warn('يجب تسجيل الدخول قبل حفظ/إضافة المحفظة');\r\n      return;\r\n    }\r\n    const data = {\r\n      ...formData,\r\n      merchantUserId: user?.uid,\r\n      isActive: true,\r\n      provider: formData.provider as any\r\n    };\r\n\r\n      console.log('Saving wallet data:', data);\r\n\r\n      if (wallet?.id) {\r\n        await merchantWalletService.update(wallet.id, data);\r\n        // ربط الحدود اليومية/الشهرية بخدمة الحدود حتى تُطبّق فورًا\r\n        await walletDailyLimitsService.setLimits(wallet.id, {\r\n          dailyTransferLimit: formData.dailyTransferLimit,\r\n          dailyWithdrawLimit: formData.dailyWithdrawLimit,\r\n          monthlyTransferLimit: formData.monthlyTransferLimit ?? formData.transferLimit,\r\n          monthlyWithdrawLimit: formData.monthlyWithdrawLimit ?? formData.withdrawLimit\r\n        });\r\n        console.log('Wallet updated successfully');\r\n        onSuccess();\r\n      } else {\r\n        // حفظ المحفظة مباشرة في Firebase\r\n        console.log('Creating new wallet...');\r\n        const walletId = await merchantWalletService.create(data);\r\n        console.log('Wallet created with ID:', walletId);\r\n        // ضبط حدود اليومية/الشهرية للمحفظة الجديدة\r\n        await walletDailyLimitsService.setLimits(walletId, {\r\n          dailyTransferLimit: formData.dailyTransferLimit,\r\n          dailyWithdrawLimit: formData.dailyWithdrawLimit,\r\n          monthlyTransferLimit: formData.monthlyTransferLimit ?? formData.transferLimit,\r\n          monthlyWithdrawLimit: formData.monthlyWithdrawLimit ?? formData.withdrawLimit\r\n        });\r\n        \r\n        // إنشاء المحفظة النهائية مع الـ ID الحقيقي\r\n        const finalWallet: Wallet = {\r\n          id: walletId,\r\n          ...data,\r\n          dailyUsage: 0,\r\n          monthlyUsage: 0\r\n        };\r\n        \r\n        console.log('Final wallet object:', finalWallet);\r\n        // إرسال المحفظة النهائية\r\n        onSuccess(finalWallet);\r\n      }\r\n\r\n      toast({\r\n        title: \"تم إضافة المحفظة\",\r\n        description: `تم ${wallet?.id ? 'تحديث' : 'إضافة'} المحفظة بنجاح`\r\n      });\r\n      \r\n      // إغلاق المودال\r\n      onOpenChange(false);\r\n      \r\n    } catch (error: any) {\r\n      console.error('Error saving wallet:', error);\r\n      \r\n      // معالجة الأخطاء حسب النوع\r\n      let errorMessage = \"حصل خطأ أثناء الإضافة\";\r\n      \r\n      if (error.code) {\r\n        errorMessage = mapErrorMessage(error.code);\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      toast({\r\n        title: \"خطأ\",\r\n        description: errorMessage,\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle>\r\n            {wallet?.id ? 'تعديل المحفظة' : 'إضافة محفظة جديدة'}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"provider\">المزود</Label>\r\n            <Select\r\n              value={formData.provider}\r\n              onValueChange={(value) => setFormData({ ...formData, provider: value })}\r\n              disabled={loading}\r\n            >\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"اختر المزود\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"vodafone_cash\">Vodafone Cash</SelectItem>\r\n                <SelectItem value=\"etisalat_cash\">Etisalat Cash</SelectItem>\r\n                <SelectItem value=\"orange_cash\">Orange Cash</SelectItem>\r\n                <SelectItem value=\"instapay\">InstaPay</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"msisdn\">رقم الهاتف</Label>\r\n          <Input\r\n            id=\"msisdn\"\r\n            placeholder=\"01xxxxxxxxx\"\r\n            value={formData.msisdn}\r\n            onChange={(e) => setFormData({ ...formData, msisdn: e.target.value })}\r\n            disabled={loading}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"ownerName\">اسم صاحب المحفظة (اختياري)</Label>\r\n          <Input\r\n            id=\"ownerName\"\r\n            type=\"text\"\r\n            value={formData.ownerName}\r\n            onChange={(e) => setFormData({ ...formData, ownerName: e.target.value })}\r\n            disabled={loading}\r\n            placeholder=\"اكتب اسم صاحب المحفظة\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"nationalId\">الرقم القومي (اختياري)</Label>\r\n          <Input\r\n            id=\"nationalId\"\r\n            type=\"text\"\r\n            value={formData.nationalId}\r\n            onChange={(e) => setFormData({ ...formData, nationalId: e.target.value })}\r\n            disabled={loading}\r\n            placeholder=\"الرقم القومي\"\r\n          />\r\n        </div>\r\n\r\n          {/* الحدود اليومية: سحب وتحويل */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"dailyWithdrawLimit\">حد السحب اليومي (ج.م)</Label>\r\n              <Input\r\n                id=\"dailyWithdrawLimit\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                value={formData.dailyWithdrawLimit}\r\n                onChange={(e) => setFormData({ ...formData, dailyWithdrawLimit: parseFloat(e.target.value) || 0 })}\r\n                disabled={loading}\r\n                placeholder=\"100000\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"dailyTransferLimit\">حد التحويل اليومي (ج.م)</Label>\r\n              <Input\r\n                id=\"dailyTransferLimit\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                value={formData.dailyTransferLimit}\r\n                onChange={(e) => setFormData({ ...formData, dailyTransferLimit: parseFloat(e.target.value) || 0 })}\r\n                disabled={loading}\r\n                placeholder=\"60000\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* الحدود الشهرية: سحب وتحويل */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"monthlyWithdrawLimit\">حد السحب الشهري (ج.م)</Label>\r\n              <Input\r\n                id=\"monthlyWithdrawLimit\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                value={formData.monthlyWithdrawLimit}\r\n                onChange={(e) => setFormData({ ...formData, monthlyWithdrawLimit: parseFloat(e.target.value) || 200000 })}\r\n                disabled={loading}\r\n                placeholder=\"200000\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"monthlyTransferLimit\">حد التحويل الشهري (ج.م)</Label>\r\n              <Input\r\n                id=\"monthlyTransferLimit\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                value={formData.monthlyTransferLimit}\r\n                onChange={(e) => setFormData({ ...formData, monthlyTransferLimit: parseFloat(e.target.value) || 200000 })}\r\n                disabled={loading}\r\n                placeholder=\"200000\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {validationError && (\r\n            <div className=\"text-red-600 text-sm mt-2\">\r\n              {validationError}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-end gap-2 pt-4\">\r\n            <Button \r\n              type=\"button\" \r\n              variant=\"outline\" \r\n              onClick={() => onOpenChange(false)}\r\n              disabled={loading}\r\n            >\r\n              إلغاء\r\n            </Button>\r\n            <Button type=\"submit\" disabled={loading} className=\"btn-primary\">\r\n              {loading ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  جارِ الإضافة…\r\n                </>\r\n              ) : (\r\n                wallet?.id ? 'تحديث المحفظة' : 'إضافة المحفظة'\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { Plus, Edit, ToggleLeft, ToggleRight, Trash2, Wallet, Printer } from \"lucide-react\";\r\nimport { useFirebaseAuth } from \"@/contexts/FirebaseAuthContext\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { WalletFormDialog } from \"./WalletFormDialog\";\r\nimport WalletPrinterDialog from \"@/components/WalletPrinterDialog\";\r\nimport { merchantWalletService } from \"@/integrations/firebase/services\";\r\nimport { walletLimitsService } from \"@/utils/walletLimitsService\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface Wallet {\r\n  id: string;\r\n  provider: string;\r\n  msisdn: string;\r\n  label?: string;\r\n  isActive: boolean;\r\n  dailyLimit: number;\r\n  monthlyLimit: number;\r\n  dailyUsage?: number;\r\n  monthlyUsage?: number;\r\n  transferLimit?: number;\r\n  withdrawLimit?: number;\r\n  transferUsage?: number;\r\n  withdrawUsage?: number;\r\n}\r\n\r\ninterface WalletsManagementProps {\r\n  showAddButton?: boolean;\r\n  showUsageBars?: boolean;\r\n  showLimitCards?: boolean;\r\n  showEditButton?: boolean;\r\n}\r\n\r\nexport function WalletsManagement({ showAddButton = true, showUsageBars = true, showLimitCards = true, showEditButton = true }: WalletsManagementProps) {\r\n  const [wallets, setWallets] = useState<Wallet[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [isWalletPrinterDialogOpen, setIsWalletPrinterDialogOpen] = useState(false);\r\n  const [editingWallet, setEditingWallet] = useState<Wallet | null>(null);\r\n  const [addButtonVisible, setAddButtonVisible] = useState<boolean>(showAddButton);\r\n  const [confirmDeleteOpen, setConfirmDeleteOpen] = useState(false);\r\n  const [targetDelete, setTargetDelete] = useState<{ id: string; msisdn: string } | null>(null);\r\n  const [selectedWalletIdForPrint, setSelectedWalletIdForPrint] = useState<string | undefined>(undefined);\r\n  const { user } = useFirebaseAuth();\r\n  const { toast } = useToast();\r\n  const navigate = useNavigate();\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      fetchWallets();\r\n    }\r\n  }, [user?.uid]);\r\n\r\n  const fetchWallets = async () => {\r\n    try {\r\n      if (!user?.uid) {\r\n        setWallets([]);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      setLoading(true);\r\n      \r\n      // تحميل المحافظ من Firebase مباشرة\r\n      const walletsData = await merchantWalletService.getByMerchantId(user.uid);\r\n      \r\n      // استخدام حقول الاستخدام مباشرة من وثيقة المحفظة\r\n      const walletsWithUsage = walletsData.map((wallet) => ({\r\n        ...wallet,\r\n        dailyUsage: wallet.dailyUsage || 0,\r\n        monthlyUsage: wallet.monthlyUsage || 0,\r\n        transferUsage: wallet.transferUsage || 0,\r\n        withdrawUsage: wallet.withdrawUsage || 0\r\n      }));\r\n\r\n      setWallets(walletsWithUsage);\r\n        \r\n    } catch (error) {\r\n      console.error('Error fetching wallets from Firebase:', error);\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"فشل في تحميل المحافظ من الخادم. يرجى المحاولة مرة أخرى.\",\r\n        variant: \"destructive\"\r\n      });\r\n      setWallets([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleWalletStatus = async (walletId: string, isActive: boolean) => {\r\n    try {\r\n      await merchantWalletService.update(walletId, { isActive: !isActive });\r\n\r\n      // تحديث الحالة المحلية\r\n      const updatedWallets = wallets.map(w => \r\n        w.id === walletId ? { ...w, isActive: !w.isActive } : w\r\n      );\r\n      setWallets(updatedWallets);\r\n\r\n      toast({\r\n        title: \"تم التحديث\",\r\n        description: `تم ${!isActive ? 'تفعيل' : 'إلغاء تفعيل'} المحفظة بنجاح`\r\n      });\r\n    } catch (error) {\r\n      console.error('Error toggling wallet status:', error);\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"فشل في تحديث حالة المحفظة\",\r\n        variant: \"destructive\"\r\n      });\r\n    }\r\n  };\r\n\r\n  const deleteWallet = async (walletId: string, msisdn: string) => {\r\n    // فتح نافذة التأكيد الأنيقة بدلاً من window.confirm\r\n    setTargetDelete({ id: walletId, msisdn });\r\n    setConfirmDeleteOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!targetDelete) return;\r\n    try {\r\n      await merchantWalletService.delete(targetDelete.id);\r\n\r\n      // تحديث القائمة المحلية\r\n      const updatedWallets = wallets.filter(w => w.id !== targetDelete.id);\r\n      setWallets(updatedWallets);\r\n\r\n      // إعادة الجلب من Firestore لضمان تزامن القائمة مع الخادم\r\n      if (user?.uid) {\r\n        await fetchWallets();\r\n      }\r\n\r\n      toast({\r\n        title: \"تم الحذف\",\r\n        description: `تم حذف المحفظة ${targetDelete.msisdn} بنجاح`,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error deleting wallet:', error);\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"فشل في حذف المحفظة\",\r\n        variant: \"destructive\"\r\n      });\r\n    } finally {\r\n      setConfirmDeleteOpen(false);\r\n      setTargetDelete(null);\r\n    }\r\n  };\r\n\r\n  const getProgressColor = (usage: number, limit: number) => {\r\n    if (limit === 0) return \"bg-muted\";\r\n    const percentage = (usage / limit) * 100;\r\n    if (percentage >= 100) return \"bg-destructive\";\r\n    if (percentage >= 80) return \"bg-warning\";\r\n    return \"bg-success\";\r\n  };\r\n\r\n  const getProviderColor = (provider: string) => {\r\n    switch (provider) {\r\n      case 'vodafone_cash': return 'bg-red-600';\r\n      case 'etisalat_cash': return 'bg-green-600';\r\n      case 'orange_cash': return 'bg-orange-600';\r\n      case 'instapay': return 'bg-blue-600';\r\n      default: return 'bg-gray-600';\r\n    }\r\n  };\r\n\r\n  const getProviderBorderColor = (provider: string) => {\r\n    switch (provider) {\r\n      case 'vodafone_cash': return '#dc2626';\r\n      case 'etisalat_cash': return '#16a34a';\r\n      case 'orange_cash': return '#ea580c';\r\n      case 'instapay': return '#2563eb';\r\n      default: return '#6b7280';\r\n    }\r\n  };\r\n\r\n  const getProviderDisplayName = (provider: string) => {\r\n    switch (provider) {\r\n      case 'vodafone_cash': return 'فودافون كاش';\r\n      case 'etisalat_cash': return 'اتصالات كاش';\r\n      case 'orange_cash': return 'أورانج كاش';\r\n      case 'instapay': return 'إنستاباي';\r\n      default: return String(provider).replace(/_/g, ' ');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-64 space-y-4\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent\"></div>\r\n        <p className=\"text-muted-foreground animate-pulse\">جاري تحميل المحافظ...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <h2 className=\"text-2xl font-bold\">محافظي</h2>\r\n          <Button \r\n            variant=\"outline\" \r\n            size=\"sm\" \r\n            onClick={fetchWallets}\r\n            disabled={loading}\r\n            className=\"flex items-center gap-2\"\r\n          >\r\n            <svg className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n            </svg>\r\n            تحديث\r\n          </Button>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button\r\n            onClick={() => setIsWalletPrinterDialogOpen(true)}\r\n            variant=\"secondary\"\r\n            className=\"flex items-center gap-2\"\r\n          >\r\n            <Printer className=\"h-4 w-4\" />\r\n            طباعة محفظة\r\n          </Button>\r\n          {showAddButton && addButtonVisible && (\r\n            <Button onClick={() => {\r\n              setDialogOpen(true);\r\n              setAddButtonVisible(false);\r\n            }} className=\"btn-primary\">\r\n              <Plus className=\"ml-2 h-4 w-4\" />\r\n              إضافة محفظة جديدة\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6\">\r\n        {wallets.map((wallet) => (\r\n          <Card key={wallet.id} className=\"card-glass hover:shadow-lg transition-all duration-300 border-l-4\" style={{borderLeftColor: getProviderBorderColor(wallet.provider)}}>\r\n            <CardHeader className=\"pb-4\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"flex flex-col gap-2\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Badge className={`${getProviderColor(wallet.provider)} text-white font-medium px-3 py-1`}>\r\n                        {getProviderDisplayName(wallet.provider)}\r\n                      </Badge>\r\n                      <div className={`w-3 h-3 rounded-full ${wallet.isActive ? 'bg-green-500' : 'bg-gray-400'}`} title={wallet.isActive ? 'نشط' : 'غير نشط'}></div>\r\n                    </div>\r\n                    <CardTitle className=\"text-xl font-bold text-primary\">{wallet.msisdn}</CardTitle>\r\n                    {wallet.label && (\r\n                      <span className=\"text-sm text-muted-foreground font-medium\">({wallet.label})</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 bg-muted/50 rounded-lg p-2\">\r\n                  {showEditButton && (\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        navigate(`/user/add-wallet?edit=1&id=${wallet.id}`);\r\n                      }}\r\n                    >\r\n                      <Edit className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  )}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => toggleWalletStatus(wallet.id, wallet.isActive)}\r\n                  >\r\n                    {wallet.isActive ? (\r\n                      <ToggleRight className=\"h-5 w-5 text-success\" />\r\n                    ) : (\r\n                      <ToggleLeft className=\"h-5 w-5 text-muted-foreground\" />\r\n                    )}\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => deleteWallet(wallet.id, wallet.msisdn)}\r\n                    className=\"text-destructive hover:text-destructive\"\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"pt-4\">\r\n              <div className=\"space-y-6\">\r\n                {/* Combined Monthly Limits Bar (Withdraw + Transfer) to match dropdown style */}\r\n                <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-3 rounded-md border border-gray-200 dark:border-gray-700 shadow-sm\">\r\n                  <div className=\"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2 text-center\">\r\n                    الحدود الشهرية: {wallet.provider} - {wallet.msisdn}\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden flex\">\r\n                    {/* Withdrawal Half */}\r\n                    <div className=\"w-1/2 bg-red-200 dark:bg-red-900/50 relative\">\r\n                      <div\r\n                        className=\"bg-gradient-to-r from-red-400 to-red-600 h-2 transition-all duration-200 ease-out\"\r\n                        style={{ width: `${wallet.withdrawLimit ? Math.min(((wallet.withdrawUsage || 0) / wallet.withdrawLimit) * 100, 100) : 0}%` }}\r\n                      ></div>\r\n                    </div>\r\n                    {/* Transfer Half */}\r\n                    <div className=\"w-1/2 bg-blue-200 dark:bg-blue-900/50 relative\">\r\n                      <div\r\n                        className=\"bg-gradient-to-r from-blue-400 to-blue-600 h-2 transition-all duration-200 ease-out\"\r\n                        style={{ width: `${wallet.transferLimit ? Math.min(((wallet.transferUsage || 0) / wallet.transferLimit) * 100, 100) : 0}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center mt-1\">\r\n                    <div className=\"text-xs text-red-600 dark:text-red-400 font-medium\">\r\n                      متبقي سحب: {Math.max((wallet.withdrawLimit || 0) - (wallet.withdrawUsage || 0), 0).toLocaleString()} جنيه\r\n                    </div>\r\n                    <div className=\"text-xs text-blue-600 dark:text-blue-400 font-medium\">\r\n                      متبقي تحويل: {Math.max((wallet.transferLimit || 0) - (wallet.transferUsage || 0), 0).toLocaleString()} جنيه\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {showUsageBars && (\r\n                <div className=\"bg-muted/30 rounded-lg p-4\">\r\n                  <div className=\"flex justify-between items-center text-sm mb-3\">\r\n                    <span className=\"font-medium text-muted-foreground\">الاستخدام اليومي</span>\r\n                    <span className=\"font-bold\">{wallet.dailyUsage?.toLocaleString()} / {wallet.dailyLimit > 0 ? wallet.dailyLimit.toLocaleString() : '∞'} جنيه</span>\r\n                  </div>\r\n                  <Progress\r\n                    value={wallet.dailyLimit > 0 ? Math.min((wallet.dailyUsage || 0) / wallet.dailyLimit * 100, 100) : 0}\r\n                    className={`h-3 ${getProgressColor(wallet.dailyUsage || 0, wallet.dailyLimit)}`}\r\n                  />\r\n                  <div className=\"text-xs text-muted-foreground mt-1 text-right\">\r\n                    {wallet.dailyLimit > 0 ? ((wallet.dailyUsage || 0) / wallet.dailyLimit * 100).toFixed(1) : 0}% مستخدم\r\n                  </div>\r\n                </div>\r\n                )}\r\n                {showUsageBars && (\r\n                <div className=\"bg-muted/30 rounded-lg p-4\">\r\n                  <div className=\"flex justify-between items-center text-sm mb-3\">\r\n                    <span className=\"font-medium text-muted-foreground\">الاستخدام الشهري</span>\r\n                    <span className=\"font-bold\">{wallet.monthlyUsage?.toLocaleString()} / {wallet.monthlyLimit > 0 ? wallet.monthlyLimit.toLocaleString() : '∞'} جنيه</span>\r\n                  </div>\r\n                  <Progress\r\n                    value={wallet.monthlyLimit > 0 ? Math.min((wallet.monthlyUsage || 0) / wallet.monthlyLimit * 100, 100) : 0}\r\n                    className={`h-3 ${getProgressColor(wallet.monthlyUsage || 0, wallet.monthlyLimit)}`}\r\n                  />\r\n                  <div className=\"text-xs text-muted-foreground mt-1 text-right\">\r\n                    {wallet.monthlyLimit > 0 ? ((wallet.monthlyUsage || 0) / wallet.monthlyLimit * 100).toFixed(1) : 0}% مستخدم\r\n                  </div>\r\n                </div>\r\n                )}\r\n                \r\n                {/* حدود التحويل */}\r\n                {showLimitCards && (\r\n            <div className=\"bg-blue-50 dark:bg-blue-950/30 rounded-lg p-4 border border-blue-200 dark:border-blue-900/50\">\r\n                  <div className=\"flex justify-between items-center text-sm mb-3\">\r\n                    <span className=\"font-medium text-blue-700 dark:text-blue-400\">حد التحويل</span>\r\n                    <span className=\"font-bold text-blue-900 dark:text-blue-200\">{wallet.transferUsage?.toLocaleString() || 0} / {wallet.transferLimit?.toLocaleString() || 200000} جنيه</span>\r\n                  </div>\r\n                  <Progress\r\n                    value={wallet.transferLimit ? Math.min((wallet.transferUsage || 0) / wallet.transferLimit * 100, 100) : 0}\r\n                    className=\"h-3 bg-blue-100 dark:bg-blue-900/30\"\r\n                  />\r\n                  <div className=\"text-xs text-blue-600 dark:text-blue-400 mt-1 text-right\">\r\n                    {wallet.transferLimit ? ((wallet.transferUsage || 0) / wallet.transferLimit * 100).toFixed(1) : 0}% مستخدم\r\n                  </div>\r\n                  <div className=\"text-xs text-blue-700 dark:text-blue-300 mt-1 text-right font-medium\">\r\n                    المتبقي: {Math.max((wallet.transferLimit || 0) - (wallet.transferUsage || 0), 0).toLocaleString()} جنيه\r\n                  </div>\r\n                </div>\r\n                )}\r\n                \r\n                {/* حدود السحب */}\r\n                {showLimitCards && (\r\n                <div className=\"bg-green-50 dark:bg-green-950/30 rounded-lg p-4 border border-green-200 dark:border-green-900/50\">\r\n                  <div className=\"flex justify-between items-center text-sm mb-3\">\r\n                    <span className=\"font-medium text-green-700 dark:text-green-400\">حد السحب</span>\r\n                    <span className=\"font-bold text-green-900 dark:text-green-200\">{wallet.withdrawUsage?.toLocaleString() || 0} / {wallet.withdrawLimit?.toLocaleString() || 200000} جنيه</span>\r\n                  </div>\r\n                  <Progress\r\n                    value={wallet.withdrawLimit ? Math.min((wallet.withdrawUsage || 0) / wallet.withdrawLimit * 100, 100) : 0}\r\n                    className=\"h-3 bg-green-100 dark:bg-green-900/30\"\r\n                  />\r\n                  <div className=\"text-xs text-green-600 dark:text-green-400 mt-1 text-right\">\r\n                    {wallet.withdrawLimit ? ((wallet.withdrawUsage || 0) / wallet.withdrawLimit * 100).toFixed(1) : 0}% مستخدم\r\n                  </div>\r\n                  <div className=\"text-xs text-green-700 dark:text-green-300 mt-1 text-right font-medium\">\r\n                    المتبقي: {Math.max((wallet.withdrawLimit || 0) - (wallet.withdrawUsage || 0), 0).toLocaleString()} جنيه\r\n                  </div>\r\n                </div>\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n\r\n        {wallets.length === 0 && (\r\n          <Card className=\"card-glass\">\r\n            <CardContent className=\"text-center py-16\">\r\n              <div className=\"bg-muted/30 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center\">\r\n                <Plus className=\"w-12 h-12 text-muted-foreground\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-semibold mb-2\">لا توجد محافظ</h3>\r\n              <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\r\n                ابدأ بإضافة محفظتك الأولى لتتمكن من استقبال المدفوعات من عملائك\r\n              </p>\r\n              {showAddButton && addButtonVisible && (\r\n                <Button \r\n                  onClick={() => {\r\n                    setDialogOpen(true);\r\n                    setAddButtonVisible(false);\r\n                  }} \r\n                  size=\"lg\"\r\n                  className=\"btn-primary px-8\"\r\n                >\r\n                  <Plus className=\"w-5 h-5 ml-2\" />\r\n                  إضافة محفظة جديدة\r\n                </Button>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n\r\n      <WalletFormDialog\r\n        open={dialogOpen}\r\n        onOpenChange={(open) => {\r\n          setDialogOpen(open);\r\n          if (!open) {\r\n            setEditingWallet(null);\r\n            setAddButtonVisible(true);\r\n          }\r\n        }}\r\n        wallet={editingWallet}\r\n        onSuccess={(newWallet) => {\r\n           console.log('onSuccess called with:', newWallet);\r\n           console.log('editingWallet:', editingWallet);\r\n           \r\n           if (newWallet && !editingWallet) {\r\n             console.log('Adding new wallet to list');\r\n             // إضافة المحفظة الجديدة فوراً للقائمة\r\n             setWallets(prevWallets => {\r\n               const updated = [...prevWallets, newWallet];\r\n               console.log('Updated wallets list:', updated);\r\n               return updated;\r\n             });\r\n           } else {\r\n             console.log('Refreshing wallets from Firebase');\r\n             // في حالة التحديث، إعادة تحميل البيانات من Firebase\r\n             fetchWallets();\r\n           }\r\n           setDialogOpen(false);\r\n           setEditingWallet(null);\r\n           setAddButtonVisible(true);\r\n         }}\r\n      />\r\n\r\n      {/* نافذة تأكيد الحذف الأنيقة */}\r\n      <Dialog open={confirmDeleteOpen} onOpenChange={setConfirmDeleteOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>تأكيد حذف المحفظة</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              هل أنت متأكد من حذف المحفظة {targetDelete?.msisdn}؟ هذا الإجراء لا يمكن التراجع عنه.\r\n            </p>\r\n            <div className=\"flex justify-end gap-2\">\r\n              <Button variant=\"outline\" onClick={() => setConfirmDeleteOpen(false)}>إلغاء</Button>\r\n              <Button variant=\"destructive\" onClick={confirmDelete}>حذف</Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <WalletPrinterDialog\r\n        isOpen={isWalletPrinterDialogOpen}\r\n        onClose={() => {\r\n          setIsWalletPrinterDialogOpen(false);\r\n          setSelectedWalletIdForPrint(undefined);\r\n        }}\r\n        wallets={wallets.map(w => ({\r\n          id: w.id,\r\n          name: w.label || w.msisdn,\r\n          phone: w.msisdn,\r\n          walletProvider: w.provider\r\n        }))}\r\n        initialWalletId={selectedWalletIdForPrint}\r\n      />\r\n    </div>\r\n  );\r\n}"],"names":["__iconNode","ToggleLeft","createLucideIcon","ToggleRight","WalletFormDialog","open","onOpenChange","wallet","onSuccess","formData","setFormData","useState","loading","setLoading","validationError","setValidationError","user","userSubscription","useFirebaseAuth","toast","useToast","useEffect","providerMatches","msisdn","provider","prefix","mapErrorMessage","code","handleSubmit","e","isZeroPlan","rawLocalPlan","_a","planLocalStr","SubscriptionPlan","remoteSub","getUserSubscription","rawRemotePlan","planRemoteStr","merchantWalletService","err","data","walletDailyLimitsService","walletId","finalWallet","error","errorMessage","Dialog","jsxs","DialogContent","jsx","DialogHeader","DialogTitle","Label","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","Input","Button","Fragment","WalletsManagement","showAddButton","showUsageBars","showLimitCards","showEditButton","wallets","setWallets","dialogOpen","setDialogOpen","isWalletPrinterDialogOpen","setIsWalletPrinterDialogOpen","editingWallet","setEditingWallet","addButtonVisible","setAddButtonVisible","confirmDeleteOpen","setConfirmDeleteOpen","targetDelete","setTargetDelete","selectedWalletIdForPrint","setSelectedWalletIdForPrint","navigate","useNavigate","fetchWallets","walletsWithUsage","toggleWalletStatus","isActive","updatedWallets","w","deleteWallet","confirmDelete","getProgressColor","usage","limit","percentage","getProviderColor","getProviderBorderColor","getProviderDisplayName","Printer","Plus","Card","CardHeader","Badge","CardTitle","Edit","Trash2","CardContent","Progress","_b","_c","_d","_e","_f","newWallet","prevWallets","updated","WalletPrinterDialog"],"mappings":"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","x_google_ignoreList":[0,1]}