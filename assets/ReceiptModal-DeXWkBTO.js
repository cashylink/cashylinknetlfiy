import{i as Ce,u as ke,R as d,j as t,a5 as q,a6 as J,a7 as K,a8 as Z,ai as Pe,C as Ee,e as Me,M as oe,B as f,aj as Ie,D as ce,E as me,F as pe,ak as De,al as ze,am as Te,an as Re,w as _e,x as Le}from"./index-CWTdLx7E.js";import{f as b}from"./formatters-Bxe0AUcL.js";import{S as xe}from"./separator-B89kj3pz.js";import{B as k}from"./badge-Dkne3qZK.js";import{M as A}from"./MasterPinDialog-BwapmE19.js";import{f as Ae,v as Oe,c as Fe}from"./whatsappService-ayZ9AmBf.js";import{h as fe}from"./html2canvas.esm-BfYXEYrK.js";import{T as We}from"./trash-2-BKuXmImO.js";import{C as Be}from"./circle-check-big-C85Ma9-W.js";import{P as Ue}from"./printer-B9qPCfB-.js";import{D as Ve}from"./download-HXBKTopl.js";import"./circle-alert-NzwhoXxt.js";const lt=({isOpen:he,onClose:P,transaction:e,onPrint:Ge,onDelete:O,onComplete:F})=>{const{toast:o}=Ce(),{profile:c}=ke(),m=(c==null?void 0:c.userId)||void 0,ue=d.useMemo(()=>{try{const s=m?`receiptNoteEnabled_${m}`:"receiptNoteEnabled",r=localStorage.getItem(s)??localStorage.getItem("receiptNoteEnabled");return r===null?!0:r==="true"}catch{return!0}},[m]),[ge,E]=d.useState(!1),[W,M]=d.useState(""),[B,I]=d.useState(!1),[ee,w]=d.useState(""),[te,se]=d.useState(!1),[ye,j]=d.useState(!1),[U,N]=d.useState(""),[V,$]=d.useState(!1),[re,u]=d.useState(""),G=d.useRef(null),[le,ie]=d.useState(!1),[g,H]=d.useState("");if(d.useEffect(()=>{if(!(e!=null&&e.receiver_msisdn))return;const s=x=>{let n=String(x||"").replace(/[^0-9]/g,"");return n.startsWith("20")&&(n="0"+n.slice(2)),n.startsWith("0")?n:/^(10|11|12|15)/.test(n)?"0"+n:n},r=m||"default",i=localStorage.getItem(`sim1Number_${r}`)||localStorage.getItem("sim1Number"),l=localStorage.getItem(`sim2Number_${r}`)||localStorage.getItem("sim2Number"),a=s(e.receiver_msisdn);i&&s(i)===a?H("SIM 1"):l&&s(l)===a?H("SIM 2"):H("")},[e,m]),!e)return null;const be=s=>{switch(s){case"completed":return t.jsx(k,{className:"bg-green-100 text-green-800 border-green-200",children:"ููุชููุฉ"});case"pending":return t.jsx(k,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"ููุฏ ุงููุฑุงุฌุนุฉ"});case"failed":return t.jsx(k,{className:"bg-red-100 text-red-800 border-red-200",children:"ูุงุดูุฉ"});default:return t.jsx(k,{className:"bg-gray-100 text-gray-800 border-gray-200",children:s})}},ae=s=>s==="transfer"?"ุชุญููู":"ุณุญุจ",ne=(()=>{const s=e!=null&&e.title?String(e.title):ae(e.type),r=String((e==null?void 0:e.provider)||"").toLowerCase(),i=String((e==null?void 0:e.note)||"").toLowerCase(),l=r.includes("vodafone")?"vf-cash":r.includes("instapay")?"instapay":"",a=i.includes("vodafone")?"vf-cash":i.includes("instapay")?"instapay":"",x=l||a;return s==="ุณุญุจ"&&x?`ุณุญุจ ${x}`:s})(),we=s=>new Date(s).toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=s=>{if((s==null?void 0:s.totalCharged)!==void 0&&(s==null?void 0:s.totalCharged)!==null)return Number(s.totalCharged)||0;const r=Number((s==null?void 0:s.commission)||0),i=Number((s==null?void 0:s.fee)||0),l=Number(s.amount||0),a=s==null?void 0:s.commissionMode,x=(s==null?void 0:s.type)||"transfer";return String(x)==="withdraw"||a==="add"?l+r+i:l},ve=X(e),je=s=>{switch(s){case"completed":return"ููุชููุฉ";case"pending":return"ููุฏ ุงููุฑุงุฌุนุฉ";case"failed":return"ูุงุดูุฉ";default:return s}},Ne=()=>{try{const s=je(e.status),r=ne,i=(e==null?void 0:e.shopName)||"ุบูุฑ ูุญุฏุฏ",l=(e==null?void 0:e.cashierName)||"",a=e.reference||e.id,x=new Date(e.createdAt).toLocaleString("ar-EG"),n=b(e.amount),D=b(e.commission||0),S=b((e==null?void 0:e.fee)||0),z=b(X(e)),C=String(e.note||"").trim(),T=String((c==null?void 0:c.phone)||"").trim(),Q=(()=>{try{const Y=m?`receiptNoteEnabled_${m}`:"receiptNoteEnabled",_=localStorage.getItem(Y)??localStorage.getItem("receiptNoteEnabled");return _===null?!0:_==="true"}catch{return!0}})(),p=e.type==="withdraw"?"#dc2626":"#16a34a",R=`
        <div class="receipt-root" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 520px; margin: 0 auto; padding: 24px; background: #fff; direction: rtl;">
          <div style="text-align: center; margin-bottom: 20px; border-bottom: 2px solid ${p}; padding-bottom: 16px;">
            <h1 style="color: ${p}; margin: 0 0 6px 0; font-size: 26px;">ุฅูุตุงู ${r}</h1>
            <p style="color: #666; font-size: 14px; margin: 0;">ุฑูู ุงููุฑุฌุน: ${a}</p>
            <p style="color: #888; font-size: 13px; margin: 6px 0 0 0;">${x}</p>
          </div>

          <div style="background: #f8fafc; border-radius: 12px; padding: 16px; margin-bottom: 16px;">
            <h3 style="color: #1e293b; margin: 0 0 12px 0; font-size: 16px;">ูุนูููุงุช ุงููุญู</h3>
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <span style="font-weight: 600; color: #475569;">ุงุณู ุงููุญู:</span>
              <span style="color: #1e293b;">${i}</span>
            </div>
            ${l?`<div style="display:flex; justify-content:space-between;">
              <span style="font-weight:600; color:#475569;">ุงููุงุดูุฑ:</span>
              <span style="color:#1e293b;">${l}</span>
            </div>`:""}
          </div>

          <div style="background: #fff; border: 2px solid #e2e8f0; border-radius: 12px; padding: 16px;">
            <h3 style="color: #1e293b; margin: 0 0 12px 0; font-size: 16px;">ุชูุงุตูู ุงููุนุงููุฉ</h3>

            <div style="display:flex; justify-content:space-between; margin-bottom:8px; padding:6px 0; border-bottom:1px solid #f1f5f9;">
              <span style="font-weight:600; color:#475569;">ููุน ุงููุนุงููุฉ:</span>
              <span style="color:${p}; font-weight:600;">${r}</span>
            </div>

            <div style="display:flex; justify-content:space-between; margin-bottom:8px; padding:6px 0; border-bottom:1px solid #f1f5f9;">
              <span style="font-weight:600; color:#475569;">ุงูุญุงูุฉ:</span>
              <span style="color:${e.status==="completed"?"#16a34a":e.status==="pending"?"#ca8a04":"#dc2626"}; font-weight:600;">${s}</span>
            </div>

            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">ูู:</span>
              <span style="font-family:monospace;">${e.sender_msisdn}</span>
            </div>
            ${e!=null&&e.senderName?`<div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">ุงุณู ุงูุฑุงุณู:</span>
              <span>${e.senderName}</span>
            </div>`:""}
            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">ุฅูู:</span>
              <div style="display:flex; align-items:center;">
                ${g?`<span style="background:${g==="SIM 1"?"#eff6ff":"#f3e8ff"}; color:${g==="SIM 1"?"#1d4ed8":"#7e22ce"}; padding:2px 6px; border-radius:4px; font-size:11px; margin-left:6px; border:1px solid ${g==="SIM 1"?"#bfdbfe":"#e9d5ff"}; font-weight:bold;">${g}</span>`:""}
                <span style="font-family:monospace;">${e.receiver_msisdn}</span>
              </div>
            </div>

            <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">ุงููุจูุบ:</span>
              <span style="font-weight:600;" dir="ltr"><span style="font-family:monospace;">${n}</span>&nbsp;ุฌููู</span>
            </div>
            ${e.commission>0?`<div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">ุงูุนูููุฉ:</span>
              <span dir="ltr"><span style="font-family:monospace;">${D}</span>&nbsp;ุฌููู</span>
            </div>`:""}
            ${((e==null?void 0:e.fee)||0)>0?`<div style="display:flex; justify-content:space-between; margin-bottom:8px;">
              <span style="font-weight:600; color:#475569;">ุงูุฑุณูู:</span>
              <span dir="ltr"><span style="font-family:monospace;">${S}</span>&nbsp;ุฌููู</span>
            </div>`:""}

            <div style="display:flex; justify-content:space-between; margin-top:10px; font-weight:700; font-size:16px;">
              <span>ุงูุฅุฌูุงูู:</span>
              <span style="color:${p};" dir="ltr"><span style="font-family:monospace;">${z}</span>&nbsp;ุฌููู</span>
            </div>
          </div>
          ${Q&&C?`
          <div style="background:#eff6ff; border:1px solid #bfdbfe; border-radius:10px; padding:12px; margin-top:12px; display:flex; gap:8px;">
            <div style="color:${p};">๐๏ธ</div>
            <div style="color:${p}; font-size:13px; word-break:break-word;">${C}</div>
          </div>
          `:""}
          <div style="margin-top: 16px; font-size: 13px; color: #475569; border-top: 1px solid #e2e8f0; padding-top: 10px; text-align: center;">
            ${T?`
            <div>
              ูู ุญุงูุฉ ูุฌูุฏ ุฃู ุดููู ุจุฑุฌุงุก ุงูุชูุงุตู ูุน ูุฏูุฑ ุงููุญู ุนูู ุฑูู: <span style="direction:ltr; unicode-bidi:embed; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;">${T}</span>
            </div>
            `:""}
            <div style="margin-top:6px;">
              <a href="https://cashy-link.com" target="_blank" style="font-size: 12px; color: ${p}; text-decoration: none; direction: ltr; unicode-bidi: embed; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;">cashy-link.com</a>
            </div>
          </div>
        </div>
      `,v=window.open("","_blank");if(!v)return;v.document.write(`
        <html>
          <head>
            <title>ุฅูุตุงู ุงููุนุงููุฉ - ${a}</title>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <style>
              body { margin: 0; padding: 20px; background: #f8fafc; }
              @media print { body { background: white; } }
              .receipt-root, .receipt-root * { color: ${p} !important; }
            </style>
          </head>
          <body dir="rtl">
            ${R}
          </body>
        </html>
      `),v.document.close(),v.print()}catch{}},$e=async()=>{var s;try{const r=e.type==="transfer"?e.receiver_msisdn:e.sender_msisdn,i=Ae(r);if(!Oe(i)){o({title:"ุฑูู ูุงุชุณุงุจ ุบูุฑ ุตุงูุญ",description:`ุงูุฑูู: ${r}`,duration:3e3});return}const l=G.current;if(!l){o({title:"ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุฅูุตุงู",description:"ุฃุนุฏ ูุชุญ ุงูุฅูุตุงู ุซู ุญุงูู ุงููุดุงุฑูุฉ",duration:3e3});return}try{await((s=document.fonts)==null?void 0:s.ready)}catch{}const a=1080,x=Math.max(2,Math.ceil(window.devicePixelRatio||1)),n=await fe(l,{scale:x,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:l.scrollWidth,height:l.scrollHeight,scrollX:0,scrollY:0});let D=n;try{const h=n.height/n.width,y=document.createElement("canvas");y.width=a,y.height=Math.round(a*h);const L=y.getContext("2d");L&&(L.imageSmoothingEnabled=!0,L.imageSmoothingQuality="high",L.drawImage(n,0,0,y.width,y.height),D=y)}catch{}const S=await new Promise(h=>D.toBlob(h,"image/png"));if(!S){o({title:"ุชุนุฐุฑ ุฅูุดุงุก ุงูุตูุฑุฉ",description:"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅูุดุงุก ุตูุฑุฉ ุงูุฅูุตุงู",duration:3e3});return}const z=`receipt-${e.reference||e.id}.png`,C=new File([S],z,{type:"image/png"});if(navigator.canShare&&navigator.canShare({files:[C]}))try{await navigator.share({files:[C],title:"ุตูุฑุฉ ุฅูุตุงู",text:"ุตูุฑุฉ ุฅูุตุงู ุงููุนุงููุฉ"})}catch{}const T=De(),Q=`public/receipts/${z}`,p=ze(T,Q);await Te(p,S,{contentType:"image/png"});const R=await Re(p),v=ae(e.type),Y=e.reference||e.id,_=X(e),de=`ุฅูุตุงู ${v} - ุงูุฅุฌูุงูู: ${_}ยุฌููู - ุงููุฑุฌุน: ${Y||""}`;try{const h=`${de}
${R}`,y=Fe(i,h);window.open(y,"_blank")}catch{}try{await _e(Le,"sendWhatsAppImage")({to:i,imageUrl:R,caption:de}),o({title:"ุชู ูุชุญ ูุงุชุณุงุจ ูุฅุฑุณุงู ุงูุตูุฑุฉ ุชููุงุฆููุง",description:"ุชู ูุชุญ ุงููุญุงุฏุซุฉ ูุน ุงููุณุชููุฏ ูุณูุตูู ุงูุฅูุตุงู ุฃูุถูุง",duration:3e3})}catch{o({title:"ุชุนุฐุฑ ุฅุฑุณุงู ุงูุตูุฑุฉ ุนุจุฑ ูุงุชุณุงุจ ุชููุงุฆููุง",description:"ุชู ูุชุญ ุงููุญุงุฏุซุฉุ ุชุญูู ูู ุฅุนุฏุงุฏุงุช Cloud API ูุฅุฑุณุงู ุชููุงุฆู",duration:4e3})}}catch{o({title:"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงููุดุงุฑูุฉ",description:"ุฌุฑูุจ ูุฌุฏุฏุงู",duration:3e3})}},Se=async()=>{try{const s=G.current;if(!s){o({title:"ุชุนุฐูุฑ ุญูุธ ุงูุฅูุตุงู",description:"ูู ูุชู ุงูุนุซูุฑ ุนูู ูุญุชูู ุงูุฅูุตุงู",duration:3e3});return}const i=(await fe(s,{scale:2,useCORS:!0,backgroundColor:"#ffffff"})).toDataURL("image/png"),l=`receipt-${e.reference||e.id}.png`,a=document.createElement("a");a.href=i,a.download=l,document.body.appendChild(a),a.click(),document.body.removeChild(a),o({title:"ุชู ุญูุธ ุงูุฅูุตุงู",description:`ุชู ุญูุธ ุงูุตูุฑุฉ: ${l}`,duration:2e3})}catch{o({title:"ูุดู ุญูุธ ุงูุฅูุตุงู",description:"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุตูุฑุฉ",duration:3e3})}};return t.jsxs(t.Fragment,{children:[t.jsx(q,{open:he,onOpenChange:P,children:t.jsxs(J,{className:"max-w-md md:max-w-sm w-full mx-auto overflow-hidden md:scale-[0.95] lg:scale-[0.9]",dir:"rtl",children:[t.jsx(K,{className:"text-center",children:t.jsxs(Z,{className:`flex items-center justify-center gap-2 text-xl md:text-lg font-bold ${e.type==="withdraw"?"text-red-600":"text-green-600"}`,children:[t.jsx(Pe,{className:"h-6 w-6"}),"ุฅูุตุงู ุงููุนุงููุฉ"]})}),t.jsx("div",{ref:G,children:t.jsx(Ee,{className:"border-2 border-primary/20 overflow-hidden rounded-xl",children:t.jsxs(Me,{className:"p-6 md:p-4 space-y-4 md:space-y-3 break-words md:text-[13px]",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h3",{className:`text-lg font-bold ${e.type==="withdraw"?"text-red-600":"text-green-600"}`,children:"cashy link"}),t.jsxs("p",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:["ุฅูุตุงู ",ne]}),be(e.status),(e==null?void 0:e.shopName)&&t.jsxs("p",{className:`text-sm font-semibold ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:["ุงููุญู: ",e.shopName]}),(e==null?void 0:e.cashierName)&&t.jsxs("p",{className:`text-xs ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:["ุงููุงุดูุฑ: ",e.cashierName]})]}),t.jsx(xe,{}),t.jsxs("div",{className:"space-y-3 break-words",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุฑูู ุงููุนุงููุฉ:"}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.id})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ูู:"}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.sender_msisdn})]}),(e==null?void 0:e.senderName)&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุงุณู ุงูุฑุงุณู:"}),t.jsx("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:e.senderName})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุฅูู:"}),t.jsxs("div",{className:"flex items-center gap-2",children:[g&&t.jsx(k,{variant:"outline",className:`${g==="SIM 1"?"bg-blue-50 text-blue-700 border-blue-200":"bg-purple-50 text-purple-700 border-purple-200"} h-5 px-1.5 text-[10px]`,children:g}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.receiver_msisdn})]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุงููุจูุบ:"}),t.jsxs("span",{className:`text-sm font-semibold ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(e.amount)}),"ยุฌููู"]})]}),e.commission>0&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุงูุนูููุฉ:"}),t.jsxs("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(e.commission||0)}),"ยุฌููู"]})]}),((e==null?void 0:e.fee)||0)>0&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุงูุฑุณูู:"}),t.jsxs("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(e.fee||0)}),"ยุฌููู"]})]}),t.jsx(xe,{}),t.jsxs("div",{className:"flex justify-between items-center font-bold text-lg md:text-base",children:[t.jsx("span",{children:"ุงูุฅุฌูุงูู:"}),t.jsxs("span",{className:`${e.type==="withdraw"?"text-red-600":"text-green-600"}`,dir:"ltr",children:[t.jsx("span",{className:"font-mono",children:b(ve)}),"ยุฌููู"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุงูุชุงุฑูุฎ:"}),t.jsx("span",{className:`text-sm ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:we(e.createdAt)})]}),e.reference&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:`text-sm font-medium ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:"ุงููุฑุฌุน:"}),t.jsx("span",{className:`text-sm font-mono break-all ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,dir:"ltr",children:e.reference})]})]}),ue&&String(e.note||"").trim()&&t.jsxs("div",{className:`p-3 rounded-md border flex gap-2 ${e.type==="withdraw"?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:[t.jsx(oe,{className:`h-4 w-4 ${e.type==="withdraw"?"text-red-600":"text-green-600"}`}),t.jsx("div",{className:`text-sm break-words ${e.type==="withdraw"?"text-red-800":"text-green-800"}`,children:String(e.note||"").trim()})]}),t.jsxs("div",{className:`pt-2 mt-2 border-t text-xs text-center ${e.type==="withdraw"?"text-red-700":"text-green-700"}`,children:[String((c==null?void 0:c.phone)||"").trim()&&t.jsxs("div",{children:["ูู ุญุงูุฉ ูุฌูุฏ ุฃู ุดููู ุจุฑุฌุงุก ุงูุชูุงุตู ูุน ูุฏูุฑ ุงููุญู ุนูู ุฑูู: ",t.jsx("span",{dir:"ltr",className:"font-mono",children:String((c==null?void 0:c.phone)||"").trim()})]}),t.jsx("a",{href:"https://cashy-link.com",target:"_blank",rel:"noopener noreferrer",dir:"ltr",className:`block mt-1 hover:underline font-mono ${e.type==="withdraw"?"text-red-600":"text-green-600"}`,children:"cashy-link.com"})]})]})})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 pt-3",children:[O&&t.jsx(f,{onClick:()=>{w(""),M(""),I(!1),E(!0)},variant:"destructive",size:"sm","aria-label":"ุญุฐู ุงูุฅูุตุงู",title:"ุญุฐู ุงูุฅูุตุงู",className:"w-full h-9 px-2 justify-center",children:t.jsx(We,{className:"h-4 w-4"})}),F&&e.status==="pending"&&t.jsxs(f,{onClick:()=>{u(""),N(""),$(!1),j(!0)},className:"w-full h-9 px-3 bg-emerald-600 hover:bg-emerald-700 text-white",size:"sm",children:[t.jsx(Be,{className:"h-4 w-4 mr-1"}),"ุฅููุงู ุงููุนุงููุฉ"]}),t.jsx(f,{onClick:$e,className:"w-full h-9 px-2 bg-green-600 hover:bg-green-700 text-white justify-center",size:"sm","aria-label":"ูุดุงุฑูุฉ ุนุจุฑ ูุงุชุณุงุจ",title:"ูุดุงุฑูุฉ ุนุจุฑ ูุงุชุณุงุจ",children:t.jsx(oe,{className:"h-4 w-4"})}),t.jsx(f,{onClick:Ne,className:"w-full h-9 px-2 bg-blue-600 hover:bg-blue-700 text-white justify-center",size:"sm","aria-label":"ุทุจุงุนุฉ ุงูุฅูุตุงู",title:"ุทุจุงุนุฉ ุงูุฅูุตุงู",children:t.jsx(Ue,{className:"h-4 w-4"})}),t.jsx(f,{onClick:Se,variant:"outline",size:"sm","aria-label":"ุญูุธ ุงูุฅูุตุงู",title:"ุญูุธ ุงูุฅูุตุงู",className:"w-full h-9 px-2 justify-center",children:t.jsx(Ve,{className:"h-4 w-4"})}),t.jsx(f,{onClick:P,variant:"outline",size:"sm","aria-label":"ุฅุบูุงู",title:"ุฅุบูุงู",className:"w-full h-9 px-2 justify-center",children:t.jsx(Ie,{className:"h-4 w-4"})})]})]})}),t.jsx(q,{open:ge,onOpenChange:E,children:t.jsxs(J,{className:"sm:max-w-md",dir:"rtl",children:[t.jsx(K,{children:t.jsxs(Z,{className:"flex items-center gap-2 text-center justify-center",children:[t.jsx(ce,{className:"h-5 w-5 text-red-600"}),"ุชุฃููุฏ ุญุฐู ุงููุนุงููุฉ"]})}),t.jsx("div",{className:"text-center text-sm text-gray-600 mb-4",children:"ุฃุฏุฎู ุงูุฑูู ุงูุณุฑู ูุชุฃููุฏ ุญุฐู ูุฐู ุงููุนุงููุฉ"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"deletePin",className:"text-right block",children:"ุงูุฑูู ุงูุณุฑู ุงูุฑุฆูุณู"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"deletePin",type:B?"text":"password",autoComplete:"off",value:W,onChange:s=>M(s.target.value),placeholder:"ุฃุฏุฎู ุงูุฑูู ุงูุณุฑู",className:"pr-10 w-full border rounded-md h-10 px-3",dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>I(!B),className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:B?t.jsx(me,{className:"h-4 w-4"}):t.jsx(pe,{className:"h-4 w-4"})})]})]}),ee&&t.jsx("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:ee}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx(f,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{E(!1),M(""),w(""),I(!1)},disabled:te,children:"ุฅูุบุงุก"}),t.jsx(f,{type:"button",className:"flex-1 bg-red-600 hover:bg-red-700",disabled:te,onClick:async()=>{w(""),se(!0);try{if(!await A.hasMasterPin(m)){w("ุงูุฑูู ุงูุณุฑู ุบูุฑ ููุนููููุ ูุฑุฌู ุชุนูููู ุฃููุงู"),o({title:"ุงูุฑูู ุงูุณุฑู ุบูุฑ ููุนูููู",description:"ูุฑุฌู ุชุนููู ุงูุฑูู ุงูุณุฑู ูู ุฅุฏุงุฑุฉ ุงูุฃุฑูุงู ุงูุณุฑูุฉ ูุจู ุงูุญุฐู.",variant:"destructive"});return}if(!W){w("ูุฑุฌู ุฅุฏุฎุงู ุงูุฑูู ุงูุณุฑู");return}if(!await A.verifyMasterPin(W,m)){w("ุงูุฑูู ุงูุณุฑู ุบูุฑ ุตุญูุญ"),o({title:"ุฑูู ุณุฑู ุบูุฑ ุตุญูุญ",description:"ุชุนุฐุฑ ุชูููุฐ ุงูุญุฐู ุจุณุจุจ ุฑูู ุณุฑู ุฎุงุทุฆ.",variant:"destructive"});return}try{O&&e&&O(e.id),E(!1),M(""),w(""),I(!1),P()}catch{}}finally{se(!1)}},children:"ุชุฃููุฏ ุงูุญุฐู"})]})]})]})}),t.jsx(q,{open:ye,onOpenChange:s=>{s?j(!0):(j(!1),N(""),u(""),$(!1))},children:t.jsxs(J,{className:"sm:max-w-md",dir:"rtl",children:[t.jsx(K,{children:t.jsxs(Z,{className:"flex items-center gap-2 text-center justify-center",children:[t.jsx(ce,{className:"h-5 w-5 text-emerald-600"}),"ุชุฃููุฏ ุฅููุงู ุงููุนุงููุฉ"]})}),t.jsx("div",{className:"text-center text-sm text-gray-600 mb-4",children:"ุฃุฏุฎู ุงูุฑูู ุงูุณุฑู ูุชุฃููุฏ ุฅููุงู ูุฐู ุงููุนุงููุฉ ุงููุคุฌูุฉ"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"completePin",className:"text-right block",children:"ุงูุฑูู ุงูุณุฑู ุงูุฑุฆูุณู"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"completePin",type:V?"text":"password",autoComplete:"off",value:U,onChange:s=>N(s.target.value),placeholder:"ุฃุฏุฎู ุงูุฑูู ุงูุณุฑู",className:"pr-10 w-full border rounded-md h-10 px-3",dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>$(!V),className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:V?t.jsx(me,{className:"h-4 w-4"}):t.jsx(pe,{className:"h-4 w-4"})})]})]}),re&&t.jsx("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:re}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx(f,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{j(!1),N(""),u(""),$(!1)},disabled:le,children:"ุฅูุบุงุก"}),t.jsx(f,{type:"button",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:le,onClick:async()=>{u(""),ie(!0);try{if(!await A.hasMasterPin(m)){u("ุงูุฑูู ุงูุณุฑู ุบูุฑ ููุนููููุ ูุฑุฌู ุชุนูููู ุฃููุงู"),o({title:"ุงูุฑูู ุงูุณุฑู ุบูุฑ ููุนูููู",description:"ูุฑุฌู ุชุนููู ุงูุฑูู ุงูุณุฑู ูู ุฅุฏุงุฑุฉ ุงูุฃุฑูุงู ุงูุณุฑูุฉ ูุจู ุงูุฅููุงู.",variant:"destructive"});return}if(!U){u("ูุฑุฌู ุฅุฏุฎุงู ุงูุฑูู ุงูุณุฑู");return}if(!await A.verifyMasterPin(U,m)){u("ุงูุฑูู ุงูุณุฑู ุบูุฑ ุตุญูุญ"),o({title:"ุฑูู ุณุฑู ุบูุฑ ุตุญูุญ",description:"ุชุนุฐุฑ ุชูููุฐ ุงูุฅููุงู ุจุณุจุจ ุฑูู ุณุฑู ุฎุงุทุฆ.",variant:"destructive"});return}try{F&&e&&F(e.id),j(!1),N(""),u(""),$(!1),P()}catch{}}finally{ie(!1)}},children:"ุชุฃููุฏ ุงูุฅููุงู"})]})]})]})})]})};export{lt as default};
//# sourceMappingURL=ReceiptModal-DeXWkBTO.js.map
