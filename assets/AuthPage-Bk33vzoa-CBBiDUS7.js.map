{"version":3,"file":"AuthPage-Bk33vzoa-CBBiDUS7.js","sources":["../../assets/AuthPage-Bk33vzoa.js"],"sourcesContent":["import{b as k,a as L,r as c,g as P,u as I,c as $,j as t,N as q,d as z,I as u,B as x,L as A,e as p}from\"./index-tnWDkOuX.js\";import{C as B,a as F,b as _,d as M}from\"./card-SlwaggFS.js\";import{B as R}from\"./BrandLogo-BV6Nd5YH.js\";import{S as T,M as j}from\"./brandingService-C3FKjfeb.js\";import{D as v}from\"./download-DFIibxe-.js\";const H=m=>{const h=m.replace(/\\D/g,\"\");return/^01(0|1|2|5)\\d{8}$/.test(h)};function Q(){const[m]=k(),h=L(),y=m.get(\"mode\")||\"signin\",[n,N]=c.useState(y===\"signup\"),[f,w]=c.useState(!1),[e,b]=c.useState(P()),[a,d]=c.useState({email:\"\",password:\"\",fullName:\"\",phone:\"\"}),{signIn:C,signUp:E,user:U}=I();c.useEffect(()=>{try{const r=typeof window<\"u\"?window.localStorage.getItem(\"cashy:lastEmail\"):null;r&&d(s=>({...s,email:r,password:\"\"}))}catch{}},[]);const{toast:i}=$();if(U)return t.jsx(q,{to:\"/dashboard-redirect\",replace:!0});c.useEffect(()=>{(async()=>{try{const r=await z();b(r||{})}catch(r){console.error(\"Failed to load app downloads\",r)}})()},[]);const S=async r=>{if(r.preventDefault(),f){i({title:\"جارٍ التنفيذ\",description:\"يرجى الانتظار حتى تكتمل العملية\"});return}if(typeof navigator<\"u\"&&navigator.onLine===!1){i({title:\"لا يوجد اتصال\",description:\"تحقق من اتصال الإنترنت ثم أعد المحاولة\",variant:\"destructive\"});return}w(!0);try{if(n){const s=(a.email||\"\").trim().toLowerCase(),g=(a.password||\"\").trim();if(!H(a.phone))throw i({title:\"رقم غير صالح\",description:\"يجب أن يكون رقم مصري 11 رقم ويبدأ بـ 010/011/012/015\",variant:\"destructive\"}),new Error(\"رقم الهاتف غير صالح\");const{error:l}=await E(s,g,a.fullName,a.phone);if(l)throw l;i({title:\"تم إنشاء الحساب بنجاح!\",description:\"تحقق من بريدك الإلكتروني لتفعيل الحساب\"});const o=a.fullName||\"التاجر الجديد\";h(`/user/account-setup?user_name=${encodeURIComponent(o)}`)}else{const s=(a.email||\"\").trim().toLowerCase(),g=(a.password||\"\").trim();if(!/^\\S+@\\S+\\.\\S+$/.test(s))throw new Error(\"صيغة البريد الإلكتروني غير صحيحة\");const{error:l}=await C(s,g);if(l){const o=l==null?void 0:l.code;throw o===\"auth/invalid-email\"?new Error(\"صيغة البريد الإلكتروني غير صحيحة\"):o===\"auth/user-not-found\"?new Error(\"لا يوجد حساب بهذا البريد الإلكتروني\"):o===\"auth/wrong-password\"?new Error(\"كلمة المرور غير صحيحة\"):o===\"auth/invalid-credential\"?new Error(\"البريد الإلكتروني أو كلمة المرور غير صحيحة\"):o===\"auth/too-many-requests\"?new Error(\"تم تجاوز عدد المحاولات المسموح، حاول لاحقاً\"):l}i({title:\"مرحباً بك!\",description:\"تم تسجيل الدخول بنجاح، جاري إعداد حسابك...\"})}}catch(s){i({title:\"خطأ\",description:(s==null?void 0:s.message)||\"حدث خطأ أثناء المعالجة\",variant:\"destructive\"})}finally{w(!1)}};return t.jsx(\"div\",{className:\"min-h-screen bg-background flex items-center justify-center p-4\",children:t.jsxs(B,{className:\"w-full max-w-md\",children:[t.jsxs(F,{className:\"text-center\",children:[t.jsxs(\"div\",{className:\"flex items-center justify-center gap-2 mb-4\",children:[t.jsx(R,{size:32}),t.jsx(\"span\",{className:\"text-xl font-bold\",children:\"CashyLink\"})]}),t.jsx(_,{children:n?\"إنشاء حساب جديد\":\"تسجيل الدخول\"})]}),t.jsxs(M,{children:[t.jsxs(\"form\",{onSubmit:S,className:\"space-y-4\",children:[n&&t.jsxs(t.Fragment,{children:[t.jsx(u,{placeholder:\"الاسم الكامل\",value:a.fullName,onChange:r=>d({...a,fullName:r.target.value}),required:!0}),t.jsx(u,{placeholder:\"رقم مصري (11 رقم يبدأ بـ 010/011/012/015)\",value:a.phone,onChange:r=>d({...a,phone:r.target.value}),dir:\"ltr\",inputMode:\"numeric\",required:!0})]}),t.jsx(u,{type:\"email\",placeholder:\"البريد الإلكتروني\",value:a.email,onChange:r=>{const s=r.target.value;d({...a,email:s});try{window.localStorage.setItem(\"cashy:lastEmail\",s)}catch{}},required:!0}),t.jsx(u,{type:\"password\",placeholder:\"كلمة المرور\",value:a.password,onChange:r=>d({...a,password:r.target.value}),autoComplete:n?\"new-password\":\"off\",required:!0}),t.jsx(x,{type:\"submit\",className:\"w-full btn-primary\",onClick:r=>{if(f){r.preventDefault(),r.stopPropagation(),i({title:\"جارٍ التنفيذ\",description:\"يرجى الانتظار حتى تكتمل العملية\"});return}typeof navigator<\"u\"&&navigator.onLine===!1&&(r.preventDefault(),r.stopPropagation(),i({title:\"لا يوجد اتصال\",description:\"تحقق من اتصال الإنترنت ثم أعد المحاولة\",variant:\"destructive\"}))},children:f?\"جاري المعالجة...\":n?\"إنشاء الحساب\":\"تسجيل الدخول\"})]}),t.jsxs(\"div\",{className:\"text-center mt-6\",children:[t.jsx(\"span\",{className:\"text-muted-foreground\",children:n?\"لديك حساب؟\":\"ليس لديك حساب؟\"}),t.jsx(x,{variant:\"link\",onClick:()=>N(!n),className:\"text-primary\",children:n?\"تسجيل الدخول\":\"إنشاء حساب\"})]}),t.jsx(\"div\",{className:\"text-center mt-4\",children:t.jsx(A,{to:\"/\",children:t.jsx(x,{variant:\"ghost\",className:\"text-muted-foreground\",children:\"العودة للصفحة الرئيسية\"})})}),t.jsxs(\"div\",{className:\"mt-6 flex flex-col sm:flex-row gap-3 justify-center items-center\",children:[t.jsxs(\"a\",{href:p(e==null?void 0:e.androidUrl)||\"#\",onClick:r=>{e!=null&&e.androidUrl||r.preventDefault()},className:`flex items-center gap-3 px-4 py-2 rounded-lg shadow-elegant transform hover:scale-105 transition-all duration-300 ${e!=null&&e.androidUrl?\"bg-green-600 text-white hover:bg-green-700\":\"bg-gray-300 text-gray-600 cursor-not-allowed\"}`,\"aria-disabled\":!(e!=null&&e.androidUrl),target:\"_blank\",rel:\"noopener noreferrer\",children:[t.jsx(T,{className:\"h-5 w-5\"}),\"تحميل للأندرويد\",t.jsx(v,{className:\"h-4 w-4\"})]}),t.jsxs(\"a\",{href:p(e==null?void 0:e.pcUrl)||\"#\",onClick:r=>{e!=null&&e.pcUrl||r.preventDefault()},className:`flex items-center gap-3 px-4 py-2 rounded-lg shadow-elegant transform hover:scale-105 transition-all duration-300 ${e!=null&&e.pcUrl?\"bg-indigo-600 text-white hover:bg-indigo-700\":\"bg-gray-300 text-gray-600 cursor-not-allowed\"}`,\"aria-disabled\":!(e!=null&&e.pcUrl),target:\"_blank\",rel:\"noopener noreferrer\",children:[t.jsx(j,{className:\"h-5 w-5\"}),\"تحميل تطبيق الكمبيوتر نسخة 64 بت\",t.jsx(v,{className:\"h-4 w-4\"})]}),t.jsxs(\"a\",{href:p(e==null?void 0:e.pc32Url)||\"#\",onClick:r=>{e!=null&&e.pc32Url||r.preventDefault()},className:`flex items-center gap-3 px-4 py-2 rounded-lg shadow-elegant transform hover:scale-105 transition-all duration-300 ${e!=null&&e.pc32Url?\"bg-blue-600 text-white hover:bg-blue-700\":\"bg-gray-300 text-gray-600 cursor-not-allowed\"}`,\"aria-disabled\":!(e!=null&&e.pc32Url),target:\"_blank\",rel:\"noopener noreferrer\",children:[t.jsx(j,{className:\"h-5 w-5\"}),\"تحميل تطبيق الكمبيوتر نسخة 32 بت\",t.jsx(v,{className:\"h-4 w-4\"})]})]})]})]})})}export{Q as default};\r\n//# sourceMappingURL=AuthPage-Bk33vzoa.js.map\r\n"],"names":["H","h","Q","m","k","L","n","c","f","w","e","P","a","E","U","I","i","$","t","q","z","S","g","l","o","B","F","R","_","M","u","x","A","p","T","v","j"],"mappings":"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"}