{"version":3,"file":"WalletAdditionPage-B49qiohA.js","sources":["../../src/pages/WalletAdditionPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { ArrowLeft, Plus, Wallet, Phone, CreditCard, AlertCircle, Building2 } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\r\nimport { SubscriptionPlan, getUserSubscription } from '@/utils/subscriptionService';\r\nimport { userDataService, merchantWalletService } from '@/integrations/firebase/services';\r\nimport { walletDailyLimitsService } from '@/utils/walletDailyLimitsService';\r\n\r\ninterface Wallet {\r\n  id: string;\r\n  name: string;\r\n  phone: string;\r\n  nationalId?: string;\r\n  ownerName?: string;\r\n  isDefault: boolean;\r\n  monthlyWithdrawalLimit: number;\r\n  monthlyTransferLimit: number;\r\n  monthlyWithdrawalUsage?: number;\r\n  monthlyTransferUsage?: number;\r\n  lastResetDate?: string;\r\n  walletProvider?: string;\r\n  defaultTransferCommission?: number | null;\r\n  defaultWithdrawCommission?: number | null;\r\n  dailyWithdrawalLimit?: number;\r\n  dailyTransferLimit?: number;\r\n}\r\n\r\nconst WalletAdditionPage = () => {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const { toast } = useToast();\r\n  const { user, userSubscription, profile } = useFirebaseAuth();\r\n  \r\n  const isTransferFeesEnabled = React.useMemo(() => {\r\n    if (profile?.transferFeesEnabled !== undefined) return profile.transferFeesEnabled;\r\n    try {\r\n      const k = user?.uid ? `transferFeesEnabled_${user.uid}` : 'transferFeesEnabled';\r\n      const v = localStorage.getItem(k) ?? localStorage.getItem('transferFeesEnabled');\r\n      return v !== 'false';\r\n    } catch { return true; }\r\n  }, [profile, user?.uid]);\r\n  \r\n  const [walletName, setWalletName] = useState('');\r\n  const [walletPhone, setWalletPhone] = useState('');\r\n  const [walletOwnerName, setWalletOwnerName] = useState('');\r\n  const [walletNationalId, setWalletNationalId] = useState('');\r\n  const [walletProvider, setWalletProvider] = useState('');\r\n  const [monthlyWithdrawalLimit, setMonthlyWithdrawalLimit] = useState('200000');\r\n  const [monthlyTransferLimit, setMonthlyTransferLimit] = useState('200000');\r\n  const [dailyWithdrawalLimit, setDailyWithdrawalLimit] = useState('100000');\r\n  const [dailyTransferLimit, setDailyTransferLimit] = useState('60000');\r\n  const [defaultTransferCommission, setDefaultTransferCommission] = useState<string>('');\r\n  const [defaultWithdrawCommission, setDefaultWithdrawCommission] = useState<string>('');\r\n  const [isDefault, setIsDefault] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [wallets, setWallets] = useState<Wallet[]>([]);\r\n  const [isEditMode, setIsEditMode] = useState<boolean>(false);\r\n  const [editingWalletId, setEditingWalletId] = useState<string | null>(null);\r\n  const [originalPhone, setOriginalPhone] = useState<string>('');\r\n  const [originalProvider, setOriginalProvider] = useState<string>('');\r\n\r\n  const walletProviders = [\r\n    { id: 'vodafone', name: 'فودافون كاش', color: 'bg-red-500' },\r\n    { id: 'etisalat', name: 'اتصالات كاش', color: 'bg-green-500' },\r\n    { id: 'orange', name: 'أورنج كاش', color: 'bg-orange-500' },\r\n    { id: 'we_pay', name: 'وي باي', color: 'bg-purple-500' },\r\n    { id: 'smart_wallet', name: 'سمارت ولت', color: 'bg-blue-500' },\r\n    { id: 'access_pay', name: 'أكسس باي', color: 'bg-teal-500' },\r\n    { id: 'insta_pay', name: 'انستا باي', color: 'bg-pink-500' }\r\n  ];\r\n\r\n  const getWalletsKey = () => `wallets_${user?.uid || 'default'}`;\r\n\r\n  useEffect(() => {\r\n    loadWallets();\r\n  }, [user?.uid]);\r\n\r\n  // Helper: map UI provider id to backend enum\r\n  const mapUiProviderToEnum = (uiId: string): 'vodafone_cash' | 'etisalat_cash' | 'orange_cash' | 'instapay' | string => {\r\n    switch (uiId) {\r\n      case 'vodafone':\r\n        return 'vodafone_cash';\r\n      case 'etisalat':\r\n        return 'etisalat_cash';\r\n      case 'orange':\r\n        return 'orange_cash';\r\n      case 'insta_pay':\r\n        return 'instapay';\r\n      default:\r\n        return uiId;\r\n    }\r\n  };\r\n\r\n  // Helper: map backend enum to UI provider id\r\n  const mapEnumToUiProvider = (enumVal: string): string => {\r\n    switch (enumVal) {\r\n      case 'vodafone_cash':\r\n        return 'vodafone';\r\n      case 'etisalat_cash':\r\n        return 'etisalat';\r\n      case 'orange_cash':\r\n        return 'orange';\r\n      case 'instapay':\r\n        return 'insta_pay';\r\n      default:\r\n        return enumVal;\r\n    }\r\n  };\r\n\r\n  // Detect edit mode via URL and preload wallet\r\n  useEffect(() => {\r\n    const isEdit = searchParams.get('edit') === '1';\r\n    const id = searchParams.get('id');\r\n    setIsEditMode(isEdit);\r\n    setEditingWalletId(id);\r\n\r\n    if (isEdit && id) {\r\n      (async () => {\r\n        try {\r\n          const w = await merchantWalletService.getById(id);\r\n          if (w) {\r\n            setWalletName(w.label || '');\r\n            setWalletPhone(w.msisdn || '');\r\n            setWalletProvider(mapEnumToUiProvider(w.provider || ''));\r\n            setMonthlyWithdrawalLimit(String(w.withdrawLimit || 200000));\r\n            setMonthlyTransferLimit(String(w.transferLimit || 200000));\r\n            setDefaultTransferCommission((w.defaultTransferCommission ?? '').toString());\r\n            setDefaultWithdrawCommission((w.defaultWithdrawCommission ?? '').toString());\r\n            // Prefill daily limits from Firebase if available, otherwise defaults\r\n            setDailyWithdrawalLimit(String((w as any).dailyWithdrawLimit ?? 100000));\r\n            setDailyTransferLimit(String((w as any).dailyTransferLimit ?? 60000));\r\n            setOriginalPhone(w.msisdn || '');\r\n            setOriginalProvider(w.provider || '');\r\n          }\r\n        } catch (err) {\r\n          console.error('Error loading wallet for edit:', err);\r\n        }\r\n      })();\r\n    }\r\n  }, [searchParams]);\r\n\r\n  const loadWallets = async () => {\r\n    if (!user?.uid) return;\r\n    \r\n    try {\r\n      // Always prefer fresh data from Firebase\r\n      const firebaseWallets: any[] = await merchantWalletService.getByMerchantId(user.uid);\r\n      if (firebaseWallets && firebaseWallets.length > 0) {\r\n        const normalized: Wallet[] = firebaseWallets.map((w: any) => ({\r\n          id: w.id,\r\n          name: w.label || '',\r\n          phone: w.msisdn || '',\r\n          isDefault: false,\r\n          monthlyWithdrawalLimit: typeof w.withdrawLimit === 'number' ? w.withdrawLimit : 0,\r\n          monthlyTransferLimit: typeof w.transferLimit === 'number' ? w.transferLimit : 0,\r\n          monthlyWithdrawalUsage: typeof w.withdrawUsage === 'number' ? w.withdrawUsage : 0,\r\n          monthlyTransferUsage: typeof w.transferUsage === 'number' ? w.transferUsage : 0,\r\n          lastResetDate: undefined,\r\n          walletProvider: mapEnumToUiProvider(w.provider || ''),\r\n          defaultTransferCommission: (w.defaultTransferCommission ?? null),\r\n          defaultWithdrawCommission: (w.defaultWithdrawCommission ?? null),\r\n          // Use Firebase-stored daily limits if present\r\n          dailyWithdrawalLimit: typeof w.dailyWithdrawLimit === 'number' ? w.dailyWithdrawLimit : 100000,\r\n          dailyTransferLimit: typeof w.dailyTransferLimit === 'number' ? w.dailyTransferLimit : 60000,\r\n        }));\r\n        setWallets(normalized);\r\n      } else {\r\n        // بدون عرض احتياطي محلي: إذا لم توجد بيانات في Firebase نُظهر قائمة فارغة\r\n        setWallets([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading wallets:', error);\r\n      // لا نعرض بيانات محلية عند الفشل؛ نكتفي بالتنبيه ويظل العرض فارغًا\r\n      setWallets([]);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!walletName || !walletPhone) {\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"يرجى ملء جميع الحقول المطلوبة\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    \r\n\r\n    // تحقق من حد باقة زيرو: لا يسمح بأكثر من 5 محافظ\r\n    if (!isEditMode && user?.uid) {\r\n      try {\r\n        let isZeroPlan = false;\r\n        const rawLocalPlan: any = (userSubscription as any)?.subscription?.planType ?? (userSubscription as any)?.planType ?? null;\r\n        const planLocalStr = typeof rawLocalPlan === 'string' ? rawLocalPlan.toLowerCase() : null;\r\n        if (rawLocalPlan === SubscriptionPlan.ZERO || planLocalStr === 'zero' || rawLocalPlan === 0 || planLocalStr === '0') {\r\n          isZeroPlan = true;\r\n        } else {\r\n          const remoteSub: any = await getUserSubscription(user.uid);\r\n          const rawRemotePlan: any = remoteSub?.planType ?? remoteSub?.plan ?? null;\r\n          const planRemoteStr = typeof rawRemotePlan === 'string' ? rawRemotePlan.toLowerCase() : null;\r\n          isZeroPlan = rawRemotePlan === SubscriptionPlan.ZERO || planRemoteStr === 'zero' || rawRemotePlan === 0 || planRemoteStr === '0';\r\n        }\r\n\r\n        if (isZeroPlan) {\r\n          const existingWallets = await merchantWalletService.getByMerchantId(user.uid);\r\n          if (existingWallets.length >= 5) {\r\n            toast({\r\n              title: \"تحذير\",\r\n              description: \"باقة زيرو تسمح بإضافة 5 محافظ فقط. قم بالترقية.\",\r\n              variant: \"destructive\",\r\n            });\r\n            return;\r\n          }\r\n        }\r\n      } catch (limitErr) {\r\n        console.warn('Zero plan limit check failed:', limitErr);\r\n      }\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const currentDate = new Date().toISOString().split('T')[0];\r\n\r\n      if (isEditMode && editingWalletId) {\r\n        // Update existing wallet in Firebase\r\n        await merchantWalletService.update(editingWalletId, {\r\n          provider: mapUiProviderToEnum(walletProvider || originalProvider || ''),\r\n          msisdn: walletPhone,\r\n          label: walletName,\r\n          transferLimit: parseInt(monthlyTransferLimit),\r\n          withdrawLimit: parseInt(monthlyWithdrawalLimit),\r\n          // Persist daily limits to Firebase document as well\r\n          dailyTransferLimit: parseInt(dailyTransferLimit || '0'),\r\n          dailyWithdrawLimit: parseInt(dailyWithdrawalLimit || '0'),\r\n          defaultTransferCommission: (isTransferFeesEnabled && defaultTransferCommission != null && defaultTransferCommission.trim() !== '') ? parseFloat(defaultTransferCommission) : null,\r\n          defaultWithdrawCommission: (defaultWithdrawCommission != null && defaultWithdrawCommission.trim() !== '') ? parseFloat(defaultWithdrawCommission) : null\r\n        });\r\n\r\n        // Sync limits to walletLimits collection for enforcement\r\n        await walletDailyLimitsService.setLimits(editingWalletId, {\r\n          dailyTransferLimit: parseInt(dailyTransferLimit || '0'),\r\n          dailyWithdrawLimit: parseInt(dailyWithdrawalLimit || '0'),\r\n          monthlyTransferLimit: parseInt(monthlyTransferLimit || '0'),\r\n          monthlyWithdrawLimit: parseInt(monthlyWithdrawalLimit || '0')\r\n        });\r\n\r\n        \r\n\r\n        toast({\r\n          title: \"تم التحديث\",\r\n          description: \"تم تحديث بيانات المحفظة بنجاح\",\r\n        });\r\n      } else {\r\n        // Create wallet object for merchantWalletService\r\n        const merchantWallet = {\r\n          merchantUserId: user?.uid || '',\r\n          provider: mapUiProviderToEnum(walletProvider),\r\n          msisdn: walletPhone,\r\n          label: walletName,\r\n          isActive: true,\r\n          dailyLimit: 50000,\r\n          monthlyLimit: 300000,\r\n          transferLimit: parseInt(monthlyTransferLimit),\r\n          withdrawLimit: parseInt(monthlyWithdrawalLimit),\r\n          // Persist daily limits to Firebase document\r\n          dailyTransferLimit: parseInt(dailyTransferLimit || '0'),\r\n          dailyWithdrawLimit: parseInt(dailyWithdrawalLimit || '0'),\r\n          transferUsage: 0,\r\n          withdrawUsage: 0,\r\n          defaultTransferCommission: (isTransferFeesEnabled && defaultTransferCommission != null && defaultTransferCommission.trim() !== '') ? parseFloat(defaultTransferCommission) : null,\r\n          defaultWithdrawCommission: (defaultWithdrawCommission != null && defaultWithdrawCommission.trim() !== '') ? parseFloat(defaultWithdrawCommission) : null\r\n        };\r\n\r\n        // Save to Firebase using merchantWalletService and use the Firebase ID\r\n        let newWalletId: string;\r\n        if (user?.uid) {\r\n          newWalletId = await merchantWalletService.create(merchantWallet);\r\n\r\n          // Sync limits to walletLimits collection for enforcement\r\n          await walletDailyLimitsService.setLimits(newWalletId, {\r\n            dailyTransferLimit: parseInt(dailyTransferLimit || '0'),\r\n            dailyWithdrawLimit: parseInt(dailyWithdrawalLimit || '0'),\r\n            monthlyTransferLimit: parseInt(monthlyTransferLimit || '0'),\r\n            monthlyWithdrawLimit: parseInt(monthlyWithdrawalLimit || '0')\r\n          });\r\n        } else {\r\n          // منع إنشاء محفظة بدون تسجيل دخول — بدون إظهار تغييرات UI\r\n          console.warn('يجب تسجيل الدخول قبل إنشاء المحفظة');\r\n          return;\r\n        }\r\n\r\n        // Create local wallet object for localStorage backup using the Firebase ID\r\n        const newWallet: Wallet = {\r\n          id: newWalletId,\r\n          name: walletName,\r\n          phone: walletPhone,\r\n          ownerName: walletOwnerName,\r\n          nationalId: walletNationalId,\r\n          isDefault: isDefault || wallets.length === 0,\r\n          monthlyWithdrawalLimit: parseInt(monthlyWithdrawalLimit),\r\n          monthlyTransferLimit: parseInt(monthlyTransferLimit),\r\n          monthlyWithdrawalUsage: 0,\r\n          monthlyTransferUsage: 0,\r\n          dailyWithdrawalLimit: parseInt(dailyWithdrawalLimit),\r\n          dailyTransferLimit: parseInt(dailyTransferLimit),\r\n          lastResetDate: currentDate,\r\n          walletProvider: walletProvider,\r\n          defaultTransferCommission: (defaultTransferCommission != null && defaultTransferCommission.trim() !== '') ? parseFloat(defaultTransferCommission) : null,\r\n          defaultWithdrawCommission: (defaultWithdrawCommission != null && defaultWithdrawCommission.trim() !== '') ? parseFloat(defaultWithdrawCommission) : null\r\n        };\r\n\r\n        const updatedWallets = [...wallets, newWallet];\r\n        \r\n        // Save to localStorage for backup\r\n        localStorage.setItem(getWalletsKey(), JSON.stringify(updatedWallets));\r\n        \r\n        toast({\r\n          title: \"تم الإنشاء\",\r\n          description: \"تم إنشاء المحفظة بنجاح\",\r\n        });\r\n      }\r\n\r\n      // إبقاء نسخة المحافظ في التخزين المحلي لضمان العمل عند فشل الاتصال بـ Firebase\r\n      // لا نقوم بحذف `wallets_${user?.uid}` حتى لا نفقد العمولات الافتراضية عند إعادة التحميل\r\n      \r\n      // Navigate back to dashboard\r\n      navigate('/user/dashboard');\r\n      \r\n    } catch (error) {\r\n      console.error('Error saving wallet:', error);\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"حدث خطأ أثناء حفظ المحفظة\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoBack = () => {\r\n    navigate('/user/dashboard');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background p-4\">\r\n      <div className=\"max-w-2xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center gap-4 mb-6\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleGoBack}\r\n            className=\"flex items-center gap-2\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            العودة\r\n          </Button>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n              <Plus className=\"h-5 w-5 text-blue-600\" />\r\n            </div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">{isEditMode ? 'تعديل المحفظة' : 'إضافة محفظة جديدة'}</h1>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Form */}\r\n        <Card className=\"shadow-lg\">\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2 text-right\">\r\n              <Wallet className=\"h-5 w-5 text-blue-600\" />\r\n              بيانات المحفظة\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n              {/* Wallet Name */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"walletName\" className=\"text-right block font-medium\">\r\n                  اسم المحفظة *\r\n                </Label>\r\n                <Input\r\n                  id=\"walletName\"\r\n                  type=\"text\"\r\n                  placeholder=\"مثال: محفظة العمل\"\r\n                  value={walletName}\r\n                  onChange={(e) => setWalletName(e.target.value)}\r\n                  className=\"text-right\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Phone Number */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"walletPhone\" className=\"text-right block font-medium\">\r\n                  رقم الهاتف *\r\n                </Label>\r\n                <div className=\"relative\">\r\n                  <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                  <Input\r\n                    id=\"walletPhone\"\r\n                    type=\"tel\"\r\n                    placeholder=\"01xxxxxxxxx\"\r\n                    value={walletPhone}\r\n                    onChange={(e) => setWalletPhone(e.target.value)}\r\n                    className=\"text-right pl-10\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Owner Name */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"walletOwnerName\" className=\"text-right block font-medium\">\r\n                  اسم صاحب المحفظة (اختياري)\r\n                </Label>\r\n                <Input\r\n                  id=\"walletOwnerName\"\r\n                  type=\"text\"\r\n                  placeholder=\"اسم صاحب المحفظة\"\r\n                  value={walletOwnerName}\r\n                  onChange={(e) => setWalletOwnerName(e.target.value)}\r\n                  className=\"text-right\"\r\n                />\r\n              </div>\r\n\r\n              {/* National ID */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"walletNationalId\" className=\"text-right block font-medium\">\r\n                  الرقم القومي (اختياري)\r\n                </Label>\r\n                <div className=\"relative\">\r\n                  <CreditCard className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                  <Input\r\n                    id=\"walletNationalId\"\r\n                    type=\"text\"\r\n                    placeholder=\"الرقم القومي\"\r\n                    value={walletNationalId}\r\n                    onChange={(e) => setWalletNationalId(e.target.value)}\r\n                    className=\"text-right pl-10\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* معلومات العمولات الافتراضية */}\r\n              <div className=\"flex items-start gap-2 text-blue-700 bg-blue-50 border border-blue-100 p-3 rounded\">\r\n                <AlertCircle className=\"h-4 w-4 mt-0.5\" />\r\n                <p className=\"text-sm text-right\">\r\n                  يمكن ترك \"عمولة التحويل\" و\"عمولة السحب\" فارغتين إذا أردت إدخال العمولة يدويًا أثناء تنفيذ العملية، أو كتابتهما هنا لتكونا قيمًا افتراضية تُستخدم تلقائيًا.\r\n                </p>\r\n              </div>\r\n\r\n              {/* عمولة التحويل الافتراضية */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"defaultTransferCommission\" className=\"text-right block font-medium\">\r\n                  عمولة التحويل (افتراضية - اختياري)\r\n                </Label>\r\n                <Input\r\n                  id=\"defaultTransferCommission\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  placeholder=\"أدخل عمولة التحويل الافتراضية (مثال: 5)\"\r\n                  value={defaultTransferCommission}\r\n                  onChange={(e) => setDefaultTransferCommission(e.target.value)}\r\n                  className=\"text-right\"\r\n                />\r\n              </div>\r\n\r\n              {/* عمولة السحب الافتراضية */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"defaultWithdrawCommission\" className=\"text-right block font-medium\">\r\n                  عمولة السحب (افتراضية - اختياري)\r\n                </Label>\r\n                <Input\r\n                  id=\"defaultWithdrawCommission\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                  placeholder=\"أدخل عمولة السحب الافتراضية (مثال: 5)\"\r\n                  value={defaultWithdrawCommission}\r\n                  onChange={(e) => setDefaultWithdrawCommission(e.target.value)}\r\n                  className=\"text-right\"\r\n                />\r\n              </div>\r\n\r\n              {/* Wallet Provider */}\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"walletProvider\" className=\"text-right block font-medium\">\r\n                  شركة المحفظة\r\n                </Label>\r\n                <Select value={walletProvider} onValueChange={setWalletProvider}>\r\n                  <SelectTrigger className=\"text-right\">\r\n                    <SelectValue placeholder=\"اختر شركة المحفظة\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {walletProviders.map((provider) => (\r\n                      <SelectItem key={provider.id} value={provider.id}>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <div className={`w-3 h-3 rounded-full ${provider.color}`}></div>\r\n                          {provider.name}\r\n                        </div>\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Monthly Limits */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"monthlyWithdrawalLimit\" className=\"text-right block font-medium\">\r\n                    حد السحب الشهري\r\n                  </Label>\r\n                  <Input\r\n                    id=\"monthlyWithdrawalLimit\"\r\n                    type=\"number\"\r\n                    value={monthlyWithdrawalLimit}\r\n                    onChange={(e) => setMonthlyWithdrawalLimit(e.target.value)}\r\n                    className=\"text-right\"\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"monthlyTransferLimit\" className=\"text-right block font-medium\">\r\n                    حد التحويل الشهري\r\n                  </Label>\r\n                  <Input\r\n                    id=\"monthlyTransferLimit\"\r\n                    type=\"number\"\r\n                    value={monthlyTransferLimit}\r\n                    onChange={(e) => setMonthlyTransferLimit(e.target.value)}\r\n                    className=\"text-right\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Daily Limits */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"dailyWithdrawalLimit\" className=\"text-right block font-medium\">\r\n                    حد السحب اليومي\r\n                  </Label>\r\n                  <Input\r\n                    id=\"dailyWithdrawalLimit\"\r\n                    type=\"number\"\r\n                    value={dailyWithdrawalLimit}\r\n                    onChange={(e) => setDailyWithdrawalLimit(e.target.value)}\r\n                    className=\"text-right\"\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"dailyTransferLimit\" className=\"text-right block font-medium\">\r\n                    حد التحويل اليومي\r\n                  </Label>\r\n                  <Input\r\n                    id=\"dailyTransferLimit\"\r\n                    type=\"number\"\r\n                    value={dailyTransferLimit}\r\n                    onChange={(e) => setDailyTransferLimit(e.target.value)}\r\n                    className=\"text-right\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Default Wallet Checkbox */}\r\n              <div className=\"flex items-center gap-2 justify-end\">\r\n                <Label htmlFor=\"isDefault\" className=\"font-medium\">\r\n                  جعل هذه المحفظة افتراضية\r\n                </Label>\r\n                <input\r\n                  id=\"isDefault\"\r\n                  type=\"checkbox\"\r\n                  checked={isDefault}\r\n                  onChange={(e) => setIsDefault(e.target.checked)}\r\n                  className=\"rounded\"\r\n                />\r\n              </div>\r\n\r\n              {/* Submit Button */}\r\n              <div className=\"flex gap-3 pt-4\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={handleGoBack}\r\n                  className=\"flex-1\"\r\n                >\r\n                  إلغاء\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={isLoading}\r\n                  className=\"flex-1 bg-blue-600 hover:bg-blue-700\"\r\n                >\r\n                  {isLoading ? \"جاري الحفظ...\" : (isEditMode ? 'حفظ التعديلات' : 'إضافة المحفظة')}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Info Card */}\r\n        <Card className=\"mt-6 bg-blue-50 border-blue-200\">\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n                <Building2 className=\"h-4 w-4 text-blue-600\" />\r\n              </div>\r\n              <div className=\"text-sm text-blue-800\">\r\n                <p className=\"font-medium mb-1\">معلومات مهمة:</p>\r\n                <ul className=\"space-y-1 text-blue-700\">\r\n                  <li>• تأكد من صحة رقم الهاتف المدخل</li>\r\n                  <li>• يمكنك تعديل الحدود الشهرية لاحقاً</li>\r\n                  <li>• المحفظة الافتراضية ستكون الخيار الأول في المعاملات</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WalletAdditionPage;\r\n"],"names":["WalletAdditionPage","navigate","useNavigate","searchParams","useSearchParams","toast","useToast","user","userSubscription","profile","useFirebaseAuth","isTransferFeesEnabled","React","k","walletName","setWalletName","useState","walletPhone","setWalletPhone","walletOwnerName","setWalletOwnerName","walletNationalId","setWalletNationalId","walletProvider","setWalletProvider","monthlyWithdrawalLimit","setMonthlyWithdrawalLimit","monthlyTransferLimit","setMonthlyTransferLimit","dailyWithdrawalLimit","setDailyWithdrawalLimit","dailyTransferLimit","setDailyTransferLimit","defaultTransferCommission","setDefaultTransferCommission","defaultWithdrawCommission","setDefaultWithdrawCommission","isDefault","setIsDefault","isLoading","setIsLoading","wallets","setWallets","isEditMode","setIsEditMode","editingWalletId","setEditingWalletId","originalPhone","setOriginalPhone","originalProvider","setOriginalProvider","walletProviders","getWalletsKey","useEffect","loadWallets","mapUiProviderToEnum","uiId","mapEnumToUiProvider","enumVal","isEdit","id","w","merchantWalletService","err","firebaseWallets","normalized","error","handleSubmit","e","isZeroPlan","rawLocalPlan","_a","planLocalStr","SubscriptionPlan","remoteSub","getUserSubscription","rawRemotePlan","planRemoteStr","limitErr","currentDate","walletDailyLimitsService","merchantWallet","newWalletId","newWallet","updatedWallets","handleGoBack","jsxs","Button","jsx","ArrowLeft","Plus","Card","CardHeader","CardTitle","Wallet","CardContent","Label","Input","Phone","CreditCard","AlertCircle","Select","SelectTrigger","SelectValue","SelectContent","provider","SelectItem","Building2"],"mappings":"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"}