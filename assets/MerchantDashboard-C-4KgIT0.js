import{u as x,r as p,a as w,j as e,B as d,U as v,aJ as y,aE as B,S as D,aK as M,aL as k,aM as m,N as R}from"./index-bCWIXU_s.js";import{D as C,a as O,b as E,c as L,d as u,e as h}from"./dropdown-menu-h4nY-sSB.js";import{B as q}from"./badge-D2_MGYyu.js";import{WalletsManagement as P}from"./WalletsManagement-CTvhIuFw.js";import"./select-C3fHD4AR.js";import"./index-BPkmrWHC.js";import"./progress-x9HwvYAT.js";import"./WalletPrinterDialog-gKIzZGi9.js";import"./textarea-D3m_oYND.js";import"./html2canvas.esm-BfYXEYrK.js";import"./printer-BDVabvNO.js";import"./wallet-BSujvrVP.js";import"./arrow-left-s_QvAc0w.js";import"./square-pen-C3YmbHnp.js";import"./download-BfniqE5C.js";import"./trash-2-BWgB-yFB.js";function A(){var l,i;const{profile:s,signOut:r,userSubscription:a}=x(),[f,c]=p.useState(!1),j=w(),o=((l=a==null?void 0:a.branchPackage)==null?void 0:l.status)==="active",t=((i=a==null?void 0:a.branchPackage)==null?void 0:i.status)==="pending",g=()=>{o?j("/cpanel"):t||c(!0)},b=n=>{switch(n){case"staff":return"مدير";case"merchant":return"تاجر";case"user":return"مستخدم";default:return n}},N=n=>{switch(n){case"staff":return"bg-secondary text-secondary-foreground";case"merchant":return"bg-success text-success-foreground";case"user":return"bg-blue-500 text-white";default:return"bg-muted text-muted-foreground"}};return e.jsxs("header",{className:"h-16 border-b border-border bg-card/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex h-full items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"منصة إدارة المحول"}),s&&e.jsx(q,{className:N(s.role),children:b(s.role)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(d,{variant:"ghost",className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(v,{className:"h-4 w-4 text-primary"})}),e.jsx("span",{className:"text-sm",children:(s==null?void 0:s.fullName)||"المستخدم"})]})}),e.jsxs(E,{align:"end",className:"w-56",children:[e.jsx(L,{children:"حسابي"}),e.jsx(u,{}),e.jsxs(h,{children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"الإعدادات"})]}),e.jsx(u,{}),e.jsxs(h,{onClick:()=>r(),className:"text-destructive",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"تسجيل الخروج"})]})]})]}),s&&e.jsx(d,{variant:"ghost",size:"icon",className:`rounded-full w-10 h-10 ${t?"opacity-70 cursor-not-allowed":""}`,onClick:g,disabled:t,title:o?"إدارة الفروع":t?"طلب الفروع قيد المراجعة":"إدارة الفروع",children:e.jsx(D,{className:"h-5 w-5"})})]})]}),e.jsx(M,{open:f,onOpenChange:c})]})}function Z(){const{user:s,profile:r,loading:a}=x();return p.useEffect(()=>{!a&&(!s||!r||r.role!=="merchant")&&(window.location.href="/auth")},[s,r,a]),a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})}):!s||!r||r.role!=="merchant"?null:(r&&r.approved,e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(A,{}),e.jsx("main",{className:"container mx-auto p-6",children:e.jsxs(k,{children:[e.jsx(m,{path:"/",element:e.jsx(R,{to:"/merchant/wallets",replace:!0})}),e.jsx(m,{path:"/wallets",element:e.jsx(P,{})})]})})]}))}export{Z as default};
//# sourceMappingURL=MerchantDashboard-C-4KgIT0.js.map
