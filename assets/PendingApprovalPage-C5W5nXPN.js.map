{"version":3,"file":"PendingApprovalPage-C5W5nXPN.js","sources":["../../src/pages/user/PendingApprovalPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { AlertTriangle, Clock, AlertCircle, Shield, Gift, CheckCircle, RefreshCw, Lock } from 'lucide-react';\r\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\r\nimport { doc, onSnapshot } from 'firebase/firestore';\r\nimport { db } from '@/firebase';\r\nimport { toast } from 'sonner';\r\nimport { FreeTrialService } from '@/utils/freeTrialService';\r\nimport { isSubscriptionValid, activateUserSubscription, SubscriptionPlan } from '@/utils/subscriptionService'\r\nimport { createSubscriptionWhatsAppLink } from '@/utils/whatsappService';\r\n\r\nexport default function PendingApprovalPage() {\r\n  const { user, signOut, userSubscription, isSubscriptionActive, checkSubscriptionStatus } = useFirebaseAuth();\r\n  const navigate = useNavigate();\r\n  const [isActivatingTrial, setIsActivatingTrial] = useState(false);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [hasUsedTrial, setHasUsedTrial] = useState(false);\r\n  const [isOnFreeTrial, setIsOnFreeTrial] = useState(false);\r\n  const [trialDurationHours, setTrialDurationHours] = useState<number>(4);\r\n  \r\n  // ÿ™ŸÉŸàŸäŸÜ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿ®ŸÜŸÅÿ≥ ÿ™ÿµŸÖŸäŸÖ ÿßŸÑŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖŸÜÿ®ÿ´ŸÇÿ©\r\n  const PLANS = [\r\n    {\r\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',\r\n      price: 150,\r\n      features: ['ÿØÿπŸÖ ŸÖÿ¨ÿßŸÜŸä ŸÉÿßŸÖŸÑ', 'ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸÖÿ≥ÿ™ŸÖÿ±ÿ©', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', '20 ŸÖÿ≠ŸÅÿ∏ÿ©'],\r\n      bg: 'from-blue-50 to-indigo-50',\r\n    },\r\n    {\r\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ±ÿ®ÿπ ÿ≥ŸÜŸàŸäÿ©',\r\n      price: 350,\r\n      features: ['ÿØÿπŸÖ ŸÖŸÖŸäÿ≤', 'ÿ≠ÿ™Ÿâ 30 ŸÖÿ≠ŸÅÿ∏ÿ©', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\r\n      bg: 'from-emerald-50 to-green-50',\r\n    },\r\n    {\r\n      title: 'ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ≥ŸÜŸàŸäÿ©',\r\n      price: 1000,\r\n      features: ['ÿØÿπŸÖ ŸÖŸÖÿ™ÿßÿ≤', 'ÿπÿØÿØ ŸÖÿ≠ÿßŸÅÿ∏ ŸÖŸÅÿ™Ÿàÿ≠', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\r\n      bg: 'from-purple-50 to-pink-50',\r\n    },\r\n    {\r\n      title: 'ÿ®ÿßŸÇÿ© ŸÖÿØŸâ ÿßŸÑÿ≠Ÿäÿßÿ©',\r\n      price: 3000,\r\n      features: ['ÿØÿπŸÖ ŸÖŸÖÿ™ÿßÿ≤', 'ÿπÿØÿØ ŸÖÿ≠ÿßŸÅÿ∏ ŸÖŸÅÿ™Ÿàÿ≠', 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸÖŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸâ ÿ™ŸÑÿ¨ÿ±ÿßŸÖ'],\r\n      bg: 'from-orange-50 to-amber-50',\r\n    },\r\n  ];\r\n\r\n  // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸàÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÅÿπŸÑŸä\r\n  useEffect(() => {\r\n    if (!user?.uid) return;\r\n\r\n    console.log('üîç PendingApprovalPage: Setting up real-time subscription monitoring for user:', user.uid);\r\n\r\n    const userDocRef = doc(db, 'users', user.uid);\r\n    \r\n    const unsubscribe = onSnapshot(userDocRef, (doc) => {\r\n      if (doc.exists()) {\r\n        const userData = doc.data();\r\n        \r\n        console.log('üìä PendingApprovalPage: User data updated:', {\r\n          userId: user.uid,\r\n          isApproved: userData.isApproved,\r\n          approved: userData.approved,\r\n          freeTrialActive: userData.freeTrialActive,\r\n          subscription: userData.subscription,\r\n          subscriptionActive: userData.subscription?.isActive\r\n        });\r\n        \r\n        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ÿ£Ÿà ÿ®ÿßŸÇÿ© ÿßŸÑŸÅÿ±Ÿàÿπ ÿßŸÑŸÜÿ¥ÿ∑ÿ©\r\n        const trialActive = (userData as any)?.isOnFreeTrial === true || (userData as any)?.freeTrialActive === true;\r\n        if (trialActive) {\r\n          console.log('‚úÖ PendingApprovalPage: Free trial active, redirecting...');\r\n          setTimeout(() => { navigate('/user/dashboard', { replace: true }); }, 800);\r\n          return;\r\n        }\r\n\r\n        const branchActive = (userData as any)?.branchPackage?.status === 'active';\r\n        if (branchActive) {\r\n          console.log('‚úÖ PendingApprovalPage: Branch package active, redirecting...');\r\n          setTimeout(() => { navigate('/user/dashboard', { replace: true }); }, 800);\r\n          return;\r\n        }\r\n\r\n        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸÇÿ∑ (ÿØŸàŸÜ ÿßŸÑÿßÿπÿ™ŸÖÿßÿØ ÿπŸÑŸâ approved)\r\n        const sub = userData.subscription;\r\n        if (sub && sub.isActive === true) {\r\n          const isValidSubscription = isSubscriptionValid(sub);\r\n          console.log('üîç PendingApprovalPage: Subscription validation result:', {\r\n            hasSubscription: !!sub,\r\n            isActive: sub.isActive,\r\n            isValid: isValidSubscription,\r\n            planType: sub.planType\r\n          });\r\n          if (isValidSubscription) {\r\n            console.log('‚úÖ PendingApprovalPage: Valid subscription found, redirecting to dashboard...');\r\n            setTimeout(() => { navigate('/user/dashboard', { replace: true }); }, 800);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }, (error) => {\r\n      console.error('‚ùå PendingApprovalPage: Error in real-time listener:', error);\r\n    });\r\n\r\n    return () => {\r\n      console.log('üîå PendingApprovalPage: Cleaning up real-time listener');\r\n      unsubscribe();\r\n    };\r\n  }, [user?.uid, navigate]);\r\n\r\n  // ŸÖÿ≥ÿ™ŸÖÿπ ŸÑÿ•ÿ¥ÿπÿßÿ± ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÖŸÜ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©\r\n  useEffect(() => {\r\n    const handleSubscriptionActivated = (event: CustomEvent) => {\r\n      const { userId, planType } = event.detail;\r\n      console.log('üéâ PendingApprovalPage: Subscription activation event received:', { userId, planType, currentUserId: user?.uid });\r\n      \r\n      if (userId === user?.uid) {\r\n        console.log('‚úÖ PendingApprovalPage: Subscription activated for current user');\r\n        toast.success('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ! ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ...');\r\n        \r\n        // ÿ•ÿπÿßÿØÿ© ŸÅÿ≠ÿµ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\r\n        setTimeout(async () => {\r\n          await checkSubscriptionStatus();\r\n          navigate('/user/dashboard', { replace: true });\r\n        }, 1500);\r\n      }\r\n    };\r\n\r\n    console.log('üîî PendingApprovalPage: Setting up subscription activation listener');\r\n    window.addEventListener('subscriptionActivated', handleSubscriptionActivated as EventListener);\r\n    \r\n    return () => {\r\n      console.log('üîå PendingApprovalPage: Cleaning up subscription activation listener');\r\n      window.removeEventListener('subscriptionActivated', handleSubscriptionActivated as EventListener);\r\n    };\r\n  }, [user?.uid, navigate, checkSubscriptionStatus]);\r\n\r\n  // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©\r\n  useEffect(() => {\r\n    console.log('üîç PendingApprovalPage: Checking subscription status on load:', {\r\n      isSubscriptionActive,\r\n      hasUserSubscription: !!userSubscription\r\n    });\r\n\r\n    if (isSubscriptionActive) {\r\n      console.log('‚úÖ PendingApprovalPage: Active subscription detected, redirecting...');\r\n      navigate('/user/dashboard', { replace: true });\r\n    }\r\n  }, [isSubscriptionActive, navigate]);\r\n\r\n  // ÿ•ÿπÿßÿØÿ© ŸÅÿ≠ÿµ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿØŸàÿ±ŸäÿßŸã (ÿ™ŸÖ ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ™ŸÉÿ±ÿßÿ±)\r\n  useEffect(() => {\r\n    if (!user?.uid) return;\r\n\r\n    const intervalId = setInterval(async () => {\r\n      console.log('üîÑ PendingApprovalPage: Periodic subscription status check');\r\n      await checkSubscriptionStatus();\r\n    }, 30000); // ŸÉŸÑ 30 ÿ´ÿßŸÜŸäÿ© ÿ®ÿØŸÑÿßŸã ŸÖŸÜ 10 ÿ´ŸàÿßŸÜŸê\r\n\r\n    return () => {\r\n      clearInterval(intervalId);\r\n    };\r\n  }, [user?.uid, checkSubscriptionStatus]);\r\n\r\n  // ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿ•ÿÆŸÅÿßÿ° ÿÆŸäÿßÿ± ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿ®ÿπÿØ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸáÿß\r\n  useEffect(() => {\r\n    const loadTrialState = async () => {\r\n      if (!user?.uid) return;\r\n      try {\r\n        const data = await FreeTrialService.getTrialData(user.uid);\r\n        setHasUsedTrial(data.hasUsedFreeTrial);\r\n        setIsOnFreeTrial(data.isOnFreeTrial);\r\n      } catch (e) {\r\n        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©:', e);\r\n      }\r\n    };\r\n    loadTrialState();\r\n  }, [user?.uid]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const hours = await FreeTrialService.getTrialDurationHours();\r\n        setTrialDurationHours(hours);\r\n      } catch (e) {\r\n        console.error('ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿØÿ© ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©:', e);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleSignOut = async () => {\r\n    await signOut();\r\n    navigate('/auth');\r\n  };\r\n\r\n  const handleActivateZeroPlan = async () => {\r\n    if (!user?.uid) return;\r\n\r\n    setIsActivatingTrial(true);\r\n    try {\r\n      await activateUserSubscription(user.uid, SubscriptionPlan.ZERO, user.uid);\r\n      toast.success('ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà! ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...');\r\n      setTimeout(() => {\r\n        try { navigate('/user/dashboard', { replace: true }); } catch {}\r\n      }, 1200);\r\n    } catch (error) {\r\n      console.error('Error activating zero plan:', error);\r\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà');\r\n    } finally {\r\n      setIsActivatingTrial(false);\r\n    }\r\n  };\r\n\r\n  const handleActivateTrial = async () => {\r\n    if (!user?.uid) return;\r\n    \r\n    setIsActivatingTrial(true);\r\n    try {\r\n      const result = await FreeTrialService.startFreeTrial(user.uid);\r\n      if (result.success) {\r\n        toast.success(result.message || `ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ŸÑŸÖÿØÿ© ${trialDurationHours} ${trialDurationHours >= 3 && trialDurationHours <= 10 ? 'ÿ≥ÿßÿπÿßÿ™' : trialDurationHours === 2 ? 'ÿ≥ÿßÿπÿ™ŸäŸÜ' : 'ÿ≥ÿßÿπÿ©'}! ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™Ÿàÿ¨ŸäŸá...`);\r\n        setTimeout(() => {\r\n          try { navigate('/user/dashboard', { replace: true }); } catch {}\r\n        }, 1200);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error activating trial:', error);\r\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©');\r\n    } finally {\r\n      setIsActivatingTrial(false);\r\n    }\r\n  };\r\n\r\n  const handleRefresh = async () => {\r\n    setIsRefreshing(true);\r\n    console.log('üîÑ PendingApprovalPage: Manual refresh triggered');\r\n    \r\n    try {\r\n      // ÿ•ÿπÿßÿØÿ© ŸÅÿ≠ÿµ ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\r\n      await checkSubscriptionStatus();\r\n      toast.success('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™');\r\n    } catch (error) {\r\n      console.error('‚ùå Error during manual refresh:', error);\r\n      toast.error('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´');\r\n    } finally {\r\n      setIsRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const openWhatsApp = (plan: string, price: number, features: string[]) => {\r\n    try {\r\n      const text = encodeURIComponent(\r\n        `ÿ£ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ${plan} ÿ®ÿ≥ÿπÿ± ${price} ÿ¨\\nÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™:\\n- ${features.join('\\n- ')}`\r\n      );\r\n      window.open(`https://wa.me/201000392539?text=${text}`, '_blank');\r\n    } catch {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\r\n      <div className=\"w-full max-w-5xl bg-white rounded-2xl shadow-lg border border-gray-200 dark:border-gray-800 p-4 sm:p-6\">\r\n        <div className=\"text-center\">\r\n          <div className=\"flex justify-center mb-2\">\r\n            <div className=\"relative\">\r\n              <div \r\n                className=\"absolute inset-0 rounded-full\"\r\n                style={{ background: 'linear-gradient(135deg, #f59e0b, #d97706)', filter: 'blur(8px)', opacity: 0.3 }}\r\n              />\r\n              <div className=\"relative bg-gradient-to-br from-orange-400 to-orange-600 p-2 rounded-full\">\r\n                <Shield className=\"h-10 w-10 text-white\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <h2 className=\"text-xl font-bold text-gray-800\">ŸÖÿ∑ŸÑŸàÿ® ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®</h2>\r\n          <p className=\"text-gray-700 text-sm mt-1\">ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© Ÿàÿßÿ∂ÿ∫ÿ∑ ÿ≤ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ® ŸÑŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑŸÅŸàÿ±Ÿä.</p>\r\n        </div>\r\n\r\n        <div className=\"pt-4\">\r\n          <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2 items-stretch\">\r\n            {PLANS.map((p) => (\r\n              <div key={p.title} className={`h-full rounded-lg p-2 border shadow-sm bg-gradient-to-br ${p.bg} dark:from-gray-800 dark:to-gray-700 dark:border-gray-700`}>\r\n                <div className=\"font-bold text-sm text-gray-800 dark:text-gray-100 mb-1\">{p.title}</div>\r\n                <div className=\"text-lg font-extrabold text-gray-900 dark:text-gray-100 mb-2\">{p.price} ÿ¨</div>\r\n                <ul className=\"text-[11px] text-gray-700 dark:text-gray-200 text-right space-y-1 mb-2\">\r\n                  {p.features.map((f) => (\r\n                    <li key={f}>‚Ä¢ {f}</li>\r\n                  ))}\r\n                </ul>\r\n                <Button size=\"sm\" className=\"w-full bg-green-600 hover:bg-green-700 text-xs py-1 h-8\" onClick={() => openWhatsApp(p.title, p.price, p.features)}>\r\n                  ÿ™ŸàÿßÿµŸÑ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®\r\n                </Button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-3\">\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-2\">\r\n            <Button size=\"sm\" className=\"w-full bg-emerald-600 hover:bg-emerald-700\" onClick={handleActivateZeroPlan} disabled={isActivatingTrial}>\r\n              ÿ¨ÿ±ÿ® ÿ®ÿßŸÇÿ© ÿßŸÑÿ≤Ÿäÿ±Ÿà\r\n            </Button>\r\n            {!hasUsedTrial && !isOnFreeTrial && (\r\n              <Button size=\"sm\" className=\"w-full bg-blue-600 hover:bg-blue-700\" onClick={handleActivateTrial} disabled={isActivatingTrial}>\r\n                {`ÿ¨ÿ±ÿ® ÿßŸÑÿ®ÿ±ŸÜÿßŸÖÿ¨ ${trialDurationHours} ${trialDurationHours >= 3 && trialDurationHours <= 10 ? 'ÿ≥ÿßÿπÿßÿ™' : trialDurationHours === 2 ? 'ÿ≥ÿßÿπÿ™ŸäŸÜ' : 'ÿ≥ÿßÿπÿ©'}`}\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <Button variant=\"outline\" className=\"border-2 border-gray-300 hover:border-gray-400 text-gray-700 hover:text-gray-800 px-5 py-2 rounded-lg font-semibold text-xs transition-all duration-300\" onClick={handleSignOut}>\r\n            ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["PendingApprovalPage","user","signOut","userSubscription","isSubscriptionActive","checkSubscriptionStatus","useFirebaseAuth","navigate","useNavigate","isActivatingTrial","setIsActivatingTrial","useState","isRefreshing","setIsRefreshing","hasUsedTrial","setHasUsedTrial","isOnFreeTrial","setIsOnFreeTrial","trialDurationHours","setTrialDurationHours","PLANS","useEffect","userDocRef","doc","db","unsubscribe","onSnapshot","userData","_a","_b","sub","isValidSubscription","isSubscriptionValid","error","handleSubscriptionActivated","event","userId","planType","toast","intervalId","data","FreeTrialService","e","hours","handleSignOut","handleActivateZeroPlan","activateUserSubscription","SubscriptionPlan","handleActivateTrial","result","openWhatsApp","plan","price","features","text","jsxs","jsx","Shield","p","f","Button"],"mappings":"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"}