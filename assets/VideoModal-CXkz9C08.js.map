{"version":3,"file":"VideoModal-CXkz9C08.js","sources":["../../node_modules/lucide-react/dist/esm/icons/circle-play.js","../../src/components/VideoModal.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.561.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z\",\n      key: \"kmsa83\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst CirclePlay = createLucideIcon(\"circle-play\", __iconNode);\n\nexport { __iconNode, CirclePlay as default };\n//# sourceMappingURL=circle-play.js.map\n","import React from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Capacitor } from '@capacitor/core';\nimport { AppLauncher } from '@capacitor/app-launcher';\n\ninterface VideoModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  videoUrl: string;\n  title?: string;\n  className?: string;\n}\n\nexport const VideoModal: React.FC<VideoModalProps> = ({\n  isOpen,\n  onClose,\n  videoUrl,\n  title = 'فيديو توضيحي',\n  className\n}) => {\n  // Extract video ID from URL to construct embed URL\n  const getEmbedUrl = (url: string) => {\n    try {\n      let videoId = '';\n      if (url.includes('youtube.com/watch?v=')) {\n        videoId = url.split('v=')[1];\n        const ampersandPosition = videoId.indexOf('&');\n        if (ampersandPosition !== -1) {\n          videoId = videoId.substring(0, ampersandPosition);\n        }\n      } else if (url.includes('youtu.be/')) {\n        videoId = url.split('youtu.be/')[1];\n      } else if (url.includes('youtube.com/embed/')) {\n        return url; // Already an embed URL\n      }\n\n      if (videoId) {\n        return `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;\n      }\n      return url;\n    } catch (e) {\n      console.error('Error parsing video URL:', e);\n      return url;\n    }\n  };\n\n  const embedUrl = getEmbedUrl(videoUrl);\n  const isElectron = typeof window !== 'undefined' && 'electronAPI' in window;\n  const isNative = Capacitor.isNativePlatform();\n\n  React.useEffect(() => {\n    if (isOpen) {\n      // منطق التعامل مع الإلكترون (Desktop)\n      if (isElectron) {\n        let targetUrl = videoUrl;\n        if (targetUrl.includes('/embed/')) {\n          const parts = targetUrl.split('/embed/');\n          const videoId = parts[1].split('?')[0];\n          targetUrl = `https://www.youtube.com/watch?v=${videoId}`;\n        }\n        (window as any).electronAPI.openVideoWindow(targetUrl);\n        onClose();\n        return;\n      }\n\n      // منطق التعامل مع الموبايل (Android/iOS)\n      // نفتح الفيديو في تطبيق يوتيوب أو المتصفح لتجنب مشاكل التضمين (Error 153)\n      if (isNative) {\n        let targetUrl = videoUrl;\n        if (targetUrl.includes('/embed/')) {\n          const parts = targetUrl.split('/embed/');\n          const videoId = parts[1].split('?')[0];\n          targetUrl = `https://www.youtube.com/watch?v=${videoId}`;\n        }\n        \n        AppLauncher.openUrl({ url: targetUrl }).catch(async () => {\n          // Fallback if AppLauncher fails\n          window.open(targetUrl, '_system');\n        });\n        onClose();\n        return;\n      }\n    }\n  }, [isOpen, isElectron, isNative, videoUrl, onClose]);\n\n  if (isElectron || isNative) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className={`sm:max-w-4xl p-0 overflow-hidden bg-black/95 border-gray-800 ${className || ''}`}>\n        <DialogHeader className=\"p-4 flex flex-row items-center justify-between absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent pointer-events-none\">\n          <DialogTitle className=\"text-white text-shadow-sm pointer-events-auto\">{title}</DialogTitle>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={onClose}\n            className=\"text-white hover:bg-white/20 rounded-full h-8 w-8 pointer-events-auto\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </DialogHeader>\n        \n        <div className=\"relative w-full aspect-video bg-black\">\n          <iframe\n            src={embedUrl}\n            title={title}\n            className=\"absolute top-0 left-0 w-full h-full\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            referrerPolicy=\"no-referrer\"\n          />\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":["__iconNode","CirclePlay","createLucideIcon","VideoModal","isOpen","onClose","videoUrl","title","className","embedUrl","url","videoId","ampersandPosition","e","isElectron","isNative","Capacitor","React","targetUrl","AppLauncher","Dialog","open","jsxs","DialogContent","DialogHeader","jsx","DialogTitle","Button","X"],"mappings":"qHAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,EAAa,CACjB,CACE,OACA,CACE,EAAG,+FACH,IAAK,QACX,CACA,EACE,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,QAAQ,CAAE,CAC3D,EACMC,EAAaC,EAAiB,cAAeF,CAAU,ECJhDG,EAAwC,CAAC,CACpD,OAAAC,EACA,QAAAC,EACA,SAAAC,EACA,MAAAC,EAAQ,eACR,UAAAC,CACF,IAAM,CA2BJ,MAAMC,GAzBeC,GAAgB,CACnC,GAAI,CACF,IAAIC,EAAU,GACd,GAAID,EAAI,SAAS,sBAAsB,EAAG,CACxCC,EAAUD,EAAI,MAAM,IAAI,EAAE,CAAC,EAC3B,MAAME,EAAoBD,EAAQ,QAAQ,GAAG,EACzCC,IAAsB,KACxBD,EAAUA,EAAQ,UAAU,EAAGC,CAAiB,EAEpD,SAAWF,EAAI,SAAS,WAAW,EACjCC,EAAUD,EAAI,MAAM,WAAW,EAAE,CAAC,UACzBA,EAAI,SAAS,oBAAoB,EAC1C,OAAOA,EAGT,OAAIC,EACK,iCAAiCA,CAAO,oBAE1CD,CACT,OAASG,EAAG,CACV,eAAQ,MAAM,2BAA4BA,CAAC,EACpCH,CACT,CACF,GAE6BJ,CAAQ,EAC/BQ,EAAa,OAAO,OAAW,KAAe,gBAAiB,OAC/DC,EAAWC,EAAU,iBAAA,EAqC3B,OAnCAC,EAAM,UAAU,IAAM,CACpB,GAAIb,EAAQ,CAEV,GAAIU,EAAY,CACd,IAAII,EAAYZ,EACZY,EAAU,SAAS,SAAS,IAG9BA,EAAY,mCAFEA,EAAU,MAAM,SAAS,EACjB,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CACiB,IAEvD,OAAe,YAAY,gBAAgBA,CAAS,EACrDb,EAAA,EACA,MACF,CAIA,GAAIU,EAAU,CACZ,IAAIG,EAAYZ,EACZY,EAAU,SAAS,SAAS,IAG9BA,EAAY,mCAFEA,EAAU,MAAM,SAAS,EACjB,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,CACiB,IAGxDC,EAAY,QAAQ,CAAE,IAAKD,EAAW,EAAE,MAAM,SAAY,CAExD,OAAO,KAAKA,EAAW,SAAS,CAClC,CAAC,EACDb,EAAA,EACA,MACF,CACF,CACF,EAAG,CAACD,EAAQU,EAAYC,EAAUT,EAAUD,CAAO,CAAC,EAEhDS,GAAcC,EAAiB,WAGhCK,EAAA,CAAO,KAAMhB,EAAQ,aAAeiB,GAAS,CAACA,GAAQhB,EAAA,EACrD,SAAAiB,EAAAA,KAACC,EAAA,CAAc,UAAW,gEAAgEf,GAAa,EAAE,GACvG,SAAA,CAAAc,EAAAA,KAACE,EAAA,CAAa,UAAU,sJACtB,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAY,UAAU,gDAAiD,SAAAnB,EAAM,EAC9EkB,EAAAA,IAACE,EAAA,CACC,QAAQ,QACR,KAAK,OACL,QAAStB,EACT,UAAU,wEAEV,SAAAoB,EAAAA,IAACG,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAH,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,EAAAA,IAAC,SAAA,CACC,IAAKhB,EACL,MAAAF,EACA,UAAU,sCACV,YAAY,IACZ,MAAM,2FACN,gBAAe,GACf,eAAe,aAAA,CAAA,CACjB,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ","x_google_ignoreList":[0]}