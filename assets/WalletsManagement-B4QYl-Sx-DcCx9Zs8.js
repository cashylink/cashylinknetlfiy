import{S as h,W as Q,d as G,C as ae,aV as W,I as e,a as g,ae as M,b as K,aI as P,aJ as Y,aK as q,aL as J,t as L,a9 as B,at as ie,aW as H}from"./index-BsVRzvOf.js";import{o as V,c as se,i as re,l as Z}from"./card-SlwaggFS-BswsJdJN.js";import{d as le}from"./badge-Cq-GDK1F-DqoYRGyo.js";import{L as ne,k as _}from"./progress-BOoGedvV-DsOOhwhn.js";import{u as v}from"./label-_mnIMROJ-DudSd8Mh.js";import{o as de,$ as oe,r as me,Z as ce,Q as A}from"./select-QKdc2TYn-4nnF_b5r.js";import{l as he}from"./dropdown-menu-MkPhHRIa-C3szlXVH.js";import{r as ue}from"./square-pen-CHl7RpbW-B-WGGV3A.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=K("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
* @license lucide-react v0.462.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ge=K("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);function fe({open:y,onOpenChange:N,wallet:a,onSuccess:I}){const[i,d]=h.useState({provider:(a==null?void 0:a.provider)||"",msisdn:(a==null?void 0:a.msisdn)||"",dailyLimit:(a==null?void 0:a.dailyLimit)||0,monthlyLimit:(a==null?void 0:a.monthlyLimit)||0,transferLimit:(a==null?void 0:a.transferLimit)||2e5,withdrawLimit:(a==null?void 0:a.withdrawLimit)||2e5,dailyTransferLimit:(a==null?void 0:a.dailyTransferLimit)||6e4,dailyWithdrawLimit:(a==null?void 0:a.dailyWithdrawLimit)||1e5,monthlyTransferLimit:(a==null?void 0:a.monthlyTransferLimit)||(a==null?void 0:a.transferLimit)||2e5,monthlyWithdrawLimit:(a==null?void 0:a.monthlyWithdrawLimit)||(a==null?void 0:a.withdrawLimit)||2e5,ownerName:(a==null?void 0:a.ownerName)||"",nationalId:(a==null?void 0:a.nationalId)||""}),[o,b]=h.useState(!1),[F,u]=h.useState(null),{user:m,userSubscription:w}=Q(),{toast:S}=G();h.useEffect(()=>{y&&a?(d({provider:a.provider||"",msisdn:a.msisdn||"",dailyLimit:a.dailyLimit??0,monthlyLimit:a.monthlyLimit??0,transferLimit:a.transferLimit??2e5,withdrawLimit:a.withdrawLimit??2e5,dailyTransferLimit:a.dailyTransferLimit??6e4,dailyWithdrawLimit:a.dailyWithdrawLimit??1e5,monthlyTransferLimit:a.monthlyTransferLimit??a.transferLimit??2e5,monthlyWithdrawLimit:a.monthlyWithdrawLimit??a.withdrawLimit??2e5,ownerName:a.ownerName||"",nationalId:a.nationalId||""}),u(null)):y&&!a&&(d({provider:"",msisdn:"",dailyLimit:0,monthlyLimit:0,transferLimit:2e5,withdrawLimit:2e5,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,ownerName:"",nationalId:""}),u(null))},[a,y]);const C=(r,x)=>{const s=r.slice(0,3);return x==="vodafone_cash"&&s==="010"||x==="orange_cash"&&s==="012"||x==="etisalat_cash"&&s==="011"||x==="instapay"&&s==="015"},E=r=>{switch(r){case"INVALID_MSISDN":return"رقم المحفظة غير صالح.";case"PROVIDER_MISMATCH":return"المزوّد لا يطابق مقدمة الرقم.";case"ALREADY_EXISTS":return"المحفظة مضافة قبل كده.";case"RLS_DENIED":return"ليست لديك صلاحية لإضافة المحفظة.";default:return"خطأ غير متوقع."}},T=async r=>{var x;if(r.preventDefault(),u(null),!/^01\d{9}$/.test(i.msisdn)){u("اكتب رقم 11 رقم يبدأ بـ 01.");return}if(!C(i.msisdn,i.provider)){u("مقدم الخدمة لا يتطابق مع مقدمة الرقم.");return}if(!(a!=null&&a.id)&&m!=null&&m.uid)try{let s=!1;const n=((x=w==null?void 0:w.subscription)==null?void 0:x.planType)??(w==null?void 0:w.planType)??null,p=typeof n=="string"?n.toLowerCase():null;if(n===B.ZERO||p==="zero"||n===0||p==="0")s=!0;else{const f=await ie(m.uid),U=(f==null?void 0:f.planType)??(f==null?void 0:f.plan)??null,k=typeof U=="string"?U.toLowerCase():null;s=U===B.ZERO||k==="zero"||U===0||k==="0"}if(s&&(await W.getByMerchantId(m.uid)).length>=5){u("باقة زيرو تسمح بإضافة 5 محافظ فقط. قم بالترقية."),S({title:"تحذير",description:"لا يمكنك إضافة أكثر من 5 محافظ في باقة زيرو. قم بالترقية.",variant:"destructive"});return}}catch(s){console.warn("Zero plan limit check failed:",s)}b(!0);try{if(!(m!=null&&m.uid)){console.warn("يجب تسجيل الدخول قبل حفظ/إضافة المحفظة");return}const s={...i,merchantUserId:m==null?void 0:m.uid,isActive:!0,provider:i.provider};if(console.log("Saving wallet data:",s),a!=null&&a.id)await W.update(a.id,s),await H.setLimits(a.id,{dailyTransferLimit:i.dailyTransferLimit,dailyWithdrawLimit:i.dailyWithdrawLimit,monthlyTransferLimit:i.monthlyTransferLimit??i.transferLimit,monthlyWithdrawLimit:i.monthlyWithdrawLimit??i.withdrawLimit}),console.log("Wallet updated successfully"),I();else{console.log("Creating new wallet...");const n=await W.create(s);console.log("Wallet created with ID:",n),await H.setLimits(n,{dailyTransferLimit:i.dailyTransferLimit,dailyWithdrawLimit:i.dailyWithdrawLimit,monthlyTransferLimit:i.monthlyTransferLimit??i.transferLimit,monthlyWithdrawLimit:i.monthlyWithdrawLimit??i.withdrawLimit});const p={id:n,...s,dailyUsage:0,monthlyUsage:0};console.log("Final wallet object:",p),I(p)}S({title:"تم إضافة المحفظة",description:`تم ${a!=null&&a.id?"تحديث":"إضافة"} المحفظة بنجاح`}),N(!1)}catch(s){console.error("Error saving wallet:",s);let n="حصل خطأ أثناء الإضافة";s.code?n=E(s.code):s.message&&(n=s.message),S({title:"خطأ",description:n,variant:"destructive"})}finally{b(!1)}};return e.jsx(P,{open:y,onOpenChange:N,children:e.jsxs(Y,{className:"sm:max-w-md",children:[e.jsx(q,{children:e.jsx(J,{children:a!=null&&a.id?"تعديل المحفظة":"إضافة محفظة جديدة"})}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"provider",children:"المزود"}),e.jsxs(de,{value:i.provider,onValueChange:r=>d({...i,provider:r}),disabled:o,children:[e.jsx(oe,{children:e.jsx(me,{placeholder:"اختر المزود"})}),e.jsxs(ce,{children:[e.jsx(A,{value:"vodafone_cash",children:"Vodafone Cash"}),e.jsx(A,{value:"etisalat_cash",children:"Etisalat Cash"}),e.jsx(A,{value:"orange_cash",children:"Orange Cash"}),e.jsx(A,{value:"instapay",children:"InstaPay"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"msisdn",children:"رقم الهاتف"}),e.jsx(L,{id:"msisdn",placeholder:"01xxxxxxxxx",value:i.msisdn,onChange:r=>d({...i,msisdn:r.target.value}),disabled:o,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"ownerName",children:"اسم صاحب المحفظة (اختياري)"}),e.jsx(L,{id:"ownerName",type:"text",value:i.ownerName,onChange:r=>d({...i,ownerName:r.target.value}),disabled:o,placeholder:"اكتب اسم صاحب المحفظة"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"nationalId",children:"الرقم القومي (اختياري)"}),e.jsx(L,{id:"nationalId",type:"text",value:i.nationalId,onChange:r=>d({...i,nationalId:r.target.value}),disabled:o,placeholder:"الرقم القومي"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"dailyWithdrawLimit",children:"حد السحب اليومي (ج.م)"}),e.jsx(L,{id:"dailyWithdrawLimit",type:"number",min:"0",step:"0.01",value:i.dailyWithdrawLimit,onChange:r=>d({...i,dailyWithdrawLimit:parseFloat(r.target.value)||0}),disabled:o,placeholder:"100000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"dailyTransferLimit",children:"حد التحويل اليومي (ج.م)"}),e.jsx(L,{id:"dailyTransferLimit",type:"number",min:"0",step:"0.01",value:i.dailyTransferLimit,onChange:r=>d({...i,dailyTransferLimit:parseFloat(r.target.value)||0}),disabled:o,placeholder:"60000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"monthlyWithdrawLimit",children:"حد السحب الشهري (ج.م)"}),e.jsx(L,{id:"monthlyWithdrawLimit",type:"number",min:"0",step:"0.01",value:i.monthlyWithdrawLimit,onChange:r=>d({...i,monthlyWithdrawLimit:parseFloat(r.target.value)||2e5}),disabled:o,placeholder:"200000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"monthlyTransferLimit",children:"حد التحويل الشهري (ج.م)"}),e.jsx(L,{id:"monthlyTransferLimit",type:"number",min:"0",step:"0.01",value:i.monthlyTransferLimit,onChange:r=>d({...i,monthlyTransferLimit:parseFloat(r.target.value)||2e5}),disabled:o,placeholder:"200000"})]})]}),F&&e.jsx("div",{className:"text-red-600 text-sm mt-2",children:F}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>N(!1),disabled:o,children:"إلغاء"}),e.jsx(g,{type:"submit",disabled:o,className:"btn-primary",children:o?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"}),"جارِ الإضافة…"]}):a!=null&&a.id?"تحديث المحفظة":"إضافة المحفظة"})]})]})]})})}function Se({showAddButton:y=!0,showUsageBars:N=!0,showLimitCards:a=!0,showEditButton:I=!0}){const[i,d]=h.useState([]),[o,b]=h.useState(!0),[F,u]=h.useState(!1),[m,w]=h.useState(null),[S,C]=h.useState(y),[E,T]=h.useState(!1),[r,x]=h.useState(null),{user:s}=Q(),{toast:n}=G(),p=ae();h.useEffect(()=>{s!=null&&s.uid&&f()},[s==null?void 0:s.uid]);const f=async()=>{try{if(!(s!=null&&s.uid)){d([]),b(!1);return}b(!0);const t=(await W.getByMerchantId(s.uid)).map(l=>({...l,dailyUsage:l.dailyUsage||0,monthlyUsage:l.monthlyUsage||0,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0}));d(t)}catch(t){console.error("Error fetching wallets from Firebase:",t),n({title:"خطأ",description:"فشل في تحميل المحافظ من الخادم. يرجى المحاولة مرة أخرى.",variant:"destructive"}),d([])}finally{b(!1)}},U=async(t,l)=>{try{await W.update(t,{isActive:!l});const c=i.map(j=>j.id===t?{...j,isActive:!j.isActive}:j);d(c),n({title:"تم التحديث",description:`تم ${l?"إلغاء تفعيل":"تفعيل"} المحفظة بنجاح`})}catch(c){console.error("Error toggling wallet status:",c),n({title:"خطأ",description:"فشل في تحديث حالة المحفظة",variant:"destructive"})}},k=async(t,l)=>{x({id:t,msisdn:l}),T(!0)},X=async()=>{if(r)try{await W.delete(r.id);const t=i.filter(l=>l.id!==r.id);d(t),s!=null&&s.uid&&await f(),n({title:"تم الحذف",description:`تم حذف المحفظة ${r.msisdn} بنجاح`})}catch(t){console.error("Error deleting wallet:",t),n({title:"خطأ",description:"فشل في حذف المحفظة",variant:"destructive"})}finally{T(!1),x(null)}},O=(t,l)=>{if(l===0)return"bg-muted";const c=t/l*100;return c>=100?"bg-destructive":c>=80?"bg-warning":"bg-success"},$=t=>{switch(t){case"vodafone_cash":return"bg-red-600";case"etisalat_cash":return"bg-green-600";case"orange_cash":return"bg-orange-600";case"instapay":return"bg-blue-600";default:return"bg-gray-600"}},ee=t=>{switch(t){case"vodafone_cash":return"#dc2626";case"etisalat_cash":return"#16a34a";case"orange_cash":return"#ea580c";case"instapay":return"#2563eb";default:return"#6b7280"}},te=t=>{switch(t){case"vodafone_cash":return"فودافون كاش";case"etisalat_cash":return"اتصالات كاش";case"orange_cash":return"أورانج كاش";case"instapay":return"إنستاباي";default:return String(t).replace(/_/g," ")}};return o?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"}),e.jsx("p",{className:"text-muted-foreground animate-pulse",children:"جاري تحميل المحافظ..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"محافظي"}),e.jsxs(g,{variant:"outline",size:"sm",onClick:f,disabled:o,className:"flex items-center gap-2",children:[e.jsx("svg",{className:`w-4 h-4 ${o?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"تحديث"]})]}),y&&S&&e.jsxs(g,{onClick:()=>{u(!0),C(!1)},className:"btn-primary",children:[e.jsx(M,{className:"ml-2 h-4 w-4"}),"إضافة محفظة جديدة"]})]}),e.jsxs("div",{className:"grid gap-6",children:[i.map(t=>{var l,c,j,R,z,D;return e.jsxs(V,{className:"card-glass hover:shadow-lg transition-all duration-300 border-l-4",style:{borderLeftColor:ee(t.provider)},children:[e.jsx(se,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:`${$(t.provider)} text-white font-medium px-3 py-1`,children:te(t.provider)}),e.jsx("div",{className:`w-3 h-3 rounded-full ${t.isActive?"bg-green-500":"bg-gray-400"}`,title:t.isActive?"نشط":"غير نشط"})]}),e.jsx(re,{className:"text-xl font-bold text-primary",children:t.msisdn}),t.label&&e.jsxs("span",{className:"text-sm text-muted-foreground font-medium",children:["(",t.label,")"]})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg p-2",children:[I&&e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{p(`/user/add-wallet?edit=1&id=${t.id}`)},children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>U(t.id,t.isActive),children:t.isActive?e.jsx(ge,{className:"h-5 w-5 text-success"}):e.jsx(xe,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>k(t.id,t.msisdn),className:"text-destructive hover:text-destructive",children:e.jsx(ne,{className:"h-4 w-4"})})]})]})}),e.jsx(Z,{className:"pt-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-3 rounded-md border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"text-xs text-gray-600 font-medium mb-2 text-center",children:["الحدود الشهرية: ",t.provider," - ",t.msisdn]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden flex",children:[e.jsx("div",{className:"w-1/2 bg-red-200 relative",children:e.jsx("div",{className:"bg-gradient-to-r from-red-400 to-red-600 h-2 transition-all duration-200 ease-out",style:{width:`${t.withdrawLimit?Math.min((t.withdrawUsage||0)/t.withdrawLimit*100,100):0}%`}})}),e.jsx("div",{className:"w-1/2 bg-blue-200 relative",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2 transition-all duration-200 ease-out",style:{width:`${t.transferLimit?Math.min((t.transferUsage||0)/t.transferLimit*100,100):0}%`}})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("div",{className:"text-xs text-red-600 font-medium",children:["متبقي سحب: ",Math.max((t.withdrawLimit||0)-(t.withdrawUsage||0),0).toLocaleString()," جنيه"]}),e.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["متبقي تحويل: ",Math.max((t.transferLimit||0)-(t.transferUsage||0),0).toLocaleString()," جنيه"]})]})]}),N&&e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"الاستخدام اليومي"}),e.jsxs("span",{className:"font-bold",children:[(l=t.dailyUsage)==null?void 0:l.toLocaleString()," / ",t.dailyLimit>0?t.dailyLimit.toLocaleString():"∞"," جنيه"]})]}),e.jsx(_,{value:t.dailyLimit>0?Math.min((t.dailyUsage||0)/t.dailyLimit*100,100):0,className:`h-3 ${O(t.dailyUsage||0,t.dailyLimit)}`}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[t.dailyLimit>0?((t.dailyUsage||0)/t.dailyLimit*100).toFixed(1):0,"% مستخدم"]})]}),N&&e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[e.jsx("span",{className:"font-medium text-muted-foreground",children:"الاستخدام الشهري"}),e.jsxs("span",{className:"font-bold",children:[(c=t.monthlyUsage)==null?void 0:c.toLocaleString()," / ",t.monthlyLimit>0?t.monthlyLimit.toLocaleString():"∞"," جنيه"]})]}),e.jsx(_,{value:t.monthlyLimit>0?Math.min((t.monthlyUsage||0)/t.monthlyLimit*100,100):0,className:`h-3 ${O(t.monthlyUsage||0,t.monthlyLimit)}`}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[t.monthlyLimit>0?((t.monthlyUsage||0)/t.monthlyLimit*100).toFixed(1):0,"% مستخدم"]})]}),a&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"حد التحويل"}),e.jsxs("span",{className:"font-bold text-blue-900",children:[((j=t.transferUsage)==null?void 0:j.toLocaleString())||0," / ",((R=t.transferLimit)==null?void 0:R.toLocaleString())||2e5," جنيه"]})]}),e.jsx(_,{value:t.transferLimit?Math.min((t.transferUsage||0)/t.transferLimit*100,100):0,className:"h-3 bg-blue-100"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1 text-right",children:[t.transferLimit?((t.transferUsage||0)/t.transferLimit*100).toFixed(1):0,"% مستخدم"]}),e.jsxs("div",{className:"text-xs text-blue-700 mt-1 text-right font-medium",children:["المتبقي: ",Math.max((t.transferLimit||0)-(t.transferUsage||0),0).toLocaleString()," جنيه"]})]}),a&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[e.jsx("span",{className:"font-medium text-green-700",children:"حد السحب"}),e.jsxs("span",{className:"font-bold text-green-900",children:[((z=t.withdrawUsage)==null?void 0:z.toLocaleString())||0," / ",((D=t.withdrawLimit)==null?void 0:D.toLocaleString())||2e5," جنيه"]})]}),e.jsx(_,{value:t.withdrawLimit?Math.min((t.withdrawUsage||0)/t.withdrawLimit*100,100):0,className:"h-3 bg-green-100"}),e.jsxs("div",{className:"text-xs text-green-600 mt-1 text-right",children:[t.withdrawLimit?((t.withdrawUsage||0)/t.withdrawLimit*100).toFixed(1):0,"% مستخدم"]}),e.jsxs("div",{className:"text-xs text-green-700 mt-1 text-right font-medium",children:["المتبقي: ",Math.max((t.withdrawLimit||0)-(t.withdrawUsage||0),0).toLocaleString()," جنيه"]})]})]})})]},t.id)}),i.length===0&&e.jsx(V,{className:"card-glass",children:e.jsxs(Z,{className:"text-center py-16",children:[e.jsx("div",{className:"bg-muted/30 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:e.jsx(M,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد محافظ"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"ابدأ بإضافة محفظتك الأولى لتتمكن من استقبال المدفوعات من عملائك"}),y&&S&&e.jsxs(g,{onClick:()=>{u(!0),C(!1)},size:"lg",className:"btn-primary px-8",children:[e.jsx(M,{className:"w-5 h-5 ml-2"}),"إضافة محفظة جديدة"]})]})})]}),e.jsx(fe,{open:F,onOpenChange:t=>{u(t),t||(w(null),C(!0))},wallet:m,onSuccess:t=>{console.log("onSuccess called with:",t),console.log("editingWallet:",m),t&&!m?(console.log("Adding new wallet to list"),d(l=>{const c=[...l,t];return console.log("Updated wallets list:",c),c})):(console.log("Refreshing wallets from Firebase"),f()),u(!1),w(null),C(!0)}}),e.jsx(P,{open:E,onOpenChange:T,children:e.jsxs(Y,{children:[e.jsx(q,{children:e.jsx(J,{children:"تأكيد حذف المحفظة"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["هل أنت متأكد من حذف المحفظة ",r==null?void 0:r.msisdn,"؟ هذا الإجراء لا يمكن التراجع عنه."]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(g,{variant:"outline",onClick:()=>T(!1),children:"إلغاء"}),e.jsx(g,{variant:"destructive",onClick:X,children:"حذف"})]})]})]})})]})}export{Se as S};
//# sourceMappingURL=WalletsManagement-B4QYl-Sx-DcCx9Zs8.js.map
