{"version":3,"mappings":"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","names":["MapPin","createLucideIcon","UserAccountSetupPage","searchParams","useSearchParams","userName","navigate","useNavigate","toast","useToast","user","useFirebaseAuth","formData","setFormData","useState","loading","setLoading","error","setError","showTrialModal","setShowTrialModal","accountSetupComplete","setAccountSetupComplete","useEffect","handleInputChange","e","name","value","prev","validateForm","handleSubmit","addDoc","collection","serverTimestamp","__vitePreload","n","db","shopId","profileService","jsxs","jsx","Store","Card","CardHeader","CardTitle","User","CardContent","Alert","AlertDescription","Label","Input","Phone","Button","CheckCircle","ArrowRight"],"ignoreList":[0],"sources":["../../node_modules/lucide-react/dist/esm/icons/map-pin.js","../../src/pages/UserAccountSetupPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MapPin = createLucideIcon(\"MapPin\", [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n]);\n\nexport { MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { User, Store, Phone, MapPin, ArrowRight, CheckCircle } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { useFirebaseAuth } from '@/contexts/FirebaseAuthContext';\n// تم إزالة TrialOfferModal\nimport { profileService } from '@/integrations/firebase/services';\n\nconst UserAccountSetupPage = () => {\n  const [searchParams] = useSearchParams();\n  const userName = searchParams.get('user_name') || '';\n  const navigate = useNavigate();\n  const { toast } = useToast();\n  const { user } = useFirebaseAuth();\n  \n  const [formData, setFormData] = useState({\n    shopName: '',\n    shopAddress: '',\n    phoneNumber: '',\n    description: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [showTrialModal, setShowTrialModal] = useState(false);\n  const [accountSetupComplete, setAccountSetupComplete] = useState(false);\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/auth');\n      return;\n    }\n  }, [user, navigate]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const validateForm = () => {\n    if (!formData.shopName.trim()) {\n      setError('اسم المتجر مطلوب');\n      return false;\n    }\n    if (!formData.phoneNumber.trim()) {\n      setError('رقم الهاتف مطلوب');\n      return false;\n    }\n    if (!formData.shopAddress.trim()) {\n      setError('عنوان المتجر مطلوب');\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      // إنشاء profile للتاجر مع بيانات المتجر\n      if (user) {\n        const { addDoc, collection, serverTimestamp } = await import('firebase/firestore');\n        const { db } = await import('@/firebase');\n        const shopRef = await addDoc(collection(db, 'shops'), {\n          name: formData.shopName || 'متجر جديد',\n          ownerId: user.uid,\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp(),\n          isActive: true,\n        });\n        const shopId = shopRef.id;\n        \n        await profileService.create({\n          userId: user.uid,\n          shopId,\n          role: 'merchant',\n          fullName: userName,\n          phone: formData.phoneNumber,\n        });\n      }\n      \n      toast({\n        title: \"تم إعداد الحساب بنجاح\",\n        description: `مرحباً ${userName}! تم إعداد متجرك \"${formData.shopName}\" بنجاح`,\n      });\n      \n      // إظهار نافذة التجربة المجانية بدلاً من التوجيه المباشر\n      setAccountSetupComplete(true);\n      setShowTrialModal(true);\n      \n    } catch (error: any) {\n      console.error('Account setup error:', error);\n      setError('حدث خطأ أثناء إعداد الحساب');\n      toast({\n        title: \"خطأ في إعداد الحساب\",\n        description: \"حدث خطأ أثناء إعداد الحساب، يرجى المحاولة مرة أخرى\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleStartTrial = async () => {\n    // تم إزالة منطق التجربة المجانية\n    setShowTrialModal(false);\n    navigate('/user/login');\n  };\n\n  const handleSkipTrial = () => {\n    setShowTrialModal(false);\n    navigate('/user/dashboard');\n  };\n\n  if (!user) {\n    return null; // سيتم التوجيه إلى صفحة المصادقة\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-2xl\">\n        {/* Header */}\n        <div className=\"text-center mb-8 fade-in-up\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4 shadow-lg\">\n            <Store className=\"h-8 w-8 text-white\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">مرحباً {userName}!</h1>\n          <p className=\"text-gray-600\">دعنا نقوم بإعداد حساب متجرك</p>\n        </div>\n\n        {/* Setup Form */}\n        <Card className=\"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up\">\n          <CardHeader className=\"text-center pb-4\">\n            <CardTitle className=\"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2\">\n              <User className=\"h-6 w-6 text-blue-600\" />\n              إعداد حساب التاجر\n            </CardTitle>\n            <p className=\"text-gray-600 text-sm mt-2\">\n              أدخل بيانات متجرك لإكمال إعداد الحساب\n            </p>\n          </CardHeader>\n          \n          <CardContent className=\"space-y-6\">\n            {error && (\n              <Alert variant=\"destructive\" className=\"fade-in-up\">\n                <AlertDescription>{error}</AlertDescription>\n              </Alert>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Shop Name */}\n              <div className=\"space-y-2 fade-in-up\">\n                <Label htmlFor=\"shopName\" className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\n                  <Store className=\"h-4 w-4 text-blue-600\" />\n                  اسم المتجر\n                </Label>\n                <Input\n                  id=\"shopName\"\n                  name=\"shopName\"\n                  type=\"text\"\n                  placeholder=\"أدخل اسم متجرك\"\n                  value={formData.shopName}\n                  onChange={handleInputChange}\n                  required\n                  className=\"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              {/* Phone Number */}\n              <div className=\"space-y-2 fade-in-up\">\n                <Label htmlFor=\"phoneNumber\" className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\n                  <Phone className=\"h-4 w-4 text-blue-600\" />\n                  رقم الهاتف\n                </Label>\n                <Input\n                  id=\"phoneNumber\"\n                  name=\"phoneNumber\"\n                  type=\"tel\"\n                  placeholder=\"أدخل رقم هاتف المتجر\"\n                  value={formData.phoneNumber}\n                  onChange={handleInputChange}\n                  required\n                  className=\"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              {/* Shop Address */}\n              <div className=\"space-y-2 fade-in-up\">\n                <Label htmlFor=\"shopAddress\" className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\n                  <MapPin className=\"h-4 w-4 text-blue-600\" />\n                  عنوان المتجر\n                </Label>\n                <Input\n                  id=\"shopAddress\"\n                  name=\"shopAddress\"\n                  type=\"text\"\n                  placeholder=\"أدخل عنوان المتجر\"\n                  value={formData.shopAddress}\n                  onChange={handleInputChange}\n                  required\n                  className=\"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              {/* Description */}\n              <div className=\"space-y-2 fade-in-up\">\n                <Label htmlFor=\"description\" className=\"text-sm font-medium text-gray-700\">\n                  وصف المتجر (اختياري)\n                </Label>\n                <textarea\n                  id=\"description\"\n                  name=\"description\"\n                  placeholder=\"أدخل وصفاً مختصراً عن متجرك\"\n                  value={formData.description}\n                  onChange={handleInputChange}\n                  rows={3}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                />\n              </div>\n\n              {/* Submit Button */}\n              <Button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up\"\n              >\n                {loading ? (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                    جاري إعداد الحساب...\n                  </div>\n                ) : (\n                  <div className=\"flex items-center gap-2\">\n                    <CheckCircle className=\"h-4 w-4\" />\n                    إكمال إعداد الحساب\n                    <ArrowRight className=\"h-4 w-4\" />\n                  </div>\n                )}\n              </Button>\n            </form>\n\n            {/* Info */}\n            <div className=\"text-center pt-4 border-t border-gray-200 fade-in-up\">\n              <p className=\"text-sm text-gray-600\">\n                بعد إكمال الإعداد، ستتمكن من الوصول إلى لوحة تحكم التاجر وإدارة متجرك\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center mt-8 fade-in-up\">\n          <p className=\"text-xs text-gray-500\">\n            © 2024 كاشي لينك. جميع الحقوق محفوظة.\n          </p>\n        </div>\n      </div>\n\n      {/* تم إزالة TrialOfferModal */}\n    </div>\n  );\n};\n\nexport default UserAccountSetupPage;\n"],"file":"assets/UserAccountSetupPage-DfkNvLbN.js"}