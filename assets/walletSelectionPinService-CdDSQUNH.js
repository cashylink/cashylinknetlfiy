import{ai as l,aB as u,r as h,j as o}from"./index-DKHjTn06.js";function x(e,n){if(!e||!e.trim())throw new Error("USSD code is required");const r=`tel:${e.replace(/#/g,"%23")}`,i=`cashy://ussd?code=${e.replace(/#/g,"%23")}${n?`&sim=${n}`:""}`;let s=!1;try{l&&l.getPlatform()!=="web"&&(u.openUrl({url:i}),s=!0)}catch{}if(!s)try{window.location.href=i,s=!0}catch{}if(!s){try{window.location.href=r}catch{}try{l&&l.getPlatform()!=="web"&&u.openUrl({url:r})}catch{}}}function p(e,n){const r=String(e||"").replace(/\D/g,""),t=Math.round(Number(n||0));return!r||r.length!==11||!r.startsWith("01")||!t||t<=0?null:r.startsWith("010")?`*9*7*${r}*${t}#`:r.startsWith("011")?`*323*${r}*${t}#`:r.startsWith("012")?`*115*1*${r}*${t}#`:r.startsWith("015")?`*322*${r}*${t}#`:null}function m(e,n,r){const t=String(e||"").replace(/\D/g,""),i=String(n||"").replace(/\D/g,""),s=Math.round(Number(r||0));return!i||i.length!==11||!i.startsWith("01")||!s||s<=0?null:!t||!t.startsWith("01")?p(i,s):t.startsWith("010")?`*9*7*${i}*${s}#`:t.startsWith("011")?`*323*${i}*${s}#`:t.startsWith("012")?`*115*1*${i}*${s}#`:t.startsWith("015")?`*322*${i}*${s}#`:null}function B(e,n,r){const t=p(e,n),i=String(r||"").replace(/\D/g,"");return!t||!i?t:`${t.endsWith("#")?t.slice(0,-1):t}*${i}#`}function y(e){const n=String(e||"").replace(/\D/g,"");return n.startsWith("010")?"vodafone":n.startsWith("011")?"etisalat":n.startsWith("012")?"orange":n.startsWith("015")?"we":null}function b(e){const n=y(e),r=n?`simSlot_${n}`:"simSlot_default";try{if(localStorage.getItem(r)==="sim2")return"sim2"}catch{}return"sim1"}function D(e,n,r){const t=m(e,n,r);if(!t)throw new Error("Unsupported network or invalid sender/receiver/amount");const i=b(e||n);x(t,i)}function U({open:e,onClose:n,onSubmit:r,deviceId:t,recipientMsisdn:i,helperMessage:s}){const[a,c]=h.useState("");return e?o.jsx("div",{style:$,children:o.jsxs("div",{style:S,children:[o.jsx("h3",{children:"ðŸ” Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ"}),o.jsxs("p",{style:v,children:["ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„",i?o.jsxs(o.Fragment,{children:[": ",o.jsx("span",{style:{direction:"ltr",unicodeBidi:"plaintext",marginInlineStart:6,color:"#dc2626",fontWeight:700},children:i})]}):null]}),s?o.jsx("p",{style:k,children:s}):null,o.jsx("input",{type:"password",value:a,onChange:d=>c(d.target.value),onKeyDown:d=>{d.key==="Enter"&&t&&(r(t,a),c(""))},placeholder:"â€¢â€¢â€¢â€¢",style:w,autoFocus:!0}),o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:10},children:[o.jsx("button",{onClick:n,style:j,children:"Ø¥Ù„ØºØ§Ø¡"}),o.jsx("button",{onClick:()=>{t&&(r(t,a),c(""))},style:W,children:"Ø¥Ø±Ø³Ø§Ù„"})]})]})}):null}const $={position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},S={background:"#fff",padding:20,borderRadius:10,width:400,boxShadow:"0 10px 30px rgba(0,0,0,0.3)"},w={width:"100%",padding:10,borderRadius:8,border:"1px solid #ddd",marginBottom:15,fontSize:16,textAlign:"center"},W={background:"#22c55e",color:"#fff",border:"none",padding:"8px 14px",borderRadius:6},j={background:"#f3f4f6",border:"none",padding:"8px 14px",borderRadius:6},k={fontSize:12,color:"#6b7280",marginTop:4,marginBottom:8,textAlign:"right"},v={fontSize:13,color:"#111827",marginBottom:6,textAlign:"right",fontWeight:600},f="wallet_selection_pin_required";function g(e){return e?`${f}_${e}`:f}const C={isEnabled(e){try{return localStorage.getItem(g(e))==="true"}catch{return!1}},setEnabled(e,n){try{localStorage.setItem(g(n),e?"true":"false")}catch{}}};export{U as P,B as a,m as b,p as g,x as o,D as s,C as w};
//# sourceMappingURL=walletSelectionPinService-CdDSQUNH.js.map
