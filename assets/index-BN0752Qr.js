const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-BtVbz7pM.js","./card-DVUXmIdS.js","./BrandLogo-CshNJ8xe.js","./brandingService-OLx_QBSb.js","./whatsappService-B6pGyc8H.js","./arrow-left-lt-X5O4Y.js","./star-jT3TpJLk.js","./crown-CvM3nWyH.js","./download-J7RoRbJq.js","./zap-TNYCfAE8.js","./chart-column-GeTvuE-Z.js","./circle-check-big-B4Ee5e7u.js","./SubscriptionsPage-Aa0hCyfM.js","./contentService-B8z-FccH.js","./calendar-DOllbsrc.js","./AuthPage-CL2ZpNq5.js","./TopUpPage-NCBxlSxE.js","./select-DjC0EQBT.js","./AdminTopupsPage-BkTe4_04.js","./AdminNotificationsPage-DWW3cAcy.js","./label-DIwIXbCl.js","./textarea-BU7dIUmr.js","./link-Cl2Txd4j.js","./UserRegisterPage-BDzxtrEg.js","./alert-D5WFbqxL.js","./wallet-D5TJUJXW.js","./user-plus-yk4uk7Yh.js","./phone-BbBRuFZa.js","./store-AcU9bAvH.js","./UserAccountSetupPage-CYvazLkh.js","./DashboardLoginPage-DFM7pu_3.js","./ProtectedDashboard-DCHGFSEr.js","./badge-BWTxsXDh.js","./MasterPinDialog-VHlDGLlu.js","./circle-alert-BhVKXFXv.js","./profitService-Dt6LKUWS.js","./dollar-sign-DUPscho4.js","./circle-x-5x6tiK46.js","./ProtectedUserDashboard-Kmx4-Rpe.js","./broadcastService-CoEuRJtC.js","./MerchantDashboard-CgfLF84B.js","./dropdown-menu-CAZOfRsI.js","./index-C5uRsLs9.js","./WalletsManagement-2wM1iO4H.js","./progress-CszLdX49.js","./square-pen-DYFdhndo.js","./PendingApprovalPage-Dsy6sGlt.js","./freeTrialService-Dz5_uybD.js","./ProtectedAdminDashboard-C_qIbi2E.js","./ProfileIcon-CB0QeaB2.js","./switch-CbkmuC7O.js","./separator-C2sKUerS.js","./save-DQWfuIYU.js","./users-_EPPeU68.js","./AuthTestPage-D2-eTw9c.js","./ProfileSettingsPage-igIrK7Qb.js","./walletSelectionPinService-DFGM2N64.js","./TransactionsPage-CwwBx2vV.js","./MaintenanceDialog-BxjXa9tq.js","./WalletAdditionPage-CCR9YkqW.js","./ReferralsPage-Cp1iLEmv.js","./CPanelPage-BrmYbYwt.js","./CPanelLoginPage-B6x2V0Nv.js","./UserDashboardPage-CFiMofiX.js"])))=>i.map(i=>d[i]);
var W2=Object.defineProperty;var ET=t=>{throw TypeError(t)};var q2=(t,e,n)=>e in t?W2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $g=(t,e,n)=>q2(t,typeof e!="symbol"?e+"":e,n),Bg=(t,e,n)=>e.has(t)||ET("Cannot "+n);var q=(t,e,n)=>(Bg(t,e,"read from private field"),n?n.call(t):e.get(t)),mt=(t,e,n)=>e.has(t)?ET("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),He=(t,e,n,r)=>(Bg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Kn=(t,e,n)=>(Bg(t,e,"access private method"),n);var Mh=(t,e,n,r)=>({set _(s){He(t,e,s,n)},get _(){return q(t,e,r)}});function H2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ux={exports:{}},Im={},jx={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=Symbol.for("react.element"),K2=Symbol.for("react.portal"),G2=Symbol.for("react.fragment"),Q2=Symbol.for("react.strict_mode"),Y2=Symbol.for("react.profiler"),J2=Symbol.for("react.provider"),X2=Symbol.for("react.context"),Z2=Symbol.for("react.forward_ref"),eL=Symbol.for("react.suspense"),tL=Symbol.for("react.memo"),nL=Symbol.for("react.lazy"),TT=Symbol.iterator;function rL(t){return t===null||typeof t!="object"?null:(t=TT&&t[TT]||t["@@iterator"],typeof t=="function"?t:null)}var $x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bx=Object.assign,zx={};function Mc(t,e,n){this.props=t,this.context=e,this.refs=zx,this.updater=n||$x}Mc.prototype.isReactComponent={};Mc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wx(){}Wx.prototype=Mc.prototype;function l_(t,e,n){this.props=t,this.context=e,this.refs=zx,this.updater=n||$x}var c_=l_.prototype=new Wx;c_.constructor=l_;Bx(c_,Mc.prototype);c_.isPureReactComponent=!0;var IT=Array.isArray,qx=Object.prototype.hasOwnProperty,u_={current:null},Hx={key:!0,ref:!0,__self:!0,__source:!0};function Kx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qx.call(e,r)&&!Hx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:sh,type:t,key:i,ref:o,props:s,_owner:u_.current}}function sL(t,e){return{$$typeof:sh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function d_(t){return typeof t=="object"&&t!==null&&t.$$typeof===sh}function iL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ST=/\/+/g;function zg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iL(""+t.key):e.toString(36)}function Af(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sh:case K2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+zg(o,0):r,IT(s)?(n="",t!=null&&(n=t.replace(ST,"$&/")+"/"),Af(s,e,n,"",function(c){return c})):s!=null&&(d_(s)&&(s=sL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ST,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",IT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+zg(i,a);o+=Af(i,e,n,l,s)}else if(l=rL(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+zg(i,a++),o+=Af(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fh(t,e,n){if(t==null)return t;var r=[],s=0;return Af(t,r,"","",function(i){return e.call(n,i,s++)}),r}function oL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pr={current:null},xf={transition:null},aL={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:xf,ReactCurrentOwner:u_};function Gx(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:Fh,forEach:function(t,e,n){Fh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fh(t,function(){e++}),e},toArray:function(t){return Fh(t,function(e){return e})||[]},only:function(t){if(!d_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=Mc;ct.Fragment=G2;ct.Profiler=Y2;ct.PureComponent=l_;ct.StrictMode=Q2;ct.Suspense=eL;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aL;ct.act=Gx;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Bx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=u_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)qx.call(e,l)&&!Hx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sh,type:t.type,key:s,ref:i,props:r,_owner:o}};ct.createContext=function(t){return t={$$typeof:X2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:J2,_context:t},t.Consumer=t};ct.createElement=Kx;ct.createFactory=function(t){var e=Kx.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:Z2,render:t}};ct.isValidElement=d_;ct.lazy=function(t){return{$$typeof:nL,_payload:{_status:-1,_result:t},_init:oL}};ct.memo=function(t,e){return{$$typeof:tL,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=xf.transition;xf.transition={};try{t()}finally{xf.transition=e}};ct.unstable_act=Gx;ct.useCallback=function(t,e){return pr.current.useCallback(t,e)};ct.useContext=function(t){return pr.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return pr.current.useDeferredValue(t)};ct.useEffect=function(t,e){return pr.current.useEffect(t,e)};ct.useId=function(){return pr.current.useId()};ct.useImperativeHandle=function(t,e,n){return pr.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return pr.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return pr.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return pr.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return pr.current.useReducer(t,e,n)};ct.useRef=function(t){return pr.current.useRef(t)};ct.useState=function(t){return pr.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return pr.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return pr.current.useTransition()};ct.version="18.3.1";jx.exports=ct;var S=jx.exports;const j=Fx(S),h_=H2({__proto__:null,default:j},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lL=S,cL=Symbol.for("react.element"),uL=Symbol.for("react.fragment"),dL=Object.prototype.hasOwnProperty,hL=lL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fL={key:!0,ref:!0,__self:!0,__source:!0};function Qx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dL.call(e,r)&&!fL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cL,type:t,key:i,ref:o,props:s,_owner:hL.current}}Im.Fragment=uL;Im.jsx=Qx;Im.jsxs=Qx;Ux.exports=Im;var T=Ux.exports,Yx={exports:{}},zr={},Jx={exports:{}},Xx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,V){var ee=U.length;U.push(V);e:for(;0<ee;){var oe=ee-1>>>1,G=U[oe];if(0<s(G,V))U[oe]=V,U[ee]=G,ee=oe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],ee=U.pop();if(ee!==V){U[0]=ee;e:for(var oe=0,G=U.length,Ne=G>>>1;oe<Ne;){var Ie=2*(oe+1)-1,Oe=U[Ie],Ze=Ie+1,be=U[Ze];if(0>s(Oe,ee))Ze<G&&0>s(be,Oe)?(U[oe]=be,U[Ze]=ee,oe=Ze):(U[oe]=Oe,U[Ie]=ee,oe=Ie);else if(Ze<G&&0>s(be,ee))U[oe]=be,U[Ze]=ee,oe=Ze;else break e}}return V}function s(U,V){var ee=U.sortIndex-V.sortIndex;return ee!==0?ee:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,w=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=U)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function R(U){if(g=!1,_(U),!w)if(n(l)!==null)w=!0,se(k);else{var V=n(c);V!==null&&ue(R,V.startTime-U)}}function k(U,V){w=!1,g&&(g=!1,E(A),A=-1),p=!0;var ee=f;try{for(_(V),h=n(l);h!==null&&(!(h.expirationTime>V)||U&&!D());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var G=oe(h.expirationTime<=V);V=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),_(V)}else r(l);h=n(l)}if(h!==null)var Ne=!0;else{var Ie=n(c);Ie!==null&&ue(R,Ie.startTime-V),Ne=!1}return Ne}finally{h=null,f=ee,p=!1}}var L=!1,x=null,A=-1,b=5,P=-1;function D(){return!(t.unstable_now()-P<b)}function O(){if(x!==null){var U=t.unstable_now();P=U;var V=!0;try{V=x(!0,U)}finally{V?C():(L=!1,x=null)}}else L=!1}var C;if(typeof y=="function")C=function(){y(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,re=$.port2;$.port1.onmessage=O,C=function(){re.postMessage(null)}}else C=function(){v(O,0)};function se(U){x=U,L||(L=!0,C())}function ue(U,V){A=v(function(){U(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,se(k))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var ee=f;f=V;try{return U()}finally{f=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ee=f;f=U;try{return V()}finally{f=ee}},t.unstable_scheduleCallback=function(U,V,ee){var oe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?oe+ee:oe):ee=oe,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ee+G,U={id:d++,callback:V,priorityLevel:U,startTime:ee,expirationTime:G,sortIndex:-1},ee>oe?(U.sortIndex=ee,e(c,U),n(l)===null&&U===n(c)&&(g?(E(A),A=-1):g=!0,ue(R,ee-oe))):(U.sortIndex=G,e(l,U),w||p||(w=!0,se(k))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var V=f;return function(){var ee=f;f=V;try{return U.apply(this,arguments)}finally{f=ee}}}})(Xx);Jx.exports=Xx;var pL=Jx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL=S,$r=pL;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zx=new Set,fd={};function el(t,e){ac(t,e),ac(t+"Capture",e)}function ac(t,e){for(fd[t]=e,t=0;t<e.length;t++)Zx.add(e[t])}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),av=Object.prototype.hasOwnProperty,gL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bT={},AT={};function yL(t){return av.call(AT,t)?!0:av.call(bT,t)?!1:gL.test(t)?AT[t]=!0:(bT[t]=!0,!1)}function vL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wL(t,e,n,r){if(e===null||typeof e>"u"||vL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jn[t]=new mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jn[e]=new mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jn[t]=new mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jn[t]=new mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jn[t]=new mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jn[t]=new mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jn[t]=new mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jn[t]=new mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jn[t]=new mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var f_=/[\-:]([a-z])/g;function p_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(f_,p_);jn[e]=new mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(f_,p_);jn[e]=new mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(f_,p_);jn[e]=new mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jn[t]=new mr(t,1,!1,t.toLowerCase(),null,!1,!1)});jn.xlinkHref=new mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jn[t]=new mr(t,1,!1,t.toLowerCase(),null,!0,!0)});function m_(t,e,n,r){var s=jn.hasOwnProperty(e)?jn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wL(e,n,s,r)&&(n=null),r||s===null?yL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ri=mL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uh=Symbol.for("react.element"),Rl=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),g_=Symbol.for("react.strict_mode"),lv=Symbol.for("react.profiler"),eR=Symbol.for("react.provider"),tR=Symbol.for("react.context"),y_=Symbol.for("react.forward_ref"),cv=Symbol.for("react.suspense"),uv=Symbol.for("react.suspense_list"),v_=Symbol.for("react.memo"),Qi=Symbol.for("react.lazy"),nR=Symbol.for("react.offscreen"),xT=Symbol.iterator;function mu(t){return t===null||typeof t!="object"?null:(t=xT&&t[xT]||t["@@iterator"],typeof t=="function"?t:null)}var Zt=Object.assign,Wg;function ku(t){if(Wg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wg=e&&e[1]||""}return`
`+Wg+t}var qg=!1;function Hg(t,e){if(!t||qg)return"";qg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ku(t):""}function _L(t){switch(t.tag){case 5:return ku(t.type);case 16:return ku("Lazy");case 13:return ku("Suspense");case 19:return ku("SuspenseList");case 0:case 2:case 15:return t=Hg(t.type,!1),t;case 11:return t=Hg(t.type.render,!1),t;case 1:return t=Hg(t.type,!0),t;default:return""}}function dv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pl:return"Fragment";case Rl:return"Portal";case lv:return"Profiler";case g_:return"StrictMode";case cv:return"Suspense";case uv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tR:return(t.displayName||"Context")+".Consumer";case eR:return(t._context.displayName||"Context")+".Provider";case y_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case v_:return e=t.displayName||null,e!==null?e:dv(t.type)||"Memo";case Qi:e=t._payload,t=t._init;try{return dv(t(e))}catch{}}return null}function EL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dv(e);case 8:return e===g_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TL(t){var e=rR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jh(t){t._valueTracker||(t._valueTracker=TL(t))}function sR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ap(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hv(t,e){var n=e.checked;return Zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function RT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Po(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iR(t,e){e=e.checked,e!=null&&m_(t,"checked",e,!1)}function fv(t,e){iR(t,e);var n=Po(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pv(t,e.type,n):e.hasOwnProperty("defaultValue")&&pv(t,e.type,Po(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function PT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pv(t,e,n){(e!=="number"||ap(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nu=Array.isArray;function $l(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Po(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function CT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Nu(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Po(n)}}function oR(t,e){var n=Po(e.value),r=Po(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function DT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $h,lR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($h=$h||document.createElement("div"),$h.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$h.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IL=["Webkit","ms","Moz","O"];Object.keys(Wu).forEach(function(t){IL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wu[e]=Wu[t]})});function cR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wu.hasOwnProperty(t)&&Wu[t]?(""+e).trim():e+"px"}function uR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var SL=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yv(t,e){if(e){if(SL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function vv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wv=null;function w_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _v=null,Bl=null,zl=null;function kT(t){if(t=ah(t)){if(typeof _v!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Rm(e),_v(t.stateNode,t.type,e))}}function dR(t){Bl?zl?zl.push(t):zl=[t]:Bl=t}function hR(){if(Bl){var t=Bl,e=zl;if(zl=Bl=null,kT(t),e)for(t=0;t<e.length;t++)kT(e[t])}}function fR(t,e){return t(e)}function pR(){}var Kg=!1;function mR(t,e,n){if(Kg)return t(e,n);Kg=!0;try{return fR(t,e,n)}finally{Kg=!1,(Bl!==null||zl!==null)&&(pR(),hR())}}function md(t,e){var n=t.stateNode;if(n===null)return null;var r=Rm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var Ev=!1;if(yi)try{var gu={};Object.defineProperty(gu,"passive",{get:function(){Ev=!0}}),window.addEventListener("test",gu,gu),window.removeEventListener("test",gu,gu)}catch{Ev=!1}function bL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var qu=!1,lp=null,cp=!1,Tv=null,AL={onError:function(t){qu=!0,lp=t}};function xL(t,e,n,r,s,i,o,a,l){qu=!1,lp=null,bL.apply(AL,arguments)}function RL(t,e,n,r,s,i,o,a,l){if(xL.apply(this,arguments),qu){if(qu){var c=lp;qu=!1,lp=null}else throw Error(te(198));cp||(cp=!0,Tv=c)}}function tl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NT(t){if(tl(t)!==t)throw Error(te(188))}function PL(t){var e=t.alternate;if(!e){if(e=tl(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return NT(s),t;if(i===r)return NT(s),e;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function yR(t){return t=PL(t),t!==null?vR(t):null}function vR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vR(t);if(e!==null)return e;t=t.sibling}return null}var wR=$r.unstable_scheduleCallback,OT=$r.unstable_cancelCallback,CL=$r.unstable_shouldYield,DL=$r.unstable_requestPaint,pn=$r.unstable_now,kL=$r.unstable_getCurrentPriorityLevel,__=$r.unstable_ImmediatePriority,_R=$r.unstable_UserBlockingPriority,up=$r.unstable_NormalPriority,NL=$r.unstable_LowPriority,ER=$r.unstable_IdlePriority,Sm=null,zs=null;function OL(t){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Sm,t,void 0,(t.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:ML,LL=Math.log,VL=Math.LN2;function ML(t){return t>>>=0,t===0?32:31-(LL(t)/VL|0)|0}var Bh=64,zh=4194304;function Ou(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ou(a):(i&=o,i!==0&&(r=Ou(i)))}else o=n&~s,o!==0?r=Ou(o):i!==0&&(r=Ou(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ps(e),s=1<<n,r|=t[n],e&=~s;return r}function FL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ps(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=FL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Iv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TR(){var t=Bh;return Bh<<=1,!(Bh&4194240)&&(Bh=64),t}function Gg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ih(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ps(e),t[e]=n}function jL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ps(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function E_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ps(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xt=0;function IR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SR,T_,bR,AR,xR,Sv=!1,Wh=[],fo=null,po=null,mo=null,gd=new Map,yd=new Map,Ji=[],$L="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LT(t,e){switch(t){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":gd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(e.pointerId)}}function yu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ah(e),e!==null&&T_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BL(t,e,n,r,s){switch(e){case"focusin":return fo=yu(fo,t,e,n,r,s),!0;case"dragenter":return po=yu(po,t,e,n,r,s),!0;case"mouseover":return mo=yu(mo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return gd.set(i,yu(gd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,yd.set(i,yu(yd.get(i)||null,t,e,n,r,s)),!0}return!1}function RR(t){var e=fa(t.target);if(e!==null){var n=tl(e);if(n!==null){if(e=n.tag,e===13){if(e=gR(n),e!==null){t.blockedOn=e,xR(t.priority,function(){bR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wv=r,n.target.dispatchEvent(r),wv=null}else return e=ah(n),e!==null&&T_(e),t.blockedOn=n,!1;e.shift()}return!0}function VT(t,e,n){Rf(t)&&n.delete(e)}function zL(){Sv=!1,fo!==null&&Rf(fo)&&(fo=null),po!==null&&Rf(po)&&(po=null),mo!==null&&Rf(mo)&&(mo=null),gd.forEach(VT),yd.forEach(VT)}function vu(t,e){t.blockedOn===e&&(t.blockedOn=null,Sv||(Sv=!0,$r.unstable_scheduleCallback($r.unstable_NormalPriority,zL)))}function vd(t){function e(s){return vu(s,t)}if(0<Wh.length){vu(Wh[0],t);for(var n=1;n<Wh.length;n++){var r=Wh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fo!==null&&vu(fo,t),po!==null&&vu(po,t),mo!==null&&vu(mo,t),gd.forEach(e),yd.forEach(e),n=0;n<Ji.length;n++)r=Ji[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ji.length&&(n=Ji[0],n.blockedOn===null);)RR(n),n.blockedOn===null&&Ji.shift()}var Wl=Ri.ReactCurrentBatchConfig,hp=!0;function WL(t,e,n,r){var s=xt,i=Wl.transition;Wl.transition=null;try{xt=1,I_(t,e,n,r)}finally{xt=s,Wl.transition=i}}function qL(t,e,n,r){var s=xt,i=Wl.transition;Wl.transition=null;try{xt=4,I_(t,e,n,r)}finally{xt=s,Wl.transition=i}}function I_(t,e,n,r){if(hp){var s=bv(t,e,n,r);if(s===null)sy(t,e,r,fp,n),LT(t,r);else if(BL(s,t,e,n,r))r.stopPropagation();else if(LT(t,r),e&4&&-1<$L.indexOf(t)){for(;s!==null;){var i=ah(s);if(i!==null&&SR(i),i=bv(t,e,n,r),i===null&&sy(t,e,r,fp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sy(t,e,r,null,n)}}var fp=null;function bv(t,e,n,r){if(fp=null,t=w_(r),t=fa(t),t!==null)if(e=tl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fp=t,null}function PR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kL()){case __:return 1;case _R:return 4;case up:case NL:return 16;case ER:return 536870912;default:return 16}default:return 16}}var oo=null,S_=null,Pf=null;function CR(){if(Pf)return Pf;var t,e=S_,n=e.length,r,s="value"in oo?oo.value:oo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pf=s.slice(t,1<r?1-r:void 0)}function Cf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qh(){return!0}function MT(){return!1}function Wr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qh:MT,this.isPropagationStopped=MT,this}return Zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qh)},persist:function(){},isPersistent:qh}),e}var Fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b_=Wr(Fc),oh=Zt({},Fc,{view:0,detail:0}),HL=Wr(oh),Qg,Yg,wu,bm=Zt({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wu&&(wu&&t.type==="mousemove"?(Qg=t.screenX-wu.screenX,Yg=t.screenY-wu.screenY):Yg=Qg=0,wu=t),Qg)},movementY:function(t){return"movementY"in t?t.movementY:Yg}}),FT=Wr(bm),KL=Zt({},bm,{dataTransfer:0}),GL=Wr(KL),QL=Zt({},oh,{relatedTarget:0}),Jg=Wr(QL),YL=Zt({},Fc,{animationName:0,elapsedTime:0,pseudoElement:0}),JL=Wr(YL),XL=Zt({},Fc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZL=Wr(XL),eV=Zt({},Fc,{data:0}),UT=Wr(eV),tV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rV[t])?!!e[t]:!1}function A_(){return sV}var iV=Zt({},oh,{key:function(t){if(t.key){var e=tV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A_,charCode:function(t){return t.type==="keypress"?Cf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oV=Wr(iV),aV=Zt({},bm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jT=Wr(aV),lV=Zt({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A_}),cV=Wr(lV),uV=Zt({},Fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),dV=Wr(uV),hV=Zt({},bm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fV=Wr(hV),pV=[9,13,27,32],x_=yi&&"CompositionEvent"in window,Hu=null;yi&&"documentMode"in document&&(Hu=document.documentMode);var mV=yi&&"TextEvent"in window&&!Hu,DR=yi&&(!x_||Hu&&8<Hu&&11>=Hu),$T=" ",BT=!1;function kR(t,e){switch(t){case"keyup":return pV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cl=!1;function gV(t,e){switch(t){case"compositionend":return NR(e);case"keypress":return e.which!==32?null:(BT=!0,$T);case"textInput":return t=e.data,t===$T&&BT?null:t;default:return null}}function yV(t,e){if(Cl)return t==="compositionend"||!x_&&kR(t,e)?(t=CR(),Pf=S_=oo=null,Cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DR&&e.locale!=="ko"?null:e.data;default:return null}}var vV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vV[t.type]:e==="textarea"}function OR(t,e,n,r){dR(r),e=pp(e,"onChange"),0<e.length&&(n=new b_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ku=null,wd=null;function wV(t){qR(t,0)}function Am(t){var e=Nl(t);if(sR(e))return t}function _V(t,e){if(t==="change")return e}var LR=!1;if(yi){var Xg;if(yi){var Zg="oninput"in document;if(!Zg){var WT=document.createElement("div");WT.setAttribute("oninput","return;"),Zg=typeof WT.oninput=="function"}Xg=Zg}else Xg=!1;LR=Xg&&(!document.documentMode||9<document.documentMode)}function qT(){Ku&&(Ku.detachEvent("onpropertychange",VR),wd=Ku=null)}function VR(t){if(t.propertyName==="value"&&Am(wd)){var e=[];OR(e,wd,t,w_(t)),mR(wV,e)}}function EV(t,e,n){t==="focusin"?(qT(),Ku=e,wd=n,Ku.attachEvent("onpropertychange",VR)):t==="focusout"&&qT()}function TV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Am(wd)}function IV(t,e){if(t==="click")return Am(e)}function SV(t,e){if(t==="input"||t==="change")return Am(e)}function bV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vs=typeof Object.is=="function"?Object.is:bV;function _d(t,e){if(vs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!av.call(e,s)||!vs(t[s],e[s]))return!1}return!0}function HT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function KT(t,e){var n=HT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=HT(n)}}function MR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FR(){for(var t=window,e=ap();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ap(t.document)}return e}function R_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AV(t){var e=FR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MR(n.ownerDocument.documentElement,n)){if(r!==null&&R_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=KT(n,i);var o=KT(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xV=yi&&"documentMode"in document&&11>=document.documentMode,Dl=null,Av=null,Gu=null,xv=!1;function GT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xv||Dl==null||Dl!==ap(r)||(r=Dl,"selectionStart"in r&&R_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gu&&_d(Gu,r)||(Gu=r,r=pp(Av,"onSelect"),0<r.length&&(e=new b_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Dl)))}function Hh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kl={animationend:Hh("Animation","AnimationEnd"),animationiteration:Hh("Animation","AnimationIteration"),animationstart:Hh("Animation","AnimationStart"),transitionend:Hh("Transition","TransitionEnd")},ey={},UR={};yi&&(UR=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function xm(t){if(ey[t])return ey[t];if(!kl[t])return t;var e=kl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in UR)return ey[t]=e[n];return t}var jR=xm("animationend"),$R=xm("animationiteration"),BR=xm("animationstart"),zR=xm("transitionend"),WR=new Map,QT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $o(t,e){WR.set(t,e),el(e,[t])}for(var ty=0;ty<QT.length;ty++){var ny=QT[ty],RV=ny.toLowerCase(),PV=ny[0].toUpperCase()+ny.slice(1);$o(RV,"on"+PV)}$o(jR,"onAnimationEnd");$o($R,"onAnimationIteration");$o(BR,"onAnimationStart");$o("dblclick","onDoubleClick");$o("focusin","onFocus");$o("focusout","onBlur");$o(zR,"onTransitionEnd");ac("onMouseEnter",["mouseout","mouseover"]);ac("onMouseLeave",["mouseout","mouseover"]);ac("onPointerEnter",["pointerout","pointerover"]);ac("onPointerLeave",["pointerout","pointerover"]);el("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));el("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));el("onBeforeInput",["compositionend","keypress","textInput","paste"]);el("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));el("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));el("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lu));function YT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RL(r,e,void 0,t),t.currentTarget=null}function qR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;YT(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;YT(s,a,c),i=l}}}if(cp)throw t=Tv,cp=!1,Tv=null,t}function Bt(t,e){var n=e[kv];n===void 0&&(n=e[kv]=new Set);var r=t+"__bubble";n.has(r)||(HR(e,t,2,!1),n.add(r))}function ry(t,e,n){var r=0;e&&(r|=4),HR(n,t,r,e)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function Ed(t){if(!t[Kh]){t[Kh]=!0,Zx.forEach(function(n){n!=="selectionchange"&&(CV.has(n)||ry(n,!1,t),ry(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kh]||(e[Kh]=!0,ry("selectionchange",!1,e))}}function HR(t,e,n,r){switch(PR(e)){case 1:var s=WL;break;case 4:s=qL;break;default:s=I_}n=s.bind(null,e,n,t),s=void 0,!Ev||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=fa(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}mR(function(){var c=i,d=w_(n),h=[];e:{var f=WR.get(t);if(f!==void 0){var p=b_,w=t;switch(t){case"keypress":if(Cf(n)===0)break e;case"keydown":case"keyup":p=oV;break;case"focusin":w="focus",p=Jg;break;case"focusout":w="blur",p=Jg;break;case"beforeblur":case"afterblur":p=Jg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=FT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cV;break;case jR:case $R:case BR:p=JL;break;case zR:p=dV;break;case"scroll":p=HL;break;case"wheel":p=fV;break;case"copy":case"cut":case"paste":p=ZL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=jT}var g=(e&4)!==0,v=!g&&t==="scroll",E=g?f!==null?f+"Capture":null:f;g=[];for(var y=c,_;y!==null;){_=y;var R=_.stateNode;if(_.tag===5&&R!==null&&(_=R,E!==null&&(R=md(y,E),R!=null&&g.push(Td(y,R,_)))),v)break;y=y.return}0<g.length&&(f=new p(f,w,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==wv&&(w=n.relatedTarget||n.fromElement)&&(fa(w)||w[vi]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?fa(w):null,w!==null&&(v=tl(w),w!==v||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(g=FT,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=jT,R="onPointerLeave",E="onPointerEnter",y="pointer"),v=p==null?f:Nl(p),_=w==null?f:Nl(w),f=new g(R,y+"leave",p,n,d),f.target=v,f.relatedTarget=_,R=null,fa(d)===c&&(g=new g(E,y+"enter",w,n,d),g.target=_,g.relatedTarget=v,R=g),v=R,p&&w)t:{for(g=p,E=w,y=0,_=g;_;_=dl(_))y++;for(_=0,R=E;R;R=dl(R))_++;for(;0<y-_;)g=dl(g),y--;for(;0<_-y;)E=dl(E),_--;for(;y--;){if(g===E||E!==null&&g===E.alternate)break t;g=dl(g),E=dl(E)}g=null}else g=null;p!==null&&JT(h,f,p,g,!1),w!==null&&v!==null&&JT(h,v,w,g,!0)}}e:{if(f=c?Nl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=_V;else if(zT(f))if(LR)k=SV;else{k=TV;var L=EV}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=IV);if(k&&(k=k(t,c))){OR(h,k,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&pv(f,"number",f.value)}switch(L=c?Nl(c):window,t){case"focusin":(zT(L)||L.contentEditable==="true")&&(Dl=L,Av=c,Gu=null);break;case"focusout":Gu=Av=Dl=null;break;case"mousedown":xv=!0;break;case"contextmenu":case"mouseup":case"dragend":xv=!1,GT(h,n,d);break;case"selectionchange":if(xV)break;case"keydown":case"keyup":GT(h,n,d)}var x;if(x_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Cl?kR(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(DR&&n.locale!=="ko"&&(Cl||A!=="onCompositionStart"?A==="onCompositionEnd"&&Cl&&(x=CR()):(oo=d,S_="value"in oo?oo.value:oo.textContent,Cl=!0)),L=pp(c,A),0<L.length&&(A=new UT(A,t,null,n,d),h.push({event:A,listeners:L}),x?A.data=x:(x=NR(n),x!==null&&(A.data=x)))),(x=mV?gV(t,n):yV(t,n))&&(c=pp(c,"onBeforeInput"),0<c.length&&(d=new UT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=x))}qR(h,e)})}function Td(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=md(t,n),i!=null&&r.unshift(Td(t,i,s)),i=md(t,e),i!=null&&r.push(Td(t,i,s))),t=t.return}return r}function dl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function JT(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=md(n,i),l!=null&&o.unshift(Td(n,l,a))):s||(l=md(n,i),l!=null&&o.push(Td(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DV=/\r\n?/g,kV=/\u0000|\uFFFD/g;function XT(t){return(typeof t=="string"?t:""+t).replace(DV,`
`).replace(kV,"")}function Gh(t,e,n){if(e=XT(e),XT(t)!==e&&n)throw Error(te(425))}function mp(){}var Rv=null,Pv=null;function Cv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dv=typeof setTimeout=="function"?setTimeout:void 0,NV=typeof clearTimeout=="function"?clearTimeout:void 0,ZT=typeof Promise=="function"?Promise:void 0,OV=typeof queueMicrotask=="function"?queueMicrotask:typeof ZT<"u"?function(t){return ZT.resolve(null).then(t).catch(LV)}:Dv;function LV(t){setTimeout(function(){throw t})}function iy(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vd(e)}function go(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function eI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uc=Math.random().toString(36).slice(2),Ms="__reactFiber$"+Uc,Id="__reactProps$"+Uc,vi="__reactContainer$"+Uc,kv="__reactEvents$"+Uc,VV="__reactListeners$"+Uc,MV="__reactHandles$"+Uc;function fa(t){var e=t[Ms];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vi]||n[Ms]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eI(t);t!==null;){if(n=t[Ms])return n;t=eI(t)}return e}t=n,n=t.parentNode}return null}function ah(t){return t=t[Ms]||t[vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Rm(t){return t[Id]||null}var Nv=[],Ol=-1;function Bo(t){return{current:t}}function zt(t){0>Ol||(t.current=Nv[Ol],Nv[Ol]=null,Ol--)}function Vt(t,e){Ol++,Nv[Ol]=t.current,t.current=e}var Co={},sr=Bo(Co),Ir=Bo(!1),Fa=Co;function lc(t,e){var n=t.type.contextTypes;if(!n)return Co;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sr(t){return t=t.childContextTypes,t!=null}function gp(){zt(Ir),zt(sr)}function tI(t,e,n){if(sr.current!==Co)throw Error(te(168));Vt(sr,e),Vt(Ir,n)}function KR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(te(108,EL(t)||"Unknown",s));return Zt({},n,r)}function yp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Co,Fa=sr.current,Vt(sr,t),Vt(Ir,Ir.current),!0}function nI(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=KR(t,e,Fa),r.__reactInternalMemoizedMergedChildContext=t,zt(Ir),zt(sr),Vt(sr,t)):zt(Ir),Vt(Ir,n)}var ii=null,Pm=!1,oy=!1;function GR(t){ii===null?ii=[t]:ii.push(t)}function FV(t){Pm=!0,GR(t)}function zo(){if(!oy&&ii!==null){oy=!0;var t=0,e=xt;try{var n=ii;for(xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ii=null,Pm=!1}catch(s){throw ii!==null&&(ii=ii.slice(t+1)),wR(__,zo),s}finally{xt=e,oy=!1}}return null}var Ll=[],Vl=0,vp=null,wp=0,Yr=[],Jr=0,Ua=null,li=1,ci="";function ta(t,e){Ll[Vl++]=wp,Ll[Vl++]=vp,vp=t,wp=e}function QR(t,e,n){Yr[Jr++]=li,Yr[Jr++]=ci,Yr[Jr++]=Ua,Ua=t;var r=li;t=ci;var s=32-ps(r)-1;r&=~(1<<s),n+=1;var i=32-ps(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,li=1<<32-ps(e)+s|n<<s|r,ci=i+t}else li=1<<i|n<<s|r,ci=t}function P_(t){t.return!==null&&(ta(t,1),QR(t,1,0))}function C_(t){for(;t===vp;)vp=Ll[--Vl],Ll[Vl]=null,wp=Ll[--Vl],Ll[Vl]=null;for(;t===Ua;)Ua=Yr[--Jr],Yr[Jr]=null,ci=Yr[--Jr],Yr[Jr]=null,li=Yr[--Jr],Yr[Jr]=null}var Mr=null,Or=null,Ht=!1,ds=null;function YR(t,e){var n=Xr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,Or=go(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ua!==null?{id:li,overflow:ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mr=t,Or=null,!0):!1;default:return!1}}function Ov(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lv(t){if(Ht){var e=Or;if(e){var n=e;if(!rI(t,e)){if(Ov(t))throw Error(te(418));e=go(n.nextSibling);var r=Mr;e&&rI(t,e)?YR(r,n):(t.flags=t.flags&-4097|2,Ht=!1,Mr=t)}}else{if(Ov(t))throw Error(te(418));t.flags=t.flags&-4097|2,Ht=!1,Mr=t}}}function sI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function Qh(t){if(t!==Mr)return!1;if(!Ht)return sI(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cv(t.type,t.memoizedProps)),e&&(e=Or)){if(Ov(t))throw JR(),Error(te(418));for(;e;)YR(t,e),e=go(e.nextSibling)}if(sI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Or=go(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=Mr?go(t.stateNode.nextSibling):null;return!0}function JR(){for(var t=Or;t;)t=go(t.nextSibling)}function cc(){Or=Mr=null,Ht=!1}function D_(t){ds===null?ds=[t]:ds.push(t)}var UV=Ri.ReactCurrentBatchConfig;function _u(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function Yh(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iI(t){var e=t._init;return e(t._payload)}function XR(t){function e(E,y){if(t){var _=E.deletions;_===null?(E.deletions=[y],E.flags|=16):_.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=_o(E,y),E.index=0,E.sibling=null,E}function i(E,y,_){return E.index=_,t?(_=E.alternate,_!==null?(_=_.index,_<y?(E.flags|=2,y):_):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,_,R){return y===null||y.tag!==6?(y=fy(_,E.mode,R),y.return=E,y):(y=s(y,_),y.return=E,y)}function l(E,y,_,R){var k=_.type;return k===Pl?d(E,y,_.props.children,R,_.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qi&&iI(k)===y.type)?(R=s(y,_.props),R.ref=_u(E,y,_),R.return=E,R):(R=Mf(_.type,_.key,_.props,null,E.mode,R),R.ref=_u(E,y,_),R.return=E,R)}function c(E,y,_,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=py(_,E.mode,R),y.return=E,y):(y=s(y,_.children||[]),y.return=E,y)}function d(E,y,_,R,k){return y===null||y.tag!==7?(y=Na(_,E.mode,R,k),y.return=E,y):(y=s(y,_),y.return=E,y)}function h(E,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=fy(""+y,E.mode,_),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Uh:return _=Mf(y.type,y.key,y.props,null,E.mode,_),_.ref=_u(E,null,y),_.return=E,_;case Rl:return y=py(y,E.mode,_),y.return=E,y;case Qi:var R=y._init;return h(E,R(y._payload),_)}if(Nu(y)||mu(y))return y=Na(y,E.mode,_,null),y.return=E,y;Yh(E,y)}return null}function f(E,y,_,R){var k=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:a(E,y,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Uh:return _.key===k?l(E,y,_,R):null;case Rl:return _.key===k?c(E,y,_,R):null;case Qi:return k=_._init,f(E,y,k(_._payload),R)}if(Nu(_)||mu(_))return k!==null?null:d(E,y,_,R,null);Yh(E,_)}return null}function p(E,y,_,R,k){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(_)||null,a(y,E,""+R,k);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Uh:return E=E.get(R.key===null?_:R.key)||null,l(y,E,R,k);case Rl:return E=E.get(R.key===null?_:R.key)||null,c(y,E,R,k);case Qi:var L=R._init;return p(E,y,_,L(R._payload),k)}if(Nu(R)||mu(R))return E=E.get(_)||null,d(y,E,R,k,null);Yh(y,R)}return null}function w(E,y,_,R){for(var k=null,L=null,x=y,A=y=0,b=null;x!==null&&A<_.length;A++){x.index>A?(b=x,x=null):b=x.sibling;var P=f(E,x,_[A],R);if(P===null){x===null&&(x=b);break}t&&x&&P.alternate===null&&e(E,x),y=i(P,y,A),L===null?k=P:L.sibling=P,L=P,x=b}if(A===_.length)return n(E,x),Ht&&ta(E,A),k;if(x===null){for(;A<_.length;A++)x=h(E,_[A],R),x!==null&&(y=i(x,y,A),L===null?k=x:L.sibling=x,L=x);return Ht&&ta(E,A),k}for(x=r(E,x);A<_.length;A++)b=p(x,E,A,_[A],R),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?A:b.key),y=i(b,y,A),L===null?k=b:L.sibling=b,L=b);return t&&x.forEach(function(D){return e(E,D)}),Ht&&ta(E,A),k}function g(E,y,_,R){var k=mu(_);if(typeof k!="function")throw Error(te(150));if(_=k.call(_),_==null)throw Error(te(151));for(var L=k=null,x=y,A=y=0,b=null,P=_.next();x!==null&&!P.done;A++,P=_.next()){x.index>A?(b=x,x=null):b=x.sibling;var D=f(E,x,P.value,R);if(D===null){x===null&&(x=b);break}t&&x&&D.alternate===null&&e(E,x),y=i(D,y,A),L===null?k=D:L.sibling=D,L=D,x=b}if(P.done)return n(E,x),Ht&&ta(E,A),k;if(x===null){for(;!P.done;A++,P=_.next())P=h(E,P.value,R),P!==null&&(y=i(P,y,A),L===null?k=P:L.sibling=P,L=P);return Ht&&ta(E,A),k}for(x=r(E,x);!P.done;A++,P=_.next())P=p(x,E,A,P.value,R),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?A:P.key),y=i(P,y,A),L===null?k=P:L.sibling=P,L=P);return t&&x.forEach(function(O){return e(E,O)}),Ht&&ta(E,A),k}function v(E,y,_,R){if(typeof _=="object"&&_!==null&&_.type===Pl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Uh:e:{for(var k=_.key,L=y;L!==null;){if(L.key===k){if(k=_.type,k===Pl){if(L.tag===7){n(E,L.sibling),y=s(L,_.props.children),y.return=E,E=y;break e}}else if(L.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qi&&iI(k)===L.type){n(E,L.sibling),y=s(L,_.props),y.ref=_u(E,L,_),y.return=E,E=y;break e}n(E,L);break}else e(E,L);L=L.sibling}_.type===Pl?(y=Na(_.props.children,E.mode,R,_.key),y.return=E,E=y):(R=Mf(_.type,_.key,_.props,null,E.mode,R),R.ref=_u(E,y,_),R.return=E,E=R)}return o(E);case Rl:e:{for(L=_.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(E,y.sibling),y=s(y,_.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=py(_,E.mode,R),y.return=E,E=y}return o(E);case Qi:return L=_._init,v(E,y,L(_._payload),R)}if(Nu(_))return w(E,y,_,R);if(mu(_))return g(E,y,_,R);Yh(E,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,_),y.return=E,E=y):(n(E,y),y=fy(_,E.mode,R),y.return=E,E=y),o(E)):n(E,y)}return v}var uc=XR(!0),ZR=XR(!1),_p=Bo(null),Ep=null,Ml=null,k_=null;function N_(){k_=Ml=Ep=null}function O_(t){var e=_p.current;zt(_p),t._currentValue=e}function Vv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ql(t,e){Ep=t,k_=Ml=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wr=!0),t.firstContext=null)}function ts(t){var e=t._currentValue;if(k_!==t)if(t={context:t,memoizedValue:e,next:null},Ml===null){if(Ep===null)throw Error(te(308));Ml=t,Ep.dependencies={lanes:0,firstContext:t}}else Ml=Ml.next=t;return e}var pa=null;function L_(t){pa===null?pa=[t]:pa.push(t)}function e1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,L_(e)):(n.next=s.next,s.next=n),e.interleaved=n,wi(t,r)}function wi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yi=!1;function V_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,wi(t,n)}return s=r.interleaved,s===null?(e.next=e,L_(r)):(e.next=s.next,s.next=e),r.interleaved=e,wi(t,n)}function Df(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E_(t,n)}}function oI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tp(t,e,n,r){var s=t.updateQueue;Yi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,g=a;switch(f=e,p=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Zt({},h,f);break e;case 2:Yi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$a|=o,t.lanes=o,t.memoizedState=h}}function aI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(te(191,s));s.call(r)}}}var lh={},Ws=Bo(lh),Sd=Bo(lh),bd=Bo(lh);function ma(t){if(t===lh)throw Error(te(174));return t}function M_(t,e){switch(Vt(bd,e),Vt(Sd,t),Vt(Ws,lh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gv(e,t)}zt(Ws),Vt(Ws,e)}function dc(){zt(Ws),zt(Sd),zt(bd)}function n1(t){ma(bd.current);var e=ma(Ws.current),n=gv(e,t.type);e!==n&&(Vt(Sd,t),Vt(Ws,n))}function F_(t){Sd.current===t&&(zt(Ws),zt(Sd))}var Yt=Bo(0);function Ip(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ay=[];function U_(){for(var t=0;t<ay.length;t++)ay[t]._workInProgressVersionPrimary=null;ay.length=0}var kf=Ri.ReactCurrentDispatcher,ly=Ri.ReactCurrentBatchConfig,ja=0,Xt=null,An=null,Nn=null,Sp=!1,Qu=!1,Ad=0,jV=0;function Gn(){throw Error(te(321))}function j_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vs(t[n],e[n]))return!1;return!0}function $_(t,e,n,r,s,i){if(ja=i,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kf.current=t===null||t.memoizedState===null?WV:qV,t=n(r,s),Qu){i=0;do{if(Qu=!1,Ad=0,25<=i)throw Error(te(301));i+=1,Nn=An=null,e.updateQueue=null,kf.current=HV,t=n(r,s)}while(Qu)}if(kf.current=bp,e=An!==null&&An.next!==null,ja=0,Nn=An=Xt=null,Sp=!1,e)throw Error(te(300));return t}function B_(){var t=Ad!==0;return Ad=0,t}function Ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Xt.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function ns(){if(An===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var e=Nn===null?Xt.memoizedState:Nn.next;if(e!==null)Nn=e,An=t;else{if(t===null)throw Error(te(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Nn===null?Xt.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function xd(t,e){return typeof e=="function"?e(t):e}function cy(t){var e=ns(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=An,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((ja&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Xt.lanes|=d,$a|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,vs(r,e.memoizedState)||(wr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Xt.lanes|=i,$a|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uy(t){var e=ns(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vs(i,e.memoizedState)||(wr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function r1(){}function s1(t,e){var n=Xt,r=ns(),s=e(),i=!vs(r.memoizedState,s);if(i&&(r.memoizedState=s,wr=!0),r=r.queue,z_(a1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Nn!==null&&Nn.memoizedState.tag&1){if(n.flags|=2048,Rd(9,o1.bind(null,n,r,s,e),void 0,null),Ln===null)throw Error(te(349));ja&30||i1(n,e,s)}return s}function i1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o1(t,e,n,r){e.value=n,e.getSnapshot=r,l1(e)&&c1(t)}function a1(t,e,n){return n(function(){l1(e)&&c1(t)})}function l1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vs(t,n)}catch{return!0}}function c1(t){var e=wi(t,1);e!==null&&ms(e,t,1,-1)}function lI(t){var e=Ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:t},e.queue=t,t=t.dispatch=zV.bind(null,Xt,t),[e.memoizedState,t]}function Rd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function u1(){return ns().memoizedState}function Nf(t,e,n,r){var s=Ds();Xt.flags|=t,s.memoizedState=Rd(1|e,n,void 0,r===void 0?null:r)}function Cm(t,e,n,r){var s=ns();r=r===void 0?null:r;var i=void 0;if(An!==null){var o=An.memoizedState;if(i=o.destroy,r!==null&&j_(r,o.deps)){s.memoizedState=Rd(e,n,i,r);return}}Xt.flags|=t,s.memoizedState=Rd(1|e,n,i,r)}function cI(t,e){return Nf(8390656,8,t,e)}function z_(t,e){return Cm(2048,8,t,e)}function d1(t,e){return Cm(4,2,t,e)}function h1(t,e){return Cm(4,4,t,e)}function f1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p1(t,e,n){return n=n!=null?n.concat([t]):null,Cm(4,4,f1.bind(null,e,t),n)}function W_(){}function m1(t,e){var n=ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&j_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g1(t,e){var n=ns();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&j_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function y1(t,e,n){return ja&21?(vs(n,e)||(n=TR(),Xt.lanes|=n,$a|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=n)}function $V(t,e){var n=xt;xt=n!==0&&4>n?n:4,t(!0);var r=ly.transition;ly.transition={};try{t(!1),e()}finally{xt=n,ly.transition=r}}function v1(){return ns().memoizedState}function BV(t,e,n){var r=wo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},w1(t))_1(e,n);else if(n=e1(t,e,n,r),n!==null){var s=dr();ms(n,t,r,s),E1(n,e,r)}}function zV(t,e,n){var r=wo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(w1(t))_1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,vs(a,o)){var l=e.interleaved;l===null?(s.next=s,L_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=e1(t,e,s,r),n!==null&&(s=dr(),ms(n,t,r,s),E1(n,e,r))}}function w1(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function _1(t,e){Qu=Sp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function E1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E_(t,n)}}var bp={readContext:ts,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},WV={readContext:ts,useCallback:function(t,e){return Ds().memoizedState=[t,e===void 0?null:e],t},useContext:ts,useEffect:cI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nf(4194308,4,f1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nf(4,2,t,e)},useMemo:function(t,e){var n=Ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ds();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BV.bind(null,Xt,t),[r.memoizedState,t]},useRef:function(t){var e=Ds();return t={current:t},e.memoizedState=t},useState:lI,useDebugValue:W_,useDeferredValue:function(t){return Ds().memoizedState=t},useTransition:function(){var t=lI(!1),e=t[0];return t=$V.bind(null,t[1]),Ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xt,s=Ds();if(Ht){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),Ln===null)throw Error(te(349));ja&30||i1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cI(a1.bind(null,r,i,t),[t]),r.flags|=2048,Rd(9,o1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ds(),e=Ln.identifierPrefix;if(Ht){var n=ci,r=li;n=(r&~(1<<32-ps(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ad++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qV={readContext:ts,useCallback:m1,useContext:ts,useEffect:z_,useImperativeHandle:p1,useInsertionEffect:d1,useLayoutEffect:h1,useMemo:g1,useReducer:cy,useRef:u1,useState:function(){return cy(xd)},useDebugValue:W_,useDeferredValue:function(t){var e=ns();return y1(e,An.memoizedState,t)},useTransition:function(){var t=cy(xd)[0],e=ns().memoizedState;return[t,e]},useMutableSource:r1,useSyncExternalStore:s1,useId:v1,unstable_isNewReconciler:!1},HV={readContext:ts,useCallback:m1,useContext:ts,useEffect:z_,useImperativeHandle:p1,useInsertionEffect:d1,useLayoutEffect:h1,useMemo:g1,useReducer:uy,useRef:u1,useState:function(){return uy(xd)},useDebugValue:W_,useDeferredValue:function(t){var e=ns();return An===null?e.memoizedState=t:y1(e,An.memoizedState,t)},useTransition:function(){var t=uy(xd)[0],e=ns().memoizedState;return[t,e]},useMutableSource:r1,useSyncExternalStore:s1,useId:v1,unstable_isNewReconciler:!1};function os(t,e){if(t&&t.defaultProps){e=Zt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dm={isMounted:function(t){return(t=t._reactInternals)?tl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dr(),s=wo(t),i=hi(r,s);i.payload=e,n!=null&&(i.callback=n),e=yo(t,i,s),e!==null&&(ms(e,t,s,r),Df(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dr(),s=wo(t),i=hi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yo(t,i,s),e!==null&&(ms(e,t,s,r),Df(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dr(),r=wo(t),s=hi(n,r);s.tag=2,e!=null&&(s.callback=e),e=yo(t,s,r),e!==null&&(ms(e,t,r,n),Df(e,t,r))}};function uI(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_d(n,r)||!_d(s,i):!0}function T1(t,e,n){var r=!1,s=Co,i=e.contextType;return typeof i=="object"&&i!==null?i=ts(i):(s=Sr(e)?Fa:sr.current,r=e.contextTypes,i=(r=r!=null)?lc(t,s):Co),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function dI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dm.enqueueReplaceState(e,e.state,null)}function Fv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},V_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ts(i):(i=Sr(e)?Fa:sr.current,s.context=lc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Dm.enqueueReplaceState(s,s.state,null),Tp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hc(t,e){try{var n="",r=e;do n+=_L(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Uv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KV=typeof WeakMap=="function"?WeakMap:Map;function I1(t,e,n){n=hi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xp||(xp=!0,Qv=r),Uv(t,e)},n}function S1(t,e,n){n=hi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Uv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Uv(t,e),typeof r!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aM.bind(null,t,e,n),e.then(t,t))}function fI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pI(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hi(-1,1),e.tag=2,yo(n,e,1))),n.lanes|=1),t)}var GV=Ri.ReactCurrentOwner,wr=!1;function lr(t,e,n,r){e.child=t===null?ZR(e,null,n,r):uc(e,t.child,n,r)}function mI(t,e,n,r,s){n=n.render;var i=e.ref;return ql(e,s),r=$_(t,e,n,r,i,s),n=B_(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(Ht&&n&&P_(e),e.flags|=1,lr(t,e,r,s),e.child)}function gI(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!X_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,b1(t,e,i,r,s)):(t=Mf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_d,n(o,r)&&t.ref===e.ref)return _i(t,e,s)}return e.flags|=1,t=_o(i,r),t.ref=e.ref,t.return=e,e.child=t}function b1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_d(i,r)&&t.ref===e.ref)if(wr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wr=!0);else return e.lanes=t.lanes,_i(t,e,s)}return jv(t,e,n,r,s)}function A1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Ul,Rr),Rr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vt(Ul,Rr),Rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Vt(Ul,Rr),Rr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Vt(Ul,Rr),Rr|=r;return lr(t,e,s,n),e.child}function x1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jv(t,e,n,r,s){var i=Sr(n)?Fa:sr.current;return i=lc(e,i),ql(e,s),n=$_(t,e,n,r,i,s),r=B_(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(Ht&&r&&P_(e),e.flags|=1,lr(t,e,n,s),e.child)}function yI(t,e,n,r,s){if(Sr(n)){var i=!0;yp(e)}else i=!1;if(ql(e,s),e.stateNode===null)Of(t,e),T1(e,n,r),Fv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ts(c):(c=Sr(n)?Fa:sr.current,c=lc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&dI(e,o,r,c),Yi=!1;var f=e.memoizedState;o.state=f,Tp(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ir.current||Yi?(typeof d=="function"&&(Mv(e,n,d,r),l=e.memoizedState),(a=Yi||uI(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,t1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:os(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ts(l):(l=Sr(n)?Fa:sr.current,l=lc(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&dI(e,o,r,l),Yi=!1,f=e.memoizedState,o.state=f,Tp(e,r,o,s);var w=e.memoizedState;a!==h||f!==w||Ir.current||Yi?(typeof p=="function"&&(Mv(e,n,p,r),w=e.memoizedState),(c=Yi||uI(e,n,c,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return $v(t,e,n,r,i,s)}function $v(t,e,n,r,s,i){x1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&nI(e,n,!1),_i(t,e,i);r=e.stateNode,GV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=uc(e,t.child,null,i),e.child=uc(e,null,a,i)):lr(t,e,a,i),e.memoizedState=r.state,s&&nI(e,n,!0),e.child}function R1(t){var e=t.stateNode;e.pendingContext?tI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tI(t,e.context,!1),M_(t,e.containerInfo)}function vI(t,e,n,r,s){return cc(),D_(s),e.flags|=256,lr(t,e,n,r),e.child}var Bv={dehydrated:null,treeContext:null,retryLane:0};function zv(t){return{baseLanes:t,cachePool:null,transitions:null}}function P1(t,e,n){var r=e.pendingProps,s=Yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Vt(Yt,s&1),t===null)return Lv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Om(o,r,0,null),t=Na(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zv(n),e.memoizedState=Bv,t):q_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return QV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_o(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=_o(a,i):(i=Na(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bv,r}return i=t.child,t=i.sibling,r=_o(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function q_(t,e){return e=Om({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jh(t,e,n,r){return r!==null&&D_(r),uc(e,t.child,null,n),t=q_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dy(Error(te(422))),Jh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Om({mode:"visible",children:r.children},s,0,null),i=Na(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&uc(e,t.child,null,o),e.child.memoizedState=zv(o),e.memoizedState=Bv,i);if(!(e.mode&1))return Jh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(te(419)),r=dy(i,r,void 0),Jh(t,e,o,r)}if(a=(o&t.childLanes)!==0,wr||a){if(r=Ln,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,wi(t,s),ms(r,t,s,-1))}return J_(),r=dy(Error(te(421))),Jh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Or=go(s.nextSibling),Mr=e,Ht=!0,ds=null,t!==null&&(Yr[Jr++]=li,Yr[Jr++]=ci,Yr[Jr++]=Ua,li=t.id,ci=t.overflow,Ua=e),e=q_(e,r.children),e.flags|=4096,e)}function wI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vv(t.return,e,n)}function hy(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function C1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(lr(t,e,r.children,n),r=Yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wI(t,n,e);else if(t.tag===19)wI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vt(Yt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ip(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hy(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ip(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hy(e,!0,n,null,i);break;case"together":hy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Of(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$a|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=_o(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_o(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YV(t,e,n){switch(e.tag){case 3:R1(e),cc();break;case 5:n1(e);break;case 1:Sr(e.type)&&yp(e);break;case 4:M_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Vt(_p,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vt(Yt,Yt.current&1),e.flags|=128,null):n&e.child.childLanes?P1(t,e,n):(Vt(Yt,Yt.current&1),t=_i(t,e,n),t!==null?t.sibling:null);Vt(Yt,Yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return C1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vt(Yt,Yt.current),r)break;return null;case 22:case 23:return e.lanes=0,A1(t,e,n)}return _i(t,e,n)}var D1,Wv,k1,N1;D1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wv=function(){};k1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ma(Ws.current);var i=null;switch(n){case"input":s=hv(t,s),r=hv(t,r),i=[];break;case"select":s=Zt({},s,{value:void 0}),r=Zt({},r,{value:void 0}),i=[];break;case"textarea":s=mv(t,s),r=mv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mp)}yv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Bt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};N1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eu(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function JV(t,e,n){var r=e.pendingProps;switch(C_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(e),null;case 1:return Sr(e.type)&&gp(),Qn(e),null;case 3:return r=e.stateNode,dc(),zt(Ir),zt(sr),U_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ds!==null&&(Xv(ds),ds=null))),Wv(t,e),Qn(e),null;case 5:F_(e);var s=ma(bd.current);if(n=e.type,t!==null&&e.stateNode!=null)k1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return Qn(e),null}if(t=ma(Ws.current),Qh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ms]=e,r[Id]=i,t=(e.mode&1)!==0,n){case"dialog":Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":case"embed":Bt("load",r);break;case"video":case"audio":for(s=0;s<Lu.length;s++)Bt(Lu[s],r);break;case"source":Bt("error",r);break;case"img":case"image":case"link":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"input":RT(r,i),Bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",r);break;case"textarea":CT(r,i),Bt("invalid",r)}yv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Gh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Gh(r.textContent,a,t),s=["children",""+a]):fd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Bt("scroll",r)}switch(n){case"input":jh(r),PT(r,i,!0);break;case"textarea":jh(r),DT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ms]=e,t[Id]=r,D1(t,e,!1,!1),e.stateNode=t;e:{switch(o=vv(n,r),n){case"dialog":Bt("cancel",t),Bt("close",t),s=r;break;case"iframe":case"object":case"embed":Bt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Lu.length;s++)Bt(Lu[s],t);s=r;break;case"source":Bt("error",t),s=r;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),s=r;break;case"details":Bt("toggle",t),s=r;break;case"input":RT(t,r),s=hv(t,r),Bt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Zt({},r,{value:void 0}),Bt("invalid",t);break;case"textarea":CT(t,r),s=mv(t,r),Bt("invalid",t);break;default:s=r}yv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?uR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lR(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pd(t,l):typeof l=="number"&&pd(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Bt("scroll",t):l!=null&&m_(t,i,l,o))}switch(n){case"input":jh(t),PT(t,r,!1);break;case"textarea":jh(t),DT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Po(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$l(t,!!r.multiple,i,!1):r.defaultValue!=null&&$l(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qn(e),null;case 6:if(t&&e.stateNode!=null)N1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=ma(bd.current),ma(Ws.current),Qh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ms]=e,(i=r.nodeValue!==n)&&(t=Mr,t!==null))switch(t.tag){case 3:Gh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ms]=e,e.stateNode=r}return Qn(e),null;case 13:if(zt(Yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&Or!==null&&e.mode&1&&!(e.flags&128))JR(),cc(),e.flags|=98560,i=!1;else if(i=Qh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[Ms]=e}else cc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qn(e),i=!1}else ds!==null&&(Xv(ds),ds=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?xn===0&&(xn=3):J_())),e.updateQueue!==null&&(e.flags|=4),Qn(e),null);case 4:return dc(),Wv(t,e),t===null&&Ed(e.stateNode.containerInfo),Qn(e),null;case 10:return O_(e.type._context),Qn(e),null;case 17:return Sr(e.type)&&gp(),Qn(e),null;case 19:if(zt(Yt),i=e.memoizedState,i===null)return Qn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Eu(i,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ip(t),o!==null){for(e.flags|=128,Eu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vt(Yt,Yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&pn()>fc&&(e.flags|=128,r=!0,Eu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ip(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ht)return Qn(e),null}else 2*pn()-i.renderingStartTime>fc&&n!==1073741824&&(e.flags|=128,r=!0,Eu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pn(),e.sibling=null,n=Yt.current,Vt(Yt,r?n&1|2:n&1),e):(Qn(e),null);case 22:case 23:return Y_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rr&1073741824&&(Qn(e),e.subtreeFlags&6&&(e.flags|=8192)):Qn(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function XV(t,e){switch(C_(e),e.tag){case 1:return Sr(e.type)&&gp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dc(),zt(Ir),zt(sr),U_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return F_(e),null;case 13:if(zt(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));cc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Yt),null;case 4:return dc(),null;case 10:return O_(e.type._context),null;case 22:case 23:return Y_(),null;case 24:return null;default:return null}}var Xh=!1,er=!1,ZV=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Fl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){an(t,e,r)}else n.current=null}function qv(t,e,n){try{n()}catch(r){an(t,e,r)}}var _I=!1;function eM(t,e){if(Rv=hp,t=FR(),R_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pv={focusedElem:t,selectionRange:n},hp=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,v=w.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?g:os(e.type,g),v);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(R){an(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return w=_I,_I=!1,w}function Yu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&qv(e,n,i)}s=s.next}while(s!==r)}}function km(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function O1(t){var e=t.alternate;e!==null&&(t.alternate=null,O1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ms],delete e[Id],delete e[kv],delete e[VV],delete e[MV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L1(t){return t.tag===5||t.tag===3||t.tag===4}function EI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mp));else if(r!==4&&(t=t.child,t!==null))for(Kv(t,e,n),t=t.sibling;t!==null;)Kv(t,e,n),t=t.sibling}function Gv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gv(t,e,n),t=t.sibling;t!==null;)Gv(t,e,n),t=t.sibling}var Mn=null,cs=!1;function ji(t,e,n){for(n=n.child;n!==null;)V1(t,e,n),n=n.sibling}function V1(t,e,n){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Sm,n)}catch{}switch(n.tag){case 5:er||Fl(n,e);case 6:var r=Mn,s=cs;Mn=null,ji(t,e,n),Mn=r,cs=s,Mn!==null&&(cs?(t=Mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mn.removeChild(n.stateNode));break;case 18:Mn!==null&&(cs?(t=Mn,n=n.stateNode,t.nodeType===8?iy(t.parentNode,n):t.nodeType===1&&iy(t,n),vd(t)):iy(Mn,n.stateNode));break;case 4:r=Mn,s=cs,Mn=n.stateNode.containerInfo,cs=!0,ji(t,e,n),Mn=r,cs=s;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&qv(n,e,o),s=s.next}while(s!==r)}ji(t,e,n);break;case 1:if(!er&&(Fl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){an(n,e,a)}ji(t,e,n);break;case 21:ji(t,e,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,ji(t,e,n),er=r):ji(t,e,n);break;default:ji(t,e,n)}}function TI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZV),e.forEach(function(r){var s=cM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ss(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mn=a.stateNode,cs=!1;break e;case 3:Mn=a.stateNode.containerInfo,cs=!0;break e;case 4:Mn=a.stateNode.containerInfo,cs=!0;break e}a=a.return}if(Mn===null)throw Error(te(160));V1(i,o,s),Mn=null,cs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){an(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)M1(e,t),e=e.sibling}function M1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ss(e,t),Cs(t),r&4){try{Yu(3,t,t.return),km(3,t)}catch(g){an(t,t.return,g)}try{Yu(5,t,t.return)}catch(g){an(t,t.return,g)}}break;case 1:ss(e,t),Cs(t),r&512&&n!==null&&Fl(n,n.return);break;case 5:if(ss(e,t),Cs(t),r&512&&n!==null&&Fl(n,n.return),t.flags&32){var s=t.stateNode;try{pd(s,"")}catch(g){an(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&iR(s,i),vv(a,o);var c=vv(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?uR(s,h):d==="dangerouslySetInnerHTML"?lR(s,h):d==="children"?pd(s,h):m_(s,d,h,c)}switch(a){case"input":fv(s,i);break;case"textarea":oR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?$l(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?$l(s,!!i.multiple,i.defaultValue,!0):$l(s,!!i.multiple,i.multiple?[]:"",!1))}s[Id]=i}catch(g){an(t,t.return,g)}}break;case 6:if(ss(e,t),Cs(t),r&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){an(t,t.return,g)}}break;case 3:if(ss(e,t),Cs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vd(e.containerInfo)}catch(g){an(t,t.return,g)}break;case 4:ss(e,t),Cs(t);break;case 13:ss(e,t),Cs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(G_=pn())),r&4&&TI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(er=(c=er)||d,ss(e,t),er=c):ss(e,t),Cs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ve=t,d=t.child;d!==null;){for(h=ve=d;ve!==null;){switch(f=ve,p=f.child,f.tag){case 0:case 11:case 14:case 15:Yu(4,f,f.return);break;case 1:Fl(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(g){an(r,n,g)}}break;case 5:Fl(f,f.return);break;case 22:if(f.memoizedState!==null){SI(h);continue}}p!==null?(p.return=f,ve=p):SI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cR("display",o))}catch(g){an(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){an(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ss(e,t),Cs(t),r&4&&TI(t);break;case 21:break;default:ss(e,t),Cs(t)}}function Cs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L1(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pd(s,""),r.flags&=-33);var i=EI(t);Gv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=EI(t);Kv(t,a,o);break;default:throw Error(te(161))}}catch(l){an(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tM(t,e,n){ve=t,F1(t)}function F1(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||er;a=Xh;var c=er;if(Xh=o,(er=l)&&!c)for(ve=s;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?bI(s):l!==null?(l.return=o,ve=l):bI(s);for(;i!==null;)ve=i,F1(i),i=i.sibling;ve=s,Xh=a,er=c}II(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ve=i):II(t)}}function II(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:er||km(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!er)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:os(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&aI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}aI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&vd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}er||e.flags&512&&Hv(e)}catch(f){an(e,e.return,f)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function SI(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function bI(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{km(4,e)}catch(l){an(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){an(e,s,l)}}var i=e.return;try{Hv(e)}catch(l){an(e,i,l)}break;case 5:var o=e.return;try{Hv(e)}catch(l){an(e,o,l)}}}catch(l){an(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var nM=Math.ceil,Ap=Ri.ReactCurrentDispatcher,H_=Ri.ReactCurrentOwner,Zr=Ri.ReactCurrentBatchConfig,wt=0,Ln=null,En=null,Un=0,Rr=0,Ul=Bo(0),xn=0,Pd=null,$a=0,Nm=0,K_=0,Ju=null,vr=null,G_=0,fc=1/0,ri=null,xp=!1,Qv=null,vo=null,Zh=!1,ao=null,Rp=0,Xu=0,Yv=null,Lf=-1,Vf=0;function dr(){return wt&6?pn():Lf!==-1?Lf:Lf=pn()}function wo(t){return t.mode&1?wt&2&&Un!==0?Un&-Un:UV.transition!==null?(Vf===0&&(Vf=TR()),Vf):(t=xt,t!==0||(t=window.event,t=t===void 0?16:PR(t.type)),t):1}function ms(t,e,n,r){if(50<Xu)throw Xu=0,Yv=null,Error(te(185));ih(t,n,r),(!(wt&2)||t!==Ln)&&(t===Ln&&(!(wt&2)&&(Nm|=n),xn===4&&Xi(t,Un)),br(t,r),n===1&&wt===0&&!(e.mode&1)&&(fc=pn()+500,Pm&&zo()))}function br(t,e){var n=t.callbackNode;UL(t,e);var r=dp(t,t===Ln?Un:0);if(r===0)n!==null&&OT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&OT(n),e===1)t.tag===0?FV(AI.bind(null,t)):GR(AI.bind(null,t)),OV(function(){!(wt&6)&&zo()}),n=null;else{switch(IR(r)){case 1:n=__;break;case 4:n=_R;break;case 16:n=up;break;case 536870912:n=ER;break;default:n=up}n=H1(n,U1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function U1(t,e){if(Lf=-1,Vf=0,wt&6)throw Error(te(327));var n=t.callbackNode;if(Hl()&&t.callbackNode!==n)return null;var r=dp(t,t===Ln?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pp(t,r);else{e=r;var s=wt;wt|=2;var i=$1();(Ln!==t||Un!==e)&&(ri=null,fc=pn()+500,ka(t,e));do try{iM();break}catch(a){j1(t,a)}while(!0);N_(),Ap.current=i,wt=s,En!==null?e=0:(Ln=null,Un=0,e=xn)}if(e!==0){if(e===2&&(s=Iv(t),s!==0&&(r=s,e=Jv(t,s))),e===1)throw n=Pd,ka(t,0),Xi(t,r),br(t,pn()),n;if(e===6)Xi(t,r);else{if(s=t.current.alternate,!(r&30)&&!rM(s)&&(e=Pp(t,r),e===2&&(i=Iv(t),i!==0&&(r=i,e=Jv(t,i))),e===1))throw n=Pd,ka(t,0),Xi(t,r),br(t,pn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:na(t,vr,ri);break;case 3:if(Xi(t,r),(r&130023424)===r&&(e=G_+500-pn(),10<e)){if(dp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dv(na.bind(null,t,vr,ri),e);break}na(t,vr,ri);break;case 4:if(Xi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ps(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nM(r/1960))-r,10<r){t.timeoutHandle=Dv(na.bind(null,t,vr,ri),r);break}na(t,vr,ri);break;case 5:na(t,vr,ri);break;default:throw Error(te(329))}}}return br(t,pn()),t.callbackNode===n?U1.bind(null,t):null}function Jv(t,e){var n=Ju;return t.current.memoizedState.isDehydrated&&(ka(t,e).flags|=256),t=Pp(t,e),t!==2&&(e=vr,vr=n,e!==null&&Xv(e)),t}function Xv(t){vr===null?vr=t:vr.push.apply(vr,t)}function rM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xi(t,e){for(e&=~K_,e&=~Nm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ps(e),r=1<<n;t[n]=-1,e&=~r}}function AI(t){if(wt&6)throw Error(te(327));Hl();var e=dp(t,0);if(!(e&1))return br(t,pn()),null;var n=Pp(t,e);if(t.tag!==0&&n===2){var r=Iv(t);r!==0&&(e=r,n=Jv(t,r))}if(n===1)throw n=Pd,ka(t,0),Xi(t,e),br(t,pn()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,na(t,vr,ri),br(t,pn()),null}function Q_(t,e){var n=wt;wt|=1;try{return t(e)}finally{wt=n,wt===0&&(fc=pn()+500,Pm&&zo())}}function Ba(t){ao!==null&&ao.tag===0&&!(wt&6)&&Hl();var e=wt;wt|=1;var n=Zr.transition,r=xt;try{if(Zr.transition=null,xt=1,t)return t()}finally{xt=r,Zr.transition=n,wt=e,!(wt&6)&&zo()}}function Y_(){Rr=Ul.current,zt(Ul)}function ka(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NV(n)),En!==null)for(n=En.return;n!==null;){var r=n;switch(C_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gp();break;case 3:dc(),zt(Ir),zt(sr),U_();break;case 5:F_(r);break;case 4:dc();break;case 13:zt(Yt);break;case 19:zt(Yt);break;case 10:O_(r.type._context);break;case 22:case 23:Y_()}n=n.return}if(Ln=t,En=t=_o(t.current,null),Un=Rr=e,xn=0,Pd=null,K_=Nm=$a=0,vr=Ju=null,pa!==null){for(e=0;e<pa.length;e++)if(n=pa[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}pa=null}return t}function j1(t,e){do{var n=En;try{if(N_(),kf.current=bp,Sp){for(var r=Xt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sp=!1}if(ja=0,Nn=An=Xt=null,Qu=!1,Ad=0,H_.current=null,n===null||n.return===null){xn=1,Pd=e,En=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=fI(o);if(p!==null){p.flags&=-257,pI(p,o,a,i,e),p.mode&1&&hI(i,c,e),e=p,l=c;var w=e.updateQueue;if(w===null){var g=new Set;g.add(l),e.updateQueue=g}else w.add(l);break e}else{if(!(e&1)){hI(i,c,e),J_();break e}l=Error(te(426))}}else if(Ht&&a.mode&1){var v=fI(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),pI(v,o,a,i,e),D_(hc(l,a));break e}}i=l=hc(l,a),xn!==4&&(xn=2),Ju===null?Ju=[i]:Ju.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=I1(i,l,e);oI(i,E);break e;case 1:a=l;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(vo===null||!vo.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=S1(i,a,e);oI(i,R);break e}}i=i.return}while(i!==null)}z1(n)}catch(k){e=k,En===n&&n!==null&&(En=n=n.return);continue}break}while(!0)}function $1(){var t=Ap.current;return Ap.current=bp,t===null?bp:t}function J_(){(xn===0||xn===3||xn===2)&&(xn=4),Ln===null||!($a&268435455)&&!(Nm&268435455)||Xi(Ln,Un)}function Pp(t,e){var n=wt;wt|=2;var r=$1();(Ln!==t||Un!==e)&&(ri=null,ka(t,e));do try{sM();break}catch(s){j1(t,s)}while(!0);if(N_(),wt=n,Ap.current=r,En!==null)throw Error(te(261));return Ln=null,Un=0,xn}function sM(){for(;En!==null;)B1(En)}function iM(){for(;En!==null&&!CL();)B1(En)}function B1(t){var e=q1(t.alternate,t,Rr);t.memoizedProps=t.pendingProps,e===null?z1(t):En=e,H_.current=null}function z1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XV(n,e),n!==null){n.flags&=32767,En=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,En=null;return}}else if(n=JV(n,e,Rr),n!==null){En=n;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);xn===0&&(xn=5)}function na(t,e,n){var r=xt,s=Zr.transition;try{Zr.transition=null,xt=1,oM(t,e,n,r)}finally{Zr.transition=s,xt=r}return null}function oM(t,e,n,r){do Hl();while(ao!==null);if(wt&6)throw Error(te(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jL(t,i),t===Ln&&(En=Ln=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zh||(Zh=!0,H1(up,function(){return Hl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zr.transition,Zr.transition=null;var o=xt;xt=1;var a=wt;wt|=4,H_.current=null,eM(t,n),M1(n,t),AV(Pv),hp=!!Rv,Pv=Rv=null,t.current=n,tM(n),DL(),wt=a,xt=o,Zr.transition=i}else t.current=n;if(Zh&&(Zh=!1,ao=t,Rp=s),i=t.pendingLanes,i===0&&(vo=null),OL(n.stateNode),br(t,pn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xp)throw xp=!1,t=Qv,Qv=null,t;return Rp&1&&t.tag!==0&&Hl(),i=t.pendingLanes,i&1?t===Yv?Xu++:(Xu=0,Yv=t):Xu=0,zo(),null}function Hl(){if(ao!==null){var t=IR(Rp),e=Zr.transition,n=xt;try{if(Zr.transition=null,xt=16>t?16:t,ao===null)var r=!1;else{if(t=ao,ao=null,Rp=0,wt&6)throw Error(te(331));var s=wt;for(wt|=4,ve=t.current;ve!==null;){var i=ve,o=i.child;if(ve.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ve=c;ve!==null;){var d=ve;switch(d.tag){case 0:case 11:case 15:Yu(8,d,i)}var h=d.child;if(h!==null)h.return=d,ve=h;else for(;ve!==null;){d=ve;var f=d.sibling,p=d.return;if(O1(d),d===c){ve=null;break}if(f!==null){f.return=p,ve=f;break}ve=p}}}var w=i.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ve=o;else e:for(;ve!==null;){if(i=ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yu(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ve=E;break e}ve=i.return}}var y=t.current;for(ve=y;ve!==null;){o=ve;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ve=_;else e:for(o=y;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:km(9,a)}}catch(k){an(a,a.return,k)}if(a===o){ve=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ve=R;break e}ve=a.return}}if(wt=s,zo(),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Sm,t)}catch{}r=!0}return r}finally{xt=n,Zr.transition=e}}return!1}function xI(t,e,n){e=hc(n,e),e=I1(t,e,1),t=yo(t,e,1),e=dr(),t!==null&&(ih(t,1,e),br(t,e))}function an(t,e,n){if(t.tag===3)xI(t,t,n);else for(;e!==null;){if(e.tag===3){xI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vo===null||!vo.has(r))){t=hc(n,t),t=S1(e,t,1),e=yo(e,t,1),t=dr(),e!==null&&(ih(e,1,t),br(e,t));break}}e=e.return}}function aM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dr(),t.pingedLanes|=t.suspendedLanes&n,Ln===t&&(Un&n)===n&&(xn===4||xn===3&&(Un&130023424)===Un&&500>pn()-G_?ka(t,0):K_|=n),br(t,e)}function W1(t,e){e===0&&(t.mode&1?(e=zh,zh<<=1,!(zh&130023424)&&(zh=4194304)):e=1);var n=dr();t=wi(t,e),t!==null&&(ih(t,e,n),br(t,n))}function lM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),W1(t,n)}function cM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),W1(t,n)}var q1;q1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ir.current)wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wr=!1,YV(t,e,n);wr=!!(t.flags&131072)}else wr=!1,Ht&&e.flags&1048576&&QR(e,wp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Of(t,e),t=e.pendingProps;var s=lc(e,sr.current);ql(e,n),s=$_(null,e,r,t,s,n);var i=B_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sr(r)?(i=!0,yp(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,V_(e),s.updater=Dm,e.stateNode=s,s._reactInternals=e,Fv(e,r,t,n),e=$v(null,e,r,!0,i,n)):(e.tag=0,Ht&&i&&P_(e),lr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Of(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dM(r),t=os(r,t),s){case 0:e=jv(null,e,r,t,n);break e;case 1:e=yI(null,e,r,t,n);break e;case 11:e=mI(null,e,r,t,n);break e;case 14:e=gI(null,e,r,os(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:os(r,s),jv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:os(r,s),yI(t,e,r,s,n);case 3:e:{if(R1(e),t===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,t1(t,e),Tp(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=hc(Error(te(423)),e),e=vI(t,e,r,n,s);break e}else if(r!==s){s=hc(Error(te(424)),e),e=vI(t,e,r,n,s);break e}else for(Or=go(e.stateNode.containerInfo.firstChild),Mr=e,Ht=!0,ds=null,n=ZR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cc(),r===s){e=_i(t,e,n);break e}lr(t,e,r,n)}e=e.child}return e;case 5:return n1(e),t===null&&Lv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Cv(r,s)?o=null:i!==null&&Cv(r,i)&&(e.flags|=32),x1(t,e),lr(t,e,o,n),e.child;case 6:return t===null&&Lv(e),null;case 13:return P1(t,e,n);case 4:return M_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uc(e,null,r,n):lr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:os(r,s),mI(t,e,r,s,n);case 7:return lr(t,e,e.pendingProps,n),e.child;case 8:return lr(t,e,e.pendingProps.children,n),e.child;case 12:return lr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Vt(_p,r._currentValue),r._currentValue=o,i!==null)if(vs(i.value,o)){if(i.children===s.children&&!Ir.current){e=_i(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Vv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Vv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}lr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ql(e,n),s=ts(s),r=r(s),e.flags|=1,lr(t,e,r,n),e.child;case 14:return r=e.type,s=os(r,e.pendingProps),s=os(r.type,s),gI(t,e,r,s,n);case 15:return b1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:os(r,s),Of(t,e),e.tag=1,Sr(r)?(t=!0,yp(e)):t=!1,ql(e,n),T1(e,r,s),Fv(e,r,s,n),$v(null,e,r,!0,t,n);case 19:return C1(t,e,n);case 22:return A1(t,e,n)}throw Error(te(156,e.tag))};function H1(t,e){return wR(t,e)}function uM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(t,e,n,r){return new uM(t,e,n,r)}function X_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dM(t){if(typeof t=="function")return X_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===y_)return 11;if(t===v_)return 14}return 2}function _o(t,e){var n=t.alternate;return n===null?(n=Xr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")X_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pl:return Na(n.children,s,i,e);case g_:o=8,s|=8;break;case lv:return t=Xr(12,n,e,s|2),t.elementType=lv,t.lanes=i,t;case cv:return t=Xr(13,n,e,s),t.elementType=cv,t.lanes=i,t;case uv:return t=Xr(19,n,e,s),t.elementType=uv,t.lanes=i,t;case nR:return Om(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eR:o=10;break e;case tR:o=9;break e;case y_:o=11;break e;case v_:o=14;break e;case Qi:o=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Xr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Na(t,e,n,r){return t=Xr(7,t,r,e),t.lanes=n,t}function Om(t,e,n,r){return t=Xr(22,t,r,e),t.elementType=nR,t.lanes=n,t.stateNode={isHidden:!1},t}function fy(t,e,n){return t=Xr(6,t,null,e),t.lanes=n,t}function py(t,e,n){return e=Xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gg(0),this.expirationTimes=Gg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Z_(t,e,n,r,s,i,o,a,l){return t=new hM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},V_(i),t}function fM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K1(t){if(!t)return Co;t=t._reactInternals;e:{if(tl(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(Sr(n))return KR(t,n,e)}return e}function G1(t,e,n,r,s,i,o,a,l){return t=Z_(n,r,!0,t,s,i,o,a,l),t.context=K1(null),n=t.current,r=dr(),s=wo(n),i=hi(r,s),i.callback=e??null,yo(n,i,s),t.current.lanes=s,ih(t,s,r),br(t,r),t}function Lm(t,e,n,r){var s=e.current,i=dr(),o=wo(s);return n=K1(n),e.context===null?e.context=n:e.pendingContext=n,e=hi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yo(s,e,o),t!==null&&(ms(t,s,o,i),Df(t,s,o)),o}function Cp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function RI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function e0(t,e){RI(t,e),(t=t.alternate)&&RI(t,e)}function pM(){return null}var Q1=typeof reportError=="function"?reportError:function(t){console.error(t)};function t0(t){this._internalRoot=t}Vm.prototype.render=t0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Lm(t,e,null,null)};Vm.prototype.unmount=t0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ba(function(){Lm(null,t,null,null)}),e[vi]=null}};function Vm(t){this._internalRoot=t}Vm.prototype.unstable_scheduleHydration=function(t){if(t){var e=AR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ji.length&&e!==0&&e<Ji[n].priority;n++);Ji.splice(n,0,t),n===0&&RR(t)}};function n0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function PI(){}function mM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Cp(o);i.call(c)}}var o=G1(e,r,t,0,null,!1,!1,"",PI);return t._reactRootContainer=o,t[vi]=o.current,Ed(t.nodeType===8?t.parentNode:t),Ba(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Cp(l);a.call(c)}}var l=Z_(t,0,!1,null,null,!1,!1,"",PI);return t._reactRootContainer=l,t[vi]=l.current,Ed(t.nodeType===8?t.parentNode:t),Ba(function(){Lm(e,l,n,r)}),l}function Fm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Cp(o);a.call(l)}}Lm(e,o,t,s)}else o=mM(n,e,t,s,r);return Cp(o)}SR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ou(e.pendingLanes);n!==0&&(E_(e,n|1),br(e,pn()),!(wt&6)&&(fc=pn()+500,zo()))}break;case 13:Ba(function(){var r=wi(t,1);if(r!==null){var s=dr();ms(r,t,1,s)}}),e0(t,1)}};T_=function(t){if(t.tag===13){var e=wi(t,134217728);if(e!==null){var n=dr();ms(e,t,134217728,n)}e0(t,134217728)}};bR=function(t){if(t.tag===13){var e=wo(t),n=wi(t,e);if(n!==null){var r=dr();ms(n,t,e,r)}e0(t,e)}};AR=function(){return xt};xR=function(t,e){var n=xt;try{return xt=t,e()}finally{xt=n}};_v=function(t,e,n){switch(e){case"input":if(fv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rm(r);if(!s)throw Error(te(90));sR(r),fv(r,s)}}}break;case"textarea":oR(t,n);break;case"select":e=n.value,e!=null&&$l(t,!!n.multiple,e,!1)}};fR=Q_;pR=Ba;var gM={usingClientEntryPoint:!1,Events:[ah,Nl,Rm,dR,hR,Q_]},Tu={findFiberByHostInstance:fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yM={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yR(t),t===null?null:t.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||pM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{Sm=ef.inject(yM),zs=ef}catch{}}zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gM;zr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n0(e))throw Error(te(200));return fM(t,e,null,n)};zr.createRoot=function(t,e){if(!n0(t))throw Error(te(299));var n=!1,r="",s=Q1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Z_(t,1,!1,null,null,n,!1,r,s),t[vi]=e.current,Ed(t.nodeType===8?t.parentNode:t),new t0(e)};zr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=yR(e),t=t===null?null:t.stateNode,t};zr.flushSync=function(t){return Ba(t)};zr.hydrate=function(t,e,n){if(!Mm(e))throw Error(te(200));return Fm(null,t,e,!0,n)};zr.hydrateRoot=function(t,e,n){if(!n0(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Q1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=G1(e,null,t,1,n??null,s,!1,i,o),t[vi]=e.current,Ed(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vm(e)};zr.render=function(t,e,n){if(!Mm(e))throw Error(te(200));return Fm(null,t,e,!1,n)};zr.unmountComponentAtNode=function(t){if(!Mm(t))throw Error(te(40));return t._reactRootContainer?(Ba(function(){Fm(null,null,t,!1,function(){t._reactRootContainer=null,t[vi]=null})}),!0):!1};zr.unstable_batchedUpdates=Q_;zr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mm(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return Fm(t,e,n,!1,r)};zr.version="18.3.1-next-f1338f8080-20240426";function Y1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y1)}catch(t){console.error(t)}}Y1(),Yx.exports=zr;var ch=Yx.exports;const J1=Fx(ch);var X1,CI=ch;X1=CI.createRoot,CI.hydrateRoot;const vM="modulepreload",wM=function(t,e){return new URL(t,e).href},DI={},Q=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=wM(c,r),c in DI)return;DI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let w=o.length-1;w>=0;w--){const g=o[w];if(g.href===c&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":vM,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((w,g)=>{p.addEventListener("load",w),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},_M=1,EM=1e6;let my=0;function TM(){return my=(my+1)%Number.MAX_SAFE_INTEGER,my.toString()}const gy=new Map,kI=t=>{if(gy.has(t))return;const e=setTimeout(()=>{gy.delete(t),Zu({type:"REMOVE_TOAST",toastId:t})},EM);gy.set(t,e)},IM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,_M)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?kI(n):t.toasts.forEach(r=>{kI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ff=[];let Uf={toasts:[]};function Zu(t){Uf=IM(Uf,t),Ff.forEach(e=>{e(Uf)})}function SM({...t}){const e=TM(),n=s=>Zu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Zu({type:"DISMISS_TOAST",toastId:e});return Zu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function r0(){const[t,e]=S.useState(Uf);return S.useEffect(()=>(Ff.push(e),()=>{const n=Ff.indexOf(e);n>-1&&Ff.splice(n,1)}),[t]),{...t,toast:SM,dismiss:n=>Zu({type:"DISMISS_TOAST",toastId:n})}}function Lt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function NI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Z1(...t){return e=>{let n=!1;const r=t.map(s=>{const i=NI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():NI(t[s],null)}}}}function $n(...t){return S.useCallback(Z1(...t),t)}function bM(t,e){const n=S.createContext(e),r=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return T.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function jc(t,e=[]){let n=[];function r(i,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:p,...w}=h,g=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,v=S.useMemo(()=>w,Object.values(w));return T.jsx(g.Provider,{value:v,children:p})};c.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,w=S.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,AM(s,...e)]}function AM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Cd(t){const e=RM(t),n=S.forwardRef((r,s)=>{const{children:i,...o}=r,a=S.Children.toArray(i),l=a.find(CM);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return T.jsx(e,{...o,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return T.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var xM=Cd("Slot");function RM(t){const e=S.forwardRef((n,r)=>{const{children:s,...i}=n;if(S.isValidElement(s)){const o=kM(s),a=DM(i,s.props);return s.type!==S.Fragment&&(a.ref=r?Z1(r,o):o),S.cloneElement(s,a)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var eP=Symbol("radix.slottable");function PM(t){const e=({children:n})=>T.jsx(T.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=eP,e}function CM(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===eP}function DM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function kM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function NM(t){const e=t+"CollectionProvider",[n,r]=jc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:E}=g,y=j.useRef(null),_=j.useRef(new Map).current;return T.jsx(s,{scope:v,itemMap:_,collectionRef:y,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=Cd(a),c=j.forwardRef((g,v)=>{const{scope:E,children:y}=g,_=i(a,E),R=$n(v,_.collectionRef);return T.jsx(l,{ref:R,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Cd(d),p=j.forwardRef((g,v)=>{const{scope:E,children:y,..._}=g,R=j.useRef(null),k=$n(v,R),L=i(d,E);return j.useEffect(()=>(L.itemMap.set(R,{ref:R,..._}),()=>void L.itemMap.delete(R))),T.jsx(f,{[h]:"",ref:k,children:y})});p.displayName=d;function w(g){const v=i(t+"CollectionConsumer",g);return j.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const _=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((L,x)=>_.indexOf(L.ref.current)-_.indexOf(x.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},w,r]}var OM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],en=OM.reduce((t,e)=>{const n=Cd(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function tP(t,e){t&&ch.flushSync(()=>t.dispatchEvent(e))}function Gs(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function LM(t,e=globalThis==null?void 0:globalThis.document){const n=Gs(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var VM="DismissableLayer",Zv="dismissableLayer.update",MM="dismissableLayer.pointerDownOutside",FM="dismissableLayer.focusOutside",OI,nP=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Um=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(nP),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=S.useState({}),w=$n(e,x=>h(x)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=g.indexOf(v),y=d?g.indexOf(d):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,R=y>=E,k=jM(x=>{const A=x.target,b=[...c.branches].some(P=>P.contains(A));!R||b||(s==null||s(x),o==null||o(x),x.defaultPrevented||a==null||a())},f),L=$M(x=>{const A=x.target;[...c.branches].some(P=>P.contains(A))||(i==null||i(x),o==null||o(x),x.defaultPrevented||a==null||a())},f);return LM(x=>{y===c.layers.size-1&&(r==null||r(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},f),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(OI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),LI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=OI)}},[d,f,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),LI())},[d,c]),S.useEffect(()=>{const x=()=>p({});return document.addEventListener(Zv,x),()=>document.removeEventListener(Zv,x)},[]),T.jsx(en.div,{...l,ref:w,style:{pointerEvents:_?R?"auto":"none":void 0,...t.style},onFocusCapture:Lt(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Lt(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Lt(t.onPointerDownCapture,k.onPointerDownCapture)})});Um.displayName=VM;var UM="DismissableLayerBranch",rP=S.forwardRef((t,e)=>{const n=S.useContext(nP),r=S.useRef(null),s=$n(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),T.jsx(en.div,{...t,ref:s})});rP.displayName=UM;function jM(t,e=globalThis==null?void 0:globalThis.document){const n=Gs(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){sP(MM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function $M(t,e=globalThis==null?void 0:globalThis.document){const n=Gs(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&sP(FM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function LI(){const t=new CustomEvent(Zv);document.dispatchEvent(t)}function sP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?tP(s,i):s.dispatchEvent(i)}var BM=Um,zM=rP,Ei=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},WM="Portal",s0=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=S.useState(!1);Ei(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?J1.createPortal(T.jsx(en.div,{...r,ref:e}),o):null});s0.displayName=WM;function qM(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var nl=t=>{const{present:e,children:n}=t,r=HM(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=$n(r.ref,KM(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};nl.displayName="Presence";function HM(t){const[e,n]=S.useState(),r=S.useRef(null),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=qM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=tf(r.current);i.current=a==="mounted"?c:"none"},[a]),Ei(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,p=tf(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ei(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const g=tf(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(i.current=tf(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function tf(t){return(t==null?void 0:t.animationName)||"none"}function KM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var GM=h_[" useInsertionEffect ".trim().toString()]||Ei;function i0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=QM({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const f=YM(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function QM({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),s=S.useRef(n),i=S.useRef(e);return GM(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function YM(t){return typeof t=="function"}var JM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XM="VisuallyHidden",jm=S.forwardRef((t,e)=>T.jsx(en.span,{...t,ref:e,style:{...JM,...t.style}}));jm.displayName=XM;var ZM=jm,o0="ToastProvider",[a0,eF,tF]=NM("Toast"),[iP]=jc("Toast",[tF]),[nF,$m]=iP(o0),oP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=S.useState(null),[c,d]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${o0}\`. Expected non-empty \`string\`.`),T.jsx(a0.Provider,{scope:e,children:T.jsx(nF,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>d(p=>p+1),[]),onToastRemove:S.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};oP.displayName=o0;var aP="ToastViewport",rF=["F8"],ew="toast.viewportPause",tw="toast.viewportResume",lP=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=rF,label:s="Notifications ({hotkey})",...i}=t,o=$m(aP,n),a=eF(n),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=$n(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;S.useEffect(()=>{const v=E=>{var _;r.length!==0&&r.every(R=>E[R]||E.code===R)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),S.useEffect(()=>{const v=l.current,E=h.current;if(w&&v&&E){const y=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(ew);E.dispatchEvent(L),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(tw);E.dispatchEvent(L),o.isClosePausedRef.current=!1}},R=L=>{!v.contains(L.relatedTarget)&&_()},k=()=>{v.contains(document.activeElement)||_()};return v.addEventListener("focusin",y),v.addEventListener("focusout",R),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",_),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",R),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",_)}}},[w,o.isClosePausedRef]);const g=S.useCallback(({tabbingDirection:v})=>{const y=a().map(_=>{const R=_.ref.current,k=[R,...gF(R)];return v==="forwards"?k:k.reverse()});return(v==="forwards"?y.reverse():y).flat()},[a]);return S.useEffect(()=>{const v=h.current;if(v){const E=y=>{var k,L,x;const _=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!_){const A=document.activeElement,b=y.shiftKey;if(y.target===v&&b){(k=c.current)==null||k.focus();return}const O=g({tabbingDirection:b?"backwards":"forwards"}),C=O.findIndex($=>$===A);yy(O.slice(C+1))?y.preventDefault():b?(L=c.current)==null||L.focus():(x=d.current)==null||x.focus()}};return v.addEventListener("keydown",E),()=>v.removeEventListener("keydown",E)}},[a,g]),T.jsxs(zM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&T.jsx(nw,{ref:c,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});yy(v)}}),T.jsx(a0.Slot,{scope:n,children:T.jsx(en.ol,{tabIndex:-1,...i,ref:f})}),w&&T.jsx(nw,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});yy(v)}})]})});lP.displayName=aP;var cP="ToastFocusProxy",nw=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=$m(cP,n);return T.jsx(jm,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});nw.displayName=cP;var uh="Toast",sF="toast.swipeStart",iF="toast.swipeMove",oF="toast.swipeCancel",aF="toast.swipeEnd",uP=S.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=i0({prop:r,defaultProp:s??!0,onChange:i,caller:uh});return T.jsx(nl,{present:n||a,children:T.jsx(uF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Gs(t.onPause),onResume:Gs(t.onResume),onSwipeStart:Lt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Lt(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Lt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Lt(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});uP.displayName=uh;var[lF,cF]=iP(uh,{onClose(){}}),uF=S.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...w}=t,g=$m(uh,n),[v,E]=S.useState(null),y=$n(e,$=>E($)),_=S.useRef(null),R=S.useRef(null),k=s||g.duration,L=S.useRef(0),x=S.useRef(k),A=S.useRef(0),{onToastAdd:b,onToastRemove:P}=g,D=Gs(()=>{var re;(v==null?void 0:v.contains(document.activeElement))&&((re=g.viewport)==null||re.focus()),o()}),O=S.useCallback($=>{!$||$===1/0||(window.clearTimeout(A.current),L.current=new Date().getTime(),A.current=window.setTimeout(D,$))},[D]);S.useEffect(()=>{const $=g.viewport;if($){const re=()=>{O(x.current),c==null||c()},se=()=>{const ue=new Date().getTime()-L.current;x.current=x.current-ue,window.clearTimeout(A.current),l==null||l()};return $.addEventListener(ew,se),$.addEventListener(tw,re),()=>{$.removeEventListener(ew,se),$.removeEventListener(tw,re)}}},[g.viewport,k,l,c,O]),S.useEffect(()=>{i&&!g.isClosePausedRef.current&&O(k)},[i,k,g.isClosePausedRef,O]),S.useEffect(()=>(b(),()=>P()),[b,P]);const C=S.useMemo(()=>v?yP(v):null,[v]);return g.viewport?T.jsxs(T.Fragment,{children:[C&&T.jsx(dF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:C}),T.jsx(lF,{scope:n,onClose:D,children:ch.createPortal(T.jsx(a0.ItemSlot,{scope:n,children:T.jsx(BM,{asChild:!0,onEscapeKeyDown:Lt(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:T.jsx(en.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Lt(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Lt(t.onPointerDown,$=>{$.button===0&&(_.current={x:$.clientX,y:$.clientY})}),onPointerMove:Lt(t.onPointerMove,$=>{if(!_.current)return;const re=$.clientX-_.current.x,se=$.clientY-_.current.y,ue=!!R.current,U=["left","right"].includes(g.swipeDirection),V=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ee=U?V(0,re):0,oe=U?0:V(0,se),G=$.pointerType==="touch"?10:2,Ne={x:ee,y:oe},Ie={originalEvent:$,delta:Ne};ue?(R.current=Ne,nf(iF,h,Ie,{discrete:!1})):VI(Ne,g.swipeDirection,G)?(R.current=Ne,nf(sF,d,Ie,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(re)>G||Math.abs(se)>G)&&(_.current=null)}),onPointerUp:Lt(t.onPointerUp,$=>{const re=R.current,se=$.target;if(se.hasPointerCapture($.pointerId)&&se.releasePointerCapture($.pointerId),R.current=null,_.current=null,re){const ue=$.currentTarget,U={originalEvent:$,delta:re};VI(re,g.swipeDirection,g.swipeThreshold)?nf(aF,p,U,{discrete:!0}):nf(oF,f,U,{discrete:!0}),ue.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),dF=t=>{const{__scopeToast:e,children:n,...r}=t,s=$m(uh,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return pF(()=>o(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:T.jsx(s0,{asChild:!0,children:T.jsx(jm,{...r,children:i&&T.jsxs(T.Fragment,{children:[s.label," ",n]})})})},hF="ToastTitle",dP=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return T.jsx(en.div,{...r,ref:e})});dP.displayName=hF;var fF="ToastDescription",hP=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return T.jsx(en.div,{...r,ref:e})});hP.displayName=fF;var fP="ToastAction",pP=S.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?T.jsx(gP,{altText:n,asChild:!0,children:T.jsx(l0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${fP}\`. Expected non-empty \`string\`.`),null)});pP.displayName=fP;var mP="ToastClose",l0=S.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=cF(mP,n);return T.jsx(gP,{asChild:!0,children:T.jsx(en.button,{type:"button",...r,ref:e,onClick:Lt(t.onClick,s.onClose)})})});l0.displayName=mP;var gP=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return T.jsx(en.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function yP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),mF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...yP(r))}}),e}function nf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?tP(s,i):s.dispatchEvent(i)}var VI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function pF(t=()=>{}){const e=Gs(t);Ei(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function mF(t){return t.nodeType===t.ELEMENT_NODE}function gF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var yF=oP,vP=lP,wP=uP,_P=dP,EP=hP,TP=pP,IP=l0;function SP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=SP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function bP(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=SP(t))&&(r&&(r+=" "),r+=e);return r}const MI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,FI=bP,AP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return FI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=MI(d)||MI(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(w=>{let[g,v]=w;return Array.isArray(v)?v.includes({...i,...a}[g]):{...i,...a}[g]===v})?[...c,h,f]:c},[]);return FI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...wF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:xP("lucide",s),...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=(t,e)=>{const n=S.forwardRef(({className:r,...s},i)=>S.createElement(_F,{ref:i,iconNode:e,className:xP(`lucide-${vF(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=Nt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Nt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=Nt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=Nt("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=Nt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Nt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Nt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=Nt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=Nt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=Nt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=Nt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=Nt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Nt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Nt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=Nt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=Nt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Nt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=Nt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Nt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=Nt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Nt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=Nt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Nt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Nt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=Nt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=Nt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),u0="-",$F=t=>{const e=zF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(u0);return a[0]===""&&a.length!==1&&a.shift(),PP(a,e)||BF(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},PP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?PP(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(u0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},zI=/^\[(.+)\]$/,BF=t=>{if(zI.test(t)){const e=zI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},zF=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return qF(Object.entries(t.classGroups),n).forEach(([i,o])=>{rw(o,r,i,e)}),r},rw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:WI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(WF(s)){rw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{rw(o,WI(e,i),n,r)})})},WI=(t,e)=>{let n=t;return e.split(u0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},WF=t=>t.isThemeGetter,qF=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,HF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},CP="!",KF=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let E=a[v];if(c===0){if(E===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(E==="/"){h=v;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(CP),w=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},GF=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},QF=t=>({cache:HF(t.cacheSize),parseClassName:KF(t),...$F(t)}),YF=/\s+/,JF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(YF);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let w=!!p,g=r(w?f.substring(0,p):f);if(!g){if(!w){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}w=!1}const v=GF(d).join(":"),E=h?v+CP:v,y=E+g;if(i.includes(y))continue;i.push(y);const _=s(g,w);for(let R=0;R<_.length;++R){const k=_[R];i.push(E+k)}a=c+(a.length>0?" "+a:a)}return a};function XF(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=DP(e))&&(r&&(r+=" "),r+=n);return r}const DP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=DP(t[r]))&&(n&&(n+=" "),n+=e);return n};function ZF(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=QF(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=JF(l,n);return s(l,d),d}return function(){return i(XF.apply(null,arguments))}}const $t=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},kP=/^\[(?:([a-z-]+):)?(.+)\]$/i,eU=/^\d+\/\d+$/,tU=new Set(["px","full","screen"]),nU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ti=t=>Kl(t)||tU.has(t)||eU.test(t),$i=t=>$c(t,"length",pU),Kl=t=>!!t&&!Number.isNaN(Number(t)),wy=t=>$c(t,"number",Kl),Iu=t=>!!t&&Number.isInteger(Number(t)),aU=t=>t.endsWith("%")&&Kl(t.slice(0,-1)),nt=t=>kP.test(t),Bi=t=>nU.test(t),lU=new Set(["length","size","percentage"]),cU=t=>$c(t,lU,NP),uU=t=>$c(t,"position",NP),dU=new Set(["image","url"]),hU=t=>$c(t,dU,gU),fU=t=>$c(t,"",mU),Su=()=>!0,$c=(t,e,n)=>{const r=kP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},pU=t=>rU.test(t)&&!sU.test(t),NP=()=>!1,mU=t=>iU.test(t),gU=t=>oU.test(t),yU=()=>{const t=$t("colors"),e=$t("spacing"),n=$t("blur"),r=$t("brightness"),s=$t("borderColor"),i=$t("borderRadius"),o=$t("borderSpacing"),a=$t("borderWidth"),l=$t("contrast"),c=$t("grayscale"),d=$t("hueRotate"),h=$t("invert"),f=$t("gap"),p=$t("gradientColorStops"),w=$t("gradientColorStopPositions"),g=$t("inset"),v=$t("margin"),E=$t("opacity"),y=$t("padding"),_=$t("saturate"),R=$t("scale"),k=$t("sepia"),L=$t("skew"),x=$t("space"),A=$t("translate"),b=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",nt,e],O=()=>[nt,e],C=()=>["",ti,$i],$=()=>["auto",Kl,nt],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",nt],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>[Kl,nt];return{cacheSize:500,separator:":",theme:{colors:[Su],spacing:[ti,$i],blur:["none","",Bi,nt],brightness:oe(),borderColor:[t],borderRadius:["none","","full",Bi,nt],borderSpacing:O(),borderWidth:C(),contrast:oe(),grayscale:V(),hueRotate:oe(),invert:V(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[aU,$i],inset:D(),margin:D(),opacity:oe(),padding:O(),saturate:oe(),scale:oe(),sepia:V(),skew:oe(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[Bi]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),nt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Iu,nt]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Iu,nt]}],"grid-cols":[{"grid-cols":[Su]}],"col-start-end":[{col:["auto",{span:["full",Iu,nt]},nt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Su]}],"row-start-end":[{row:["auto",{span:[Iu,nt]},nt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,e]}],"min-w":[{"min-w":[nt,e,"min","max","fit"]}],"max-w":[{"max-w":[nt,e,"none","full","min","max","fit","prose",{screen:[Bi]},Bi]}],h:[{h:[nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Bi,$i]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wy]}],"font-family":[{font:[Su]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",Kl,wy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ti,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ti,$i]}],"underline-offset":[{"underline-offset":["auto",ti,nt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),uU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:se()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[ti,nt]}],"outline-w":[{outline:[ti,$i]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[ti,$i]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Bi,fU]}],"shadow-color":[{shadow:[Su]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ue(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ue()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Bi,nt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Iu,nt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ti,$i,wy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vU=ZF(yU);function Bn(...t){return vU(bP(t))}const wU=yF,OP=S.forwardRef(({className:t,...e},n)=>T.jsx(vP,{ref:n,className:Bn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));OP.displayName=vP.displayName;const _U=AP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),LP=S.forwardRef(({className:t,variant:e,...n},r)=>T.jsx(wP,{ref:r,className:Bn(_U({variant:e}),t),...n}));LP.displayName=wP.displayName;const EU=S.forwardRef(({className:t,...e},n)=>T.jsx(TP,{ref:n,className:Bn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));EU.displayName=TP.displayName;const VP=S.forwardRef(({className:t,...e},n)=>T.jsx(IP,{ref:n,className:Bn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:T.jsx(c0,{className:"h-4 w-4"})}));VP.displayName=IP.displayName;const MP=S.forwardRef(({className:t,...e},n)=>T.jsx(_P,{ref:n,className:Bn("text-sm font-semibold",t),...e}));MP.displayName=_P.displayName;const FP=S.forwardRef(({className:t,...e},n)=>T.jsx(EP,{ref:n,className:Bn("text-sm opacity-90",t),...e}));FP.displayName=EP.displayName;function TU(){const{toasts:t}=r0();return T.jsxs(wU,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return T.jsxs(LP,{...i,children:[T.jsxs("div",{className:"grid gap-1",children:[n&&T.jsx(MP,{children:n}),r&&T.jsx(FP,{children:r})]}),s,T.jsx(VP,{})]},e)}),T.jsx(OP,{})]})}var Dp=["light","dark"],d0="(prefers-color-scheme: dark)",IU=typeof window>"u",h0=S.createContext(void 0),SU={setTheme:t=>{},themes:[]},UP=()=>{var t;return(t=S.useContext(h0))!=null?t:SU},bU=t=>S.useContext(h0)?t.children:S.createElement(xU,{...t}),AU=["light","dark"],xU=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=AU,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=S.useState(()=>qI(s,o)),[p,w]=S.useState(()=>qI(s)),g=l?Object.values(l):i,v=S.useCallback(R=>{let k=R;if(!k)return;R==="system"&&n&&(k=HI());let L=l?l[k]:k,x=e?PU():null,A=document.documentElement;if(a==="class"?(A.classList.remove(...g),L&&A.classList.add(L)):L?A.setAttribute(a,L):A.removeAttribute(a),r){let b=Dp.includes(o)?o:null,P=Dp.includes(k)?k:b;A.style.colorScheme=P}x==null||x()},[]),E=S.useCallback(R=>{let k=typeof R=="function"?R(R):R;f(k);try{localStorage.setItem(s,k)}catch{}},[t]),y=S.useCallback(R=>{let k=HI(R);w(k),h==="system"&&n&&!t&&v("system")},[h,t]);S.useEffect(()=>{let R=window.matchMedia(d0);return R.addListener(y),y(R),()=>R.removeListener(y)},[y]),S.useEffect(()=>{let R=k=>{if(k.key!==s)return;let L=k.newValue||o;E(L)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[E]),S.useEffect(()=>{v(t??h)},[t,h]);let _=S.useMemo(()=>({theme:h,setTheme:E,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,E,t,p,n,i]);return S.createElement(h0.Provider,{value:_},S.createElement(RU,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:g,nonce:d}),c)},RU=S.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Dp.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,g=!1,v=!0)=>{let E=o?o[w]:w,y=g?w+"|| ''":`'${E}'`,_="";return s&&v&&!g&&Dp.includes(w)&&(_+=`d.style.colorScheme = '${w}';`),n==="class"?g||E?_+=`c.add(${y})`:_+="null":E&&(_+=`d[s](n,${y})`),_},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${d0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),qI=(t,e)=>{if(IU)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},PU=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},HI=t=>(t||(t=window.matchMedia(d0)),t.matches?"dark":"light"),CU=t=>{switch(t){case"success":return NU;case"info":return LU;case"warning":return OU;case"error":return VU;default:return null}},DU=Array(12).fill(0),kU=({visible:t,className:e})=>j.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},j.createElement("div",{className:"sonner-spinner"},DU.map((n,r)=>j.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),NU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),LU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),VU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),MU=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},j.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),j.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),FU=()=>{let[t,e]=j.useState(document.hidden);return j.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},sw=1,UU=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:sw++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],j.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if($U(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||sw++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},gr=new UU,jU=(t,e)=>{let n=(e==null?void 0:e.id)||sw++;return gr.addToast({title:t,...e,id:n}),n},$U=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",BU=jU,zU=()=>gr.toasts,WU=()=>gr.getActiveToasts(),Yn=Object.assign(BU,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:zU,getToasts:WU});function qU(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}qU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function rf(t){return t.label!==void 0}var HU=3,KU="32px",GU="16px",KI=4e3,QU=356,YU=14,JU=20,XU=200;function is(...t){return t.filter(Boolean).join(" ")}function ZU(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var e4=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:w,interacting:g,setHeights:v,visibleToasts:E,heights:y,index:_,toasts:R,expanded:k,removeToast:L,defaultRichColors:x,closeButton:A,style:b,cancelButtonStyle:P,actionButtonStyle:D,className:O="",descriptionClassName:C="",duration:$,position:re,gap:se,loadingIcon:ue,expandByDefault:U,classNames:V,icons:ee,closeButtonAriaLabel:oe="Close toast",pauseWhenPageIsHidden:G}=t,[Ne,Ie]=j.useState(null),[Oe,Ze]=j.useState(null),[be,Qt]=j.useState(!1),[rt,Be]=j.useState(!1),[qe,Ft]=j.useState(!1),[nn,Vn]=j.useState(!1),[qr,In]=j.useState(!1),[Wn,Ue]=j.useState(0),[_t,ut]=j.useState(0),Ar=j.useRef(p.duration||$||KI),Qo=j.useRef(null),ir=j.useRef(null),iu=_===0,As=_+1<=E,Pn=p.type,Y=p.dismissible!==!1,K=p.className||"",Z=p.descriptionClassName||"",W=j.useMemo(()=>y.findIndex(Te=>Te.toastId===p.id)||0,[y,p.id]),X=j.useMemo(()=>{var Te;return(Te=p.closeButton)!=null?Te:A},[p.closeButton,A]),ie=j.useMemo(()=>p.duration||$||KI,[p.duration,$]),fe=j.useRef(0),ye=j.useRef(0),he=j.useRef(0),Ae=j.useRef(null),[xe,Qe]=re.split("-"),pe=j.useMemo(()=>y.reduce((Te,We,De)=>De>=W?Te:Te+We.height,0),[y,W]),de=FU(),ze=p.invert||f,me=Pn==="loading";ye.current=j.useMemo(()=>W*se+pe,[W,pe]),j.useEffect(()=>{Ar.current=ie},[ie]),j.useEffect(()=>{Qt(!0)},[]),j.useEffect(()=>{let Te=ir.current;if(Te){let We=Te.getBoundingClientRect().height;return ut(We),v(De=>[{toastId:p.id,height:We,position:p.position},...De]),()=>v(De=>De.filter(tt=>tt.toastId!==p.id))}},[v,p.id]),j.useLayoutEffect(()=>{if(!be)return;let Te=ir.current,We=Te.style.height;Te.style.height="auto";let De=Te.getBoundingClientRect().height;Te.style.height=We,ut(De),v(tt=>tt.find(gt=>gt.toastId===p.id)?tt.map(gt=>gt.toastId===p.id?{...gt,height:De}:gt):[{toastId:p.id,height:De,position:p.position},...tt])},[be,p.title,p.description,v,p.id]);let et=j.useCallback(()=>{Be(!0),Ue(ye.current),v(Te=>Te.filter(We=>We.toastId!==p.id)),setTimeout(()=>{L(p)},XU)},[p,L,v,ye]);j.useEffect(()=>{if(p.promise&&Pn==="loading"||p.duration===1/0||p.type==="loading")return;let Te;return k||g||G&&de?(()=>{if(he.current<fe.current){let We=new Date().getTime()-fe.current;Ar.current=Ar.current-We}he.current=new Date().getTime()})():Ar.current!==1/0&&(fe.current=new Date().getTime(),Te=setTimeout(()=>{var We;(We=p.onAutoClose)==null||We.call(p,p),et()},Ar.current)),()=>clearTimeout(Te)},[k,g,p,Pn,G,de,et]),j.useEffect(()=>{p.delete&&et()},[et,p.delete]);function St(){var Te,We,De;return ee!=null&&ee.loading?j.createElement("div",{className:is(V==null?void 0:V.loader,(Te=p==null?void 0:p.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":Pn==="loading"},ee.loading):ue?j.createElement("div",{className:is(V==null?void 0:V.loader,(We=p==null?void 0:p.classNames)==null?void 0:We.loader,"sonner-loader"),"data-visible":Pn==="loading"},ue):j.createElement(kU,{className:is(V==null?void 0:V.loader,(De=p==null?void 0:p.classNames)==null?void 0:De.loader),visible:Pn==="loading"})}return j.createElement("li",{tabIndex:0,ref:ir,className:is(O,K,V==null?void 0:V.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[Pn],(n=p==null?void 0:p.classNames)==null?void 0:n[Pn]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:x,"data-styled":!(p.jsx||p.unstyled||w),"data-mounted":be,"data-promise":!!p.promise,"data-swiped":qr,"data-removed":rt,"data-visible":As,"data-y-position":xe,"data-x-position":Qe,"data-index":_,"data-front":iu,"data-swiping":qe,"data-dismissible":Y,"data-type":Pn,"data-invert":ze,"data-swipe-out":nn,"data-swipe-direction":Oe,"data-expanded":!!(k||U&&be),style:{"--index":_,"--toasts-before":_,"--z-index":R.length-_,"--offset":`${rt?Wn:ye.current}px`,"--initial-height":U?"auto":`${_t}px`,...b,...p.style},onDragEnd:()=>{Ft(!1),Ie(null),Ae.current=null},onPointerDown:Te=>{me||!Y||(Qo.current=new Date,Ue(ye.current),Te.target.setPointerCapture(Te.pointerId),Te.target.tagName!=="BUTTON"&&(Ft(!0),Ae.current={x:Te.clientX,y:Te.clientY}))},onPointerUp:()=>{var Te,We,De,tt;if(nn||!Y)return;Ae.current=null;let gt=Number(((Te=ir.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ae=Number(((We=ir.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ye=new Date().getTime()-((De=Qo.current)==null?void 0:De.getTime()),Ve=Ne==="x"?gt:ae,Me=Math.abs(Ve)/Ye;if(Math.abs(Ve)>=JU||Me>.11){Ue(ye.current),(tt=p.onDismiss)==null||tt.call(p,p),Ze(Ne==="x"?gt>0?"right":"left":ae>0?"down":"up"),et(),Vn(!0),In(!1);return}Ft(!1),Ie(null)},onPointerMove:Te=>{var We,De,tt,gt;if(!Ae.current||!Y||((We=window.getSelection())==null?void 0:We.toString().length)>0)return;let ae=Te.clientY-Ae.current.y,Ye=Te.clientX-Ae.current.x,Ve=(De=t.swipeDirections)!=null?De:ZU(re);!Ne&&(Math.abs(Ye)>1||Math.abs(ae)>1)&&Ie(Math.abs(Ye)>Math.abs(ae)?"x":"y");let Me={x:0,y:0};Ne==="y"?(Ve.includes("top")||Ve.includes("bottom"))&&(Ve.includes("top")&&ae<0||Ve.includes("bottom")&&ae>0)&&(Me.y=ae):Ne==="x"&&(Ve.includes("left")||Ve.includes("right"))&&(Ve.includes("left")&&Ye<0||Ve.includes("right")&&Ye>0)&&(Me.x=Ye),(Math.abs(Me.x)>0||Math.abs(Me.y)>0)&&In(!0),(tt=ir.current)==null||tt.style.setProperty("--swipe-amount-x",`${Me.x}px`),(gt=ir.current)==null||gt.style.setProperty("--swipe-amount-y",`${Me.y}px`)}},X&&!p.jsx?j.createElement("button",{"aria-label":oe,"data-disabled":me,"data-close-button":!0,onClick:me||!Y?()=>{}:()=>{var Te;et(),(Te=p.onDismiss)==null||Te.call(p,p)},className:is(V==null?void 0:V.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=ee==null?void 0:ee.close)!=null?i:MU):null,p.jsx||S.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:j.createElement(j.Fragment,null,Pn||p.icon||p.promise?j.createElement("div",{"data-icon":"",className:is(V==null?void 0:V.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||St():null,p.type!=="loading"?p.icon||(ee==null?void 0:ee[Pn])||CU(Pn):null):null,j.createElement("div",{"data-content":"",className:is(V==null?void 0:V.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},j.createElement("div",{"data-title":"",className:is(V==null?void 0:V.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?j.createElement("div",{"data-description":"",className:is(C,Z,V==null?void 0:V.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),S.isValidElement(p.cancel)?p.cancel:p.cancel&&rf(p.cancel)?j.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||P,onClick:Te=>{var We,De;rf(p.cancel)&&Y&&((De=(We=p.cancel).onClick)==null||De.call(We,Te),et())},className:is(V==null?void 0:V.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,S.isValidElement(p.action)?p.action:p.action&&rf(p.action)?j.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||D,onClick:Te=>{var We,De;rf(p.action)&&((De=(We=p.action).onClick)==null||De.call(We,Te),!Te.defaultPrevented&&et())},className:is(V==null?void 0:V.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function GI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function t4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?GU:KU;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var n4=S.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:w=HU,toastOptions:g,dir:v=GI(),gap:E=YU,loadingIcon:y,icons:_,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:k}=t,[L,x]=j.useState([]),A=j.useMemo(()=>Array.from(new Set([r].concat(L.filter(G=>G.position).map(G=>G.position)))),[L,r]),[b,P]=j.useState([]),[D,O]=j.useState(!1),[C,$]=j.useState(!1),[re,se]=j.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ue=j.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=j.useRef(null),ee=j.useRef(!1),oe=j.useCallback(G=>{x(Ne=>{var Ie;return(Ie=Ne.find(Oe=>Oe.id===G.id))!=null&&Ie.delete||gr.dismiss(G.id),Ne.filter(({id:Oe})=>Oe!==G.id)})},[]);return j.useEffect(()=>gr.subscribe(G=>{if(G.dismiss){x(Ne=>Ne.map(Ie=>Ie.id===G.id?{...Ie,delete:!0}:Ie));return}setTimeout(()=>{J1.flushSync(()=>{x(Ne=>{let Ie=Ne.findIndex(Oe=>Oe.id===G.id);return Ie!==-1?[...Ne.slice(0,Ie),{...Ne[Ie],...G},...Ne.slice(Ie+1)]:[G,...Ne]})})})}),[]),j.useEffect(()=>{if(d!=="system"){se(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;let G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:Ne})=>{se(Ne?"dark":"light")})}catch{G.addListener(({matches:Ie})=>{try{se(Ie?"dark":"light")}catch(Oe){console.error(Oe)}})}},[d]),j.useEffect(()=>{L.length<=1&&O(!1)},[L]),j.useEffect(()=>{let G=Ne=>{var Ie,Oe;s.every(Ze=>Ne[Ze]||Ne.code===Ze)&&(O(!0),(Ie=ue.current)==null||Ie.focus()),Ne.code==="Escape"&&(document.activeElement===ue.current||(Oe=ue.current)!=null&&Oe.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[s]),j.useEffect(()=>{if(ue.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,ee.current=!1)}},[ue.current]),j.createElement("section",{ref:e,"aria-label":`${R} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((G,Ne)=>{var Ie;let[Oe,Ze]=G.split("-");return L.length?j.createElement("ol",{key:G,dir:v==="auto"?GI():v,tabIndex:-1,ref:ue,className:a,"data-sonner-toaster":!0,"data-theme":re,"data-y-position":Oe,"data-lifted":D&&L.length>1&&!i,"data-x-position":Ze,style:{"--front-toast-height":`${((Ie=b[0])==null?void 0:Ie.height)||0}px`,"--width":`${QU}px`,"--gap":`${E}px`,...p,...t4(l,c)},onBlur:be=>{ee.current&&!be.currentTarget.contains(be.relatedTarget)&&(ee.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,V.current=be.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{C||O(!1)},onDragEnd:()=>O(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},L.filter(be=>!be.position&&Ne===0||be.position===G).map((be,Qt)=>{var rt,Be;return j.createElement(e4,{key:be.id,icons:_,index:Qt,toast:be,defaultRichColors:h,duration:(rt=g==null?void 0:g.duration)!=null?rt:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:w,closeButton:(Be=g==null?void 0:g.closeButton)!=null?Be:o,interacting:C,position:G,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:oe,toasts:L.filter(qe=>qe.position==be.position),heights:b.filter(qe=>qe.position==be.position),setHeights:P,expandByDefault:i,gap:E,loadingIcon:y,expanded:D,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const r4=({...t})=>{const{theme:e="system"}=UP();return T.jsx(n4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var s4=h_[" useId ".trim().toString()]||(()=>{}),i4=0;function _y(t){const[e,n]=S.useState(s4());return Ei(()=>{n(r=>r??String(i4++))},[t]),t||(e?`radix-${e}`:"")}const o4=["top","right","bottom","left"],Do=Math.min,Cr=Math.max,kp=Math.round,sf=Math.floor,qs=t=>({x:t,y:t}),a4={left:"right",right:"left",bottom:"top",top:"bottom"},l4={start:"end",end:"start"};function iw(t,e,n){return Cr(t,Do(e,n))}function Ti(t,e){return typeof t=="function"?t(e):t}function Ii(t){return t.split("-")[0]}function Bc(t){return t.split("-")[1]}function f0(t){return t==="x"?"y":"x"}function p0(t){return t==="y"?"height":"width"}const c4=new Set(["top","bottom"]);function Us(t){return c4.has(Ii(t))?"y":"x"}function m0(t){return f0(Us(t))}function u4(t,e,n){n===void 0&&(n=!1);const r=Bc(t),s=m0(t),i=p0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Np(o)),[o,Np(o)]}function d4(t){const e=Np(t);return[ow(t),e,ow(e)]}function ow(t){return t.replace(/start|end/g,e=>l4[e])}const QI=["left","right"],YI=["right","left"],h4=["top","bottom"],f4=["bottom","top"];function p4(t,e,n){switch(t){case"top":case"bottom":return n?e?YI:QI:e?QI:YI;case"left":case"right":return e?h4:f4;default:return[]}}function m4(t,e,n,r){const s=Bc(t);let i=p4(Ii(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(ow)))),i}function Np(t){return t.replace(/left|right|bottom|top/g,e=>a4[e])}function g4(t){return{top:0,right:0,bottom:0,left:0,...t}}function jP(t){return typeof t!="number"?g4(t):{top:t,right:t,bottom:t,left:t}}function Op(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function JI(t,e,n){let{reference:r,floating:s}=t;const i=Us(e),o=m0(e),a=p0(o),l=Ii(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Bc(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const y4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=JI(c,r,l),f=r,p={},w=0;for(let g=0;g<a.length;g++){const{name:v,fn:E}=a[g],{x:y,y:_,data:R,reset:k}=await E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=y??d,h=_??h,p={...p,[v]:{...p[v],...R}},k&&w<=50&&(w++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:d,y:h}=JI(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Dd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Ti(e,t),w=jP(p),v=a[f?h==="floating"?"reference":"floating":h],E=Op(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),R=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},k=Op(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:_,strategy:l}):y);return{top:(E.top-k.top+w.top)/R.y,bottom:(k.bottom-E.bottom+w.bottom)/R.y,left:(E.left-k.left+w.left)/R.x,right:(k.right-E.right+w.right)/R.x}}const v4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ti(t,e)||{};if(c==null)return{};const h=jP(d),f={x:n,y:r},p=m0(s),w=p0(p),g=await o.getDimensions(c),v=p==="y",E=v?"top":"left",y=v?"bottom":"right",_=v?"clientHeight":"clientWidth",R=i.reference[w]+i.reference[p]-f[p]-i.floating[w],k=f[p]-i.reference[p],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=L?L[_]:0;(!x||!await(o.isElement==null?void 0:o.isElement(L)))&&(x=a.floating[_]||i.floating[w]);const A=R/2-k/2,b=x/2-g[w]/2-1,P=Do(h[E],b),D=Do(h[y],b),O=P,C=x-g[w]-D,$=x/2-g[w]/2+A,re=iw(O,$,C),se=!l.arrow&&Bc(s)!=null&&$!==re&&i.reference[w]/2-($<O?P:D)-g[w]/2<0,ue=se?$<O?$-O:$-C:0;return{[p]:f[p]+ue,data:{[p]:re,centerOffset:$-re-ue,...se&&{alignmentOffset:ue}},reset:se}}}),w4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...v}=Ti(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=Ii(s),y=Us(a),_=Ii(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(_||!g?[Np(a)]:d4(a)),L=w!=="none";!f&&L&&k.push(...m4(a,g,w,R));const x=[a,...k],A=await Dd(e,v),b=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&b.push(A[E]),h){const $=u4(s,o,R);b.push(A[$[0]],A[$[1]])}if(P=[...P,{placement:s,overflows:b}],!b.every($=>$<=0)){var D,O;const $=(((D=i.flip)==null?void 0:D.index)||0)+1,re=x[$];if(re&&(!(h==="alignment"?y!==Us(re):!1)||P.every(U=>Us(U.placement)===y?U.overflows[0]>0:!0)))return{data:{index:$,overflows:P},reset:{placement:re}};let se=(O=P.filter(ue=>ue.overflows[0]<=0).sort((ue,U)=>ue.overflows[1]-U.overflows[1])[0])==null?void 0:O.placement;if(!se)switch(p){case"bestFit":{var C;const ue=(C=P.filter(U=>{if(L){const V=Us(U.placement);return V===y||V==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(V=>V>0).reduce((V,ee)=>V+ee,0)]).sort((U,V)=>U[1]-V[1])[0])==null?void 0:C[0];ue&&(se=ue);break}case"initialPlacement":se=a;break}if(s!==se)return{reset:{placement:se}}}return{}}}};function XI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ZI(t){return o4.some(e=>t[e]>=0)}const _4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ti(t,e);switch(r){case"referenceHidden":{const i=await Dd(e,{...s,elementContext:"reference"}),o=XI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ZI(o)}}}case"escaped":{const i=await Dd(e,{...s,altBoundary:!0}),o=XI(i,n.floating);return{data:{escapedOffsets:o,escaped:ZI(o)}}}default:return{}}}}},$P=new Set(["left","top"]);async function E4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ii(n),a=Bc(n),l=Us(n)==="y",c=$P.has(o)?-1:1,d=i&&l?-1:1,h=Ti(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(p=a==="end"?w*-1:w),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const T4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await E4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},I4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:E,y}=v;return{x:E,y}}},...l}=Ti(t,e),c={x:n,y:r},d=await Dd(e,l),h=Us(Ii(s)),f=f0(h);let p=c[f],w=c[h];if(i){const v=f==="y"?"top":"left",E=f==="y"?"bottom":"right",y=p+d[v],_=p-d[E];p=iw(y,p,_)}if(o){const v=h==="y"?"top":"left",E=h==="y"?"bottom":"right",y=w+d[v],_=w-d[E];w=iw(y,w,_)}const g=a.fn({...e,[f]:p,[h]:w});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},S4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ti(t,e),d={x:n,y:r},h=Us(s),f=f0(h);let p=d[f],w=d[h];const g=Ti(a,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=f==="y"?"height":"width",R=i.reference[f]-i.floating[_]+v.mainAxis,k=i.reference[f]+i.reference[_]-v.mainAxis;p<R?p=R:p>k&&(p=k)}if(c){var E,y;const _=f==="y"?"width":"height",R=$P.has(Ii(s)),k=i.reference[h]-i.floating[_]+(R&&((E=o.offset)==null?void 0:E[h])||0)+(R?0:v.crossAxis),L=i.reference[h]+i.reference[_]+(R?0:((y=o.offset)==null?void 0:y[h])||0)-(R?v.crossAxis:0);w<k?w=k:w>L&&(w=L)}return{[f]:p,[h]:w}}}},b4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ti(t,e),d=await Dd(e,c),h=Ii(s),f=Bc(s),p=Us(s)==="y",{width:w,height:g}=i.floating;let v,E;h==="top"||h==="bottom"?(v=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,v=f==="end"?"top":"bottom");const y=g-d.top-d.bottom,_=w-d.left-d.right,R=Do(g-d[v],y),k=Do(w-d[E],_),L=!e.middlewareData.shift;let x=R,A=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=y),L&&!f){const P=Cr(d.left,0),D=Cr(d.right,0),O=Cr(d.top,0),C=Cr(d.bottom,0);p?A=w-2*(P!==0||D!==0?P+D:Cr(d.left,d.right)):x=g-2*(O!==0||C!==0?O+C:Cr(d.top,d.bottom))}await l({...e,availableWidth:A,availableHeight:x});const b=await o.getDimensions(a.floating);return w!==b.width||g!==b.height?{reset:{rects:!0}}:{}}}};function Bm(){return typeof window<"u"}function zc(t){return BP(t)?(t.nodeName||"").toLowerCase():"#document"}function Fr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xs(t){var e;return(e=(BP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BP(t){return Bm()?t instanceof Node||t instanceof Fr(t).Node:!1}function ws(t){return Bm()?t instanceof Element||t instanceof Fr(t).Element:!1}function Qs(t){return Bm()?t instanceof HTMLElement||t instanceof Fr(t).HTMLElement:!1}function eS(t){return!Bm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fr(t).ShadowRoot}const A4=new Set(["inline","contents"]);function dh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=_s(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!A4.has(s)}const x4=new Set(["table","td","th"]);function R4(t){return x4.has(zc(t))}const P4=[":popover-open",":modal"];function zm(t){return P4.some(e=>{try{return t.matches(e)}catch{return!1}})}const C4=["transform","translate","scale","rotate","perspective"],D4=["transform","translate","scale","rotate","perspective","filter"],k4=["paint","layout","strict","content"];function g0(t){const e=y0(),n=ws(t)?_s(t):t;return C4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||D4.some(r=>(n.willChange||"").includes(r))||k4.some(r=>(n.contain||"").includes(r))}function N4(t){let e=ko(t);for(;Qs(e)&&!pc(e);){if(g0(e))return e;if(zm(e))return null;e=ko(e)}return null}function y0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O4=new Set(["html","body","#document"]);function pc(t){return O4.has(zc(t))}function _s(t){return Fr(t).getComputedStyle(t)}function Wm(t){return ws(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ko(t){if(zc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||eS(t)&&t.host||Xs(t);return eS(e)?e.host:e}function zP(t){const e=ko(t);return pc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Qs(e)&&dh(e)?e:zP(e)}function kd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=zP(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Fr(s);if(i){const a=aw(o);return e.concat(o,o.visualViewport||[],dh(s)?s:[],a&&n?kd(a):[])}return e.concat(s,kd(s,[],n))}function aw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function WP(t){const e=_s(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Qs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=kp(n)!==i||kp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function v0(t){return ws(t)?t:t.contextElement}function Gl(t){const e=v0(t);if(!Qs(e))return qs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=WP(e);let o=(i?kp(n.width):n.width)/r,a=(i?kp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const L4=qs(0);function qP(t){const e=Fr(t);return!y0()||!e.visualViewport?L4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function V4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Fr(t)?!1:e}function za(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=v0(t);let o=qs(1);e&&(r?ws(r)&&(o=Gl(r)):o=Gl(t));const a=V4(i,n,r)?qP(i):qs(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Fr(i),p=r&&ws(r)?Fr(r):r;let w=f,g=aw(w);for(;g&&r&&p!==w;){const v=Gl(g),E=g.getBoundingClientRect(),y=_s(g),_=E.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,R=E.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=_,c+=R,w=Fr(g),g=aw(w)}}return Op({width:d,height:h,x:l,y:c})}function qm(t,e){const n=Wm(t).scrollLeft;return e?e.left+n:za(Xs(t)).left+n}function HP(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-qm(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function M4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Xs(r),a=e?zm(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=qs(1);const d=qs(0),h=Qs(r);if((h||!h&&!i)&&((zc(r)!=="body"||dh(o))&&(l=Wm(r)),Qs(r))){const p=za(r);c=Gl(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?HP(o,l):qs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function F4(t){return Array.from(t.getClientRects())}function U4(t){const e=Xs(t),n=Wm(t),r=t.ownerDocument.body,s=Cr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Cr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+qm(t);const a=-n.scrollTop;return _s(r).direction==="rtl"&&(o+=Cr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const tS=25;function j4(t,e){const n=Fr(t),r=Xs(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=y0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=qm(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,w=Math.abs(r.clientWidth-h.clientWidth-p);w<=tS&&(i-=w)}else c<=tS&&(i+=c);return{width:i,height:o,x:a,y:l}}const $4=new Set(["absolute","fixed"]);function B4(t,e){const n=za(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Qs(t)?Gl(t):qs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function nS(t,e,n){let r;if(e==="viewport")r=j4(t,n);else if(e==="document")r=U4(Xs(t));else if(ws(e))r=B4(e,n);else{const s=qP(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Op(r)}function KP(t,e){const n=ko(t);return n===e||!ws(n)||pc(n)?!1:_s(n).position==="fixed"||KP(n,e)}function z4(t,e){const n=e.get(t);if(n)return n;let r=kd(t,[],!1).filter(a=>ws(a)&&zc(a)!=="body"),s=null;const i=_s(t).position==="fixed";let o=i?ko(t):t;for(;ws(o)&&!pc(o);){const a=_s(o),l=g0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&$4.has(s.position)||dh(o)&&!l&&KP(t,o))?r=r.filter(d=>d!==o):s=a,o=ko(o)}return e.set(t,r),r}function W4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?zm(e)?[]:z4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=nS(e,d,s);return c.top=Cr(h.top,c.top),c.right=Do(h.right,c.right),c.bottom=Do(h.bottom,c.bottom),c.left=Cr(h.left,c.left),c},nS(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function q4(t){const{width:e,height:n}=WP(t);return{width:e,height:n}}function H4(t,e,n){const r=Qs(e),s=Xs(e),i=n==="fixed",o=za(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=qs(0);function c(){l.x=qm(s)}if(r||!r&&!i)if((zc(e)!=="body"||dh(s))&&(a=Wm(e)),r){const p=za(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?HP(s,a):qs(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Ey(t){return _s(t).position==="static"}function rS(t,e){if(!Qs(t)||_s(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Xs(t)===n&&(n=n.ownerDocument.body),n}function GP(t,e){const n=Fr(t);if(zm(t))return n;if(!Qs(t)){let s=ko(t);for(;s&&!pc(s);){if(ws(s)&&!Ey(s))return s;s=ko(s)}return n}let r=rS(t,e);for(;r&&R4(r)&&Ey(r);)r=rS(r,e);return r&&pc(r)&&Ey(r)&&!g0(r)?n:r||N4(t)||n}const K4=async function(t){const e=this.getOffsetParent||GP,n=this.getDimensions,r=await n(t.floating);return{reference:H4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function G4(t){return _s(t).direction==="rtl"}const Q4={convertOffsetParentRelativeRectToViewportRelativeRect:M4,getDocumentElement:Xs,getClippingRect:W4,getOffsetParent:GP,getElementRects:K4,getClientRects:F4,getDimensions:q4,getScale:Gl,isElement:ws,isRTL:G4};function QP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Y4(t,e){let n=null,r;const s=Xs(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const w=sf(h),g=sf(s.clientWidth-(d+f)),v=sf(s.clientHeight-(h+p)),E=sf(d),_={rootMargin:-w+"px "+-g+"px "+-v+"px "+-E+"px",threshold:Cr(0,Do(1,l))||1};let R=!0;function k(L){const x=L[0].intersectionRatio;if(x!==l){if(!R)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!QP(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(k,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,_)}n.observe(t)}return o(!0),i}function J4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=v0(t),d=s||i?[...c?kd(c):[],...kd(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?Y4(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(E=>{let[y]=E;y&&y.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let w,g=l?za(t):null;l&&v();function v(){const E=za(t);g&&!QP(g,E)&&n(),g=E,w=requestAnimationFrame(v)}return n(),()=>{var E;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(E=p)==null||E.disconnect(),p=null,l&&cancelAnimationFrame(w)}}const X4=T4,Z4=I4,ej=w4,tj=b4,nj=_4,sS=v4,rj=S4,sj=(t,e,n)=>{const r=new Map,s={platform:Q4,...n},i={...s.platform,_c:r};return y4(t,e,{...s,platform:i})};var ij=typeof document<"u",oj=function(){},jf=ij?S.useLayoutEffect:oj;function Lp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Lp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Lp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function YP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function iS(t,e){const n=YP(t);return Math.round(e*n)/n}function Ty(t){const e=S.useRef(t);return jf(()=>{e.current=t}),e}function aj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=S.useState(r);Lp(f,r)||p(r);const[w,g]=S.useState(null),[v,E]=S.useState(null),y=S.useCallback(U=>{U!==L.current&&(L.current=U,g(U))},[]),_=S.useCallback(U=>{U!==x.current&&(x.current=U,E(U))},[]),R=i||w,k=o||v,L=S.useRef(null),x=S.useRef(null),A=S.useRef(d),b=l!=null,P=Ty(l),D=Ty(s),O=Ty(c),C=S.useCallback(()=>{if(!L.current||!x.current)return;const U={placement:e,strategy:n,middleware:f};D.current&&(U.platform=D.current),sj(L.current,x.current,U).then(V=>{const ee={...V,isPositioned:O.current!==!1};$.current&&!Lp(A.current,ee)&&(A.current=ee,ch.flushSync(()=>{h(ee)}))})},[f,e,n,D,O]);jf(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[c]);const $=S.useRef(!1);jf(()=>($.current=!0,()=>{$.current=!1}),[]),jf(()=>{if(R&&(L.current=R),k&&(x.current=k),R&&k){if(P.current)return P.current(R,k,C);C()}},[R,k,C,P,b]);const re=S.useMemo(()=>({reference:L,floating:x,setReference:y,setFloating:_}),[y,_]),se=S.useMemo(()=>({reference:R,floating:k}),[R,k]),ue=S.useMemo(()=>{const U={position:n,left:0,top:0};if(!se.floating)return U;const V=iS(se.floating,d.x),ee=iS(se.floating,d.y);return a?{...U,transform:"translate("+V+"px, "+ee+"px)",...YP(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:ee}},[n,a,se.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:C,refs:re,elements:se,floatingStyles:ue}),[d,C,re,se,ue])}const lj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?sS({element:r.current,padding:s}).fn(n):{}:r?sS({element:r,padding:s}).fn(n):{}}}},cj=(t,e)=>({...X4(t),options:[t,e]}),uj=(t,e)=>({...Z4(t),options:[t,e]}),dj=(t,e)=>({...rj(t),options:[t,e]}),hj=(t,e)=>({...ej(t),options:[t,e]}),fj=(t,e)=>({...tj(t),options:[t,e]}),pj=(t,e)=>({...nj(t),options:[t,e]}),mj=(t,e)=>({...lj(t),options:[t,e]});var gj="Arrow",JP=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return T.jsx(en.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:T.jsx("polygon",{points:"0,0 30,0 15,10"})})});JP.displayName=gj;var yj=JP;function XP(t){const[e,n]=S.useState(void 0);return Ei(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var w0="Popper",[ZP,eC]=jc(w0),[vj,tC]=ZP(w0),nC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return T.jsx(vj,{scope:e,anchor:r,onAnchorChange:s,children:n})};nC.displayName=w0;var rC="PopperAnchor",sC=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=tC(rC,n),o=S.useRef(null),a=$n(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:T.jsx(en.div,{...s,ref:a})});sC.displayName=rC;var _0="PopperContent",[wj,_j]=ZP(_0),iC=S.forwardRef((t,e)=>{var be,Qt,rt,Be,qe,Ft;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:w,...g}=t,v=tC(_0,n),[E,y]=S.useState(null),_=$n(e,nn=>y(nn)),[R,k]=S.useState(null),L=XP(R),x=(L==null?void 0:L.width)??0,A=(L==null?void 0:L.height)??0,b=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(c)?c:[c],O=D.length>0,C={padding:P,boundary:D.filter(Tj),altBoundary:O},{refs:$,floatingStyles:re,placement:se,isPositioned:ue,middlewareData:U}=aj({strategy:"fixed",placement:b,whileElementsMounted:(...nn)=>J4(...nn,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[cj({mainAxis:s+A,alignmentAxis:o}),l&&uj({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?dj():void 0,...C}),l&&hj({...C}),fj({...C,apply:({elements:nn,rects:Vn,availableWidth:qr,availableHeight:In})=>{const{width:Wn,height:Ue}=Vn.reference,_t=nn.floating.style;_t.setProperty("--radix-popper-available-width",`${qr}px`),_t.setProperty("--radix-popper-available-height",`${In}px`),_t.setProperty("--radix-popper-anchor-width",`${Wn}px`),_t.setProperty("--radix-popper-anchor-height",`${Ue}px`)}}),R&&mj({element:R,padding:a}),Ij({arrowWidth:x,arrowHeight:A}),f&&pj({strategy:"referenceHidden",...C})]}),[V,ee]=lC(se),oe=Gs(w);Ei(()=>{ue&&(oe==null||oe())},[ue,oe]);const G=(be=U.arrow)==null?void 0:be.x,Ne=(Qt=U.arrow)==null?void 0:Qt.y,Ie=((rt=U.arrow)==null?void 0:rt.centerOffset)!==0,[Oe,Ze]=S.useState();return Ei(()=>{E&&Ze(window.getComputedStyle(E).zIndex)},[E]),T.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:ue?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(Be=U.transformOrigin)==null?void 0:Be.x,(qe=U.transformOrigin)==null?void 0:qe.y].join(" "),...((Ft=U.hide)==null?void 0:Ft.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:T.jsx(wj,{scope:n,placedSide:V,onArrowChange:k,arrowX:G,arrowY:Ne,shouldHideArrow:Ie,children:T.jsx(en.div,{"data-side":V,"data-align":ee,...g,ref:_,style:{...g.style,animation:ue?void 0:"none"}})})})});iC.displayName=_0;var oC="PopperArrow",Ej={top:"bottom",right:"left",bottom:"top",left:"right"},aC=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=_j(oC,r),o=Ej[i.placedSide];return T.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:T.jsx(yj,{...s,ref:n,style:{...s.style,display:"block"}})})});aC.displayName=oC;function Tj(t){return t!==null}var Ij=t=>({name:"transformOrigin",options:t,fn(e){var v,E,y;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=lC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let w="",g="";return c==="bottom"?(w=o?h:`${f}px`,g=`${-l}px`):c==="top"?(w=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(w=`${-l}px`,g=o?h:`${p}px`):c==="left"&&(w=`${r.floating.width+l}px`,g=o?h:`${p}px`),{data:{x:w,y:g}}}});function lC(t){const[e,n="center"]=t.split("-");return[e,n]}var BK=nC,Sj=sC,bj=iC,Aj=aC,[Hm]=jc("Tooltip",[eC]),E0=eC(),cC="TooltipProvider",xj=700,oS="tooltip.open",[Rj,uC]=Hm(cC),dC=t=>{const{__scopeTooltip:e,delayDuration:n=xj,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),T.jsx(Rj,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};dC.displayName=cC;var hC="Tooltip",[zK,Km]=Hm(hC),lw="TooltipTrigger",Pj=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Km(lw,n),i=uC(lw,n),o=E0(n),a=S.useRef(null),l=$n(e,a,s.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),T.jsx(Sj,{asChild:!0,...o,children:T.jsx(en.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Lt(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Lt(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Lt(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Lt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Lt(t.onBlur,s.onClose),onClick:Lt(t.onClick,s.onClose)})})});Pj.displayName=lw;var Cj="TooltipPortal",[WK,Dj]=Hm(Cj,{forceMount:void 0}),mc="TooltipContent",fC=S.forwardRef((t,e)=>{const n=Dj(mc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Km(mc,t.__scopeTooltip);return T.jsx(nl,{present:r||o.open,children:o.disableHoverableContent?T.jsx(pC,{side:s,...i,ref:e}):T.jsx(kj,{side:s,...i,ref:e})})}),kj=S.forwardRef((t,e)=>{const n=Km(mc,t.__scopeTooltip),r=uC(mc,t.__scopeTooltip),s=S.useRef(null),i=$n(e,s),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=S.useCallback(()=>{a(null),h(!1)},[h]),p=S.useCallback((w,g)=>{const v=w.currentTarget,E={x:w.clientX,y:w.clientY},y=Mj(E,v.getBoundingClientRect()),_=Fj(E,y),R=Uj(g.getBoundingClientRect()),k=$j([..._,...R]);a(k),h(!0)},[h]);return S.useEffect(()=>()=>f(),[f]),S.useEffect(()=>{if(l&&d){const w=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",w),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),S.useEffect(()=>{if(o){const w=g=>{const v=g.target,E={x:g.clientX,y:g.clientY},y=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),_=!jj(E,o);y?f():_&&(f(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[l,d,o,c,f]),T.jsx(pC,{...t,ref:i})}),[Nj,Oj]=Hm(hC,{isInside:!1}),Lj=PM("TooltipContent"),pC=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Km(mc,n),c=E0(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(oS,d),()=>document.removeEventListener(oS,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),T.jsx(Um,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:T.jsxs(bj,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[T.jsx(Lj,{children:r}),T.jsx(Nj,{scope:n,isInside:!0,children:T.jsx(ZM,{id:l.contentId,role:"tooltip",children:s||r})})]})})});fC.displayName=mc;var mC="TooltipArrow",Vj=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=E0(n);return Oj(mC,n).isInside?null:T.jsx(Aj,{...s,...r,ref:e})});Vj.displayName=mC;function Mj(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Fj(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Uj(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function jj(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function $j(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Bj(e)}function Bj(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var zj=dC,gC=fC;const Wj=zj,qj=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>T.jsx(gC,{ref:r,sideOffset:e,className:Bn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));qj.displayName=gC.displayName;var Gm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hj={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},eo,a_,yx,Kj=(yx=class{constructor(){mt(this,eo,Hj);mt(this,a_,!1)}setTimeoutProvider(t){He(this,eo,t)}setTimeout(t,e){return q(this,eo).setTimeout(t,e)}clearTimeout(t){q(this,eo).clearTimeout(t)}setInterval(t,e){return q(this,eo).setInterval(t,e)}clearInterval(t){q(this,eo).clearInterval(t)}},eo=new WeakMap,a_=new WeakMap,yx),Vp=new Kj;function Gj(t){setTimeout(t,0)}var Qm=typeof window>"u"||"Deno"in globalThis;function cr(){}function Qj(t,e){return typeof t=="function"?t(e):t}function Yj(t){return typeof t=="number"&&t>=0&&t!==1/0}function Jj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function cw(t,e){return typeof t=="function"?t(e):t}function Xj(t,e){return typeof t=="function"?t(e):t}function aS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==T0(o,e.options))return!1}else if(!Od(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function lS(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Nd(e.options.mutationKey)!==Nd(i))return!1}else if(!Od(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function T0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Nd)(t)}function Nd(t){return JSON.stringify(t,(e,n)=>uw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Od(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Od(t[n],e[n])):!1}var Zj=Object.prototype.hasOwnProperty;function yC(t,e){if(t===e)return t;const n=cS(t)&&cS(e);if(!n&&!(uw(t)&&uw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:Zj.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=yC(h,f);a[d]=p,p===h&&l++}return s===o&&l===s?t:a}function qK(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function cS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function uw(t){if(!uS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!uS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function uS(t){return Object.prototype.toString.call(t)==="[object Object]"}function e3(t){return new Promise(e=>{Vp.setTimeout(e,t)})}function t3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?yC(t,e):e}function n3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function r3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var I0=Symbol();function vC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===I0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function HK(t,e){return typeof t=="function"?t(...e):!!t}var Aa,to,Zl,vx,s3=(vx=class extends Gm{constructor(){super();mt(this,Aa);mt(this,to);mt(this,Zl);He(this,Zl,e=>{if(!Qm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,to)||this.setEventListener(q(this,Zl))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,to))==null||e.call(this),He(this,to,void 0))}setEventListener(e){var n;He(this,Zl,e),(n=q(this,to))==null||n.call(this),He(this,to,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){q(this,Aa)!==e&&(He(this,Aa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof q(this,Aa)=="boolean"?q(this,Aa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Aa=new WeakMap,to=new WeakMap,Zl=new WeakMap,vx),wC=new s3;function i3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function o3(t){var n;let e;if((n=t.then(r=>(e=r,r),cr))==null||n.catch(cr),e!==void 0)return{data:e}}function _C(t){return t}function a3(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function l3(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(cr),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function c3(t){return t.state.isPaused}function u3(t){return t.state.status==="success"}function d3(t){return!0}function h3(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??c3,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[a3(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??u3,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??d3,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??_C,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[l3(f,o,i)]:[]);return{mutations:r,queries:a}}function f3(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??_C,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,p;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(p=n==null?void 0:n.defaultOptions)==null?void 0:p.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:p,promise:w,dehydratedAt:g})=>{var L,x;const v=w?o3(w):void 0,E=h.data===void 0?v==null?void 0:v.data:h.data,y=E===void 0?E:i(E);let _=s.get(f);const R=(_==null?void 0:_.state.status)==="pending",k=(_==null?void 0:_.state.fetchStatus)==="fetching";if(_){const A=v&&g!==void 0&&g>_.state.dataUpdatedAt;if(h.dataUpdatedAt>_.state.dataUpdatedAt||A){const{fetchStatus:b,...P}=h;_.setState({...P,data:y})}}else _=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(x=n==null?void 0:n.defaultOptions)==null?void 0:x.queries,queryKey:d,queryHash:f,meta:p},{...h,data:y,fetchStatus:"idle",status:y!==void 0?"success":h.status});w&&!R&&!k&&(g===void 0||g>_.state.dataUpdatedAt)&&_.fetch(void 0,{initialPromise:Promise.resolve(w).then(i)}).catch(cr)})}var p3=Gj;function m3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=p3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ur=m3(),ec,no,tc,wx,g3=(wx=class extends Gm{constructor(){super();mt(this,ec,!0);mt(this,no);mt(this,tc);He(this,tc,e=>{if(!Qm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,no)||this.setEventListener(q(this,tc))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,no))==null||e.call(this),He(this,no,void 0))}setEventListener(e){var n;He(this,tc,e),(n=q(this,no))==null||n.call(this),He(this,no,e(this.setOnline.bind(this)))}setOnline(e){q(this,ec)!==e&&(He(this,ec,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return q(this,ec)}},ec=new WeakMap,no=new WeakMap,tc=new WeakMap,wx),Mp=new g3;function y3(t){return Math.min(1e3*2**t,3e4)}function EC(t){return(t??"online")==="online"?Mp.isOnline():!0}var dw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function TC(t){let e=!1,n=0,r;const s=i3(),i=()=>s.status!=="pending",o=g=>{var v;if(!i()){const E=new dw(g);f(E),(v=t.onCancel)==null||v.call(t,E)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>wC.isFocused()&&(t.networkMode==="always"||Mp.isOnline())&&t.canRun(),d=()=>EC(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var v;r=E=>{(i()||c())&&g(E)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),w=()=>{if(i())return;let g;const v=n===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(E){g=Promise.reject(E)}Promise.resolve(g).then(h).catch(E=>{var L;if(i())return;const y=t.retry??(Qm?0:3),_=t.retryDelay??y3,R=typeof _=="function"?_(n,E):_,k=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,E);if(e||!k){f(E);return}n++,(L=t.onFail)==null||L.call(t,n,E),e3(R).then(()=>c()?void 0:p()).then(()=>{e?f(E):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():p().then(w),s)}}var xa,_x,IC=(_x=class{constructor(){mt(this,xa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yj(this.gcTime)&&He(this,xa,Vp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Qm?1/0:5*60*1e3))}clearGcTimeout(){q(this,xa)&&(Vp.clearTimeout(q(this,xa)),He(this,xa,void 0))}},xa=new WeakMap,_x),Ra,nc,Qr,Pa,Dn,th,Ca,as,ni,Ex,v3=(Ex=class extends IC{constructor(n){super();mt(this,as);mt(this,Ra);mt(this,nc);mt(this,Qr);mt(this,Pa);mt(this,Dn);mt(this,th);mt(this,Ca);He(this,Ca,!1),He(this,th,n.defaultOptions),this.setOptions(n.options),this.observers=[],He(this,Pa,n.client),He(this,Qr,q(this,Pa).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,He(this,Ra,hS(this.options)),this.state=n.state??q(this,Ra),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=q(this,Dn))==null?void 0:n.promise}setOptions(n){if(this.options={...q(this,th),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=hS(this.options);r.data!==void 0&&(this.setState(dS(r.data,r.dataUpdatedAt)),He(this,Ra,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Qr).remove(this)}setData(n,r){const s=t3(this.state.data,n,this.options);return Kn(this,as,ni).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Kn(this,as,ni).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=q(this,Dn))==null?void 0:s.promise;return(i=q(this,Dn))==null||i.cancel(n),r?r.then(cr).catch(cr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,Ra))}isActive(){return this.observers.some(n=>Xj(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===I0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>cw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!Jj(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=q(this,Dn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=q(this,Dn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),q(this,Qr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(q(this,Dn)&&(q(this,Ca)?q(this,Dn).cancel({revert:!0}):q(this,Dn).cancelRetry()),this.scheduleGc()),q(this,Qr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Kn(this,as,ni).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,p,w,g,v,E,y,_,R;if(this.state.fetchStatus!=="idle"&&((c=q(this,Dn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(q(this,Dn))return q(this,Dn).continueRetry(),q(this,Dn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const k=this.observers.find(L=>L.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,i=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(He(this,Ca,!0),s.signal)})},o=()=>{const k=vC(this.options,r),x=(()=>{const A={client:q(this,Pa),queryKey:this.queryKey,meta:this.meta};return i(A),A})();return He(this,Ca,!1),this.options.persister?this.options.persister(k,x,this):k(x)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:q(this,Pa),state:this.state,fetchFn:o};return i(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),He(this,nc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Kn(this,as,ni).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),He(this,Dn,TC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof dw&&k.revert&&this.setState({...q(this,nc),fetchStatus:"idle"}),s.abort()},onFail:(k,L)=>{Kn(this,as,ni).call(this,{type:"failed",failureCount:k,error:L})},onPause:()=>{Kn(this,as,ni).call(this,{type:"pause"})},onContinue:()=>{Kn(this,as,ni).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await q(this,Dn).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(w=(p=q(this,Qr).config).onSuccess)==null||w.call(p,k,this),(v=(g=q(this,Qr).config).onSettled)==null||v.call(g,k,this.state.error,this),k}catch(k){if(k instanceof dw){if(k.silent)return q(this,Dn).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Kn(this,as,ni).call(this,{type:"error",error:k}),(y=(E=q(this,Qr).config).onError)==null||y.call(E,k,this),(R=(_=q(this,Qr).config).onSettled)==null||R.call(_,this.state.data,k,this),k}finally{this.scheduleGc()}}},Ra=new WeakMap,nc=new WeakMap,Qr=new WeakMap,Pa=new WeakMap,Dn=new WeakMap,th=new WeakMap,Ca=new WeakMap,as=new WeakSet,ni=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...w3(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,...dS(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return He(this,nc,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),ur.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),q(this,Qr).notify({query:this,type:"updated",action:n})})},Ex);function w3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:EC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function dS(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function hS(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function fS(t){return{onFetch:(e,n)=>{var d,h,f,p,w;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},E=vC(e.options,e.fetchOptions),y=async(_,R,k)=>{if(g)return Promise.reject();if(R==null&&_.pages.length)return Promise.resolve(_);const x=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:R,direction:k?"backward":"forward",meta:e.options.meta};return v(D),D})(),A=await E(x),{maxPages:b}=e.options,P=k?r3:n3;return{pages:P(_.pages,A,b),pageParams:P(_.pageParams,R,b)}};if(s&&i.length){const _=s==="backward",R=_?_3:pS,k={pages:i,pageParams:o},L=R(r,k);a=await y(k,L,_)}else{const _=t??i.length;do{const R=l===0?o[0]??r.initialPageParam:pS(r,a);if(l>0&&R==null)break;a=await y(a,R),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function pS(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function _3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var nh,Ns,ar,Da,Os,Ki,Tx,E3=(Tx=class extends IC{constructor(n){super();mt(this,Os);mt(this,nh);mt(this,Ns);mt(this,ar);mt(this,Da);He(this,nh,n.client),this.mutationId=n.mutationId,He(this,ar,n.mutationCache),He(this,Ns,[]),this.state=n.state||T3(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){q(this,Ns).includes(n)||(q(this,Ns).push(n),this.clearGcTimeout(),q(this,ar).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){He(this,Ns,q(this,Ns).filter(r=>r!==n)),this.scheduleGc(),q(this,ar).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){q(this,Ns).length||(this.state.status==="pending"?this.scheduleGc():q(this,ar).remove(this))}continue(){var n;return((n=q(this,Da))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,p,w,g,v,E,y,_,R,k,L,x,A,b,P;const r=()=>{Kn(this,Os,Ki).call(this,{type:"continue"})},s={client:q(this,nh),meta:this.options.meta,mutationKey:this.options.mutationKey};He(this,Da,TC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,O)=>{Kn(this,Os,Ki).call(this,{type:"failed",failureCount:D,error:O})},onPause:()=>{Kn(this,Os,Ki).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,ar).canRun(this)}));const i=this.state.status==="pending",o=!q(this,Da).canStart();try{if(i)r();else{Kn(this,Os,Ki).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=q(this,ar).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&Kn(this,Os,Ki).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const D=await q(this,Da).start();return await((f=(h=q(this,ar).config).onSuccess)==null?void 0:f.call(h,D,n,this.state.context,this,s)),await((w=(p=this.options).onSuccess)==null?void 0:w.call(p,D,n,this.state.context,s)),await((v=(g=q(this,ar).config).onSettled)==null?void 0:v.call(g,D,null,this.state.variables,this.state.context,this,s)),await((y=(E=this.options).onSettled)==null?void 0:y.call(E,D,null,n,this.state.context,s)),Kn(this,Os,Ki).call(this,{type:"success",data:D}),D}catch(D){try{throw await((R=(_=q(this,ar).config).onError)==null?void 0:R.call(_,D,n,this.state.context,this,s)),await((L=(k=this.options).onError)==null?void 0:L.call(k,D,n,this.state.context,s)),await((A=(x=q(this,ar).config).onSettled)==null?void 0:A.call(x,void 0,D,this.state.variables,this.state.context,this,s)),await((P=(b=this.options).onSettled)==null?void 0:P.call(b,void 0,D,n,this.state.context,s)),D}finally{Kn(this,Os,Ki).call(this,{type:"error",error:D})}}finally{q(this,ar).runNext(this)}}},nh=new WeakMap,Ns=new WeakMap,ar=new WeakMap,Da=new WeakMap,Os=new WeakSet,Ki=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ur.batch(()=>{q(this,Ns).forEach(s=>{s.onMutationUpdate(n)}),q(this,ar).notify({mutation:this,type:"updated",action:n})})},Tx);function T3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oi,ls,rh,Ix,I3=(Ix=class extends Gm{constructor(e={}){super();mt(this,oi);mt(this,ls);mt(this,rh);this.config=e,He(this,oi,new Set),He(this,ls,new Map),He(this,rh,0)}build(e,n,r){const s=new E3({client:e,mutationCache:this,mutationId:++Mh(this,rh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){q(this,oi).add(e);const n=of(e);if(typeof n=="string"){const r=q(this,ls).get(n);r?r.push(e):q(this,ls).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(q(this,oi).delete(e)){const n=of(e);if(typeof n=="string"){const r=q(this,ls).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&q(this,ls).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=of(e);if(typeof n=="string"){const r=q(this,ls).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=of(e);if(typeof n=="string"){const s=(r=q(this,ls).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ur.batch(()=>{q(this,oi).forEach(e=>{this.notify({type:"removed",mutation:e})}),q(this,oi).clear(),q(this,ls).clear()})}getAll(){return Array.from(q(this,oi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>lS(n,r))}findAll(e={}){return this.getAll().filter(n=>lS(e,n))}notify(e){ur.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ur.batch(()=>Promise.all(e.map(n=>n.continue().catch(cr))))}},oi=new WeakMap,ls=new WeakMap,rh=new WeakMap,Ix);function of(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ls,Sx,S3=(Sx=class extends Gm{constructor(e={}){super();mt(this,Ls);this.config=e,He(this,Ls,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??T0(s,n);let o=this.get(i);return o||(o=new v3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){q(this,Ls).has(e.queryHash)||(q(this,Ls).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=q(this,Ls).get(e.queryHash);n&&(e.destroy(),n===e&&q(this,Ls).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ur.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return q(this,Ls).get(e)}getAll(){return[...q(this,Ls).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>aS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>aS(e,r)):n}notify(e){ur.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ur.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ur.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ls=new WeakMap,Sx),on,ro,so,rc,sc,io,ic,oc,bx,b3=(bx=class{constructor(t={}){mt(this,on);mt(this,ro);mt(this,so);mt(this,rc);mt(this,sc);mt(this,io);mt(this,ic);mt(this,oc);He(this,on,t.queryCache||new S3),He(this,ro,t.mutationCache||new I3),He(this,so,t.defaultOptions||{}),He(this,rc,new Map),He(this,sc,new Map),He(this,io,0)}mount(){Mh(this,io)._++,q(this,io)===1&&(He(this,ic,wC.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,on).onFocus())})),He(this,oc,Mp.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,on).onOnline())})))}unmount(){var t,e;Mh(this,io)._--,q(this,io)===0&&((t=q(this,ic))==null||t.call(this),He(this,ic,void 0),(e=q(this,oc))==null||e.call(this),He(this,oc,void 0))}isFetching(t){return q(this,on).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return q(this,ro).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,on).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=q(this,on).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(cw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return q(this,on).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=q(this,on).get(r.queryHash),i=s==null?void 0:s.state.data,o=Qj(e,i);if(o!==void 0)return q(this,on).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ur.batch(()=>q(this,on).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,on).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=q(this,on);ur.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=q(this,on);return ur.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ur.batch(()=>q(this,on).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(cr).catch(cr)}invalidateQueries(t,e={}){return ur.batch(()=>(q(this,on).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ur.batch(()=>q(this,on).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(cr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(cr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=q(this,on).build(this,e);return n.isStaleByTime(cw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(cr).catch(cr)}fetchInfiniteQuery(t){return t.behavior=fS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(cr).catch(cr)}ensureInfiniteQueryData(t){return t.behavior=fS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Mp.isOnline()?q(this,ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,on)}getMutationCache(){return q(this,ro)}getDefaultOptions(){return q(this,so)}setDefaultOptions(t){He(this,so,t)}setQueryDefaults(t,e){q(this,rc).set(Nd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...q(this,rc).values()],n={};return e.forEach(r=>{Od(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){q(this,sc).set(Nd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...q(this,sc).values()],n={};return e.forEach(r=>{Od(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...q(this,so).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=T0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===I0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...q(this,so).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){q(this,on).clear(),q(this,ro).clear()}},on=new WeakMap,ro=new WeakMap,so=new WeakMap,rc=new WeakMap,sc=new WeakMap,io=new WeakMap,ic=new WeakMap,oc=new WeakMap,bx),SC=S.createContext(void 0),QK=t=>{const e=S.useContext(SC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},A3=({client:t,children:e})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),T.jsx(SC.Provider,{value:t,children:e})),x3=["added","removed","updated"];function mS(t){return x3.includes(t)}async function R3({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();f3(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function gS({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:h3(t,r)};await e.persistClient(s)}function P3(t){const e=t.queryClient.getQueryCache().subscribe(r=>{mS(r.type)&&gS(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{mS(r.type)&&gS(t)});return()=>{e(),n()}}function C3(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=R3(t).then(()=>{e||(n=P3(t))});return[r,s]}function Iy(){}function D3({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:k3(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:Iy,restoreClient:Iy,removeClient:Iy}}function k3(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Vp.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ld(){return Ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ld.apply(this,arguments)}var lo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(lo||(lo={}));const yS="popstate";function N3(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Fp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vd(s)}return bC(e,n,null,t)}function O3(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=rl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Fp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Vd(i))}function r(s,i){S0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return bC(e,n,r,t)}function gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function S0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L3(){return Math.random().toString(36).substr(2,8)}function vS(t,e){return{usr:t.state,key:t.key,idx:e}}function Fp(t,e,n,r){return n===void 0&&(n=null),Ld({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?rl(e):e,{state:n,key:e&&e.key||r||L3()})}function Vd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function bC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=lo.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ld({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=lo.Pop;let v=d(),E=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:E})}function f(v,E){a=lo.Push;let y=Fp(g.location,v,E);n&&n(y,v),c=d()+1;let _=vS(y,c),R=g.createHref(y);try{o.pushState(_,"",R)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(R)}i&&l&&l({action:a,location:g.location,delta:1})}function p(v,E){a=lo.Replace;let y=Fp(g.location,v,E);n&&n(y,v),c=d();let _=vS(y,c),R=g.createHref(y);o.replaceState(_,"",R),i&&l&&l({action:a,location:g.location,delta:0})}function w(v){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:Vd(v);return y=y.replace(/ $/,"%20"),gn(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let g={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(yS,h),l=v,()=>{s.removeEventListener(yS,h),l=null}},createHref(v){return e(s,v)},createURL:w,encodeLocation(v){let E=w(v);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var wS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wS||(wS={}));function V3(t,e,n){return n===void 0&&(n="/"),M3(t,e,n)}function M3(t,e,n,r){let s=typeof e=="string"?rl(e):e,i=b0(s.pathname||"/",n);if(i==null)return null;let o=AC(t);F3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Y3(i);a=K3(o[l],c)}return a}function AC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(gn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Eo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(gn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:q3(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of xC(i.path))s(i,o,l)}),e}function xC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=xC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function F3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:H3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const U3=/^:[\w-]+$/,j3=3,$3=2,B3=1,z3=10,W3=-2,_S=t=>t==="*";function q3(t,e){let n=t.split("/"),r=n.length;return n.some(_S)&&(r+=W3),e&&(r+=$3),n.filter(s=>!_S(s)).reduce((s,i)=>s+(U3.test(i)?j3:i===""?B3:z3),r)}function H3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function K3(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=G3({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Eo([i,h.pathname]),pathnameBase:e6(Eo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Eo([i,h.pathnameBase]))}return o}function G3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Q3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const w=a[h];return p&&!w?c[f]=void 0:c[f]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Q3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),S0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Y3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return S0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function b0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function J3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?rl(t):t;return{pathname:n?n.startsWith("/")?n:X3(n,e):e,search:t6(r),hash:n6(s)}}function X3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function A0(t,e){let n=Z3(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function x0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=rl(t):(s=Ld({},t),gn(!s.pathname||!s.pathname.includes("?"),Sy("?","pathname","search",s)),gn(!s.pathname||!s.pathname.includes("#"),Sy("#","pathname","hash",s)),gn(!s.search||!s.search.includes("#"),Sy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=J3(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Eo=t=>t.join("/").replace(/\/\/+/g,"/"),e6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,n6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RC=["post","put","patch","delete"];new Set(RC);const s6=["get",...RC];new Set(s6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Md.apply(this,arguments)}const R0=S.createContext(null),i6=S.createContext(null),Wo=S.createContext(null),Ym=S.createContext(null),Pi=S.createContext({outlet:null,matches:[],isDataRoute:!1}),PC=S.createContext(null);function o6(t,e){let{relative:n}=e===void 0?{}:e;Wc()||gn(!1);let{basename:r,navigator:s}=S.useContext(Wo),{hash:i,pathname:o,search:a}=DC(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Eo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Wc(){return S.useContext(Ym)!=null}function Zs(){return Wc()||gn(!1),S.useContext(Ym).location}function CC(t){S.useContext(Wo).static||S.useLayoutEffect(t)}function qc(){let{isDataRoute:t}=S.useContext(Pi);return t?w6():a6()}function a6(){Wc()||gn(!1);let t=S.useContext(R0),{basename:e,future:n,navigator:r}=S.useContext(Wo),{matches:s}=S.useContext(Pi),{pathname:i}=Zs(),o=JSON.stringify(A0(s,n.v7_relativeSplatPath)),a=S.useRef(!1);return CC(()=>{a.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=x0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Eo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function YK(){let{matches:t}=S.useContext(Pi),e=t[t.length-1];return e?e.params:{}}function DC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(Wo),{matches:s}=S.useContext(Pi),{pathname:i}=Zs(),o=JSON.stringify(A0(s,r.v7_relativeSplatPath));return S.useMemo(()=>x0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function l6(t,e){return c6(t,e)}function c6(t,e,n,r){Wc()||gn(!1);let{navigator:s}=S.useContext(Wo),{matches:i}=S.useContext(Pi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Zs(),d;if(e){var h;let v=typeof e=="string"?rl(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||gn(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=V3(t,{pathname:p}),g=p6(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Eo([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Eo([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&g?S.createElement(Ym.Provider,{value:{location:Md({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:lo.Pop}},g):g}function u6(){let t=v6(),e=r6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const d6=S.createElement(u6,null);class h6 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Pi.Provider,{value:this.props.routeContext},S.createElement(PC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f6(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(R0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Pi.Provider,{value:e},r)}function p6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||gn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,w=!1,g=null,v=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||d6,l&&(c<0&&f===0?(_6("route-fallback"),w=!0,v=null):c===f&&(w=!0,v=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),y=()=>{let _;return p?_=g:w?_=v:h.route.Component?_=S.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,S.createElement(f6,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(h6,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var kC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kC||{}),NC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(NC||{});function m6(t){let e=S.useContext(R0);return e||gn(!1),e}function g6(t){let e=S.useContext(i6);return e||gn(!1),e}function y6(t){let e=S.useContext(Pi);return e||gn(!1),e}function OC(t){let e=y6(),n=e.matches[e.matches.length-1];return n.route.id||gn(!1),n.route.id}function v6(){var t;let e=S.useContext(PC),n=g6(),r=OC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function w6(){let{router:t}=m6(kC.UseNavigateStable),e=OC(NC.UseNavigateStable),n=S.useRef(!1);return CC(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Md({fromRouteId:e},i)))},[t,e])}const ES={};function _6(t,e,n){ES[t]||(ES[t]=!0)}function LC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function JK(t){let{to:e,replace:n,state:r,relative:s}=t;Wc()||gn(!1);let{future:i,static:o}=S.useContext(Wo),{matches:a}=S.useContext(Pi),{pathname:l}=Zs(),c=qc(),d=x0(e,A0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Se(t){gn(!1)}function VC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=lo.Pop,navigator:i,static:o=!1,future:a}=t;Wc()&&gn(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Md({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=rl(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=r,g=S.useMemo(()=>{let v=b0(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:w},navigationType:s}},[l,d,h,f,p,w,s]);return g==null?null:S.createElement(Wo.Provider,{value:c},S.createElement(Ym.Provider,{children:n,value:g}))}function TS(t){let{children:e,location:n}=t;return l6(hw(e),n)}new Promise(()=>{});function hw(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,hw(r.props.children,i));return}r.type!==Se&&gn(!1),!r.props.index||!r.props.children||gn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(this,arguments)}function E6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function T6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function I6(t,e){return t.button===0&&(!e||e==="_self")&&!T6(t)}function pw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function S6(t,e){let n=pw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const b6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],A6="6";try{window.__reactRouterVersion=A6}catch{}const x6="startTransition",Up=h_[x6];function R6(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=N3({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Up?Up(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>LC(r),[r]),S.createElement(VC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function P6(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=O3({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Up?Up(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>LC(r),[r]),S.createElement(VC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const C6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",D6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k6=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=E6(e,b6),{basename:p}=S.useContext(Wo),w,g=!1;if(typeof c=="string"&&D6.test(c)&&(w=c,C6))try{let _=new URL(window.location.href),R=c.startsWith("//")?new URL(_.protocol+c):new URL(c),k=b0(R.pathname,p);R.origin===_.origin&&k!=null?c=k+R.search+R.hash:g=!0}catch{}let v=o6(c,{relative:s}),E=N6(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(_){r&&r(_),_.defaultPrevented||E(_)}return S.createElement("a",fw({},f,{href:w||v,onClick:g||i?r:y,ref:n,target:l}))});var IS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(IS||(IS={}));var SS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(SS||(SS={}));function N6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=qc(),c=Zs(),d=DC(t,{relative:o});return S.useCallback(h=>{if(I6(h,n)){h.preventDefault();let f=r!==void 0?r:Vd(c)===Vd(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function XK(t){let e=S.useRef(pw(t)),n=S.useRef(!1),r=Zs(),s=S.useMemo(()=>S6(r.search,n.current?null:e.current),[r.search]),i=qc(),o=S.useCallback((a,l)=>{const c=pw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const MC=S.createContext(void 0),O6=({children:t})=>{const[e,n]=S.useState("medium"),[r,s]=S.useState(!1),[i,o]=S.useState(!1);S.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),S.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),S.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),S.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return T.jsx(MC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},ZK=()=>{const t=S.useContext(MC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},L6=AP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),si=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?xM:"button";return T.jsx(o,{className:Bn(L6({variant:e,size:n,className:t})),ref:i,...s})});si.displayName="Button";const mw=S.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),T.jsx("input",{type:e,className:Bn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});mw.displayName="Input";const V6=()=>{};var bS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},M6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},P0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new F6;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class F6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U6=function(t){const e=FC(t);return P0.encodeByteArray(e,!0)},jp=function(t){return U6(t).replace(/\./g,"")},UC=function(t){try{return P0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=()=>jC().__FIREBASE_DEFAULTS__,$6=()=>{if(typeof process>"u"||typeof bS>"u")return;const t=bS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UC(t[1]);return e&&JSON.parse(e)},Jm=()=>{try{return V6()||j6()||$6()||B6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z6=t=>{var e,n;return(n=(e=Jm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$C=t=>{const e=z6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BC=()=>{var t;return(t=Jm())==null?void 0:t.config},W6=t=>{var e;return(e=Jm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jp(JSON.stringify(n)),jp(JSON.stringify(o)),""].join(".")}const ed={};function H6(){const t={prod:[],emulator:[]};for(const e of Object.keys(ed))ed[e]?t.emulator.push(e):t.prod.push(e);return t}function K6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let AS=!1;function zC(t,e){if(typeof window>"u"||typeof document>"u"||!Ci(window.location.host)||ed[t]===e||ed[t]||AS)return;ed[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=H6().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{AS=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=K6(r),p=n("text"),w=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),v=document.getElementById(g)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;a(_),d(v,g);const R=c();l(y,E),_.append(y,w,v,R),document.body.appendChild(_)}i?(w.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function WC(){var e;const t=(e=Jm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X6(){const t=zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qC(){return!WC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HC(){return!WC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function D0(){try{return typeof indexedDB=="object"}catch{return!1}}function Z6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$="FirebaseError";class Is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e$,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hc.prototype.create)}}class Hc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?t$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Is(s,a,r)}}function t$(t,e){return t.replace(n$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const n$=/\{\$([^}]+)}/g;function gc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xS(i)&&xS(o)){if(!gc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Mu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function r$(t,e){const n=new s$(t,e);return n.subscribe.bind(n)}class s${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");i$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=by),s.error===void 0&&(s.error=by),s.complete===void 0&&(s.complete=by);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function by(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l$(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a$(t){return t===ra?void 0:t}function l$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new o$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ht||(ht={}));const u$={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},d$=ht.INFO,h$={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},f$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=h$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=d$,this._logHandler=f$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const p$=(t,e)=>e.some(n=>t instanceof n);let RS,PS;function m$(){return RS||(RS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g$(){return PS||(PS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GC=new WeakMap,yw=new WeakMap,QC=new WeakMap,Ay=new WeakMap,k0=new WeakMap;function y$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(To(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GC.set(n,t)}).catch(()=>{}),k0.set(e,t),e}function v$(t){if(yw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});yw.set(t,e)}let vw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return To(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function w$(t){vw=t(vw)}function _$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xy(this),e,...n);return QC.set(r,e.sort?e.sort():[e]),To(r)}:g$().includes(t)?function(...e){return t.apply(xy(this),e),To(GC.get(this))}:function(...e){return To(t.apply(xy(this),e))}}function E$(t){return typeof t=="function"?_$(t):(t instanceof IDBTransaction&&v$(t),p$(t,m$())?new Proxy(t,vw):t)}function To(t){if(t instanceof IDBRequest)return y$(t);if(Ay.has(t))return Ay.get(t);const e=E$(t);return e!==t&&(Ay.set(t,e),k0.set(e,t)),e}const xy=t=>k0.get(t);function T$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=To(o);return r&&o.addEventListener("upgradeneeded",l=>{r(To(o.result),l.oldVersion,l.newVersion,To(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const I$=["get","getKey","getAll","getAllKeys","count"],S$=["put","add","delete","clear"],Ry=new Map;function CS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ry.get(e))return Ry.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=S$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||I$.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Ry.set(e,i),i}w$(t=>({...t,get:(e,n,r)=>CS(e,n)||t.get(e,n,r),has:(e,n)=>!!CS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ww="@firebase/app",DS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Xm("@firebase/app"),x$="@firebase/app-compat",R$="@firebase/analytics-compat",P$="@firebase/analytics",C$="@firebase/app-check-compat",D$="@firebase/app-check",k$="@firebase/auth",N$="@firebase/auth-compat",O$="@firebase/database",L$="@firebase/data-connect",V$="@firebase/database-compat",M$="@firebase/functions",F$="@firebase/functions-compat",U$="@firebase/installations",j$="@firebase/installations-compat",$$="@firebase/messaging",B$="@firebase/messaging-compat",z$="@firebase/performance",W$="@firebase/performance-compat",q$="@firebase/remote-config",H$="@firebase/remote-config-compat",K$="@firebase/storage",G$="@firebase/storage-compat",Q$="@firebase/firestore",Y$="@firebase/ai",J$="@firebase/firestore-compat",X$="firebase",Z$="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="[DEFAULT]",eB={[ww]:"fire-core",[x$]:"fire-core-compat",[P$]:"fire-analytics",[R$]:"fire-analytics-compat",[D$]:"fire-app-check",[C$]:"fire-app-check-compat",[k$]:"fire-auth",[N$]:"fire-auth-compat",[O$]:"fire-rtdb",[L$]:"fire-data-connect",[V$]:"fire-rtdb-compat",[M$]:"fire-fn",[F$]:"fire-fn-compat",[U$]:"fire-iid",[j$]:"fire-iid-compat",[$$]:"fire-fcm",[B$]:"fire-fcm-compat",[z$]:"fire-perf",[W$]:"fire-perf-compat",[q$]:"fire-rc",[H$]:"fire-rc-compat",[K$]:"fire-gcs",[G$]:"fire-gcs-compat",[Q$]:"fire-fst",[J$]:"fire-fst-compat",[Y$]:"fire-vertex","fire-js":"fire-js",[X$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new Map,tB=new Map,Ew=new Map;function kS(t,e){try{t.container.addComponent(e)}catch(n){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){const e=t.name;if(Ew.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;Ew.set(e,t);for(const n of $p.values())kS(n,t);for(const n of tB.values())kS(n,t);return!0}function Zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new Hc("app","Firebase",nB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=Z$;function YC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:_w,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Io.create("bad-app-name",{appName:String(s)});if(n||(n=BC()),!n)throw Io.create("no-options");const i=$p.get(s);if(i){if(gc(n,i.options)&&gc(r,i.config))return i;throw Io.create("duplicate-app",{appName:s})}const o=new c$(s);for(const l of Ew.values())o.addComponent(l);const a=new rB(n,r,o);return $p.set(s,a),a}function JC(t=_w){const e=$p.get(t);if(!e&&t===_w&&BC())return YC();if(!e)throw Io.create("no-app",{appName:t});return e}function Ur(t,e,n){let r=eB[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(o.join(" "));return}Ys(new Es(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="firebase-heartbeat-database",iB=1,Fd="firebase-heartbeat-store";let Py=null;function XC(){return Py||(Py=T$(sB,iB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Io.create("idb-open",{originalErrorMessage:t.message})})),Py}async function oB(t){try{const n=(await XC()).transaction(Fd),r=await n.objectStore(Fd).get(ZC(t));return await n.done,r}catch(e){if(e instanceof Is)Si.warn(e.message);else{const n=Io.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Si.warn(n.message)}}}async function NS(t,e){try{const r=(await XC()).transaction(Fd,"readwrite");await r.objectStore(Fd).put(e,ZC(t)),await r.done}catch(n){if(n instanceof Is)Si.warn(n.message);else{const r=Io.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Si.warn(r.message)}}}function ZC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=1024,lB=30;class cB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=OS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>lB){const o=hB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Si.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=OS(),{heartbeatsToSend:r,unsentEntries:s}=uB(this._heartbeatsCache.heartbeats),i=jp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Si.warn(n),""}}}function OS(){return new Date().toISOString().substring(0,10)}function uB(t,e=aB){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),LS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),LS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D0()?Z6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return NS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return NS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function LS(t){return jp(JSON.stringify({version:2,heartbeats:t})).length}function hB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(t){Ys(new Es("platform-logger",e=>new b$(e),"PRIVATE")),Ys(new Es("heartbeat",e=>new cB(e),"PRIVATE")),Ur(ww,DS,t),Ur(ww,DS,"esm2020"),Ur("fire-js","")}fB("");function eD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pB=eD,tD=new Hc("auth","Firebase",eD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=new Xm("@firebase/auth");function mB(t,...e){Bp.logLevel<=ht.WARN&&Bp.warn(`Auth (${hh}): ${t}`,...e)}function $f(t,...e){Bp.logLevel<=ht.ERROR&&Bp.error(`Auth (${hh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t,...e){throw O0(t,...e)}function N0(t,...e){return O0(t,...e)}function nD(t,e,n){const r={...pB(),[e]:n};return new Hc("auth","Firebase",r).create(e,{appName:t.name})}function So(t){return nD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function O0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tD.create(t,...e)}function ft(t,e,...n){if(!t)throw O0(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $f(e),new Error(e)}function zp(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function rD(){return VS()==="http:"||VS()==="https:"}function VS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rD()||Y6()||"connection"in navigator)?navigator.onLine:!0}function vB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.shortDelay=e,this.longDelay=n,zp(n>e,"Short delay should be less than long delay!"),this.isMobile=G6()||J6()}get(){return yB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e){zp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TB=new fh(3e4,6e4);function Di(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ei(t,e,n,r,s={}){return iD(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=KC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return Q6()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ci(t.emulatorConfig.host)&&(c.credentials="include"),sD.fetch()(await oD(t,t.config.apiHost,n,a),c)})}async function iD(t,e,n){t._canInitEmulator=!1;const r={..._B,...e};try{const s=new SB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw af(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw af(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw af(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nD(t,d,c);Wa(t,d)}}catch(s){if(s instanceof Is)throw s;Wa(t,"network-request-failed",{message:String(s)})}}async function eg(t,e,n,r,s={}){const i=await ei(t,e,n,r,s);return"mfaPendingCredential"in i&&Wa(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function oD(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?wB(t.config,s):`${t.config.apiScheme}://${s}`;return EB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function IB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(N0(this.auth,"network-request-failed")),TB.get())})}}function af(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=N0(t,e,r);return s.customData._tokenResponse=n,s}function MS(t){return t!==void 0&&t.enterprise!==void 0}class bB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AB(t,e){return ei(t,"GET","/v2/recaptchaConfig",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xB(t,e){return ei(t,"POST","/v1/accounts:delete",e)}async function Wp(t,e){return ei(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RB(t,e=!1){const n=Pt(t),r=await n.getIdToken(e),s=L0(r);ft(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:td(Cy(s.auth_time)),issuedAtTime:td(Cy(s.iat)),expirationTime:td(Cy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Cy(t){return Number(t)*1e3}function L0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $f("JWT malformed, contained fewer than 3 sections"),null;try{const s=UC(n);return s?JSON.parse(s):($f("Failed to decode base64 JWT payload"),null)}catch(s){return $f("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function FS(t){const e=L0(t);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Is&&PB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=td(this.lastLoginAt),this.creationTime=td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qp(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Ud(t,Wp(e,{idToken:n}));ft(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?aD(s.providerUserInfo):[],o=kB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Tw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function DB(t){const e=Pt(t);await qp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB(t,e){const n=await iD(t,{},async()=>{const r=KC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await oD(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ci(t.emulatorConfig.host)&&(l.credentials="include"),sD.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OB(t,e){return ei(t,"POST","/v2/accounts:revokeToken",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const n=FS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await NB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ql;return r&&(ft(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ft(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ft(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ql,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,e){ft(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new CB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ud(this,this.stsTokenManager.getToken(this.auth,e));return ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RB(this,e)}reload(){return DB(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(So(this.auth));const e=await this.getIdToken();return await Ud(this,xB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:w,stsTokenManager:g}=n;ft(h&&g,e,"internal-error");const v=Ql.fromJSON(this.name,g);ft(typeof h=="string",e,"internal-error"),zi(r,e.name),zi(s,e.name),ft(typeof f=="boolean",e,"internal-error"),ft(typeof p=="boolean",e,"internal-error"),zi(i,e.name),zi(o,e.name),zi(a,e.name),zi(l,e.name),zi(c,e.name),zi(d,e.name);const E=new fs({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(E.providerData=w.map(y=>({...y}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ql;s.updateFromServerResponse(n);const i=new fs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await qp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ft(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?aD(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ql;a.updateFromIdToken(r);const l=new fs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Tw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Map;function ga(t){zp(t instanceof Function,"Expected a class definition");let e=US.get(t);return e?(zp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,US.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lD.type="NONE";const Iw=lD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e,n){return`firebase:${t}:${e}:${n}`}class Yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Dy(this.userKey,s.apiKey,i),this.fullPersistenceKey=Dy("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wp(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yl(ga(Iw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ga(Iw);const o=Dy(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Wp(e,{idToken:d}).catch(()=>{});if(!f)break;h=await fs._fromGetAccountInfoResponse(e,f,d)}else h=fs._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Yl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Yl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dD(e))return"Blackberry";if(hD(e))return"Webos";if(VB(e))return"Safari";if((e.includes("chrome/")||MB(e))&&!e.includes("edge/"))return"Chrome";if(uD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LB(t=zn()){return/firefox\//i.test(t)}function VB(t=zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MB(t=zn()){return/crios\//i.test(t)}function cD(t=zn()){return/iemobile/i.test(t)}function uD(t=zn()){return/android/i.test(t)}function dD(t=zn()){return/blackberry/i.test(t)}function hD(t=zn()){return/webos/i.test(t)}function FB(t=zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UB(){return X6()&&document.documentMode===10}function jB(t=zn()){return FB(t)||uD(t)||hD(t)||dD(t)||/windows phone/i.test(t)||cD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e=[]){let n;switch(t){case"Browser":n=jS(zn());break;case"Worker":n=`${jS(zn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(t,e={}){return ei(t,"GET","/v2/passwordPolicy",Di(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB=6;class WB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $S(this),this.idTokenSubscription=new $S(this),this.beforeStateQueue=new $B(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ga(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wp(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Dr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(So(this));const n=e?Pt(e):null;return n&&ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ga(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BB(this),n=new WB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ga(e)||this._popupRedirectResolver;ft(n,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[ga(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&mB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Kc(t){return Pt(t)}class $S{constructor(e){this.auth=e,this.observer=null,this.addObserver=r$(n=>this.observer=n)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HB(t){V0=t}function KB(t){return V0.loadJS(t)}function GB(){return V0.recaptchaEnterpriseScript}class QB{constructor(){this.enterprise=new YB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const JB="recaptcha-enterprise",pD="NO_RECAPTCHA";class XB{constructor(e){this.type=JB,this.auth=Kc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{AB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;MS(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(pD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&MS(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=GB();l.length!==0&&(l+=a),KB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function BS(t,e,n,r=!1,s=!1){const i=new XB(t);let o;if(s)o=pD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await BS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await BS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(t,e){const n=Zm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(gc(i,e??{}))return s;Wa(s,"already-initialized")}return n.initialize({options:e})}function e5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ga);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function n5(t,e){return ei(t,"POST","/v1/accounts:update",e)}async function r5(t,e){return ei(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(t,e){return eg(t,"POST","/v1/accounts:signInWithPassword",Di(t,e))}async function i5(t,e){return ei(t,"POST","/v1/accounts:sendOobCode",Di(t,e))}async function o5(t,e){return i5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e){return eg(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,e))}async function l5(t,e){return eg(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends t5{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hp(e,n,"signInWithPassword",s5);case"emailLink":return a5(e,{email:this._email,oobCode:this._password});default:Wa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hp(e,r,"signUpPassword",r5);case"emailLink":return l5(e,{idToken:n,email:this._email,oobCode:this._password});default:Wa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u5(t){const e=Vu(Mu(t)).link,n=e?Vu(Mu(e)).deep_link_id:null,r=Vu(Mu(t)).deep_link_id;return(r?Vu(Mu(r)).link:null)||r||n||e||t}class M0{constructor(e){const n=Vu(Mu(e)),r=n.apiKey??null,s=n.oobCode??null,i=c5(n.mode??null);ft(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=u5(e);try{return new M0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this.providerId=Gc.PROVIDER_ID}static credential(e,n){return jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=M0.parseLink(n);return ft(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}Gc.PROVIDER_ID="password";Gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e){return eg(t,"POST","/v1/accounts:signUp",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await fs._fromIdTokenResponse(e,r,s),o=zS(r);return new yc({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zS(r);return new yc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends Is{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kp(e,n,r,s)}}function mD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kp._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(t,e,n=!1){const{auth:r}=t;if(Dr(r.app))return Promise.reject(So(r));const s="reauthenticate";try{const i=await Ud(t,mD(r,s,e,t),n);ft(i.idToken,r,"internal-error");const o=L0(i.idToken);ft(o,r,"internal-error");const{sub:a}=o;return ft(t.uid===a,r,"user-mismatch"),yc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Wa(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e,n=!1){if(Dr(t.app))return Promise.reject(So(t));const r="signIn",s=await mD(t,r,e),i=await yc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function p5(t,e){return f5(Kc(t),e)}async function tG(t,e){return h5(Pt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t){const e=Kc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m5(t,e,n){const r=Kc(t);await Hp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",o5)}async function WS(t,e,n){if(Dr(t.app))return Promise.reject(So(t));const r=Kc(t),o=await Hp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&gD(t),l}),a=await yc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function g5(t,e,n){return Dr(t.app)?Promise.reject(So(t)):p5(Pt(t),Gc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t,e){return ei(t,"POST","/v1/accounts:createAuthUri",Di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e){const n=rD()?gB():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await y5(Pt(t),r);return s||[]}function nG(t,e){return w5(Pt(t),null,e)}async function w5(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Ud(t,n5(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e){return Pt(t).setPersistence(e)}function E5(t,e,n,r){return Pt(t).onAuthStateChanged(e,n,r)}function qS(t){return Pt(t).signOut()}const HS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(HS,"1"),this.storage.removeItem(HS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=1e3,I5=10;class vD extends yD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);UB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,I5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},T5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vD.type="LOCAL";const wD=vD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D extends yD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_D.type="SESSION";const S5=_D;new fh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new fh(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new fh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new fh(5e3,15e3);var KS="@firebase/auth",GS="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x5(t){Ys(new Es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ft(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fD(t)},c=new qB(r,s,i,l);return e5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new Es("auth-internal",e=>{const n=Kc(e.getProvider("auth").getImmediate());return(r=>new b5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(KS,GS,A5(t)),Ur(KS,GS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=5*60;W6("authIdTokenMaxAge");function P5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}HB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=N0("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",P5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x5("Browser");var C5="firebase",D5="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(C5,D5,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=new Map,N5={activated:!1,tokenObservers:[]},O5={initialized:!1,enabled:!1};function Ts(t){return k5.get(t)||{...N5}}function ED(){return O5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="https://content-firebaseappcheck.googleapis.com/v1";const V5="exchangeDebugToken",QS={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},rG=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new gw,this.pending.promise.catch(n=>{}),await F5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new gw,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function F5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},co=new Hc("appCheck","AppCheck",U5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(!Ts(t).activated)throw co.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw co.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw co.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw co.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw co.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function SD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${L5}/projects/${n}/apps/${r}:${V5}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="firebase-app-check-database",$5=1,Sw="firebase-app-check-store";let lf=null;function B5(){return lf||(lf=new Promise((t,e)=>{try{const n=indexedDB.open(j5,$5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(co.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Sw,{keyPath:"compositeKey"})}}}catch(n){e(co.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),lf)}function z5(t,e){return W5(q5(t),e)}async function W5(t,e){const r=(await B5()).transaction(Sw,"readwrite"),i=r.objectStore(Sw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(co.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function q5(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Xm("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t,e){return D0()?z5(t,e).catch(n=>{Fu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return ED().enabled}async function AD(){const t=ED();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5={error:"UNKNOWN_ERROR"};function K5(t){return P0.encodeString(JSON.stringify(t),!1)}async function bw(t,e=!1,n=!1){const r=t.app;TD(r);const s=Ts(r);let i=s.token,o;if(i&&!Uu(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(Uu(c)?i=c:await ky(r,void 0))}if(!e&&i&&Uu(i))return{token:i.token};let a=!1;if(bD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=ID(SD(r,await AD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await ky(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Fu.warn(c.message):n&&Fu.error(c),Ny(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Ts(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Fu.warn(c.message):n&&Fu.error(c),o=c}let l;return i?o?Uu(i)?l={token:i.token,internalError:o}:l=Ny(o):(l={token:i.token},s.token=i,await ky(r,i)):l=Ny(o),a&&J5(r,l),l}async function G5(t){const e=t.app;TD(e);const{provider:n}=Ts(e);if(bD()){const r=await AD(),{token:s}=await ID(SD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function Q5(t,e,n,r){const{app:s}=t,i=Ts(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Uu(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),YS(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>YS(t))}function xD(t,e){const n=Ts(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function YS(t){const{app:e}=t,n=Ts(e);let r=n.tokenRefresher;r||(r=Y5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Y5(t){const{app:e}=t;return new M5(async()=>{const n=Ts(e);let r;if(n.token?r=await bw(t,!0):r=await bw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ts(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},QS.RETRIAL_MIN_WAIT,QS.RETRIAL_MAX_WAIT)}function J5(t,e){const n=Ts(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Uu(t){return t.expireTimeMillis-Date.now()>0}function Ny(t){return{token:K5(H5),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ts(this.app);for(const n of e)xD(this.app,n.next);return Promise.resolve()}}function Z5(t,e){return new X5(t,e)}function e9(t){return{getToken:e=>bw(t,e),getLimitedUseToken:()=>G5(t),addTokenListener:e=>Q5(t,"INTERNAL",e),removeTokenListener:e=>xD(t.app,e)}}const t9="@firebase/app-check",n9="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="app-check",JS="app-check-internal";function s9(){Ys(new Es(r9,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Z5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(JS).initialize()})),Ys(new Es(JS,t=>{const e=t.getProvider("app-check").getImmediate();return e9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ur(t9,n9)}s9();var XS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bo,RD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,A){function b(){}b.prototype=A.prototype,x.F=A.prototype,x.prototype=new b,x.prototype.constructor=x,x.D=function(P,D,O){for(var C=Array(arguments.length-2),$=2;$<arguments.length;$++)C[$-2]=arguments[$];return A.prototype[D].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,A,b){b||(b=0);const P=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)P[D]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(D=0;D<16;++D)P[D]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=x.g[0],b=x.g[1],D=x.g[2];let O=x.g[3],C;C=A+(O^b&(D^O))+P[0]+3614090360&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[1]+3905402710&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[2]+606105819&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[3]+3250441966&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[4]+4118548399&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[5]+1200080426&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[6]+2821735955&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[7]+4249261313&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[8]+1770035416&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[9]+2336552879&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[10]+4294925233&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[11]+2304563134&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(O^b&(D^O))+P[12]+1804603682&4294967295,A=b+(C<<7&4294967295|C>>>25),C=O+(D^A&(b^D))+P[13]+4254626195&4294967295,O=A+(C<<12&4294967295|C>>>20),C=D+(b^O&(A^b))+P[14]+2792965006&4294967295,D=O+(C<<17&4294967295|C>>>15),C=b+(A^D&(O^A))+P[15]+1236535329&4294967295,b=D+(C<<22&4294967295|C>>>10),C=A+(D^O&(b^D))+P[1]+4129170786&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[6]+3225465664&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[11]+643717713&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[0]+3921069994&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[5]+3593408605&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[10]+38016083&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[15]+3634488961&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[4]+3889429448&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[9]+568446438&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[14]+3275163606&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[3]+4107603335&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[8]+1163531501&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(D^O&(b^D))+P[13]+2850285829&4294967295,A=b+(C<<5&4294967295|C>>>27),C=O+(b^D&(A^b))+P[2]+4243563512&4294967295,O=A+(C<<9&4294967295|C>>>23),C=D+(A^b&(O^A))+P[7]+1735328473&4294967295,D=O+(C<<14&4294967295|C>>>18),C=b+(O^A&(D^O))+P[12]+2368359562&4294967295,b=D+(C<<20&4294967295|C>>>12),C=A+(b^D^O)+P[5]+4294588738&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[8]+2272392833&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[11]+1839030562&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[14]+4259657740&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[1]+2763975236&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[4]+1272893353&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[7]+4139469664&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[10]+3200236656&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[13]+681279174&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[0]+3936430074&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[3]+3572445317&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[6]+76029189&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(b^D^O)+P[9]+3654602809&4294967295,A=b+(C<<4&4294967295|C>>>28),C=O+(A^b^D)+P[12]+3873151461&4294967295,O=A+(C<<11&4294967295|C>>>21),C=D+(O^A^b)+P[15]+530742520&4294967295,D=O+(C<<16&4294967295|C>>>16),C=b+(D^O^A)+P[2]+3299628645&4294967295,b=D+(C<<23&4294967295|C>>>9),C=A+(D^(b|~O))+P[0]+4096336452&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[7]+1126891415&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[14]+2878612391&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[5]+4237533241&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[12]+1700485571&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[3]+2399980690&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[10]+4293915773&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[1]+2240044497&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[8]+1873313359&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[15]+4264355552&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[6]+2734768916&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[13]+1309151649&4294967295,b=D+(C<<21&4294967295|C>>>11),C=A+(D^(b|~O))+P[4]+4149444226&4294967295,A=b+(C<<6&4294967295|C>>>26),C=O+(b^(A|~D))+P[11]+3174756917&4294967295,O=A+(C<<10&4294967295|C>>>22),C=D+(A^(O|~b))+P[2]+718787259&4294967295,D=O+(C<<15&4294967295|C>>>17),C=b+(O^(D|~A))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.v=function(x,A){A===void 0&&(A=x.length);const b=A-this.blockSize,P=this.C;let D=this.h,O=0;for(;O<A;){if(D==0)for(;O<=b;)s(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<A;)if(P[D++]=x.charCodeAt(O++),D==this.blockSize){s(this,P),D=0;break}}else for(;O<A;)if(P[D++]=x[O++],D==this.blockSize){s(this,P),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;A=this.o*8;for(var b=x.length-8;b<x.length;++b)x[b]=A&255,A/=256;for(this.v(x),x=Array(16),A=0,b=0;b<4;++b)for(let P=0;P<32;P+=8)x[A++]=this.g[b]>>>P&255;return x};function i(x,A){var b=a;return Object.prototype.hasOwnProperty.call(b,x)?b[x]:b[x]=A(x)}function o(x,A){this.h=A;const b=[];let P=!0;for(let D=x.length-1;D>=0;D--){const O=x[D]|0;P&&O==A||(b[D]=O,P=!1)}this.g=b}var a={};function l(x){return-128<=x&&x<128?i(x,function(A){return new o([A|0],A<0?-1:0)}):new o([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(x<0)return v(c(-x));const A=[];let b=1;for(let P=0;x>=b;P++)A[P]=x/b|0,b*=4294967296;return new o(A,0)}function d(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return v(d(x.substring(1),A));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(A,8));let P=h;for(let O=0;O<x.length;O+=8){var D=Math.min(8,x.length-O);const C=parseInt(x.substring(O,O+D),A);D<8?(D=c(Math.pow(A,D)),P=P.j(D).add(c(C))):(P=P.j(b),P=P.add(c(C)))}return P}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-v(this).m();let x=0,A=1;for(let b=0;b<this.g.length;b++){const P=this.i(b);x+=(P>=0?P:4294967296+P)*A,A*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(w(this))return"0";if(g(this))return"-"+v(this).toString(x);const A=c(Math.pow(x,6));var b=this;let P="";for(;;){const D=R(b,A).g;b=E(b,D.j(A));let O=((b.g.length>0?b.g[0]:b.h)>>>0).toString(x);if(b=D,w(b))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function w(x){if(x.h!=0)return!1;for(let A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function g(x){return x.h==-1}t.l=function(x){return x=E(this,x),g(x)?-1:w(x)?0:1};function v(x){const A=x.g.length,b=[];for(let P=0;P<A;P++)b[P]=~x.g[P];return new o(b,~x.h).add(f)}t.abs=function(){return g(this)?v(this):this},t.add=function(x){const A=Math.max(this.g.length,x.g.length),b=[];let P=0;for(let D=0;D<=A;D++){let O=P+(this.i(D)&65535)+(x.i(D)&65535),C=(O>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);P=C>>>16,O&=65535,C&=65535,b[D]=C<<16|O}return new o(b,b[b.length-1]&-2147483648?-1:0)};function E(x,A){return x.add(v(A))}t.j=function(x){if(w(this)||w(x))return h;if(g(this))return g(x)?v(this).j(v(x)):v(v(this).j(x));if(g(x))return v(this.j(v(x)));if(this.l(p)<0&&x.l(p)<0)return c(this.m()*x.m());const A=this.g.length+x.g.length,b=[];for(var P=0;P<2*A;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<x.g.length;D++){const O=this.i(P)>>>16,C=this.i(P)&65535,$=x.i(D)>>>16,re=x.i(D)&65535;b[2*P+2*D]+=C*re,y(b,2*P+2*D),b[2*P+2*D+1]+=O*re,y(b,2*P+2*D+1),b[2*P+2*D+1]+=C*$,y(b,2*P+2*D+1),b[2*P+2*D+2]+=O*$,y(b,2*P+2*D+2)}for(x=0;x<A;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=A;x<2*A;x++)b[x]=0;return new o(b,0)};function y(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function _(x,A){this.g=x,this.h=A}function R(x,A){if(w(A))throw Error("division by zero");if(w(x))return new _(h,h);if(g(x))return A=R(v(x),A),new _(v(A.g),v(A.h));if(g(A))return A=R(x,v(A)),new _(v(A.g),A.h);if(x.g.length>30){if(g(x)||g(A))throw Error("slowDivide_ only works with positive integers.");for(var b=f,P=A;P.l(x)<=0;)b=k(b),P=k(P);var D=L(b,1),O=L(P,1);for(P=L(P,2),b=L(b,2);!w(P);){var C=O.add(P);C.l(x)<=0&&(D=D.add(b),O=C),P=L(P,1),b=L(b,1)}return A=E(x,D.j(A)),new _(D,A)}for(D=h;x.l(A)>=0;){for(b=Math.max(1,Math.floor(x.m()/A.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=c(b),C=O.j(A);g(C)||C.l(x)>0;)b-=P,O=c(b),C=O.j(A);w(O)&&(O=f),D=D.add(O),x=E(x,C)}return new _(D,x)}t.B=function(x){return R(this,x).h},t.and=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)&x.i(P);return new o(b,this.h&x.h)},t.or=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)|x.i(P);return new o(b,this.h|x.h)},t.xor=function(x){const A=Math.max(this.g.length,x.g.length),b=[];for(let P=0;P<A;P++)b[P]=this.i(P)^x.i(P);return new o(b,this.h^x.h)};function k(x){const A=x.g.length+1,b=[];for(let P=0;P<A;P++)b[P]=x.i(P)<<1|x.i(P-1)>>>31;return new o(b,x.h)}function L(x,A){const b=A>>5;A%=32;const P=x.g.length-b,D=[];for(let O=0;O<P;O++)D[O]=A>0?x.i(O+b)>>>A|x.i(O+b+1)<<32-A:x.i(O+b);return new o(D,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,bo=o}).apply(typeof XS<"u"?XS:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PD,ju,CD,Bf,Aw,DD,kD,ND;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var m=0;m<u.length;++m){var I=u[m];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var I=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var F=u[N];if(!(F in I))break e;I=I[F]}u=u[u.length-1],N=I[u],m=m(N),m!=N&&m!=null&&e(I,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var I=[],N;for(N in m)Object.prototype.hasOwnProperty.call(m,N)&&I.push([N,m[N]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,I){return u.call.apply(u.bind,arguments)}function c(u,m,I){return c=l,c.apply(null,arguments)}function d(u,m){var I=Array.prototype.slice.call(arguments,1);return function(){var N=I.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,m){function I(){}I.prototype=m.prototype,u.Z=m.prototype,u.prototype=new I,u.prototype.constructor=u,u.Ob=function(N,F,B){for(var le=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)le[ot-2]=arguments[ot];return m.prototype[F].apply(N,le)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const I=Array(m);for(let N=0;N<m;N++)I[N]=u[N];return I}return[]}function w(u,m){for(let N=1;N<arguments.length;N++){const F=arguments[N];var I=typeof F;if(I=I!="object"?I:F?Array.isArray(F)?"array":I:"null",I=="array"||I=="object"&&typeof F.length=="number"){I=u.length||0;const B=F.length||0;u.length=I+B;for(let le=0;le<B;le++)u[I+le]=F[le]}else u.push(F)}}class g{constructor(m,I){this.i=m,this.j=I,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(u){o.setTimeout(()=>{throw u},0)}function E(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,I){const N=_.get();N.set(m,I),this.h?this.h.next=N:this.g=N,this.h=N}}var _=new g(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(m,I){this.h=m,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let k,L=!1,x=new y,A=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(b)}};function b(){for(var u;u=E();){try{u.h.call(u.g)}catch(I){v(I)}var m=_;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}L=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const I=()=>{};o.addEventListener("test",I,m),o.removeEventListener("test",I,m)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function $(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}h($,D),$.prototype.init=function(u,m){const I=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(I=="mouseover"?m=u.fromElement:I=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),se=0;function ue(u,m,I,N,F){this.listener=u,this.proxy=null,this.src=m,this.type=I,this.capture=!!N,this.ha=F,this.key=++se,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function V(u,m,I){for(const N in u)m.call(I,u[N],N,u)}function ee(u,m){for(const I in u)m.call(void 0,u[I],I,u)}function oe(u){const m={};for(const I in u)m[I]=u[I];return m}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(u,m){let I,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(I in N)u[I]=N[I];for(let B=0;B<G.length;B++)I=G[B],Object.prototype.hasOwnProperty.call(N,I)&&(u[I]=N[I])}}function Ie(u){this.src=u,this.g={},this.h=0}Ie.prototype.add=function(u,m,I,N,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const le=Ze(u,m,N,F);return le>-1?(m=u[le],I||(m.fa=!1)):(m=new ue(m,this.src,B,!!N,F),m.fa=I,u.push(m)),m};function Oe(u,m){const I=m.type;if(I in u.g){var N=u.g[I],F=Array.prototype.indexOf.call(N,m,void 0),B;(B=F>=0)&&Array.prototype.splice.call(N,F,1),B&&(U(m),u.g[I].length==0&&(delete u.g[I],u.h--))}}function Ze(u,m,I,N){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==m&&B.capture==!!I&&B.ha==N)return F}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Qt={};function rt(u,m,I,N,F){if(Array.isArray(m)){for(let B=0;B<m.length;B++)rt(u,m[B],I,N,F);return null}return I=Ue(I),u&&u[re]?u.J(m,I,a(N)?!!N.capture:!1,F):Be(u,m,I,!1,N,F)}function Be(u,m,I,N,F,B){if(!m)throw Error("Invalid event type");const le=a(F)?!!F.capture:!!F;let ot=In(u);if(ot||(u[be]=ot=new Ie(u)),I=ot.add(m,I,N,le,B),I.proxy)return I;if(N=qe(),I.proxy=N,N.src=u,N.listener=I,u.addEventListener)O||(F=le),F===void 0&&(F=!1),u.addEventListener(m.toString(),N,F);else if(u.attachEvent)u.attachEvent(Vn(m.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return I}function qe(){function u(I){return m.call(u.src,u.listener,I)}const m=qr;return u}function Ft(u,m,I,N,F){if(Array.isArray(m))for(var B=0;B<m.length;B++)Ft(u,m[B],I,N,F);else N=a(N)?!!N.capture:!!N,I=Ue(I),u&&u[re]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],I=Ze(m,I,N,F),I>-1&&(U(m[I]),Array.prototype.splice.call(m,I,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=In(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ze(m,I,N,F)),(I=u>-1?m[u]:null)&&nn(I))}function nn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[re])Oe(m.i,u);else{var I=u.type,N=u.proxy;m.removeEventListener?m.removeEventListener(I,N,u.capture):m.detachEvent?m.detachEvent(Vn(I),N):m.addListener&&m.removeListener&&m.removeListener(N),(I=In(m))?(Oe(I,u),I.h==0&&(I.src=null,m[be]=null)):U(u)}}}function Vn(u){return u in Qt?Qt[u]:Qt[u]="on"+u}function qr(u,m){if(u.da)u=!0;else{m=new $(m,this);const I=u.listener,N=u.ha||u.src;u.fa&&nn(u),u=I.call(N,m)}return u}function In(u){return u=u[be],u instanceof Ie?u:null}var Wn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ue(u){return typeof u=="function"?u:(u[Wn]||(u[Wn]=function(m){return u.handleEvent(m)}),u[Wn])}function _t(){P.call(this),this.i=new Ie(this),this.M=this,this.G=null}h(_t,P),_t.prototype[re]=!0,_t.prototype.removeEventListener=function(u,m,I,N){Ft(this,u,m,I,N)};function ut(u,m){var I,N=u.G;if(N)for(I=[];N;N=N.G)I.push(N);if(u=u.M,N=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var F=m;m=new D(N,u),Ne(m,F)}F=!0;let B,le;if(I)for(le=I.length-1;le>=0;le--)B=m.g=I[le],F=Ar(B,N,!0,m)&&F;if(B=m.g=u,F=Ar(B,N,!0,m)&&F,F=Ar(B,N,!1,m)&&F,I)for(le=0;le<I.length;le++)B=m.g=I[le],F=Ar(B,N,!1,m)&&F}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const I=u.g[m];for(let N=0;N<I.length;N++)U(I[N]);delete u.g[m],u.h--}}this.G=null},_t.prototype.J=function(u,m,I,N){return this.i.add(String(u),m,!1,I,N)},_t.prototype.K=function(u,m,I,N){return this.i.add(String(u),m,!0,I,N)};function Ar(u,m,I,N){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let B=0;B<m.length;++B){const le=m[B];if(le&&!le.da&&le.capture==I){const ot=le.listener,bn=le.ha||le.src;le.fa&&Oe(u.i,le),F=ot.call(bn,N)!==!1&&F}}return F&&!N.defaultPrevented}function Qo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(u,m||0)}function ir(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,ir(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class iu extends P{constructor(m,I){super(),this.m=m,this.l=I,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ir(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(u){P.call(this),this.h=u,this.g={}}h(As,P);var Pn=[];function Y(u){V(u.g,function(m,I){this.g.hasOwnProperty(I)&&nn(m)},u),u.g={}}As.prototype.N=function(){As.Z.N.call(this),Y(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var K=o.JSON.stringify,Z=o.JSON.parse,W=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function X(){}function ie(){}var fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ye(){D.call(this,"d")}h(ye,D);function he(){D.call(this,"c")}h(he,D);var Ae={},xe=null;function Qe(){return xe=xe||new _t}Ae.Ia="serverreachability";function pe(u){D.call(this,Ae.Ia,u)}h(pe,D);function de(u){const m=Qe();ut(m,new pe(m))}Ae.STAT_EVENT="statevent";function ze(u,m){D.call(this,Ae.STAT_EVENT,u),this.stat=m}h(ze,D);function me(u){const m=Qe();ut(m,new ze(m,u))}Ae.Ja="timingevent";function et(u,m){D.call(this,Ae.Ja,u),this.size=m}h(et,D);function St(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},m)}function Te(){this.g=!0}Te.prototype.ua=function(){this.g=!1};function We(u,m,I,N,F,B){u.info(function(){if(u.g)if(B){var le="",ot=B.split("&");for(let Dt=0;Dt<ot.length;Dt++){var bn=ot[Dt].split("=");if(bn.length>1){const Cn=bn[0];bn=bn[1];const Ps=Cn.split("_");le=Ps.length>=2&&Ps[1]=="type"?le+(Cn+"="+bn+"&"):le+(Cn+"=redacted&")}}}else le=null;else le=B;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+m+`
`+I+`
`+le})}function De(u,m,I,N,F,B,le){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+m+`
`+I+`
`+B+" "+le})}function tt(u,m,I,N){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ae(u,I)+(N?" "+N:"")})}function gt(u,m){u.info(function(){return"TIMEOUT: "+m})}Te.prototype.info=function(){};function ae(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var I=B[u];if(!(I.length<2)){var N=I[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let le=1;le<N.length;le++)N[le]=""}}}}return K(B)}catch{return m}}var Ye={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ve={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Me;function st(){}h(st,X),st.prototype.g=function(){return new XMLHttpRequest},Me=new st;function Et(u){return encodeURIComponent(String(u))}function vt(u){var m=1;u=u.split(":");const I=[];for(;m>0&&u.length;)I.push(u.shift()),m--;return u.length&&I.push(u.join(":")),I}function Xe(u,m,I,N){this.j=u,this.i=m,this.l=I,this.S=N||1,this.V=new As(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wn}function wn(){this.i=null,this.g="",this.h=!1}var Je={},it={};function bt(u,m,I){u.M=1,u.A=Ph(Rs(m)),u.u=I,u.R=!0,Le(u,null)}function Le(u,m){u.F=Date.now(),Ut(u),u.B=Rs(u.A);var I=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),ZE(I.i,"t",N),u.C=0,I=u.j.L,u.h=new wn,u.g=yT(u.j,I?m:null,!u.u),u.P>0&&(u.O=new iu(c(u.Y,u,u.g),u.P)),m=u.V,I=u.g,N=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Pn[0]=F.toString()),F=Pn);for(let B=0;B<F.length;B++){const le=rt(I,F[B],N||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.J?oe(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),de(),We(u.i,u.v,u.B,u.l,u.S,u.u)}Xe.prototype.ba=function(u){u=u.target;const m=this.O;m&&Mi(u)==3?m.j():this.Y(u)},Xe.prototype.Y=function(u){try{if(u==this.g)e:{const ot=Mi(this.g),bn=this.g.ya(),Dt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||oT(this.g)))){this.K||ot!=4||bn==7||(bn==8||Dt<=0?de(3):de(2)),qn(this);var m=this.g.ca();this.X=m;var I=Ee(this);if(this.o=m==200,De(this.i,this.v,this.B,this.l,this.S,ot,m),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(N)){var B=N;break t}}B=null}if(u=B)tt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hr(this,u);else{this.o=!1,this.m=3,me(12),Sn(this),Hn(this);break e}}if(this.R){u=!0;let Cn;for(;!this.K&&this.C<I.length;)if(Cn=rn(this,I),Cn==it){ot==4&&(this.m=4,me(14),u=!1),tt(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==Je){this.m=4,me(15),tt(this.i,this.l,I,"[Invalid Chunk]"),u=!1;break}else tt(this.i,this.l,Cn,null),Hr(this,Cn);if(Ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||I.length!=0||this.h.h||(this.m=1,me(16),u=!1),this.o=this.o&&u,!u)tt(this.i,this.l,I,"[Invalid Chunked Response]"),Sn(this),Hn(this);else if(I.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Ug(le),le.P=!0,me(11))}}else tt(this.i,this.l,I,null),Hr(this,I);ot==4&&Sn(this),this.o&&!this.K&&(ot==4?fT(this.j,this):(this.o=!1,Ut(this)))}else B2(this.g),m==400&&I.indexOf("Unknown SID")>0?(this.m=3,me(12)):(this.m=0,me(13)),Sn(this),Hn(this)}}}catch{}finally{}};function Ee(u){if(!Ct(u))return u.g.la();const m=oT(u.g);if(m==="")return"";let I="";const N=m.length,F=Mi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Sn(u),Hn(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<N;B++)u.h.h=!0,I+=u.h.i.decode(m[B],{stream:!(F&&B==N-1)});return m.length=0,u.h.g+=I,u.C=0,u.h.g}function Ct(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function rn(u,m){var I=u.C,N=m.indexOf(`
`,I);return N==-1?it:(I=Number(m.substring(I,N)),isNaN(I)?Je:(N+=1,N+I>m.length?it:(m=m.slice(N,N+I),u.C=N+I,m)))}Xe.prototype.cancel=function(){this.K=!0,Sn(this)};function Ut(u){u.T=Date.now()+u.H,dn(u,u.H)}function dn(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=St(c(u.aa,u),m)}function qn(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Xe.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(gt(this.i,this.B),this.M!=2&&(de(),me(17)),Sn(this),this.m=2,Hn(this)):dn(this,this.T-u)};function Hn(u){u.j.I==0||u.K||fT(u.j,u)}function Sn(u){qn(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Y(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Hr(u,m){try{var I=u.j;if(I.I!=0&&(I.g==u||al(I.h,u))){if(!u.L&&al(I.h,u)&&I.I==3){try{var N=I.Ba.g.parse(m)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<u.F)Oh(I),kh(I);else break e;Fg(I),me(18)}}else I.xa=F[1],0<I.xa-I.K&&F[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=St(c(I.Va,I),6e3));ol(I.h)<=1&&I.ta&&(I.ta=void 0)}else Xo(I,11)}else if((u.L||I.g==u)&&Oh(I),!C(m))for(F=I.Ba.g.parse(m),m=0;m<F.length;m++){let Dt=F[m];const Cn=Dt[0];if(!(Cn<=I.K))if(I.K=Cn,Dt=Dt[1],I.I==2)if(Dt[0]=="c"){I.M=Dt[1],I.ba=Dt[2];const Ps=Dt[3];Ps!=null&&(I.ka=Ps,I.j.info("VER="+I.ka));const Zo=Dt[4];Zo!=null&&(I.za=Zo,I.j.info("SVER="+I.za));const Fi=Dt[5];Fi!=null&&typeof Fi=="number"&&Fi>0&&(N=1.5*Fi,I.O=N,I.j.info("backChannelRequestTimeoutMs_="+N)),N=I;const Ui=u.g;if(Ui){const Vh=Ui.g?Ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vh){var B=N.h;B.g||Vh.indexOf("spdy")==-1&&Vh.indexOf("quic")==-1&&Vh.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Yo(B,B.h),B.h=null))}if(N.G){const jg=Ui.g?Ui.g.getResponseHeader("X-HTTP-Session-Id"):null;jg&&(N.wa=jg,jt(N.J,N.G,jg))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-u.F,I.j.info("Handshake RTT: "+I.T+"ms")),N=I;var le=u;if(N.na=gT(N,N.L?N.ba:null,N.W),le.L){ll(N.h,le);var ot=le,bn=N.O;bn&&(ot.H=bn),ot.D&&(qn(ot),Ut(ot)),N.g=le}else dT(N);I.i.length>0&&Nh(I)}else Dt[0]!="stop"&&Dt[0]!="close"||Xo(I,7);else I.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Xo(I,7):Mg(I):Dt[0]!="noop"&&I.l&&I.l.qa(Dt),I.A=0)}}de(4)}catch{}}var Kr=class{constructor(u,m){this.g=u,this.map=m}};function Gr(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ol(u){return u.h?1:u.g?u.g.size:0}function al(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Yo(u,m){u.g?u.g.add(m):u.h=m}function ll(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Gr.prototype.cancel=function(){if(this.i=dt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function dt(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const I of u.g.values())m=m.concat(I.G);return m}return p(u.i)}var rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C2(u,m){if(u){u=u.split("&");for(let I=0;I<u.length;I++){const N=u[I].indexOf("=");let F,B=null;N>=0?(F=u[I].substring(0,N),B=u[I].substring(N+1)):F=u[I],m(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Li(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Li?(this.l=u.l,ou(this,u.j),this.o=u.o,this.g=u.g,au(this,u.u),this.h=u.h,Og(this,eT(u.i)),this.m=u.m):u&&(m=String(u).match(rs))?(this.l=!1,ou(this,m[1]||"",!0),this.o=lu(m[2]||""),this.g=lu(m[3]||"",!0),au(this,m[4]),this.h=lu(m[5]||"",!0),Og(this,m[6]||"",!0),this.m=lu(m[7]||"")):(this.l=!1,this.i=new uu(null,this.l))}Li.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(cu(m,QE,!0),":");var I=this.g;return(I||m=="file")&&(u.push("//"),(m=this.o)&&u.push(cu(m,QE,!0),"@"),u.push(Et(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&u.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&u.push("/"),u.push(cu(I,I.charAt(0)=="/"?N2:k2,!0))),(I=this.i.toString())&&u.push("?",I),(I=this.m)&&u.push("#",cu(I,L2)),u.join("")},Li.prototype.resolve=function(u){const m=Rs(this);let I=!!u.j;I?ou(m,u.j):I=!!u.o,I?m.o=u.o:I=!!u.g,I?m.g=u.g:I=u.u!=null;var N=u.h;if(I)au(m,u.u);else if(I=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=m.h.lastIndexOf("/");F!=-1&&(N=m.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let le=0;le<F.length;){const ot=F[le++];ot=="."?N&&le==F.length&&B.push(""):ot==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),N&&le==F.length&&B.push("")):(B.push(ot),N=!0)}N=B.join("/")}else N=F}return I?m.h=N:I=u.i.toString()!=="",I?Og(m,eT(u.i)):I=!!u.m,I&&(m.m=u.m),m};function Rs(u){return new Li(u)}function ou(u,m,I){u.j=I?lu(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function au(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Og(u,m,I){m instanceof uu?(u.i=m,V2(u.i,u.l)):(I||(m=cu(m,O2)),u.i=new uu(m,u.l))}function jt(u,m,I){u.i.set(m,I)}function Ph(u){return jt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function lu(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cu(u,m,I){return typeof u=="string"?(u=encodeURI(u).replace(m,D2),I&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function D2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var QE=/[#\/\?@]/g,k2=/[#\?:]/g,N2=/[#\?]/g,O2=/[#\?@]/g,L2=/#/g;function uu(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Jo(u){u.g||(u.g=new Map,u.h=0,u.i&&C2(u.i,function(m,I){u.add(decodeURIComponent(m.replace(/\+/g," ")),I)}))}t=uu.prototype,t.add=function(u,m){Jo(this),this.i=null,u=cl(this,u);let I=this.g.get(u);return I||this.g.set(u,I=[]),I.push(m),this.h+=1,this};function YE(u,m){Jo(u),m=cl(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function JE(u,m){return Jo(u),m=cl(u,m),u.g.has(m)}t.forEach=function(u,m){Jo(this),this.g.forEach(function(I,N){I.forEach(function(F){u.call(m,F,N,this)},this)},this)};function XE(u,m){Jo(u);let I=[];if(typeof m=="string")JE(u,m)&&(I=I.concat(u.g.get(cl(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)I=I.concat(u[m]);return I}t.set=function(u,m){return Jo(this),this.i=null,u=cl(this,u),JE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=XE(this,u),u.length>0?String(u[0]):m):m};function ZE(u,m,I){YE(u,m),I.length>0&&(u.i=null,u.g.set(cl(u,m),p(I)),u.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let N=0;N<m.length;N++){var I=m[N];const F=Et(I);I=XE(this,I);for(let B=0;B<I.length;B++){let le=F;I[B]!==""&&(le+="="+Et(I[B])),u.push(le)}}return this.i=u.join("&")};function eT(u){const m=new uu;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function cl(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function V2(u,m){m&&!u.j&&(Jo(u),u.i=null,u.g.forEach(function(I,N){const F=N.toLowerCase();N!=F&&(YE(this,N),ZE(this,F,I))},u)),u.j=m}function M2(u,m){const I=new Te;if(o.Image){const N=new Image;N.onload=d(Vi,I,"TestLoadImage: loaded",!0,m,N),N.onerror=d(Vi,I,"TestLoadImage: error",!1,m,N),N.onabort=d(Vi,I,"TestLoadImage: abort",!1,m,N),N.ontimeout=d(Vi,I,"TestLoadImage: timeout",!1,m,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else m(!1)}function F2(u,m){const I=new Te,N=new AbortController,F=setTimeout(()=>{N.abort(),Vi(I,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:N.signal}).then(B=>{clearTimeout(F),B.ok?Vi(I,"TestPingServer: ok",!0,m):Vi(I,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Vi(I,"TestPingServer: error",!1,m)})}function Vi(u,m,I,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(I)}catch{}}function U2(){this.g=new W}function Lg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Lg,X),Lg.prototype.g=function(){return new Ch(this.i,this.h)};function Ch(u,m){_t.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Ch,_t),t=Ch.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,hu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,du(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hu(this)),this.g&&(this.readyState=3,hu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function tT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?du(this):hu(this),this.readyState==3&&tT(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,du(this))},t.Na=function(u){this.g&&(this.response=u,du(this))},t.ga=function(){this.g&&du(this)};function du(u){u.readyState=4,u.l=null,u.j=null,u.B=null,hu(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var I=m.next();!I.done;)I=I.value,u.push(I[0]+": "+I[1]),I=m.next();return u.join(`\r
`)};function hu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ch.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function nT(u){let m="";return V(u,function(I,N){m+=N,m+=":",m+=I,m+=`\r
`}),m}function Vg(u,m,I){e:{for(N in I){var N=!1;break e}N=!0}N||(I=nT(I),typeof u=="string"?I!=null&&Et(I):jt(u,m,I))}function sn(u){_t.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(sn,_t);var j2=/^https?$/i,$2=["POST","PUT"];t=sn.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,I,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Me.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){rT(this,B);return}if(u=I||"",I=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)I.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const B of N.keys())I.set(B,N.get(B));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(I.keys()).find(B=>B.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call($2,m,void 0)>=0)||N||F||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,le]of I)this.g.setRequestHeader(B,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){rT(this,B)}};function rT(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,sT(u),Dh(u)}function sT(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ut(this,"complete"),ut(this,"abort"),Dh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dh(this,!0)),sn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?iT(this):this.Xa())},t.Xa=function(){iT(this)};function iT(u){if(u.h&&typeof i<"u"){if(u.v&&Mi(u)==4)setTimeout(u.Ca.bind(u),0);else if(ut(u,"readystatechange"),Mi(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var I;if(!(I=m)){var N;if(N=B===0){let le=String(u.D).match(rs)[1]||null;!le&&o.self&&o.self.location&&(le=o.self.location.protocol.slice(0,-1)),N=!j2.test(le?le.toLowerCase():"")}I=N}if(I)ut(u,"complete"),ut(u,"success");else{u.o=6;try{var F=Mi(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",sT(u)}}finally{Dh(u)}}}}function Dh(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const I=u.g;u.g=null,m||ut(u,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Mi(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Mi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Z(m)}};function oT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function B2(u){const m={};u=(u.g&&Mi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(C(u[N]))continue;var I=vt(u[N]);const F=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const B=m[F]||[];m[F]=B,B.push(I)}ee(m,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fu(u,m,I){return I&&I.internalChannelParams&&I.internalChannelParams[u]||m}function aT(u){this.za=0,this.i=[],this.j=new Te,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fu("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fu("baseRetryDelayMs",5e3,u),this.Za=fu("retryDelaySeedMs",1e4,u),this.Ta=fu("forwardChannelMaxRetries",2,u),this.va=fu("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Gr(u&&u.concurrentRequestLimit),this.Ba=new U2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=aT.prototype,t.ka=8,t.I=1,t.connect=function(u,m,I,N){me(0),this.W=u,this.H=m||{},I&&N!==void 0&&(this.H.OSID=I,this.H.OAID=N),this.F=this.X,this.J=gT(this,null,this.W),Nh(this)};function Mg(u){if(lT(u),u.I==3){var m=u.V++,I=Rs(u.J);if(jt(I,"SID",u.M),jt(I,"RID",m),jt(I,"TYPE","terminate"),pu(u,I),m=new Xe(u,u.j,m),m.M=2,m.A=Ph(Rs(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=m.A,I=!0),I||(m.g=yT(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ut(m)}mT(u)}function kh(u){u.g&&(Ug(u),u.g.cancel(),u.g=null)}function lT(u){kh(u),u.v&&(o.clearTimeout(u.v),u.v=null),Oh(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Nh(u){if(!xs(u.h)&&!u.m){u.m=!0;var m=u.Ea;k||A(),L||(k(),L=!0),x.add(m,u),u.D=0}}function z2(u,m){return ol(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=St(c(u.Ea,u,m),pT(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Xe(this,this.j,u);let B=this.o;if(this.U&&(B?(B=oe(B),Ne(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var m=0,I=0;I<this.i.length;I++){t:{var N=this.i[I];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(m+=N,m>4096){m=I;break e}if(m===4096||I===this.i.length-1){m=I+1;break e}}m=1e3}else m=1e3;m=uT(this,F,m),I=Rs(this.J),jt(I,"RID",u),jt(I,"CVER",22),this.G&&jt(I,"X-HTTP-Session-Id",this.G),pu(this,I),B&&(this.R?m="headers="+Et(nT(B))+"&"+m:this.u&&Vg(I,this.u,B)),Yo(this.h,F),this.Ra&&jt(I,"TYPE","init"),this.S?(jt(I,"$req",m),jt(I,"SID","null"),F.U=!0,bt(F,I,null)):bt(F,I,m),this.I=2}}else this.I==3&&(u?cT(this,u):this.i.length==0||xs(this.h)||cT(this))};function cT(u,m){var I;m?I=m.l:I=u.V++;const N=Rs(u.J);jt(N,"SID",u.M),jt(N,"RID",I),jt(N,"AID",u.K),pu(u,N),u.u&&u.o&&Vg(N,u.u,u.o),I=new Xe(u,u.j,I,u.D+1),u.u===null&&(I.J=u.o),m&&(u.i=m.G.concat(u.i)),m=uT(u,I,1e3),I.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Yo(u.h,I),bt(I,N,m)}function pu(u,m){u.H&&V(u.H,function(I,N){jt(m,N,I)}),u.l&&V({},function(I,N){jt(m,N,I)})}function uT(u,m,I){I=Math.min(u.i.length,I);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var F=u.i;let ot=-1;for(;;){const bn=["count="+I];ot==-1?I>0?(ot=F[0].g,bn.push("ofs="+ot)):ot=0:bn.push("ofs="+ot);let Dt=!0;for(let Cn=0;Cn<I;Cn++){var B=F[Cn].g;const Ps=F[Cn].map;if(B-=ot,B<0)ot=Math.max(0,F[Cn].g-100),Dt=!1;else try{B="req"+B+"_"||"";try{var le=Ps instanceof Map?Ps:Object.entries(Ps);for(const[Zo,Fi]of le){let Ui=Fi;a(Fi)&&(Ui=K(Fi)),bn.push(B+Zo+"="+encodeURIComponent(Ui))}}catch(Zo){throw bn.push(B+"type="+encodeURIComponent("_badmap")),Zo}}catch{N&&N(Ps)}}if(Dt){le=bn.join("&");break e}}le=void 0}return u=u.i.splice(0,I),m.G=u,le}function dT(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;k||A(),L||(k(),L=!0),x.add(m,u),u.A=0}}function Fg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=St(c(u.Da,u),pT(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,hT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=St(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,me(10),kh(this),hT(this))};function Ug(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function hT(u){u.g=new Xe(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Rs(u.na);jt(m,"RID","rpc"),jt(m,"SID",u.M),jt(m,"AID",u.K),jt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&jt(m,"TO",u.ia),jt(m,"TYPE","xmlhttp"),pu(u,m),u.u&&u.o&&Vg(m,u.u,u.o),u.O&&(u.g.H=u.O);var I=u.g;u=u.ba,I.M=1,I.A=Ph(Rs(m)),I.u=null,I.R=!0,Le(I,u)}t.Va=function(){this.C!=null&&(this.C=null,kh(this),Fg(this),me(19))};function Oh(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function fT(u,m){var I=null;if(u.g==m){Oh(u),Ug(u),u.g=null;var N=2}else if(al(u.h,m))I=m.G,ll(u.h,m),N=1;else return;if(u.I!=0){if(m.o)if(N==1){I=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;N=Qe(),ut(N,new et(N,I)),Nh(u)}else dT(u);else if(F=m.m,F==3||F==0&&m.X>0||!(N==1&&z2(u,m)||N==2&&Fg(u)))switch(I&&I.length>0&&(m=u.h,m.i=m.i.concat(I)),F){case 1:Xo(u,5);break;case 4:Xo(u,10);break;case 3:Xo(u,6);break;default:Xo(u,2)}}}function pT(u,m){let I=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(I*=2),I*m}function Xo(u,m){if(u.j.info("Error code "+m),m==2){var I=c(u.bb,u),N=u.Ua;const F=!N;N=new Li(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ou(N,"https"),Ph(N),F?M2(N.toString(),I):F2(N.toString(),I)}else me(2);u.I=0,u.l&&u.l.pa(m),mT(u),lT(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function mT(u){if(u.I=0,u.ja=[],u.l){const m=dt(u.h);(m.length!=0||u.i.length!=0)&&(w(u.ja,m),w(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function gT(u,m,I){var N=I instanceof Li?Rs(I):new Li(I);if(N.g!="")m&&(N.g=m+"."+N.g),au(N,N.u);else{var F=o.location;N=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const B=new Li(null);N&&ou(B,N),m&&(B.g=m),F&&au(B,F),I&&(B.h=I),N=B}return I=u.G,m=u.wa,I&&m&&jt(N,I,m),jt(N,"VER",u.ka),pu(u,N),N}function yT(u,m,I){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new sn(new Lg({ab:I})):new sn(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vT(){}t=vT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Lh(){}Lh.prototype.g=function(u,m){return new xr(u,m)};function xr(u,m){_t.call(this),this.g=new aT(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ul(this)}h(xr,_t),xr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){Mg(this.g)},xr.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var I={};I.__data__=u,u=I}else this.v&&(I={},I.__data__=K(u),u=I);m.i.push(new Kr(m.Ya++,u)),m.I==3&&Nh(m)},xr.prototype.N=function(){this.g.l=null,delete this.j,Mg(this.g),delete this.g,xr.Z.N.call(this)};function wT(u){ye.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const I in m){u=I;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}h(wT,ye);function _T(){he.call(this),this.status=1}h(_T,he);function ul(u){this.g=u}h(ul,vT),ul.prototype.ra=function(){ut(this.g,"a")},ul.prototype.qa=function(u){ut(this.g,new wT(u))},ul.prototype.pa=function(u){ut(this.g,new _T)},ul.prototype.oa=function(){ut(this.g,"b")},Lh.prototype.createWebChannel=Lh.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,ND=function(){return new Lh},kD=function(){return Qe()},DD=Ae,Aw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ye.NO_ERROR=0,Ye.TIMEOUT=8,Ye.HTTP_ERROR=6,Bf=Ye,Ve.COMPLETE="complete",CD=Ve,ie.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",_t.prototype.listen=_t.prototype.J,ju=ie,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,PD=sn}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const ZS="@firebase/firestore",eb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new Xm("@firebase/firestore");function Tl(){return No.logLevel}function OD(t){No.setLogLevel(t)}function J(t,...e){if(No.logLevel<=ht.DEBUG){const n=e.map(F0);No.debug(`Firestore (${Qc}): ${t}`,...n)}}function mn(t,...e){if(No.logLevel<=ht.ERROR){const n=e.map(F0);No.error(`Firestore (${Qc}): ${t}`,...n)}}function Oo(t,...e){if(No.logLevel<=ht.WARN){const n=e.map(F0);No.warn(`Firestore (${Qc}): ${t}`,...n)}}function F0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,LD(t,r,n)}function LD(t,e,n){let r=`FIRESTORE (${Qc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mn(r),new Error(r)}function Ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||LD(e,s,r)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xn.UNAUTHENTICATED))}shutdown(){}}class o9{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new es;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new es,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new es)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new i9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class a9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new a9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new tb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=u9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ge(t,e){return t<e?-1:t>e?1:0}function xw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Oy(s)===Oy(i)?Ge(s,i):Oy(s)?1:-1}return Ge(t.length,e.length)}const d9=55296,h9=57343;function Oy(t){const e=t.charCodeAt(0);return e>=d9&&e<=h9}function vc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function MD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="__name__";class ks{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ks.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ge(e.length,n.length)}static compareSegments(e,n){const r=ks.isNumericId(e),s=ks.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ks.extractNumericId(e).compare(ks.extractNumericId(n)):xw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class It extends ks{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new It(n)}static emptyPath(){return new It([])}}const f9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends ks{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return f9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nb}static keyField(){return new Kt([nb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ne(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ne(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(It.fromString(e))}static fromName(e){return new ce(It.fromString(e).popFirst(5))}static empty(){return new ce(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t,e,n){if(!n)throw new ne(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UD(t,e,n,r){if(e===!0&&r===!0)throw new ne(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rb(t){if(!ce.isDocumentKey(t))throw new ne(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sb(t){if(ce.isDocumentKey(t))throw new ne(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ng(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ng(t);throw new ne(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function p9(t,e){if(e<=0)throw new ne(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e){const n={typeString:t};return e&&(n.value=e),n}function ph(t,e){if(!jD(t))throw new ne(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ne(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=-62135596800,ob=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ob);return new Tt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ib)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ob}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ph(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ib;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Tn("string",Tt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Tt(0,0))}static max(){return new ke(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=-1;class Gp{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Rw(t){return t.fields.find(e=>e.kind===2)}function sa(t){return t.fields.filter(e=>e.kind!==2)}Gp.UNKNOWN_ID=-1;class zf{constructor(e,n){this.fieldPath=e,this.kind=n}}class $d{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new $d(0,Br.min())}}function $D(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new Br(s,ce.empty(),e)}function BD(t){return new Br(t.readTime,t.key,wc)}class Br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Br(ke.min(),ce.empty(),wc)}static max(){return new Br(ke.max(),ce.empty(),wc)}}function U0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==zD)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="SimpleDb";class rg{static open(e,n,r,s){try{return new rg(n,e.transaction(s,r))}catch(i){throw new nd(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new es,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new nd(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=j0(r.target.error);this.S.reject(new nd(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(J(Pr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new g9(n)}}class Ao{static delete(e){return J(Pr,"Removing database:",e),aa(jC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!D0())return!1;if(Ao.F())return!0;const e=zn(),n=Ao.M(e),r=0<n&&n<10,s=qD(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ao.M(zn())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(J(Pr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new nd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ne(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ne(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new nd(e,o))},s.onupgradeneeded=i=>{J(Pr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{J(Pr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=rg.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(J(Pr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class m9{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return aa(this.U.delete())}}class nd extends ne{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ho(t){return t.name==="IndexedDbTransactionError"}class g9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(J(Pr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(J(Pr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return J(Pr,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next(n=>(n===void 0&&(n=null),J(Pr,"GET",this.store.name,e,n),n))}delete(e){return J(Pr,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return J(Pr,"COUNT",this.store.name),aa(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){J(Pr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=j0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new m9(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function aa(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=j0(r.target.error);n(s)}})}let ab=!1;function j0(t){const e=Ao.M(zn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ab||(ab=!0,setTimeout(()=>{throw r},0)),r}}return t}const rd="IndexBackfiller";class y9{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){J(rd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();J(rd,`Documents written: ${n}`)}catch(n){Ho(n)?J(rd,"Ignoring IndexedDB error during index backfill: ",n):await qo(n)}await this.re(6e4)})}}class v9{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return J(rd,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(J(rd,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=BD(i);U0(o,r)>0&&(r=o)}),new Br(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_r.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function sg(t){return t==null}function Bd(t){return t===0&&1/t==-1/0}function HD(t){return typeof t=="number"&&Number.isInteger(t)&&!Bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="";function rr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lb(e)),e=w9(t.get(n),e);return lb(e)}function w9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Qp:n+="";break;default:n+=i}}return n}function lb(t){return t+Qp+""}function js(t){const e=t.length;if(Ce(e>=2,64408,{path:t}),e===2)return Ce(t.charAt(0)===Qp&&t.charAt(1)==="",56145,{path:t}),It.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Qp,i);switch((o<0||o>n)&&we(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:we(61167,{path:t})}i=o+2}return new It(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="remoteDocuments",mh="owner",hl="owner",zd="mutationQueues",_9="userId",us="mutations",cb="batchId",ya="userMutationsIndex",ub=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e){return[t,rr(e)]}function KD(t,e,n){return[t,rr(e),n]}const E9={},_c="documentMutations",Yp="remoteDocumentsV14",T9=["prefixPath","collectionGroup","readTime","documentId"],qf="documentKeyIndex",I9=["prefixPath","collectionGroup","documentId"],GD="collectionGroupIndex",S9=["collectionGroup","readTime","prefixPath","documentId"],Wd="remoteDocumentGlobal",Pw="remoteDocumentGlobalKey",Ec="targets",QD="queryTargetsIndex",b9=["canonicalId","targetId"],Tc="targetDocuments",A9=["targetId","path"],$0="documentTargetsIndex",x9=["path","targetId"],Jp="targetGlobalKey",La="targetGlobal",qd="collectionParents",R9=["collectionId","parent"],Ic="clientMetadata",P9="clientId",ig="bundles",C9="bundleId",og="namedQueries",D9="name",B0="indexConfiguration",k9="indexId",Cw="collectionGroupIndex",N9="collectionGroup",sd="indexState",O9=["indexId","uid"],YD="sequenceNumberIndex",L9=["uid","sequenceNumber"],id="indexEntries",V9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],JD="documentKeyIndex",M9=["indexId","uid","orderedDocumentKey"],ag="documentOverlays",F9=["userId","collectionPath","documentId"],Dw="collectionPathOverlayIndex",U9=["userId","collectionPath","largestBatchId"],XD="collectionGroupOverlayIndex",j9=["userId","collectionGroup","largestBatchId"],z0="globals",$9="name",ZD=[zd,us,_c,ia,Ec,mh,La,Tc,Ic,Wd,qd,ig,og],B9=[...ZD,ag],ek=[zd,us,_c,Yp,Ec,mh,La,Tc,Ic,Wd,qd,ig,og,ag],tk=ek,W0=[...tk,B0,sd,id],z9=W0,nk=[...W0,z0],W9=nk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends WD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Rn(t,e){const n=_e(t);return Ao.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Fn.RED,this.left=s??Fn.EMPTY,this.right=i??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Fn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Fn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hb(this.data.getIterator())}getIteratorFrom(e){return new hb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class hb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Er([])}unionWith(e){let n=new Rt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sk("Invalid base64 string: "+i):i}}(e);return new un(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const q9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=q9.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ai(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="server_timestamp",ok="__type__",ak="__previous_value__",lk="__local_write_time__";function q0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ok])==null?void 0:r.stringValue)===ik}function lg(t){const e=t.mapValue.fields[ak];return q0(e)?lg(e):e}function Hd(t){const e=bi(t.mapValue.fields[lk].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Xp="(default)";class Lo{constructor(e,n){this.projectId=e,this.database=n||Xp}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database===Xp}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="__type__",ck="__max__",uo={mapValue:{fields:{__type__:{stringValue:ck}}}},K0="__vector__",Sc="value",Hf={nullValue:"NULL_VALUE"};function Vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?q0(t)?4:uk(t)?9007199254740991:cg(t)?10:11:we(28295,{value:t})}function Js(t,e){if(t===e)return!0;const n=Vo(t);if(n!==Vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hd(t).isEqual(Hd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=bi(s.timestampValue),a=bi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ai(s.bytesValue).isEqual(Ai(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return qt(s.geoPointValue.latitude)===qt(i.geoPointValue.latitude)&&qt(s.geoPointValue.longitude)===qt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return qt(s.integerValue)===qt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qt(s.doubleValue),a=qt(i.doubleValue);return o===a?Bd(o)===Bd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vc(t.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(db(o)!==db(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Js(o[l],a[l])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Kd(t,e){return(t.values||[]).find(n=>Js(n,e))!==void 0}function Mo(t,e){if(t===e)return 0;const n=Vo(t),r=Vo(e);if(n!==r)return Ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=qt(i.integerValue||i.doubleValue),l=qt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return fb(t.timestampValue,e.timestampValue);case 4:return fb(Hd(t),Hd(e));case 5:return xw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ai(i),l=Ai(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ge(a[c],l[c]);if(d!==0)return d}return Ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ge(qt(i.latitude),qt(o.latitude));return a!==0?a:Ge(qt(i.longitude),qt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,p,w,g;const a=i.fields||{},l=o.fields||{},c=(f=a[Sc])==null?void 0:f.arrayValue,d=(p=l[Sc])==null?void 0:p.arrayValue,h=Ge(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:pb(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===uo.mapValue&&o===uo.mapValue)return 0;if(i===uo.mapValue)return 1;if(o===uo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=xw(l[h],d[h]);if(f!==0)return f;const p=Mo(a[l[h]],c[d[h]]);if(p!==0)return p}return Ge(l.length,d.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function fb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=bi(t),r=bi(e),s=Ge(n.seconds,r.seconds);return s!==0?s:Ge(n.nanos,r.nanos)}function pb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Mo(n[s],r[s]);if(i)return i}return Ge(n.length,r.length)}function bc(t){return Nw(t)}function Nw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nw(n.fields[o])}`;return s+"}"}(t.mapValue):we(61005,{value:t})}function Kf(t){switch(Vo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lg(t);return e?16+Kf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Kf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ko(r.fields,(i,o)=>{s+=i.length+Kf(o)}),s}(t.mapValue);default:throw we(13486,{value:t})}}function Gd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ow(t){return!!t&&"integerValue"in t}function Qd(t){return!!t&&"arrayValue"in t}function mb(t){return!!t&&"nullValue"in t}function gb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gf(t){return!!t&&"mapValue"in t}function cg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[H0])==null?void 0:r.stringValue)===K0}function od(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=od(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=od(t.arrayValue.values[n]);return e}return{...t}}function uk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ck}const dk={mapValue:{fields:{[H0]:{stringValue:K0},[Sc]:{arrayValue:{}}}}};function K9(t){return"nullValue"in t?Hf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gd(Lo.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?cg(t)?dk:{mapValue:{}}:we(35942,{value:t})}function G9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gd(Lo.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dk:"mapValue"in t?cg(t)?{mapValue:{}}:uo:we(61959,{value:t})}function yb(t,e){const n=Mo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vb(t,e){const n=Mo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.value=e}static empty(){return new tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=od(n)}setAll(e){let n=Kt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=od(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ko(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new tr(od(this.value))}}function hk(t){const e=[];return Ko(t.fields,(n,r)=>{const s=new Kt([n]);if(Gf(r)){const i=hk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,ke.min(),ke.min(),ke.min(),tr.empty(),0)}static newFoundDocument(e,n,r,s){return new cn(e,1,n,ke.min(),r,s,0)}static newNoDocument(e,n){return new cn(e,2,n,ke.min(),ke.min(),tr.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,ke.min(),ke.min(),tr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.position=e,this.inclusive=n}}function wb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=Mo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _b(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Js(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{}class pt extends fk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Y9(e,n,r):n==="array-contains"?new Z9(e,r):n==="in"?new wk(e,r):n==="not-in"?new ez(e,r):n==="array-contains-any"?new tz(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new J9(e,r):new X9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mo(n,this.value)):n!==null&&Vo(this.value)===Vo(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends fk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new At(e,n)}matches(e){return xc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xc(t){return t.op==="and"}function Lw(t){return t.op==="or"}function G0(t){return pk(t)&&xc(t)}function pk(t){for(const e of t.filters)if(e instanceof At)return!1;return!0}function Vw(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+bc(t.value);if(G0(t))return t.filters.map(e=>Vw(e)).join(",");{const e=t.filters.map(n=>Vw(n)).join(",");return`${t.op}(${e})`}}function mk(t,e){return t instanceof pt?function(r,s){return s instanceof pt&&r.op===s.op&&r.field.isEqual(s.field)&&Js(r.value,s.value)}(t,e):t instanceof At?function(r,s){return s instanceof At&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&mk(o,s.filters[a]),!0):!1}(t,e):void we(19439)}function gk(t,e){const n=t.filters.concat(e);return At.create(n,t.op)}function yk(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${bc(n.value)}`}(t):t instanceof At?function(n){return n.op.toString()+" {"+n.getFilters().map(yk).join(" ,")+"}"}(t):"Filter"}class Y9 extends pt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class J9 extends pt{constructor(e,n){super(e,"in",n),this.keys=vk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X9 extends pt{constructor(e,n){super(e,"not-in",n),this.keys=vk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class Z9 extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qd(n)&&Kd(n.arrayValue,this.value)}}class wk extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kd(this.value.arrayValue,n)}}class ez extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kd(this.value.arrayValue,n)}}class tz extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Mw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new nz(t,e,n,r,s,i,o)}function qa(t){const e=_e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),sg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bc(r)).join(",")),e.Te=n}return e.Te}function gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_b(t.startAt,e.startAt)&&_b(t.endAt,e.endAt)}function Zp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function em(t,e){return t.filters.filter(n=>n instanceof pt&&n.field.isEqual(e))}function Eb(t,e,n){let r=Hf,s=!0;for(const i of em(t,e)){let o=Hf,a=!0;switch(i.op){case"<":case"<=":o=K9(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Hf}yb({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Tb(t,e,n){let r=uo,s=!0;for(const i of em(t,e)){let o=uo,a=!0;switch(i.op){case">=":case">":o=G9(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=uo}vb({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];vb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _k(t,e,n,r,s,i,o,a){return new Yc(t,e,n,r,s,i,o,a)}function yh(t){return new Yc(t)}function Ib(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ek(t){return t.collectionGroup!==null}function ad(t){const e=_e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(Kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Yd(i,r))}),n.has(Kt.keyField().canonicalString())||e.Ie.push(new Yd(Kt.keyField(),r))}return e.Ie}function jr(t){const e=_e(t);return e.Ee||(e.Ee=rz(e,ad(t))),e.Ee}function rz(t,e){if(t.limitType==="F")return Mw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yd(s.field,i)});const n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return Mw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fw(t,e){const n=t.filters.concat([e]);return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tm(t,e,n){return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ug(t,e){return gh(jr(t),jr(e))&&t.limitType===e.limitType}function Tk(t){return`${qa(jr(t))}|lt:${t.limitType}`}function Il(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yk(s)).join(", ")}]`),sg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bc(s)).join(",")),`Target(${r})`}(jr(t))}; limitType=${t.limitType})`}function vh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ad(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=wb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ad(r),s)||r.endAt&&!function(o,a,l){const c=wb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ad(r),s))}(t,e)}function Ik(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sk(t){return(e,n)=>{let r=!1;for(const s of ad(t)){const i=sz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sz(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Mo(l,c):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return rk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=new Mt(ce.comparator);function Lr(){return iz}const bk=new Mt(ce.comparator);function $u(...t){let e=bk;for(const n of t)e=e.insert(n.key,n);return e}function Ak(t){let e=bk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $s(){return ld()}function xk(){return ld()}function ld(){return new ki(t=>t.toString(),(t,e)=>t.isEqual(e))}const oz=new Mt(ce.comparator),az=new Rt(ce.comparator);function lt(...t){let e=az;for(const n of t)e=e.add(n);return e}const lz=new Rt(Ge);function Q0(){return lz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function Rk(t){return{integerValue:""+t}}function cz(t,e){return HD(e)?Rk(e):Y0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this._=void 0}}function uz(t,e,n){return t instanceof Rc?function(s,i){const o={fields:{[ok]:{stringValue:ik},[lk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&q0(i)&&(i=lg(i)),i&&(o.fields[ak]=i),{mapValue:o}}(n,e):t instanceof Ha?Ck(t,e):t instanceof Pc?Dk(t,e):function(s,i){const o=Pk(s,i),a=Sb(o)+Sb(s.Ae);return Ow(o)&&Ow(s.Ae)?Rk(a):Y0(s.serializer,a)}(t,e)}function dz(t,e,n){return t instanceof Ha?Ck(t,e):t instanceof Pc?Dk(t,e):n}function Pk(t,e){return t instanceof Jd?function(r){return Ow(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Rc extends dg{}class Ha extends dg{constructor(e){super(),this.elements=e}}function Ck(t,e){const n=kk(e);for(const r of t.elements)n.some(s=>Js(s,r))||n.push(r);return{arrayValue:{values:n}}}class Pc extends dg{constructor(e){super(),this.elements=e}}function Dk(t,e){let n=kk(e);for(const r of t.elements)n=n.filter(s=>!Js(s,r));return{arrayValue:{values:n}}}class Jd extends dg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sb(t){return qt(t.integerValue||t.doubleValue)}function kk(t){return Qd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.field=e,this.transform=n}}function hz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ha&&s instanceof Ha||r instanceof Pc&&s instanceof Pc?vc(r.elements,s.elements,Js):r instanceof Jd&&s instanceof Jd?Js(r.Ae,s.Ae):r instanceof Rc&&s instanceof Rc}(t.transform,e.transform)}class fz{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hg{}function Nk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fg(t.key,nr.none()):new Jc(t.key,t.data,nr.none());{const n=t.data,r=tr.empty();let s=new Rt(Kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ni(t.key,r,new Er(s.toArray()),nr.none())}}function pz(t,e,n){t instanceof Jc?function(s,i,o){const a=s.value.clone(),l=Ab(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ni?function(s,i,o){if(!Qf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ab(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Ok(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cd(t,e,n,r){return t instanceof Jc?function(i,o,a,l){if(!Qf(i.precondition,o))return a;const c=i.value.clone(),d=xb(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ni?function(i,o,a,l){if(!Qf(i.precondition,o))return a;const c=xb(i.fieldTransforms,l,o),d=o.data;return d.setAll(Ok(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Qf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pk(r.transform,s||null);i!=null&&(n===null&&(n=tr.empty()),n.set(r.field,i))}return n||null}function bb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vc(r,s,(i,o)=>hz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jc extends hg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ni extends hg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ok(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ab(t,e,n){const r=new Map;Ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,dz(o,a,n[s]))}return r}function xb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,uz(i,o,e))}return r}class fg extends hg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lk extends hg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Nk(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),lt())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,(n,r)=>bb(n,r))&&vc(this.baseMutations,e.baseMutations,(n,r)=>bb(n,r))}}class Z0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return oz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Z0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,yt;function yz(t){switch(t){case z.OK:return we(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function Vk(t){if(t===void 0)return mn("GRPC error has no .code"),z.UNKNOWN;switch(t){case _n.OK:return z.OK;case _n.CANCELLED:return z.CANCELLED;case _n.UNKNOWN:return z.UNKNOWN;case _n.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case _n.INTERNAL:return z.INTERNAL;case _n.UNAVAILABLE:return z.UNAVAILABLE;case _n.UNAUTHENTICATED:return z.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case _n.NOT_FOUND:return z.NOT_FOUND;case _n.ALREADY_EXISTS:return z.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return z.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case _n.ABORTED:return z.ABORTED;case _n.OUT_OF_RANGE:return z.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return z.UNIMPLEMENTED;case _n.DATA_LOSS:return z.DATA_LOSS;default:return we(39323,{code:t})}}(yt=_n||(_n={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=new bo([4294967295,4294967295],0);function Rb(t){const e=vz().encode(t),n=new RD;return n.update(e),new Uint8Array(n.digest())}function Pb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bo([n,r],0),new bo([s,i],0)]}class tE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bu(`Invalid padding: ${n}`);if(r<0)throw new Bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bo.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(bo.fromNumber(r)));return s.compare(wz)===1&&(s=new bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Rb(e),[r,s]=Pb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new tE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Rb(e),[r,s]=Pb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wh(ke.min(),s,new Mt(Ge),Lr(),lt())}}class _h{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _h(r,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Mk{constructor(e,n){this.targetId=e,this.Ce=n}}class Fk{constructor(e,n,r=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Cb{constructor(){this.ve=0,this.Fe=Db(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),n=lt(),r=lt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we(38017,{changeType:i})}}),new _h(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Db()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _z{constructor(e){this.Ge=e,this.ze=new Map,this.je=Lr(),this.Je=df(),this.He=df(),this.Ye=new Mt(Ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Zp(i))if(r===0){const o=new ce(i.path);this.et(n,o,cn.newNoDocument(o,ke.min()))}else Ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ai(r).toUint8Array()}catch(l){if(l instanceof sk)return Oo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tE(o,s,i)}catch(l){return Oo(l instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Zp(a.target)){const l=new ce(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,cn.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=lt();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new wh(e,n,this.Ye,this.je,r);return this.je=Lr(),this.Je=df(),this.He=df(),this.Ye=new Mt(Ge),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Rt(Ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Rt(Ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function df(){return new Mt(ce.comparator)}function Db(){return new Mt(ce.comparator)}const Ez={asc:"ASCENDING",desc:"DESCENDING"},Tz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iz={and:"AND",or:"OR"};class Sz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uw(t,e){return t.useProto3Json||sg(e)?e:{value:e}}function Cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bz(t,e){return Cc(t,e.toTimestamp())}function hr(t){return Ce(!!t,49232),ke.fromTimestamp(function(n){const r=bi(n);return new Tt(r.seconds,r.nanos)}(t))}function nE(t,e){return jw(t,e).canonicalString()}function jw(t,e){const n=function(s){return new It(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jk(t){const e=It.fromString(t);return Ce(Qk(e),10190,{key:e.toString()}),e}function nm(t,e){return nE(t.databaseId,e.path)}function Va(t,e){const n=jk(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(zk(n))}function $k(t,e){return nE(t.databaseId,e)}function Bk(t){const e=jk(t);return e.length===4?It.emptyPath():zk(e)}function $w(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zk(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kb(t,e,n){return{name:nm(t,e),fields:n.value.mapValue.fields}}function Az(t,e,n){const r=Va(t,e.name),s=hr(e.updateTime),i=e.createTime?hr(e.createTime):ke.min(),o=new tr({mapValue:{fields:e.fields}}),a=cn.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function xz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ce(d===void 0||typeof d=="string",58123),un.fromBase64String(d||"")):(Ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),un.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?z.UNKNOWN:Vk(c.code);return new ne(d,c.message||"")}(o);n=new Fk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Va(t,r.document.name),i=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):ke.min(),a=new tr({mapValue:{fields:r.document.fields}}),l=cn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Yf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Va(t,r.document),i=r.readTime?hr(r.readTime):ke.min(),o=cn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Yf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Va(t,r.document),i=r.removedTargetIds||[];n=new Yf([],i,s,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new gz(s,i),a=r.targetId;n=new Mk(a,o)}}return n}function rm(t,e){let n;if(e instanceof Jc)n={update:kb(t,e.key,e.value)};else if(e instanceof fg)n={delete:nm(t,e.key)};else if(e instanceof Ni)n={update:kb(t,e.key,e.data),updateMask:Nz(e.fieldMask)};else{if(!(e instanceof Lk))return we(16599,{Vt:e.type});n={verify:nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ha)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw we(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bz(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we(27497)}(t,e.precondition)),n}function Bw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?nr.updateTime(hr(i.updateTime)):i.exists!==void 0?nr.exists(i.exists):nr.none()}(e.currentDocument):nr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)Ce(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Rc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Ha(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Pc(d)}else"increment"in a?l=new Jd(o,a.increment):we(16584,{proto:a});const c=Kt.fromServerFormat(a.fieldPath);return new J0(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Va(t,e.update.name),i=new tr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Er(c.map(d=>Kt.fromServerFormat(d)))}(e.updateMask);return new Ni(s,i,o,n,r)}return new Jc(s,i,n,r)}if(e.delete){const s=Va(t,e.delete);return new fg(s,n)}if(e.verify){const s=Va(t,e.verify);return new Lk(s,n)}return we(1463,{proto:e})}function Rz(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?hr(s.updateTime):hr(i);return o.isEqual(ke.min())&&(o=hr(i)),new fz(o,s.transformResults||[])}(n,e))):[]}function Wk(t,e){return{documents:[$k(t,e.path)]}}function qk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$k(t,s);const i=function(c){if(c.length!==0)return Gk(At.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Sl(f.field),direction:Cz(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Uw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function Hk(t){let e=Bk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=Kk(h);return f instanceof At&&G0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new Yd(bl(w.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,sg(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new Ac(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new Ac(p,f)}(n.endAt)),_k(e,s,o,i,a,"F",l,c)}function Pz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Kk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bl(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bl(n.unaryFilter.field);return pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bl(n.unaryFilter.field);return pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bl(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return pt.create(bl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return At.create(n.compositeFilter.filters.map(r=>Kk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function Cz(t){return Ez[t]}function Dz(t){return Tz[t]}function kz(t){return Iz[t]}function Sl(t){return{fieldPath:t.canonicalString()}}function bl(t){return Kt.fromServerFormat(t.fieldPath)}function Gk(t){return t instanceof pt?function(n){if(n.op==="=="){if(gb(n.value))return{unaryFilter:{field:Sl(n.field),op:"IS_NAN"}};if(mb(n.value))return{unaryFilter:{field:Sl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gb(n.value))return{unaryFilter:{field:Sl(n.field),op:"IS_NOT_NAN"}};if(mb(n.value))return{unaryFilter:{field:Sl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(n.field),op:Dz(n.op),value:n.value}}}(t):t instanceof At?function(n){const r=n.getFilters().map(s=>Gk(s));return r.length===1?r[0]:{compositeFilter:{op:kz(n.op),filters:r}}}(t):we(54877,{filter:t})}function Nz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,r,s,i=ke.min(),o=ke.min(),a=un.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.yt=e}}function Oz(t,e){let n;if(e.document)n=Az(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),s=Ga(e.noDocument.readTime);n=cn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const r=ce.fromSegments(e.unknownDocument.path),s=Ga(e.unknownDocument.version);n=cn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Tt(s[0],s[1]);return ke.fromTimestamp(i)}(e.readTime)),n}function Nb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:nm(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Cc(i,o.version.toTimestamp()),createTime:Cc(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ka(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ka(e.version)}}return r}function sm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ka(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ga(t){const e=new Tt(t.seconds,t.nanoseconds);return ke.fromTimestamp(e)}function la(t,e){const n=(e.baseMutations||[]).map(i=>Bw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Bw(t.yt,i)),s=Tt.fromMillis(e.localWriteTimeMs);return new X0(e.batchId,s,n,r)}function zu(t){const e=Ga(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ga(t.lastLimboFreeSnapshotVersion):ke.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return Ce(o===1,1966,{count:o}),jr(yh(Bk(i.documents[0])))}(t.query):function(i){return jr(Hk(i))}(t.query),new di(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,un.fromBase64String(t.resumeToken))}function Jk(t,e){const n=Ka(e.snapshotVersion),r=Ka(e.lastLimboFreeSnapshotVersion);let s;s=Zp(e.target)?Wk(t.yt,e.target):qk(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qa(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Xk(t){const e=Hk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tm(e,e.limit,"L"):e}function Ly(t,e){return new eE(e.largestBatchId,Bw(t.yt,e.overlayMutation))}function Ob(t,e){const n=e.path.lastSegment();return[t,rr(e.path.popLast()),n]}function Lb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ka(r.readTime),documentKey:rr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{getBundleMetadata(e,n){return Vb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Ga(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return Vb(e).put(function(s){return{bundleId:s.id,createTime:Ka(hr(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Mb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Xk(i.bundledQuery),readTime:Ga(i.readTime)}}(r)})}saveNamedQuery(e,n){return Mb(e).put(function(s){return{name:s.name,readTime:Ka(hr(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function Vb(t){return Rn(t,ig)}function Mb(t){return Rn(t,og)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new pg(e,r)}getOverlay(e,n){return bu(e).get(Ob(this.userId,n)).next(r=>r?Ly(this.serializer,r):null)}getOverlays(e,n){const r=$s();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new eE(n,o);s.push(this.St(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(rr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(bu(e).Z(Dw,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=$s(),i=rr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return bu(e).J(Dw,o).next(a=>{for(const l of a){const c=Ly(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=$s();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bu(e).ee({index:XD,range:a},(l,c,d)=>{const h=Ly(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return bu(e).put(function(s,i,o){const[a,l,c]=Ob(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rm(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function bu(t){return Rn(t,ag)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{bt(e){return Rn(e,z0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?un.fromUint8Array(r):un.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(qt(e.integerValue));else if("doubleValue"in e){const r=qt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Bd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=bi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ai(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?uk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):cg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):we(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Sc,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(qt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ce.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ca.Kt=new ca;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=255;function Mz(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Fb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=Mz(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class Fz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=Fb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=Fb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(pl),this.sn(255)}_n(){this.an(pl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===pl?(this.sn(pl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===pl?(this.an(pl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Uz{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class jz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Au{constructor(){this.cn=new Fz,this.ln=new Uz(this.cn),this.hn=new jz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ua(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Jf(this.En),directionalValue:Jf(this.dn),orderedDocumentKey:Jf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Wi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Ub(t.En,e.En),n!==0?n:(n=Ub(t.dn,e.dn),n!==0?n:ce.comparator(t.In,e.In)))}function Ub(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Jf(t){return HC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function jb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class $b{constructor(e){this.mn=new Rt((n,r)=>Kt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Rw(e);if(n!==void 0&&!this.wn(n))return!1;const r=sa(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Rt(Kt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zf(r.field,r.dir==="asc"?0:1)));return new Gp(Gp.UNKNOWN_ID,this.collectionId,n,$d.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){var n,r;if(Ce(t instanceof pt||t instanceof At,20012),t instanceof pt){if(t instanceof wk){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>pt.create(t.field,"==",i)))||[];return At.create(s,"or")}return t}const e=t.filters.map(s=>Zk(s));return At.create(e,t.op)}function $z(t){if(t.getFilters().length===0)return[];const e=qw(Zk(t));return Ce(eN(e),7391),zw(e)||Ww(e)?[e]:e.getFilters()}function zw(t){return t instanceof pt}function Ww(t){return t instanceof At&&G0(t)}function eN(t){return zw(t)||Ww(t)||function(n){if(n instanceof At&&Lw(n)){for(const r of n.getFilters())if(!zw(r)&&!Ww(r))return!1;return!0}return!1}(t)}function qw(t){if(Ce(t instanceof pt||t instanceof At,34018),t instanceof pt)return t;if(t.filters.length===1)return qw(t.filters[0]);const e=t.filters.map(r=>qw(r));let n=At.create(e,t.op);return n=im(n),eN(n)?n:(Ce(n instanceof At,64498),Ce(xc(n),40251),Ce(n.filters.length>1,57927),n.filters.reduce((r,s)=>rE(r,s)))}function rE(t,e){let n;return Ce(t instanceof pt||t instanceof At,38388),Ce(e instanceof pt||e instanceof At,25473),n=t instanceof pt?e instanceof pt?function(s,i){return At.create([s,i],"and")}(t,e):Bb(t,e):e instanceof pt?Bb(e,t):function(s,i){if(Ce(s.filters.length>0&&i.filters.length>0,48005),xc(s)&&xc(i))return gk(s,i.getFilters());const o=Lw(s)?s:i,a=Lw(s)?i:s,l=o.filters.map(c=>rE(c,a));return At.create(l,"or")}(t,e),im(n)}function Bb(t,e){if(xc(e))return gk(e,t.getFilters());{const n=e.filters.map(r=>rE(t,r));return At.create(n,"or")}}function im(t){if(Ce(t instanceof pt||t instanceof At,11850),t instanceof pt)return t;const e=t.getFilters();if(e.length===1)return im(e[0]);if(pk(t))return t;const n=e.map(s=>im(s)),r=[];return n.forEach(s=>{s instanceof pt?r.push(s):s instanceof At&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:At.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(){this.Cn=new sE}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Br.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class sE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Rt(It.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rt(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="IndexedDbIndexManager",hf=new Uint8Array(0);class zz{constructor(e,n){this.databaseId=n,this.vn=new sE,this.Fn=new ki(r=>qa(r),(r,s)=>gh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:rr(s)};return Wb(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[MD(n),""],!1,!0);return Wb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(js(o.parent))}return r})}addFieldIndex(e,n){const r=xu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=gl(e);return i.next(a=>{o.put(Lb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=xu(e),s=gl(e),i=ml(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xu(e),r=ml(e),s=gl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new $b(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=ml(e);let s=!0;const i=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=lt();const a=[];return M.forEach(i,(l,c)=>{J(zb,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${qa(n)}`);const d=function(_,R){const k=Rw(R);if(k===void 0)return null;for(const L of em(_,k.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(_,R){const k=new Map;for(const L of sa(R))for(const x of em(_,L.fieldPath))switch(x.op){case"==":case"in":k.set(L.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return k.set(L.fieldPath.canonicalString(),x.value),Array.from(k.values())}return null}(c,l),f=function(_,R){const k=[];let L=!0;for(const x of sa(R)){const A=x.kind===0?Eb(_,x.fieldPath,_.startAt):Tb(_,x.fieldPath,_.startAt);k.push(A.value),L&&(L=A.inclusive)}return new Ac(k,L)}(c,l),p=function(_,R){const k=[];let L=!0;for(const x of sa(R)){const A=x.kind===0?Tb(_,x.fieldPath,_.endAt):Eb(_,x.fieldPath,_.endAt);k.push(A.value),L&&(L=A.inclusive)}return new Ac(k,L)}(c,l),w=this.On(l,c,f),g=this.On(l,c,p),v=this.Nn(l,c,h),E=this.Bn(l.indexId,d,w,f.inclusive,g,p.inclusive,v);return M.forEach(E,y=>r.Y(y,n.limit).next(_=>{_.forEach(R=>{const k=ce.fromSegments(R.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=$z(At.create(e.filters,"and")).map(r=>Mw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):hf,p=this.kn(e,f,r[h%c],s),w=this.qn(e,f,i[h%c],o),g=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(p,w,g))}return d}kn(e,n,r,s){const i=new ua(e,ce.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new ua(e,ce.empty(),n,r);return s?i.An():i}xn(e,n){const r=new $b(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return M.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Rt(Kt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new Au;for(const s of sa(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);ca.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new Au;return ca.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Au;return ca.Kt.Dt(Gd(this.databaseId,n),r.Pn(function(i){const o=sa(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Au);let i=0;for(const o of sa(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&Qd(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);ca.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Au;l.seed(a.un()),ca.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof pt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xu(e),s=gl(e);return(n?r.J(Cw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new $d(h.sequenceNumber,new Br(Ga(h.readTime),new ce(js(h.documentKey)),h.largestBatchId)):$d.empty(),p=d.fields.map(([w,g])=>new zf(Kt.fromServerFormat(w),g));return new Gp(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ge(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=xu(e),i=gl(e);return this.Gn(e).next(o=>s.J(Cw,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(Lb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?M.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return ml(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return ml(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=ml(e);let i=new Rt(Wi);return s.ee({index:JD,range:IDBKeyRange.only([r.indexId,this.uid,Jf(this.$n(r,n))])},(o,a)=>{i=i.add(new ua(r.indexId,n,jb(a.arrayValue),jb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new Rt(Wi);const s=this.Qn(n,e);if(s==null)return r;const i=Rw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Qd(o))for(const a of o.arrayValue.values||[])r=r.add(new ua(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new ua(n.indexId,e.key,hf,s));return r}Jn(e,n,r,s,i){J(zb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const p=l.getIterator(),w=c.getIterator();let g=fl(p),v=fl(w);for(;g||v;){let E=!1,y=!1;if(g&&v){const _=d(g,v);_<0?y=!0:_>0&&(E=!0)}else g!=null?y=!0:E=!0;E?(h(v),v=fl(w)):y?(f(g),g=fl(p)):(g=fl(p),v=fl(w))}}(s,i,Wi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return gl(e).ee({index:YD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Wi(o,a)).filter((o,a,l)=>!a||Wi(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Wi(o,e),l=Wi(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,hf,ce.empty()),l=s[o+1].Vn(this.uid,hf,ce.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Wi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qb)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||we(44426))).next(qb)}}function Wb(t){return Rn(t,qd)}function ml(t){return Rn(t,id)}function xu(t){return Rn(t,B0)}function gl(t){return Rn(t,sd)}function qb(t){Ce(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;U0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Br(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tN=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e,n){const r=t.store(us),s=t.store(_c),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{Ce(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=KD(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return M.waitFor(i).next(()=>c)}function om(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw we(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(tN,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);class mg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Ce(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new mg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qi(e).ee({index:ya,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Al(e),o=qi(e);return o.add({}).next(a=>{Ce(typeof a=="number",49019);const l=new X0(a,n,r,s),c=function(p,w,g){const v=g.baseMutations.map(y=>rm(p.yt,y)),E=g.mutations.map(y=>rm(p.yt,y));return{userId:w,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,l),d=[];let h=new Rt((f,p)=>Ge(f.canonicalString(),p.canonicalString()));for(const f of s){const p=KD(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(p,E9))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return qi(e).get(n).next(r=>r?(Ce(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),la(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return qi(e).ee({index:ya,range:s},(o,a,l)=>{a.userId===this.userId&&(Ce(a.batchId>=r,47524,{tr:r}),i=la(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Oa;return qi(e).ee({index:ya,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Oa],[this.userId,Number.POSITIVE_INFINITY]);return qi(e).J(ya,n).next(r=>r.map(s=>la(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Wf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Al(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=js(d);if(c===this.userId&&n.path.isEqual(f))return qi(e).get(h).next(p=>{if(!p)throw we(61480,{nr:o,batchId:h});Ce(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:h}),i.push(la(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ge);const s=[];return n.forEach(i=>{const o=Wf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Al(e).ee({range:a},(c,d,h)=>{const[f,p,w]=c,g=js(p);f===this.userId&&i.path.isEqual(g)?r=r.add(w):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Wf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Rt(Ge);return Al(e).ee({range:o},(l,c,d)=>{const[h,f,p]=l,w=js(f);h===this.userId&&r.isPrefixOf(w)?w.length===s&&(a=a.add(p)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(qi(e).get(i).next(o=>{if(o===null)throw we(35274,{batchId:i});Ce(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(la(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return nN(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Al(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=js(i[1]);s.push(l)}else a.done()}).next(()=>{Ce(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return rN(e,this.userId,n)}_r(e){return sN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Oa,lastStreamToken:""})}}function rN(t,e,n){const r=Wf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Al(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function qi(t){return Rn(t,us)}function Al(t){return Rn(t,_c)}function sN(t){return Rn(t,zd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qa(0)}static cr(){return new Qa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Qa(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ke.fromTimestamp(new Tt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>yl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Ce(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return yl(e).ee((o,a)=>{const l=zu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return yl(e).ee((r,s)=>{const i=zu(s);n(i)})}lr(e){return Kb(e).get(Jp).next(n=>(Ce(n!==null,2888),n))}hr(e,n){return Kb(e).put(Jp,n)}Pr(e,n){return yl(e).put(Jk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=qa(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return yl(e).ee({range:s,index:QD},(o,a,l)=>{const c=zu(a);gh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Zi(e);return n.forEach(o=>{const a=rr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=Zi(e);return M.forEach(n,i=>{const o=rr(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Zi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Zi(e);let i=lt();return s.ee({range:r,X:!0},(o,a,l)=>{const c=js(o[1]),d=new ce(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=rr(n.path),s=IDBKeyRange.bound([r],[MD(r)],!1,!0);let i=0;return Zi(e).ee({index:$0,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return yl(e).get(n).next(r=>r?zu(r):null)}}function yl(t){return Rn(t,Ec)}function Kb(t){return Rn(t,La)}function Zi(t){return Rn(t,Tc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="LruGarbageCollector",iN=1048576;function Qb([t,e],[n,r]){const s=Ge(t,n);return s===0?Ge(e,r):s}class qz{constructor(e){this.Ir=e,this.buffer=new Rt(Qb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Qb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(Gb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?J(Gb,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Vr(3e5)})}}class Hz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(_r.ce);const r=new qz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Hb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Tl()<=ht.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function aN(t,e){return new Hz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n){this.db=e,this.garbageCollector=aN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return ff(e,r)}removeReference(e,n,r){return ff(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ff(e,n)}br(e,n){return function(s,i){let o=!1;return sN(s).te(a=>rN(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ke.min()),Zi(e).delete(function(h){return[0,rr(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ff(e,n)}Sr(e,n){const r=Zi(e);let s,i=_r.ce;return r.ee({index:$0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==_r.ce&&n(new ce(js(s)),i),i=c,s=l):i=_r.ce}).next(()=>{i!==_r.ce&&n(new ce(js(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(t,e){return Zi(t).put(function(r,s){return{targetId:0,path:rr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.changes=new ki(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ea(e).put(r)}removeEntry(e,n,r){return ea(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=cn.newInvalidDocument(n);return ea(e).ee({index:qf,range:IDBKeyRange.only(Ru(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:cn.newInvalidDocument(n)};return ea(e).ee({index:qf,range:IDBKeyRange.only(Ru(n))},(s,i)=>{r={document:this.Cr(n,i),size:om(i)}}).next(()=>r)}getEntries(e,n){let r=Lr();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=Lr(),s=new Mt(ce.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,om(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let s=new Rt(Xb);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ru(s.first()),Ru(s.last())),o=s.getIterator();let a=o.getNext();return ea(e).ee({index:qf,range:i},(l,c,d)=>{const h=ce.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Xb(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ru(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),sm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ea(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=Lr();for(const h of c){const f=this.Cr(ce.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(vh(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=Lr();const o=Jb(n,r),a=Jb(n,Br.max());return ea(e).ee({index:GD,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(ce.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new Qz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Yb(e).get(Pw).next(n=>(Ce(!!n,20021),n))}Dr(e,n){return Yb(e).put(Pw,n)}Cr(e,n){if(n){const r=Oz(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ke.min())))return r}return cn.newInvalidDocument(e)}}function cN(t){return new Gz(t)}class Qz extends lN{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ki(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Rt((i,o)=>Ge(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Nb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=om(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Nb(this.Nr.serializer,o.convertToNoDocument(ke.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Yb(t){return Rn(t,Wd)}function ea(t){return Rn(t,Yp)}function Ru(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Jb(t,e){const n=e.documentKey.path.toArray();return[t,sm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Xb(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ge(n[i],r[i]),s)return s;return s=Ge(n.length,r.length),s||(s=Ge(n[n.length-2],r[r.length-2]),s||Ge(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&cd(r.mutation,s,Er.empty(),Tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,lt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=lt()){const s=$s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$u();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,lt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Lr();const o=ld(),a=function(){return ld()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ni)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),cd(d.mutation,c,d.mutation.getFieldMask(),Tt.now())):o.set(c.key,Er.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new Yz(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ld();let s=new Mt((o,a)=>o-a),i=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Er.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||lt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=xk();d.forEach(f=>{if(!i.has(f)){const p=Nk(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ek(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve($s());let a=wc,l=i;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,lt())).next(d=>({batchId:a,changes:Ak(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=$u();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$u();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,f){return new Yc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,cn.newInvalidDocument(d)))});let a=$u();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&cd(d.mutation,c,Er.empty(),Tt.now()),vh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Xk(s.bundledQuery),readTime:hr(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.overlays=new Mt(ce.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$s();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=$s(),i=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Mt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=$s(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=$s(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new eE(n,r));let i=this.qr.get(n);i===void 0&&(i=lt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.Qr=new Rt(kn.$r),this.Ur=new Rt(kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new kn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new kn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new It([])),r=new kn(n,e),s=new kn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new It([])),r=new kn(n,e),s=new kn(n,e+1);let i=lt();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new kn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ge(e.Yr,n.Yr)}static Kr(e,n){return Ge(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Rt(kn.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new X0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new kn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Oa:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kn(n,0),s=new kn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ge);return n.forEach(s=>{const i=new kn(s,0),o=new kn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const o=new kn(new ce(i),0);let a=new Rt(Ge);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new kn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new kn(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e){this.ri=e,this.docs=function(){return new Mt(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():cn.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Lr();const o=n.path,a=new ce(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||U0(BD(d),r)<=0||(s.has(d.key)||vh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nW(this)}getSize(e){return M.resolve(this.size)}}class nW extends lN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.persistence=e,this.si=new ki(n=>qa(n),gh),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new iE,this.targetCount=0,this.ai=Qa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.ui={},this.overlays={},this.ci=new _r(0),this.li=!1,this.li=!0,this.hi=new Zz,this.referenceDelegate=e(this),this.Pi=new rW(this),this.indexManager=new Bz,this.remoteDocumentCache=function(s){return new tW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Yk(n),this.Ii=new Jz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new eW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new sW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class sW extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ri=new iE,this.Vi=null}static mi(e){return new gg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=ce.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ke.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class am{constructor(e,n){this.persistence=e,this.pi=new ki(r=>rr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=aN(this,n)}static mi(e,n){return new am(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ke.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kf(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this.serializer=e}k(e,n,r,s){const i=new rg("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(mh)}(e),function(l){l.createObjectStore(zd,{keyPath:_9}),l.createObjectStore(us,{keyPath:cb,autoIncrement:!0}).createIndex(ya,ub,{unique:!0}),l.createObjectStore(_c)}(e),Zb(e),function(l){l.createObjectStore(ia)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Tc),l.deleteObjectStore(Ec),l.deleteObjectStore(La)}(e),Zb(e)),o=o.next(()=>function(l){const c=l.store(La),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return c.put(Jp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(us).J().next(h=>{l.deleteObjectStore(us),l.createObjectStore(us,{keyPath:cb,autoIncrement:!0}).createIndex(ya,ub,{unique:!0});const f=c.store(us),p=h.map(w=>f.put(w));return M.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Ic,{keyPath:P9})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Wd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(ig,{keyPath:C9})})(e),function(l){l.createObjectStore(og,{keyPath:D9})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(ag,{keyPath:F9});c.createIndex(Dw,U9,{unique:!1}),c.createIndex(XD,j9,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Yp,{keyPath:T9});c.createIndex(qf,I9),c.createIndex(GD,S9)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ia))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(B0,{keyPath:k9,autoIncrement:!0}).createIndex(Cw,N9,{unique:!1}),l.createObjectStore(sd,{keyPath:O9}).createIndex(YD,L9,{unique:!1}),l.createObjectStore(id,{keyPath:V9}).createIndex(JD,M9,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(sd).clear()}).next(()=>{n.objectStore(id).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(z0,{keyPath:$9})})(e)})),r<18&&s>=18&&HC()&&(o=o.next(()=>{n.objectStore(sd).clear()}).next(()=>{n.objectStore(id).clear()})),o}wi(e){let n=0;return e.store(ia).ee((r,s)=>{n+=om(s)}).next(()=>{const r={byteSize:n};return e.store(Wd).put(Pw,r)})}yi(e){const n=e.store(zd),r=e.store(us);return n.J().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Oa],[i.userId,i.lastAcknowledgedBatchId]);return r.J(ya,o).next(a=>M.forEach(a,l=>{Ce(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=la(this.serializer,l);return nN(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Tc),r=e.store(ia);return e.store(La).get(Jp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new It(o),c=function(h){return[0,rr(h)]}(l);i.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:rr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}bi(e,n){e.createObjectStore(qd,{keyPath:R9});const r=n.store(qd),s=new sE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rr(l)})}};return n.store(ia).ee({X:!0},(o,a)=>{const l=new It(o);return i(l.popLast())}).next(()=>n.store(_c).ee({X:!0},([o,a,l],c)=>{const d=js(a);return i(d.popLast())}))}Di(e){const n=e.store(Ec);return n.ee((r,s)=>{const i=zu(s),o=Jk(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ia),s=[];return r.ee((i,o)=>{const a=n.store(Yp),l=function(h){return h.document?new ce(It.fromString(h.document.name).popFirst(5)):h.noDocument?ce.fromSegments(h.noDocument.path):h.unknownDocument?ce.fromSegments(h.unknownDocument.path):we(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Fi(e,n){const r=n.store(us),s=cN(this.serializer),i=new oE(gg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??lt();la(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),M.forEach(a,(l,c)=>{const d=new Xn(c),h=pg.wt(this.serializer,d),f=i.getIndexManager(d),p=mg.wt(d,this.serializer,f,i.referenceDelegate);return new uN(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new kw(n,_r.ce),l).next()})})}}function Zb(t){t.createObjectStore(Tc,{keyPath:A9}).createIndex($0,x9,{unique:!0}),t.createObjectStore(Ec,{keyPath:"targetId"}).createIndex(QD,b9,{unique:!0}),t.createObjectStore(La)}const Hi="IndexedDbPersistence",Vy=18e5,My=5e3,Fy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oW="main";class aE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!aE.v())throw new ne(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kz(this,s),this.$i=n+oW,this.serializer=new Yk(l),this.Ui=new Ao(this.$i,this.Ni,new iW(this.serializer)),this.hi=new Vz,this.Pi=new Wz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cN(this.serializer),this.Ii=new Lz,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&mn(Hi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(z.FAILED_PRECONDITION,Fy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new _r(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ho(e))return J(Hi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J(Hi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Pu(e).get(hl).next(n=>M.resolve(this.es(n)))}ts(e){return pf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Vy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Rn(n,Ic);return r.J().next(s=>{const i=this.ss(s,Vy),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):Pu(e).get(hl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,My)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ne(z.FAILED_PRECONDITION,Fy);return!1}}return!(!this.networkEnabled||!this.inForeground)||pf(e).J().next(r=>this.ss(r,My).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&J(Hi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[mh,Ic],e=>{const n=new kw(e,_r.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>pf(e).J().next(n=>this.ss(n,Vy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return mg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return pg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){J(Hi,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?W9:l===17?nk:l===16?z9:l===15?W0:l===14?tk:l===13?ek:l===12?B9:l===11?ZD:void we(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new kw(a,this.ci?this.ci.next():_r.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ne(z.FAILED_PRECONDITION,zD);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Pu(e).get(hl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,My)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ne(z.FAILED_PRECONDITION,Fy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pu(e).put(hl,n)}static v(){return Ao.v()}Zi(e){const n=Pu(e);return n.get(hl).next(r=>this.es(r)?(J(Hi,"Releasing primary lease."),n.delete(hl)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;qC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return J(Hi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mn(Hi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pu(t){return Rn(t,mh)}function pf(t){return Rn(t,Ic)}function dN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=lt(),s=lt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qC()?8:qD(zn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new aW;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Tl()<=ht.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Il(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Tl()<=ht.DEBUG&&J("QueryEngine","Query:",Il(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Tl()<=ht.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Il(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(n))):M.resolve())}ys(e,n){if(Ib(n))return M.resolve(null);let r=jr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tm(n,null,"F"),r=jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=lt(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,tm(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return Ib(n)||s.isEqual(ke.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(Tl()<=ht.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Il(n)),this.vs(e,o,n,$D(s,wc)).next(a=>a))})}Ds(e,n){let r=new Rt(Sk(e));return n.forEach((s,i)=>{vh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Tl()<=ht.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Il(n)),this.ps.getDocumentsMatchingQuery(e,n,Br.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="LocalStore",lW=3e8;class cW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Mt(Ge),this.xs=new ki(i=>qa(i),gh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function fN(t,e,n,r){return new cW(t,e,n,r)}async function pN(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=lt();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function uW(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=M.resolve();return f.forEach(w=>{p=p.next(()=>d.getEntry(l,w)).next(g=>{const v=c.docVersions.get(w);Ce(v!==null,48541),g.version.compareTo(v)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=lt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mN(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function dW(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(un.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(g,v,E){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=lW?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,d)&&a.push(n.Pi.updateTargetData(i,p))});let l=Lr(),c=lt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(hW(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(ke.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function hW(t,e,n){let r=lt(),s=lt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Lr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ke.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J(cE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function fW(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Oa),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lm(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new di(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Dc(t,e,n){const r=_e(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ho(o))throw o;J(cE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function cm(t,e,n){const r=_e(t);let s=ke.min(),i=lt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=_e(l),f=h.xs.get(d);return f!==void 0?M.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,jr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ke.min(),n?i:lt())).next(a=>(vN(r,Ik(e),a),{documents:a,Qs:i})))}function gN(t,e){const n=_e(t),r=_e(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function yN(t,e){const n=_e(t),r=n.Os.get(e)||ke.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,$D(r,wc),Number.MAX_SAFE_INTEGER)).then(s=>(vN(n,e,s),s))}function vN(t,e,n){let r=t.Os.get(e)||ke.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firestore_clients";function eA(t,e){return`${wN}_${t}_${e}`}const _N="firestore_mutations";function tA(t,e,n){let r=`${_N}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const EN="firestore_targets";function Uy(t,e){return`${EN}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="SharedClientState";class um{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new ne(s.error.code,s.error.message))),o?new um(e,n,s.state,i):(mn(Vs,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ud{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new ne(r.error.code,r.error.message))),i?new ud(e,r.state,s):(mn(Vs,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Q0();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=HD(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new dm(e,i):(mn(Vs,`Failed to parse client data for instance '${e}': ${n}`),null)}}class uE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new uE(n.clientId,n.onlineState):(mn(Vs,`Failed to parse online state: ${e}`),null)}}class Hw{constructor(){this.activeTargetIds=Q0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jy{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Mt(Ge),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=eA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Hw),this.ro=new RegExp(`^${wN}_${o}_([^_]*)$`),this.io=new RegExp(`^${_N}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${EN}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(eA(this.persistenceKey,r));if(s){const i=dm.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Uy(this.persistenceKey,e));if(s){const i=ud.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J(Vs,"READ",e,n),n}setItem(e,n){J(Vs,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){J(Vs,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(J(Vs,"EVENT",n.key,n.newValue),n.key===this.eo)return void mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=_r.ce;if(i!=null)try{const a=JSON.parse(i);Ce(typeof a=="number",30636,{So:i}),o=a}catch(a){mn(Vs,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==_r.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new um(this.currentUser,e,n,r),i=tA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=tA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Uy(this.persistenceKey,e),i=new ud(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return dm.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return um.Ws(new Xn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return ud.Ws(s,n)}uo(e){return uE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);J(Vs,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Q0();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class TN{constructor(){this.Mo=new Hw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="ConnectivityMonitor";class rA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(nA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(nA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf=null;function Kw(){return mf===null?mf=function(){return 268435456+Math.round(2147483648*Math.random())}():mf++,"0x"+mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="RestConnection",mW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Xp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Kw(),a=this.zo(e,n.toUriEncodedString());J($y,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Ci(c);return this.Jo(e,a,l,r,d).then(h=>(J($y,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Oo($y,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=mW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="WebChannelConnection";class vW extends gW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Kw();return new Promise((a,l)=>{const c=new PD;c.setWithCredentials(!0),c.listenOnce(CD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Bf.NO_ERROR:const h=c.getResponseJson();J(Jn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Bf.TIMEOUT:J(Jn,`RPC '${e}' ${o} timed out`),l(new ne(z.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:const f=c.getStatus();if(J(Jn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const g=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(w.status);l(new ne(g,w.message))}else l(new ne(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ne(z.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{J(Jn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);J(Jn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Kw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ND(),a=kD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");J(Jn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,p=!1;const w=new yW({Yo:v=>{p?J(Jn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(J(Jn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),J(Jn,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),g=(v,E,y)=>{v.listen(E,_=>{try{y(_)}catch(R){setTimeout(()=>{throw R},0)}})};return g(h,ju.EventType.OPEN,()=>{p||(J(Jn,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),g(h,ju.EventType.CLOSE,()=>{p||(p=!0,J(Jn,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),g(h,ju.EventType.ERROR,v=>{p||(p=!0,Oo(Jn,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),w.a_(new ne(z.UNAVAILABLE,"The operation could not be completed")))}),g(h,ju.EventType.MESSAGE,v=>{var E;if(!p){const y=v.data[0];Ce(!!y,16349);const _=y,R=(_==null?void 0:_.error)||((E=_[0])==null?void 0:E.error);if(R){J(Jn,`RPC '${e}' stream ${s} received error:`,R);const k=R.status;let L=function(b){const P=_n[b];if(P!==void 0)return Vk(P)}(k),x=R.message;L===void 0&&(L=z.INTERNAL,x="Unknown error status: "+k+" with message "+R.message),p=!0,w.a_(new ne(L,x)),h.close()}else J(Jn,`RPC '${e}' stream ${s} received:`,y),w.u_(y)}}),g(a,DD.STAT_EVENT,v=>{v.stat===Aw.PROXY?J(Jn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Aw.NOPROXY&&J(Jn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof window<"u"?window:null}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){return new Sz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="PersistentStream";class bN{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ne(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(sA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(sA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wW extends bN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xz(this.serializer,e),r=function(i){if(!("targetChange"in i))return ke.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?hr(o.readTime):ke.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=$w(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Zp(l)?{documents:Wk(i,l)}:{query:qk(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Uk(i,o.resumeToken);const c=Uw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=Cc(i,o.snapshotVersion.toTimestamp());const c=Uw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Pz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=$w(this.serializer),n.removeTarget=e,this.q_(n)}}class _W extends bN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Rz(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=$w(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rm(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{}class TW extends EW{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,jw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,jw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class IW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="RemoteStore";class SW{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{sl(this)&&(J(Ya,"Restarting streams for network reachability change."),await async function(l){const c=_e(l);c.Ea.add(4),await Xc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Eh(c)}(this))})}),this.Ra=new IW(r,s)}}async function Eh(t){if(sl(t))for(const e of t.da)await e(!0)}async function Xc(t){for(const e of t.da)await e(!1)}function vg(t,e){const n=_e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fE(n)?hE(n):eu(n).O_()&&dE(n,e))}function kc(t,e){const n=_e(t),r=eu(n);n.Ia.delete(e),r.O_()&&AN(n,e),n.Ia.size===0&&(r.O_()?r.L_():sl(n)&&n.Ra.set("Unknown"))}function dE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eu(t).Y_(e)}function AN(t,e){t.Va.Ue(e),eu(t).Z_(e)}function hE(t){t.Va=new _z({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),eu(t).start(),t.Ra.ua()}function fE(t){return sl(t)&&!eu(t).x_()&&t.Ia.size>0}function sl(t){return _e(t).Ea.size===0}function xN(t){t.Va=void 0}async function bW(t){t.Ra.set("Online")}async function AW(t){t.Ia.forEach((e,n)=>{dE(t,e)})}async function xW(t,e){xN(t),fE(t)?(t.Ra.ha(e),hE(t)):t.Ra.set("Unknown")}async function RW(t,e,n){if(t.Ra.set("Online"),e instanceof Fk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){J(Ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hm(t,r)}else if(e instanceof Yf?t.Va.Ze(e):e instanceof Mk?t.Va.st(e):t.Va.tt(e),!n.isEqual(ke.min()))try{const r=await mN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(un.EMPTY_BYTE_STRING,d.snapshotVersion)),AN(i,l);const h=new di(d.target,l,c,d.sequenceNumber);dE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J(Ya,"Failed to raise snapshot:",r),await hm(t,r)}}async function hm(t,e,n){if(!Ho(e))throw e;t.Ea.add(1),await Xc(t),t.Ra.set("Offline"),n||(n=()=>mN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Ya,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Eh(t)})}function RN(t,e){return e().catch(n=>hm(t,n,e))}async function Zc(t){const e=_e(t),n=Fo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Oa;for(;PW(e);)try{const s=await fW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,CW(e,s)}catch(s){await hm(e,s)}PN(e)&&CN(e)}function PW(t){return sl(t)&&t.Ta.length<10}function CW(t,e){t.Ta.push(e);const n=Fo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function PN(t){return sl(t)&&!Fo(t).x_()&&t.Ta.length>0}function CN(t){Fo(t).start()}async function DW(t){Fo(t).ra()}async function kW(t){const e=Fo(t);for(const n of t.Ta)e.ea(n.mutations)}async function NW(t,e,n){const r=t.Ta.shift(),s=Z0.from(r,e,n);await RN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zc(t)}async function OW(t,e){e&&Fo(t).X_&&await async function(r,s){if(function(o){return yz(o)&&o!==z.ABORTED}(s.code)){const i=r.Ta.shift();Fo(r).B_(),await RN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zc(r)}}(t,e),PN(t)&&CN(t)}async function iA(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),J(Ya,"RemoteStore received new credentials");const r=sl(n);n.Ea.add(3),await Xc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Eh(n)}async function Gw(t,e){const n=_e(t);e?(n.Ea.delete(2),await Eh(n)):e||(n.Ea.add(2),await Xc(n),n.Ra.set("Unknown"))}function eu(t){return t.ma||(t.ma=function(n,r,s){const i=_e(n);return i.sa(),new wW(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:bW.bind(null,t),t_:AW.bind(null,t),r_:xW.bind(null,t),H_:RW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),fE(t)?hE(t):t.Ra.set("Unknown")):(await t.ma.stop(),xN(t))})),t.ma}function Fo(t){return t.fa||(t.fa=function(n,r,s){const i=_e(n);return i.sa(),new _W(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:DW.bind(null,t),r_:OW.bind(null,t),ta:kW.bind(null,t),na:NW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zc(t)):(await t.fa.stop(),t.Ta.length>0&&(J(Ya,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new pE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(t,e){if(mn("AsyncQueue",`${e}: ${t}`),Ho(t))return new ne(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{static emptySet(e){return new Jl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=$u(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.ga=new Mt(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nc(e,n,Jl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ug(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class VW{constructor(){this.queries=aA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=_e(n),i=s.queries;s.queries=aA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ne(z.ABORTED,"Firestore shutting down"))}}function aA(){return new ki(t=>Tk(t),ug)}async function mE(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new LW,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Th(o,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&yE(n)}async function gE(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MW(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&yE(n)}function FW(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function yE(t){t.Ca.forEach(e=>{e.next()})}var Qw,lA;(lA=Qw||(Qw={})).Ma="default",lA.Cache="cache";class vE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.key=e}}class kN{constructor(e){this.key=e}}class NN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=Sk(e),this.tu=new Jl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new oA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=vh(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?w!==g&&(r.track({type:3,doc:p}),v=!0):this.su(f,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(p,w){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:v})}};return g(p)-g(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Nc(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new kN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new DN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=lt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Nc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tu="SyncEngine";class UW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jW{constructor(e){this.key=e,this.hu=!1}}class $W{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ki(a=>Tk(a),ug),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(ce.comparator),this.Au=new Map,this.Ru=new iE,this.Vu={},this.mu=new Map,this.fu=Qa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BW(t,e,n=!0){const r=wg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ON(r,e,n,!0),s}async function zW(t,e){const n=wg(t);await ON(n,e,!0,!1)}async function ON(t,e,n,r){const s=await lm(t.localStore,jr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await wE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&vg(t.remoteStore,s),a}async function wE(t,e,n,r,s){t.pu=(h,f,p)=>async function(g,v,E,y){let _=v.view.ru(E);_.Cs&&(_=await cm(g.localStore,v.query,!1).then(({documents:x})=>v.view.ru(x,_)));const R=y&&y.targetChanges.get(v.targetId),k=y&&y.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(_,g.isPrimaryClient,R,k);return Yw(g,v.targetId,L.au),L.snapshot}(t,h,f,p);const i=await cm(t.localStore,e,!0),o=new NN(e,i.Qs),a=o.ru(i.documents),l=_h.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Yw(t,n,c.au);const d=new UW(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function WW(t,e,n){const r=_e(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!ug(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Dc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&kc(r.remoteStore,s.targetId),Oc(r,s.targetId)}).catch(qo)):(Oc(r,s.targetId),await Dc(r.localStore,s.targetId,!0))}async function qW(t,e){const n=_e(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kc(n.remoteStore,r.targetId))}async function HW(t,e,n){const r=IE(t);try{const s=await function(o,a){const l=_e(o),c=Tt.now(),d=a.reduce((p,w)=>p.add(w.key),lt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=Lr(),g=lt();return l.Ns.getEntries(p,d).next(v=>{w=v,w.forEach((E,y)=>{y.isValidDocument()||(g=g.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,w)).next(v=>{h=v;const E=[];for(const y of a){const _=mz(y,h.get(y.key).overlayedDocument);_!=null&&E.push(new Ni(y.key,_,hk(_.value.mapValue),nr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(v=>{f=v;const E=v.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Ak(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Mt(Ge)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Go(r,s.changes),await Zc(r.remoteStore)}catch(s){const i=Th(s,"Failed to persist write");n.reject(i)}}async function LN(t,e){const n=_e(t);try{const r=await dW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ce(o.hu,14607):s.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))}),await Go(n,r,e)}catch(r){await qo(r)}}function cA(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=_e(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&yE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KW(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Mt(ce.comparator);o=o.insert(i,cn.newNoDocument(i,ke.min()));const a=lt().add(i),l=new wh(ke.min(),new Map,new Mt(Ge),o,a);await LN(r,l),r.du=r.du.remove(i),r.Au.delete(e),TE(r)}else await Dc(r.localStore,e,!1).then(()=>Oc(r,e,n)).catch(qo)}async function GW(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await uW(n.localStore,e);EE(n,r,null),_E(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Go(n,s)}catch(s){await qo(s)}}async function QW(t,e,n){const r=_e(t);try{const s=await function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ce(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);EE(r,e,n),_E(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Go(r,s)}catch(s){await qo(s)}}function _E(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function EE(t,e,n){const r=_e(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Oc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VN(t,r)})}function VN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),TE(t))}function Yw(t,e,n){for(const r of n)r instanceof DN?(t.Ru.addReference(r.key,e),YW(t,r)):r instanceof kN?(J(tu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VN(t,r.key)):we(19791,{wu:r})}function YW(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(tu,"New document in limbo: "+n),t.Eu.add(r),TE(t))}function TE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(It.fromString(e)),r=t.fu.next();t.Au.set(r,new jW(n)),t.du=t.du.insert(n,r),vg(t.remoteStore,new di(jr(yh(n.path)),r,"TargetPurposeLimboResolution",_r.ce))}}async function Go(t,e,n){const r=_e(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=lE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=_e(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.Es,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>M.forEach(f.ds,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Ho(h))throw h;J(cE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.Ms.get(f),w=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(f,g)}}}(r.localStore,i))}async function JW(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){J(tu,"User change. New user:",e.toKey());const r=await pN(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new ne(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Go(n,r.Ls)}}function XW(t,e){const n=_e(t),r=n.Au.get(e);if(r&&r.hu)return lt().add(r.key);{let s=lt();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function ZW(t,e){const n=_e(t),r=await cm(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Yw(n,e.targetId,s.au),s}async function e7(t,e){const n=_e(t);return yN(n.localStore,e).then(r=>Go(n,r))}async function t7(t,e,n,r){const s=_e(t),i=await function(a,l){const c=_e(a),d=_e(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Zc(s.remoteStore):n==="acknowledged"||n==="rejected"?(EE(s,e,r||null),_E(s,e),function(a,l){_e(_e(a).mutationQueue).ir(l)}(s.localStore,e)):we(6720,"Unknown batchState",{Su:n}),await Go(s,i)):J(tu,"Cannot apply mutation batch with id: "+e)}async function n7(t,e){const n=_e(t);if(wg(n),IE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await uA(n,r.toArray());n.gu=!0,await Gw(n.remoteStore,!0);for(const i of s)vg(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Oc(n,o),Dc(n.localStore,o,!0))),kc(n.remoteStore,o)}),await s,await uA(n,r),function(o){const a=_e(o);a.Au.forEach((l,c)=>{kc(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new Mt(ce.comparator)}(n),n.gu=!1,await Gw(n.remoteStore,!1)}}async function uA(t,e,n){const r=_e(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await lm(r.localStore,jr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await ZW(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await gN(r.localStore,o);a=await lm(r.localStore,c),await wE(r,MN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function MN(t){return _k(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function r7(t){return function(n){return _e(_e(n).persistence).Ts()}(_e(t).localStore)}async function s7(t,e,n,r){const s=_e(t);if(s.gu)return void J(tu,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await yN(s.localStore,Ik(i[0])),a=wh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",un.EMPTY_BYTE_STRING);await Go(s,o,a);break}case"rejected":await Dc(s.localStore,e,!0),Oc(s,e,r);break;default:we(64155,n)}}async function i7(t,e,n){const r=wg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){J(tu,"Adding an already active target "+s);continue}const i=await gN(r.localStore,s),o=await lm(r.localStore,i);await wE(r,MN(i),o.targetId,!1,o.resumeToken),vg(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Dc(r.localStore,s,!1).then(()=>{kc(r.remoteStore,s),Oc(r,s)}).catch(qo)}}function wg(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KW.bind(null,e),e.Pu.H_=MW.bind(null,e.eventManager),e.Pu.yu=FW.bind(null,e.eventManager),e}function IE(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QW.bind(null,e),e}class Xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fN(this.persistence,new hN,e.initialUser,this.serializer)}Cu(e){return new oE(gg.mi,this.serializer)}Du(e){return new TN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xd.provider={build:()=>new Xd};class o7 extends Xd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ce(this.persistence.referenceDelegate instanceof am,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new oE(r=>am.mi(r,n),this.serializer)}}class FN extends Xd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await IE(this.xu.syncEngine),await Zc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return fN(this.persistence,new hN,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new oN(r,e.asyncQueue,n)}Mu(e,n){const r=new v9(n,this.persistence);return new y9(e.asyncQueue,r)}Cu(e){const n=dN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new aE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,IN(),Xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new TN}}class a7 extends FN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof jy&&(this.sharedClientState.syncEngine={Co:t7.bind(null,n),vo:s7.bind(null,n),Fo:i7.bind(null,n),Ts:r7.bind(null,n),Do:e7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await n7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=IN();if(!jy.v(n))throw new ne(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jy(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JW.bind(null,this.syncEngine),await Gw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VW}()}createDatastore(e){const n=yg(e.databaseInfo.databaseId),r=function(i){return new vW(i)}(e.databaseInfo);return function(i,o,a,l){return new TW(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new SW(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>cA(this.syncEngine,n,0),function(){return rA.v()?new rA:new pW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new $W(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=_e(s);J(Ya,"RemoteStore shutting down."),i.Ea.add(5),await Xc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Zd.provider={build:()=>new Zd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="FirestoreClient";class l7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Xn.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J(Uo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(Uo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Th(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function By(t,e){t.asyncQueue.verifyOperationInProgress(),J(Uo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bE(t);J(Uo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>iA(e.remoteStore,s)),t._onlineComponents=e}async function bE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Uo,"Using user provided OfflineComponentProvider");try{await By(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Oo("Error using user provided cache. Falling back to memory cache: "+n),await By(t,new Xd)}}else J(Uo,"Using default OfflineComponentProvider"),await By(t,new o7(void 0));return t._offlineComponents}async function AE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Uo,"Using user provided OnlineComponentProvider"),await dA(t,t._uninitializedComponentsProvider._online)):(J(Uo,"Using default OnlineComponentProvider"),await dA(t,new Zd))),t._onlineComponents}function UN(t){return bE(t).then(e=>e.persistence)}function jN(t){return bE(t).then(e=>e.localStore)}function $N(t){return AE(t).then(e=>e.remoteStore)}function c7(t){return AE(t).then(e=>e.syncEngine)}async function fm(t){const e=await AE(t),n=e.eventManager;return n.onListen=BW.bind(null,e.syncEngine),n.onUnlisten=WW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qW.bind(null,e.syncEngine),n}function u7(t){return t.asyncQueue.enqueue(async()=>{const e=await UN(t),n=await $N(t);return e.setNetworkEnabled(!0),function(s){const i=_e(s);return i.Ea.delete(0),Eh(i)}(n)})}function d7(t){return t.asyncQueue.enqueue(async()=>{const e=await UN(t),n=await $N(t);return e.setNetworkEnabled(!1),async function(s){const i=_e(s);i.Ea.add(0),await Xc(i),i.Ra.set("Offline")}(n)})}function h7(t,e){const n=new es;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=_e(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new ne(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Th(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await jN(t),e,n)),n.promise}function f7(t,e,n={}){const r=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new SE({next:f=>{d.Nu(),o.enqueueAndForget(()=>gE(i,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new ne(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new ne(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new vE(yh(a.path),d,{includeMetadataChanges:!0,qa:!0});return mE(i,h)}(await fm(t),t.asyncQueue,e,n,r)),r.promise}function p7(t,e){const n=new es;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await cm(s,i,!0),l=new NN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Th(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await jN(t),e,n)),n.promise}function m7(t,e,n={}){const r=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new SE({next:f=>{d.Nu(),o.enqueueAndForget(()=>gE(i,h)),f.fromCache&&l.source==="server"?c.reject(new ne(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new vE(a,d,{includeMetadataChanges:!0,qa:!0});return mE(i,h)}(await fm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="firestore.googleapis.com",fA=!0;class pA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g7,this.ssl=fA}else this.host=e.host,this.ssl=e.ssl??fA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new ne(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VD;switch(r.type){case"firstParty":return new l9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hA.get(n);r&&(J("ComponentProvider","Removing Datastore"),hA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class Gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ph(n,Gt._jsonSchema))return new Gt(e,r||null,new ce(It.fromString(n.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:Tn("string",Gt._jsonSchemaVersion),referencePath:Tn("string")};class fi extends Ss{constructor(e,n,r){super(e,n,yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ce(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function Pe(t,e,...n){if(t=Pt(t),FD("collection","path",e),t instanceof xE){const r=It.fromString(e,...n);return sb(r),new fi(t,null,r)}{if(!(t instanceof Gt||t instanceof fi))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return sb(r),new fi(t.firestore,null,r)}}function Re(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=tg.newId()),FD("doc","path",e),t instanceof xE){const r=It.fromString(e,...n);return rb(r),new Gt(t,null,new ce(r))}{if(!(t instanceof Gt||t instanceof fi))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return rb(r),new Gt(t.firestore,t instanceof fi?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="AsyncQueue";class gA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SN(this,"async_queue_retry"),this._c=()=>{const r=Xf();r&&J(mA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Xf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new es;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;J(mA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",yA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=pE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&we(47125,{Pc:yA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fr extends xE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new gA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gA(e),this._firestoreClient=void 0,await e}}}function zN(t,e,n){n||(n=Xp);const r=Zm(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(gc(i,e))return s;throw new ne(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ne(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new ne(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ci(e.host)&&C0(e.host),r.initialize({options:e,instanceIdentifier:n})}function Oi(t){if(t._terminated)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WN(t),t._firestoreClient}function WN(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new H9(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,BN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new l7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function y7(t,e){Oo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return qN(t,Zd.provider,{build:r=>new FN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function v7(t){Oo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();qN(t,Zd.provider,{build:n=>new a7(n,e.cacheSizeBytes)})}function qN(t,e,n){if((t=yn(t,fr))._firestoreClient||t._terminated)throw new ne(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ne(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},WN(t)}function RE(t){return u7(Oi(t=yn(t,fr)))}function PE(t){return d7(Oi(t=yn(t,fr)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kr(un.fromBase64String(e))}catch(n){throw new ne(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ph(e,kr._jsonSchema))return kr.fromBase64String(e.bytes)}}kr._jsonSchemaVersion="firestore/bytes/1.0",kr._jsonSchema={type:Tn("string",kr._jsonSchemaVersion),bytes:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gs._jsonSchemaVersion}}static fromJSON(e){if(ph(e,gs._jsonSchema))return new gs(e.latitude,e.longitude)}}gs._jsonSchemaVersion="firestore/geoPoint/1.0",gs._jsonSchema={type:Tn("string",gs._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ph(e,ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ys(e.vectorValues);throw new ne(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ys._jsonSchemaVersion="firestore/vectorValue/1.0",ys._jsonSchema={type:Tn("string",ys._jsonSchemaVersion),vectorValues:Tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=/^__.*__$/;class _7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jc(e,this.data,n,this.fieldTransforms)}}class HN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class _g{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KN(this.Ac)&&w7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yg(e)}Cc(e,n,r,s=!1){return new _g({Ac:e,methodName:n,Dc:r,path:Kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eg(t){const e=t._freezeSettings(),n=yg(t._databaseId);return new E7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GN(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);kE("Data must be an object, but it was:",o,r);const a=QN(r,o);let l,c;if(i.merge)l=new Er(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Jw(e,h,n);if(!o.contains(f))throw new ne(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);JN(d,f)||d.push(f)}l=new Er(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new _7(new tr(a),l,c)}class Tg extends nu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tg}}function T7(t,e,n){return new _g({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class CE extends nu{_toFieldTransform(e){return new J0(e.path,new Rc)}isEqual(e){return e instanceof CE}}class DE extends nu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=T7(this,e,!0),r=this.vc.map(i=>ru(i,n)),s=new Ha(r);return new J0(e.path,s)}isEqual(e){return e instanceof DE&&gc(this.vc,e.vc)}}function I7(t,e,n,r){const s=t.Cc(1,e,n);kE("Data must be an object, but it was:",s,r);const i=[],o=tr.empty();Ko(r,(l,c)=>{const d=NE(e,l,n);c=Pt(c);const h=s.yc(d);if(c instanceof Tg)i.push(d);else{const f=ru(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Er(i);return new HN(o,a,s.fieldTransforms)}function S7(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Jw(e,r,n)],l=[s];if(i.length%2!=0)throw new ne(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Jw(e,i[f])),l.push(i[f+1]);const c=[],d=tr.empty();for(let f=a.length-1;f>=0;--f)if(!JN(c,a[f])){const p=a[f];let w=l[f];w=Pt(w);const g=o.yc(p);if(w instanceof Tg)c.push(p);else{const v=ru(w,g);v!=null&&(c.push(p),d.set(p,v))}}const h=new Er(c);return new HN(d,h,o.fieldTransforms)}function b7(t,e,n,r=!1){return ru(n,t.Cc(r?4:3,e))}function ru(t,e){if(YN(t=Pt(t)))return kE("Unsupported field value:",e,t),QN(t,e);if(t instanceof nu)return function(r,s){if(!KN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ru(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Tt.fromDate(r);return{timestampValue:Cc(s.serializer,i)}}if(r instanceof Tt){const i=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cc(s.serializer,i)}}if(r instanceof gs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:Uk(s.serializer,r._byteString)};if(r instanceof Gt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ys)return function(o,a){return{mapValue:{fields:{[H0]:{stringValue:K0},[Sc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Y0(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ng(r)}`)}(t,e)}function QN(t,e){const n={};return rk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(t,(r,s)=>{const i=ru(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function YN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof gs||t instanceof kr||t instanceof Gt||t instanceof nu||t instanceof ys)}function kE(t,e,n){if(!YN(n)||!jD(n)){const r=ng(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Jw(t,e,n){if((e=Pt(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return NE(t,e);throw pm("Field path arguments must be of type string or ",t,!1,void 0,n)}const A7=new RegExp("[~\\*/\\[\\]]");function NE(t,e,n){if(e.search(A7)>=0)throw pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ih(...e.split("."))._internalPath}catch{throw pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ne(z.INVALID_ARGUMENT,a+t+l)}function JN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x7 extends XN{data(){return super.data()}}function Ig(t,e){return typeof e=="string"?NE(t,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OE{}class Sg extends OE{}function $e(t,e,...n){let r=[];e instanceof OE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof bg).length,a=i.filter(l=>l instanceof Sh).length;if(o>1||o>0&&a>0)throw new ne(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sh extends Sg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sh(e,n,r)}_apply(e){const n=this._parse(e);return eO(e._query,n),new Ss(e.firestore,e.converter,Fw(e._query,n))}_parse(e){const n=Eg(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ne(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){_A(h,d);const w=[];for(const g of h)w.push(wA(l,i,g));f={arrayValue:{values:w}}}else f=wA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||_A(h,d),f=b7(a,o,h,d==="in"||d==="not-in");return pt.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fe(t,e,n){const r=e,s=Ig("where",t);return Sh._create(s,r,n)}class bg extends OE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:At.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)eO(o,l),o=Fw(o,l)}(e._query,n),new Ss(e.firestore,e.converter,Fw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends Sg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ag(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yd(i,o)}(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Yc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Hs(t,e="asc"){const n=e,r=Ig("orderBy",t);return Ag._create(r,n)}class xg extends Sg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xg(e,n,r)}_apply(e){return new Ss(e.firestore,e.converter,tm(e._query,this._limit,this._limitType))}}function xo(t){return p9("limit",t),xg._create("limit",t,"F")}function wA(t,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new ne(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ek(e)&&n.indexOf("/")!==-1)throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!ce.isDocumentKey(r))throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gd(t,new ce(r))}if(n instanceof Gt)return Gd(t,n._key);throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ng(n)}.`)}function _A(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eO(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tO{convertValue(e,n="none"){switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ko(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Sc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>qt(o.doubleValue));return new ys(n)}convertGeoPoint(e){return new gs(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hd(e));default:return null}}convertTimestamp(e){const n=bi(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);Ce(Qk(r),9688,{name:e});const s=new Lo(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||mn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class va{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pi extends XN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ig("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",pi._jsonSchema={type:Tn("string",pi._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class dd extends pi{data(e={}){return super.data(e)}}class mi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new va(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dd(this._firestore,this._userDataWriter,r.key,r,new va(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new dd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new va(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new dd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new va(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:R7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){t=yn(t,Gt);const e=yn(t.firestore,fr);return f7(Oi(e),t._key).then(n=>sO(e,t,n))}mi._jsonSchemaVersion="firestore/querySnapshot/1.0",mi._jsonSchema={type:Tn("string",mi._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class bh extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function rO(t){t=yn(t,Gt);const e=yn(t.firestore,fr),n=Oi(e),r=new bh(e);return h7(n,t._key).then(s=>new pi(e,r,t._key,s,new va(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ke(t){t=yn(t,Ss);const e=yn(t.firestore,fr),n=Oi(e),r=new bh(e);return ZN(t._query),m7(n,t._query).then(s=>new mi(e,r,t,s))}function P7(t){t=yn(t,Ss);const e=yn(t.firestore,fr),n=Oi(e),r=new bh(e);return p7(n,t._query).then(s=>new mi(e,r,t,s))}function ln(t,e,n){t=yn(t,Gt);const r=yn(t.firestore,fr),s=nO(t.converter,e,n);return Ah(r,[GN(Eg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nr.none())])}function vn(t,e,n,...r){t=yn(t,Gt);const s=yn(t.firestore,fr),i=Eg(s);let o;return o=typeof(e=Pt(e))=="string"||e instanceof Ih?S7(i,"updateDoc",t._key,e,n,r):I7(i,"updateDoc",t._key,e),Ah(s,[o.toMutation(t._key,nr.exists(!0))])}function On(t){return Ah(yn(t.firestore,fr),[new fg(t._key,nr.none())])}function Ks(t,e){const n=yn(t.firestore,fr),r=Re(t),s=nO(t.converter,e);return Ah(n,[GN(Eg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}function xi(t,...e){var l,c,d;t=Pt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||vA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(vA(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof Gt)o=yn(t.firestore,fr),a=yh(t._key.path),i={next:h=>{e[r]&&e[r](sO(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=yn(t,Ss);o=yn(h.firestore,fr),a=h._query;const f=new bh(o);i={next:p=>{e[r]&&e[r](new mi(o,f,h,p))},error:e[r+1],complete:e[r+2]},ZN(t._query)}return function(f,p,w,g){const v=new SE(g),E=new vE(p,v,w);return f.asyncQueue.enqueueAndForget(async()=>mE(await fm(f),E)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>gE(await fm(f),E))}}(Oi(o),a,s,i)}function Ah(t,e){return function(r,s){const i=new es;return r.asyncQueue.enqueueAndForget(async()=>HW(await c7(r),s,i)),i.promise}(Oi(t),e)}function sO(t,e,n){const r=n.docs.get(e._key),s=new bh(t);return new pi(t,s,e._key,r,new va(n.hasPendingWrites,n.fromCache),e.converter)}function je(){return new CE("serverTimestamp")}function C7(...t){return new DE("arrayUnion",t)}(function(e,n=!0){(function(s){Qc=s})(hh),Ys(new Es("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fr(new o9(r.getProvider("auth-internal")),new c9(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ur(ZS,eb,e),Ur(ZS,eb,"esm2020")})();const hn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:tO,Bytes:kr,CollectionReference:fi,DocumentReference:Gt,DocumentSnapshot:pi,FieldPath:Ih,FieldValue:nu,Firestore:fr,FirestoreError:ne,GeoPoint:gs,Query:Ss,QueryCompositeFilterConstraint:bg,QueryConstraint:Sg,QueryDocumentSnapshot:dd,QueryFieldFilterConstraint:Sh,QueryLimitConstraint:xg,QueryOrderByConstraint:Ag,QuerySnapshot:mi,SnapshotMetadata:va,Timestamp:Tt,VectorValue:ys,_AutoId:tg,_ByteString:un,_DatabaseId:Lo,_DocumentKey:ce,_EmptyAuthCredentialsProvider:VD,_FieldPath:Kt,_cast:yn,_logWarn:Oo,_validateIsNotUsedTogether:UD,addDoc:Ks,arrayUnion:C7,collection:Pe,deleteDoc:On,disableNetwork:PE,doc:Re,enableIndexedDbPersistence:y7,enableMultiTabIndexedDbPersistence:v7,enableNetwork:RE,ensureFirestoreConfigured:Oi,executeWrite:Ah,getDoc:Jt,getDocFromCache:rO,getDocs:Ke,getDocsFromCache:P7,initializeFirestore:zN,limit:xo,onSnapshot:xi,orderBy:Hs,query:$e,serverTimestamp:je,setDoc:ln,setLogLevel:OD,updateDoc:vn,where:Fe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7="type.googleapis.com/google.protobuf.Int64Value",k7="type.googleapis.com/google.protobuf.UInt64Value";function iO(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function mm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>mm(e));if(typeof t=="function"||typeof t=="object")return iO(t,e=>mm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Lc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case D7:case k7:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Lc(e)):typeof t=="function"||typeof t=="object"?iO(t,e=>Lc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tr extends Is{constructor(e,n,r){super(`${LE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Tr.prototype)}}function N7(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function gm(t,e){let n=N7(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!EA[o])return new Tr("internal","internal");n=EA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Lc(s))}}catch{}return n==="ok"?null:new Tr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Dr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="us-central1",L7=/^data: (.*?)(?:\n|$)/;function V7(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Tr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class M7{constructor(e,n,r,s,i=Xw,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new O7(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Xw}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function F7(t,e,n){const r=Ci(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(C0(t.emulatorOrigin+"/backends"),zC("Functions",!0))}function U7(t,e,n){const r=s=>$7(t,e,s,{});return r.stream=(s,i)=>z7(t,e,s,i),r}function oO(t){return t.emulatorOrigin&&Ci(t.emulatorOrigin)?"include":void 0}async function j7(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:oO(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function aO(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function $7(t,e,n,r){const s=t._url(e);return B7(t,s,n,r)}async function B7(t,e,n,r){n=mm(n);const s={data:n},i=await aO(t,r),o=r.timeout||7e4,a=V7(o),l=await Promise.race([j7(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new Tr("cancelled","Firebase Functions instance was deleted.");const c=gm(l.status,l.json);if(c)throw c;if(!l.json)throw new Tr("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Tr("internal","Response is missing data field.");return{data:Lc(d)}}function z7(t,e,n,r){const s=t._url(e);return W7(t,s,n,r||{})}async function W7(t,e,n,r){var f;n=mm(n);const s={data:n},i=await aO(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:oO(t)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const g=new Tr("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const w=gm(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let a,l;const c=new Promise((p,w)=>{a=p,l=w});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const p=new Tr("cancelled","Request was cancelled.");l(p)});const d=o.body.getReader(),h=q7(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:w,done:g}=await p.read();return{value:w,done:g}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function q7(t,e,n,r){const s=(o,a)=>{const l=o.match(L7);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e(Lc(d.result));return}if("message"in d){a.enqueue(Lc(d.message));return}if("error"in d){const h=gm(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof Tr){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new Tr("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Tr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof Tr?c:gm(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const TA="@firebase/functions",IA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="auth-internal",K7="app-check-internal",G7="messaging-internal";function Q7(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(H7),o=n.getProvider(G7),a=n.getProvider(K7);return new M7(s,i,o,a,r)};Ys(new Es(LE,e,"PUBLIC").setMultipleInstances(!0)),Ur(TA,IA,t),Ur(TA,IA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t=JC(),e=Xw){const r=Zm(Pt(t),LE).getImmediate({identifier:e}),s=$C("functions");return s&&J7(r,...s),r}function J7(t,e,n){F7(Pt(t),e,n)}function oG(t,e,n){return U7(Pt(t),e)}Q7();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="firebasestorage.googleapis.com",cO="storageBucket",X7=2*60*1e3,Z7=10*60*1e3,e8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Is{constructor(e,n,r=0){super(zy(e),`Firebase Storage: ${n} (${zy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function zy(t){return"storage/"+t}function VE(){const t="An unknown error occurred, please check the error payload for server response.";return new tn(Wt.UNKNOWN,t)}function t8(t){return new tn(Wt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function n8(t){return new tn(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function r8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(Wt.UNAUTHENTICATED,t)}function s8(){return new tn(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function i8(t){return new tn(Wt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uO(){return new tn(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dO(){return new tn(Wt.CANCELED,"User canceled the upload/download.")}function o8(t){return new tn(Wt.INVALID_URL,"Invalid URL '"+t+"'.")}function a8(t){return new tn(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function l8(){return new tn(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cO+"' property when initializing the app?")}function hO(){return new tn(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function c8(){return new tn(Wt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function u8(){return new tn(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function d8(t){return new tn(Wt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zw(t){return new tn(Wt.INVALID_ARGUMENT,t)}function fO(){return new tn(Wt.APP_DELETED,"The Firebase app was deleted.")}function h8(t){return new tn(Wt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hd(t,e){return new tn(Wt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Cu(t){throw new tn(Wt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vr.makeFromUrl(e,n)}catch{return new Vr(e,"")}if(r.path==="")return r;throw a8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),w={bucket:1,path:3},g=n===lO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",E=new RegExp(`^https?://${g}/${s}/${v}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:p,indices:w,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<_.length;R++){const k=_[R],L=k.regex.exec(e);if(L){const x=L[k.indices.bucket];let A=L[k.indices.path];A||(A=""),r=new Vr(x,A),k.postModify(r);break}}if(r==null)throw o8(e);return r}}class f8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(p,l())},v)}function f(){i&&clearTimeout(i)}function p(v,...E){if(c){f();return}if(v){f(),d.call(null,v,...E);return}if(l()||o){f(),d.call(null,v,...E);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,h(_)}let w=!1;function g(v){w||(w=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function m8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){return t!==void 0}function y8(t){return typeof t=="function"}function v8(t){return typeof t=="object"&&!Array.isArray(t)}function Rg(t){return typeof t=="string"||t instanceof String}function SA(t){return ME()&&t instanceof Blob}function ME(){return typeof Blob<"u"}function bA(t,e,n,r){if(r<e)throw Zw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function pO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ma;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,g)=>{this.resolve_=w,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new gf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ma.NO_ERROR,l=i.getStatus();if(!a||mO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ma.ABORT;r(!1,new gf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new gf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());g8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=VE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?fO():dO();o(l)}else{const l=uO();o(l)}};this.canceled_?n(!1,new gf(!1,null,!0)):this.backoffId_=p8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&m8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function I8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function S8(t,e,n,r,s,i,o=!0,a=!1){const l=pO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return T8(d,e),_8(d,n),E8(d,i),I8(d,r),new w8(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A8(...t){const e=b8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ME())return new Blob(t);throw new tn(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function x8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(t){if(typeof atob>"u")throw d8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wy{constructor(e,n){this.data=e,this.contentType=n||null}}function P8(t,e){switch(t){case Bs.RAW:return new Wy(gO(e));case Bs.BASE64:case Bs.BASE64URL:return new Wy(yO(t,e));case Bs.DATA_URL:return new Wy(D8(e),k8(e))}throw VE()}function gO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function C8(t){let e;try{e=decodeURIComponent(t)}catch{throw hd(Bs.DATA_URL,"Malformed data URL.")}return gO(e)}function yO(t,e){switch(t){case Bs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw hd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Bs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw hd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=R8(e)}catch(s){throw s.message.includes("polyfill")?s:hd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class vO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw hd(Bs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=N8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function D8(t){const e=new vO(t);return e.base64?yO(Bs.BASE64,e.rest):C8(e.rest)}function k8(t){return new vO(t).contentType}function N8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){let r=0,s="";SA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(SA(this.data_)){const r=this.data_,s=x8(r,e,n);return s===null?null:new ai(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ai(r,!0)}}static getBlob(...e){if(ME()){const n=e.map(r=>r instanceof ai?r.data_:r);return new ai(A8.apply(null,n))}else{const n=e.map(o=>Rg(o)?P8(Bs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ai(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){let e;try{e=JSON.parse(t)}catch{return null}return v8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function _O(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t,e){return e}class or{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||V8}}let yf=null;function M8(t){return!Rg(t)||t.length<2?t:_O(t)}function FE(){if(yf)return yf;const t=[];t.push(new or("bucket")),t.push(new or("generation")),t.push(new or("metageneration")),t.push(new or("name","fullPath",!0));function e(i,o){return M8(o)}const n=new or("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new or("size");return s.xform=r,t.push(s),t.push(new or("timeCreated")),t.push(new or("updated")),t.push(new or("md5Hash",null,!0)),t.push(new or("cacheControl",null,!0)),t.push(new or("contentDisposition",null,!0)),t.push(new or("contentEncoding",null,!0)),t.push(new or("contentLanguage",null,!0)),t.push(new or("contentType",null,!0)),t.push(new or("metadata","customMetadata",!0)),yf=t,yf}function F8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Vr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function U8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return F8(r,t),r}function EO(t,e,n){const r=wO(e);return r===null?null:U8(t,r,n)}function j8(t,e,n,r){const s=wO(e);if(s===null||!Rg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=xh(f,n,r),w=pO({alt:"media",token:c});return p+w})[0]}function TO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class su{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t){if(!t)throw VE()}function UE(t,e){function n(r,s){const i=EO(t,s,e);return gi(i!==null),i}return n}function $8(t,e){function n(r,s){const i=EO(t,s,e);return gi(i!==null),j8(i,s,t.host,t._protocol)}return n}function Rh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=s8():s=r8():n.getStatus()===402?s=n8(t.bucket):n.getStatus()===403?s=i8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function IO(t){const e=Rh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=t8(t.path)),i.serverResponse=s.serverResponse,i}return n}function B8(t,e,n){const r=e.fullServerUrl(),s=xh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new su(s,i,UE(t,n),o);return a.errorHandler=IO(e),a}function z8(t,e,n){const r=e.fullServerUrl(),s=xh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new su(s,i,$8(t,n),o);return a.errorHandler=IO(e),a}function W8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function SO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=W8(null,e)),r}function bO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let R=0;R<2;R++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=SO(e,r,s),d=TO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=ai.getBlob(h,r,f);if(p===null)throw hO();const w={name:c.fullPath},g=xh(i,t.host,t._protocol),v="POST",E=t.maxUploadRetryTime,y=new su(g,v,UE(t,n),E);return y.urlParams=w,y.headers=o,y.body=p.uploadData(),y.errorHandler=Rh(e),y}class ym{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function jE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{gi(!1)}return gi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function q8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=SO(e,r,s),a={name:o.fullPath},l=xh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=TO(o,n),f=t.maxUploadRetryTime;function p(g){jE(g);let v;try{v=g.getResponseHeader("X-Goog-Upload-URL")}catch{gi(!1)}return gi(Rg(v)),v}const w=new su(l,c,p,f);return w.urlParams=a,w.headers=d,w.body=h,w.errorHandler=Rh(e),w}function H8(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=jE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{gi(!1)}h||gi(!1);const f=Number(h);return gi(!isNaN(f)),new ym(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new su(n,o,i,a);return l.headers=s,l.errorHandler=Rh(e),l}const AA=256*1024;function K8(t,e,n,r,s,i,o,a){const l=new ym(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw c8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let p="";d===0?p="finalize":c===d?p="upload, finalize":p="upload";const w={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,f);if(g===null)throw hO();function v(R,k){const L=jE(R,["active","final"]),x=l.current+d,A=r.size();let b;return L==="final"?b=UE(e,i)(R,k):b=null,new ym(x,A,L==="final",b)}const E="POST",y=e.maxUploadRetryTime,_=new su(n,E,v,y);return _.headers=w,_.body=g.uploadData(),_.progressCallback=a||null,_.errorHandler=Rh(t),_}const yr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qy(t){switch(t){case"running":case"pausing":case"canceling":return yr.RUNNING;case"paused":return yr.PAUSED;case"success":return yr.SUCCESS;case"canceled":return yr.CANCELED;case"error":return yr.ERROR;default:return yr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,n,r){if(y8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Q8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ma.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ma.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ma.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Cu("cannot .send() more than once");if(Ci(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Y8 extends Q8{initXhr(){this.xhr_.responseType="text"}}function da(){return new Y8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=FE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Wt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(mO(s.status,[]))if(i)s=uO();else{this.sleepTime=Math.max(this.sleepTime*2,e8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Wt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=q8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,da,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=H8(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,da,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=AA*this._chunkMultiplier,n=new ym(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=K8(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,da,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){AA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=B8(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,da,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=bO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,da,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=dO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=qy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new G8(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(qy(this._state)){case yr.SUCCESS:vl(this._resolve.bind(null,this.snapshot))();break;case yr.CANCELED:case yr.ERROR:const n=this._reject;vl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qy(this._state)){case yr.RUNNING:case yr.PAUSED:e.next&&vl(e.next.bind(e,this.snapshot))();break;case yr.SUCCESS:e.complete&&vl(e.complete.bind(e))();break;case yr.CANCELED:case yr.ERROR:e.error&&vl(e.error.bind(e,this._error))();break;default:e.error&&vl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this._service=e,n instanceof Vr?this._location=n:this._location=Vr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ja(e,n)}get root(){const e=new Vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _O(this._location.path)}get storage(){return this._service}get parent(){const e=O8(this._location.path);if(e===null)return null;const n=new Vr(this._location.bucket,e);return new Ja(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h8(e)}}function X8(t,e,n){t._throwIfRoot("uploadBytes");const r=bO(t.storage,t._location,FE(),new ai(e,!0),n);return t.storage.makeRequestWithTokens(r,da).then(s=>({metadata:s,ref:t}))}function Z8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new J8(t,new ai(e),n)}function eq(t){t._throwIfRoot("getDownloadURL");const e=z8(t.storage,t._location,FE());return t.storage.makeRequestWithTokens(e,da).then(n=>{if(n===null)throw u8();return n})}function tq(t,e){const n=L8(t._location.path,e),r=new Vr(t._location.bucket,n);return new Ja(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){return/^[A-Za-z]+:\/\//.test(t)}function rq(t,e){return new Ja(t,e)}function AO(t,e){if(t instanceof $E){const n=t;if(n._bucket==null)throw l8();const r=new Ja(n,n._bucket);return e!=null?AO(r,e):r}else return e!==void 0?tq(t,e):t}function sq(t,e){if(e&&nq(e)){if(t instanceof $E)return rq(t,e);throw Zw("To use ref(service, url), the first argument must be a Storage instance.")}else return AO(t,e)}function xA(t,e){const n=e==null?void 0:e[cO];return n==null?null:Vr.makeFromBucketSpec(n,t)}function iq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ci(e);s&&(C0(`https://${t.host}/b`),zC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:q6(i,t.app.options.projectId))}class $E{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=lO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X7,this._maxUploadRetryTime=Z7,this._requests=new Set,s!=null?this._bucket=Vr.makeFromBucketSpec(s,this._host):this._bucket=xA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vr.makeFromBucketSpec(this._url,e):this._bucket=xA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ja(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new f8(fO());{const o=S8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const RA="@firebase/storage",PA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="storage";function aG(t,e,n){return t=Pt(t),X8(t,e,n)}function oq(t,e,n){return t=Pt(t),Z8(t,e,n)}function aq(t){return t=Pt(t),eq(t)}function lq(t,e){return t=Pt(t),sq(t,e)}function RO(t=JC(),e){t=Pt(t);const r=Zm(t,xO).getImmediate({identifier:e}),s=$C("storage");return s&&cq(r,...s),r}function cq(t,e,n,r={}){iq(t,e,n,r)}function uq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new $E(n,r,s,e,hh)}function dq(){Ys(new Es(xO,uq,"PUBLIC").setMultipleInstances(!0)),Ur(RA,PA,""),Ur(RA,PA,"esm2020")}dq();const hq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},e_={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:e_.projectId,authDomain:e_.authDomain,emulatorMode:!1});const Pg=YC(e_);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Ot=ZB(Pg,{persistence:[wD,Iw]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const H=zN(Pg,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{OD("error")}catch{}const fq=Y7(Pg,"us-central1"),pq=RO(Pg);console.log(" Firebase initialized successfully");const mq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(mq,100);let oa=0;const Hy=3,gq=1e3,PO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&oa<Hy){oa++;const r=Math.min(gq*Math.pow(2,oa-1),1e4);console.log(` Attempting to reconnect (${oa}/${Hy}) in ${r}ms...`);try{await PE(H),await new Promise(s=>setTimeout(s,r)),await RE(H),console.log(" Firestore reconnected successfully"),oa=0}catch(s){console.error(" Failed to reconnect:",s),oa>=Hy&&(console.error(" Maximum reconnection attempts reached."),yq())}}},yq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await RE(H),oa=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await PE(H),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(PO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const kt=Object.freeze(Object.defineProperty({__proto__:null,auth:Ot,db:H,functions:fq,handleFirestoreError:PO,storage:pq},Symbol.toStringTag,{value:"Module"})),at=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},vq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},Xa=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>Xa(n)).filter(n=>n!==void 0);if(t instanceof Date||!vq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=Xa(r);s!==void 0&&(e[n]=s)}return e},Zf={async create(t){await ln(Re(H,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:je()})},async getById(t){const e=Re(H,"profiles",t),n=await Jt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:at(r.createdAt)}}return null},async update(t,e){const n=Re(H,"profiles",t);await vn(n,{...e,updatedAt:je()})},async getByShopId(t){const e=$e(Pe(H,"profiles"),Fe("shopId","==",t));return(await Ke(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:at(s.createdAt)}})}},t_={async create(t){return(await Ks(Pe(H,"referrals"),{...t,createdAt:je(),updatedAt:je()})).id},async getByReferrerId(t){try{const e=$e(Pe(H,"referrals"),Fe("referrerId","==",t),Hs("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:at(r.data().createdAt),updatedAt:at(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=$e(Pe(H,"referrals"),Fe("referrerId","==",t));return(await Ke(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:at(i.data().createdAt),updatedAt:at(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=$e(Pe(H,"referrals"),Fe("referralCode","==",t),xo(1)),n=await Ke(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:at(r.data().createdAt),updatedAt:at(r.data().updatedAt)}},async updateStatus(t,e){await vn(Re(H,"referrals",t),{status:e,updatedAt:je()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},CO={async getByUserId(t){const e=$e(Pe(H,"profiles"),Fe("userId","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:at(s.createdAt),updatedAt:at(s.updatedAt)}}return null},async update(t,e){const n=$e(Pe(H,"profiles"),Fe("userId","==",t)),r=await Ke(n);if(!r.empty){const s=Re(H,"profiles",r.docs[0].id);await vn(s,{...e,updatedAt:je()})}}},ho={async create(t){return(await Ks(Pe(H,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:je(),updatedAt:je()})).id},async getByMerchantId(t){const e=$e(Pe(H,"merchantWallets"),Fe("merchantUserId","==",t)),r=(await Ke(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:at(l.createdAt),updatedAt:at(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=$e(Pe(H,"wallets"),Fe("userId","==",t));return(await Ke(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:at(l.createdAt),updatedAt:at(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=Re(H,"merchantWallets",t),n=await Jt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:at(r.createdAt),updatedAt:at(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=$e(Pe(H,"merchantWallets"),Fe("iccid","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:at(s.createdAt),updatedAt:at(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=$e(Pe(H,"merchantWallets"),Fe("msisdn","==",t)),r=await Ke(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:at(l.createdAt),updatedAt:at(l.updatedAt)}}const s=$e(Pe(H,"merchantWallets")),i=await Ke(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:at(l.createdAt),updatedAt:at(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Re(H,"merchantWallets",t);await vn(n,{...e,updatedAt:je()})},async updateUsage(t,e,n){const r=Re(H,"merchantWallets",t),s={updatedAt:je()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await vn(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=$e(Pe(H,"merchantWallets"),Fe("msisdn","in",o)),c=(await Ke(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await vn(d.ref,{merchantUserId:e,updatedAt:je()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Re(H,"merchantWallets",t);await On(e)}},BE={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Q(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>ba);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:je(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Ks(Pe(H,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await Q(async()=>{const{ProfitService:d}=await import("./profitService-Dt6LKUWS.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await ho.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),p=Number(t.amount||0),w=String((t==null?void 0:t.originType)||"").trim()==="withdraw",g=String(t.txnType||"")==="receive";w||g?await ho.updateUsage(c,void 0,f+p):await ho.updateUsage(c,h+p,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let p="";if(h)try{const g=await ho.getById(h);p=String((g==null?void 0:g.msisdn)||(g==null?void 0:g.label)||h).trim()}catch{}let w="";f==="withdraw"?w=p?`   ${c}   ${p}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?w=`   ${c}   ${p||" "}   ${d||""}    ${r}`:w=p?`  ${c}   ${p}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=$e(Pe(H,"transactions"),Fe("shopId","==",t),Hs("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:at(r.data().createdAt),confirmedAt:r.data().confirmedAt?at(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=$e(Pe(H,"transactions"),Fe("merchantUserId","==",t),Hs("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:at(r.data().createdAt),confirmedAt:r.data().confirmedAt?at(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=$e(Pe(H,"transactions"),Fe("merchantUserId","==",t)),n=$e(Pe(H,"transactions"),Fe("userId","==",t)),[r,s]=await Promise.all([Ke(e),Ke(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:at(c.createdAt),confirmedAt:c.confirmedAt?at(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=Re(H,"transactions",t);await vn(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function wq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await BE.create(e);try{const{calculateCommission:r}=await Q(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>ba);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await Nr.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await Q(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>ba);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await Nr.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await Nr.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await Q(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>s_);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const _q="https://summer-cake-5149.alkaptin2030.workers.dev",DO={async getTelegramWorkerUrl(){var t;try{const e=Re(H,"systemSettings","core"),n=await Jt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Re(H,"systemSettings","core");await ln(e,{telegramWorkerUrl:t,updatedAt:je()},{merge:!0})}},Eq={async send(t,e){try{const n=await Nr.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await DO.getTelegramWorkerUrl()||_q).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},Tq={async log(t,e,n,r,s){await Ks(Pe(H,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:je()})},async getLogs(t=100){const e=$e(Pe(H,"auditLogs"),Hs("createdAt","desc"),xo(t));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:at(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=$e(Pe(H,"deletedTransactions"),Hs("deletedAt","desc"));return(await Ke(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:at(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=$e(Pe(H,"deletedTransactions"),Fe("userId","==",t),Hs("deletedAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:at(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=$e(Pe(H,"deletedTransactions"),Fe("userId","==",t));return(await Ke(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:at(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:je(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Ks(Pe(H,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=$e(Pe(H,"deletedTransactions"),Fe("originalTransactionId","==",t),Fe("userId","==",e)),r=await Ke(n);r.empty?await Ks(Pe(H,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:je()}):await Promise.all(r.docs.map(s=>vn(s.ref,{permanent:!0,deletedAt:je()}))),console.log("    :",t);try{const s=$e(Pe(H,"userTransactions"),Fe("userId","==",e)),o=(await Ke(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>On(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Re(H,"transactions",t);(await Jt(s)).exists()&&(console.log("     transactions  "),await On(s));const o=$e(Pe(H,"transactions"),Fe("transactionId","==",t)),a=await Ke(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>On(d.ref))));const l=$e(Pe(H,"transactions"),Fe("originalTransactionId","==",t)),c=await Ke(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>On(d.ref))));try{const d=$e(Pe(H,"deletedTransactions"),Fe("userId","==",e),Fe("originalTransactionId","==",t)),h=await Ke(d),f=h.docs.map(w=>{var g;return String(((g=w.data())==null?void 0:g.reference)||"")}).filter(Boolean),p=h.docs.map(w=>{var g;return String(((g=w.data())==null?void 0:g.transactionId)||"")}).filter(Boolean);for(const w of f){const g=$e(Pe(H,"transactions"),Fe("reference","==",w)),v=await Ke(g);v.empty||(console.log(`  ${v.size}   transactions  reference=${w}`),await Promise.all(v.docs.map(E=>On(E.ref))))}for(const w of p){try{const E=Re(H,"transactions",w);(await Jt(E)).exists()&&(console.log("     transactions  :",w),await On(E))}catch{}const g=$e(Pe(H,"transactions"),Fe("transactionId","==",w)),v=await Ke(g);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${w}`),await Promise.all(v.docs.map(E=>On(E.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},kO={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=Re(H,"daily_reports_archive",e);return await ln(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:je()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=$e(Pe(H,"daily_reports_archive"),Fe("userId","==",t),xo(e)),a=await Ke(o);let l=[];try{l=(await Ke($e(Pe(H,"deletedDailyArchives"),Fe("userId","==",t)))).docs.map(w=>{var g,v;return{id:w.id,reportDate:String(((g=w.data())==null?void 0:g.reportDate)||""),archiveId:String(((v=w.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(p,w)=>l.some(g=>g.archiveId&&g.archiveId===p||g.reportDate&&g.reportDate===w),d=a.docs.map(p=>({id:p.id,userId:String(p.data().userId),reportDate:String(p.data().reportDate),totalTransactions:Number(p.data().totalTransactions||0),totalAmount:Number(p.data().totalAmount||0),totalWithdrawn:Number(p.data().totalWithdrawn||0),totalSent:Number(p.data().totalSent||0),profit:p.data().profit!==void 0?Number(p.data().profit):void 0,walletId:p.data().walletId??null,createdAt:at(p.data().createdAt||p.data().updatedAt)})).filter(p=>!c(p.id,p.reportDate)),h=new Map;for(const p of d){const w=h.get(p.reportDate);(!w||(((r=(n=p.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=w.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(p.reportDate,p)}const f=Array.from(h.values());return f.sort((p,w)=>p.reportDate<w.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=$e(Pe(H,"daily_reports_archive"),Fe("userId","==",t)),s=await Ke(r);let i=0;for(const o of s.docs){const a=at(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await On(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=$e(Pe(H,"daily_reports_archive"),Fe("userId","==",t)),s=(await Ke(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:at(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await On(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=$e(Pe(H,"daily_reports_archive"),Fe("userId","==",t)),n=await Ke(e);let r=0;for(const s of n.docs)try{await On(s.ref),r++}catch{const o=s.data();try{await Ks(Pe(H,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:je()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},Nr={async getUserData(t){try{console.log("     :",{userId:t});const e=Re(H,"users",t),n=await Jt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:at(r.createdAt),updatedAt:at(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=$e(Pe(H,"deletedTransactions"),Fe("userId","==",t));return xi(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data();if(!((i==null?void 0:i.permanent)===!0))return;const a=String((i==null?void 0:i.originalTransactionId)||""),l=String((i==null?void 0:i.transactionId)||""),c=String((i==null?void 0:i.reference)||"");a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptById(t,l),c&&this.removeLocalReceiptByRef(t,c)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=Re(H,"users",t),r=Xa(e);await ln(n,{...r||{},updatedAt:je()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Re(H,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=Xa(r);let i={};try{const l=await Jt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:je()};console.log("   :",o);let a=3;for(;a>0;)try{await ln(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=$e(Pe(H,"userTransactions"),Fe("userId","==",t),Hs("createdAt","desc"),xo(200));e=await Ke(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=$e(Pe(H,"userTransactions"),Fe("userId","==",t));e=await Ke(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:at(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const c=$e(Pe(H,"deletedTransactions"),Fe("userId","==",t),Fe("reference","==",o));if(!(await Ke(c)).empty)return console.log("          ."),"skip-deleted"}{const c=$e(Pe(H,"deletedTransactions"),Fe("userId","==",t),Fe("permanent","==",!0)),d=await Ke(c);if(!d.empty){const h=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(p=>!!p).map(p=>String(p));if(d.docs.find(p=>{const w=p.data(),g=String(w.originalTransactionId||w.transactionId||p.id||""),v=String(w.reference||"");return g&&h.includes(g)||v&&h.includes(v)}))return console.log("        /   ."),"skip-deleted"}}const a=$e(Pe(H,"deletedTransactions"),Fe("userId","==",t),Hs("deletedAt","desc"),xo(20)),l=await Ke(a);if(!l.empty){const c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=10*60*1e3;if(l.docs.find(g=>{const v=g.data(),E=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,_=Number(v.amount||0),R=v.createdAt?new Date(String(v.createdAt)):f;return Math.abs(R.getTime()-f.getTime())<=p&&_===h&&E===c&&y===d}))return console.log("        ."),"skip-deleted"}}catch(o){console.warn("           :",o)}try{const o=$e(Pe(H,"userTransactions"),Fe("userId","==",t));if(s.transactionId){const g=$e(Pe(H,"userTransactions"),Fe("userId","==",t),Fe("transactionId","==",s.transactionId)),v=await Ke(g);if(!v.empty){const E=v.docs[0];return await vn(Re(H,"userTransactions",E.id),{...s,uploadedAt:je()}),E.id}}if(s.reference){const g=$e(Pe(H,"userTransactions"),Fe("userId","==",t),Fe("reference","==",s.reference)),v=await Ke(g);if(!v.empty){const E=v.docs[0];return await vn(Re(H,"userTransactions",E.id),{...s,uploadedAt:je()}),E.id}}const a=$e(Pe(H,"userTransactions"),Fe("userId","==",t),Hs("createdAt","desc"),xo(20)),l=await Ke(a),c=s.senderMsisdn||s.senderPhone||s.sender_msisdn,d=s.receiverMsisdn||s.receiverPhone||s.receiver_msisdn,h=Number(s.amount||0),f=s.createdAt?new Date(String(s.createdAt)):new Date,p=5*60*1e3,w=l.docs.find(g=>{const v=g.data(),E=v.senderMsisdn||v.senderPhone||v.sender_msisdn,y=v.receiverMsisdn||v.receiverPhone||v.receiver_msisdn,_=Number(v.amount||0),R=at(v.createdAt);return Math.abs(R.getTime()-f.getTime())<=p&&_===h&&E===c&&y===d});if(w)return await vn(Re(H,"userTransactions",w.id),{...s,uploadedAt:je()}),w.id}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Ks(Pe(H,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):je(),uploadedAt:je()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Re(H,"userTransactions",e),a=await Jt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await On(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=$e(Pe(H,"userTransactions"),Fe("userId","==",t)),r=await Ke(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(p=>p===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[$e(Pe(H,"userTransactions"),Fe("merchantUserId","==",t)),$e(Pe(H,"userTransactions"),Fe("createdBy","==",t))];for(const o of i)try{const l=(await Ke(o)).docs.filter(c=>{var f,p;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((p=d.receipt)==null?void 0:p.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await On(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Re(H,"transactions",e);if((await Jt(a)).exists())console.log("     transactions   "),await On(a);else{const c=$e(Pe(H,"transactions"),Fe("transactionId","==",e)),d=await Ke(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(p=>On(p.ref))));const h=$e(Pe(H,"transactions"),Fe("originalTransactionId","==",e)),f=await Ke(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(p=>On(p.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},n_={async getToday(t){const e=Re(H,"dailyStats",t,"today","data"),n=await Jt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Re(H,"dailyStats",t,"today","data");await ln(n,{...Xa(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Re(H,"dailyStats",t,"history",e);await ln(r,Xa(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},Iq={async create(t,e){const n={...e,userId:t,status:"active",createdAt:je()};return(await Ks(Pe(H,"installments"),n)).id},listenByUser(t,e){const n=$e(Pe(H,"installments"),Fe("userId","==",t));return xi(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await vn(Re(H,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await On(Re(H,"installments",t)),!0}},Du=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:Iq,auditLogService:Tq,dailyReportsArchiveService:kO,dailyStatsService:n_,merchantWalletService:ho,profileService:Zf,profileServiceExtra:CO,recordAutoTransaction:wq,referralService:t_,sanitizeFirestoreData:Xa,systemSettingsService:DO,telegramNotifier:Eq,transactionService:BE,userDataService:Nr},Symbol.toStringTag,{value:"Module"}));var xl=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(xl||{});const Sq=(t,e=new Date)=>{const n=new Date(e);switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},vf=t=>{var s,i;if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const o=new Date,a=t.activatedAt,l=(s=a==null?void 0:a.toDate)!=null&&s.call(a)?a.toDate():t.activatedAt?new Date(t.activatedAt):null;return l&&o.getTime()-l.getTime()<4*60*60*1e3,!0}const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime())){const o=t.activatedAt,a=(i=o==null?void 0:o.toDate)!=null&&i.call(o)?o.toDate():t.activatedAt?new Date(t.activatedAt):null;return a&&e.getTime()-a.getTime()<4*60*60*1e3,!0}return e<=r},bq=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=t.endDate,r=n!=null&&n.toDate?n.toDate():new Date(n);if(!r||isNaN(r.getTime()))return null;const s=r.getTime()-e.getTime(),i=Math.ceil(s/(1e3*60*60*24));return i>0?i:0},lG=async(t,e,n,r)=>{try{const s=new Date,i=Sq(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Re(H,"users",t);if(await vn(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},CA=async t=>{try{const e=Re(H,"users",t);await vn(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},cG=async t=>{try{const e=Re(H,"users",t),n=await Jt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},uG=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},dG=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=bq(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},hG=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";/*! Capacitor: https://capacitorjs.com/ - MIT License */var Vc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Vc||(Vc={}));class Ky extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const Aq=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},xq=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:Aq(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const p=c.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const w=s(),g=a(h);let v;const E=async()=>(!v&&w in f?v=typeof f[w]=="function"?v=await f[w]():v=f[w]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),y=(A,b)=>{var P,D;if(g){const O=g==null?void 0:g.methods.find(C=>b===C.name);if(O)return O.rtype==="promise"?C=>n.nativePromise(h,b.toString(),C):(C,$)=>n.nativeCallback(h,b.toString(),C,$);if(A)return(P=A[b])===null||P===void 0?void 0:P.bind(A)}else{if(A)return(D=A[b])===null||D===void 0?void 0:D.bind(A);throw new Ky(`"${h}" plugin is not implemented on ${w}`,Vc.Unimplemented)}},_=A=>{let b;const P=(...D)=>{const O=E().then(C=>{const $=y(C,A);if($){const re=$(...D);return b=re==null?void 0:re.remove,re}else throw new Ky(`"${h}.${A}()" is not implemented on ${w}`,Vc.Unimplemented)});return A==="addListener"&&(O.remove=async()=>b()),O};return P.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:A,writable:!1,configurable:!1}),P},R=_("addListener"),k=_("removeListener"),L=(A,b)=>{const P=R({eventName:A},b),D=async()=>{const C=await P;k({eventName:A,callbackId:C},b)},O=new Promise(C=>P.then(()=>C({remove:D})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},O},x=new Proxy({},{get(A,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?L:R;case"removeListener":return k;default:return _(b)}}});return r[h]=x,c.set(h,{name:h,proxy:x,platforms:new Set([...Object.keys(f),...g?[w]:[]])}),x};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Ky,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Rq=t=>t.Capacitor=xq(t),ge=Rq(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Cg=ge.registerPlugin;class NO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new ge.Exception(e,Vc.Unimplemented)}unavailable(e="not available"){return new ge.Exception(e,Vc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const DA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),kA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Pq extends NO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=kA(s).trim(),i=kA(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=DA(e.key),r=DA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Cg("CapacitorCookies",{web:()=>new Pq});const Cq=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),Dq=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},kq=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,Nq=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=Dq(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Oq extends NO{async request(e){const n=Nq(e,e.webFetchExtra),r=kq(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await Cq(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Cg("CapacitorHttp",{web:()=>new Oq});const ha=Cg("Preferences",{web:()=>Q(()=>import("./web-BNvGhsfE.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Gy=Object.freeze(Object.defineProperty({__proto__:null,Preferences:ha},Symbol.toStringTag,{value:"Module"})),Lq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},OO=S.createContext(void 0);function il(){const t=S.useContext(OO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Vq=({children:t})=>{var x,A;const[e,n]=S.useState(null),[r,s]=S.useState(null),[i,o]=S.useState(null),[a,l]=S.useState(!1),[c,d]=S.useState(!0),h=async b=>{var P,D,O,C,$,re,se,ue,U,V,ee,oe,G,Ne,Ie,Oe;try{const Ze=Re(H,"profiles",b);let be=!1;try{const rt=await rO(Ze);if(rt.exists()){const Be=rt.data(),qe={userId:rt.id,shopId:Be.shopId,role:Be.role,fullName:Be.fullName,phone:Be.phone,shopName:Be.shopName||null,approved:Be.approved,avatarId:Be.avatarId,bridgeLink:Be.bridgeLink||null,bridgeDeviceId:Be.bridgeDeviceId||null,showWithdrawNote:Be.showWithdrawNote!==void 0?!!Be.showWithdrawNote:!0,isReceiptNoteEnabled:Be.isReceiptNoteEnabled!==void 0?!!Be.isReceiptNoteEnabled:!0,smsReadingEnabled:Be.smsReadingEnabled!==void 0?!!Be.smsReadingEnabled:!0,smsAutoRegisterEnabled:Be.smsAutoRegisterEnabled!==void 0?!!Be.smsAutoRegisterEnabled:!1,createdAt:((D=(P=Be.createdAt)==null?void 0:P.toDate)==null?void 0:D.call(P))||new Date,updatedAt:((C=(O=Be.updatedAt)==null?void 0:O.toDate)==null?void 0:C.call(O))||new Date,trialStarted:Be.trialStarted||!1,trialStartDate:(re=($=Be.trialStartDate)==null?void 0:$.toDate)==null?void 0:re.call($),trialEndDate:(ue=(se=Be.trialEndDate)==null?void 0:se.toDate)==null?void 0:ue.call(se),trialExpired:Be.trialExpired||!1};s(qe),be=!0,d(!1)}}catch(rt){console.log("Cache profile not available:",(rt==null?void 0:rt.code)||rt)}try{if(!be){const rt=localStorage.getItem(`profile_cache_${b}`);if(rt){const Be=JSON.parse(rt);s(Be),be=!0,d(!1)}}}catch{}if(!be)for(let rt=0;rt<3;rt++)try{const Be=await Jt(Ze);if(Be.exists()){const qe=Be.data(),Ft={userId:Be.id,shopId:qe.shopId,role:qe.role,fullName:qe.fullName,phone:qe.phone,sim1Number:qe.sim1Number||null,sim2Number:qe.sim2Number||null,shopName:qe.shopName||null,approved:qe.approved,avatarId:qe.avatarId,bridgeLink:qe.bridgeLink||null,bridgeDeviceId:qe.bridgeDeviceId||null,showWithdrawNote:qe.showWithdrawNote!==void 0?!!qe.showWithdrawNote:!0,isReceiptNoteEnabled:qe.isReceiptNoteEnabled!==void 0?!!qe.isReceiptNoteEnabled:!0,smsReadingEnabled:qe.smsReadingEnabled!==void 0?!!qe.smsReadingEnabled:!0,smsAutoRegisterEnabled:qe.smsAutoRegisterEnabled!==void 0?!!qe.smsAutoRegisterEnabled:!1,createdAt:((V=(U=qe.createdAt)==null?void 0:U.toDate)==null?void 0:V.call(U))||new Date,updatedAt:((oe=(ee=qe.updatedAt)==null?void 0:ee.toDate)==null?void 0:oe.call(ee))||new Date,trialStarted:qe.trialStarted||!1,trialStartDate:(Ne=(G=qe.trialStartDate)==null?void 0:G.toDate)==null?void 0:Ne.call(G),trialEndDate:(Oe=(Ie=qe.trialEndDate)==null?void 0:Ie.toDate)==null?void 0:Oe.call(Ie),trialExpired:qe.trialExpired||!1};s(Ft);try{localStorage.setItem(`profile_cache_${Be.id}`,JSON.stringify(Ft))}catch{}be=!0,d(!1);break}}catch{}return xi(Ze,async rt=>{var Be,qe,Ft,nn,Vn,qr,In,Wn;if(rt.exists()){const Ue=rt.data(),_t={userId:rt.id,shopId:Ue.shopId,role:Ue.role,fullName:Ue.fullName,phone:Ue.phone,sim1Number:Ue.sim1Number||null,sim2Number:Ue.sim2Number||null,shopName:Ue.shopName||null,approved:Ue.approved,avatarId:Ue.avatarId,bridgeLink:Ue.bridgeLink||null,bridgeDeviceId:Ue.bridgeDeviceId||null,showWithdrawNote:Ue.showWithdrawNote!==void 0?!!Ue.showWithdrawNote:!0,isReceiptNoteEnabled:Ue.isReceiptNoteEnabled!==void 0?!!Ue.isReceiptNoteEnabled:!0,smsReadingEnabled:Ue.smsReadingEnabled!==void 0?!!Ue.smsReadingEnabled:!0,smsAutoRegisterEnabled:Ue.smsAutoRegisterEnabled!==void 0?!!Ue.smsAutoRegisterEnabled:!1,createdAt:((qe=(Be=Ue.createdAt)==null?void 0:Be.toDate)==null?void 0:qe.call(Be))||new Date,updatedAt:((nn=(Ft=Ue.updatedAt)==null?void 0:Ft.toDate)==null?void 0:nn.call(Ft))||new Date,trialStarted:Ue.trialStarted||!1,trialStartDate:(qr=(Vn=Ue.trialStartDate)==null?void 0:Vn.toDate)==null?void 0:qr.call(Vn),trialEndDate:(Wn=(In=Ue.trialEndDate)==null?void 0:In.toDate)==null?void 0:Wn.call(In),trialExpired:Ue.trialExpired||!1};s(_t);try{localStorage.setItem(`profile_cache_${rt.id}`,JSON.stringify(_t))}catch{}be||(be=!0,d(!1))}else if(!be)try{const Ue=await CO.getByUserId(b);if(Ue){const _t={userId:b,shopId:Ue.shopId,role:Ue.role||"user",fullName:Ue.fullName||null,phone:Ue.phone||null,shopName:Ue.shopName||null,approved:Ue.approved??!1,avatarId:Ue.avatarId||void 0,bridgeLink:Ue.bridgeLink||null,bridgeDeviceId:Ue.bridgeDeviceId||null,createdAt:je(),updatedAt:je()};await ln(Re(H,"profiles",b),_t,{merge:!0}),s({...Ue,userId:b,createdAt:Ue.createdAt||new Date,updatedAt:Ue.updatedAt||new Date})}else await p(b)}catch(Ue){console.error("Profile migration/create error:",Ue)}finally{be=!0,d(!1)}},rt=>{console.error("Profile listener error:",rt);try{d(!1)}catch{}})}catch(Ze){return console.error("Error setting up profile listener:",Ze),await p(b),d(!1),()=>{}}},f=async b=>{try{const P=Re(H,"users",b.uid);(await Jt(P)).exists()?(await vn(P,{lastLogin:je(),updatedAt:je()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",b.uid)):(await ln(P,{email:b.email||"",displayName:b.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:je(),updatedAt:je(),lastLogin:je()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",b.uid))}catch(P){console.error(" ensureAdminUserDoc error:",P)}},p=async(b,P,D,O,C)=>{var $,re;try{console.log("Creating default profile for user:",b);const se=t_.generateReferralCode(b);let ue=null;const U={userId:b,shopId:"default-shop",role:"user",fullName:P||" ",phone:D||null,shopName:O||null,approved:!1,referralCode:se,referredBy:C||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!0,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(U),console.log("Created temporary profile:",U);try{const{doc:V,setDoc:ee,serverTimestamp:oe}=await Q(async()=>{const{doc:Oe,setDoc:Ze,serverTimestamp:be}=await Promise.resolve().then(()=>hn);return{doc:Oe,setDoc:Ze,serverTimestamp:be}},void 0,import.meta.url),{db:G}=await Q(async()=>{const{db:Oe}=await Promise.resolve().then(()=>kt);return{db:Oe}},void 0,import.meta.url),Ne={email:(($=Ot.currentUser)==null?void 0:$.email)||"",displayName:P||" ",phone:D||null,shopName:O||null,isActive:!1,referralCode:se,referredBy:C||null,createdAt:oe(),lastLogin:null,updatedAt:oe()};if(console.log("Attempting to add user to admin collection with data:",Ne),await ee(V(G,"users",b),Ne,{merge:!0}),console.log(" User successfully added to admin collection:",Ne),C)try{const{query:Oe,collection:Ze,where:be,limit:Qt,getDocs:rt}=await Q(async()=>{const{query:nn,collection:Vn,where:qr,limit:In,getDocs:Wn}=await Promise.resolve().then(()=>hn);return{query:nn,collection:Vn,where:qr,limit:In,getDocs:Wn}},void 0,import.meta.url),{db:Be}=await Q(async()=>{const{db:nn}=await Promise.resolve().then(()=>kt);return{db:nn}},void 0,import.meta.url),qe=Oe(Ze(Be,"users"),be("referralCode","==",C),Qt(1)),Ft=await rt(qe);Ft.empty?console.log(" Referral code not found in users collection:",C):(ue=Ft.docs[0].id,await t_.create({referrerId:ue,referredUserId:b,referredUserEmail:((re=Ot.currentUser)==null?void 0:re.email)||"",referralCode:C,status:"completed"}),console.log(" Referral record created successfully for referrer:",ue))}catch(Oe){console.error(" Error creating referral record:",Oe)}const Ie=await Jt(V(G,"users",b));Ie.exists()?console.log(" User document verified in Firestore:",Ie.data()):console.log(" User document not found after creation")}catch(V){console.error(" Error adding user to admin collection:",V)}try{const{addDoc:V,collection:ee,serverTimestamp:oe}=await Q(async()=>{const{addDoc:Ze,collection:be,serverTimestamp:Qt}=await Promise.resolve().then(()=>hn);return{addDoc:Ze,collection:be,serverTimestamp:Qt}},void 0,import.meta.url),{db:G}=await Q(async()=>{const{db:Ze}=await Promise.resolve().then(()=>kt);return{db:Ze}},void 0,import.meta.url),Ie=(await V(ee(G,"shops"),{name:O||" ",ownerId:b,createdAt:oe(),updatedAt:oe(),isActive:!0})).id;await Zf.create({userId:b,shopId:Ie,role:"user",fullName:" ",phone:null});try{await Zf.update(b,{referralCode:se,referredBy:ue||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(Ze){console.warn(" Failed to update profile with referral fields:",Ze)}const Oe=await Zf.getById(b);Oe&&(s(Oe),console.log("Updated with Firebase profile:",Oe))}catch(V){console.error("Error creating profile:",V),console.log("Using local profile - Firebase unavailable")}}catch(se){console.error("Error creating default profile:",se)}};S.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const b=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const P=localStorage.getItem("demoUser"),D=localStorage.getItem("demoProfile");if(P&&D){console.log(" Found demo user in localStorage");try{const C=JSON.parse(P),$=JSON.parse(D);n(C),s($),clearTimeout(b),d(!1);return}catch(C){console.error("Error parsing demo user data:",C),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const O=E5(Ot,async C=>{if(console.log(" Auth state changed:",{uid:C==null?void 0:C.uid,email:C==null?void 0:C.email,emailVerified:C==null?void 0:C.emailVerified,timestamp:new Date().toISOString()}),n(C),C){console.log(" User authenticated, starting profile hydration for:",C.uid);try{await ha.set({key:"current_user_id",value:C.uid}),console.log(" Synced current_user_id to Native:",C.uid)}catch($){console.error("Failed to sync user ID to native:",$)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(C.uid),y(),f(C)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await ha.remove({key:"current_user_id"}),await ha.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(b)});return()=>{clearTimeout(b),O()}},[]),S.useEffect(()=>{const b=async()=>{try{await _(),await y()}catch{}};try{window.addEventListener("app:softRefresh",b)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",b)}catch{}}},[e==null?void 0:e.uid]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=i==null?void 0:i.subscription,P=b==null?void 0:b.endDate,D=P!=null&&P.toDate?P.toDate():P?new Date(P):null;let O=null;const C=async()=>{try{const $=new Date;b&&b.isActive===!0&&D&&!isNaN(D.getTime())&&$>D&&(await CA(e.uid),await y())}catch{}};return C(),O=setInterval(C,36e5),()=>{try{clearInterval(O)}catch{}}},[e==null?void 0:e.uid,(x=i==null?void 0:i.subscription)==null?void 0:x.endDate,(A=i==null?void 0:i.subscription)==null?void 0:A.isActive]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;const b=Nr.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{b==null||b()}catch{}}},[e==null?void 0:e.uid]);const w=async(b,P,D,O,C,$)=>{try{const re=(b||"").trim().toLowerCase(),se=(P||"").trim();console.log(" Attempting to sign up user:",re);const ue=await WS(Ot,re,se);console.log(" Sign up successful:",ue.user.uid),await p(ue.user.uid,D,O,C,$),await f(ue.user);try{await h(ue.user.uid),await y()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(re){console.error(" Sign up error:",re);let se="    ";return re.code==="auth/email-already-in-use"?se="    ":re.code==="auth/weak-password"?se="   ":re.code==="auth/invalid-email"&&(se="   "),{error:{...re,message:se}}}},g=async(b,P)=>{var C;const D=(b||"").trim().toLowerCase(),O=(P||"").trim();try{const $=oe=>oe.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),re=oe=>oe.replace(/[-]/g,G=>String("0123456789"["".indexOf(G)])).replace(/[-]/g,G=>String("0123456789"["".indexOf(G)])),se=oe=>oe.replace(/[0-9]/g,G=>""[Number(G)]),ue=oe=>re($(oe));if(console.log(" Attempting to sign in user:",D),D==="test@example.com"&&O==="123456"){console.log(" Demo user login detected");const oe={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},G={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(oe)),localStorage.setItem("demoProfile",JSON.stringify(G)),n(oe),s(G),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let U;const V=[ue(O),$(O),se($(O))];let ee=null;for(const oe of V)try{oe!==O&&console.log(" Trying password variant"),U=await g5(Ot,D,oe);break}catch(G){if(ee=G,(G==null?void 0:G.code)!=="auth/wrong-password"&&(G==null?void 0:G.code)!=="auth/invalid-credential")throw G}if(!U)throw ee||new Error("auth/invalid-credential");console.log(" Sign in successful:",U.user.uid);try{if((await Jt(Re(H,"deletedUsers",U.user.uid))).exists())return console.log(" User is deleted, signing out"),await qS(Ot),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(oe){console.error("Error checking deleted users:",oe)}await f(U.user);try{await h(U.user.uid),await y()}catch{}return{error:null}}catch($){if(console.error(" Sign in error:",$),D==="test@example.com"&&$.code==="auth/user-not-found"){console.log(" Creating test user...");try{const ue=await WS(Ot,D,O);return console.log(" Test user created:",ue.user.uid),await p(ue.user.uid," ","01000000000"," "),{error:null}}catch(ue){return console.error(" Error creating test user:",ue),{error:ue}}}let re="    ",se=$==null?void 0:$.code;if(se==="auth/invalid-credential")try{const ue=await v5(Ot,((C=$==null?void 0:$.customData)==null?void 0:C.email)||"");Array.isArray(ue)&&ue.length===0?(se="auth/user-not-found",re="     "):(se="auth/wrong-password",re="   ")}catch{re="      "}else se==="auth/invalid-email"?re="    ":se==="auth/user-not-found"?re="     ":se==="auth/wrong-password"?re="   ":se==="auth/too-many-requests"&&(re="      ");return{error:{...$,code:se,message:re}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await qS(Ot);try{await ha.remove({key:"selected_wallet_id"}),await ha.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(O){console.error(" Failed to clear Preferences:",O)}const D=(()=>{try{const O=typeof window<"u"?window:null,C=!!(O&&O.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),$=typeof window<"u"&&window.location.protocol==="file:",re=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return C||$||re||typeof import.meta<"u"&&Lq&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(D)}catch{window.location.href=D}}catch(b){console.error("Sign out error:",b)}},E=async b=>{try{return await m5(Ot,b),{error:null}}catch(P){console.error("Reset password error:",P);let D="        ";return P.code==="auth/user-not-found"?D="     ":P.code==="auth/invalid-email"&&(D="   "),{error:{...P,message:D}}}},y=async()=>{var b,P;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}console.log("Checking subscription status for user:",e.uid);try{const D=Re(H,"users",e.uid);try{const C=await Jt(D);if(C.exists()){const $=C.data();o($);const re=((b=$==null?void 0:$.branchPackage)==null?void 0:b.status)==="active";let se=!1;re?se=!0:se=vf($.subscription),l(se)}}catch{}return xi(D,async C=>{var $,re,se,ue,U,V,ee,oe;if(C.exists()){const G=C.data();o(G),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:G.subscription,subscriptionExists:!!G.subscription,planType:($=G.subscription)==null?void 0:$.planType,isActive:(re=G.subscription)==null?void 0:re.isActive,startDate:(se=G.subscription)==null?void 0:se.startDate,endDate:(ue=G.subscription)==null?void 0:ue.endDate,activatedBy:(U=G.subscription)==null?void 0:U.activatedBy,activatedAt:(V=G.subscription)==null?void 0:V.activatedAt,isOnFreeTrial:G.isOnFreeTrial,freeTrialEndDate:G.freeTrialEndDate,branchPackageStatus:(ee=G==null?void 0:G.branchPackage)==null?void 0:ee.status});const Ne=((oe=G==null?void 0:G.branchPackage)==null?void 0:oe.status)==="active";let Ie=!1;Ne?(console.log(" Branch package is active, granting access"),Ie=!0):Ie=vf(G.subscription),l(Ie),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:Ie,isOnFreeTrial:G.isOnFreeTrial,hasActiveBranchPackage:Ne,reason:Ne?"Branch package active":G.subscription?G.subscription.isActive?G.subscription.planType==="lifetime"?"Lifetime plan":G.subscription.endDate?new Date>new Date(G.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const Oe=G.subscription,Ze=Oe==null?void 0:Oe.planType,be=Oe==null?void 0:Oe.endDate,Qt=be!=null&&be.toDate?be.toDate():be?new Date(be):null,rt=new Date;Oe&&Oe.isActive===!0&&Qt&&!isNaN(Qt.getTime())&&rt>Qt&&(await CA(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:Ze,endDate:Qt}))}catch(Oe){console.warn("Failed to auto-deactivate expired subscription:",Oe)}}},C=>{console.error(" Subscription listener error:",C),(async()=>{var $;try{const re=await Jt(D);if(re.exists()){const se=re.data();o(se);const ue=(($=se==null?void 0:se.branchPackage)==null?void 0:$.status)==="active";let U=!1;ue?U=!0:U=vf(se.subscription),l(U)}}catch{}})()})}catch(D){console.error("Error setting up subscription listener:",D);try{const O=await Jt(Re(H,"users",e.uid));if(O.exists()){const C=O.data();o(C);const $=((P=C==null?void 0:C.branchPackage)==null?void 0:P.status)==="active";let re=!1;$?re=!0:re=vf(C.subscription),l(re)}}catch{}}},_=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await y()}catch(b){console.error("Error refreshing profile:",b)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:w,signIn:g,signOut:v,resetPassword:E,updateUserProfile:async b=>{if(e)try{const P={updatedAt:je()};if(b.fullName!==void 0&&(P.fullName=b.fullName),b.phone!==void 0&&(P.phone=b.phone),b.sim1Number!==void 0){const D=(b.sim1Number||"").trim();P.sim1Number=D.length?D:null}if(b.sim2Number!==void 0){const D=(b.sim2Number||"").trim();P.sim2Number=D.length?D:null}if(b.bridgeLink!==void 0){const D=(b.bridgeLink||"").trim();P.bridgeLink=D.length?D:null}if(b.bridgeDeviceId!==void 0){const D=(b.bridgeDeviceId||"").trim();P.bridgeDeviceId=D.length?D:null}b.showWithdrawNote!==void 0&&(P.showWithdrawNote=!!b.showWithdrawNote),b.isReceiptNoteEnabled!==void 0&&(P.isReceiptNoteEnabled=!!b.isReceiptNoteEnabled),b.smsReadingEnabled!==void 0&&(P.smsReadingEnabled=!!b.smsReadingEnabled),b.smsAutoRegisterEnabled!==void 0&&(P.smsAutoRegisterEnabled=!!b.smsAutoRegisterEnabled),await vn(Re(H,"profiles",e.uid),P),await h(e.uid)}catch(P){console.error("Error updating user profile:",P)}},updateAvatarId:async b=>{if(e)try{await vn(Re(H,"profiles",e.uid),{avatarId:b,updatedAt:je()}),await h(e.uid)}catch(P){console.error("Error updating avatarId:",P)}},refreshProfile:_,checkSubscriptionStatus:y};return T.jsx(OO.Provider,{value:L,children:t})};function Mq(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Dg="Checkbox",[Fq]=jc(Dg),[Uq,zE]=Fq(Dg);function jq(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,p]=i0({prop:n,defaultProp:s??!1,onChange:l,caller:Dg}),[w,g]=S.useState(null),[v,E]=S.useState(null),y=S.useRef(!1),_=w?!!o||!!w.closest("form"):!0,R={checked:f,disabled:i,setChecked:p,control:w,setControl:g,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:Ro(s)?!1:s,isFormControl:_,bubbleInput:v,setBubbleInput:E};return T.jsx(Uq,{scope:e,...R,children:$q(h)?h(R):r})}var LO="CheckboxTrigger",VO=S.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:w}=zE(LO,t),g=$n(s,d),v=S.useRef(l);return S.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const y=()=>h(v.current);return E.addEventListener("reset",y),()=>E.removeEventListener("reset",y)}},[i,h]),T.jsx(en.button,{type:"button",role:"checkbox","aria-checked":Ro(l)?"mixed":l,"aria-required":c,"data-state":$O(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:Lt(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Lt(n,E=>{h(y=>Ro(y)?!0:!y),w&&p&&(f.current=E.isPropagationStopped(),f.current||E.stopPropagation())})})});VO.displayName=LO;var WE=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return T.jsx(jq,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>T.jsxs(T.Fragment,{children:[T.jsx(VO,{...h,ref:e,__scopeCheckbox:n}),f&&T.jsx(jO,{__scopeCheckbox:n})]})})});WE.displayName=Dg;var MO="CheckboxIndicator",FO=S.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=zE(MO,n);return T.jsx(nl,{present:r||Ro(i.checked)||i.checked===!0,children:T.jsx(en.span,{"data-state":$O(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});FO.displayName=MO;var UO="CheckboxBubbleInput",jO=S.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:p}=zE(UO,t),w=$n(n,p),g=Mq(i),v=XP(r);S.useEffect(()=>{const y=f;if(!y)return;const _=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(_,"checked").set,L=!s.current;if(g!==i&&k){const x=new Event("click",{bubbles:L});y.indeterminate=Ro(i),k.call(y,Ro(i)?!1:i),y.dispatchEvent(x)}},[f,g,i,s]);const E=S.useRef(Ro(i)?!1:i);return T.jsx(en.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:w,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jO.displayName=UO;function $q(t){return typeof t=="function"}function Ro(t){return t==="indeterminate"}function $O(t){return Ro(t)?"indeterminate":t?"checked":"unchecked"}const BO=S.forwardRef(({className:t,...e},n)=>T.jsx(WE,{ref:n,className:Bn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:T.jsx(FO,{className:Bn("flex items-center justify-center text-current"),children:T.jsx(bF,{className:"h-4 w-4"})})}));BO.displayName=WE.displayName;const vm=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(!0),{signIn:d,user:h,checkSubscriptionStatus:f,loading:p}=il(),w=qc();S.useEffect(()=>{try{h&&!p&&w("/user/dashboard")}catch{}},[h,p,w]),S.useEffect(()=>{try{const y=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;y&&e(y)}catch{}try{const y=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;y==="true"?c(!0):y==="false"&&c(!1)}catch{}(async()=>{var y,_;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const R=await((_=(y=navigator.credentials).get)==null?void 0:_.call(y,{password:!0,mediation:"optional"}));R&&R.type==="password"&&(R.id&&e(R.id),R.password&&r(R.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const R=sessionStorage.getItem("cashy:rememberedPassword");R&&!n&&r(R)}catch{}}catch{}})()},[]);const g=async y=>{if(y.preventDefault(),o){Yn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Yn.error("   .      .");return}const _=(t||"").trim().toLowerCase(),R=(n||"").trim();if(console.log("    :",{email:_,password:"***"}),!t||!n){Yn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(_)){Yn.error("    ");return}a(!0);try{try{await _5(Ot,l?wD:S5);try{window.localStorage.setItem("cashy:rememberLogin",l?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:k}=await d(_,R);if(console.log(" SignIn result:",{error:k}),k){console.error("    :",k);const L=k==null?void 0:k.code;L==="auth/user-not-found"?Yn.error("     "):L==="auth/wrong-password"?Yn.error("   "):L==="auth/invalid-credential"?Yn.error("      "):L==="auth/too-many-requests"?Yn.error("      "):Yn.error((k==null?void 0:k.message)||"    ")}else{console.log("    !"),Yn.success("   !");try{if(l&&navigator.credentials&&window.PasswordCredential){const L=new window.PasswordCredential({id:_,name:_,password:R});await navigator.credentials.store(L)}if(l)try{sessionStorage.setItem("cashy:rememberedPassword",R)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(k){console.error("   :",k),Yn.error("   ")}finally{a(!1)}},v=y=>{if(o){y.preventDefault(),y.stopPropagation(),Yn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){y.preventDefault(),y.stopPropagation(),Yn.error("   .      .");return}t||Yn.error("   "),n||Yn.error("   ");const _=(t||"").trim().toLowerCase();_&&!/^\S+@\S+\.\S+$/.test(_)&&Yn.error("    ")},E=()=>{w("/user/forgot-password")};return S.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const y=document.documentElement,_=document.body,R=y.style.overflow,k=_.style.overflow,L=y.style.overscrollBehaviorY,x=_.style.overscrollBehaviorY;return y.style.overflow="hidden",_.style.overflow="hidden",y.style.overscrollBehaviorY="none",_.style.overscrollBehaviorY="none",()=>{y.style.overflow=R||"",_.style.overflow=k||"",y.style.overscrollBehaviorY=L||"",_.style.overscrollBehaviorY=x||""}},[]),T.jsx("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:T.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:T.jsx(UF,{className:"w-10 h-10 text-white"})}),T.jsx("div",{className:"flex items-center justify-center mb-2",children:T.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),T.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),T.jsx("p",{className:"text-white/80",children:"    "})]}),T.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[T.jsxs("form",{onSubmit:g,className:"space-y-6",autoComplete:"on",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),T.jsxs("div",{className:"relative",children:[T.jsx(jI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),T.jsx(mw,{id:"username",type:"email",placeholder:"  ",value:t,onChange:y=>{const _=y.target.value;e(_);try{window.localStorage.setItem("cashy:lastEmail",_)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),T.jsxs("div",{className:"relative",children:[T.jsx(kF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),T.jsx(mw,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:y=>r(y.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),T.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?T.jsx(RF,{className:"w-5 h-5"}):T.jsx(PF,{className:"w-5 h-5"})})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.jsx(BO,{id:"rememberLogin",checked:l,onCheckedChange:y=>c(!!y)}),T.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),T.jsx("div",{className:"flex justify-end",children:T.jsxs(si,{type:"button",variant:"ghost",size:"sm",onClick:E,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[T.jsx(jI,{className:"w-4 h-4 ml-1"}),"  "]})}),T.jsx("button",{type:"submit",onClick:v,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?T.jsxs("div",{className:"flex items-center justify-center",children:[T.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):T.jsxs("div",{className:"flex items-center justify-center",children:[T.jsx(TF,{className:"w-5 h-5 ml-2"})," "]})})]}),T.jsxs("div",{className:"mt-6 text-center space-y-3",children:[T.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",T.jsx(k6,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),T.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",T.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",T.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),T.jsx("div",{className:"mt-6 text-center",children:T.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})})},Bq=Object.freeze(Object.defineProperty({__proto__:null,default:vm},Symbol.toStringTag,{value:"Module"})),zq=()=>{const t=qc(),e=Zs(),{signOut:n,user:r,userSubscription:s}=il(),{toast:i}=r0(),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=[{id:"home",label:"",icon:DF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:CF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:IF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:$I,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:EF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:vy,path:"/transactions"},{id:"settings",label:"",icon:BI,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:SF,action:()=>{var E;a(!1);const v=(E=s==null?void 0:s.subscription)==null?void 0:E.planType;if(v===xl.TAHWEELA||v===xl.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:jF,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:xF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:MF,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:vy,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:FF,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:$I,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:AF,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:NF,action:()=>{a(!1);const E=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(E);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:UI,action:async()=>{a(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}].filter(v=>v.id!=="add-wallet"),p=[{id:"shop-expenses-settings",label:" ",icon:vy,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:BI,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:UI,action:async()=>{c(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],w=(v,E,y,_)=>{var A;const k=((A=s==null?void 0:s.subscription)==null?void 0:A.planType)===xl.TAHWEELA,L=b=>["/user/dashboard","/profile-settings"].includes(b),x=b=>b==="debts";if(y){if(k&&!x(_)&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}y()}else if(E&&v==="/add"){if(k){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!E){if(k&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}t(v)}},g=v=>e.pathname===v;return T.jsxs("div",{className:"mobile-bottom-nav",children:[o&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),T.jsx("div",{className:"floating-actions-container",children:f.map((v,E)=>T.jsxs("div",{className:"floating-action-button",onClick:()=>{var _;if(((_=s==null?void 0:s.subscription)==null?void 0:_.planType)===xl.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}v.action()},style:{"--action-color":v.color,"--animation-delay":`${E*.1}s`},children:[T.jsx("div",{className:"floating-action-icon",style:{backgroundColor:v.color},children:T.jsx(v.icon,{className:"action-icon"})}),T.jsx("span",{className:"floating-action-label",children:v.label})]},v.id))})]}),l&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),T.jsx("div",{className:"floating-actions-container",children:p.map((v,E)=>T.jsxs("div",{className:"floating-action-button",onClick:()=>{var R;const y=(R=s==null?void 0:s.subscription)==null?void 0:R.planType,_=new Set(["logout","profile-settings"]);if(y===xl.TAHWEELA&&!_.has(v.id)){i({title:"  ",description:"      .",variant:"destructive"});return}v.action()},style:{"--action-color":v.color,"--animation-delay":`${E*.1}s`},children:[T.jsx("div",{className:"floating-action-icon",style:{backgroundColor:v.color},children:T.jsx(v.icon,{className:"action-icon"})}),T.jsx("span",{className:"floating-action-label",children:v.label})]},v.id))})]}),T.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(v=>{const E=v.icon,y=g(v.path);return T.jsxs("button",{onClick:()=>w(v.path,v.isSpecial,v.action,v.id),className:`mobile-nav-item ${y?"active":""} ${v.isSpecial?"special":""}`,type:"button","aria-label":v.label,children:[T.jsx("div",{className:`nav-icon-container ${v.isSpecial?"special-icon":""} ${v.isSpecial&&v.id==="add"&&o?"special-open":""}`,children:T.jsx(E,{className:`nav-icon ${y?"active-icon":""} ${v.isSpecial?"special-icon-svg":""} ${v.isSpecial&&v.id==="add"&&o?"rotated":""} ${v.isSpecial&&v.id==="settings"&&l?"rotated":""}`})}),!v.isSpecial&&T.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:v.label})]},v.id)})})]})};var Ax,xx;const wa=(xx=(Ax=import.meta)==null?void 0:Ax.env)==null?void 0:xx.VITE_ANDROID_DOWNLOAD_URL;var Rx,Px;const _a=(Px=(Rx=import.meta)==null?void 0:Rx.env)==null?void 0:Px.VITE_PC_DOWNLOAD_URL;var Cx,Dx;const Ea=(Dx=(Cx=import.meta)==null?void 0:Cx.env)==null?void 0:Dx.VITE_PC32_DOWNLOAD_URL;var kx,Nx;const Ta=(Nx=(kx=import.meta)==null?void 0:kx.env)==null?void 0:Nx.VITE_ANDROID_VERSION;var Ox,Lx;const Ia=(Lx=(Ox=import.meta)==null?void 0:Ox.env)==null?void 0:Lx.VITE_PC_VERSION;var Vx,Mx;const Sa=(Mx=(Vx=import.meta)==null?void 0:Vx.env)==null?void 0:Mx.VITE_PC32_VERSION;function fn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function Wq(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const jo=["siteContent","appDownloads"],wm=["siteContent","desktop_updates"],_m=["siteContent","android_updates"],eh="appDownloadsCache";function qq(){try{const e=localStorage.getItem(eh);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||wa,pcUrl:(n==null?void 0:n.pcUrl)||_a,pc32Url:(n==null?void 0:n.pc32Url)||Ea,androidVersion:(n==null?void 0:n.androidVersion)||Ta,pcVersion:(n==null?void 0:n.pcVersion)||Ia,pc32Version:(n==null?void 0:n.pc32Version)||Sa,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=fn(r.pcUrl)),r.androidVersion||(r.androidVersion=fn(r.androidUrl)),r.pc32Version||(r.pc32Version=fn(r.pc32Url)),r}}catch{}const t={androidUrl:wa,pcUrl:_a,pc32Url:Ea,androidVersion:Ta,pcVersion:Ia,pc32Version:Sa};return t.pcVersion||(t.pcVersion=fn(t.pcUrl)),t.androidVersion||(t.androidVersion=fn(t.androidUrl)),t.pc32Version||(t.pc32Version=fn(t.pc32Url)),t}async function Hq(){try{const t=await Jt(Re(H,jo[0],jo[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(eh,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||wa,pcUrl:(n==null?void 0:n.pcUrl)||_a,pc32Url:(n==null?void 0:n.pc32Url)||Ea,androidVersion:(n==null?void 0:n.androidVersion)||Ta,pcVersion:(n==null?void 0:n.pcVersion)||Ia,pc32Version:(n==null?void 0:n.pc32Version)||Sa,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=fn(r.pcUrl)),r.androidVersion||(r.androidVersion=fn(r.androidUrl)),r.pc32Version||(r.pc32Version=fn(r.pc32Url)),r}const e={androidUrl:wa,pcUrl:_a,pc32Url:Ea,androidVersion:Ta,pcVersion:Ia,pc32Version:Sa};return e.pcVersion||(e.pcVersion=fn(e.pcUrl)),e.androidVersion||(e.androidVersion=fn(e.androidUrl)),e.pc32Version||(e.pc32Version=fn(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(eh);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||wa,pcUrl:(i==null?void 0:i.pcUrl)||_a,pc32Url:(i==null?void 0:i.pc32Url)||Ea,androidVersion:(i==null?void 0:i.androidVersion)||Ta,pcVersion:(i==null?void 0:i.pcVersion)||Ia,pc32Version:(i==null?void 0:i.pc32Version)||Sa,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=fn(o.pcUrl)),o.androidVersion||(o.androidVersion=fn(o.androidUrl)),o.pc32Version||(o.pc32Version=fn(o.pc32Url)),o}}catch{}const r={androidUrl:wa,pcUrl:_a,pc32Url:Ea,androidVersion:Ta,pcVersion:Ia,pc32Version:Sa};return r.pcVersion||(r.pcVersion=fn(r.pcUrl)),r.androidVersion||(r.androidVersion=fn(r.androidUrl)),r.pc32Version||(r.pc32Version=fn(r.pc32Url)),r}}function Kq(t){try{const e=Re(H,jo[0],jo[1]);return xi(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||wa,pcUrl:(s==null?void 0:s.pcUrl)||_a,pc32Url:(s==null?void 0:s.pc32Url)||Ea,androidVersion:(s==null?void 0:s.androidVersion)||Ta,pcVersion:(s==null?void 0:s.pcVersion)||Ia,pc32Version:(s==null?void 0:s.pc32Version)||Sa,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=fn(i.pcUrl)),i.androidVersion||(i.androidVersion=fn(i.androidUrl)),i.pc32Version||(i.pc32Version=fn(i.pc32Url));try{localStorage.setItem(eh,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(eh);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function Gq(t,e,n,r,s,i=12e4){const o=RO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=lq(o,l);return new Promise((d,h)=>{const f=oq(c,t);let p=!1;const w=setTimeout(()=>{p=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",g=>{const v=Math.round(g.bytesTransferred/g.totalBytes*100);s&&s(v)},g=>{clearTimeout(w),h(g)},async()=>{try{if(clearTimeout(w),p)return;const g=await aq(c),v={updatedAt:je(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=g,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=g,r&&(v.pcVersion=r)):(v.pc32Url=g,r&&(v.pc32Version=r));const E=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=ln(Re(H,jo[0],jo[1]),v,{merge:!0});let _=!1;const R=new Promise(k=>setTimeout(()=>{_=!0,k()},E));try{await Promise.race([y,R])}catch(k){console.warn(" Firestore write error, proceeding with URL only:",k)}_&&console.warn(" Firestore update timed out;             ."),d(g)}catch(g){h(g)}})})}async function Qq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:je(),updatedBy:e||"admin"};await ln(Re(H,jo[0],jo[1]),r,{merge:!0})}async function Yq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:je(),updatedBy:e||"admin"};await ln(Re(H,wm[0],wm[1]),r,{merge:!0})}function zO(t){try{const e=Re(H,wm[0],wm[1]);return xi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function WO(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function Jq(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:je(),updatedBy:e||"admin"};await ln(Re(H,_m[0],_m[1]),r,{merge:!0})}function Xq(t){try{const e=Re(H,_m[0],_m[1]);return xi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const Zq=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:Hq,getCachedOrEnvAppDownloads:qq,listenAndroidUpdates:Xq,listenAppDownloads:Kq,listenDesktopUpdates:zO,resolveDownloadUrl:Wq,selectDesktopUrl:WO,setAndroidUpdateInfo:Jq,setAppDownloadLinks:Qq,setDesktopUpdateInfo:Yq,uploadAppBinaryResumable:Gq},Symbol.toStringTag,{value:"Module"})),eH=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=j.useState(!1),[s,i]=j.useState(!1),[o,a]=j.useState(!1),[l,c]=j.useState(0),[d,h]=j.useState(""),[f,p]=j.useState(!1),w=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(k){console.warn("failed to minimize",k)}},g=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(k){console.warn("failed to close",k)}},v=async()=>{if(!f){p(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>p(!1),600);return}try{window.location.reload()}catch{}}catch(k){console.warn("failed to soft refresh",k),p(!1)}}};if(j.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(k=>{const L=(k==null?void 0:k.percent)==null?0:Number(k.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(k){console.warn("update init failed",k)}},[e,t]),j.useEffect(()=>{const k=zO(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const A=WO({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(A)}});return()=>{try{k()}catch{}}},[]),!e)return null;const[y,_]=j.useState(!1),R=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),_(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),_(!0))}catch(k){console.warn("window toggle failed",k)}};return T.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[T.jsx("button",{type:"button","aria-label":"",title:"",onClick:g,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:T.jsx(c0,{className:"w-5 h-5"})}),T.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:T.jsx(RP,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),T.jsx("button",{type:"button","aria-label":"",title:"",onClick:w,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:T.jsx(OF,{className:"w-5 h-5"})}),T.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:R,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:T.jsx(VF,{className:"w-5 h-5"})})]})},r_=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=S.useState(`${n}logo.svg`),[i,o]=S.useState(0),a=S.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return T.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:T.jsxs("div",{className:"flex flex-col items-center justify-center",children:[T.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),T.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},NA=Cg("AppLauncher",{web:()=>Q(()=>import("./web-BnMGn3Gg.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function tH(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{ge&&ge.getPlatform()!=="web"&&(NA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{ge&&ge.getPlatform()!=="web"&&NA.openUrl({url:n})}catch{}}}function qO(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function nH(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?qO(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function fG(t,e,n){const r=qO(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function rH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function sH(t){const e=rH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function pG(t,e,n){const r=nH(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=sH(t||e);tH(r,s)}async function iH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function qE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function oH(t,e,n=0){const r=qE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const ba=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:qE,calculateProfit:oH},Symbol.toStringTag,{value:"Module"})),aH=t=>t==="withdraw"||t==="receive"?"receive":"send",lH=async t=>{if(!t)return null;const e=$e(Pe(H,"transactions"),Fe("reference","==",t),xo(1)),n=await Ke(e);return n.empty?null:n.docs[0].id},cH=async t=>{var e;try{const n=await ha.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return fH(t||((e=Ot.currentUser)==null?void 0:e.uid)||"")||null},Qy=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await ho.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},HO=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await lH(t.reference);if(e)return{id:e,duplicate:!0};const n=aH(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Qy(t.receiverMsisdn);if(o||(o=await Qy(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Qy(a))}r=o||await cH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await BE.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await iH(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=qE(t.amount,n);await Nr.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},ep=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},KO=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Ot.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(w=>ep(w)).filter(w=>!!w):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=w=>String(w||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(w=>({walletId:String((w==null?void 0:w.id)||""),msisdn:ep(String((w==null?void 0:w.phone)||(w==null?void 0:w.msisdn)||"")),isDefault:!!(w!=null&&w.isDefault)})).filter(w=>w.walletId&&w.msisdn):[],h=(await ho.getByMerchantId(r)||[]).map(w=>({walletId:String((w==null?void 0:w.id)||""),msisdn:ep(String((w==null?void 0:w.msisdn)||"")),isDefault:!!(w!=null&&w.isDefault)})).filter(w=>w.walletId&&w.msisdn),f=[...c,...h],p=new Map;for(const w of s){const g=l(w);for(const v of f){const E=l(v.msisdn);if(v.msisdn===w){p.set(v.walletId,v.msisdn);continue}if(E.slice(-5)===g.slice(-5)){p.set(v.walletId,v.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",p.size)}catch{}if(p.size===1){const[w,g]=Array.from(p.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:w,msisdn:g})}catch{}return{walletId:w,msisdn:g}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function uH(t,e){try{const n=i=>ep(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function dH(t){var e;try{const n=t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await KO(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");return a&&o[a]&&o[a].walletId?{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")}:l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId?{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")}:null}catch{return null}}function hH(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Ot.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const fH=t=>{var e,n;try{const r=t||((e=Ot.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function GO(){return typeof window>"u"?()=>{}:()=>{}}const jl=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:hH,detectWalletFromSim:uH,identifyWalletBySim:KO,initMobileSmsBridge:GO,processMobileTransactionNotification:HO,resolveWalletBySimOrSlot:dH},Symbol.toStringTag,{value:"Module"})),pH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},mH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},gH=()=>{var t,e;try{const n=((t=Ot.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},yH=()=>{var t;try{const e=((t=Ot.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Yy=async(t,e)=>{var _;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=pH(n),d=mH(n);if(!c||c<=0)return;const h=((_=Ot.currentUser)==null?void 0:_.uid)||"",f=gH()||void 0,p=yH()||"",w=f||"default-line";if(!h||!f||!p)return;const g=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,v=`VF-${btoa(unescape(encodeURIComponent(g))).slice(0,24)}`,E=a?"withdraw":l?"transfer":"withdraw",y={type:E,amount:c,provider:"vodafone_cash",shopId:p,lineId:w,walletId:f,senderMsisdn:E==="transfer"&&d||void 0,receiverMsisdn:E==="withdraw"&&d||void 0,reference:v,createdBy:h,merchantUserId:h,note:"  "};try{await HO(y)}catch{}},hs={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await Nr.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{Nr.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{Nr.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=hs.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=hs.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{Nr.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=hs.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=hs.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=hs.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{Nr.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},vH=hs,mG=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:vH,reportsService:hs},Symbol.toStringTag,{value:"Module"})),Em={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Re(H,"walletLimits",t),s={updatedAt:je(),ownerId:(n=Ot.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await ln(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Re(H,"walletLimits",t);try{const s=await Jt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||Tt.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Tt.now()};return await ln(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:je(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Re(H,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:je(),updatedAt:je(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Re(H,"walletLimits",t);return await ln(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:je(),updatedAt:je(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Re(H,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:je()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await ln(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=Re(H,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:je()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await ln(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Re(H,"walletLimits",t);return await ln(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:je(),lastMonthlyReset:je(),updatedAt:je(),ownerId:(e=Ot.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},s_=Object.freeze(Object.defineProperty({__proto__:null,default:Em,walletDailyLimitsService:Em},Symbol.toStringTag,{value:"Module"}));class wH{constructor(){$g(this,"intervalId",null);$g(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Ot.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await n_.getToday(n);await n_.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await hs.syncReportsDataFromFirebase(e);const n=hs.getReportsData(e);if(!n.lastDailyResetDate||!hs.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await Nr.getUserTransactions(e),l=y=>{const _=String(y||"").toLowerCase();return["completed","confirmed","success"].includes(_)?"completed":["failed","error"].includes(_)?"failed":["cancelled","canceled"].includes(_)?"cancelled":"pending"},c=(a||[]).filter(y=>{var R,k;const _=(R=y==null?void 0:y.createdAt)!=null&&R.toDate?y.createdAt.toDate():(y==null?void 0:y.createdAt)instanceof Date?y.createdAt:new Date(y==null?void 0:y.createdAt);return((k=_==null?void 0:_.toDateString)==null?void 0:k.call(_))===o&&l(y==null?void 0:y.status)==="completed"}),d=c.length,h=c.reduce((y,_)=>y+Number(_.amount||0),0),f=y=>{const _=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return _==="withdraw"||_==="withdrawal"||_==="receive"},p=y=>{const _=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return _==="send"||_==="transfer"},w=c.filter(f).reduce((y,_)=>{const R=_.withdrawnAmount!==void 0?Number(_.withdrawnAmount):Number(_.amount||0);return y+R},0),g=c.filter(p).reduce((y,_)=>{const R=_.sentAmount!==void 0?Number(_.sentAmount):Number(_.amount||0);return y+R},0),v=c.reduce((y,_)=>y+Number(hs.calculateTransactionProfit(_)||0),0),E=new Date(i).toISOString().slice(0,10);await kO.add({userId:e,reportDate:E,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(w.toFixed(2)),totalSent:Number(g.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",E)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await ho.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await Em.resetDailyLimits(i)}catch{}if(r)try{await Em.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const OA=new wH,Jy=768;function _H(){const[t,e]=S.useState(void 0);return S.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Jy-1}px)`),r=()=>{e(window.innerWidth<Jy)};return n.addEventListener("change",r),e(window.innerWidth<Jy),()=>n.removeEventListener("change",r)},[]),!!t}function EH(){const[t,e]=S.useState("default"),[n,r]=S.useState(!1);return S.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const QO=S.createContext(void 0);function TH({children:t}){const{profile:e,user:n,loading:r}=il(),[s,i]=S.useState(null),[o,a]=S.useState(null),[l,c]=S.useState(!0);S.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),S.useEffect(()=>{const h=()=>{const p=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const w=localStorage.getItem(p);i(w||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=p=>{const w=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!p.key||p.key!==w))try{const g=localStorage.getItem(w);i(g||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return T.jsx(QO.Provider,{value:d,children:t})}function IH(){const t=S.useContext(QO);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var Xy="focusScope.autoFocusOnMount",Zy="focusScope.autoFocusOnUnmount",LA={bubbles:!1,cancelable:!0},SH="FocusScope",YO=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=S.useState(null),c=Gs(s),d=Gs(i),h=S.useRef(null),f=$n(e,g=>l(g)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let g=function(_){if(p.paused||!a)return;const R=_.target;a.contains(R)?h.current=R:Gi(h.current,{select:!0})},v=function(_){if(p.paused||!a)return;const R=_.relatedTarget;R!==null&&(a.contains(R)||Gi(h.current,{select:!0}))},E=function(_){if(document.activeElement===document.body)for(const k of _)k.removedNodes.length>0&&Gi(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const y=new MutationObserver(E);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,p.paused]),S.useEffect(()=>{if(a){MA.add(p);const g=document.activeElement;if(!a.contains(g)){const E=new CustomEvent(Xy,LA);a.addEventListener(Xy,c),a.dispatchEvent(E),E.defaultPrevented||(bH(CH(JO(a)),{select:!0}),document.activeElement===g&&Gi(a))}return()=>{a.removeEventListener(Xy,c),setTimeout(()=>{const E=new CustomEvent(Zy,LA);a.addEventListener(Zy,d),a.dispatchEvent(E),E.defaultPrevented||Gi(g??document.body,{select:!0}),a.removeEventListener(Zy,d),MA.remove(p)},0)}}},[a,c,d,p]);const w=S.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,E=document.activeElement;if(v&&E){const y=g.currentTarget,[_,R]=AH(y);_&&R?!g.shiftKey&&E===R?(g.preventDefault(),n&&Gi(_,{select:!0})):g.shiftKey&&E===_&&(g.preventDefault(),n&&Gi(R,{select:!0})):E===y&&g.preventDefault()}},[n,r,p.paused]);return T.jsx(en.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});YO.displayName=SH;function bH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Gi(r,{select:e}),document.activeElement!==n)return}function AH(t){const e=JO(t),n=VA(e,t),r=VA(e.reverse(),t);return[n,r]}function JO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function VA(t,e){for(const n of t)if(!xH(n,{upTo:e}))return n}function xH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function RH(t){return t instanceof HTMLInputElement&&"select"in t}function Gi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&RH(t)&&e&&t.select()}}var MA=PH();function PH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=FA(t,e),t.unshift(e)},remove(e){var n;t=FA(t,e),(n=t[0])==null||n.resume()}}}function FA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function CH(t){return t.filter(e=>e.tagName!=="A")}var ev=0;function DH(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??UA()),document.body.insertAdjacentElement("beforeend",t[1]??UA()),ev++,()=>{ev===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ev--}},[])}function UA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Fs=function(){return Fs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fs.apply(this,arguments)};function XO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function kH(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var tp="right-scroll-bar-position",np="width-before-scroll-bar",NH="with-scroll-bars-hidden",OH="--removed-body-scroll-bar-size";function tv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function LH(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var VH=typeof window<"u"?S.useLayoutEffect:S.useEffect,jA=new WeakMap;function MH(t,e){var n=LH(null,function(r){return t.forEach(function(s){return tv(s,r)})});return VH(function(){var r=jA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||tv(a,null)}),i.forEach(function(a){s.has(a)||tv(a,o)})}jA.set(n,t)},[t]),n}function FH(t){return t}function UH(t,e){e===void 0&&(e=FH);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function jH(t){t===void 0&&(t={});var e=UH(null);return e.options=Fs({async:!0,ssr:!1},t),e}var ZO=function(t){var e=t.sideCar,n=XO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Fs({},n))};ZO.isSideCarExport=!0;function $H(t,e){return t.useMedium(e),ZO}var e2=jH(),nv=function(){},kg=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:nv,onWheelCapture:nv,onTouchMoveCapture:nv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,w=t.noIsolation,g=t.inert,v=t.allowPinchZoom,E=t.as,y=E===void 0?"div":E,_=t.gapMode,R=XO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,L=MH([n,e]),x=Fs(Fs({},R),s);return S.createElement(S.Fragment,null,d&&S.createElement(k,{sideCar:e2,removeScrollBar:c,shards:h,noRelative:p,noIsolation:w,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:_}),o?S.cloneElement(S.Children.only(a),Fs(Fs({},x),{ref:L})):S.createElement(y,Fs({},x,{className:l,ref:L}),a))});kg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kg.classNames={fullWidth:np,zeroRight:tp};var BH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=BH();return e&&t.setAttribute("nonce",e),t}function WH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function qH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var HH=function(){var t=0,e=null;return{add:function(n){t==0&&(e=zH())&&(WH(e,n),qH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},KH=function(){var t=HH();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},t2=function(){var t=KH(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},GH={left:0,top:0,right:0,gap:0},rv=function(t){return parseInt(t||"",10)||0},QH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[rv(n),rv(r),rv(s)]},YH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return GH;var e=QH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},JH=t2(),Xl="data-scroll-locked",XH=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(NH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Xl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(np,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(tp," .").concat(tp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(np," .").concat(np,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xl,`] {
    `).concat(OH,": ").concat(a,`px;
  }
`)},$A=function(){var t=parseInt(document.body.getAttribute(Xl)||"0",10);return isFinite(t)?t:0},ZH=function(){S.useEffect(function(){return document.body.setAttribute(Xl,($A()+1).toString()),function(){var t=$A()-1;t<=0?document.body.removeAttribute(Xl):document.body.setAttribute(Xl,t.toString())}},[])},eK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;ZH();var i=S.useMemo(function(){return YH(s)},[s]);return S.createElement(JH,{styles:XH(i,!e,s,n?"":"!important")})},i_=!1;if(typeof window<"u")try{var wf=Object.defineProperty({},"passive",{get:function(){return i_=!0,!0}});window.addEventListener("test",wf,wf),window.removeEventListener("test",wf,wf)}catch{i_=!1}var wl=i_?{passive:!1}:!1,tK=function(t){return t.tagName==="TEXTAREA"},n2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!tK(t)&&n[e]==="visible")},nK=function(t){return n2(t,"overflowY")},rK=function(t){return n2(t,"overflowX")},BA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=r2(t,r);if(s){var i=s2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},sK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},iK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},r2=function(t,e){return t==="v"?nK(e):rK(e)},s2=function(t,e){return t==="v"?sK(e):iK(e)},oK=function(t,e){return t==="h"&&e==="rtl"?-1:1},aK=function(t,e,n,r,s){var i=oK(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=s2(t,a),w=p[0],g=p[1],v=p[2],E=g-v-i*w;(w||E)&&r2(t,a)&&(h+=E,f+=w);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},_f=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zA=function(t){return[t.deltaX,t.deltaY]},WA=function(t){return t&&"current"in t?t.current:t},lK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},cK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},uK=0,_l=[];function dK(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(uK++)[0],i=S.useState(t2)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=kH([t.lockRef.current],(t.shards||[]).map(WA),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var E=_f(g),y=n.current,_="deltaX"in g?g.deltaX:y[0]-E[0],R="deltaY"in g?g.deltaY:y[1]-E[1],k,L=g.target,x=Math.abs(_)>Math.abs(R)?"h":"v";if("touches"in g&&x==="h"&&L.type==="range")return!1;var A=BA(x,L);if(!A)return!0;if(A?k=x:(k=x==="v"?"h":"v",A=BA(x,L)),!A)return!1;if(!r.current&&"changedTouches"in g&&(_||R)&&(r.current=k),!k)return!0;var b=r.current||k;return aK(b,v,g,b==="h"?_:R)},[]),l=S.useCallback(function(g){var v=g;if(!(!_l.length||_l[_l.length-1]!==i)){var E="deltaY"in v?zA(v):_f(v),y=e.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&lK(k.delta,E)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var _=(o.current.shards||[]).map(WA).filter(Boolean).filter(function(k){return k.contains(v.target)}),R=_.length>0?a(v,_[0]):!o.current.noIsolation;R&&v.cancelable&&v.preventDefault()}}},[]),c=S.useCallback(function(g,v,E,y){var _={name:g,delta:v,target:E,should:y,shadowParent:hK(E)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(R){return R!==_})},1)},[]),d=S.useCallback(function(g){n.current=_f(g),r.current=void 0},[]),h=S.useCallback(function(g){c(g.type,zA(g),g.target,a(g,t.lockRef.current))},[]),f=S.useCallback(function(g){c(g.type,_f(g),g.target,a(g,t.lockRef.current))},[]);S.useEffect(function(){return _l.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,wl),document.addEventListener("touchmove",l,wl),document.addEventListener("touchstart",d,wl),function(){_l=_l.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,wl),document.removeEventListener("touchmove",l,wl),document.removeEventListener("touchstart",d,wl)}},[]);var p=t.removeScrollBar,w=t.inert;return S.createElement(S.Fragment,null,w?S.createElement(i,{styles:cK(s)}):null,p?S.createElement(eK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function hK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const fK=$H(e2,dK);var i2=S.forwardRef(function(t,e){return S.createElement(kg,Fs({},t,{ref:e,sideCar:fK}))});i2.classNames=kg.classNames;var pK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},El=new WeakMap,Ef=new WeakMap,Tf={},sv=0,o2=function(t){return t&&(t.host||o2(t.parentNode))},mK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=o2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},gK=function(t,e,n,r){var s=mK(e,Array.isArray(t)?t:[t]);Tf[n]||(Tf[n]=new WeakMap);var i=Tf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),w=p!==null&&p!=="false",g=(El.get(f)||0)+1,v=(i.get(f)||0)+1;El.set(f,g),i.set(f,v),o.push(f),g===1&&w&&Ef.set(f,!0),v===1&&f.setAttribute(n,"true"),w||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return d(e),a.clear(),sv++,function(){o.forEach(function(h){var f=El.get(h)-1,p=i.get(h)-1;El.set(h,f),i.set(h,p),f||(Ef.has(h)||h.removeAttribute(r),Ef.delete(h)),p||h.removeAttribute(n)}),sv--,sv||(El=new WeakMap,El=new WeakMap,Ef=new WeakMap,Tf={})}},yK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=pK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),gK(r,s,n,"aria-hidden")):function(){return null}},Ng="Dialog",[a2,gG]=jc(Ng),[vK,bs]=a2(Ng),l2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=i0({prop:r,defaultProp:s??!1,onChange:i,caller:Ng});return T.jsx(vK,{scope:e,triggerRef:a,contentRef:l,contentId:_y(),titleId:_y(),descriptionId:_y(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};l2.displayName=Ng;var c2="DialogTrigger",u2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(c2,n),i=$n(e,s.triggerRef);return T.jsx(en.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":GE(s.open),...r,ref:i,onClick:Lt(t.onClick,s.onOpenToggle)})});u2.displayName=c2;var HE="DialogPortal",[wK,d2]=a2(HE,{forceMount:void 0}),h2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=bs(HE,e);return T.jsx(wK,{scope:e,forceMount:n,children:S.Children.map(r,o=>T.jsx(nl,{present:n||i.open,children:T.jsx(s0,{asChild:!0,container:s,children:o})}))})};h2.displayName=HE;var Tm="DialogOverlay",f2=S.forwardRef((t,e)=>{const n=d2(Tm,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=bs(Tm,t.__scopeDialog);return i.modal?T.jsx(nl,{present:r||i.open,children:T.jsx(EK,{...s,ref:e})}):null});f2.displayName=Tm;var _K=Cd("DialogOverlay.RemoveScroll"),EK=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(Tm,n);return T.jsx(i2,{as:_K,allowPinchZoom:!0,shards:[s.contentRef],children:T.jsx(en.div,{"data-state":GE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Za="DialogContent",p2=S.forwardRef((t,e)=>{const n=d2(Za,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=bs(Za,t.__scopeDialog);return T.jsx(nl,{present:r||i.open,children:i.modal?T.jsx(TK,{...s,ref:e}):T.jsx(IK,{...s,ref:e})})});p2.displayName=Za;var TK=S.forwardRef((t,e)=>{const n=bs(Za,t.__scopeDialog),r=S.useRef(null),s=$n(e,n.contentRef,r);return S.useEffect(()=>{const i=r.current;if(i)return yK(i)},[]),T.jsx(m2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Lt(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Lt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Lt(t.onFocusOutside,i=>i.preventDefault())})}),IK=S.forwardRef((t,e)=>{const n=bs(Za,t.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return T.jsx(m2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),m2=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=bs(Za,n),l=S.useRef(null),c=$n(e,l);return DH(),T.jsxs(T.Fragment,{children:[T.jsx(YO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:T.jsx(Um,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":GE(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),T.jsxs(T.Fragment,{children:[T.jsx(SK,{titleId:a.titleId}),T.jsx(AK,{contentRef:l,descriptionId:a.descriptionId})]})]})}),KE="DialogTitle",g2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(KE,n);return T.jsx(en.h2,{id:s.titleId,...r,ref:e})});g2.displayName=KE;var y2="DialogDescription",v2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(y2,n);return T.jsx(en.p,{id:s.descriptionId,...r,ref:e})});v2.displayName=y2;var w2="DialogClose",_2=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=bs(w2,n);return T.jsx(en.button,{type:"button",...r,ref:e,onClick:Lt(t.onClick,()=>s.onOpenChange(!1))})});_2.displayName=w2;function GE(t){return t?"open":"closed"}var E2="DialogTitleWarning",[yG,T2]=bM(E2,{contentName:Za,titleName:KE,docsSlug:"dialog"}),SK=({titleId:t})=>{const e=T2(E2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},bK="DialogDescriptionWarning",AK=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${T2(bK).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},xK=l2,RK=u2,PK=h2,I2=f2,S2=p2,b2=g2,A2=v2,CK=_2;const iv=xK,vG=RK,DK=PK,x2=S.forwardRef(({className:t,...e},n)=>T.jsx(I2,{ref:n,className:Bn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));x2.displayName=I2.displayName;const rp=S.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>T.jsxs(DK,{children:[T.jsx(x2,{}),T.jsxs(S2,{ref:o,className:Bn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&T.jsxs(CK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[T.jsx(c0,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rp.displayName=S2.displayName;const sp=({className:t,...e})=>T.jsx("div",{className:Bn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});sp.displayName="DialogHeader";const kK=({className:t,...e})=>T.jsx("div",{className:Bn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});kK.displayName="DialogFooter";const ip=S.forwardRef(({className:t,...e},n)=>T.jsx(b2,{ref:n,className:Bn("text-lg font-semibold leading-none tracking-tight",t),...e}));ip.displayName=b2.displayName;const o_=S.forwardRef(({className:t,...e},n)=>T.jsx(A2,{ref:n,className:Bn("text-sm text-muted-foreground",t),...e}));o_.displayName=A2.displayName;const NK={},qA=j.lazy(()=>Q(()=>import("./Index-DsCcS3Rh.js"),[],import.meta.url)),If=j.lazy(()=>Q(()=>import("./LandingPage-BtVbz7pM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),HA=j.lazy(()=>Q(()=>import("./SubscriptionsPage-Aa0hCyfM.js"),__vite__mapDeps([12,1,4,13,14,6,7,5,11]),import.meta.url)),KA=j.lazy(()=>Q(()=>import("./AuthPage-CL2ZpNq5.js"),__vite__mapDeps([15,1,2,3,8]),import.meta.url)),Sf=j.lazy(()=>Q(()=>import("./TopUpPage-NCBxlSxE.js"),__vite__mapDeps([16,1,17]),import.meta.url)),GA=j.lazy(()=>Q(()=>import("./AdminTopupsPage-BkTe4_04.js"),__vite__mapDeps([18,17]),import.meta.url)),QA=j.lazy(()=>Q(()=>import("./AdminNotificationsPage-DWW3cAcy.js"),__vite__mapDeps([19,1,20,21,22]),import.meta.url)),bf=j.lazy(()=>Q(()=>import("./UserRegisterPage-BDzxtrEg.js"),__vite__mapDeps([23,1,20,24,25,26,27,28]),import.meta.url)),YA=j.lazy(()=>Q(()=>import("./UserAccountSetupPage-CYvazLkh.js"),__vite__mapDeps([29,1,20,24,28,27,11]),import.meta.url)),JA=j.lazy(()=>Q(()=>import("./ForgotPasswordCodePage-WDRUfrKt.js"),[],import.meta.url)),XA=j.lazy(()=>Q(()=>import("./DashboardLoginPage-DFM7pu_3.js"),__vite__mapDeps([30,1]),import.meta.url)),ZA=j.lazy(()=>Q(()=>import("./ProtectedDashboard-DCHGFSEr.js"),__vite__mapDeps([31,1,32,17,33,20,34,35,36,25,11,37]),import.meta.url)),op=j.lazy(()=>Q(()=>import("./ProtectedUserDashboard-Kmx4-Rpe.js"),__vite__mapDeps([38,39,22,33,20,34]),import.meta.url)),ex=j.lazy(()=>Q(()=>import("./MerchantDashboard-CgfLF84B.js"),__vite__mapDeps([40,41,17,42,32,43,1,44,20,45]),import.meta.url)),tx=j.lazy(()=>Q(()=>import("./PendingApprovalPage-Dsy6sGlt.js"),__vite__mapDeps([46,47]),import.meta.url)),nx=j.lazy(()=>Q(()=>import("./AdminLogin-DAc2odyW.js"),[],import.meta.url)),rx=j.lazy(()=>Q(()=>import("./ProtectedAdminDashboard-C_qIbi2E.js"),__vite__mapDeps([48,13,3,49,41,17,42,20,33,34,50,1,21,24,32,51,4,27,52,53,39,14,9,7,8,11,37]),import.meta.url)),sx=j.lazy(()=>Q(()=>import("./AuthTestPage-D2-eTw9c.js"),__vite__mapDeps([54,1,20]),import.meta.url)),ix=j.lazy(()=>Q(()=>import("./ProfileSettingsPage-igIrK7Qb.js"),__vite__mapDeps([55,1,20,50,56,33,34,45,5,52,7]),import.meta.url)),ox=j.lazy(()=>Q(()=>import("./TransactionsPage-CwwBx2vV.js"),__vite__mapDeps([57,1,17,32,42,58,51,33,20,34,4,44,11,8,14,35,36,5,37]),import.meta.url)),ax=j.lazy(()=>Q(()=>import("./WalletAdditionPage-CCR9YkqW.js"),__vite__mapDeps([59,1,20,17,5,25,27,34]),import.meta.url)),lx=j.lazy(()=>Q(()=>import("./ReferralsPage-Cp1iLEmv.js"),__vite__mapDeps([60,1,32,24,26,22,11,53,37]),import.meta.url)),cx=j.lazy(()=>Q(()=>import("./CPanelPage-BrmYbYwt.js"),__vite__mapDeps([61,1,20]),import.meta.url)),ux=j.lazy(()=>Q(()=>import("./CPanelLoginPage-B6x2V0Nv.js"),__vite__mapDeps([62,20,1]),import.meta.url)),dx=j.lazy(()=>Q(()=>import("./NotFound-Dwje-Wmi.js"),[],import.meta.url)),hx=j.lazy(()=>Q(()=>import("./PrivacyPolicyPage-Cc5Hu0Jz.js"),[],import.meta.url)),R2=new b3({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=D3({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});C3({queryClient:R2,persister:t,maxAge:24*60*60*1e3})}catch{}const OK=()=>{if(!((ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return T.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:T.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:T.jsx(RP,{className:"w-5 h-5"})})})},fx=()=>{const t=Zs(),{user:e,loading:n}=il(),r=(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?T.jsx(zq,{}):null},px=()=>{var Pn;const t=_H(),{profile:e,user:n}=il(),{shopId:r}=IH(),i=Zs().pathname.startsWith("/user/dashboard"),o=qc(),{toast:a}=r0(),[l,c]=j.useState(!1),[d,h]=j.useState(null),[f,p]=j.useState(!1),[w,g]=j.useState(null),[v,E]=j.useState(!1),[y,_]=j.useState(""),[R,k]=j.useState(""),[L,x]=j.useState(null),[A,b]=j.useState(null),P=j.useRef(null),D=j.useRef(null),O=j.useRef(!1),C=j.useRef(null),$=j.useRef(()=>{try{const Y=localStorage.getItem("sms_suppressed_ids")||"[]",K=Array.isArray(JSON.parse(Y))?JSON.parse(Y):[];return new Set(K.map(Z=>String(Z||"")))}catch{return new Set}}),[re,se]=j.useState(!1);EH();const[ue,U]=j.useState(!1),[V,ee]=j.useState(null),[oe,G]=j.useState(""),[Ne,Ie]=j.useState(!1),[Oe,Ze]=j.useState(!1),[be,Qt]=j.useState(""),[rt,Be]=j.useState(""),[qe,Ft]=j.useState(!1),[nn,Vn]=j.useState(0),[qr,In]=j.useState(!1),Wn=(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android",Ue=j.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}In(!1);try{o("/user/login")}catch{}},[o]);j.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!n&&Wn&&In(!0)}catch{!n&&Wn&&In(!0)}},[n,Wn]);const _t=j.useCallback(()=>{try{const Y=window.AudioContext||window.webkitAudioContext;if(!Y)return;const K=new Y,Z=K.createOscillator(),W=K.createGain();Z.type="sine",W.gain.setValueAtTime(0,K.currentTime),Z.connect(W),W.connect(K.destination);const X=K.currentTime;Z.frequency.setValueAtTime(800,X),W.gain.linearRampToValueAtTime(.15,X+.02),Z.start(X),Z.frequency.exponentialRampToValueAtTime(1200,X+.08),W.gain.exponentialRampToValueAtTime(1e-5,X+.32),Z.stop(X+.35)}catch{}},[]),ut=Y=>{try{const K=String(Y||"").replace(/[^0-9+]/g,"");if(!K)return"";if(K.startsWith("+20")){const Z=K.slice(3);return Z.startsWith("1")?"0"+Z:Z}if(K.startsWith("0020")){const Z=K.slice(4);return Z.startsWith("1")?"0"+Z:Z}if(K.startsWith("20")){const Z=K.slice(2);return Z.startsWith("1")?"0"+Z:Z}return K.startsWith("0")?K:/^(10|11|12|15)/.test(K)?"0"+K:K}catch{return""}},Ar=Y=>{try{const K=String(Y||""),Z=K.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let W=Z?parseFloat(String(Z[1]).replace(",",".")):0;const X=K.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let ie=X?ut(X[1]):void 0;const fe=K.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),ye=K.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),he=fe?String(fe[1]).trim():ye?String(ye[1]).trim():void 0,Ae=K.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),xe=K.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),Qe=K.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!W||W<=0){const de=K.match(/Received\s*EGP\s*([0-9.,]+)/i)||K.match(/Received\s*EGP([0-9.,]+)/i);de&&(W=parseFloat(String(de[1]).replace(/,/g,"")))}if(!ie){const de=K.match(/from\s+([0-9+]+)/i);de&&(ie=ut(de[1]))}const pe=Ae?String(Ae[1]).trim():xe?String(xe[1]).trim():Qe?String(Qe[1]).trim():void 0;return{amount:W,sender:ie,senderName:he,reference:pe}}catch{return{amount:0}}};j.useEffect(()=>{(async()=>{var Y;try{if(!ue||!V){Ie(!1);return}const{auth:K}=await Q(async()=>{const{auth:ie}=await Promise.resolve().then(()=>kt);return{auth:ie}},void 0,import.meta.url),Z=((Y=K.currentUser)==null?void 0:Y.uid)||"",W=Z?`selectedWallet_${Z}`:"selectedWallet_default",X=localStorage.getItem(W)||"";if(!X){Ie(!0);return}try{const{merchantWalletService:ie}=await Q(async()=>{const{merchantWalletService:he}=await Promise.resolve().then(()=>Du);return{merchantWalletService:he}},void 0,import.meta.url),fe=await ie.getById(X),ye=fe&&fe.defaultWithdrawCommission!=null;Ie(!ye)}catch{Ie(!0)}}catch{Ie(!0)}})()},[ue,V]);const Qo=async Y=>{try{const{merchantWalletService:K,detectWalletFromSim:Z}=await Q(async()=>{const{merchantWalletService:xe,detectWalletFromSim:Qe}=await Promise.resolve().then(()=>jl);return{merchantWalletService:xe,detectWalletFromSim:Qe}},void 0,import.meta.url),W=(n==null?void 0:n.uid)||"";if(!W)return;const X=`wallets_${W}`,ie=typeof localStorage<"u"?localStorage.getItem(X):null,fe=ie?JSON.parse(ie):[],ye=await K.getByMerchantId(W),he=[...(Array.isArray(fe)?fe:[]).map(xe=>({id:String((xe==null?void 0:xe.id)||""),phone:String((xe==null?void 0:xe.phone)||(xe==null?void 0:xe.msisdn)||""),isDefault:!!(xe!=null&&xe.isDefault)})),...(Array.isArray(ye)?ye:[]).map(xe=>({id:String((xe==null?void 0:xe.id)||""),msisdn:String((xe==null?void 0:xe.msisdn)||""),isDefault:!!(xe!=null&&xe.isDefault)}))],Ae=await Z(Y||[],he);if(Ae&&Ae.walletId)try{localStorage.setItem(`selectedWallet_${W}`,Ae.walletId)}catch{}}catch{}};S.useEffect(()=>{const Y=async K=>{var Z;try{const W=(K==null?void 0:K.detail)||{},X=String(W.text||"").trim(),ie=String(W.title||"").trim();if(!X)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*/i.test(`${ie} ${X}`)){try{Yy(W,{toast:a})}catch{}return}const{auth:ye}=await Q(async()=>{const{auth:Me}=await Promise.resolve().then(()=>kt);return{auth:Me}},void 0,import.meta.url),he=((Z=ye.currentUser)==null?void 0:Z.uid)||"";let Ae=r||"";if(!he){try{a({title:"  ",description:"   "})}catch{}return}if(!Ae)try{const{doc:Me,getDoc:st}=await Q(async()=>{const{doc:Xe,getDoc:wn}=await Promise.resolve().then(()=>hn);return{doc:Xe,getDoc:wn}},void 0,import.meta.url),{db:Et}=await Q(async()=>{const{db:Xe}=await Promise.resolve().then(()=>kt);return{db:Xe}},void 0,import.meta.url),vt=await st(Me(Et,"profiles",he));if(vt.exists()){const Xe=vt.data(),wn=String((Xe==null?void 0:Xe.shopId)||"").trim();wn&&(Ae=wn)}}catch{}let xe="",Qe="",pe=!1;try{const{doc:Me,getDoc:st}=await Q(async()=>{const{doc:Xe,getDoc:wn}=await Promise.resolve().then(()=>hn);return{doc:Xe,getDoc:wn}},void 0,import.meta.url),{db:Et}=await Q(async()=>{const{db:Xe}=await Promise.resolve().then(()=>kt);return{db:Xe}},void 0,import.meta.url),vt=await st(Me(Et,"profiles",he));if(vt.exists()){const Xe=vt.data();pe=(Xe==null?void 0:Xe.smsAutoRegisterEnabled)===!0,xe=String((Xe==null?void 0:Xe.sim1Number)||"").trim(),Qe=String((Xe==null?void 0:Xe.sim2Number)||"").trim()}}catch{}try{const Me=localStorage.getItem(`sim1Number_${he}`)??localStorage.getItem("sim1Number"),st=localStorage.getItem(`sim2Number_${he}`)??localStorage.getItem("sim2Number");xe||(xe=String(Me||"").trim()),Qe||(Qe=String(st||"").trim())}catch{}try{const{Preferences:Me}=await Q(async()=>{const{Preferences:vt}=await Promise.resolve().then(()=>Gy);return{Preferences:vt}},void 0,import.meta.url),st=await Me.get({key:"sim1_number"}),Et=await Me.get({key:"sim2_number"});!xe&&(st!=null&&st.value)&&(xe=String(st.value).trim()),!Qe&&(Et!=null&&Et.value)&&(Qe=String(Et.value).trim())}catch{}let de=[];const ze=Array.isArray(((K==null?void 0:K.detail)||{}).activeSimMsisdns)?K.detail.activeSimMsisdns.map(Me=>String(Me||"")):[];ze.length>0?de=ze:de=[xe,Qe].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(de))}catch{}let me="";try{const Me=localStorage.getItem("lastSmsSimMsisdn")||"";Me&&de.includes(Me)&&(me=Me)}catch{}if(me||(me=de[0]||""),me)try{localStorage.setItem("lastSmsSimMsisdn",me)}catch{}const{resolveWalletBySimOrSlot:et,bindSlotWalletMapping:St,merchantWalletService:Te}=await Q(async()=>{const{resolveWalletBySimOrSlot:Me,bindSlotWalletMapping:st,merchantWalletService:Et}=await Promise.resolve().then(()=>jl);return{resolveWalletBySimOrSlot:Me,bindSlotWalletMapping:st,merchantWalletService:Et}},void 0,import.meta.url),We=he;let De=await et({simNumbers:de,userId:We});if(!De&&de.length>0){try{await Qo(de)}catch{}const Me=localStorage.getItem(`selectedWallet_${We}`)||"";if(Me)try{const st=await Te.getById(Me);De={walletId:Me,msisdn:String((st==null?void 0:st.msisdn)||"")}}catch{}}if(De&&De.walletId){try{localStorage.setItem(`selectedWallet_${We}`,De.walletId)}catch{}try{St({userId:We,walletId:De.walletId,msisdn:De.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:De.walletId}}))}catch{}try{const Me=String(De.msisdn||"").trim();Me&&(me=Me,localStorage.setItem("lastSmsSimMsisdn",Me))}catch{}}const tt=Ar(X),gt=Number(tt.amount||0);if(!gt||gt<=0){try{Yy(W,{toast:a})}catch{}return}const ae=(De==null?void 0:De.msisdn)||await ov(he),Ye=tt.reference||`VF-${Date.now()}`,Ve={amount:gt,sender:String(tt.sender||""),senderName:tt.senderName,text:X,simNumber:me};if(pe)try{await ir({...Ve,reference:Ye,walletMsisdn:ae})}catch{}else{try{const{addDoc:Me,collection:st,serverTimestamp:Et}=await Q(async()=>{const{addDoc:Je,collection:it,serverTimestamp:bt}=await Promise.resolve().then(()=>hn);return{addDoc:Je,collection:it,serverTimestamp:bt}},void 0,import.meta.url),{db:vt}=await Q(async()=>{const{db:Je}=await Promise.resolve().then(()=>kt);return{db:Je}},void 0,import.meta.url),Xe=await Me(st(vt,"pendingSmsPopups"),{userId:he,shopId:Ae,payload:{...Ve,reference:Ye,walletMsisdn:ae},status:"pending",createdAt:Et()}),wn=/Received\s*EGP/i.test(String(X))?"InstaPay":"VF-Cash";ee({...Ve,reference:Ye,providerLabel:wn,walletMsisdn:ae,popupId:Xe.id})}catch{const Me=/Received\s*EGP/i.test(String(X))?"InstaPay":"VF-Cash";ee({...Ve,reference:Ye,providerLabel:Me,walletMsisdn:ae})}U(!0);try{_t()}catch{}}}catch{try{Yy((K==null?void 0:K.detail)||{},{toast:a})}catch{}}};try{window.addEventListener("vfNotificationReceived",Y)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",Y)}catch{}}},[a,r]),S.useEffect(()=>{const Y=async K=>{var Z;try{const W=(K==null?void 0:K.detail)||{},X=String(W.text||"");if(!X)return;const ie=/Received\s*EGP/i.test(X),fe=VK(X,String(W.sender||W.msisdn||""));if(!ie&&!fe)return;const{auth:ye}=await Q(async()=>{const{auth:Je}=await Promise.resolve().then(()=>kt);return{auth:Je}},void 0,import.meta.url),he=((Z=ye.currentUser)==null?void 0:Z.uid)||"";let Ae=r||"";if(!he){try{a({title:"  ",description:"   "})}catch{}return}if(!Ae)try{const{doc:Je,getDoc:it}=await Q(async()=>{const{doc:Ee,getDoc:Ct}=await Promise.resolve().then(()=>hn);return{doc:Ee,getDoc:Ct}},void 0,import.meta.url),{db:bt}=await Q(async()=>{const{db:Ee}=await Promise.resolve().then(()=>kt);return{db:Ee}},void 0,import.meta.url),Le=await it(Je(bt,"profiles",he));if(Le.exists()){const Ee=Le.data(),Ct=String((Ee==null?void 0:Ee.shopId)||"").trim();Ct&&(Ae=Ct)}}catch{}if(!Ae){try{a({title:"  ",description:"   "})}catch{}return}let xe=!0,Qe=!1,pe="",de="";try{const{doc:Je,getDoc:it}=await Q(async()=>{const{doc:Ee,getDoc:Ct}=await Promise.resolve().then(()=>hn);return{doc:Ee,getDoc:Ct}},void 0,import.meta.url),{db:bt}=await Q(async()=>{const{db:Ee}=await Promise.resolve().then(()=>kt);return{db:Ee}},void 0,import.meta.url),Le=await it(Je(bt,"profiles",he));if(Le.exists()){const Ee=Le.data();xe=(Ee==null?void 0:Ee.smsReadingEnabled)!==void 0?!!Ee.smsReadingEnabled:!0,Qe=(Ee==null?void 0:Ee.smsAutoRegisterEnabled)===!0,pe=String((Ee==null?void 0:Ee.sim1Number)||"").trim()||pe,de=String((Ee==null?void 0:Ee.sim2Number)||"").trim()||de}}catch{}try{const Je=localStorage.getItem(`sim1Number_${he}`)??localStorage.getItem("sim1Number"),it=localStorage.getItem(`sim2Number_${he}`)??localStorage.getItem("sim2Number");pe||(pe=String(Je||"").trim()),de||(de=String(it||"").trim())}catch{}try{const{Preferences:Je}=await Q(async()=>{const{Preferences:Le}=await Promise.resolve().then(()=>Gy);return{Preferences:Le}},void 0,import.meta.url),it=await Je.get({key:"sim1_number"}),bt=await Je.get({key:"sim2_number"});!pe&&(it!=null&&it.value)&&(pe=String(it.value).trim()),!de&&(bt!=null&&bt.value)&&(de=String(bt.value).trim())}catch{}if(!xe)return;const ze=String(W.msisdn||W.sender||""),me=ut(ze);let et=Array.isArray(W.activeSimMsisdns)&&W.activeSimMsisdns.length>0?W.activeSimMsisdns.map(Je=>ut(String(Je||""))):me?[me]:[];if(et.length===0){const Je=Number((W==null?void 0:W.slot)||(W==null?void 0:W.subId)||-1);Je===1&&pe?et=[ut(pe)]:Je===2&&de?et=[ut(de)]:et=[ut(pe),ut(de)].filter(Boolean)}try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(et))}catch{}let St="";const Te=[pe,de].filter(Boolean).map(Je=>ut(Je));if(me&&Te.includes(me))St=me;else{const Je=Number((W==null?void 0:W.slot)||(W==null?void 0:W.subId)||-1);Je===1&&pe?St=ut(pe):Je===2&&de?St=ut(de):St=ut(et[0]||pe||de||"")}if(St)try{localStorage.setItem("lastSmsSimMsisdn",St)}catch{}const{resolveWalletBySimOrSlot:We,bindSlotWalletMapping:De,merchantWalletService:tt}=await Q(async()=>{const{resolveWalletBySimOrSlot:Je,bindSlotWalletMapping:it,merchantWalletService:bt}=await Promise.resolve().then(()=>jl);return{resolveWalletBySimOrSlot:Je,bindSlotWalletMapping:it,merchantWalletService:bt}},void 0,import.meta.url),gt=he;let ae=await We({simNumbers:et,subId:Number((W==null?void 0:W.subId)||-1),slotIndex:Number((W==null?void 0:W.slot)||-1),userId:gt});if(!ae&&et.length>0){try{await Qo(et)}catch{}const Je=localStorage.getItem(`selectedWallet_${gt}`)||"";if(Je)try{const it=await tt.getById(Je);ae={walletId:Je,msisdn:String((it==null?void 0:it.msisdn)||"")}}catch{}}if(ae&&ae.walletId){try{localStorage.setItem(`selectedWallet_${gt}`,ae.walletId)}catch{}try{De({userId:gt,subId:Number((W==null?void 0:W.subId)||-1),slotIndex:Number((W==null?void 0:W.slot)||-1),walletId:ae.walletId,msisdn:ae.msisdn})}catch{}}const Ye=Ar(X);let Ve=Number(Ye.amount||0),Me=Ye.sender||me||String(W.sender||""),st=Ye.senderName,Et=Ye.reference||"";if(ie){const Je=String(X).match(/Received\s*EGP\s*([0-9.,]+)/i);Je&&(Ve=parseFloat(String(Je[1]).replace(/,/g,"")));const it=String(X).match(/from\s+([0-9+]+)/i);it&&(Me=ut(it[1]));const bt=String(X).match(/Ref:\s*([A-Za-z0-9\-]+)/i);bt&&(Et=String(bt[1]).trim())}if(!Ve||Ve<=0)return;const vt=(ae==null?void 0:ae.msisdn)||(he?await ov(he):""),Xe=St===ut(pe)?"SIM 1":St===ut(de)?"SIM 2":"",wn={amount:Ve,sender:Me,senderName:st,text:X,simNumber:St,simLabel:Xe};if(Qe)try{await ir(wn)}catch{}else{try{const{addDoc:Je,collection:it,serverTimestamp:bt}=await Q(async()=>{const{addDoc:rn,collection:Ut,serverTimestamp:dn}=await Promise.resolve().then(()=>hn);return{addDoc:rn,collection:Ut,serverTimestamp:dn}},void 0,import.meta.url),{db:Le}=await Q(async()=>{const{db:rn}=await Promise.resolve().then(()=>kt);return{db:rn}},void 0,import.meta.url),Ee=await Je(it(Le,"pendingSmsPopups"),{userId:he,shopId:Ae,payload:{...wn,reference:Et,walletMsisdn:vt},status:"pending",createdAt:bt()});ee({...wn,reference:Et,providerLabel:ie?"InstaPay":"VF-Cash",walletMsisdn:vt,popupId:Ee.id})}catch{ee({...wn,reference:Et,providerLabel:ie?"InstaPay":"VF-Cash",walletMsisdn:vt})}U(!0);try{_t()}catch{}}}catch{}};try{window.addEventListener("mobileSmsReceived",Y)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",Y)}catch{}}},[a,r]),S.useEffect(()=>{},[a,r]),S.useEffect(()=>{},[a,r]);const ir=async Y=>{var K,Z,W,X,ie,fe,ye;try{const he=Y||V;if(!he)return;const{amount:Ae,sender:xe,text:Qe,simNumber:pe,senderName:de}=he,ze=String(Qe||"");let me=Number(Ae||0);const et=typeof(Y==null?void 0:Y.deferredMode)=="boolean"?Y.deferredMode:Oe,St=(Y==null?void 0:Y.debtorName)??be,Te=(Y==null?void 0:Y.debtorNote)??rt;try{U(!1)}catch{}try{}catch{}const We=/Received\s*EGP/i.test(ze)?"instapay":"vodafone_cash";if(!me||me<=0){const Le=ze.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(Le&&(me=parseFloat(String(Le[1]).replace(",","."))),!me||me<=0){const Ee=ze.match(/Received\s*EGP\s*([0-9.,]+)/i)||ze.match(/Received\s*EGP([0-9.,]+)/i);Ee&&(me=parseFloat(String(Ee[1]).replace(/,/g,"")))}}let De=String(xe||"").trim();if(!De){const Le=ze.match(/\s+\s+(\d+)/i);De=Le?ut(Le[1]):""}let tt=String((he==null?void 0:he.reference)||"").trim();if(!tt){const Le=ze.match(/\s*\s*([\d\.]+)/i);tt=Le?String(Le[1]).trim():String(Date.now())}if(!me||me<=0){try{a({title:"      ",variant:"destructive"})}catch{}return}const{auth:gt}=await Q(async()=>{const{auth:Le}=await Promise.resolve().then(()=>kt);return{auth:Le}},void 0,import.meta.url),ae=((K=gt.currentUser)==null?void 0:K.uid)||"";let Ye=r||"";if(!ae){try{a({title:"  ",description:"   "})}catch{}return}if(!Ye)try{const{doc:Le,getDoc:Ee}=await Q(async()=>{const{doc:Ut,getDoc:dn}=await Promise.resolve().then(()=>hn);return{doc:Ut,getDoc:dn}},void 0,import.meta.url),{db:Ct}=await Q(async()=>{const{db:Ut}=await Promise.resolve().then(()=>kt);return{db:Ut}},void 0,import.meta.url),rn=await Ee(Le(Ct,"profiles",ae));if(rn.exists()){const Ut=rn.data(),dn=String((Ut==null?void 0:Ut.shopId)||"").trim();dn&&(Ye=dn)}}catch{}if(!Ye){try{a({title:"  ",description:"   "})}catch{}return}let Ve=await MK(ae);if(!Ve)try{const{doc:Le,getDoc:Ee}=await Q(async()=>{const{doc:dt,getDoc:rs}=await Promise.resolve().then(()=>hn);return{doc:dt,getDoc:rs}},void 0,import.meta.url),{db:Ct}=await Q(async()=>{const{db:dt}=await Promise.resolve().then(()=>kt);return{db:dt}},void 0,import.meta.url);let rn="",Ut="";try{const dt=await Ee(Le(Ct,"profiles",ae));if(dt.exists()){const rs=dt.data();rn=String((rs==null?void 0:rs.sim1Number)||"").trim(),Ut=String((rs==null?void 0:rs.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:dn}=await Q(async()=>{const{detectWalletFromSim:dt}=await Promise.resolve().then(()=>jl);return{detectWalletFromSim:dt}},void 0,import.meta.url),{merchantWalletService:qn}=await Q(async()=>{const{merchantWalletService:dt}=await Promise.resolve().then(()=>Du);return{merchantWalletService:dt}},void 0,import.meta.url),Hn=`wallets_${ae}`,Sn=localStorage.getItem(Hn),Hr=Sn?JSON.parse(Sn):[],Kr=await qn.getByMerchantId(ae),Gr=(Array.isArray(Hr)?Hr:[]).map(dt=>({id:String((dt==null?void 0:dt.id)||""),phone:String((dt==null?void 0:dt.phone)||(dt==null?void 0:dt.msisdn)||""),isDefault:!!(dt!=null&&dt.isDefault)})),xs=(Array.isArray(Kr)?Kr:[]).map(dt=>({id:String((dt==null?void 0:dt.id)||""),msisdn:String((dt==null?void 0:dt.msisdn)||""),isDefault:!!(dt!=null&&dt.isDefault)})),ol=[...Gr,...xs],al=pe||String(localStorage.getItem("lastSmsSimMsisdn")||"");let Yo=(al?[al]:[]).filter(Boolean);Yo.length===0&&(Yo=[rn,Ut].filter(Boolean));const ll=await dn(Yo,ol);if(ll&&ll.walletId){Ve=ll.walletId;try{localStorage.setItem(`selectedWallet_${ae}`,Ve)}catch{}}}catch{}if(!Ve){try{a({title:"   ",description:"       "})}catch{}return}try{const Le=ae;try{localStorage.setItem(`selectedWallet_${Le}`,Ve)}catch{}try{localStorage.setItem(`selectedWallet_${Le}_${Ye}`,Ve)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ve}}))}catch{}try{const{Preferences:Ee}=await Q(async()=>{const{Preferences:Ct}=await Promise.resolve().then(()=>Gy);return{Preferences:Ct}},void 0,import.meta.url);await Ee.set({key:"selected_wallet_id",value:Ve}),await Ee.set({key:"current_user_id",value:Le})}catch{}}catch{}const{recordAutoTransaction:Me,userDataService:st}=await Q(async()=>{const{recordAutoTransaction:Le,userDataService:Ee}=await Promise.resolve().then(()=>Du);return{recordAutoTransaction:Le,userDataService:Ee}},void 0,import.meta.url),Et=oe&&oe.trim()!==""?Math.max(0,parseFloat(oe)):null;let vt=0;if(Et!=null)vt=Et;else try{const{merchantWalletService:Le}=await Q(async()=>{const{merchantWalletService:rn}=await Promise.resolve().then(()=>Du);return{merchantWalletService:rn}},void 0,import.meta.url),Ee=await Le.getById(String(Ve)),Ct=Ee&&Ee.defaultWithdrawCommission;if(Ct!=null)vt=Math.round((Number(Ct)||0)*Number(me)/1e3*100)/100;else{const{calculateCommission:rn}=await Q(async()=>{const{calculateCommission:Ut}=await Promise.resolve().then(()=>ba);return{calculateCommission:Ut}},void 0,import.meta.url);vt=rn(Number(me),"receive")}}catch{const{calculateCommission:Le}=await Q(async()=>{const{calculateCommission:Ee}=await Promise.resolve().then(()=>ba);return{calculateCommission:Ee}},void 0,import.meta.url);vt=Le(Number(me),"receive")}try{const{walletDailyLimitsService:Le}=await Q(async()=>{const{walletDailyLimitsService:Ct}=await Promise.resolve().then(()=>s_);return{walletDailyLimitsService:Ct}},void 0,import.meta.url),Ee=await Le.canPerformOperation(String(Ve),Math.max(0,Number(me||0)),"withdraw");if(!Ee.canPerform)try{a({title:"  ",description:String(Ee.message||"      "),variant:"destructive"})}catch{}}catch{}const Xe=tt||`${ze}|${Date.now()}`,wn=pe||String(localStorage.getItem("lastSmsSimMsisdn")||""),it=String((he==null?void 0:he.walletMsisdn)||"").trim()||wn||await ov(ae)||"",bt=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(et)try{const Le=await st.getUserData(ae),Ee=Array.isArray(Le==null?void 0:Le.debts)?Le.debts:[],Ct=bt==="add"?Number(me)+Number(vt):Number(me),rn={id:`DEBT-${Date.now()}`,debtorName:St||de||De||"",amount:Math.round(Number(Ct)*100)/100,reason:Te||"  VodafoneCash",customerId:void 0,mobile:De,status:"pending",createdAt:new Date},Ut=[rn,...Ee];await st.updateUserData(ae,{debts:Ut});try{const dn=vt;await st.saveUserTransaction(ae,{type:"withdraw",amount:me,withdrawnAmount:me,commission:dn,status:"pending",createdAt:new Date,senderMsisdn:De,receiverMsisdn:it,senderName:de,walletId:Ve,fromWallet:Ve,lineId:it,provider:We,reference:Xe,transactionId:`DEFER-${Date.now()}`,linkedDebtId:rn.id})}catch{}try{const dn=(Y==null?void 0:Y.popupId)||(V==null?void 0:V.popupId)||"";if(dn){const{doc:qn,updateDoc:Hn,serverTimestamp:Sn}=await Q(async()=>{const{doc:Kr,updateDoc:Gr,serverTimestamp:xs}=await Promise.resolve().then(()=>hn);return{doc:Kr,updateDoc:Gr,serverTimestamp:xs}},void 0,import.meta.url),{db:Hr}=await Q(async()=>{const{db:Kr}=await Promise.resolve().then(()=>kt);return{db:Kr}},void 0,import.meta.url);try{await Hn(qn(Hr,"pendingSmsPopups",dn),{status:"confirmed",confirmedAt:Sn()})}catch{}try{(W=(Z=$.current)==null?void 0:Z.add)==null||W.call(Z,dn);const Kr=Array.from($.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(Kr))}catch{}}}catch{}try{a({title:"  ",description:"      "})}catch{}return}catch{}try{const Le=await Me({shopId:Ye,lineId:it,walletId:Ve,amount:me,note:"SMS-ManualConfirm",provider:We,createdBy:ae,senderMsisdn:De,senderName:de,reference:Xe,text:ze});try{const Ee=(Y==null?void 0:Y.popupId)||(V==null?void 0:V.popupId)||"";if(Ee){const{doc:Ct,updateDoc:rn,serverTimestamp:Ut}=await Q(async()=>{const{doc:qn,updateDoc:Hn,serverTimestamp:Sn}=await Promise.resolve().then(()=>hn);return{doc:qn,updateDoc:Hn,serverTimestamp:Sn}},void 0,import.meta.url),{db:dn}=await Q(async()=>{const{db:qn}=await Promise.resolve().then(()=>kt);return{db:qn}},void 0,import.meta.url);try{await rn(Ct(dn,"pendingSmsPopups",Ee),{status:"confirmed",confirmedAt:Ut()})}catch{}try{(ie=(X=$.current)==null?void 0:X.add)==null||ie.call(X,Ee);const qn=Array.from($.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(qn))}catch{}}}catch{}try{const Ee=Math.max(0,Number(me||0)),{doc:Ct,getDoc:rn,updateDoc:Ut}=await Q(async()=>{const{doc:Gr,getDoc:xs,updateDoc:ol}=await Promise.resolve().then(()=>hn);return{doc:Gr,getDoc:xs,updateDoc:ol}},void 0,import.meta.url),{db:dn}=await Q(async()=>{const{db:Gr}=await Promise.resolve().then(()=>kt);return{db:Gr}},void 0,import.meta.url),qn=Ct(dn,"dashboardData",Ye),Hn=await rn(qn);let Sn=Hn.exists()?Number(((fe=Hn.data())==null?void 0:fe.cashBalance)||0):0;const Hr=Hn.exists()?((ye=Hn.data())==null?void 0:ye.walletBalances)||{}:{},Kr=Number(Hr[Ve]||0);Hr[Ve]=Kr+Ee,Sn=Sn-Ee+Math.max(0,vt),await Ut(qn,{cashBalance:Sn,walletBalances:Hr,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:Sn}}))}catch{}try{const{walletDailyLimitsService:Gr}=await Q(async()=>{const{walletDailyLimitsService:xs}=await Promise.resolve().then(()=>s_);return{walletDailyLimitsService:xs}},void 0,import.meta.url);await Gr.updateUsage(String(Ve),Ee,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Ve)}}))}catch{}}catch{}}catch{}(async()=>{try{const Ee=vt;await st.saveUserTransaction(ae,{type:"withdraw",amount:me,withdrawnAmount:me,commission:Ee,status:"completed",createdAt:new Date,senderMsisdn:De,receiverMsisdn:it,senderName:de,walletId:Ve,fromWallet:Ve,lineId:it,provider:We,reference:Xe,transactionId:Le})}catch{}})(),U(!1),ee(null);try{a({title:`     ${Le}`})}catch{}}catch(Le){try{a({title:String((Le==null?void 0:Le.message)||"  "),variant:"destructive"})}catch{}}}catch{}};S.useEffect(()=>{try{OA.start()}catch{}return()=>{try{OA.stop()}catch{}}},[]),S.useEffect(()=>{(async()=>{try{if(!(n!=null&&n.uid))return;const Y=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),K=String(localStorage.getItem("android_installed_version")||"").trim(),Z=localStorage.getItem("android_last_ack_code"),W=localStorage.getItem("android_installed_code"),X=Z?Number(Z):null,ie=W?Number(W):null,fe=Y||K,ye=X??ie??null;fe&&_(fe),ye&&b(ye);const{doc:he,getDoc:Ae}=await Q(async()=>{const{doc:pe,getDoc:de}=await Promise.resolve().then(()=>hn);return{doc:pe,getDoc:de}},void 0,import.meta.url),{db:xe}=await Q(async()=>{const{db:pe}=await Promise.resolve().then(()=>kt);return{db:pe}},void 0,import.meta.url),Qe=await Ae(he(xe,"profiles",n.uid));if(Qe.exists()){const pe=Qe.data(),de=String((pe==null?void 0:pe.lastAckAndroidVersion)||(pe==null?void 0:pe.androidInstalledVersion)||(pe==null?void 0:pe.lastAckUpdateId)||"").trim(),ze=typeof(pe==null?void 0:pe.lastAckAndroidCode)=="number"?pe.lastAckAndroidCode:typeof(pe==null?void 0:pe.androidInstalledCode)=="number"?pe.androidInstalledCode:null,me=(St,Te)=>{const We=String(St||"").replace(/^v/i,"").split(".").map(tt=>parseInt(tt,10)||0),De=String(Te||"").replace(/^v/i,"").split(".").map(tt=>parseInt(tt,10)||0);for(let tt=0;tt<Math.max(We.length,De.length);tt++){const gt=We[tt]||0,ae=De[tt]||0;if(gt>ae)return 1;if(gt<ae)return-1}return 0};let et=!1;if(typeof ze=="number"&&typeof ye=="number"?et=ze>ye:typeof ze=="number"&&ye==null?et=!0:de&&fe?et=me(de,fe)>0:de&&!fe&&(et=!0),et){if(de){try{localStorage.setItem("android_installed_version",de)}catch{}_(de)}if(typeof ze=="number"){try{localStorage.setItem("android_installed_code",String(ze))}catch{}b(ze)}}else if(typeof ze=="number"&&ye==null){try{localStorage.setItem("android_installed_code",String(ze))}catch{}b(ze)}}}catch{}})()},[n==null?void 0:n.uid]),S.useEffect(()=>{try{const K=String((window==null?void 0:window.__nativeAppVersion)||"").trim();K&&k(K);const Z=window==null?void 0:window.__nativeAppVersionCode;if(typeof Z=="number"){x(Z);try{localStorage.setItem("android_installed_code",String(Z))}catch{}}try{K&&localStorage.setItem("android_installed_version",K)}catch{}}catch{}const Y=K=>{var Z,W;try{const X=String((((Z=K==null?void 0:K.detail)==null?void 0:Z.version)??"")||"").trim(),ie=(W=K==null?void 0:K.detail)==null?void 0:W.code;X&&k(X);try{X&&localStorage.setItem("android_installed_version",X)}catch{}typeof ie=="number"&&x(ie)}catch{}};try{window.addEventListener("native-app-version",Y)}catch{}return()=>{try{window.removeEventListener("native-app-version",Y)}catch{}}},[]),S.useEffect(()=>{try{const Y=(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android",K=String(R||"").trim();if(!Y||!K||!(n!=null&&n.uid))return;(async()=>{try{const{doc:Z,setDoc:W,serverTimestamp:X}=await Q(async()=>{const{doc:fe,setDoc:ye,serverTimestamp:he}=await Promise.resolve().then(()=>hn);return{doc:fe,setDoc:ye,serverTimestamp:he}},void 0,import.meta.url),{db:ie}=await Q(async()=>{const{db:fe}=await Promise.resolve().then(()=>kt);return{db:fe}},void 0,import.meta.url);await W(Z(ie,"profiles",n.uid),{androidInstalledVersion:K,androidInstalledAt:X()},{merge:!0});try{localStorage.setItem("android_installed_version",K)}catch{}}catch{}})()}catch{}},[R,n==null?void 0:n.uid]),S.useEffect(()=>{ge!=null&&ge.isNativePlatform&&ge.getPlatform()==="android"&&(async()=>{try{await Q(()=>import("./ProtectedUserDashboard-Kmx4-Rpe.js"),__vite__mapDeps([38,39,22,33,20,34]),import.meta.url),await Q(()=>import("./UserDashboardPage-CFiMofiX.js"),__vite__mapDeps([63,1,32,17,20,33,34,25,6,45,44,27,5,51,14,10,36,49,41,42,50,37,11,58,4,8,35,28,39,21,43,47,56,7]),import.meta.url),await Q(()=>Promise.resolve().then(()=>Bq),void 0,import.meta.url),await Q(()=>import("./ProfileSettingsPage-igIrK7Qb.js"),__vite__mapDeps([55,1,20,50,56,33,34,45,5,52,7]),import.meta.url),await Q(()=>import("./TransactionsPage-CwwBx2vV.js"),__vite__mapDeps([57,1,17,32,42,58,51,33,20,34,4,44,11,8,14,35,36,5,37]),import.meta.url)}catch{}})()},[]),S.useEffect(()=>{if(!t)return;const Y=document.createElement("style");Y.setAttribute("data-disable-pull-to-refresh","true"),Y.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(Y);let K=0,Z=null;const W=ie=>{var fe,ye;K=((ye=(fe=ie.touches)==null?void 0:fe[0])==null?void 0:ye.clientY)||0,Z=ie.target},X=ie=>{var pe,de;const fe=((de=(pe=ie.touches)==null?void 0:pe[0])==null?void 0:de.clientY)||0,ye=document.scrollingElement||document.documentElement,he=ye.scrollTop||window.scrollY||0,Ae=ye.scrollHeight-ye.clientHeight||0,xe=Z||null,Qe=(()=>{let ze=xe;for(;ze&&ze!==document.body;){const et=window.getComputedStyle(ze).overflowY;if((et==="auto"||et==="scroll")&&ze.scrollHeight>ze.clientHeight)return!0;ze=ze.parentElement}return!1})();!Qe&&he<=0&&fe>K&&ie.cancelable&&ie.preventDefault(),!Qe&&he>=Ae&&fe<K&&ie.cancelable&&ie.preventDefault()};return document.addEventListener("touchstart",W,{passive:!0}),document.addEventListener("touchmove",X,{passive:!1}),()=>{document.removeEventListener("touchstart",W),document.removeEventListener("touchmove",X);try{document.head.removeChild(Y)}catch{}}},[t]),S.useEffect(()=>{if(!((ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android"))return;try{const W=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=W,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const W=(window.location.assign||(X=>{})).bind(window.location);window.__originalAssign=W,window.location.assign=X=>{try{if(String(X||"").startsWith("/user/dashboard")){o("/user/dashboard");return}}catch{}try{W(X)}catch{}}}catch{}let K=null,Z=!1;return(async()=>{try{const{listenAndroidUpdates:W}=await Q(async()=>{const{listenAndroidUpdates:X}=await Promise.resolve().then(()=>Zq);return{listenAndroidUpdates:X}},void 0,import.meta.url);K=W(X=>{if(Z)return;const ie=String((X==null?void 0:X.version)||"").trim(),fe=String((X==null?void 0:X.url)||"").trim(),ye=String((X==null?void 0:X.notes)||"").trim(),he=!!(X!=null&&X.force),Ae=typeof(X==null?void 0:X.code)=="number"?X.code:void 0,xe=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),Qe=String(y||xe||"").trim(),pe=(ae,Ye)=>{const Ve=String(ae||"").replace(/^v/i,"").split(".").map(st=>parseInt(st,10)||0),Me=String(Ye||"").replace(/^v/i,"").split(".").map(st=>parseInt(st,10)||0);for(let st=0;st<Math.max(Ve.length,Me.length);st++){const Et=Ve[st]||0,vt=Me[st]||0;if(Et>vt)return 1;if(Et<vt)return-1}return 0},de=String(R||"").trim(),ze=String(localStorage.getItem("android_installed_version")||"").trim(),me=localStorage.getItem("android_installed_code"),et=me?Number(me):null,St=[L,A,et].filter(ae=>typeof ae=="number").reduce((ae,Ye)=>ae===void 0?Ye:Math.max(ae,Ye),void 0),Te=typeof Ae=="number"&&typeof St=="number"?Ae>St:void 0,We=(()=>{const ae=[de,Qe,ze].filter(Boolean);return ae.length===0?"":ae.reduce((Ye,Ve)=>pe(Ve,Ye)>0?Ve:Ye)})(),De=pe(ie,We)>0;if(!!fe&&(!!ie||typeof Ae=="number")&&(Te!==void 0?Te:De)){const ae="   ",Ye=`${ye?ye+`
`:""} : ${ie}`;h({title:ae,message:Ye,apkUrl:fe,force:he,versionId:ie,versionCode:Ae}),c(!0)}else try{c(!1)}catch{}})}catch{}})(),()=>{Z=!0;try{typeof K=="function"&&K()}catch{}}},[y,R]),S.useEffect(()=>{const Y=Z=>{const W=(Z==null?void 0:Z.detail)||{};try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}p(!0),g({percent:W.percent??null,downloaded:W.downloaded??0,total:W.total??0})},K=()=>{try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{D.current&&(clearInterval(D.current),D.current=null)}catch{}p(!1),E(!0),g({percent:100,downloaded:((w==null?void 0:w.total)??(w==null?void 0:w.downloaded)??0)||0,total:(w==null?void 0:w.total)??0});try{const Z=String((d==null?void 0:d.versionId)||"").trim();if(Z){try{localStorage.setItem("android_last_ack_version_id",Z)}catch{}try{localStorage.setItem("android_installed_version",Z)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:W,setDoc:X,serverTimestamp:ie}=await Q(async()=>{const{doc:ye,setDoc:he,serverTimestamp:Ae}=await Promise.resolve().then(()=>hn);return{doc:ye,setDoc:he,serverTimestamp:Ae}},void 0,import.meta.url),{db:fe}=await Q(async()=>{const{db:ye}=await Promise.resolve().then(()=>kt);return{db:ye}},void 0,import.meta.url);await X(W(fe,"profiles",n.uid),{lastAckAndroidVersion:Z,androidInstalledVersion:Z,lastAckAt:ie(),androidInstalledAt:ie()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",Y),window.addEventListener("androidUpdateDownloaded",K),()=>{window.removeEventListener("androidUpdateProgress",Y),window.removeEventListener("androidUpdateDownloaded",K)}},[]),S.useEffect(()=>((async()=>{var Y;try{const{auth:K}=await Q(async()=>{const{auth:Qe}=await Promise.resolve().then(()=>kt);return{auth:Qe}},void 0,import.meta.url),Z=((Y=K.currentUser)==null?void 0:Y.uid)||"";if(!Z)return;const{db:W}=await Q(async()=>{const{db:Qe}=await Promise.resolve().then(()=>kt);return{db:Qe}},void 0,import.meta.url),{collection:X,query:ie,where:fe,onSnapshot:ye}=await Q(async()=>{const{collection:Qe,query:pe,where:de,onSnapshot:ze}=await Promise.resolve().then(()=>hn);return{collection:Qe,query:pe,where:de,onSnapshot:ze}},void 0,import.meta.url),he=ie(X(W,"pendingSmsPopups"),fe("userId","==",Z),fe("status","==","pending")),Ae=Date.now(),xe=ye(he,Qe=>{var pe,de,ze,me,et,St,Te,We,De;try{const tt=typeof Qe.docChanges=="function"?Qe.docChanges():[];for(const gt of tt){if(gt.type==="added"){const ae=gt.doc.data()||{},Ye=gt.doc.id;if((de=(pe=$.current)==null?void 0:pe.has)!=null&&de.call(pe,Ye))continue;try{const it=ae.createdAt||ae.timestamp||(ae.payload||{}).createdAt||(ae.payload||{}).timestamp,bt=it&&typeof it.toMillis=="function"?it.toMillis():typeof ae.createdAtMs=="number"?ae.createdAtMs:typeof(ae.payload||{}).createdAtMs=="number"?(ae.payload||{}).createdAtMs:null;if(typeof bt=="number"&&bt<Ae)continue}catch{}let Ve=ae.amount??((ze=ae.payload)==null?void 0:ze.amount)??null,Me=ae.sender??((me=ae.payload)==null?void 0:me.sender)??"";const st=ae.senderName??((et=ae.payload)==null?void 0:et.senderName)??"";let Et=ae.reference??((St=ae.payload)==null?void 0:St.reference)??"";const vt=ae.text??((Te=ae.payload)==null?void 0:Te.text)??"";let Xe=ae.simNumber??((We=ae.payload)==null?void 0:We.simNumber)??"";const wn=ae.walletMsisdn??((De=ae.payload)==null?void 0:De.walletMsisdn)??"";let Je="VF-Cash";if(/Received\s*EGP/i.test(String(vt))){Je="InstaPay";const it=String(vt).match(/Received\s*EGP\s*([0-9.,]+)/i);it&&(Ve=parseFloat(String(it[1]).replace(/,/g,"")));const bt=String(vt).match(/from\s+([0-9+]+)/i);bt&&(Me=ut(bt[1]));const Le=String(vt).match(/Ref:\s*([A-Za-z0-9\-]+)/i);Le&&(Et=String(Le[1]).trim());try{if(!Xe){const Ee=localStorage.getItem("sim1Number");Ee&&(Xe=String(Ee).trim())}}catch{}}ee({amount:Number(Ve||0),sender:String(Me||""),senderName:st,reference:String(Et||""),text:vt,simNumber:Xe,walletMsisdn:wn,providerLabel:Je,popupId:Ye}),U(!0);try{_t()}catch{}}if(gt.type==="removed"){const ae=gt.doc.id,Ye=(V==null?void 0:V.popupId)||"";Ye&&Ye===ae&&(U(!1),ee(null))}}}catch{}});C.current=xe}catch{}})(),()=>{try{const Y=C.current;typeof Y=="function"&&Y()}catch{}}),[n==null?void 0:n.uid]),S.useEffect(()=>{const Y=(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android",K=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(Y||K)return;let Z=!1;return(async()=>{try{const W="0.0.0",X=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!X.ok)return;const ie=await X.json(),fe=String((ie==null?void 0:ie.version)||"0.0.0"),ye=!!(ie!=null&&ie.force);if(!Z&&((Ae,xe)=>{const Qe=String(Ae).split(".").map(de=>parseInt(de,10)||0),pe=String(xe).split(".").map(de=>parseInt(de,10)||0);for(let de=0;de<Math.max(Qe.length,pe.length);de++){const ze=Qe[de]||0,me=pe[de]||0;if(ze>me)return 1;if(ze<me)return-1}return 0})(fe,W)>0){if(ye){try{window.location.reload()}catch{}return}try{a({title:"  ",description:` ${fe}      `})}catch{}}}catch{}})(),()=>{Z=!0}},[]);const iu=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),As=(()=>{const Y=(Z,W)=>{const X=String(Z||"").replace(/^v/i,"").split(".").map(fe=>parseInt(fe,10)||0),ie=String(W||"").replace(/^v/i,"").split(".").map(fe=>parseInt(fe,10)||0);for(let fe=0;fe<Math.max(X.length,ie.length);fe++){const ye=X[fe]||0,he=ie[fe]||0;if(ye>he)return 1;if(ye<he)return-1}return 0},K=[R,y,iu].filter(Boolean);return K.length===0?"":K.reduce((Z,W)=>Y(W,Z)>0?W:Z)})();return T.jsxs(T.Fragment,{children:[T.jsx(iv,{open:qr,onOpenChange:()=>{},children:T.jsxs(rp,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:Y=>{try{Y.preventDefault()}catch{}},onEscapeKeyDown:Y=>{try{Y.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[T.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),T.jsx(sp,{className:"text-center",children:T.jsxs("div",{className:"flex items-center justify-center gap-3",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:T.jsx(LF,{className:"w-6 h-6"})}),T.jsx(ip,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),T.jsxs("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:[T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"1"}),T.jsx("div",{children:"  ( )                        ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"2"}),T.jsx("div",{children:"                         ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"3"}),T.jsx("div",{children:"       (   )        ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"4"}),T.jsx("div",{children:"                    ."})]}),T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"5"}),T.jsx("div",{children:"               ."})]})]}),T.jsx("div",{className:"mt-4",children:T.jsx(si,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Ue,children:"  "})})]})}),j.useEffect(()=>{try{const Y=(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android",K=(n==null?void 0:n.uid)||"";if(!Y||!K)return;const Z=`androidPermsRequested_${K}`;localStorage.getItem(Z)==="true"||(localStorage.setItem(Z,"true"),setTimeout(()=>{try{window.location.href="cashy://requestPerms"}catch{}},300))}catch{}},[n==null?void 0:n.uid]),(()=>{try{const Y=(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android",K=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),re&&(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android"&&T.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:T.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:T.jsx("span",{className:"text-2xl",children:"!"})}),T.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),T.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),T.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:T.jsx(si,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),l&&d&&T.jsx(iv,{open:l,onOpenChange:Y=>{d!=null&&d.force||c(Y)},children:T.jsxs(rp,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[T.jsxs(sp,{className:"text-center",children:[T.jsx(ip,{className:"text-base md:text-lg font-bold text-gray-900",children:d.title}),T.jsx(o_,{className:"text-sm text-gray-700 whitespace-pre-line",children:d.message}),T.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:As?`  : v${As}`:""})]}),T.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!d.force&&!f&&!v&&T.jsx(si,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>c(!1),children:""}),!v&&T.jsx(si,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const Y=String((d==null?void 0:d.versionId)||"").trim(),K=d==null?void 0:d.versionCode;if(Y)try{localStorage.setItem("android_last_ack_version_id",Y)}catch{}if(typeof K=="number")try{localStorage.setItem("android_last_ack_code",String(K))}catch{}if((async()=>{try{if(n!=null&&n.uid&&Y){const{doc:W,setDoc:X,serverTimestamp:ie}=await Q(async()=>{const{doc:he,setDoc:Ae,serverTimestamp:xe}=await Promise.resolve().then(()=>hn);return{doc:he,setDoc:Ae,serverTimestamp:xe}},void 0,import.meta.url),{db:fe}=await Q(async()=>{const{db:he}=await Promise.resolve().then(()=>kt);return{db:he}},void 0,import.meta.url),ye={lastAckAndroidVersion:Y,lastAckAt:ie()};typeof K=="number"&&(ye.lastAckAndroidCode=K),await X(W(fe,"profiles",n.uid),ye,{merge:!0})}}catch{}})(),(ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android"){const W=d.apkUrl,X=`cashy://update?url=${encodeURIComponent(W)}`;p(!0),g({percent:0,downloaded:0,total:0});try{D.current&&clearInterval(D.current),D.current=setInterval(()=>{g(ie=>{const fe=typeof(ie==null?void 0:ie.percent)=="number"?ie.percent:0,ye=O.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(fe+ye))),downloaded:(ie==null?void 0:ie.downloaded)??0,total:(ie==null?void 0:ie.total)??0}})},600)}catch{}window.location.href=X;try{P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{try{O.current=!1}catch{}try{P.current=null}catch{}},8e3)}catch{}}else{const W=d.apkUrl;try{window.open(W,"_blank")}catch{}}}catch{}},children:f?" ...":" "}),v&&T.jsx(si,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((ge==null?void 0:ge.isNativePlatform)&&ge.getPlatform()==="android"){c(!1);try{const K=String((d==null?void 0:d.versionId)||"").trim();if(K){try{localStorage.setItem("android_last_ack_version_id",K)}catch{}(async()=>{try{if(n!=null&&n.uid){const{doc:Z,setDoc:W,serverTimestamp:X}=await Q(async()=>{const{doc:he,setDoc:Ae,serverTimestamp:xe}=await Promise.resolve().then(()=>hn);return{doc:he,setDoc:Ae,serverTimestamp:xe}},void 0,import.meta.url),{db:ie}=await Q(async()=>{const{db:he}=await Promise.resolve().then(()=>kt);return{db:he}},void 0,import.meta.url),fe={lastAckAndroidVersion:K,androidInstalledVersion:K,lastAckAt:X(),androidInstalledAt:X()},ye=d==null?void 0:d.versionCode;if(typeof ye=="number"){fe.lastAckAndroidCode=ye,fe.androidInstalledCode=ye;try{localStorage.setItem("android_installed_code",String(ye)),localStorage.setItem("android_last_ack_code",String(ye))}catch{}}await W(Z(ie,"profiles",n.uid),fe,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),f&&T.jsxs("div",{className:"mt-3 text-center",children:[T.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:T.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((w==null?void 0:w.percent)||0)))}%`}})}),T.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((w==null?void 0:w.percent)||0),"%"]})]})]})}),i&&T.jsx(iv,{open:ue,onOpenChange:async Y=>{var K,Z;if(U(Y),!Y){try{const W=(V==null?void 0:V.popupId)||"";if(W){const{db:X}=await Q(async()=>{const{db:he}=await Promise.resolve().then(()=>kt);return{db:he}},void 0,import.meta.url),{doc:ie,updateDoc:fe,serverTimestamp:ye}=await Q(async()=>{const{doc:he,updateDoc:Ae,serverTimestamp:xe}=await Promise.resolve().then(()=>hn);return{doc:he,updateDoc:Ae,serverTimestamp:xe}},void 0,import.meta.url);try{await fe(ie(X,"pendingSmsPopups",W),{status:"dismissed",dismissedAt:ye()})}catch{}try{(Z=(K=$.current)==null?void 0:K.add)==null||Z.call(K,W);const he=Array.from($.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(he))}catch{}}}catch{}Ze(!1),G(""),Qt(""),Be(""),Ft(!1),Vn(0)}},children:T.jsxs(rp,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[T.jsxs(sp,{children:[T.jsx(ip,{children:V!=null&&V.providerLabel?T.jsxs(T.Fragment,{children:["   ",T.jsx("span",{className:"text-red-600",children:V.providerLabel})]}):"   "}),T.jsx(o_,{})]}),T.jsxs("div",{className:"text-sm",children:[T.jsx("div",{className:"border rounded-lg p-3",children:T.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"font-bold",children:[" ",(Pn=V==null?void 0:V.amount)==null?void 0:Pn.toLocaleString()]}),T.jsx("div",{className:"font-mono",children:(V==null?void 0:V.sender)||""}),(V==null?void 0:V.simNumber)&&T.jsx("div",{className:"font-mono",children:V==null?void 0:V.simNumber}),(V==null?void 0:V.senderName)&&T.jsx("div",{children:V==null?void 0:V.senderName}),(V==null?void 0:V.reference)&&T.jsx("div",{className:"font-mono",children:V==null?void 0:V.reference}),(V==null?void 0:V.walletMsisdn)&&T.jsx("div",{className:"font-mono",children:V==null?void 0:V.walletMsisdn})]}),T.jsxs("div",{className:"space-y-2 text-right",children:[T.jsx("div",{children:"  "}),T.jsx("div",{children:" "}),(V==null?void 0:V.simNumber)&&T.jsx("div",{children:" "}),(V==null?void 0:V.senderName)&&T.jsx("div",{children:"  "}),(V==null?void 0:V.reference)&&T.jsx("div",{children:"  "}),(V==null?void 0:V.walletMsisdn)&&T.jsx("div",{children:"  "})]})]})}),Ne&&T.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[T.jsx("span",{className:"flex-1",children:"  ()"}),T.jsx("input",{type:"number",step:"0.01",min:"0",value:oe,onChange:Y=>G(Y.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),qe&&T.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("div",{className:"text-sm",children:" "}),T.jsxs("div",{className:"font-bold",children:[" ",nn.toLocaleString()]})]}),T.jsx("div",{className:"mt-3",children:T.jsx("input",{type:"text",value:be,onChange:Y=>Qt(Y.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),T.jsx("div",{className:"mt-3",children:T.jsx(si,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{Ze(!0),Ft(!1)},children:""})})]}),Oe&&!qe&&T.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),T.jsx("div",{className:"pt-2",children:T.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var Y;try{const Z=String((V==null?void 0:V.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),W=Z?parseFloat(String(Z[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),{auth:X}=await Q(async()=>{const{auth:pe}=await Promise.resolve().then(()=>kt);return{auth:pe}},void 0,import.meta.url),ie=((Y=X.currentUser)==null?void 0:Y.uid)||"",fe=ie?`selectedWallet_${ie}`:"selectedWallet_default",ye=localStorage.getItem(fe)||"",he=oe&&oe.trim()!==""?Math.max(0,parseFloat(oe)):null;let Ae=0;if(he!=null)Ae=he;else try{const{merchantWalletService:pe}=await Q(async()=>{const{merchantWalletService:me}=await Promise.resolve().then(()=>Du);return{merchantWalletService:me}},void 0,import.meta.url),de=await pe.getById(String(ye)),ze=de&&de.defaultWithdrawCommission;if(ze!=null)Ae=Math.round((Number(ze)||0)*Number(W)/1e3*100)/100;else{const{calculateCommission:me}=await Q(async()=>{const{calculateCommission:et}=await Promise.resolve().then(()=>ba);return{calculateCommission:et}},void 0,import.meta.url);Ae=me(Number(W),"receive")}}catch{const{calculateCommission:pe}=await Q(async()=>{const{calculateCommission:de}=await Promise.resolve().then(()=>ba);return{calculateCommission:de}},void 0,import.meta.url);Ae=pe(Number(W),"receive")}const Qe=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(W)+Number(Ae):Number(W);Vn(Math.round(Qe*100)/100),Ft(!0)}catch{Ft(!0)}},children:""})})]}),T.jsx("div",{className:"pt-3",children:T.jsx(si,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const Y=String((V==null?void 0:V.text)||""),K=Y.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),Z=K?parseFloat(String(K[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),W=Y.match(/\s+\s+(\d+)/i),X=String((V==null?void 0:V.sender)||(W?W[1]:"")||""),ie=Y.match(/\s*\s*([\d\.]+)/i),fe=String((V==null?void 0:V.reference)||(ie?ie[1]:String(Date.now())));ir({...V,amount:Z,sender:X,reference:fe,deferredMode:Oe,debtorName:be,debtorNote:rt})}catch{ir()}},children:" "})})]})})]})},mx=()=>{const t=Zs(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?T.jsxs(T.Fragment,{children:[T.jsx(TU,{}),T.jsx(r4,{})]}):null},gx=()=>{const{user:t,loading:e}=il();return e?T.jsx(r_,{}):t?T.jsx(op,{}):T.jsx(vm,{})},LK=()=>T.jsx(A3,{client:R2,children:T.jsx(O6,{children:T.jsxs(Wj,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(ge!=null&&ge.isNativePlatform&&ge.getPlatform()==="android")&&T.jsx(eH,{}),T.jsx(OK,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&NK||ge!=null&&ge.isNativePlatform&&ge.getPlatform()==="android")?T.jsxs(P6,{children:[T.jsx(px,{}),T.jsx(mx,{}),T.jsx(S.Suspense,{fallback:T.jsx(r_,{}),children:T.jsxs(TS,{children:[T.jsx(Se,{path:"/",element:ge!=null&&ge.isNativePlatform&&ge.getPlatform()==="android"?T.jsx(gx,{}):T.jsx(If,{})}),T.jsx(Se,{path:"/dashboard-redirect",element:T.jsx(qA,{})}),T.jsx(Se,{path:"/landing",element:T.jsx(If,{})}),T.jsx(Se,{path:"/subscriptions",element:T.jsx(HA,{})}),T.jsx(Se,{path:"/auth",element:T.jsx(KA,{})}),T.jsx(Se,{path:"/user/login",element:T.jsx(vm,{})}),T.jsx(Se,{path:"/user/forgot-password",element:T.jsx(JA,{})}),T.jsx(Se,{path:"/user/register",element:T.jsx(bf,{})}),T.jsx(Se,{path:"/register",element:T.jsx(bf,{})}),T.jsx(Se,{path:"/user/account-setup",element:T.jsx(YA,{})}),T.jsx(Se,{path:"/user/pending-approval",element:T.jsx(tx,{})}),T.jsx(Se,{path:"/user/dashboard",element:T.jsx(op,{})}),T.jsx(Se,{path:"/branch/:shopId/dashboard",element:T.jsx(op,{})}),T.jsx(Se,{path:"/user/add-wallet",element:T.jsx(ax,{})}),T.jsx(Se,{path:"/admin/login",element:T.jsx(nx,{})}),T.jsx(Se,{path:"/admin/dashboard",element:T.jsx(rx,{})}),T.jsx(Se,{path:"/admin/topups",element:T.jsx(GA,{})}),T.jsx(Se,{path:"/admin/notifications",element:T.jsx(QA,{})}),T.jsx(Se,{path:"/profile-settings",element:T.jsx(ix,{})}),T.jsx(Se,{path:"/transactions",element:T.jsx(ox,{})}),T.jsx(Se,{path:"/referrals",element:T.jsx(lx,{})}),T.jsx(Se,{path:"/privacy-policy",element:T.jsx(hx,{})}),T.jsx(Se,{path:"/cpanel",element:T.jsx(cx,{})}),T.jsx(Se,{path:"/cpanel/login",element:T.jsx(ux,{})}),T.jsx(Se,{path:"/auth-test",element:T.jsx(sx,{})}),T.jsx(Se,{path:"/topup",element:T.jsx(Sf,{})}),T.jsx(Se,{path:"/recharge",element:T.jsx(Sf,{})}),T.jsx(Se,{path:"/merchant/*",element:T.jsx(ex,{})}),T.jsx(Se,{path:"/dashboard/login",element:T.jsx(XA,{})}),T.jsx(Se,{path:"/dashboard",element:T.jsx(ZA,{})}),T.jsx(Se,{path:"*",element:T.jsx(dx,{})})]})}),T.jsx(fx,{})]}):T.jsxs(R6,{children:[T.jsx(px,{}),T.jsx(mx,{}),T.jsx(S.Suspense,{fallback:T.jsx(r_,{}),children:T.jsxs(TS,{children:[T.jsx(Se,{path:"/",element:ge!=null&&ge.isNativePlatform&&ge.getPlatform()==="android"?T.jsx(gx,{}):T.jsx(If,{})}),T.jsx(Se,{path:"/dashboard-redirect",element:T.jsx(qA,{})}),T.jsx(Se,{path:"/landing",element:T.jsx(If,{})}),T.jsx(Se,{path:"/subscriptions",element:T.jsx(HA,{})}),T.jsx(Se,{path:"/auth",element:T.jsx(KA,{})}),T.jsx(Se,{path:"/user/login",element:T.jsx(vm,{})}),T.jsx(Se,{path:"/user/forgot-password",element:T.jsx(JA,{})}),T.jsx(Se,{path:"/user/register",element:T.jsx(bf,{})}),T.jsx(Se,{path:"/register",element:T.jsx(bf,{})}),T.jsx(Se,{path:"/user/account-setup",element:T.jsx(YA,{})}),T.jsx(Se,{path:"/user/pending-approval",element:T.jsx(tx,{})}),T.jsx(Se,{path:"/user/dashboard",element:T.jsx(op,{})}),T.jsx(Se,{path:"/user/add-wallet",element:T.jsx(ax,{})}),T.jsx(Se,{path:"/admin/login",element:T.jsx(nx,{})}),T.jsx(Se,{path:"/admin/dashboard",element:T.jsx(rx,{})}),T.jsx(Se,{path:"/admin/topups",element:T.jsx(GA,{})}),T.jsx(Se,{path:"/admin/notifications",element:T.jsx(QA,{})}),T.jsx(Se,{path:"/profile-settings",element:T.jsx(ix,{})}),T.jsx(Se,{path:"/transactions",element:T.jsx(ox,{})}),T.jsx(Se,{path:"/referrals",element:T.jsx(lx,{})}),T.jsx(Se,{path:"/privacy-policy",element:T.jsx(hx,{})}),T.jsx(Se,{path:"/cpanel",element:T.jsx(cx,{})}),T.jsx(Se,{path:"/cpanel/login",element:T.jsx(ux,{})}),T.jsx(Se,{path:"/auth-test",element:T.jsx(sx,{})}),T.jsx(Se,{path:"/topup",element:T.jsx(Sf,{})}),T.jsx(Se,{path:"/recharge",element:T.jsx(Sf,{})}),T.jsx(Se,{path:"/merchant/*",element:T.jsx(ex,{})}),T.jsx(Se,{path:"/dashboard/login",element:T.jsx(XA,{})}),T.jsx(Se,{path:"/dashboard",element:T.jsx(ZA,{})}),T.jsx(Se,{path:"*",element:T.jsx(dx,{})})]})}),T.jsx(fx,{})]})]})})}),VK=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},ov=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await Q(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>jl);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},MK=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await Q(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>jl);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(p=>!!(p!=null&&p.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},P2=S.createContext(void 0),FK=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!1),[i,o]=S.useState(null),{profile:a,user:l}=il();S.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),p=localStorage.getItem("cashier_shift_active"),w=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),p&&s(p==="true"),w&&o(Number(w))}catch{}},[]),S.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=Re(H,"cashierShift",a.shopId);let p=null;return(async()=>{try{(await Jt(f)).exists()||await ln(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),p=xi(f,g=>{if(g.exists()){const v=g.data(),E=(v==null?void 0:v.shiftUser)||null,y=!!(v!=null&&v.isShiftActive),_=(v==null?void 0:v.shiftStartAt)??null;let R=E;if(!R)try{const k=localStorage.getItem("cashier_shift_user"),L=k?JSON.parse(k):null;L&&(R=L)}catch{}n(R),s(y),o(typeof _=="number"?_:_?Number(_):null);try{R?localStorage.setItem("cashier_shift_user",JSON.stringify(R)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",y?"true":"false"),_!=null&&localStorage.setItem("cashier_shift_start_at",String(_))}catch{}}},g=>{console.warn("cashierShift snapshot error:",g)})}catch(w){console.warn("Failed to init cashierShift doc:",w)}})(),()=>{p&&p()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const p=Re(H,"cashierShift",a.shopId);vn(p,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const p=Re(H,"cashierShift",a.shopId);vn(p,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const w=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,g=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let E=localStorage.getItem(w);if(E==null){const _=localStorage.getItem(g);if(_!=null){E=_;try{localStorage.setItem(w,_),localStorage.removeItem(g)}catch{}}}if(E==null&&(l!=null&&l.uid)){const _=localStorage.getItem("cashBalance"),R=localStorage.getItem("userCashBalance");if(_!=null){try{localStorage.setItem(w,_),localStorage.removeItem("cashBalance")}catch{}E=_}else if(R!=null){try{localStorage.setItem(w,R),localStorage.removeItem("userCashBalance")}catch{}E=R}}const y=localStorage.getItem(v);E?localStorage.setItem("shiftStartDrawerFunds",E):localStorage.setItem("shiftStartDrawerFunds","0"),y?localStorage.setItem("shiftStartWalletBalances",y):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const p=Re(H,"dashboardData",a.shopId),w=await Jt(p);if(w.exists()){const g=w.data(),v=Number((g==null?void 0:g.cashBalance)??0),E=(g==null?void 0:g.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),_=localStorage.getItem("shiftStartWalletBalances"),R=y?parseFloat(y):0,k=_?JSON.parse(_):{},L=!y||!Number.isFinite(R)||R===0,x=!_||Object.keys(k||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),x&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(E||{}))}catch{}}}catch(p){console.warn("Shift start Firebase read failed:",p)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=Re(H,"cashierShift",a.shopId);vn(f,{isShiftActive:!1})}}catch{}};return T.jsx(P2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},wG=()=>{const t=S.useContext(P2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{GO()}catch{}const UK=()=>{const{theme:t="system"}=UP();return S.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};X1(document.getElementById("root")).render(T.jsx(bU,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:T.jsx(Vq,{children:T.jsx(FK,{children:T.jsxs(TH,{children:[T.jsx(LK,{}),T.jsx(UK,{})]})})})}));export{kK as $,TF as A,si as B,Yn as C,lG as D,RF as E,xl as F,vf as G,g5 as H,mw as I,ln as J,Nt as K,k6 as L,NF as M,JK as N,Jt as O,vn as P,t_ as Q,j as R,LF as S,AF as T,UF as U,Bn as V,AP as W,iv as X,rp as Y,sp as Z,ip as _,qc as a,BK as a$,Zs as a0,hs as a1,Nr as a2,jc as a3,NM as a4,_y as a5,en as a6,Lt as a7,$n as a8,i0 as a9,aG as aA,aq as aB,pq as aC,o_ as aD,Gc as aE,tG as aF,Mq as aG,XP as aH,ZK as aI,UP as aJ,qO as aK,OF as aL,uG as aM,dG as aN,hG as aO,bq as aP,fG as aQ,tH as aR,nl as aS,SM as aT,IH as aU,P7 as aV,Tq as aW,SF as aX,CF as aY,jF as aZ,eC as a_,Gs as aa,NO as ab,Kq as ac,MF as ad,Q as ae,Zf as af,wG as ag,_H as ah,ge as ai,UI as aj,IF as ak,rO as al,qE as am,r_ as an,BI as ao,TS as ap,Se as aq,ho as ar,$I as as,xF as at,cG as au,Em as av,Fe as aw,c0 as ax,C7 as ay,lq as az,XK as b,pG as b$,Sj as b0,s0 as b1,yK as b2,tP as b3,DH as b4,i2 as b5,Cd as b6,YO as b7,Um as b8,bj as b9,w3 as bA,t3 as bB,ur as bC,HK as bD,QK as bE,BE as bF,oH as bG,vy as bH,Tt as bI,vG as bJ,Eq as bK,gG as bL,xK as bM,PK as bN,yG as bO,S2 as bP,PM as bQ,b2 as bR,A2 as bS,CK as bT,I2 as bU,RK as bV,L6 as bW,YK as bX,kO as bY,ha as bZ,nH as b_,Aj as ba,Z1 as bb,bF as bc,Ei as bd,JM as be,ch as bf,nG as bg,zO as bh,WO as bi,FF as bj,Xq as bk,Jq as bl,On as bm,CA as bn,Yq as bo,Gm as bp,i3 as bq,Xj as br,qK as bs,cw as bt,cr as bu,Qm as bv,Yj as bw,Jj as bx,Vp as by,wC as bz,r0 as c,RO as c0,Iq as c1,EF as c2,hn as c3,kt as c4,Du as c5,Gy as c6,Zq as c7,mG as c8,s_ as c9,Hq as d,Wq as e,Ot as f,qq as g,Pe as h,H as i,T as j,Ke as k,xo as l,oG as m,fq as n,Hs as o,Ks as p,$e as q,S as r,je as s,jI as t,il as u,kF as v,PF as w,m5 as x,Re as y,xi as z};
//# sourceMappingURL=index-BN0752Qr.js.map
