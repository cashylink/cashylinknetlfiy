const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LandingPage-C0Ms1HDx.js","./card-BKugywzp.js","./BrandLogo-Dguq5DNx.js","./smartphone-CKbBaD43.js","./whatsappService-17_eEP9o.js","./arrow-left-BiKzbyhp.js","./star-BoN2JdS7.js","./crown-Cc39Thti.js","./download-Ci61ae1v.js","./zap-BqvhIu-V.js","./circle-check-big-CG4-y1Ee.js","./SubscriptionsPage-D5UjXYSG.js","./contentService-Ck9GzYUn.js","./AuthPage-CamUNh6Z.js","./TopUpPage-Bhfp-cL_.js","./select-CeLpbC6B.js","./AdminTopupsPage-BjXxQtRZ.js","./AdminNotificationsPage-CkQwTuHu.js","./label-DjlqWvAd.js","./textarea-DUb-6GhH.js","./link-DTXB6qeD.js","./UserRegisterPage-SxEfxiD0.js","./alert-B9VrbwXB.js","./wallet-BfG4s5SU.js","./user-plus-BK8AEUju.js","./phone-BkzL68is.js","./store-UH99jeMT.js","./UserAccountSetupPage-4HMF_svJ.js","./DashboardLoginPage-CrXgcu4P.js","./ProtectedDashboard-CxuS43d0.js","./MasterPinDialog-UQ2pGHW6.js","./circle-alert-vF4TGyX2.js","./profitService-Cb__Sc3E.js","./dollar-sign-B0EEit91.js","./ProtectedUserDashboard-BMtPDPDM.js","./broadcastService-BllZWhbb.js","./MerchantDashboard-BQ8z7jds.js","./dropdown-menu-saKzWHD4.js","./index-uFTDTQi6.js","./badge-CdOMTHTi.js","./WalletsManagement-BnpFA-zZ.js","./progress-CVY8zWFd.js","./square-pen-Bx-6V7vi.js","./PendingApprovalPage-B7t4NmQj.js","./refresh-cw-CLpl8HTk.js","./ProtectedAdminDashboard-P329-KLC.js","./ProfileIcon-CcOXCn9S.js","./switch-BVnvIPLJ.js","./separator-Dss2SMIL.js","./save-Dt0rXVBh.js","./users-Dscl73Z8.js","./circle-x-BJiixUDw.js","./AuthTestPage-C0akQJxb.js","./ProfileSettingsPage-CJNkg_vg.js","./walletSelectionPinService-DAesHY9o.js","./TransactionsPage-BwbUtB_c.js","./MaintenanceDialog-CFs8c69e.js","./WalletAdditionPage-D55PrPkN.js","./ReferralsPage-CzlnDHY6.js","./CPanelPage-BBsKHjJZ.js","./CPanelLoginPage-wXsr_quw.js","./UserDashboardPage-C7dLCNLX.js"])))=>i.map(i=>d[i]);
var Z2=Object.defineProperty;var PT=t=>{throw TypeError(t)};var eL=(t,e,n)=>e in t?Z2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var vl=(t,e,n)=>eL(t,typeof e!="symbol"?e+"":e,n),Wg=(t,e,n)=>e.has(t)||PT("Cannot "+n);var Q=(t,e,n)=>(Wg(t,e,"read from private field"),n?n.call(t):e.get(t)),it=(t,e,n)=>e.has(t)?PT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ze=(t,e,n,r)=>(Wg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gn=(t,e,n)=>(Wg(t,e,"access private method"),n);var Wh=(t,e,n,r)=>({set _(s){ze(t,e,s,n)},get _(){return Q(t,e,r)}});function tL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Kx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gx={exports:{}},Pp={},Qx={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=Symbol.for("react.element"),nL=Symbol.for("react.portal"),rL=Symbol.for("react.fragment"),sL=Symbol.for("react.strict_mode"),iL=Symbol.for("react.profiler"),oL=Symbol.for("react.provider"),aL=Symbol.for("react.context"),lL=Symbol.for("react.forward_ref"),cL=Symbol.for("react.suspense"),uL=Symbol.for("react.memo"),dL=Symbol.for("react.lazy"),CT=Symbol.iterator;function hL(t){return t===null||typeof t!="object"?null:(t=CT&&t[CT]||t["@@iterator"],typeof t=="function"?t:null)}var Yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jx=Object.assign,Xx={};function zc(t,e,n){this.props=t,this.context=e,this.refs=Xx,this.updater=n||Yx}zc.prototype.isReactComponent={};zc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zx(){}Zx.prototype=zc.prototype;function h_(t,e,n){this.props=t,this.context=e,this.refs=Xx,this.updater=n||Yx}var f_=h_.prototype=new Zx;f_.constructor=h_;Jx(f_,zc.prototype);f_.isPureReactComponent=!0;var DT=Array.isArray,eR=Object.prototype.hasOwnProperty,m_={current:null},tR={key:!0,ref:!0,__self:!0,__source:!0};function nR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)eR.call(e,r)&&!tR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:hh,type:t,key:i,ref:o,props:s,_owner:m_.current}}function fL(t,e){return{$$typeof:hh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function p_(t){return typeof t=="object"&&t!==null&&t.$$typeof===hh}function mL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kT=/\/+/g;function qg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mL(""+t.key):e.toString(36)}function kf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hh:case nL:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+qg(o,0):r,DT(s)?(n="",t!=null&&(n=t.replace(kT,"$&/")+"/"),kf(s,e,n,"",function(c){return c})):s!=null&&(p_(s)&&(s=fL(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(kT,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",DT(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+qg(i,a);o+=kf(i,e,n,l,s)}else if(l=hL(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+qg(i,a++),o+=kf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qh(t,e,n){if(t==null)return t;var r=[],s=0;return kf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pr={current:null},Nf={transition:null},gL={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:Nf,ReactCurrentOwner:m_};function rR(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:qh,forEach:function(t,e,n){qh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qh(t,function(){e++}),e},toArray:function(t){return qh(t,function(e){return e})||[]},only:function(t){if(!p_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=zc;et.Fragment=rL;et.Profiler=iL;et.PureComponent=h_;et.StrictMode=sL;et.Suspense=cL;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gL;et.act=rR;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=m_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eR.call(e,l)&&!tR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hh,type:t.type,key:s,ref:i,props:r,_owner:o}};et.createContext=function(t){return t={$$typeof:aL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oL,_context:t},t.Consumer=t};et.createElement=nR;et.createFactory=function(t){var e=nR.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:lL,render:t}};et.isValidElement=p_;et.lazy=function(t){return{$$typeof:dL,_payload:{_status:-1,_result:t},_init:pL}};et.memo=function(t,e){return{$$typeof:uL,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=Nf.transition;Nf.transition={};try{t()}finally{Nf.transition=e}};et.unstable_act=rR;et.useCallback=function(t,e){return pr.current.useCallback(t,e)};et.useContext=function(t){return pr.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return pr.current.useDeferredValue(t)};et.useEffect=function(t,e){return pr.current.useEffect(t,e)};et.useId=function(){return pr.current.useId()};et.useImperativeHandle=function(t,e,n){return pr.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return pr.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return pr.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return pr.current.useMemo(t,e)};et.useReducer=function(t,e,n){return pr.current.useReducer(t,e,n)};et.useRef=function(t){return pr.current.useRef(t)};et.useState=function(t){return pr.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return pr.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return pr.current.useTransition()};et.version="18.3.1";Qx.exports=et;var A=Qx.exports;const U=Kx(A),g_=tL({__proto__:null,default:U},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yL=A,vL=Symbol.for("react.element"),wL=Symbol.for("react.fragment"),_L=Object.prototype.hasOwnProperty,EL=yL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TL={key:!0,ref:!0,__self:!0,__source:!0};function sR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_L.call(e,r)&&!TL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vL,type:t,key:i,ref:o,props:s,_owner:EL.current}}Pp.Fragment=wL;Pp.jsx=sR;Pp.jsxs=sR;Gx.exports=Pp;var _=Gx.exports,iR={exports:{}},Jr={},oR={exports:{}},aR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,z){var K=W.length;W.push(z);e:for(;0<K;){var Ae=K-1>>>1,pe=W[Ae];if(0<s(pe,z))W[Ae]=z,W[K]=pe,K=Ae;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var z=W[0],K=W.pop();if(K!==z){W[0]=K;e:for(var Ae=0,pe=W.length,V=pe>>>1;Ae<V;){var we=2*(Ae+1)-1,Le=W[we],at=we+1,be=W[at];if(0>s(Le,K))at<pe&&0>s(be,Le)?(W[Ae]=be,W[at]=K,Ae=at):(W[Ae]=Le,W[we]=K,Ae=we);else if(at<pe&&0>s(be,K))W[Ae]=be,W[at]=K,Ae=at;else break e}}return z}function s(W,z){var K=W.sortIndex-z.sortIndex;return K!==0?K:W.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,T=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=W)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function x(W){if(p=!1,E(W),!T)if(n(l)!==null)T=!0,ye(C);else{var z=n(c);z!==null&&_e(x,z.startTime-W)}}function C(W,z){T=!1,p&&(p=!1,w(b),b=-1),m=!0;var K=f;try{for(E(z),h=n(l);h!==null&&(!(h.expirationTime>z)||W&&!P());){var Ae=h.callback;if(typeof Ae=="function"){h.callback=null,f=h.priorityLevel;var pe=Ae(h.expirationTime<=z);z=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===n(l)&&r(l),E(z)}else r(l);h=n(l)}if(h!==null)var V=!0;else{var we=n(c);we!==null&&_e(x,we.startTime-z),V=!1}return V}finally{h=null,f=K,m=!1}}var L=!1,S=null,b=-1,R=5,k=-1;function P(){return!(t.unstable_now()-k<R)}function O(){if(S!==null){var W=t.unstable_now();k=W;var z=!0;try{z=S(!0,W)}finally{z?D():(L=!1,S=null)}}else L=!1}var D;if(typeof y=="function")D=function(){y(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,oe=j.port2;j.port1.onmessage=O,D=function(){oe.postMessage(null)}}else D=function(){v(O,0)};function ye(W){S=W,L||(L=!0,D())}function _e(W,z){b=v(function(){W(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){T||m||(T=!0,ye(C))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var K=f;f=z;try{return W()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var K=f;f=W;try{return z()}finally{f=K}},t.unstable_scheduleCallback=function(W,z,K){var Ae=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Ae+K:Ae):K=Ae,W){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=K+pe,W={id:d++,callback:z,priorityLevel:W,startTime:K,expirationTime:pe,sortIndex:-1},K>Ae?(W.sortIndex=K,e(c,W),n(l)===null&&W===n(c)&&(p?(w(b),b=-1):p=!0,_e(x,K-Ae))):(W.sortIndex=pe,e(l,W),T||m||(T=!0,ye(C))),W},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(W){var z=f;return function(){var K=f;f=z;try{return W.apply(this,arguments)}finally{f=K}}}})(aR);oR.exports=aR;var IL=oR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SL=A,Qr=IL;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lR=new Set,Ed={};function cl(t,e){fc(t,e),fc(t+"Capture",e)}function fc(t,e){for(Ed[t]=e,t=0;t<e.length;t++)lR.add(e[t])}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uv=Object.prototype.hasOwnProperty,bL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NT={},OT={};function AL(t){return uv.call(OT,t)?!0:uv.call(NT,t)?!1:bL.test(t)?OT[t]=!0:(NT[t]=!0,!1)}function xL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RL(t,e,n,r){if(e===null||typeof e>"u"||xL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zn[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zn[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zn[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zn[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zn[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zn[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zn[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zn[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zn[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var y_=/[\-:]([a-z])/g;function v_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(y_,v_);zn[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(y_,v_);zn[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(y_,v_);zn[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zn[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});zn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zn[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function w_(t,e,n,r){var s=zn.hasOwnProperty(e)?zn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RL(e,n,s,r)&&(n=null),r||s===null?AL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Li=SL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hh=Symbol.for("react.element"),Ll=Symbol.for("react.portal"),Vl=Symbol.for("react.fragment"),__=Symbol.for("react.strict_mode"),dv=Symbol.for("react.profiler"),cR=Symbol.for("react.provider"),uR=Symbol.for("react.context"),E_=Symbol.for("react.forward_ref"),hv=Symbol.for("react.suspense"),fv=Symbol.for("react.suspense_list"),T_=Symbol.for("react.memo"),to=Symbol.for("react.lazy"),dR=Symbol.for("react.offscreen"),LT=Symbol.iterator;function Eu(t){return t===null||typeof t!="object"?null:(t=LT&&t[LT]||t["@@iterator"],typeof t=="function"?t:null)}var Zt=Object.assign,Hg;function Fu(t){if(Hg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hg=e&&e[1]||""}return`
`+Hg+t}var Kg=!1;function Gg(t,e){if(!t||Kg)return"";Kg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Kg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fu(t):""}function PL(t){switch(t.tag){case 5:return Fu(t.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 2:case 15:return t=Gg(t.type,!1),t;case 11:return t=Gg(t.type.render,!1),t;case 1:return t=Gg(t.type,!0),t;default:return""}}function mv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vl:return"Fragment";case Ll:return"Portal";case dv:return"Profiler";case __:return"StrictMode";case hv:return"Suspense";case fv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uR:return(t.displayName||"Context")+".Consumer";case cR:return(t._context.displayName||"Context")+".Provider";case E_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T_:return e=t.displayName||null,e!==null?e:mv(t.type)||"Memo";case to:e=t._payload,t=t._init;try{return mv(t(e))}catch{}}return null}function CL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mv(e);case 8:return e===__?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DL(t){var e=hR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kh(t){t._valueTracker||(t._valueTracker=DL(t))}function fR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pv(t,e){var n=e.checked;return Zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mR(t,e){e=e.checked,e!=null&&w_(t,"checked",e,!1)}function gv(t,e){mR(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yv(t,e.type,n):e.hasOwnProperty("defaultValue")&&yv(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function MT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yv(t,e,n){(e!=="number"||fm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uu=Array.isArray;function Kl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function FT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Uu(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function pR(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function UT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gh,yR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gh=Gh||document.createElement("div"),Gh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Td(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ju={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kL=["Webkit","ms","Moz","O"];Object.keys(Ju).forEach(function(t){kL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ju[e]=Ju[t]})});function vR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ju.hasOwnProperty(t)&&Ju[t]?(""+e).trim():e+"px"}function wR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var NL=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _v(t,e){if(e){if(NL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function Ev(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tv=null;function I_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iv=null,Gl=null,Ql=null;function jT(t){if(t=ph(t)){if(typeof Iv!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=Op(e),Iv(t.stateNode,t.type,e))}}function _R(t){Gl?Ql?Ql.push(t):Ql=[t]:Gl=t}function ER(){if(Gl){var t=Gl,e=Ql;if(Ql=Gl=null,jT(t),e)for(t=0;t<e.length;t++)jT(e[t])}}function TR(t,e){return t(e)}function IR(){}var Qg=!1;function SR(t,e,n){if(Qg)return t(e,n);Qg=!0;try{return TR(t,e,n)}finally{Qg=!1,(Gl!==null||Ql!==null)&&(IR(),ER())}}function Id(t,e){var n=t.stateNode;if(n===null)return null;var r=Op(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var Sv=!1;if(Si)try{var Tu={};Object.defineProperty(Tu,"passive",{get:function(){Sv=!0}}),window.addEventListener("test",Tu,Tu),window.removeEventListener("test",Tu,Tu)}catch{Sv=!1}function OL(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Xu=!1,mm=null,pm=!1,bv=null,LL={onError:function(t){Xu=!0,mm=t}};function VL(t,e,n,r,s,i,o,a,l){Xu=!1,mm=null,OL.apply(LL,arguments)}function ML(t,e,n,r,s,i,o,a,l){if(VL.apply(this,arguments),Xu){if(Xu){var c=mm;Xu=!1,mm=null}else throw Error(ie(198));pm||(pm=!0,bv=c)}}function ul(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $T(t){if(ul(t)!==t)throw Error(ie(188))}function FL(t){var e=t.alternate;if(!e){if(e=ul(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $T(s),t;if(i===r)return $T(s),e;i=i.sibling}throw Error(ie(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function AR(t){return t=FL(t),t!==null?xR(t):null}function xR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xR(t);if(e!==null)return e;t=t.sibling}return null}var RR=Qr.unstable_scheduleCallback,BT=Qr.unstable_cancelCallback,UL=Qr.unstable_shouldYield,jL=Qr.unstable_requestPaint,fn=Qr.unstable_now,$L=Qr.unstable_getCurrentPriorityLevel,S_=Qr.unstable_ImmediatePriority,PR=Qr.unstable_UserBlockingPriority,gm=Qr.unstable_NormalPriority,BL=Qr.unstable_LowPriority,CR=Qr.unstable_IdlePriority,Cp=null,Gs=null;function zL(t){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Cp,t,void 0,(t.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:HL,WL=Math.log,qL=Math.LN2;function HL(t){return t>>>=0,t===0?32:31-(WL(t)/qL|0)|0}var Qh=64,Yh=4194304;function ju(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ym(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ju(a):(i&=o,i!==0&&(r=ju(i)))}else o=n&~s,o!==0?r=ju(o):i!==0&&(r=ju(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Es(e),s=1<<n,r|=t[n],e&=~s;return r}function KL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Es(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=KL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Av(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DR(){var t=Qh;return Qh<<=1,!(Qh&4194240)&&(Qh=64),t}function Yg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Es(e),t[e]=n}function QL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Es(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function b_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Es(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Et=0;function kR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NR,A_,OR,LR,VR,xv=!1,Jh=[],wo=null,_o=null,Eo=null,Sd=new Map,bd=new Map,ro=[],YL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zT(t,e){switch(t){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Sd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bd.delete(e.pointerId)}}function Iu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ph(e),e!==null&&A_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function JL(t,e,n,r,s){switch(e){case"focusin":return wo=Iu(wo,t,e,n,r,s),!0;case"dragenter":return _o=Iu(_o,t,e,n,r,s),!0;case"mouseover":return Eo=Iu(Eo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sd.set(i,Iu(Sd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bd.set(i,Iu(bd.get(i)||null,t,e,n,r,s)),!0}return!1}function MR(t){var e=Ta(t.target);if(e!==null){var n=ul(e);if(n!==null){if(e=n.tag,e===13){if(e=bR(n),e!==null){t.blockedOn=e,VR(t.priority,function(){OR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Of(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tv=r,n.target.dispatchEvent(r),Tv=null}else return e=ph(n),e!==null&&A_(e),t.blockedOn=n,!1;e.shift()}return!0}function WT(t,e,n){Of(t)&&n.delete(e)}function XL(){xv=!1,wo!==null&&Of(wo)&&(wo=null),_o!==null&&Of(_o)&&(_o=null),Eo!==null&&Of(Eo)&&(Eo=null),Sd.forEach(WT),bd.forEach(WT)}function Su(t,e){t.blockedOn===e&&(t.blockedOn=null,xv||(xv=!0,Qr.unstable_scheduleCallback(Qr.unstable_NormalPriority,XL)))}function Ad(t){function e(s){return Su(s,t)}if(0<Jh.length){Su(Jh[0],t);for(var n=1;n<Jh.length;n++){var r=Jh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wo!==null&&Su(wo,t),_o!==null&&Su(_o,t),Eo!==null&&Su(Eo,t),Sd.forEach(e),bd.forEach(e),n=0;n<ro.length;n++)r=ro[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ro.length&&(n=ro[0],n.blockedOn===null);)MR(n),n.blockedOn===null&&ro.shift()}var Yl=Li.ReactCurrentBatchConfig,vm=!0;function ZL(t,e,n,r){var s=Et,i=Yl.transition;Yl.transition=null;try{Et=1,x_(t,e,n,r)}finally{Et=s,Yl.transition=i}}function eV(t,e,n,r){var s=Et,i=Yl.transition;Yl.transition=null;try{Et=4,x_(t,e,n,r)}finally{Et=s,Yl.transition=i}}function x_(t,e,n,r){if(vm){var s=Rv(t,e,n,r);if(s===null)oy(t,e,r,wm,n),zT(t,r);else if(JL(s,t,e,n,r))r.stopPropagation();else if(zT(t,r),e&4&&-1<YL.indexOf(t)){for(;s!==null;){var i=ph(s);if(i!==null&&NR(i),i=Rv(t,e,n,r),i===null&&oy(t,e,r,wm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else oy(t,e,r,null,n)}}var wm=null;function Rv(t,e,n,r){if(wm=null,t=I_(r),t=Ta(t),t!==null)if(e=ul(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wm=t,null}function FR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($L()){case S_:return 1;case PR:return 4;case gm:case BL:return 16;case CR:return 536870912;default:return 16}default:return 16}}var fo=null,R_=null,Lf=null;function UR(){if(Lf)return Lf;var t,e=R_,n=e.length,r,s="value"in fo?fo.value:fo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Lf=s.slice(t,1<r?1-r:void 0)}function Vf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xh(){return!0}function qT(){return!1}function Xr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xh:qT,this.isPropagationStopped=qT,this}return Zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xh)},persist:function(){},isPersistent:Xh}),e}var Wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P_=Xr(Wc),mh=Zt({},Wc,{view:0,detail:0}),tV=Xr(mh),Jg,Xg,bu,Dp=Zt({},mh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bu&&(bu&&t.type==="mousemove"?(Jg=t.screenX-bu.screenX,Xg=t.screenY-bu.screenY):Xg=Jg=0,bu=t),Jg)},movementY:function(t){return"movementY"in t?t.movementY:Xg}}),HT=Xr(Dp),nV=Zt({},Dp,{dataTransfer:0}),rV=Xr(nV),sV=Zt({},mh,{relatedTarget:0}),Zg=Xr(sV),iV=Zt({},Wc,{animationName:0,elapsedTime:0,pseudoElement:0}),oV=Xr(iV),aV=Zt({},Wc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lV=Xr(aV),cV=Zt({},Wc,{data:0}),KT=Xr(cV),uV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hV[t])?!!e[t]:!1}function C_(){return fV}var mV=Zt({},mh,{key:function(t){if(t.key){var e=uV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C_,charCode:function(t){return t.type==="keypress"?Vf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pV=Xr(mV),gV=Zt({},Dp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GT=Xr(gV),yV=Zt({},mh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C_}),vV=Xr(yV),wV=Zt({},Wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),_V=Xr(wV),EV=Zt({},Dp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TV=Xr(EV),IV=[9,13,27,32],D_=Si&&"CompositionEvent"in window,Zu=null;Si&&"documentMode"in document&&(Zu=document.documentMode);var SV=Si&&"TextEvent"in window&&!Zu,jR=Si&&(!D_||Zu&&8<Zu&&11>=Zu),QT=" ",YT=!1;function $R(t,e){switch(t){case"keyup":return IV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ml=!1;function bV(t,e){switch(t){case"compositionend":return BR(e);case"keypress":return e.which!==32?null:(YT=!0,QT);case"textInput":return t=e.data,t===QT&&YT?null:t;default:return null}}function AV(t,e){if(Ml)return t==="compositionend"||!D_&&$R(t,e)?(t=UR(),Lf=R_=fo=null,Ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jR&&e.locale!=="ko"?null:e.data;default:return null}}var xV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xV[t.type]:e==="textarea"}function zR(t,e,n,r){_R(r),e=_m(e,"onChange"),0<e.length&&(n=new P_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ed=null,xd=null;function RV(t){e1(t,0)}function kp(t){var e=jl(t);if(fR(e))return t}function PV(t,e){if(t==="change")return e}var WR=!1;if(Si){var ey;if(Si){var ty="oninput"in document;if(!ty){var XT=document.createElement("div");XT.setAttribute("oninput","return;"),ty=typeof XT.oninput=="function"}ey=ty}else ey=!1;WR=ey&&(!document.documentMode||9<document.documentMode)}function ZT(){ed&&(ed.detachEvent("onpropertychange",qR),xd=ed=null)}function qR(t){if(t.propertyName==="value"&&kp(xd)){var e=[];zR(e,xd,t,I_(t)),SR(RV,e)}}function CV(t,e,n){t==="focusin"?(ZT(),ed=e,xd=n,ed.attachEvent("onpropertychange",qR)):t==="focusout"&&ZT()}function DV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kp(xd)}function kV(t,e){if(t==="click")return kp(e)}function NV(t,e){if(t==="input"||t==="change")return kp(e)}function OV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:OV;function Rd(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uv.call(e,s)||!bs(t[s],e[s]))return!1}return!0}function eI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tI(t,e){var n=eI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eI(n)}}function HR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function KR(){for(var t=window,e=fm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fm(t.document)}return e}function k_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LV(t){var e=KR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&HR(n.ownerDocument.documentElement,n)){if(r!==null&&k_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=tI(n,i);var o=tI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VV=Si&&"documentMode"in document&&11>=document.documentMode,Fl=null,Pv=null,td=null,Cv=!1;function nI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cv||Fl==null||Fl!==fm(r)||(r=Fl,"selectionStart"in r&&k_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),td&&Rd(td,r)||(td=r,r=_m(Pv,"onSelect"),0<r.length&&(e=new P_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fl)))}function Zh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ul={animationend:Zh("Animation","AnimationEnd"),animationiteration:Zh("Animation","AnimationIteration"),animationstart:Zh("Animation","AnimationStart"),transitionend:Zh("Transition","TransitionEnd")},ny={},GR={};Si&&(GR=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function Np(t){if(ny[t])return ny[t];if(!Ul[t])return t;var e=Ul[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in GR)return ny[t]=e[n];return t}var QR=Np("animationend"),YR=Np("animationiteration"),JR=Np("animationstart"),XR=Np("transitionend"),ZR=new Map,rI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(t,e){ZR.set(t,e),cl(e,[t])}for(var ry=0;ry<rI.length;ry++){var sy=rI[ry],MV=sy.toLowerCase(),FV=sy[0].toUpperCase()+sy.slice(1);Ko(MV,"on"+FV)}Ko(QR,"onAnimationEnd");Ko(YR,"onAnimationIteration");Ko(JR,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(XR,"onTransitionEnd");fc("onMouseEnter",["mouseout","mouseover"]);fc("onMouseLeave",["mouseout","mouseover"]);fc("onPointerEnter",["pointerout","pointerover"]);fc("onPointerLeave",["pointerout","pointerover"]);cl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cl("onBeforeInput",["compositionend","keypress","textInput","paste"]);cl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UV=new Set("cancel close invalid load scroll toggle".split(" ").concat($u));function sI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ML(r,e,void 0,t),t.currentTarget=null}function e1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;sI(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;sI(s,a,c),i=l}}}if(pm)throw t=bv,pm=!1,bv=null,t}function Vt(t,e){var n=e[Lv];n===void 0&&(n=e[Lv]=new Set);var r=t+"__bubble";n.has(r)||(t1(e,t,2,!1),n.add(r))}function iy(t,e,n){var r=0;e&&(r|=4),t1(n,t,r,e)}var ef="_reactListening"+Math.random().toString(36).slice(2);function Pd(t){if(!t[ef]){t[ef]=!0,lR.forEach(function(n){n!=="selectionchange"&&(UV.has(n)||iy(n,!1,t),iy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ef]||(e[ef]=!0,iy("selectionchange",!1,e))}}function t1(t,e,n,r){switch(FR(e)){case 1:var s=ZL;break;case 4:s=eV;break;default:s=x_}n=s.bind(null,e,n,t),s=void 0,!Sv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function oy(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ta(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}SR(function(){var c=i,d=I_(n),h=[];e:{var f=ZR.get(t);if(f!==void 0){var m=P_,T=t;switch(t){case"keypress":if(Vf(n)===0)break e;case"keydown":case"keyup":m=pV;break;case"focusin":T="focus",m=Zg;break;case"focusout":T="blur",m=Zg;break;case"beforeblur":case"afterblur":m=Zg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=HT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=rV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=vV;break;case QR:case YR:case JR:m=oV;break;case XR:m=_V;break;case"scroll":m=tV;break;case"wheel":m=TV;break;case"copy":case"cut":case"paste":m=lV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=GT}var p=(e&4)!==0,v=!p&&t==="scroll",w=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,E;y!==null;){E=y;var x=E.stateNode;if(E.tag===5&&x!==null&&(E=x,w!==null&&(x=Id(y,w),x!=null&&p.push(Cd(y,x,E)))),v)break;y=y.return}0<p.length&&(f=new m(f,T,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Tv&&(T=n.relatedTarget||n.fromElement)&&(Ta(T)||T[bi]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(T=n.relatedTarget||n.toElement,m=c,T=T?Ta(T):null,T!==null&&(v=ul(T),T!==v||T.tag!==5&&T.tag!==6)&&(T=null)):(m=null,T=c),m!==T)){if(p=HT,x="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=GT,x="onPointerLeave",w="onPointerEnter",y="pointer"),v=m==null?f:jl(m),E=T==null?f:jl(T),f=new p(x,y+"leave",m,n,d),f.target=v,f.relatedTarget=E,x=null,Ta(d)===c&&(p=new p(w,y+"enter",T,n,d),p.target=E,p.relatedTarget=v,x=p),v=x,m&&T)t:{for(p=m,w=T,y=0,E=p;E;E=wl(E))y++;for(E=0,x=w;x;x=wl(x))E++;for(;0<y-E;)p=wl(p),y--;for(;0<E-y;)w=wl(w),E--;for(;y--;){if(p===w||w!==null&&p===w.alternate)break t;p=wl(p),w=wl(w)}p=null}else p=null;m!==null&&iI(h,f,m,p,!1),T!==null&&v!==null&&iI(h,v,T,p,!0)}}e:{if(f=c?jl(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var C=PV;else if(JT(f))if(WR)C=NV;else{C=DV;var L=CV}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=kV);if(C&&(C=C(t,c))){zR(h,C,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&yv(f,"number",f.value)}switch(L=c?jl(c):window,t){case"focusin":(JT(L)||L.contentEditable==="true")&&(Fl=L,Pv=c,td=null);break;case"focusout":td=Pv=Fl=null;break;case"mousedown":Cv=!0;break;case"contextmenu":case"mouseup":case"dragend":Cv=!1,nI(h,n,d);break;case"selectionchange":if(VV)break;case"keydown":case"keyup":nI(h,n,d)}var S;if(D_)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ml?$R(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(jR&&n.locale!=="ko"&&(Ml||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ml&&(S=UR()):(fo=d,R_="value"in fo?fo.value:fo.textContent,Ml=!0)),L=_m(c,b),0<L.length&&(b=new KT(b,t,null,n,d),h.push({event:b,listeners:L}),S?b.data=S:(S=BR(n),S!==null&&(b.data=S)))),(S=SV?bV(t,n):AV(t,n))&&(c=_m(c,"onBeforeInput"),0<c.length&&(d=new KT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}e1(h,e)})}function Cd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _m(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Id(t,n),i!=null&&r.unshift(Cd(t,i,s)),i=Id(t,e),i!=null&&r.push(Cd(t,i,s))),t=t.return}return r}function wl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iI(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Id(n,i),l!=null&&o.unshift(Cd(n,l,a))):s||(l=Id(n,i),l!=null&&o.push(Cd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jV=/\r\n?/g,$V=/\u0000|\uFFFD/g;function oI(t){return(typeof t=="string"?t:""+t).replace(jV,`
`).replace($V,"")}function tf(t,e,n){if(e=oI(e),oI(t)!==e&&n)throw Error(ie(425))}function Em(){}var Dv=null,kv=null;function Nv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ov=typeof setTimeout=="function"?setTimeout:void 0,BV=typeof clearTimeout=="function"?clearTimeout:void 0,aI=typeof Promise=="function"?Promise:void 0,zV=typeof queueMicrotask=="function"?queueMicrotask:typeof aI<"u"?function(t){return aI.resolve(null).then(t).catch(WV)}:Ov;function WV(t){setTimeout(function(){throw t})}function ay(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ad(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ad(e)}function To(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qc=Math.random().toString(36).slice(2),Bs="__reactFiber$"+qc,Dd="__reactProps$"+qc,bi="__reactContainer$"+qc,Lv="__reactEvents$"+qc,qV="__reactListeners$"+qc,HV="__reactHandles$"+qc;function Ta(t){var e=t[Bs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bi]||n[Bs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lI(t);t!==null;){if(n=t[Bs])return n;t=lI(t)}return e}t=n,n=t.parentNode}return null}function ph(t){return t=t[Bs]||t[bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function Op(t){return t[Dd]||null}var Vv=[],$l=-1;function Go(t){return{current:t}}function Ft(t){0>$l||(t.current=Vv[$l],Vv[$l]=null,$l--)}function Dt(t,e){$l++,Vv[$l]=t.current,t.current=e}var Vo={},sr=Go(Vo),Rr=Go(!1),Ka=Vo;function mc(t,e){var n=t.type.contextTypes;if(!n)return Vo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pr(t){return t=t.childContextTypes,t!=null}function Tm(){Ft(Rr),Ft(sr)}function cI(t,e,n){if(sr.current!==Vo)throw Error(ie(168));Dt(sr,e),Dt(Rr,n)}function n1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ie(108,CL(t)||"Unknown",s));return Zt({},n,r)}function Im(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vo,Ka=sr.current,Dt(sr,t),Dt(Rr,Rr.current),!0}function uI(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=n1(t,e,Ka),r.__reactInternalMemoizedMergedChildContext=t,Ft(Rr),Ft(sr),Dt(sr,t)):Ft(Rr),Dt(Rr,n)}var hi=null,Lp=!1,ly=!1;function r1(t){hi===null?hi=[t]:hi.push(t)}function KV(t){Lp=!0,r1(t)}function Qo(){if(!ly&&hi!==null){ly=!0;var t=0,e=Et;try{var n=hi;for(Et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hi=null,Lp=!1}catch(s){throw hi!==null&&(hi=hi.slice(t+1)),RR(S_,Qo),s}finally{Et=e,ly=!1}}return null}var Bl=[],zl=0,Sm=null,bm=0,ns=[],rs=0,Ga=null,pi=1,gi="";function la(t,e){Bl[zl++]=bm,Bl[zl++]=Sm,Sm=t,bm=e}function s1(t,e,n){ns[rs++]=pi,ns[rs++]=gi,ns[rs++]=Ga,Ga=t;var r=pi;t=gi;var s=32-Es(r)-1;r&=~(1<<s),n+=1;var i=32-Es(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,pi=1<<32-Es(e)+s|n<<s|r,gi=i+t}else pi=1<<i|n<<s|r,gi=t}function N_(t){t.return!==null&&(la(t,1),s1(t,1,0))}function O_(t){for(;t===Sm;)Sm=Bl[--zl],Bl[zl]=null,bm=Bl[--zl],Bl[zl]=null;for(;t===Ga;)Ga=ns[--rs],ns[rs]=null,gi=ns[--rs],ns[rs]=null,pi=ns[--rs],ns[rs]=null}var qr=null,Br=null,Bt=!1,vs=null;function i1(t,e){var n=ss(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qr=t,Br=To(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qr=t,Br=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ga!==null?{id:pi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ss(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qr=t,Br=null,!0):!1;default:return!1}}function Mv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fv(t){if(Bt){var e=Br;if(e){var n=e;if(!dI(t,e)){if(Mv(t))throw Error(ie(418));e=To(n.nextSibling);var r=qr;e&&dI(t,e)?i1(r,n):(t.flags=t.flags&-4097|2,Bt=!1,qr=t)}}else{if(Mv(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Bt=!1,qr=t}}}function hI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qr=t}function nf(t){if(t!==qr)return!1;if(!Bt)return hI(t),Bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nv(t.type,t.memoizedProps)),e&&(e=Br)){if(Mv(t))throw o1(),Error(ie(418));for(;e;)i1(t,e),e=To(e.nextSibling)}if(hI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Br=To(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Br=null}}else Br=qr?To(t.stateNode.nextSibling):null;return!0}function o1(){for(var t=Br;t;)t=To(t.nextSibling)}function pc(){Br=qr=null,Bt=!1}function L_(t){vs===null?vs=[t]:vs.push(t)}var GV=Li.ReactCurrentBatchConfig;function Au(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function rf(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fI(t){var e=t._init;return e(t._payload)}function a1(t){function e(w,y){if(t){var E=w.deletions;E===null?(w.deletions=[y],w.flags|=16):E.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=Ao(w,y),w.index=0,w.sibling=null,w}function i(w,y,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<y?(w.flags|=2,y):E):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,y,E,x){return y===null||y.tag!==6?(y=py(E,w.mode,x),y.return=w,y):(y=s(y,E),y.return=w,y)}function l(w,y,E,x){var C=E.type;return C===Vl?d(w,y,E.props.children,x,E.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===to&&fI(C)===y.type)?(x=s(y,E.props),x.ref=Au(w,y,E),x.return=w,x):(x=zf(E.type,E.key,E.props,null,w.mode,x),x.ref=Au(w,y,E),x.return=w,x)}function c(w,y,E,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=gy(E,w.mode,x),y.return=w,y):(y=s(y,E.children||[]),y.return=w,y)}function d(w,y,E,x,C){return y===null||y.tag!==7?(y=Ba(E,w.mode,x,C),y.return=w,y):(y=s(y,E),y.return=w,y)}function h(w,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=py(""+y,w.mode,E),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hh:return E=zf(y.type,y.key,y.props,null,w.mode,E),E.ref=Au(w,null,y),E.return=w,E;case Ll:return y=gy(y,w.mode,E),y.return=w,y;case to:var x=y._init;return h(w,x(y._payload),E)}if(Uu(y)||Eu(y))return y=Ba(y,w.mode,E,null),y.return=w,y;rf(w,y)}return null}function f(w,y,E,x){var C=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:a(w,y,""+E,x);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hh:return E.key===C?l(w,y,E,x):null;case Ll:return E.key===C?c(w,y,E,x):null;case to:return C=E._init,f(w,y,C(E._payload),x)}if(Uu(E)||Eu(E))return C!==null?null:d(w,y,E,x,null);rf(w,E)}return null}function m(w,y,E,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(E)||null,a(y,w,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hh:return w=w.get(x.key===null?E:x.key)||null,l(y,w,x,C);case Ll:return w=w.get(x.key===null?E:x.key)||null,c(y,w,x,C);case to:var L=x._init;return m(w,y,E,L(x._payload),C)}if(Uu(x)||Eu(x))return w=w.get(E)||null,d(y,w,x,C,null);rf(y,x)}return null}function T(w,y,E,x){for(var C=null,L=null,S=y,b=y=0,R=null;S!==null&&b<E.length;b++){S.index>b?(R=S,S=null):R=S.sibling;var k=f(w,S,E[b],x);if(k===null){S===null&&(S=R);break}t&&S&&k.alternate===null&&e(w,S),y=i(k,y,b),L===null?C=k:L.sibling=k,L=k,S=R}if(b===E.length)return n(w,S),Bt&&la(w,b),C;if(S===null){for(;b<E.length;b++)S=h(w,E[b],x),S!==null&&(y=i(S,y,b),L===null?C=S:L.sibling=S,L=S);return Bt&&la(w,b),C}for(S=r(w,S);b<E.length;b++)R=m(S,w,b,E[b],x),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?b:R.key),y=i(R,y,b),L===null?C=R:L.sibling=R,L=R);return t&&S.forEach(function(P){return e(w,P)}),Bt&&la(w,b),C}function p(w,y,E,x){var C=Eu(E);if(typeof C!="function")throw Error(ie(150));if(E=C.call(E),E==null)throw Error(ie(151));for(var L=C=null,S=y,b=y=0,R=null,k=E.next();S!==null&&!k.done;b++,k=E.next()){S.index>b?(R=S,S=null):R=S.sibling;var P=f(w,S,k.value,x);if(P===null){S===null&&(S=R);break}t&&S&&P.alternate===null&&e(w,S),y=i(P,y,b),L===null?C=P:L.sibling=P,L=P,S=R}if(k.done)return n(w,S),Bt&&la(w,b),C;if(S===null){for(;!k.done;b++,k=E.next())k=h(w,k.value,x),k!==null&&(y=i(k,y,b),L===null?C=k:L.sibling=k,L=k);return Bt&&la(w,b),C}for(S=r(w,S);!k.done;b++,k=E.next())k=m(S,w,b,k.value,x),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?b:k.key),y=i(k,y,b),L===null?C=k:L.sibling=k,L=k);return t&&S.forEach(function(O){return e(w,O)}),Bt&&la(w,b),C}function v(w,y,E,x){if(typeof E=="object"&&E!==null&&E.type===Vl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Hh:e:{for(var C=E.key,L=y;L!==null;){if(L.key===C){if(C=E.type,C===Vl){if(L.tag===7){n(w,L.sibling),y=s(L,E.props.children),y.return=w,w=y;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===to&&fI(C)===L.type){n(w,L.sibling),y=s(L,E.props),y.ref=Au(w,L,E),y.return=w,w=y;break e}n(w,L);break}else e(w,L);L=L.sibling}E.type===Vl?(y=Ba(E.props.children,w.mode,x,E.key),y.return=w,w=y):(x=zf(E.type,E.key,E.props,null,w.mode,x),x.ref=Au(w,y,E),x.return=w,w=x)}return o(w);case Ll:e:{for(L=E.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(w,y.sibling),y=s(y,E.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=gy(E,w.mode,x),y.return=w,w=y}return o(w);case to:return L=E._init,v(w,y,L(E._payload),x)}if(Uu(E))return T(w,y,E,x);if(Eu(E))return p(w,y,E,x);rf(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,E),y.return=w,w=y):(n(w,y),y=py(E,w.mode,x),y.return=w,w=y),o(w)):n(w,y)}return v}var gc=a1(!0),l1=a1(!1),Am=Go(null),xm=null,Wl=null,V_=null;function M_(){V_=Wl=xm=null}function F_(t){var e=Am.current;Ft(Am),t._currentValue=e}function Uv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jl(t,e){xm=t,V_=Wl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sr=!0),t.firstContext=null)}function as(t){var e=t._currentValue;if(V_!==t)if(t={context:t,memoizedValue:e,next:null},Wl===null){if(xm===null)throw Error(ie(308));Wl=t,xm.dependencies={lanes:0,firstContext:t}}else Wl=Wl.next=t;return e}var Ia=null;function U_(t){Ia===null?Ia=[t]:Ia.push(t)}function c1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,U_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ai(t,r)}function Ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var no=!1;function j_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Io(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ai(t,n)}return s=r.interleaved,s===null?(e.next=e,U_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ai(t,n)}function Mf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}function mI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rm(t,e,n,r){var s=t.updateQueue;no=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,p=a;switch(f=e,m=n,p.tag){case 1:if(T=p.payload,typeof T=="function"){h=T.call(m,h,f);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=p.payload,f=typeof T=="function"?T.call(m,h,f):T,f==null)break e;h=Zt({},h,f);break e;case 2:no=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ya|=o,t.lanes=o,t.memoizedState=h}}function pI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ie(191,s));s.call(r)}}}var gh={},Qs=Go(gh),kd=Go(gh),Nd=Go(gh);function Sa(t){if(t===gh)throw Error(ie(174));return t}function $_(t,e){switch(Dt(Nd,e),Dt(kd,t),Dt(Qs,gh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wv(e,t)}Ft(Qs),Dt(Qs,e)}function yc(){Ft(Qs),Ft(kd),Ft(Nd)}function d1(t){Sa(Nd.current);var e=Sa(Qs.current),n=wv(e,t.type);e!==n&&(Dt(kd,t),Dt(Qs,n))}function B_(t){kd.current===t&&(Ft(Qs),Ft(kd))}var Yt=Go(0);function Pm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cy=[];function z_(){for(var t=0;t<cy.length;t++)cy[t]._workInProgressVersionPrimary=null;cy.length=0}var Ff=Li.ReactCurrentDispatcher,uy=Li.ReactCurrentBatchConfig,Qa=0,Jt=null,bn=null,Ln=null,Cm=!1,nd=!1,Od=0,QV=0;function Qn(){throw Error(ie(321))}function W_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function q_(t,e,n,r,s,i){if(Qa=i,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ff.current=t===null||t.memoizedState===null?ZV:eM,t=n(r,s),nd){i=0;do{if(nd=!1,Od=0,25<=i)throw Error(ie(301));i+=1,Ln=bn=null,e.updateQueue=null,Ff.current=tM,t=n(r,s)}while(nd)}if(Ff.current=Dm,e=bn!==null&&bn.next!==null,Qa=0,Ln=bn=Jt=null,Cm=!1,e)throw Error(ie(300));return t}function H_(){var t=Od!==0;return Od=0,t}function Vs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Jt.memoizedState=Ln=t:Ln=Ln.next=t,Ln}function ls(){if(bn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=Ln===null?Jt.memoizedState:Ln.next;if(e!==null)Ln=e,bn=t;else{if(t===null)throw Error(ie(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Ln===null?Jt.memoizedState=Ln=t:Ln=Ln.next=t}return Ln}function Ld(t,e){return typeof e=="function"?e(t):e}function dy(t){var e=ls(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=bn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Qa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Jt.lanes|=d,Ya|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,bs(r,e.memoizedState)||(Sr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Jt.lanes|=i,Ya|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hy(t){var e=ls(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bs(i,e.memoizedState)||(Sr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function h1(){}function f1(t,e){var n=Jt,r=ls(),s=e(),i=!bs(r.memoizedState,s);if(i&&(r.memoizedState=s,Sr=!0),r=r.queue,K_(g1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ln!==null&&Ln.memoizedState.tag&1){if(n.flags|=2048,Vd(9,p1.bind(null,n,r,s,e),void 0,null),Mn===null)throw Error(ie(349));Qa&30||m1(n,e,s)}return s}function m1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function p1(t,e,n,r){e.value=n,e.getSnapshot=r,y1(e)&&v1(t)}function g1(t,e,n){return n(function(){y1(e)&&v1(t)})}function y1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function v1(t){var e=Ai(t,1);e!==null&&Ts(e,t,1,-1)}function gI(t){var e=Vs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:t},e.queue=t,t=t.dispatch=XV.bind(null,Jt,t),[e.memoizedState,t]}function Vd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function w1(){return ls().memoizedState}function Uf(t,e,n,r){var s=Vs();Jt.flags|=t,s.memoizedState=Vd(1|e,n,void 0,r===void 0?null:r)}function Vp(t,e,n,r){var s=ls();r=r===void 0?null:r;var i=void 0;if(bn!==null){var o=bn.memoizedState;if(i=o.destroy,r!==null&&W_(r,o.deps)){s.memoizedState=Vd(e,n,i,r);return}}Jt.flags|=t,s.memoizedState=Vd(1|e,n,i,r)}function yI(t,e){return Uf(8390656,8,t,e)}function K_(t,e){return Vp(2048,8,t,e)}function _1(t,e){return Vp(4,2,t,e)}function E1(t,e){return Vp(4,4,t,e)}function T1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I1(t,e,n){return n=n!=null?n.concat([t]):null,Vp(4,4,T1.bind(null,e,t),n)}function G_(){}function S1(t,e){var n=ls();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function b1(t,e){var n=ls();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function A1(t,e,n){return Qa&21?(bs(n,e)||(n=DR(),Jt.lanes|=n,Ya|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sr=!0),t.memoizedState=n)}function YV(t,e){var n=Et;Et=n!==0&&4>n?n:4,t(!0);var r=uy.transition;uy.transition={};try{t(!1),e()}finally{Et=n,uy.transition=r}}function x1(){return ls().memoizedState}function JV(t,e,n){var r=bo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},R1(t))P1(e,n);else if(n=c1(t,e,n,r),n!==null){var s=fr();Ts(n,t,r,s),C1(n,e,r)}}function XV(t,e,n){var r=bo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(R1(t))P1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,bs(a,o)){var l=e.interleaved;l===null?(s.next=s,U_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=c1(t,e,s,r),n!==null&&(s=fr(),Ts(n,t,r,s),C1(n,e,r))}}function R1(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function P1(t,e){nd=Cm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function C1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}var Dm={readContext:as,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},ZV={readContext:as,useCallback:function(t,e){return Vs().memoizedState=[t,e===void 0?null:e],t},useContext:as,useEffect:yI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uf(4194308,4,T1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uf(4,2,t,e)},useMemo:function(t,e){var n=Vs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JV.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=Vs();return t={current:t},e.memoizedState=t},useState:gI,useDebugValue:G_,useDeferredValue:function(t){return Vs().memoizedState=t},useTransition:function(){var t=gI(!1),e=t[0];return t=YV.bind(null,t[1]),Vs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,s=Vs();if(Bt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),Mn===null)throw Error(ie(349));Qa&30||m1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yI(g1.bind(null,r,i,t),[t]),r.flags|=2048,Vd(9,p1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Vs(),e=Mn.identifierPrefix;if(Bt){var n=gi,r=pi;n=(r&~(1<<32-Es(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Od++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eM={readContext:as,useCallback:S1,useContext:as,useEffect:K_,useImperativeHandle:I1,useInsertionEffect:_1,useLayoutEffect:E1,useMemo:b1,useReducer:dy,useRef:w1,useState:function(){return dy(Ld)},useDebugValue:G_,useDeferredValue:function(t){var e=ls();return A1(e,bn.memoizedState,t)},useTransition:function(){var t=dy(Ld)[0],e=ls().memoizedState;return[t,e]},useMutableSource:h1,useSyncExternalStore:f1,useId:x1,unstable_isNewReconciler:!1},tM={readContext:as,useCallback:S1,useContext:as,useEffect:K_,useImperativeHandle:I1,useInsertionEffect:_1,useLayoutEffect:E1,useMemo:b1,useReducer:hy,useRef:w1,useState:function(){return hy(Ld)},useDebugValue:G_,useDeferredValue:function(t){var e=ls();return bn===null?e.memoizedState=t:A1(e,bn.memoizedState,t)},useTransition:function(){var t=hy(Ld)[0],e=ls().memoizedState;return[t,e]},useMutableSource:h1,useSyncExternalStore:f1,useId:x1,unstable_isNewReconciler:!1};function fs(t,e){if(t&&t.defaultProps){e=Zt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mp={isMounted:function(t){return(t=t._reactInternals)?ul(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fr(),s=bo(t),i=wi(r,s);i.payload=e,n!=null&&(i.callback=n),e=Io(t,i,s),e!==null&&(Ts(e,t,s,r),Mf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fr(),s=bo(t),i=wi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Io(t,i,s),e!==null&&(Ts(e,t,s,r),Mf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fr(),r=bo(t),s=wi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Io(t,s,r),e!==null&&(Ts(e,t,r,n),Mf(e,t,r))}};function vI(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Rd(n,r)||!Rd(s,i):!0}function D1(t,e,n){var r=!1,s=Vo,i=e.contextType;return typeof i=="object"&&i!==null?i=as(i):(s=Pr(e)?Ka:sr.current,r=e.contextTypes,i=(r=r!=null)?mc(t,s):Vo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Mp.enqueueReplaceState(e,e.state,null)}function $v(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},j_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=as(i):(i=Pr(e)?Ka:sr.current,s.context=mc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Mp.enqueueReplaceState(s,s.state,null),Rm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vc(t,e){try{var n="",r=e;do n+=PL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function fy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nM=typeof WeakMap=="function"?WeakMap:Map;function k1(t,e,n){n=wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nm||(Nm=!0,Xv=r),Bv(t,e)},n}function N1(t,e,n){n=wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Bv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bv(t,e),typeof r!="function"&&(So===null?So=new Set([this]):So.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _I(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gM.bind(null,t,e,n),e.then(t,t))}function EI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function TI(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wi(-1,1),e.tag=2,Io(n,e,1))),n.lanes|=1),t)}var rM=Li.ReactCurrentOwner,Sr=!1;function ur(t,e,n,r){e.child=t===null?l1(e,null,n,r):gc(e,t.child,n,r)}function II(t,e,n,r,s){n=n.render;var i=e.ref;return Jl(e,s),r=q_(t,e,n,r,i,s),n=H_(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xi(t,e,s)):(Bt&&n&&N_(e),e.flags|=1,ur(t,e,r,s),e.child)}function SI(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!n0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,O1(t,e,i,r,s)):(t=zf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Rd,n(o,r)&&t.ref===e.ref)return xi(t,e,s)}return e.flags|=1,t=Ao(i,r),t.ref=e.ref,t.return=e,e.child=t}function O1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Rd(i,r)&&t.ref===e.ref)if(Sr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Sr=!0);else return e.lanes=t.lanes,xi(t,e,s)}return zv(t,e,n,r,s)}function L1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Hl,Vr),Vr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Hl,Vr),Vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Dt(Hl,Vr),Vr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Dt(Hl,Vr),Vr|=r;return ur(t,e,s,n),e.child}function V1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zv(t,e,n,r,s){var i=Pr(n)?Ka:sr.current;return i=mc(e,i),Jl(e,s),n=q_(t,e,n,r,i,s),r=H_(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xi(t,e,s)):(Bt&&r&&N_(e),e.flags|=1,ur(t,e,n,s),e.child)}function bI(t,e,n,r,s){if(Pr(n)){var i=!0;Im(e)}else i=!1;if(Jl(e,s),e.stateNode===null)jf(t,e),D1(e,n,r),$v(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=as(c):(c=Pr(n)?Ka:sr.current,c=mc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&wI(e,o,r,c),no=!1;var f=e.memoizedState;o.state=f,Rm(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Rr.current||no?(typeof d=="function"&&(jv(e,n,d,r),l=e.memoizedState),(a=no||vI(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,u1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fs(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=as(l):(l=Pr(n)?Ka:sr.current,l=mc(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&wI(e,o,r,l),no=!1,f=e.memoizedState,o.state=f,Rm(e,r,o,s);var T=e.memoizedState;a!==h||f!==T||Rr.current||no?(typeof m=="function"&&(jv(e,n,m,r),T=e.memoizedState),(c=no||vI(e,n,c,r,f,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wv(t,e,n,r,i,s)}function Wv(t,e,n,r,s,i){V1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&uI(e,n,!1),xi(t,e,i);r=e.stateNode,rM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gc(e,t.child,null,i),e.child=gc(e,null,a,i)):ur(t,e,a,i),e.memoizedState=r.state,s&&uI(e,n,!0),e.child}function M1(t){var e=t.stateNode;e.pendingContext?cI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cI(t,e.context,!1),$_(t,e.containerInfo)}function AI(t,e,n,r,s){return pc(),L_(s),e.flags|=256,ur(t,e,n,r),e.child}var qv={dehydrated:null,treeContext:null,retryLane:0};function Hv(t){return{baseLanes:t,cachePool:null,transitions:null}}function F1(t,e,n){var r=e.pendingProps,s=Yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dt(Yt,s&1),t===null)return Fv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jp(o,r,0,null),t=Ba(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Hv(n),e.memoizedState=qv,t):Q_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ao(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ao(a,i):(i=Ba(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Hv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=qv,r}return i=t.child,t=i.sibling,r=Ao(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Q_(t,e){return e=jp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sf(t,e,n,r){return r!==null&&L_(r),gc(e,t.child,null,n),t=Q_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=fy(Error(ie(422))),sf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jp({mode:"visible",children:r.children},s,0,null),i=Ba(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&gc(e,t.child,null,o),e.child.memoizedState=Hv(o),e.memoizedState=qv,i);if(!(e.mode&1))return sf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ie(419)),r=fy(i,r,void 0),sf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Sr||a){if(r=Mn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ai(t,s),Ts(r,t,s,-1))}return t0(),r=fy(Error(ie(421))),sf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Br=To(s.nextSibling),qr=e,Bt=!0,vs=null,t!==null&&(ns[rs++]=pi,ns[rs++]=gi,ns[rs++]=Ga,pi=t.id,gi=t.overflow,Ga=e),e=Q_(e,r.children),e.flags|=4096,e)}function xI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uv(t.return,e,n)}function my(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function U1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ur(t,e,r.children,n),r=Yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xI(t,n,e);else if(t.tag===19)xI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Yt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pm(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),my(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pm(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}my(e,!0,n,null,i);break;case"together":my(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ya|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=Ao(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ao(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iM(t,e,n){switch(e.tag){case 3:M1(e),pc();break;case 5:d1(e);break;case 1:Pr(e.type)&&Im(e);break;case 4:$_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Dt(Am,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Yt,Yt.current&1),e.flags|=128,null):n&e.child.childLanes?F1(t,e,n):(Dt(Yt,Yt.current&1),t=xi(t,e,n),t!==null?t.sibling:null);Dt(Yt,Yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return U1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dt(Yt,Yt.current),r)break;return null;case 22:case 23:return e.lanes=0,L1(t,e,n)}return xi(t,e,n)}var j1,Kv,$1,B1;j1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kv=function(){};$1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Sa(Qs.current);var i=null;switch(n){case"input":s=pv(t,s),r=pv(t,r),i=[];break;case"select":s=Zt({},s,{value:void 0}),r=Zt({},r,{value:void 0}),i=[];break;case"textarea":s=vv(t,s),r=vv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Em)}_v(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ed.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ed.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Vt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};B1=function(t,e,n,r){n!==r&&(e.flags|=4)};function xu(t,e){if(!Bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oM(t,e,n){var r=e.pendingProps;switch(O_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return Pr(e.type)&&Tm(),Yn(e),null;case 3:return r=e.stateNode,yc(),Ft(Rr),Ft(sr),z_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vs!==null&&(tw(vs),vs=null))),Kv(t,e),Yn(e),null;case 5:B_(e);var s=Sa(Nd.current);if(n=e.type,t!==null&&e.stateNode!=null)$1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Yn(e),null}if(t=Sa(Qs.current),nf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bs]=e,r[Dd]=i,t=(e.mode&1)!==0,n){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(s=0;s<$u.length;s++)Vt($u[s],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":VT(r,i),Vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Vt("invalid",r);break;case"textarea":FT(r,i),Vt("invalid",r)}_v(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&tf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&tf(r.textContent,a,t),s=["children",""+a]):Ed.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Vt("scroll",r)}switch(n){case"input":Kh(r),MT(r,i,!0);break;case"textarea":Kh(r),UT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Em)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bs]=e,t[Dd]=r,j1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ev(n,r),n){case"dialog":Vt("cancel",t),Vt("close",t),s=r;break;case"iframe":case"object":case"embed":Vt("load",t),s=r;break;case"video":case"audio":for(s=0;s<$u.length;s++)Vt($u[s],t);s=r;break;case"source":Vt("error",t),s=r;break;case"img":case"image":case"link":Vt("error",t),Vt("load",t),s=r;break;case"details":Vt("toggle",t),s=r;break;case"input":VT(t,r),s=pv(t,r),Vt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Zt({},r,{value:void 0}),Vt("invalid",t);break;case"textarea":FT(t,r),s=vv(t,r),Vt("invalid",t);break;default:s=r}_v(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wR(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yR(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Td(t,l):typeof l=="number"&&Td(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ed.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Vt("scroll",t):l!=null&&w_(t,i,l,o))}switch(n){case"input":Kh(t),MT(t,r,!1);break;case"textarea":Kh(t),UT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Kl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Kl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Em)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)B1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Sa(Nd.current),Sa(Qs.current),nf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bs]=e,(i=r.nodeValue!==n)&&(t=qr,t!==null))switch(t.tag){case 3:tf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bs]=e,e.stateNode=r}return Yn(e),null;case 13:if(Ft(Yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&Br!==null&&e.mode&1&&!(e.flags&128))o1(),pc(),e.flags|=98560,i=!1;else if(i=nf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ie(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ie(317));i[Bs]=e}else pc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),i=!1}else vs!==null&&(tw(vs),vs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?An===0&&(An=3):t0())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return yc(),Kv(t,e),t===null&&Pd(e.stateNode.containerInfo),Yn(e),null;case 10:return F_(e.type._context),Yn(e),null;case 17:return Pr(e.type)&&Tm(),Yn(e),null;case 19:if(Ft(Yt),i=e.memoizedState,i===null)return Yn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)xu(i,!1);else{if(An!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pm(t),o!==null){for(e.flags|=128,xu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Yt,Yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&fn()>wc&&(e.flags|=128,r=!0,xu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Bt)return Yn(e),null}else 2*fn()-i.renderingStartTime>wc&&n!==1073741824&&(e.flags|=128,r=!0,xu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fn(),e.sibling=null,n=Yt.current,Dt(Yt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return e0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vr&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function aM(t,e){switch(O_(e),e.tag){case 1:return Pr(e.type)&&Tm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yc(),Ft(Rr),Ft(sr),z_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return B_(e),null;case 13:if(Ft(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));pc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(Yt),null;case 4:return yc(),null;case 10:return F_(e.type._context),null;case 22:case 23:return e0(),null;case 24:return null;default:return null}}var of=!1,tr=!1,lM=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ql(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ln(t,e,r)}else n.current=null}function Gv(t,e,n){try{n()}catch(r){ln(t,e,r)}}var RI=!1;function cM(t,e){if(Dv=vm,t=KR(),k_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kv={focusedElem:t,selectionRange:n},vm=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var p=T.memoizedProps,v=T.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?p:fs(e.type,p),v);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(x){ln(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return T=RI,RI=!1,T}function rd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Gv(e,n,i)}s=s.next}while(s!==r)}}function Fp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function z1(t){var e=t.alternate;e!==null&&(t.alternate=null,z1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bs],delete e[Dd],delete e[Lv],delete e[qV],delete e[HV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function W1(t){return t.tag===5||t.tag===3||t.tag===4}function PI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||W1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Em));else if(r!==4&&(t=t.child,t!==null))for(Yv(t,e,n),t=t.sibling;t!==null;)Yv(t,e,n),t=t.sibling}function Jv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jv(t,e,n),t=t.sibling;t!==null;)Jv(t,e,n),t=t.sibling}var jn=null,gs=!1;function Hi(t,e,n){for(n=n.child;n!==null;)q1(t,e,n),n=n.sibling}function q1(t,e,n){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Cp,n)}catch{}switch(n.tag){case 5:tr||ql(n,e);case 6:var r=jn,s=gs;jn=null,Hi(t,e,n),jn=r,gs=s,jn!==null&&(gs?(t=jn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jn.removeChild(n.stateNode));break;case 18:jn!==null&&(gs?(t=jn,n=n.stateNode,t.nodeType===8?ay(t.parentNode,n):t.nodeType===1&&ay(t,n),Ad(t)):ay(jn,n.stateNode));break;case 4:r=jn,s=gs,jn=n.stateNode.containerInfo,gs=!0,Hi(t,e,n),jn=r,gs=s;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Gv(n,e,o),s=s.next}while(s!==r)}Hi(t,e,n);break;case 1:if(!tr&&(ql(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ln(n,e,a)}Hi(t,e,n);break;case 21:Hi(t,e,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Hi(t,e,n),tr=r):Hi(t,e,n);break;default:Hi(t,e,n)}}function CI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lM),e.forEach(function(r){var s=vM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ds(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jn=a.stateNode,gs=!1;break e;case 3:jn=a.stateNode.containerInfo,gs=!0;break e;case 4:jn=a.stateNode.containerInfo,gs=!0;break e}a=a.return}if(jn===null)throw Error(ie(160));q1(i,o,s),jn=null,gs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ln(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H1(e,t),e=e.sibling}function H1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ds(e,t),Ls(t),r&4){try{rd(3,t,t.return),Fp(3,t)}catch(p){ln(t,t.return,p)}try{rd(5,t,t.return)}catch(p){ln(t,t.return,p)}}break;case 1:ds(e,t),Ls(t),r&512&&n!==null&&ql(n,n.return);break;case 5:if(ds(e,t),Ls(t),r&512&&n!==null&&ql(n,n.return),t.flags&32){var s=t.stateNode;try{Td(s,"")}catch(p){ln(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mR(s,i),Ev(a,o);var c=Ev(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?wR(s,h):d==="dangerouslySetInnerHTML"?yR(s,h):d==="children"?Td(s,h):w_(s,d,h,c)}switch(a){case"input":gv(s,i);break;case"textarea":pR(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Kl(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Kl(s,!!i.multiple,i.defaultValue,!0):Kl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dd]=i}catch(p){ln(t,t.return,p)}}break;case 6:if(ds(e,t),Ls(t),r&4){if(t.stateNode===null)throw Error(ie(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){ln(t,t.return,p)}}break;case 3:if(ds(e,t),Ls(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ad(e.containerInfo)}catch(p){ln(t,t.return,p)}break;case 4:ds(e,t),Ls(t);break;case 13:ds(e,t),Ls(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(X_=fn())),r&4&&CI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(c=tr)||d,ds(e,t),tr=c):ds(e,t),Ls(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Te=t,d=t.child;d!==null;){for(h=Te=d;Te!==null;){switch(f=Te,m=f.child,f.tag){case 0:case 11:case 14:case 15:rd(4,f,f.return);break;case 1:ql(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(p){ln(r,n,p)}}break;case 5:ql(f,f.return);break;case 22:if(f.memoizedState!==null){kI(h);continue}}m!==null?(m.return=f,Te=m):kI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vR("display",o))}catch(p){ln(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){ln(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ds(e,t),Ls(t),r&4&&CI(t);break;case 21:break;default:ds(e,t),Ls(t)}}function Ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(W1(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Td(s,""),r.flags&=-33);var i=PI(t);Jv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PI(t);Yv(t,a,o);break;default:throw Error(ie(161))}}catch(l){ln(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uM(t,e,n){Te=t,K1(t)}function K1(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var s=Te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||of;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||tr;a=of;var c=tr;if(of=o,(tr=l)&&!c)for(Te=s;Te!==null;)o=Te,l=o.child,o.tag===22&&o.memoizedState!==null?NI(s):l!==null?(l.return=o,Te=l):NI(s);for(;i!==null;)Te=i,K1(i),i=i.sibling;Te=s,of=a,tr=c}DI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Te=i):DI(t)}}function DI(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||Fp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&pI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ad(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}tr||e.flags&512&&Qv(e)}catch(f){ln(e,e.return,f)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function kI(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function NI(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fp(4,e)}catch(l){ln(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ln(e,s,l)}}var i=e.return;try{Qv(e)}catch(l){ln(e,i,l)}break;case 5:var o=e.return;try{Qv(e)}catch(l){ln(e,o,l)}}}catch(l){ln(e,e.return,l)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var dM=Math.ceil,km=Li.ReactCurrentDispatcher,Y_=Li.ReactCurrentOwner,is=Li.ReactCurrentBatchConfig,lt=0,Mn=null,wn=null,Bn=0,Vr=0,Hl=Go(0),An=0,Md=null,Ya=0,Up=0,J_=0,sd=null,Ir=null,X_=0,wc=1/0,di=null,Nm=!1,Xv=null,So=null,af=!1,mo=null,Om=0,id=0,Zv=null,$f=-1,Bf=0;function fr(){return lt&6?fn():$f!==-1?$f:$f=fn()}function bo(t){return t.mode&1?lt&2&&Bn!==0?Bn&-Bn:GV.transition!==null?(Bf===0&&(Bf=DR()),Bf):(t=Et,t!==0||(t=window.event,t=t===void 0?16:FR(t.type)),t):1}function Ts(t,e,n,r){if(50<id)throw id=0,Zv=null,Error(ie(185));fh(t,n,r),(!(lt&2)||t!==Mn)&&(t===Mn&&(!(lt&2)&&(Up|=n),An===4&&so(t,Bn)),Cr(t,r),n===1&&lt===0&&!(e.mode&1)&&(wc=fn()+500,Lp&&Qo()))}function Cr(t,e){var n=t.callbackNode;GL(t,e);var r=ym(t,t===Mn?Bn:0);if(r===0)n!==null&&BT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&BT(n),e===1)t.tag===0?KV(OI.bind(null,t)):r1(OI.bind(null,t)),zV(function(){!(lt&6)&&Qo()}),n=null;else{switch(kR(r)){case 1:n=S_;break;case 4:n=PR;break;case 16:n=gm;break;case 536870912:n=CR;break;default:n=gm}n=tP(n,G1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function G1(t,e){if($f=-1,Bf=0,lt&6)throw Error(ie(327));var n=t.callbackNode;if(Xl()&&t.callbackNode!==n)return null;var r=ym(t,t===Mn?Bn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lm(t,r);else{e=r;var s=lt;lt|=2;var i=Y1();(Mn!==t||Bn!==e)&&(di=null,wc=fn()+500,$a(t,e));do try{mM();break}catch(a){Q1(t,a)}while(!0);M_(),km.current=i,lt=s,wn!==null?e=0:(Mn=null,Bn=0,e=An)}if(e!==0){if(e===2&&(s=Av(t),s!==0&&(r=s,e=ew(t,s))),e===1)throw n=Md,$a(t,0),so(t,r),Cr(t,fn()),n;if(e===6)so(t,r);else{if(s=t.current.alternate,!(r&30)&&!hM(s)&&(e=Lm(t,r),e===2&&(i=Av(t),i!==0&&(r=i,e=ew(t,i))),e===1))throw n=Md,$a(t,0),so(t,r),Cr(t,fn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:ca(t,Ir,di);break;case 3:if(so(t,r),(r&130023424)===r&&(e=X_+500-fn(),10<e)){if(ym(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){fr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ov(ca.bind(null,t,Ir,di),e);break}ca(t,Ir,di);break;case 4:if(so(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Es(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dM(r/1960))-r,10<r){t.timeoutHandle=Ov(ca.bind(null,t,Ir,di),r);break}ca(t,Ir,di);break;case 5:ca(t,Ir,di);break;default:throw Error(ie(329))}}}return Cr(t,fn()),t.callbackNode===n?G1.bind(null,t):null}function ew(t,e){var n=sd;return t.current.memoizedState.isDehydrated&&($a(t,e).flags|=256),t=Lm(t,e),t!==2&&(e=Ir,Ir=n,e!==null&&tw(e)),t}function tw(t){Ir===null?Ir=t:Ir.push.apply(Ir,t)}function hM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function so(t,e){for(e&=~J_,e&=~Up,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Es(e),r=1<<n;t[n]=-1,e&=~r}}function OI(t){if(lt&6)throw Error(ie(327));Xl();var e=ym(t,0);if(!(e&1))return Cr(t,fn()),null;var n=Lm(t,e);if(t.tag!==0&&n===2){var r=Av(t);r!==0&&(e=r,n=ew(t,r))}if(n===1)throw n=Md,$a(t,0),so(t,e),Cr(t,fn()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ca(t,Ir,di),Cr(t,fn()),null}function Z_(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(wc=fn()+500,Lp&&Qo())}}function Ja(t){mo!==null&&mo.tag===0&&!(lt&6)&&Xl();var e=lt;lt|=1;var n=is.transition,r=Et;try{if(is.transition=null,Et=1,t)return t()}finally{Et=r,is.transition=n,lt=e,!(lt&6)&&Qo()}}function e0(){Vr=Hl.current,Ft(Hl)}function $a(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BV(n)),wn!==null)for(n=wn.return;n!==null;){var r=n;switch(O_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tm();break;case 3:yc(),Ft(Rr),Ft(sr),z_();break;case 5:B_(r);break;case 4:yc();break;case 13:Ft(Yt);break;case 19:Ft(Yt);break;case 10:F_(r.type._context);break;case 22:case 23:e0()}n=n.return}if(Mn=t,wn=t=Ao(t.current,null),Bn=Vr=e,An=0,Md=null,J_=Up=Ya=0,Ir=sd=null,Ia!==null){for(e=0;e<Ia.length;e++)if(n=Ia[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ia=null}return t}function Q1(t,e){do{var n=wn;try{if(M_(),Ff.current=Dm,Cm){for(var r=Jt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cm=!1}if(Qa=0,Ln=bn=Jt=null,nd=!1,Od=0,Y_.current=null,n===null||n.return===null){An=1,Md=e,wn=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Bn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=EI(o);if(m!==null){m.flags&=-257,TI(m,o,a,i,e),m.mode&1&&_I(i,c,e),e=m,l=c;var T=e.updateQueue;if(T===null){var p=new Set;p.add(l),e.updateQueue=p}else T.add(l);break e}else{if(!(e&1)){_I(i,c,e),t0();break e}l=Error(ie(426))}}else if(Bt&&a.mode&1){var v=EI(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),TI(v,o,a,i,e),L_(vc(l,a));break e}}i=l=vc(l,a),An!==4&&(An=2),sd===null?sd=[i]:sd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=k1(i,l,e);mI(i,w);break e;case 1:a=l;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(So===null||!So.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=N1(i,a,e);mI(i,x);break e}}i=i.return}while(i!==null)}X1(n)}catch(C){e=C,wn===n&&n!==null&&(wn=n=n.return);continue}break}while(!0)}function Y1(){var t=km.current;return km.current=Dm,t===null?Dm:t}function t0(){(An===0||An===3||An===2)&&(An=4),Mn===null||!(Ya&268435455)&&!(Up&268435455)||so(Mn,Bn)}function Lm(t,e){var n=lt;lt|=2;var r=Y1();(Mn!==t||Bn!==e)&&(di=null,$a(t,e));do try{fM();break}catch(s){Q1(t,s)}while(!0);if(M_(),lt=n,km.current=r,wn!==null)throw Error(ie(261));return Mn=null,Bn=0,An}function fM(){for(;wn!==null;)J1(wn)}function mM(){for(;wn!==null&&!UL();)J1(wn)}function J1(t){var e=eP(t.alternate,t,Vr);t.memoizedProps=t.pendingProps,e===null?X1(t):wn=e,Y_.current=null}function X1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aM(n,e),n!==null){n.flags&=32767,wn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{An=6,wn=null;return}}else if(n=oM(n,e,Vr),n!==null){wn=n;return}if(e=e.sibling,e!==null){wn=e;return}wn=e=t}while(e!==null);An===0&&(An=5)}function ca(t,e,n){var r=Et,s=is.transition;try{is.transition=null,Et=1,pM(t,e,n,r)}finally{is.transition=s,Et=r}return null}function pM(t,e,n,r){do Xl();while(mo!==null);if(lt&6)throw Error(ie(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(QL(t,i),t===Mn&&(wn=Mn=null,Bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||af||(af=!0,tP(gm,function(){return Xl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=is.transition,is.transition=null;var o=Et;Et=1;var a=lt;lt|=4,Y_.current=null,cM(t,n),H1(n,t),LV(kv),vm=!!Dv,kv=Dv=null,t.current=n,uM(n),jL(),lt=a,Et=o,is.transition=i}else t.current=n;if(af&&(af=!1,mo=t,Om=s),i=t.pendingLanes,i===0&&(So=null),zL(n.stateNode),Cr(t,fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nm)throw Nm=!1,t=Xv,Xv=null,t;return Om&1&&t.tag!==0&&Xl(),i=t.pendingLanes,i&1?t===Zv?id++:(id=0,Zv=t):id=0,Qo(),null}function Xl(){if(mo!==null){var t=kR(Om),e=is.transition,n=Et;try{if(is.transition=null,Et=16>t?16:t,mo===null)var r=!1;else{if(t=mo,mo=null,Om=0,lt&6)throw Error(ie(331));var s=lt;for(lt|=4,Te=t.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Te=c;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:rd(8,d,i)}var h=d.child;if(h!==null)h.return=d,Te=h;else for(;Te!==null;){d=Te;var f=d.sibling,m=d.return;if(z1(d),d===c){Te=null;break}if(f!==null){f.return=m,Te=f;break}Te=m}}}var T=i.alternate;if(T!==null){var p=T.child;if(p!==null){T.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rd(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Te=w;break e}Te=i.return}}var y=t.current;for(Te=y;Te!==null;){o=Te;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Te=E;else e:for(o=y;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fp(9,a)}}catch(C){ln(a,a.return,C)}if(a===o){Te=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Te=x;break e}Te=a.return}}if(lt=s,Qo(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Cp,t)}catch{}r=!0}return r}finally{Et=n,is.transition=e}}return!1}function LI(t,e,n){e=vc(n,e),e=k1(t,e,1),t=Io(t,e,1),e=fr(),t!==null&&(fh(t,1,e),Cr(t,e))}function ln(t,e,n){if(t.tag===3)LI(t,t,n);else for(;e!==null;){if(e.tag===3){LI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(So===null||!So.has(r))){t=vc(n,t),t=N1(e,t,1),e=Io(e,t,1),t=fr(),e!==null&&(fh(e,1,t),Cr(e,t));break}}e=e.return}}function gM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fr(),t.pingedLanes|=t.suspendedLanes&n,Mn===t&&(Bn&n)===n&&(An===4||An===3&&(Bn&130023424)===Bn&&500>fn()-X_?$a(t,0):J_|=n),Cr(t,e)}function Z1(t,e){e===0&&(t.mode&1?(e=Yh,Yh<<=1,!(Yh&130023424)&&(Yh=4194304)):e=1);var n=fr();t=Ai(t,e),t!==null&&(fh(t,e,n),Cr(t,n))}function yM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Z1(t,n)}function vM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),Z1(t,n)}var eP;eP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rr.current)Sr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sr=!1,iM(t,e,n);Sr=!!(t.flags&131072)}else Sr=!1,Bt&&e.flags&1048576&&s1(e,bm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jf(t,e),t=e.pendingProps;var s=mc(e,sr.current);Jl(e,n),s=q_(null,e,r,t,s,n);var i=H_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pr(r)?(i=!0,Im(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,j_(e),s.updater=Mp,e.stateNode=s,s._reactInternals=e,$v(e,r,t,n),e=Wv(null,e,r,!0,i,n)):(e.tag=0,Bt&&i&&N_(e),ur(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_M(r),t=fs(r,t),s){case 0:e=zv(null,e,r,t,n);break e;case 1:e=bI(null,e,r,t,n);break e;case 11:e=II(null,e,r,t,n);break e;case 14:e=SI(null,e,r,fs(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),zv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),bI(t,e,r,s,n);case 3:e:{if(M1(e),t===null)throw Error(ie(387));r=e.pendingProps,i=e.memoizedState,s=i.element,u1(t,e),Rm(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vc(Error(ie(423)),e),e=AI(t,e,r,n,s);break e}else if(r!==s){s=vc(Error(ie(424)),e),e=AI(t,e,r,n,s);break e}else for(Br=To(e.stateNode.containerInfo.firstChild),qr=e,Bt=!0,vs=null,n=l1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pc(),r===s){e=xi(t,e,n);break e}ur(t,e,r,n)}e=e.child}return e;case 5:return d1(e),t===null&&Fv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Nv(r,s)?o=null:i!==null&&Nv(r,i)&&(e.flags|=32),V1(t,e),ur(t,e,o,n),e.child;case 6:return t===null&&Fv(e),null;case 13:return F1(t,e,n);case 4:return $_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gc(e,null,r,n):ur(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),II(t,e,r,s,n);case 7:return ur(t,e,e.pendingProps,n),e.child;case 8:return ur(t,e,e.pendingProps.children,n),e.child;case 12:return ur(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Dt(Am,r._currentValue),r._currentValue=o,i!==null)if(bs(i.value,o)){if(i.children===s.children&&!Rr.current){e=xi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Uv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ie(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Uv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ur(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jl(e,n),s=as(s),r=r(s),e.flags|=1,ur(t,e,r,n),e.child;case 14:return r=e.type,s=fs(r,e.pendingProps),s=fs(r.type,s),SI(t,e,r,s,n);case 15:return O1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),jf(t,e),e.tag=1,Pr(r)?(t=!0,Im(e)):t=!1,Jl(e,n),D1(e,r,s),$v(e,r,s,n),Wv(null,e,r,!0,t,n);case 19:return U1(t,e,n);case 22:return L1(t,e,n)}throw Error(ie(156,e.tag))};function tP(t,e){return RR(t,e)}function wM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(t,e,n,r){return new wM(t,e,n,r)}function n0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _M(t){if(typeof t=="function")return n0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E_)return 11;if(t===T_)return 14}return 2}function Ao(t,e){var n=t.alternate;return n===null?(n=ss(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")n0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vl:return Ba(n.children,s,i,e);case __:o=8,s|=8;break;case dv:return t=ss(12,n,e,s|2),t.elementType=dv,t.lanes=i,t;case hv:return t=ss(13,n,e,s),t.elementType=hv,t.lanes=i,t;case fv:return t=ss(19,n,e,s),t.elementType=fv,t.lanes=i,t;case dR:return jp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cR:o=10;break e;case uR:o=9;break e;case E_:o=11;break e;case T_:o=14;break e;case to:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=ss(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ba(t,e,n,r){return t=ss(7,t,r,e),t.lanes=n,t}function jp(t,e,n,r){return t=ss(22,t,r,e),t.elementType=dR,t.lanes=n,t.stateNode={isHidden:!1},t}function py(t,e,n){return t=ss(6,t,null,e),t.lanes=n,t}function gy(t,e,n){return e=ss(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yg(0),this.expirationTimes=Yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function r0(t,e,n,r,s,i,o,a,l){return t=new EM(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ss(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},j_(i),t}function TM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ll,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nP(t){if(!t)return Vo;t=t._reactInternals;e:{if(ul(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(Pr(n))return n1(t,n,e)}return e}function rP(t,e,n,r,s,i,o,a,l){return t=r0(n,r,!0,t,s,i,o,a,l),t.context=nP(null),n=t.current,r=fr(),s=bo(n),i=wi(r,s),i.callback=e??null,Io(n,i,s),t.current.lanes=s,fh(t,s,r),Cr(t,r),t}function $p(t,e,n,r){var s=e.current,i=fr(),o=bo(s);return n=nP(n),e.context===null?e.context=n:e.pendingContext=n,e=wi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Io(s,e,o),t!==null&&(Ts(t,s,o,i),Mf(t,s,o)),o}function Vm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function s0(t,e){VI(t,e),(t=t.alternate)&&VI(t,e)}function IM(){return null}var sP=typeof reportError=="function"?reportError:function(t){console.error(t)};function i0(t){this._internalRoot=t}Bp.prototype.render=i0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));$p(t,e,null,null)};Bp.prototype.unmount=i0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ja(function(){$p(null,t,null,null)}),e[bi]=null}};function Bp(t){this._internalRoot=t}Bp.prototype.unstable_scheduleHydration=function(t){if(t){var e=LR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ro.length&&e!==0&&e<ro[n].priority;n++);ro.splice(n,0,t),n===0&&MR(t)}};function o0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function MI(){}function SM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Vm(o);i.call(c)}}var o=rP(e,r,t,0,null,!1,!1,"",MI);return t._reactRootContainer=o,t[bi]=o.current,Pd(t.nodeType===8?t.parentNode:t),Ja(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Vm(l);a.call(c)}}var l=r0(t,0,!1,null,null,!1,!1,"",MI);return t._reactRootContainer=l,t[bi]=l.current,Pd(t.nodeType===8?t.parentNode:t),Ja(function(){$p(e,l,n,r)}),l}function Wp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Vm(o);a.call(l)}}$p(e,o,t,s)}else o=SM(n,e,t,s,r);return Vm(o)}NR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ju(e.pendingLanes);n!==0&&(b_(e,n|1),Cr(e,fn()),!(lt&6)&&(wc=fn()+500,Qo()))}break;case 13:Ja(function(){var r=Ai(t,1);if(r!==null){var s=fr();Ts(r,t,1,s)}}),s0(t,1)}};A_=function(t){if(t.tag===13){var e=Ai(t,134217728);if(e!==null){var n=fr();Ts(e,t,134217728,n)}s0(t,134217728)}};OR=function(t){if(t.tag===13){var e=bo(t),n=Ai(t,e);if(n!==null){var r=fr();Ts(n,t,e,r)}s0(t,e)}};LR=function(){return Et};VR=function(t,e){var n=Et;try{return Et=t,e()}finally{Et=n}};Iv=function(t,e,n){switch(e){case"input":if(gv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Op(r);if(!s)throw Error(ie(90));fR(r),gv(r,s)}}}break;case"textarea":pR(t,n);break;case"select":e=n.value,e!=null&&Kl(t,!!n.multiple,e,!1)}};TR=Z_;IR=Ja;var bM={usingClientEntryPoint:!1,Events:[ph,jl,Op,_R,ER,Z_]},Ru={findFiberByHostInstance:Ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AM={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AR(t),t===null?null:t.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||IM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{Cp=lf.inject(AM),Gs=lf}catch{}}Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bM;Jr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o0(e))throw Error(ie(200));return TM(t,e,null,n)};Jr.createRoot=function(t,e){if(!o0(t))throw Error(ie(299));var n=!1,r="",s=sP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=r0(t,1,!1,null,null,n,!1,r,s),t[bi]=e.current,Pd(t.nodeType===8?t.parentNode:t),new i0(e)};Jr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=AR(e),t=t===null?null:t.stateNode,t};Jr.flushSync=function(t){return Ja(t)};Jr.hydrate=function(t,e,n){if(!zp(e))throw Error(ie(200));return Wp(null,t,e,!0,n)};Jr.hydrateRoot=function(t,e,n){if(!o0(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=sP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rP(e,null,t,1,n??null,s,!1,i,o),t[bi]=e.current,Pd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bp(e)};Jr.render=function(t,e,n){if(!zp(e))throw Error(ie(200));return Wp(null,t,e,!1,n)};Jr.unmountComponentAtNode=function(t){if(!zp(t))throw Error(ie(40));return t._reactRootContainer?(Ja(function(){Wp(null,null,t,!1,function(){t._reactRootContainer=null,t[bi]=null})}),!0):!1};Jr.unstable_batchedUpdates=Z_;Jr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zp(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Wp(t,e,n,!1,r)};Jr.version="18.3.1-next-f1338f8080-20240426";function iP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iP)}catch(t){console.error(t)}}iP(),iR.exports=Jr;var yh=iR.exports;const oP=Kx(yh);var aP,FI=yh;aP=FI.createRoot,FI.hydrateRoot;const xM="modulepreload",RM=function(t,e){return new URL(t,e).href},UI={},ee=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=RM(c,r),c in UI)return;UI[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let T=o.length-1;T>=0;T--){const p=o[T];if(p.href===c&&(!d||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":xM,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((T,p)=>{m.addEventListener("load",T),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},PM=1,CM=1e6;let yy=0;function DM(){return yy=(yy+1)%Number.MAX_SAFE_INTEGER,yy.toString()}const vy=new Map,jI=t=>{if(vy.has(t))return;const e=setTimeout(()=>{vy.delete(t),od({type:"REMOVE_TOAST",toastId:t})},CM);vy.set(t,e)},kM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,PM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?jI(n):t.toasts.forEach(r=>{jI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Wf=[];let qf={toasts:[]};function od(t){qf=kM(qf,t),Wf.forEach(e=>{e(qf)})}function NM({...t}){const e=DM(),n=s=>od({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>od({type:"DISMISS_TOAST",toastId:e});return od({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function a0(){const[t,e]=A.useState(qf);return A.useEffect(()=>(Wf.push(e),()=>{const n=Wf.indexOf(e);n>-1&&Wf.splice(n,1)}),[t]),{...t,toast:NM,dismiss:n=>od({type:"DISMISS_TOAST",toastId:n})}}function Ct(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function $I(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function lP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=$I(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():$I(t[s],null)}}}}function Wn(...t){return A.useCallback(lP(...t),t)}function OM(t,e){const n=A.createContext(e),r=i=>{const{children:o,...a}=i,l=A.useMemo(()=>a,Object.values(a));return _.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Hc(t,e=[]){let n=[];function r(i,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:f,children:m,...T}=h,p=((w=f==null?void 0:f[t])==null?void 0:w[l])||a,v=A.useMemo(()=>T,Object.values(T));return _.jsx(p.Provider,{value:v,children:m})};c.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[l])||a,T=A.useContext(m);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,LM(s,...e)]}function LM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Fd(t){const e=MM(t),n=A.forwardRef((r,s)=>{const{children:i,...o}=r,a=A.Children.toArray(i),l=a.find(UM);if(l){const c=l.props.children,d=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return _.jsx(e,{...o,ref:s,children:A.isValidElement(c)?A.cloneElement(c,void 0,d):null})}return _.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var VM=Fd("Slot");function MM(t){const e=A.forwardRef((n,r)=>{const{children:s,...i}=n;if(A.isValidElement(s)){const o=$M(s),a=jM(i,s.props);return s.type!==A.Fragment&&(a.ref=r?lP(r,o):o),A.cloneElement(s,a)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cP=Symbol("radix.slottable");function FM(t){const e=({children:n})=>_.jsx(_.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=cP,e}function UM(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cP}function jM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function $M(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function BM(t){const e=t+"CollectionProvider",[n,r]=Hc(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:w}=p,y=U.useRef(null),E=U.useRef(new Map).current;return _.jsx(s,{scope:v,itemMap:E,collectionRef:y,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=Fd(a),c=U.forwardRef((p,v)=>{const{scope:w,children:y}=p,E=i(a,w),x=Wn(v,E.collectionRef);return _.jsx(l,{ref:x,children:y})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Fd(d),m=U.forwardRef((p,v)=>{const{scope:w,children:y,...E}=p,x=U.useRef(null),C=Wn(v,x),L=i(d,w);return U.useEffect(()=>(L.itemMap.set(x,{ref:x,...E}),()=>void L.itemMap.delete(x))),_.jsx(f,{[h]:"",ref:C,children:y})});m.displayName=d;function T(p){const v=i(t+"CollectionConsumer",p);return U.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const E=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((L,S)=>E.indexOf(L.ref.current)-E.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},T,r]}var zM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],en=zM.reduce((t,e)=>{const n=Fd(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function uP(t,e){t&&yh.flushSync(()=>t.dispatchEvent(e))}function Xs(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function WM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var qM="DismissableLayer",nw="dismissableLayer.update",HM="dismissableLayer.pointerDownOutside",KM="dismissableLayer.focusOutside",BI,dP=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qp=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext(dP),[d,h]=A.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),T=Wn(e,S=>h(S)),p=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(v),y=d?p.indexOf(d):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,x=y>=w,C=QM(S=>{const b=S.target,R=[...c.branches].some(k=>k.contains(b));!x||R||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},f),L=YM(S=>{const b=S.target;[...c.branches].some(k=>k.contains(b))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},f);return WM(S=>{y===c.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),A.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(BI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),zI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=BI)}},[d,f,n,c]),A.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),zI())},[d,c]),A.useEffect(()=>{const S=()=>m({});return document.addEventListener(nw,S),()=>document.removeEventListener(nw,S)},[]),_.jsx(en.div,{...l,ref:T,style:{pointerEvents:E?x?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,C.onPointerDownCapture)})});qp.displayName=qM;var GM="DismissableLayerBranch",hP=A.forwardRef((t,e)=>{const n=A.useContext(dP),r=A.useRef(null),s=Wn(e,r);return A.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),_.jsx(en.div,{...t,ref:s})});hP.displayName=GM;function QM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){fP(HM,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function YM(t,e=globalThis==null?void 0:globalThis.document){const n=Xs(t),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&fP(KM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function zI(){const t=new CustomEvent(nw);document.dispatchEvent(t)}function fP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?uP(s,i):s.dispatchEvent(i)}var JM=qp,XM=hP,Ri=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},ZM="Portal",l0=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=A.useState(!1);Ri(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?oP.createPortal(_.jsx(en.div,{...r,ref:e}),o):null});l0.displayName=ZM;function eF(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var dl=t=>{const{present:e,children:n}=t,r=tF(e),s=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),i=Wn(r.ref,nF(s));return typeof n=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};dl.displayName="Presence";function tF(t){const[e,n]=A.useState(),r=A.useRef(null),s=A.useRef(t),i=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=eF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=cf(r.current);i.current=a==="mounted"?c:"none"},[a]),Ri(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=cf(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ri(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const p=cf(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&p&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=m=>{m.target===e&&(i.current=cf(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function cf(t){return(t==null?void 0:t.animationName)||"none"}function nF(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rF=g_[" useInsertionEffect ".trim().toString()]||Ri;function c0({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=sF({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=A.useRef(t!==void 0);A.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=A.useCallback(d=>{var h;if(a){const f=iF(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,c]}function sF({defaultProp:t,onChange:e}){const[n,r]=A.useState(t),s=A.useRef(n),i=A.useRef(e);return rF(()=>{i.current=e},[e]),A.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function iF(t){return typeof t=="function"}var oF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),aF="VisuallyHidden",Hp=A.forwardRef((t,e)=>_.jsx(en.span,{...t,ref:e,style:{...oF,...t.style}}));Hp.displayName=aF;var lF=Hp,u0="ToastProvider",[d0,cF,uF]=BM("Toast"),[mP]=Hc("Toast",[uF]),[dF,Kp]=mP(u0),pP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=A.useState(null),[c,d]=A.useState(0),h=A.useRef(!1),f=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${u0}\`. Expected non-empty \`string\`.`),_.jsx(d0.Provider,{scope:e,children:_.jsx(dF,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>d(m=>m+1),[]),onToastRemove:A.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};pP.displayName=u0;var gP="ToastViewport",hF=["F8"],rw="toast.viewportPause",sw="toast.viewportResume",yP=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=hF,label:s="Notifications ({hotkey})",...i}=t,o=Kp(gP,n),a=cF(n),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=Wn(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;A.useEffect(()=>{const v=w=>{var E;r.length!==0&&r.every(x=>w[x]||w.code===x)&&((E=h.current)==null||E.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),A.useEffect(()=>{const v=l.current,w=h.current;if(T&&v&&w){const y=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(rw);w.dispatchEvent(L),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(sw);w.dispatchEvent(L),o.isClosePausedRef.current=!1}},x=L=>{!v.contains(L.relatedTarget)&&E()},C=()=>{v.contains(document.activeElement)||E()};return v.addEventListener("focusin",y),v.addEventListener("focusout",x),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",C),window.addEventListener("blur",y),window.addEventListener("focus",E),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",x),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",C),window.removeEventListener("blur",y),window.removeEventListener("focus",E)}}},[T,o.isClosePausedRef]);const p=A.useCallback(({tabbingDirection:v})=>{const y=a().map(E=>{const x=E.ref.current,C=[x,...bF(x)];return v==="forwards"?C:C.reverse()});return(v==="forwards"?y.reverse():y).flat()},[a]);return A.useEffect(()=>{const v=h.current;if(v){const w=y=>{var C,L,S;const E=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!E){const b=document.activeElement,R=y.shiftKey;if(y.target===v&&R){(C=c.current)==null||C.focus();return}const O=p({tabbingDirection:R?"backwards":"forwards"}),D=O.findIndex(j=>j===b);wy(O.slice(D+1))?y.preventDefault():R?(L=c.current)==null||L.focus():(S=d.current)==null||S.focus()}};return v.addEventListener("keydown",w),()=>v.removeEventListener("keydown",w)}},[a,p]),_.jsxs(XM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&_.jsx(iw,{ref:c,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});wy(v)}}),_.jsx(d0.Slot,{scope:n,children:_.jsx(en.ol,{tabIndex:-1,...i,ref:f})}),T&&_.jsx(iw,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});wy(v)}})]})});yP.displayName=gP;var vP="ToastFocusProxy",iw=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Kp(vP,n);return _.jsx(Hp,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});iw.displayName=vP;var vh="Toast",fF="toast.swipeStart",mF="toast.swipeMove",pF="toast.swipeCancel",gF="toast.swipeEnd",wP=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=c0({prop:r,defaultProp:s??!0,onChange:i,caller:vh});return _.jsx(dl,{present:n||a,children:_.jsx(wF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Xs(t.onPause),onResume:Xs(t.onResume),onSwipeStart:Ct(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});wP.displayName=vh;var[yF,vF]=mP(vh,{onClose(){}}),wF=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...T}=t,p=Kp(vh,n),[v,w]=A.useState(null),y=Wn(e,j=>w(j)),E=A.useRef(null),x=A.useRef(null),C=s||p.duration,L=A.useRef(0),S=A.useRef(C),b=A.useRef(0),{onToastAdd:R,onToastRemove:k}=p,P=Xs(()=>{var oe;(v==null?void 0:v.contains(document.activeElement))&&((oe=p.viewport)==null||oe.focus()),o()}),O=A.useCallback(j=>{!j||j===1/0||(window.clearTimeout(b.current),L.current=new Date().getTime(),b.current=window.setTimeout(P,j))},[P]);A.useEffect(()=>{const j=p.viewport;if(j){const oe=()=>{O(S.current),c==null||c()},ye=()=>{const _e=new Date().getTime()-L.current;S.current=S.current-_e,window.clearTimeout(b.current),l==null||l()};return j.addEventListener(rw,ye),j.addEventListener(sw,oe),()=>{j.removeEventListener(rw,ye),j.removeEventListener(sw,oe)}}},[p.viewport,C,l,c,O]),A.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(C)},[i,C,p.isClosePausedRef,O]),A.useEffect(()=>(R(),()=>k()),[R,k]);const D=A.useMemo(()=>v?AP(v):null,[v]);return p.viewport?_.jsxs(_.Fragment,{children:[D&&_.jsx(_F,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:D}),_.jsx(yF,{scope:n,onClose:P,children:yh.createPortal(_.jsx(d0.ItemSlot,{scope:n,children:_.jsx(JM,{asChild:!0,onEscapeKeyDown:Ct(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||P(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:_.jsx(en.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...T,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,j=>{j.key==="Escape"&&(a==null||a(j.nativeEvent),j.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ct(t.onPointerDown,j=>{j.button===0&&(E.current={x:j.clientX,y:j.clientY})}),onPointerMove:Ct(t.onPointerMove,j=>{if(!E.current)return;const oe=j.clientX-E.current.x,ye=j.clientY-E.current.y,_e=!!x.current,W=["left","right"].includes(p.swipeDirection),z=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,K=W?z(0,oe):0,Ae=W?0:z(0,ye),pe=j.pointerType==="touch"?10:2,V={x:K,y:Ae},we={originalEvent:j,delta:V};_e?(x.current=V,uf(mF,h,we,{discrete:!1})):WI(V,p.swipeDirection,pe)?(x.current=V,uf(fF,d,we,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(oe)>pe||Math.abs(ye)>pe)&&(E.current=null)}),onPointerUp:Ct(t.onPointerUp,j=>{const oe=x.current,ye=j.target;if(ye.hasPointerCapture(j.pointerId)&&ye.releasePointerCapture(j.pointerId),x.current=null,E.current=null,oe){const _e=j.currentTarget,W={originalEvent:j,delta:oe};WI(oe,p.swipeDirection,p.swipeThreshold)?uf(gF,m,W,{discrete:!0}):uf(pF,f,W,{discrete:!0}),_e.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),_F=t=>{const{__scopeToast:e,children:n,...r}=t,s=Kp(vh,e),[i,o]=A.useState(!1),[a,l]=A.useState(!1);return IF(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:_.jsx(l0,{asChild:!0,children:_.jsx(Hp,{...r,children:i&&_.jsxs(_.Fragment,{children:[s.label," ",n]})})})},EF="ToastTitle",_P=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return _.jsx(en.div,{...r,ref:e})});_P.displayName=EF;var TF="ToastDescription",EP=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return _.jsx(en.div,{...r,ref:e})});EP.displayName=TF;var TP="ToastAction",IP=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?_.jsx(bP,{altText:n,asChild:!0,children:_.jsx(h0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${TP}\`. Expected non-empty \`string\`.`),null)});IP.displayName=TP;var SP="ToastClose",h0=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=vF(SP,n);return _.jsx(bP,{asChild:!0,children:_.jsx(en.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,s.onClose)})})});h0.displayName=SP;var bP=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return _.jsx(en.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function AP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),SF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...AP(r))}}),e}function uf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?uP(s,i):s.dispatchEvent(i)}var WI=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function IF(t=()=>{}){const e=Xs(t);Ri(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function SF(t){return t.nodeType===t.ELEMENT_NODE}function bF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function wy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var AF=pP,xP=yP,RP=wP,PP=_P,CP=EP,DP=IP,kP=h0;function NP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=NP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function OP(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=NP(t))&&(r&&(r+=" "),r+=e);return r}const qI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,HI=OP,LP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return HI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=qI(d)||qI(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(T=>{let[p,v]=T;return Array.isArray(v)?v.includes({...i,...a}[p]):{...i,...a}[p]===v})?[...c,h,f]:c},[]);return HI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),KI=t=>{const e=RF(t);return e.charAt(0).toUpperCase()+e.slice(1)},VP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),PF=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...CF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:VP("lucide",s),...!i&&!PF(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>A.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(DF,{ref:i,iconNode:e,className:VP(`lucide-${xF(KI(t))}`,`lucide-${t}`,r),...s}));return n.displayName=KI(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],NF=At("arrow-down",kF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],LF=At("arrow-right",OF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],MF=At("arrow-up-down",VF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],UF=At("badge-percent",FF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$F=At("check",jF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zF=At("clock",BF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],qF=At("credit-card",WF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],KF=At("eye-off",HF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],QF=At("eye",GF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],JF=At("file-text",YF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ZF=At("house",XF);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tU=At("lock",eU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],GI=At("log-out",nU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],QI=At("mail",rU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],iU=At("message-circle",sU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M5 12h14",key:"1ays0h"}]],aU=At("minus",oU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],YI=At("plus",lU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],_y=At("receipt",cU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],f0=At("refresh-ccw",uU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JI=At("settings",dU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fU=At("shield",hU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],pU=At("square",mU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yU=At("trending-up",gU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MP=At("triangle-alert",vU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_U=At("user",wU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],TU=At("wrench",EU);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],m0=At("x",IU),p0="-",SU=t=>{const e=AU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(p0);return a[0]===""&&a.length!==1&&a.shift(),FP(a,e)||bU(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},FP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?FP(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(p0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},XI=/^\[(.+)\]$/,bU=t=>{if(XI.test(t)){const e=XI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},AU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return RU(Object.entries(t.classGroups),n).forEach(([i,o])=>{ow(o,r,i,e)}),r},ow=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ZI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(xU(s)){ow(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ow(o,ZI(e,i),n,r)})})},ZI=(t,e)=>{let n=t;return e.split(p0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},xU=t=>t.isThemeGetter,RU=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,PU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},UP="!",CU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let w=a[v];if(c===0){if(w===s&&(r||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(w==="/"){h=v;continue}}w==="["?c++:w==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(UP),T=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:T,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:o}):o},DU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},kU=t=>({cache:PU(t.cacheSize),parseClassName:CU(t),...SU(t)}),NU=/\s+/,OU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(NU);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let T=!!m,p=r(T?f.substring(0,m):f);if(!p){if(!T){a=c+(a.length>0?" "+a:a);continue}if(p=r(f),!p){a=c+(a.length>0?" "+a:a);continue}T=!1}const v=DU(d).join(":"),w=h?v+UP:v,y=w+p;if(i.includes(y))continue;i.push(y);const E=s(p,T);for(let x=0;x<E.length;++x){const C=E[x];i.push(w+C)}a=c+(a.length>0?" "+a:a)}return a};function LU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jP(e))&&(r&&(r+=" "),r+=n);return r}const jP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jP(t[r]))&&(n&&(n+=" "),n+=e);return n};function VU(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=kU(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=OU(l,n);return s(l,d),d}return function(){return i(LU.apply(null,arguments))}}const Lt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$P=/^\[(?:([a-z-]+):)?(.+)\]$/i,MU=/^\d+\/\d+$/,FU=new Set(["px","full","screen"]),UU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$U=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ci=t=>Zl(t)||FU.has(t)||MU.test(t),Ki=t=>Kc(t,"length",JU),Zl=t=>!!t&&!Number.isNaN(Number(t)),Ey=t=>Kc(t,"number",Zl),Pu=t=>!!t&&Number.isInteger(Number(t)),WU=t=>t.endsWith("%")&&Zl(t.slice(0,-1)),Qe=t=>$P.test(t),Gi=t=>UU.test(t),qU=new Set(["length","size","percentage"]),HU=t=>Kc(t,qU,BP),KU=t=>Kc(t,"position",BP),GU=new Set(["image","url"]),QU=t=>Kc(t,GU,ZU),YU=t=>Kc(t,"",XU),Cu=()=>!0,Kc=(t,e,n)=>{const r=$P.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},JU=t=>jU.test(t)&&!$U.test(t),BP=()=>!1,XU=t=>BU.test(t),ZU=t=>zU.test(t),e4=()=>{const t=Lt("colors"),e=Lt("spacing"),n=Lt("blur"),r=Lt("brightness"),s=Lt("borderColor"),i=Lt("borderRadius"),o=Lt("borderSpacing"),a=Lt("borderWidth"),l=Lt("contrast"),c=Lt("grayscale"),d=Lt("hueRotate"),h=Lt("invert"),f=Lt("gap"),m=Lt("gradientColorStops"),T=Lt("gradientColorStopPositions"),p=Lt("inset"),v=Lt("margin"),w=Lt("opacity"),y=Lt("padding"),E=Lt("saturate"),x=Lt("scale"),C=Lt("sepia"),L=Lt("skew"),S=Lt("space"),b=Lt("translate"),R=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Qe,e],O=()=>[Qe,e],D=()=>["",ci,Ki],j=()=>["auto",Zl,Qe],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ye=()=>["solid","dashed","dotted","double","none"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",Qe],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ae=()=>[Zl,Qe];return{cacheSize:500,separator:":",theme:{colors:[Cu],spacing:[ci,Ki],blur:["none","",Gi,Qe],brightness:Ae(),borderColor:[t],borderRadius:["none","","full",Gi,Qe],borderSpacing:O(),borderWidth:D(),contrast:Ae(),grayscale:z(),hueRotate:Ae(),invert:z(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[WU,Ki],inset:P(),margin:P(),opacity:Ae(),padding:O(),saturate:Ae(),scale:Ae(),sepia:z(),skew:Ae(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Qe]}],container:["container"],columns:[{columns:[Gi]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),Qe]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pu,Qe]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qe]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Pu,Qe]}],"grid-cols":[{"grid-cols":[Cu]}],"col-start-end":[{col:["auto",{span:["full",Pu,Qe]},Qe]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[Cu]}],"row-start-end":[{row:["auto",{span:[Pu,Qe]},Qe]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qe,e]}],"min-w":[{"min-w":[Qe,e,"min","max","fit"]}],"max-w":[{"max-w":[Qe,e,"none","full","min","max","fit","prose",{screen:[Gi]},Gi]}],h:[{h:[Qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Gi,Ki]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ey]}],"font-family":[{font:[Cu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qe]}],"line-clamp":[{"line-clamp":["none",Zl,Ey]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ci,Qe]}],"list-image":[{"list-image":["none",Qe]}],"list-style-type":[{list:["none","disc","decimal",Qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ye(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ci,Ki]}],"underline-offset":[{"underline-offset":["auto",ci,Qe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),KU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",HU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},QU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ye(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ye()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ye()]}],"outline-offset":[{"outline-offset":[ci,Qe]}],"outline-w":[{outline:[ci,Ki]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ci,Ki]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Gi,YU]}],"shadow-color":[{shadow:[Cu]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[..._e(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":_e()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Gi,Qe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qe]}],duration:[{duration:Ae()}],ease:[{ease:["linear","in","out","in-out",Qe]}],delay:[{delay:Ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Pu,Qe]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ci,Ki,Ey]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},t4=VU(e4);function qn(...t){return t4(OP(t))}const n4=AF,zP=A.forwardRef(({className:t,...e},n)=>_.jsx(xP,{ref:n,className:qn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));zP.displayName=xP.displayName;const r4=LP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),WP=A.forwardRef(({className:t,variant:e,...n},r)=>_.jsx(RP,{ref:r,className:qn(r4({variant:e}),t),...n}));WP.displayName=RP.displayName;const qP=A.forwardRef(({className:t,...e},n)=>_.jsx(DP,{ref:n,className:qn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));qP.displayName=DP.displayName;const HP=A.forwardRef(({className:t,...e},n)=>_.jsx(kP,{ref:n,className:qn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:_.jsx(m0,{className:"h-4 w-4"})}));HP.displayName=kP.displayName;const KP=A.forwardRef(({className:t,...e},n)=>_.jsx(PP,{ref:n,className:qn("text-sm font-semibold",t),...e}));KP.displayName=PP.displayName;const GP=A.forwardRef(({className:t,...e},n)=>_.jsx(CP,{ref:n,className:qn("text-sm opacity-90",t),...e}));GP.displayName=CP.displayName;function s4(){const{toasts:t}=a0();return _.jsxs(n4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return _.jsxs(WP,{...i,children:[_.jsxs("div",{className:"grid gap-1",children:[n&&_.jsx(KP,{children:n}),r&&_.jsx(GP,{children:r})]}),s,_.jsx(HP,{})]},e)}),_.jsx(zP,{})]})}var Mm=["light","dark"],g0="(prefers-color-scheme: dark)",i4=typeof window>"u",y0=A.createContext(void 0),o4={setTheme:t=>{},themes:[]},QP=()=>{var t;return(t=A.useContext(y0))!=null?t:o4},a4=t=>A.useContext(y0)?t.children:A.createElement(c4,{...t}),l4=["light","dark"],c4=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=l4,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=A.useState(()=>eS(s,o)),[m,T]=A.useState(()=>eS(s)),p=l?Object.values(l):i,v=A.useCallback(x=>{let C=x;if(!C)return;x==="system"&&n&&(C=tS());let L=l?l[C]:C,S=e?d4():null,b=document.documentElement;if(a==="class"?(b.classList.remove(...p),L&&b.classList.add(L)):L?b.setAttribute(a,L):b.removeAttribute(a),r){let R=Mm.includes(o)?o:null,k=Mm.includes(C)?C:R;b.style.colorScheme=k}S==null||S()},[]),w=A.useCallback(x=>{let C=typeof x=="function"?x(x):x;f(C);try{localStorage.setItem(s,C)}catch{}},[t]),y=A.useCallback(x=>{let C=tS(x);T(C),h==="system"&&n&&!t&&v("system")},[h,t]);A.useEffect(()=>{let x=window.matchMedia(g0);return x.addListener(y),y(x),()=>x.removeListener(y)},[y]),A.useEffect(()=>{let x=C=>{if(C.key!==s)return;let L=C.newValue||o;w(L)};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[w]),A.useEffect(()=>{v(t??h)},[t,h]);let E=A.useMemo(()=>({theme:h,setTheme:w,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:n?[...i,"system"]:i,systemTheme:n?m:void 0}),[h,w,t,m,n,i]);return A.createElement(y0.Provider,{value:E},A.createElement(u4,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:p,nonce:d}),c)},u4=A.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Mm.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(T,p=!1,v=!0)=>{let w=o?o[T]:T,y=p?T+"|| ''":`'${w}'`,E="";return s&&v&&!p&&Mm.includes(T)&&(E+=`d.style.colorScheme = '${T}';`),n==="class"?p||w?E+=`c.add(${y})`:E+="null":w&&(E+=`d[s](n,${y})`),E},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${g0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return A.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),eS=(t,e)=>{if(i4)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},d4=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},tS=t=>(t||(t=window.matchMedia(g0)),t.matches?"dark":"light"),h4=t=>{switch(t){case"success":return p4;case"info":return y4;case"warning":return g4;case"error":return v4;default:return null}},f4=Array(12).fill(0),m4=({visible:t,className:e})=>U.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},U.createElement("div",{className:"sonner-spinner"},f4.map((n,r)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),p4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),g4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),y4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),w4=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),_4=()=>{let[t,e]=U.useState(document.hidden);return U.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},aw=1,E4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:aw++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,a=s.then(async c=>{if(o=["resolve",c],U.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(I4(c)&&!c.ok){i=!1;let d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:d,description:h})}else if(n.success!==void 0){i=!1;let d=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;let d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||aw++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Er=new E4,T4=(t,e)=>{let n=(e==null?void 0:e.id)||aw++;return Er.addToast({title:t,...e,id:n}),n},I4=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",S4=T4,b4=()=>Er.toasts,A4=()=>Er.getActiveToasts(),Jn=Object.assign(S4,{success:Er.success,info:Er.info,warning:Er.warning,error:Er.error,custom:Er.custom,message:Er.message,promise:Er.promise,dismiss:Er.dismiss,loading:Er.loading},{getHistory:b4,getToasts:A4});function x4(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}x4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function df(t){return t.label!==void 0}var R4=3,P4="32px",C4="16px",nS=4e3,D4=356,k4=14,N4=20,O4=200;function hs(...t){return t.filter(Boolean).join(" ")}function L4(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var V4=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:T,interacting:p,setHeights:v,visibleToasts:w,heights:y,index:E,toasts:x,expanded:C,removeToast:L,defaultRichColors:S,closeButton:b,style:R,cancelButtonStyle:k,actionButtonStyle:P,className:O="",descriptionClassName:D="",duration:j,position:oe,gap:ye,loadingIcon:_e,expandByDefault:W,classNames:z,icons:K,closeButtonAriaLabel:Ae="Close toast",pauseWhenPageIsHidden:pe}=t,[V,we]=U.useState(null),[Le,at]=U.useState(null),[be,Fe]=U.useState(!1),[je,qt]=U.useState(!1),[nn,En]=U.useState(!1),[gn,Kn]=U.useState(!1),[Dr,Ve]=U.useState(!1),[Pn,cs]=U.useState(0),[Nt,rn]=U.useState(0),yr=U.useRef(m.duration||j||nS),$i=U.useRef(null),vr=U.useRef(null),ta=E===0,Ns=E+1<=w,Fn=m.type,kr=m.dismissible!==!1,sn=m.className||"",pl=m.descriptionClassName||"",oi=U.useMemo(()=>y.findIndex(Y=>Y.toastId===m.id)||0,[y,m.id]),ai=U.useMemo(()=>{var Y;return(Y=m.closeButton)!=null?Y:b},[m.closeButton,b]),na=U.useMemo(()=>m.duration||j||nS,[m.duration,j]),Zr=U.useRef(0),Nr=U.useRef(0),J=U.useRef(0),$=U.useRef(null),[H,te]=oe.split("-"),se=U.useMemo(()=>y.reduce((Y,le,ue)=>ue>=oi?Y:Y+le.height,0),[y,oi]),ne=_4(),fe=m.invert||f,X=Fn==="loading";Nr.current=U.useMemo(()=>oi*ye+se,[oi,se]),U.useEffect(()=>{yr.current=na},[na]),U.useEffect(()=>{Fe(!0)},[]),U.useEffect(()=>{let Y=vr.current;if(Y){let le=Y.getBoundingClientRect().height;return rn(le),v(ue=>[{toastId:m.id,height:le,position:m.position},...ue]),()=>v(ue=>ue.filter(ce=>ce.toastId!==m.id))}},[v,m.id]),U.useLayoutEffect(()=>{if(!be)return;let Y=vr.current,le=Y.style.height;Y.style.height="auto";let ue=Y.getBoundingClientRect().height;Y.style.height=le,rn(ue),v(ce=>ce.find(ae=>ae.toastId===m.id)?ce.map(ae=>ae.toastId===m.id?{...ae,height:ue}:ae):[{toastId:m.id,height:ue,position:m.position},...ce])},[be,m.title,m.description,v,m.id]);let ge=U.useCallback(()=>{qt(!0),cs(Nr.current),v(Y=>Y.filter(le=>le.toastId!==m.id)),setTimeout(()=>{L(m)},O4)},[m,L,v,Nr]);U.useEffect(()=>{if(m.promise&&Fn==="loading"||m.duration===1/0||m.type==="loading")return;let Y;return C||p||pe&&ne?(()=>{if(J.current<Zr.current){let le=new Date().getTime()-Zr.current;yr.current=yr.current-le}J.current=new Date().getTime()})():yr.current!==1/0&&(Zr.current=new Date().getTime(),Y=setTimeout(()=>{var le;(le=m.onAutoClose)==null||le.call(m,m),ge()},yr.current)),()=>clearTimeout(Y)},[C,p,m,Fn,pe,ne,ge]),U.useEffect(()=>{m.delete&&ge()},[ge,m.delete]);function Pe(){var Y,le,ue;return K!=null&&K.loading?U.createElement("div",{className:hs(z==null?void 0:z.loader,(Y=m==null?void 0:m.classNames)==null?void 0:Y.loader,"sonner-loader"),"data-visible":Fn==="loading"},K.loading):_e?U.createElement("div",{className:hs(z==null?void 0:z.loader,(le=m==null?void 0:m.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":Fn==="loading"},_e):U.createElement(m4,{className:hs(z==null?void 0:z.loader,(ue=m==null?void 0:m.classNames)==null?void 0:ue.loader),visible:Fn==="loading"})}return U.createElement("li",{tabIndex:0,ref:vr,className:hs(O,sn,z==null?void 0:z.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,z==null?void 0:z.default,z==null?void 0:z[Fn],(n=m==null?void 0:m.classNames)==null?void 0:n[Fn]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||T),"data-mounted":be,"data-promise":!!m.promise,"data-swiped":Dr,"data-removed":je,"data-visible":Ns,"data-y-position":H,"data-x-position":te,"data-index":E,"data-front":ta,"data-swiping":nn,"data-dismissible":kr,"data-type":Fn,"data-invert":fe,"data-swipe-out":gn,"data-swipe-direction":Le,"data-expanded":!!(C||W&&be),style:{"--index":E,"--toasts-before":E,"--z-index":x.length-E,"--offset":`${je?Pn:Nr.current}px`,"--initial-height":W?"auto":`${Nt}px`,...R,...m.style},onDragEnd:()=>{En(!1),we(null),$.current=null},onPointerDown:Y=>{X||!kr||($i.current=new Date,cs(Nr.current),Y.target.setPointerCapture(Y.pointerId),Y.target.tagName!=="BUTTON"&&(En(!0),$.current={x:Y.clientX,y:Y.clientY}))},onPointerUp:()=>{var Y,le,ue,ce;if(gn||!kr)return;$.current=null;let ae=Number(((Y=vr.current)==null?void 0:Y.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ce=Number(((le=vr.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),st=new Date().getTime()-((ue=$i.current)==null?void 0:ue.getTime()),It=V==="x"?ae:Ce,St=Math.abs(It)/st;if(Math.abs(It)>=N4||St>.11){cs(Nr.current),(ce=m.onDismiss)==null||ce.call(m,m),at(V==="x"?ae>0?"right":"left":Ce>0?"down":"up"),ge(),Kn(!0),Ve(!1);return}En(!1),we(null)},onPointerMove:Y=>{var le,ue,ce,ae;if(!$.current||!kr||((le=window.getSelection())==null?void 0:le.toString().length)>0)return;let Ce=Y.clientY-$.current.y,st=Y.clientX-$.current.x,It=(ue=t.swipeDirections)!=null?ue:L4(oe);!V&&(Math.abs(st)>1||Math.abs(Ce)>1)&&we(Math.abs(st)>Math.abs(Ce)?"x":"y");let St={x:0,y:0};V==="y"?(It.includes("top")||It.includes("bottom"))&&(It.includes("top")&&Ce<0||It.includes("bottom")&&Ce>0)&&(St.y=Ce):V==="x"&&(It.includes("left")||It.includes("right"))&&(It.includes("left")&&st<0||It.includes("right")&&st>0)&&(St.x=st),(Math.abs(St.x)>0||Math.abs(St.y)>0)&&Ve(!0),(ce=vr.current)==null||ce.style.setProperty("--swipe-amount-x",`${St.x}px`),(ae=vr.current)==null||ae.style.setProperty("--swipe-amount-y",`${St.y}px`)}},ai&&!m.jsx?U.createElement("button",{"aria-label":Ae,"data-disabled":X,"data-close-button":!0,onClick:X||!kr?()=>{}:()=>{var Y;ge(),(Y=m.onDismiss)==null||Y.call(m,m)},className:hs(z==null?void 0:z.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=K==null?void 0:K.close)!=null?i:w4):null,m.jsx||A.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:U.createElement(U.Fragment,null,Fn||m.icon||m.promise?U.createElement("div",{"data-icon":"",className:hs(z==null?void 0:z.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Pe():null,m.type!=="loading"?m.icon||(K==null?void 0:K[Fn])||h4(Fn):null):null,U.createElement("div",{"data-content":"",className:hs(z==null?void 0:z.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},U.createElement("div",{"data-title":"",className:hs(z==null?void 0:z.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?U.createElement("div",{"data-description":"",className:hs(D,pl,z==null?void 0:z.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),A.isValidElement(m.cancel)?m.cancel:m.cancel&&df(m.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||k,onClick:Y=>{var le,ue;df(m.cancel)&&kr&&((ue=(le=m.cancel).onClick)==null||ue.call(le,Y),ge())},className:hs(z==null?void 0:z.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,A.isValidElement(m.action)?m.action:m.action&&df(m.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:Y=>{var le,ue;df(m.action)&&((ue=(le=m.action).onClick)==null||ue.call(le,Y),!Y.defaultPrevented&&ge())},className:hs(z==null?void 0:z.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function rS(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function M4(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?C4:P4;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var F4=A.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:T=R4,toastOptions:p,dir:v=rS(),gap:w=k4,loadingIcon:y,icons:E,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:C}=t,[L,S]=U.useState([]),b=U.useMemo(()=>Array.from(new Set([r].concat(L.filter(pe=>pe.position).map(pe=>pe.position)))),[L,r]),[R,k]=U.useState([]),[P,O]=U.useState(!1),[D,j]=U.useState(!1),[oe,ye]=U.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),_e=U.useRef(null),W=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=U.useRef(null),K=U.useRef(!1),Ae=U.useCallback(pe=>{S(V=>{var we;return(we=V.find(Le=>Le.id===pe.id))!=null&&we.delete||Er.dismiss(pe.id),V.filter(({id:Le})=>Le!==pe.id)})},[]);return U.useEffect(()=>Er.subscribe(pe=>{if(pe.dismiss){S(V=>V.map(we=>we.id===pe.id?{...we,delete:!0}:we));return}setTimeout(()=>{oP.flushSync(()=>{S(V=>{let we=V.findIndex(Le=>Le.id===pe.id);return we!==-1?[...V.slice(0,we),{...V[we],...pe},...V.slice(we+1)]:[pe,...V]})})})}),[]),U.useEffect(()=>{if(d!=="system"){ye(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ye("dark"):ye("light")),typeof window>"u")return;let pe=window.matchMedia("(prefers-color-scheme: dark)");try{pe.addEventListener("change",({matches:V})=>{ye(V?"dark":"light")})}catch{pe.addListener(({matches:we})=>{try{ye(we?"dark":"light")}catch(Le){console.error(Le)}})}},[d]),U.useEffect(()=>{L.length<=1&&O(!1)},[L]),U.useEffect(()=>{let pe=V=>{var we,Le;s.every(at=>V[at]||V.code===at)&&(O(!0),(we=_e.current)==null||we.focus()),V.code==="Escape"&&(document.activeElement===_e.current||(Le=_e.current)!=null&&Le.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[s]),U.useEffect(()=>{if(_e.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,K.current=!1)}},[_e.current]),U.createElement("section",{ref:e,"aria-label":`${x} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},b.map((pe,V)=>{var we;let[Le,at]=pe.split("-");return L.length?U.createElement("ol",{key:pe,dir:v==="auto"?rS():v,tabIndex:-1,ref:_e,className:a,"data-sonner-toaster":!0,"data-theme":oe,"data-y-position":Le,"data-lifted":P&&L.length>1&&!i,"data-x-position":at,style:{"--front-toast-height":`${((we=R[0])==null?void 0:we.height)||0}px`,"--width":`${D4}px`,"--gap":`${w}px`,...m,...M4(l,c)},onBlur:be=>{K.current&&!be.currentTarget.contains(be.relatedTarget)&&(K.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||K.current||(K.current=!0,z.current=be.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{D||O(!1)},onDragEnd:()=>O(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},L.filter(be=>!be.position&&V===0||be.position===pe).map((be,Fe)=>{var je,qt;return U.createElement(V4,{key:be.id,icons:E,index:Fe,toast:be,defaultRichColors:h,duration:(je=p==null?void 0:p.duration)!=null?je:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:T,closeButton:(qt=p==null?void 0:p.closeButton)!=null?qt:o,interacting:D,position:pe,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:Ae,toasts:L.filter(nn=>nn.position==be.position),heights:R.filter(nn=>nn.position==be.position),setHeights:k,expandByDefault:i,gap:w,loadingIcon:y,expanded:P,pauseWhenPageIsHidden:C,swipeDirections:t.swipeDirections})})):null}))});const U4=({...t})=>{const{theme:e="system"}=QP();return _.jsx(F4,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var j4=g_[" useId ".trim().toString()]||(()=>{}),$4=0;function Ty(t){const[e,n]=A.useState(j4());return Ri(()=>{n(r=>r??String($4++))},[t]),t||(e?`radix-${e}`:"")}const B4=["top","right","bottom","left"],Mo=Math.min,Fr=Math.max,Fm=Math.round,hf=Math.floor,Ys=t=>({x:t,y:t}),z4={left:"right",right:"left",bottom:"top",top:"bottom"},W4={start:"end",end:"start"};function lw(t,e,n){return Fr(t,Mo(e,n))}function Pi(t,e){return typeof t=="function"?t(e):t}function Ci(t){return t.split("-")[0]}function Gc(t){return t.split("-")[1]}function v0(t){return t==="x"?"y":"x"}function w0(t){return t==="y"?"height":"width"}const q4=new Set(["top","bottom"]);function Ws(t){return q4.has(Ci(t))?"y":"x"}function _0(t){return v0(Ws(t))}function H4(t,e,n){n===void 0&&(n=!1);const r=Gc(t),s=_0(t),i=w0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Um(o)),[o,Um(o)]}function K4(t){const e=Um(t);return[cw(t),e,cw(e)]}function cw(t){return t.replace(/start|end/g,e=>W4[e])}const sS=["left","right"],iS=["right","left"],G4=["top","bottom"],Q4=["bottom","top"];function Y4(t,e,n){switch(t){case"top":case"bottom":return n?e?iS:sS:e?sS:iS;case"left":case"right":return e?G4:Q4;default:return[]}}function J4(t,e,n,r){const s=Gc(t);let i=Y4(Ci(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(cw)))),i}function Um(t){return t.replace(/left|right|bottom|top/g,e=>z4[e])}function X4(t){return{top:0,right:0,bottom:0,left:0,...t}}function YP(t){return typeof t!="number"?X4(t):{top:t,right:t,bottom:t,left:t}}function jm(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function oS(t,e,n){let{reference:r,floating:s}=t;const i=Ws(e),o=_0(e),a=w0(o),l=Ci(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Gc(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const Z4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=oS(c,r,l),f=r,m={},T=0;for(let p=0;p<a.length;p++){const{name:v,fn:w}=a[p],{x:y,y:E,data:x,reset:C}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=y??d,h=E??h,m={...m,[v]:{...m[v],...x}},C&&T<=50&&(T++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(c=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):C.rects),{x:d,y:h}=oS(c,f,l)),p=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Ud(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Pi(e,t),T=YP(m),v=a[f?h==="floating"?"reference":"floating":h],w=jm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},C=jm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:E,strategy:l}):y);return{top:(w.top-C.top+T.top)/x.y,bottom:(C.bottom-w.bottom+T.bottom)/x.y,left:(w.left-C.left+T.left)/x.x,right:(C.right-w.right+T.right)/x.x}}const ej=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Pi(t,e)||{};if(c==null)return{};const h=YP(d),f={x:n,y:r},m=_0(s),T=w0(m),p=await o.getDimensions(c),v=m==="y",w=v?"top":"left",y=v?"bottom":"right",E=v?"clientHeight":"clientWidth",x=i.reference[T]+i.reference[m]-f[m]-i.floating[T],C=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let S=L?L[E]:0;(!S||!await(o.isElement==null?void 0:o.isElement(L)))&&(S=a.floating[E]||i.floating[T]);const b=x/2-C/2,R=S/2-p[T]/2-1,k=Mo(h[w],R),P=Mo(h[y],R),O=k,D=S-p[T]-P,j=S/2-p[T]/2+b,oe=lw(O,j,D),ye=!l.arrow&&Gc(s)!=null&&j!==oe&&i.reference[T]/2-(j<O?k:P)-p[T]/2<0,_e=ye?j<O?j-O:j-D:0;return{[m]:f[m]+_e,data:{[m]:oe,centerOffset:j-oe-_e,...ye&&{alignmentOffset:_e}},reset:ye}}}),tj=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:p=!0,...v}=Pi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Ci(s),y=Ws(a),E=Ci(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=f||(E||!p?[Um(a)]:K4(a)),L=T!=="none";!f&&L&&C.push(...J4(a,p,T,x));const S=[a,...C],b=await Ud(e,v),R=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&R.push(b[w]),h){const j=H4(s,o,x);R.push(b[j[0]],b[j[1]])}if(k=[...k,{placement:s,overflows:R}],!R.every(j=>j<=0)){var P,O;const j=(((P=i.flip)==null?void 0:P.index)||0)+1,oe=S[j];if(oe&&(!(h==="alignment"?y!==Ws(oe):!1)||k.every(W=>Ws(W.placement)===y?W.overflows[0]>0:!0)))return{data:{index:j,overflows:k},reset:{placement:oe}};let ye=(O=k.filter(_e=>_e.overflows[0]<=0).sort((_e,W)=>_e.overflows[1]-W.overflows[1])[0])==null?void 0:O.placement;if(!ye)switch(m){case"bestFit":{var D;const _e=(D=k.filter(W=>{if(L){const z=Ws(W.placement);return z===y||z==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(z=>z>0).reduce((z,K)=>z+K,0)]).sort((W,z)=>W[1]-z[1])[0])==null?void 0:D[0];_e&&(ye=_e);break}case"initialPlacement":ye=a;break}if(s!==ye)return{reset:{placement:ye}}}return{}}}};function aS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function lS(t){return B4.some(e=>t[e]>=0)}const nj=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Pi(t,e);switch(r){case"referenceHidden":{const i=await Ud(e,{...s,elementContext:"reference"}),o=aS(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:lS(o)}}}case"escaped":{const i=await Ud(e,{...s,altBoundary:!0}),o=aS(i,n.floating);return{data:{escapedOffsets:o,escaped:lS(o)}}}default:return{}}}}},JP=new Set(["left","top"]);async function rj(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ci(n),a=Gc(n),l=Ws(n)==="y",c=JP.has(o)?-1:1,d=i&&l?-1:1,h=Pi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:T}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof T=="number"&&(m=a==="end"?T*-1:T),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const sj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await rj(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},ij=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:w,y}=v;return{x:w,y}}},...l}=Pi(t,e),c={x:n,y:r},d=await Ud(e,l),h=Ws(Ci(s)),f=v0(h);let m=c[f],T=c[h];if(i){const v=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=m+d[v],E=m-d[w];m=lw(y,m,E)}if(o){const v=h==="y"?"top":"left",w=h==="y"?"bottom":"right",y=T+d[v],E=T-d[w];T=lw(y,T,E)}const p=a.fn({...e,[f]:m,[h]:T});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:i,[h]:o}}}}}},oj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Pi(t,e),d={x:n,y:r},h=Ws(s),f=v0(h);let m=d[f],T=d[h];const p=Pi(a,e),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const E=f==="y"?"height":"width",x=i.reference[f]-i.floating[E]+v.mainAxis,C=i.reference[f]+i.reference[E]-v.mainAxis;m<x?m=x:m>C&&(m=C)}if(c){var w,y;const E=f==="y"?"width":"height",x=JP.has(Ci(s)),C=i.reference[h]-i.floating[E]+(x&&((w=o.offset)==null?void 0:w[h])||0)+(x?0:v.crossAxis),L=i.reference[h]+i.reference[E]+(x?0:((y=o.offset)==null?void 0:y[h])||0)-(x?v.crossAxis:0);T<C?T=C:T>L&&(T=L)}return{[f]:m,[h]:T}}}},aj=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Pi(t,e),d=await Ud(e,c),h=Ci(s),f=Gc(s),m=Ws(s)==="y",{width:T,height:p}=i.floating;let v,w;h==="top"||h==="bottom"?(v=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,v=f==="end"?"top":"bottom");const y=p-d.top-d.bottom,E=T-d.left-d.right,x=Mo(p-d[v],y),C=Mo(T-d[w],E),L=!e.middlewareData.shift;let S=x,b=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(b=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=y),L&&!f){const k=Fr(d.left,0),P=Fr(d.right,0),O=Fr(d.top,0),D=Fr(d.bottom,0);m?b=T-2*(k!==0||P!==0?k+P:Fr(d.left,d.right)):S=p-2*(O!==0||D!==0?O+D:Fr(d.top,d.bottom))}await l({...e,availableWidth:b,availableHeight:S});const R=await o.getDimensions(a.floating);return T!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function Gp(){return typeof window<"u"}function Qc(t){return XP(t)?(t.nodeName||"").toLowerCase():"#document"}function Hr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ni(t){var e;return(e=(XP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XP(t){return Gp()?t instanceof Node||t instanceof Hr(t).Node:!1}function As(t){return Gp()?t instanceof Element||t instanceof Hr(t).Element:!1}function Zs(t){return Gp()?t instanceof HTMLElement||t instanceof Hr(t).HTMLElement:!1}function cS(t){return!Gp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Hr(t).ShadowRoot}const lj=new Set(["inline","contents"]);function wh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=xs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!lj.has(s)}const cj=new Set(["table","td","th"]);function uj(t){return cj.has(Qc(t))}const dj=[":popover-open",":modal"];function Qp(t){return dj.some(e=>{try{return t.matches(e)}catch{return!1}})}const hj=["transform","translate","scale","rotate","perspective"],fj=["transform","translate","scale","rotate","perspective","filter"],mj=["paint","layout","strict","content"];function E0(t){const e=T0(),n=As(t)?xs(t):t;return hj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||fj.some(r=>(n.willChange||"").includes(r))||mj.some(r=>(n.contain||"").includes(r))}function pj(t){let e=Fo(t);for(;Zs(e)&&!_c(e);){if(E0(e))return e;if(Qp(e))return null;e=Fo(e)}return null}function T0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gj=new Set(["html","body","#document"]);function _c(t){return gj.has(Qc(t))}function xs(t){return Hr(t).getComputedStyle(t)}function Yp(t){return As(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Fo(t){if(Qc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||cS(t)&&t.host||ni(t);return cS(e)?e.host:e}function ZP(t){const e=Fo(t);return _c(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zs(e)&&wh(e)?e:ZP(e)}function jd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=ZP(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Hr(s);if(i){const a=uw(o);return e.concat(o,o.visualViewport||[],wh(s)?s:[],a&&n?jd(a):[])}return e.concat(s,jd(s,[],n))}function uw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function eC(t){const e=xs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Zs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Fm(n)!==i||Fm(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function I0(t){return As(t)?t:t.contextElement}function ec(t){const e=I0(t);if(!Zs(e))return Ys(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=eC(e);let o=(i?Fm(n.width):n.width)/r,a=(i?Fm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const yj=Ys(0);function tC(t){const e=Hr(t);return!T0()||!e.visualViewport?yj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Hr(t)?!1:e}function Xa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=I0(t);let o=Ys(1);e&&(r?As(r)&&(o=ec(r)):o=ec(t));const a=vj(i,n,r)?tC(i):Ys(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Hr(i),m=r&&As(r)?Hr(r):r;let T=f,p=uw(T);for(;p&&r&&m!==T;){const v=ec(p),w=p.getBoundingClientRect(),y=xs(p),E=w.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,x=w.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=E,c+=x,T=Hr(p),p=uw(T)}}return jm({width:d,height:h,x:l,y:c})}function Jp(t,e){const n=Yp(t).scrollLeft;return e?e.left+n:Xa(ni(t)).left+n}function nC(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Jp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function wj(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ni(r),a=e?Qp(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Ys(1);const d=Ys(0),h=Zs(r);if((h||!h&&!i)&&((Qc(r)!=="body"||wh(o))&&(l=Yp(r)),Zs(r))){const m=Xa(r);c=ec(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?nC(o,l):Ys(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function _j(t){return Array.from(t.getClientRects())}function Ej(t){const e=ni(t),n=Yp(t),r=t.ownerDocument.body,s=Fr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Fr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Jp(t);const a=-n.scrollTop;return xs(r).direction==="rtl"&&(o+=Fr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const uS=25;function Tj(t,e){const n=Hr(t),r=ni(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=T0();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=Jp(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,T=Math.abs(r.clientWidth-h.clientWidth-m);T<=uS&&(i-=T)}else c<=uS&&(i+=c);return{width:i,height:o,x:a,y:l}}const Ij=new Set(["absolute","fixed"]);function Sj(t,e){const n=Xa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Zs(t)?ec(t):Ys(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function dS(t,e,n){let r;if(e==="viewport")r=Tj(t,n);else if(e==="document")r=Ej(ni(t));else if(As(e))r=Sj(e,n);else{const s=tC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return jm(r)}function rC(t,e){const n=Fo(t);return n===e||!As(n)||_c(n)?!1:xs(n).position==="fixed"||rC(n,e)}function bj(t,e){const n=e.get(t);if(n)return n;let r=jd(t,[],!1).filter(a=>As(a)&&Qc(a)!=="body"),s=null;const i=xs(t).position==="fixed";let o=i?Fo(t):t;for(;As(o)&&!_c(o);){const a=xs(o),l=E0(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&Ij.has(s.position)||wh(o)&&!l&&rC(t,o))?r=r.filter(d=>d!==o):s=a,o=Fo(o)}return e.set(t,r),r}function Aj(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Qp(e)?[]:bj(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=dS(e,d,s);return c.top=Fr(h.top,c.top),c.right=Mo(h.right,c.right),c.bottom=Mo(h.bottom,c.bottom),c.left=Fr(h.left,c.left),c},dS(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function xj(t){const{width:e,height:n}=eC(t);return{width:e,height:n}}function Rj(t,e,n){const r=Zs(e),s=ni(e),i=n==="fixed",o=Xa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ys(0);function c(){l.x=Jp(s)}if(r||!r&&!i)if((Qc(e)!=="body"||wh(s))&&(a=Yp(e)),r){const m=Xa(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?nC(s,a):Ys(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Iy(t){return xs(t).position==="static"}function hS(t,e){if(!Zs(t)||xs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ni(t)===n&&(n=n.ownerDocument.body),n}function sC(t,e){const n=Hr(t);if(Qp(t))return n;if(!Zs(t)){let s=Fo(t);for(;s&&!_c(s);){if(As(s)&&!Iy(s))return s;s=Fo(s)}return n}let r=hS(t,e);for(;r&&uj(r)&&Iy(r);)r=hS(r,e);return r&&_c(r)&&Iy(r)&&!E0(r)?n:r||pj(t)||n}const Pj=async function(t){const e=this.getOffsetParent||sC,n=this.getDimensions,r=await n(t.floating);return{reference:Rj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Cj(t){return xs(t).direction==="rtl"}const Dj={convertOffsetParentRelativeRectToViewportRelativeRect:wj,getDocumentElement:ni,getClippingRect:Aj,getOffsetParent:sC,getElementRects:Pj,getClientRects:_j,getDimensions:xj,getScale:ec,isElement:As,isRTL:Cj};function iC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function kj(t,e){let n=null,r;const s=ni(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const T=hf(h),p=hf(s.clientWidth-(d+f)),v=hf(s.clientHeight-(h+m)),w=hf(d),E={rootMargin:-T+"px "+-p+"px "+-v+"px "+-w+"px",threshold:Fr(0,Mo(1,l))||1};let x=!0;function C(L){const S=L[0].intersectionRatio;if(S!==l){if(!x)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!iC(c,t.getBoundingClientRect())&&o(),x=!1}try{n=new IntersectionObserver(C,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,E)}n.observe(t)}return o(!0),i}function Nj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=I0(t),d=s||i?[...c?jd(c):[],...jd(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=c&&a?kj(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[y]=w;y&&y.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let T,p=l?Xa(t):null;l&&v();function v(){const w=Xa(t);p&&!iC(p,w)&&n(),p=w,T=requestAnimationFrame(v)}return n(),()=>{var w;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(T)}}const Oj=sj,Lj=ij,Vj=tj,Mj=aj,Fj=nj,fS=ej,Uj=oj,jj=(t,e,n)=>{const r=new Map,s={platform:Dj,...n},i={...s.platform,_c:r};return Z4(t,e,{...s,platform:i})};var $j=typeof document<"u",Bj=function(){},Hf=$j?A.useLayoutEffect:Bj;function $m(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!$m(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!$m(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function oC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mS(t,e){const n=oC(t);return Math.round(e*n)/n}function Sy(t){const e=A.useRef(t);return Hf(()=>{e.current=t}),e}function zj(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=A.useState(r);$m(f,r)||m(r);const[T,p]=A.useState(null),[v,w]=A.useState(null),y=A.useCallback(W=>{W!==L.current&&(L.current=W,p(W))},[]),E=A.useCallback(W=>{W!==S.current&&(S.current=W,w(W))},[]),x=i||T,C=o||v,L=A.useRef(null),S=A.useRef(null),b=A.useRef(d),R=l!=null,k=Sy(l),P=Sy(s),O=Sy(c),D=A.useCallback(()=>{if(!L.current||!S.current)return;const W={placement:e,strategy:n,middleware:f};P.current&&(W.platform=P.current),jj(L.current,S.current,W).then(z=>{const K={...z,isPositioned:O.current!==!1};j.current&&!$m(b.current,K)&&(b.current=K,yh.flushSync(()=>{h(K)}))})},[f,e,n,P,O]);Hf(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[c]);const j=A.useRef(!1);Hf(()=>(j.current=!0,()=>{j.current=!1}),[]),Hf(()=>{if(x&&(L.current=x),C&&(S.current=C),x&&C){if(k.current)return k.current(x,C,D);D()}},[x,C,D,k,R]);const oe=A.useMemo(()=>({reference:L,floating:S,setReference:y,setFloating:E}),[y,E]),ye=A.useMemo(()=>({reference:x,floating:C}),[x,C]),_e=A.useMemo(()=>{const W={position:n,left:0,top:0};if(!ye.floating)return W;const z=mS(ye.floating,d.x),K=mS(ye.floating,d.y);return a?{...W,transform:"translate("+z+"px, "+K+"px)",...oC(ye.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:K}},[n,a,ye.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:D,refs:oe,elements:ye,floatingStyles:_e}),[d,D,oe,ye,_e])}const Wj=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?fS({element:r.current,padding:s}).fn(n):{}:r?fS({element:r,padding:s}).fn(n):{}}}},qj=(t,e)=>({...Oj(t),options:[t,e]}),Hj=(t,e)=>({...Lj(t),options:[t,e]}),Kj=(t,e)=>({...Uj(t),options:[t,e]}),Gj=(t,e)=>({...Vj(t),options:[t,e]}),Qj=(t,e)=>({...Mj(t),options:[t,e]}),Yj=(t,e)=>({...Fj(t),options:[t,e]}),Jj=(t,e)=>({...Wj(t),options:[t,e]});var Xj="Arrow",aC=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return _.jsx(en.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});aC.displayName=Xj;var Zj=aC;function lC(t){const[e,n]=A.useState(void 0);return Ri(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var S0="Popper",[cC,uC]=Hc(S0),[e3,dC]=cC(S0),hC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=A.useState(null);return _.jsx(e3,{scope:e,anchor:r,onAnchorChange:s,children:n})};hC.displayName=S0;var fC="PopperAnchor",mC=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=dC(fC,n),o=A.useRef(null),a=Wn(e,o),l=A.useRef(null);return A.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:_.jsx(en.div,{...s,ref:a})});mC.displayName=fC;var b0="PopperContent",[t3,n3]=cC(b0),pC=A.forwardRef((t,e)=>{var be,Fe,je,qt,nn,En;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:T,...p}=t,v=dC(b0,n),[w,y]=A.useState(null),E=Wn(e,gn=>y(gn)),[x,C]=A.useState(null),L=lC(x),S=(L==null?void 0:L.width)??0,b=(L==null?void 0:L.height)??0,R=r+(i!=="center"?"-"+i:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(c)?c:[c],O=P.length>0,D={padding:k,boundary:P.filter(s3),altBoundary:O},{refs:j,floatingStyles:oe,placement:ye,isPositioned:_e,middlewareData:W}=zj({strategy:"fixed",placement:R,whileElementsMounted:(...gn)=>Nj(...gn,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[qj({mainAxis:s+b,alignmentAxis:o}),l&&Hj({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Kj():void 0,...D}),l&&Gj({...D}),Qj({...D,apply:({elements:gn,rects:Kn,availableWidth:Dr,availableHeight:Ve})=>{const{width:Pn,height:cs}=Kn.reference,Nt=gn.floating.style;Nt.setProperty("--radix-popper-available-width",`${Dr}px`),Nt.setProperty("--radix-popper-available-height",`${Ve}px`),Nt.setProperty("--radix-popper-anchor-width",`${Pn}px`),Nt.setProperty("--radix-popper-anchor-height",`${cs}px`)}}),x&&Jj({element:x,padding:a}),i3({arrowWidth:S,arrowHeight:b}),f&&Yj({strategy:"referenceHidden",...D})]}),[z,K]=vC(ye),Ae=Xs(T);Ri(()=>{_e&&(Ae==null||Ae())},[_e,Ae]);const pe=(be=W.arrow)==null?void 0:be.x,V=(Fe=W.arrow)==null?void 0:Fe.y,we=((je=W.arrow)==null?void 0:je.centerOffset)!==0,[Le,at]=A.useState();return Ri(()=>{w&&at(window.getComputedStyle(w).zIndex)},[w]),_.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:_e?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Le,"--radix-popper-transform-origin":[(qt=W.transformOrigin)==null?void 0:qt.x,(nn=W.transformOrigin)==null?void 0:nn.y].join(" "),...((En=W.hide)==null?void 0:En.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:_.jsx(t3,{scope:n,placedSide:z,onArrowChange:C,arrowX:pe,arrowY:V,shouldHideArrow:we,children:_.jsx(en.div,{"data-side":z,"data-align":K,...p,ref:E,style:{...p.style,animation:_e?void 0:"none"}})})})});pC.displayName=b0;var gC="PopperArrow",r3={top:"bottom",right:"left",bottom:"top",left:"right"},yC=A.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=n3(gC,r),o=r3[i.placedSide];return _.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:_.jsx(Zj,{...s,ref:n,style:{...s.style,display:"block"}})})});yC.displayName=gC;function s3(t){return t!==null}var i3=t=>({name:"transformOrigin",options:t,fn(e){var v,w,y;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=vC(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,m=(((y=s.arrow)==null?void 0:y.y)??0)+l/2;let T="",p="";return c==="bottom"?(T=o?h:`${f}px`,p=`${-l}px`):c==="top"?(T=o?h:`${f}px`,p=`${r.floating.height+l}px`):c==="right"?(T=`${-l}px`,p=o?h:`${m}px`):c==="left"&&(T=`${r.floating.width+l}px`,p=o?h:`${m}px`),{data:{x:T,y:p}}}});function vC(t){const[e,n="center"]=t.split("-");return[e,n]}var SG=hC,o3=mC,a3=pC,l3=yC,[Xp]=Hc("Tooltip",[uC]),A0=uC(),wC="TooltipProvider",c3=700,pS="tooltip.open",[u3,_C]=Xp(wC),EC=t=>{const{__scopeTooltip:e,delayDuration:n=c3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),_.jsx(u3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:i})};EC.displayName=wC;var TC="Tooltip",[bG,Zp]=Xp(TC),dw="TooltipTrigger",d3=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Zp(dw,n),i=_C(dw,n),o=A0(n),a=A.useRef(null),l=Wn(e,a,s.onTriggerChange),c=A.useRef(!1),d=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),_.jsx(o3,{asChild:!0,...o,children:_.jsx(en.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ct(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ct(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ct(t.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ct(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ct(t.onBlur,s.onClose),onClick:Ct(t.onClick,s.onClose)})})});d3.displayName=dw;var h3="TooltipPortal",[AG,f3]=Xp(h3,{forceMount:void 0}),Ec="TooltipContent",IC=A.forwardRef((t,e)=>{const n=f3(Ec,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Zp(Ec,t.__scopeTooltip);return _.jsx(dl,{present:r||o.open,children:o.disableHoverableContent?_.jsx(SC,{side:s,...i,ref:e}):_.jsx(m3,{side:s,...i,ref:e})})}),m3=A.forwardRef((t,e)=>{const n=Zp(Ec,t.__scopeTooltip),r=_C(Ec,t.__scopeTooltip),s=A.useRef(null),i=Wn(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=A.useCallback(()=>{a(null),h(!1)},[h]),m=A.useCallback((T,p)=>{const v=T.currentTarget,w={x:T.clientX,y:T.clientY},y=w3(w,v.getBoundingClientRect()),E=_3(w,y),x=E3(p.getBoundingClientRect()),C=I3([...E,...x]);a(C),h(!0)},[h]);return A.useEffect(()=>()=>f(),[f]),A.useEffect(()=>{if(l&&d){const T=v=>m(v,d),p=v=>m(v,l);return l.addEventListener("pointerleave",T),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",T),d.removeEventListener("pointerleave",p)}}},[l,d,m,f]),A.useEffect(()=>{if(o){const T=p=>{const v=p.target,w={x:p.clientX,y:p.clientY},y=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),E=!T3(w,o);y?f():E&&(f(),c())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[l,d,o,c,f]),_.jsx(SC,{...t,ref:i})}),[p3,g3]=Xp(TC,{isInside:!1}),y3=FM("TooltipContent"),SC=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Zp(Ec,n),c=A0(n),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener(pS,d),()=>document.removeEventListener(pS,d)),[d]),A.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),_.jsx(qp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:_.jsxs(a3,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[_.jsx(y3,{children:r}),_.jsx(p3,{scope:n,isInside:!0,children:_.jsx(lF,{id:l.contentId,role:"tooltip",children:s||r})})]})})});IC.displayName=Ec;var bC="TooltipArrow",v3=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=A0(n);return g3(bC,n).isInside?null:_.jsx(l3,{...s,...r,ref:e})});v3.displayName=bC;function w3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function _3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function E3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function T3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(s=!s)}return s}function I3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),S3(e)}function S3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var b3=EC,AC=IC;const A3=b3,x3=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>_.jsx(AC,{ref:r,sideOffset:e,className:qn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));x3.displayName=AC.displayName;var eg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},R3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},oo,d_,Ax,P3=(Ax=class{constructor(){it(this,oo,R3);it(this,d_,!1)}setTimeoutProvider(t){ze(this,oo,t)}setTimeout(t,e){return Q(this,oo).setTimeout(t,e)}clearTimeout(t){Q(this,oo).clearTimeout(t)}setInterval(t,e){return Q(this,oo).setInterval(t,e)}clearInterval(t){Q(this,oo).clearInterval(t)}},oo=new WeakMap,d_=new WeakMap,Ax),Bm=new P3;function C3(t){setTimeout(t,0)}var tg=typeof window>"u"||"Deno"in globalThis;function dr(){}function D3(t,e){return typeof t=="function"?t(e):t}function k3(t){return typeof t=="number"&&t>=0&&t!==1/0}function N3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function hw(t,e){return typeof t=="function"?t(e):t}function O3(t,e){return typeof t=="function"?t(e):t}function gS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==x0(o,e.options))return!1}else if(!Bd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function yS(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if($d(e.options.mutationKey)!==$d(i))return!1}else if(!Bd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function x0(t,e){return((e==null?void 0:e.queryKeyHashFn)||$d)(t)}function $d(t){return JSON.stringify(t,(e,n)=>fw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Bd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Bd(t[n],e[n])):!1}var L3=Object.prototype.hasOwnProperty;function xC(t,e){if(t===e)return t;const n=vS(t)&&vS(e);if(!n&&!(fw(t)&&fw(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c],h=t[d],f=e[d];if(h===f){a[d]=h,(n?c<s:L3.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const m=xC(h,f);a[d]=m,m===h&&l++}return s===o&&l===s?t:a}function xG(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function vS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function fw(t){if(!wS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!wS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wS(t){return Object.prototype.toString.call(t)==="[object Object]"}function V3(t){return new Promise(e=>{Bm.setTimeout(e,t)})}function M3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?xC(t,e):e}function F3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function U3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var R0=Symbol();function RC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===R0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function RG(t,e){return typeof t=="function"?t(...e):!!t}var La,ao,ic,xx,j3=(xx=class extends eg{constructor(){super();it(this,La);it(this,ao);it(this,ic);ze(this,ic,e=>{if(!tg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,ao)||this.setEventListener(Q(this,ic))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,ao))==null||e.call(this),ze(this,ao,void 0))}setEventListener(e){var n;ze(this,ic,e),(n=Q(this,ao))==null||n.call(this),ze(this,ao,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,La)!==e&&(ze(this,La,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,La)=="boolean"?Q(this,La):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},La=new WeakMap,ao=new WeakMap,ic=new WeakMap,xx),PC=new j3;function $3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function B3(t){var n;let e;if((n=t.then(r=>(e=r,r),dr))==null||n.catch(dr),e!==void 0)return{data:e}}function CC(t){return t}function z3(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function W3(t,e,n){const r=()=>{var i;const s=(i=t.promise)==null?void 0:i.then(e).catch(o=>n(o)?Promise.reject(new Error("redacted")):Promise.reject(o));return s==null||s.catch(dr),s};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function q3(t){return t.state.isPaused}function H3(t){return t.state.status==="success"}function K3(t){return!0}function G3(t,e={}){var l,c,d,h;const n=e.shouldDehydrateMutation??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateMutation)??q3,r=t.getMutationCache().getAll().flatMap(f=>n(f)?[z3(f)]:[]),s=e.shouldDehydrateQuery??((c=t.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateQuery)??H3,i=e.shouldRedactErrors??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldRedactErrors)??K3,o=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??CC,a=t.getQueryCache().getAll().flatMap(f=>s(f)?[W3(f,o,i)]:[]);return{mutations:r,queries:a}}function Q3(t,e,n){var l,c;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),s=t.getQueryCache(),i=((l=n==null?void 0:n.defaultOptions)==null?void 0:l.deserializeData)??((c=t.getDefaultOptions().hydrate)==null?void 0:c.deserializeData)??CC,o=e.mutations||[],a=e.queries||[];o.forEach(({state:d,...h})=>{var f,m;r.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=n==null?void 0:n.defaultOptions)==null?void 0:m.mutations,...h},d)}),a.forEach(({queryKey:d,state:h,queryHash:f,meta:m,promise:T,dehydratedAt:p})=>{var L,S;const v=T?B3(T):void 0,w=h.data===void 0?v==null?void 0:v.data:h.data,y=w===void 0?w:i(w);let E=s.get(f);const x=(E==null?void 0:E.state.status)==="pending",C=(E==null?void 0:E.state.fetchStatus)==="fetching";if(E){const b=v&&p!==void 0&&p>E.state.dataUpdatedAt;if(h.dataUpdatedAt>E.state.dataUpdatedAt||b){const{fetchStatus:R,...k}=h;E.setState({...k,data:y})}}else E=s.build(t,{...(L=t.getDefaultOptions().hydrate)==null?void 0:L.queries,...(S=n==null?void 0:n.defaultOptions)==null?void 0:S.queries,queryKey:d,queryHash:f,meta:m},{...h,data:y,fetchStatus:"idle",status:y!==void 0?"success":h.status});T&&!x&&!C&&(p===void 0||p>E.state.dataUpdatedAt)&&E.fetch(void 0,{initialPromise:Promise.resolve(T).then(i)}).catch(dr)})}var Y3=C3;function J3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Y3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var hr=J3(),oc,lo,ac,Rx,X3=(Rx=class extends eg{constructor(){super();it(this,oc,!0);it(this,lo);it(this,ac);ze(this,ac,e=>{if(!tg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,lo)||this.setEventListener(Q(this,ac))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,lo))==null||e.call(this),ze(this,lo,void 0))}setEventListener(e){var n;ze(this,ac,e),(n=Q(this,lo))==null||n.call(this),ze(this,lo,e(this.setOnline.bind(this)))}setOnline(e){Q(this,oc)!==e&&(ze(this,oc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,oc)}},oc=new WeakMap,lo=new WeakMap,ac=new WeakMap,Rx),zm=new X3;function Z3(t){return Math.min(1e3*2**t,3e4)}function DC(t){return(t??"online")==="online"?zm.isOnline():!0}var mw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function kC(t){let e=!1,n=0,r;const s=$3(),i=()=>s.status!=="pending",o=p=>{var v;if(!i()){const w=new mw(p);f(w),(v=t.onCancel)==null||v.call(t,w)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>PC.isFocused()&&(t.networkMode==="always"||zm.isOnline())&&t.canRun(),d=()=>DC(t.networkMode)&&t.canRun(),h=p=>{i()||(r==null||r(),s.resolve(p))},f=p=>{i()||(r==null||r(),s.reject(p))},m=()=>new Promise(p=>{var v;r=w=>{(i()||c())&&p(w)},(v=t.onPause)==null||v.call(t)}).then(()=>{var p;r=void 0,i()||(p=t.onContinue)==null||p.call(t)}),T=()=>{if(i())return;let p;const v=n===0?t.initialPromise:void 0;try{p=v??t.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(h).catch(w=>{var L;if(i())return;const y=t.retry??(tg?0:3),E=t.retryDelay??Z3,x=typeof E=="function"?E(n,w):E,C=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,w);if(e||!C){f(w);return}n++,(L=t.onFail)==null||L.call(t,n,w),V3(x).then(()=>c()?void 0:m()).then(()=>{e?f(w):T()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?T():m().then(T),s)}}var Va,Px,NC=(Px=class{constructor(){it(this,Va)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),k3(this.gcTime)&&ze(this,Va,Bm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(tg?1/0:5*60*1e3))}clearGcTimeout(){Q(this,Va)&&(Bm.clearTimeout(Q(this,Va)),ze(this,Va,void 0))}},Va=new WeakMap,Px),Ma,lc,ts,Fa,Nn,ch,Ua,ms,ui,Cx,e6=(Cx=class extends NC{constructor(n){super();it(this,ms);it(this,Ma);it(this,lc);it(this,ts);it(this,Fa);it(this,Nn);it(this,ch);it(this,Ua);ze(this,Ua,!1),ze(this,ch,n.defaultOptions),this.setOptions(n.options),this.observers=[],ze(this,Fa,n.client),ze(this,ts,Q(this,Fa).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ze(this,Ma,ES(this.options)),this.state=n.state??Q(this,Ma),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,Nn))==null?void 0:n.promise}setOptions(n){if(this.options={...Q(this,ch),...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=ES(this.options);r.data!==void 0&&(this.setState(_S(r.data,r.dataUpdatedAt)),ze(this,Ma,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,ts).remove(this)}setData(n,r){const s=M3(this.state.data,n,this.options);return Gn(this,ms,ui).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gn(this,ms,ui).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,Nn))==null?void 0:s.promise;return(i=Q(this,Nn))==null||i.cancel(n),r?r.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Ma))}isActive(){return this.observers.some(n=>O3(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===R0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>hw(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!N3(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Nn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Nn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,ts).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,Nn)&&(Q(this,Ua)?Q(this,Nn).cancel({revert:!0}):Q(this,Nn).cancelRetry()),this.scheduleGc()),Q(this,ts).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gn(this,ms,ui).call(this,{type:"invalidate"})}async fetch(n,r){var c,d,h,f,m,T,p,v,w,y,E,x;if(this.state.fetchStatus!=="idle"&&((c=Q(this,Nn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,Nn))return Q(this,Nn).continueRetry(),Q(this,Nn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const C=this.observers.find(L=>L.options.queryFn);C&&this.setOptions(C.options)}const s=new AbortController,i=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(ze(this,Ua,!0),s.signal)})},o=()=>{const C=RC(this.options,r),S=(()=>{const b={client:Q(this,Fa),queryKey:this.queryKey,meta:this.meta};return i(b),b})();return ze(this,Ua,!1),this.options.persister?this.options.persister(C,S,this):C(S)},l=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Q(this,Fa),state:this.state,fetchFn:o};return i(C),C})();(d=this.options.behavior)==null||d.onFetch(l,this),ze(this,lc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gn(this,ms,ui).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ze(this,Nn,kC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof mw&&C.revert&&this.setState({...Q(this,lc),fetchStatus:"idle"}),s.abort()},onFail:(C,L)=>{Gn(this,ms,ui).call(this,{type:"failed",failureCount:C,error:L})},onPause:()=>{Gn(this,ms,ui).call(this,{type:"pause"})},onContinue:()=>{Gn(this,ms,ui).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await Q(this,Nn).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(T=(m=Q(this,ts).config).onSuccess)==null||T.call(m,C,this),(v=(p=Q(this,ts).config).onSettled)==null||v.call(p,C,this.state.error,this),C}catch(C){if(C instanceof mw){if(C.silent)return Q(this,Nn).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw Gn(this,ms,ui).call(this,{type:"error",error:C}),(y=(w=Q(this,ts).config).onError)==null||y.call(w,C,this),(x=(E=Q(this,ts).config).onSettled)==null||x.call(E,this.state.data,C,this),C}finally{this.scheduleGc()}}},Ma=new WeakMap,lc=new WeakMap,ts=new WeakMap,Fa=new WeakMap,Nn=new WeakMap,ch=new WeakMap,Ua=new WeakMap,ms=new WeakSet,ui=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...t6(s.data,this.options),fetchMeta:n.meta??null};case"success":const i={...s,..._S(n.data,n.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ze(this,lc,n.manual?i:void 0),i;case"error":const o=n.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),hr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,ts).notify({query:this,type:"updated",action:n})})},Cx);function t6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function _S(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ES(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function TS(t){return{onFetch:(e,n)=>{var d,h,f,m,T;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},w=RC(e.options,e.fetchOptions),y=async(E,x,C)=>{if(p)return Promise.reject();if(x==null&&E.pages.length)return Promise.resolve(E);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:x,direction:C?"backward":"forward",meta:e.options.meta};return v(P),P})(),b=await w(S),{maxPages:R}=e.options,k=C?U3:F3;return{pages:k(E.pages,b,R),pageParams:k(E.pageParams,x,R)}};if(s&&i.length){const E=s==="backward",x=E?n6:IS,C={pages:i,pageParams:o},L=x(r,C);a=await y(C,L,E)}else{const E=t??i.length;do{const x=l===0?o[0]??r.initialPageParam:IS(r,a);if(l>0&&x==null)break;a=await y(a,x),l++}while(l<E)}return a};e.options.persister?e.fetchFn=()=>{var p,v;return(v=(p=e.options).persister)==null?void 0:v.call(p,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function IS(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function n6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var uh,Fs,cr,ja,Us,Zi,Dx,r6=(Dx=class extends NC{constructor(n){super();it(this,Us);it(this,uh);it(this,Fs);it(this,cr);it(this,ja);ze(this,uh,n.client),this.mutationId=n.mutationId,ze(this,cr,n.mutationCache),ze(this,Fs,[]),this.state=n.state||s6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,Fs).includes(n)||(Q(this,Fs).push(n),this.clearGcTimeout(),Q(this,cr).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ze(this,Fs,Q(this,Fs).filter(r=>r!==n)),this.scheduleGc(),Q(this,cr).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,Fs).length||(this.state.status==="pending"?this.scheduleGc():Q(this,cr).remove(this))}continue(){var n;return((n=Q(this,ja))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var a,l,c,d,h,f,m,T,p,v,w,y,E,x,C,L,S,b,R,k;const r=()=>{Gn(this,Us,Zi).call(this,{type:"continue"})},s={client:Q(this,uh),meta:this.options.meta,mutationKey:this.options.mutationKey};ze(this,ja,kC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,O)=>{Gn(this,Us,Zi).call(this,{type:"failed",failureCount:P,error:O})},onPause:()=>{Gn(this,Us,Zi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,cr).canRun(this)}));const i=this.state.status==="pending",o=!Q(this,ja).canStart();try{if(i)r();else{Gn(this,Us,Zi).call(this,{type:"pending",variables:n,isPaused:o}),await((l=(a=Q(this,cr).config).onMutate)==null?void 0:l.call(a,n,this,s));const O=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n,s));O!==this.state.context&&Gn(this,Us,Zi).call(this,{type:"pending",context:O,variables:n,isPaused:o})}const P=await Q(this,ja).start();return await((f=(h=Q(this,cr).config).onSuccess)==null?void 0:f.call(h,P,n,this.state.context,this,s)),await((T=(m=this.options).onSuccess)==null?void 0:T.call(m,P,n,this.state.context,s)),await((v=(p=Q(this,cr).config).onSettled)==null?void 0:v.call(p,P,null,this.state.variables,this.state.context,this,s)),await((y=(w=this.options).onSettled)==null?void 0:y.call(w,P,null,n,this.state.context,s)),Gn(this,Us,Zi).call(this,{type:"success",data:P}),P}catch(P){try{throw await((x=(E=Q(this,cr).config).onError)==null?void 0:x.call(E,P,n,this.state.context,this,s)),await((L=(C=this.options).onError)==null?void 0:L.call(C,P,n,this.state.context,s)),await((b=(S=Q(this,cr).config).onSettled)==null?void 0:b.call(S,void 0,P,this.state.variables,this.state.context,this,s)),await((k=(R=this.options).onSettled)==null?void 0:k.call(R,void 0,P,n,this.state.context,s)),P}finally{Gn(this,Us,Zi).call(this,{type:"error",error:P})}}finally{Q(this,cr).runNext(this)}}},uh=new WeakMap,Fs=new WeakMap,cr=new WeakMap,ja=new WeakMap,Us=new WeakSet,Zi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),hr.batch(()=>{Q(this,Fs).forEach(s=>{s.onMutationUpdate(n)}),Q(this,cr).notify({mutation:this,type:"updated",action:n})})},Dx);function s6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fi,ps,dh,kx,i6=(kx=class extends eg{constructor(e={}){super();it(this,fi);it(this,ps);it(this,dh);this.config=e,ze(this,fi,new Set),ze(this,ps,new Map),ze(this,dh,0)}build(e,n,r){const s=new r6({client:e,mutationCache:this,mutationId:++Wh(this,dh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Q(this,fi).add(e);const n=ff(e);if(typeof n=="string"){const r=Q(this,ps).get(n);r?r.push(e):Q(this,ps).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Q(this,fi).delete(e)){const n=ff(e);if(typeof n=="string"){const r=Q(this,ps).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Q(this,ps).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ff(e);if(typeof n=="string"){const r=Q(this,ps).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=ff(e);if(typeof n=="string"){const s=(r=Q(this,ps).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hr.batch(()=>{Q(this,fi).forEach(e=>{this.notify({type:"removed",mutation:e})}),Q(this,fi).clear(),Q(this,ps).clear()})}getAll(){return Array.from(Q(this,fi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yS(n,r))}findAll(e={}){return this.getAll().filter(n=>yS(e,n))}notify(e){hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return hr.batch(()=>Promise.all(e.map(n=>n.continue().catch(dr))))}},fi=new WeakMap,ps=new WeakMap,dh=new WeakMap,kx);function ff(t){var e;return(e=t.options.scope)==null?void 0:e.id}var js,Nx,o6=(Nx=class extends eg{constructor(e={}){super();it(this,js);this.config=e,ze(this,js,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??x0(s,n);let o=this.get(i);return o||(o=new e6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,js).has(e.queryHash)||(Q(this,js).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,js).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,js).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,js).get(e)}getAll(){return[...Q(this,js).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>gS(e,r)):n}notify(e){hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){hr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},js=new WeakMap,Nx),an,co,uo,cc,uc,ho,dc,hc,Ox,a6=(Ox=class{constructor(t={}){it(this,an);it(this,co);it(this,uo);it(this,cc);it(this,uc);it(this,ho);it(this,dc);it(this,hc);ze(this,an,t.queryCache||new o6),ze(this,co,t.mutationCache||new i6),ze(this,uo,t.defaultOptions||{}),ze(this,cc,new Map),ze(this,uc,new Map),ze(this,ho,0)}mount(){Wh(this,ho)._++,Q(this,ho)===1&&(ze(this,dc,PC.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,an).onFocus())})),ze(this,hc,zm.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,an).onOnline())})))}unmount(){var t,e;Wh(this,ho)._--,Q(this,ho)===0&&((t=Q(this,dc))==null||t.call(this),ze(this,dc,void 0),(e=Q(this,hc))==null||e.call(this),ze(this,hc,void 0))}isFetching(t){return Q(this,an).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,co).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,an).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Q(this,an).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(hw(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Q(this,an).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,an).get(r.queryHash),i=s==null?void 0:s.state.data,o=D3(e,i);if(o!==void 0)return Q(this,an).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return hr.batch(()=>Q(this,an).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,an).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,an);hr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,an);return hr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=hr.batch(()=>Q(this,an).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(dr).catch(dr)}invalidateQueries(t,e={}){return hr.batch(()=>(Q(this,an).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=hr.batch(()=>Q(this,an).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(dr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,an).build(this,e);return n.isStaleByTime(hw(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dr).catch(dr)}fetchInfiniteQuery(t){return t.behavior=TS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dr).catch(dr)}ensureInfiniteQueryData(t){return t.behavior=TS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zm.isOnline()?Q(this,co).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,an)}getMutationCache(){return Q(this,co)}getDefaultOptions(){return Q(this,uo)}setDefaultOptions(t){ze(this,uo,t)}setQueryDefaults(t,e){Q(this,cc).set($d(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,cc).values()],n={};return e.forEach(r=>{Bd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Q(this,uc).set($d(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,uc).values()],n={};return e.forEach(r=>{Bd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=x0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===R0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,an).clear(),Q(this,co).clear()}},an=new WeakMap,co=new WeakMap,uo=new WeakMap,cc=new WeakMap,uc=new WeakMap,ho=new WeakMap,dc=new WeakMap,hc=new WeakMap,Ox),OC=A.createContext(void 0),DG=t=>{const e=A.useContext(OC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},l6=({client:t,children:e})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),_.jsx(OC.Provider,{value:t,children:e})),c6=["added","removed","updated"];function SS(t){return c6.includes(t)}async function u6({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:s}){try{const i=await e.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>n,a=i.buster!==r;if(o||a)return e.removeClient();Q3(t,i.clientState,s)}else return e.removeClient()}catch(i){throw await e.removeClient(),i}}async function bS({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const s={buster:n,timestamp:Date.now(),clientState:G3(t,r)};await e.persistClient(s)}function d6(t){const e=t.queryClient.getQueryCache().subscribe(r=>{SS(r.type)&&bS(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{SS(r.type)&&bS(t)});return()=>{e(),n()}}function h6(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},s=u6(t).then(()=>{e||(n=d6(t))});return[r,s]}function by(){}function f6({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:s=JSON.parse,retry:i}){if(t){const o=a=>{try{t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:m6(a=>{let l=a,c=o(l),d=0;for(;c&&l;)d++,l=i==null?void 0:i({persistedClient:l,error:c,errorCount:d}),l&&(c=o(l))},n),restoreClient:()=>{const a=t.getItem(e);if(a)return s(a)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:by,restoreClient:by,removeClient:by}}function m6(t,e=100){let n=null,r;return function(...s){r=s,n===null&&(n=Bm.setTimeout(()=>{t(...r),n=null},e))}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zd.apply(this,arguments)}var po;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(po||(po={}));const AS="popstate";function p6(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Wm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Wd(s)}return LC(e,n,null,t)}function g6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=hl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Wm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:Wd(i))}function r(s,i){P0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return LC(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function P0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y6(){return Math.random().toString(36).substr(2,8)}function xS(t,e){return{usr:t.state,key:t.key,idx:e}}function Wm(t,e,n,r){return n===void 0&&(n=null),zd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hl(e):e,{state:n,key:e&&e.key||r||y6()})}function Wd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function LC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=po.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(zd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=po.Pop;let v=d(),w=v==null?null:v-c;c=v,l&&l({action:a,location:p.location,delta:w})}function f(v,w){a=po.Push;let y=Wm(p.location,v,w);n&&n(y,v),c=d()+1;let E=xS(y,c),x=p.createHref(y);try{o.pushState(E,"",x)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(x)}i&&l&&l({action:a,location:p.location,delta:1})}function m(v,w){a=po.Replace;let y=Wm(p.location,v,w);n&&n(y,v),c=d();let E=xS(y,c),x=p.createHref(y);o.replaceState(E,"",x),i&&l&&l({action:a,location:p.location,delta:0})}function T(v){let w=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:Wd(v);return y=y.replace(/ $/,"%20"),pn(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let p={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(AS,h),l=v,()=>{s.removeEventListener(AS,h),l=null}},createHref(v){return e(s,v)},createURL:T,encodeLocation(v){let w=T(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(v){return o.go(v)}};return p}var RS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(RS||(RS={}));function v6(t,e,n){return n===void 0&&(n="/"),w6(t,e,n)}function w6(t,e,n,r){let s=typeof e=="string"?hl(e):e,i=C0(s.pathname||"/",n);if(i==null)return null;let o=VC(t);_6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=k6(i);a=P6(o[l],c)}return a}function VC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=xo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(pn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VC(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:x6(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of MC(i.path))s(i,o,l)}),e}function MC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=MC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function _6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:R6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const E6=/^:[\w-]+$/,T6=3,I6=2,S6=1,b6=10,A6=-2,PS=t=>t==="*";function x6(t,e){let n=t.split("/"),r=n.length;return n.some(PS)&&(r+=A6),e&&(r+=I6),n.filter(s=>!PS(s)).reduce((s,i)=>s+(E6.test(i)?T6:i===""?S6:b6),r)}function R6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function P6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=C6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:xo([i,h.pathname]),pathnameBase:V6(xo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=xo([i,h.pathnameBase]))}return o}function C6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=D6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const T=a[h];return m&&!T?c[f]=void 0:c[f]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function D6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),P0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function k6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return P0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function C0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?hl(t):t;return{pathname:n?n.startsWith("/")?n:O6(n,e):e,search:M6(r),hash:F6(s)}}function O6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ay(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function D0(t,e){let n=L6(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function k0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=hl(t):(s=zd({},t),pn(!s.pathname||!s.pathname.includes("?"),Ay("?","pathname","search",s)),pn(!s.pathname||!s.pathname.includes("#"),Ay("#","pathname","hash",s)),pn(!s.search||!s.search.includes("#"),Ay("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=N6(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const xo=t=>t.join("/").replace(/\/\/+/g,"/"),V6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const FC=["post","put","patch","delete"];new Set(FC);const j6=["get",...FC];new Set(j6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qd.apply(this,arguments)}const N0=A.createContext(null),$6=A.createContext(null),Yo=A.createContext(null),ng=A.createContext(null),Vi=A.createContext({outlet:null,matches:[],isDataRoute:!1}),UC=A.createContext(null);function B6(t,e){let{relative:n}=e===void 0?{}:e;Yc()||pn(!1);let{basename:r,navigator:s}=A.useContext(Yo),{hash:i,pathname:o,search:a}=$C(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:xo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Yc(){return A.useContext(ng)!=null}function ri(){return Yc()||pn(!1),A.useContext(ng).location}function jC(t){A.useContext(Yo).static||A.useLayoutEffect(t)}function Jc(){let{isDataRoute:t}=A.useContext(Vi);return t?t$():z6()}function z6(){Yc()||pn(!1);let t=A.useContext(N0),{basename:e,future:n,navigator:r}=A.useContext(Yo),{matches:s}=A.useContext(Vi),{pathname:i}=ri(),o=JSON.stringify(D0(s,n.v7_relativeSplatPath)),a=A.useRef(!1);return jC(()=>{a.current=!0}),A.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=k0(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:xo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function kG(){let{matches:t}=A.useContext(Vi),e=t[t.length-1];return e?e.params:{}}function $C(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Yo),{matches:s}=A.useContext(Vi),{pathname:i}=ri(),o=JSON.stringify(D0(s,r.v7_relativeSplatPath));return A.useMemo(()=>k0(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function W6(t,e){return q6(t,e)}function q6(t,e,n,r){Yc()||pn(!1);let{navigator:s}=A.useContext(Yo),{matches:i}=A.useContext(Vi),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ri(),d;if(e){var h;let v=typeof e=="string"?hl(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||pn(!1),d=v}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let T=v6(t,{pathname:m}),p=Y6(T&&T.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:xo([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:xo([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&p?A.createElement(ng.Provider,{value:{location:qd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:po.Pop}},p):p}function H6(){let t=e$(),e=U6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const K6=A.createElement(H6,null);class G6 extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Vi.Provider,{value:this.props.routeContext},A.createElement(UC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q6(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(N0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Vi.Provider,{value:e},r)}function Y6(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||pn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,T=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,T=!1,p=null,v=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||K6,l&&(c<0&&f===0?(n$("route-fallback"),T=!0,v=null):c===f&&(T=!0,v=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),y=()=>{let E;return m?E=p:T?E=v:h.route.Component?E=A.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,A.createElement(Q6,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?A.createElement(G6,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var BC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BC||{}),zC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zC||{});function J6(t){let e=A.useContext(N0);return e||pn(!1),e}function X6(t){let e=A.useContext($6);return e||pn(!1),e}function Z6(t){let e=A.useContext(Vi);return e||pn(!1),e}function WC(t){let e=Z6(),n=e.matches[e.matches.length-1];return n.route.id||pn(!1),n.route.id}function e$(){var t;let e=A.useContext(UC),n=X6(),r=WC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function t$(){let{router:t}=J6(BC.UseNavigateStable),e=WC(zC.UseNavigateStable),n=A.useRef(!1);return jC(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,qd({fromRouteId:e},i)))},[t,e])}const CS={};function n$(t,e,n){CS[t]||(CS[t]=!0)}function qC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function NG(t){let{to:e,replace:n,state:r,relative:s}=t;Yc()||pn(!1);let{future:i,static:o}=A.useContext(Yo),{matches:a}=A.useContext(Vi),{pathname:l}=ri(),c=Jc(),d=k0(e,D0(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return A.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Re(t){pn(!1)}function HC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=po.Pop,navigator:i,static:o=!1,future:a}=t;Yc()&&pn(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:i,static:o,future:qd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=hl(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:T="default"}=r,p=A.useMemo(()=>{let v=C0(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:T},navigationType:s}},[l,d,h,f,m,T,s]);return p==null?null:A.createElement(Yo.Provider,{value:c},A.createElement(ng.Provider,{children:n,value:p}))}function DS(t){let{children:e,location:n}=t;return W6(pw(e),n)}new Promise(()=>{});function pw(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,pw(r.props.children,i));return}r.type!==Re&&pn(!1),!r.props.index||!r.props.children||pn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=pw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gw(){return gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gw.apply(this,arguments)}function r$(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function s$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i$(t,e){return t.button===0&&(!e||e==="_self")&&!s$(t)}function yw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function o$(t,e){let n=yw(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const a$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],l$="6";try{window.__reactRouterVersion=l$}catch{}const c$="startTransition",qm=g_[c$];function u$(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=p6({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&qm?qm(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>qC(r),[r]),A.createElement(HC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function d$(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=g6({window:s,v5Compat:!0}));let o=i.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(h=>{c&&qm?qm(()=>l(h)):l(h)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>qC(r),[r]),A.createElement(HC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const h$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m$=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=r$(e,a$),{basename:m}=A.useContext(Yo),T,p=!1;if(typeof c=="string"&&f$.test(c)&&(T=c,h$))try{let E=new URL(window.location.href),x=c.startsWith("//")?new URL(E.protocol+c):new URL(c),C=C0(x.pathname,m);x.origin===E.origin&&C!=null?c=C+x.search+x.hash:p=!0}catch{}let v=B6(c,{relative:s}),w=p$(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(E){r&&r(E),E.defaultPrevented||w(E)}return A.createElement("a",gw({},f,{href:T||v,onClick:p||i?r:y,ref:n,target:l}))});var kS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kS||(kS={}));var NS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(NS||(NS={}));function p$(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Jc(),c=ri(),d=$C(t,{relative:o});return A.useCallback(h=>{if(i$(h,n)){h.preventDefault();let f=r!==void 0?r:Wd(c)===Wd(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function OG(t){let e=A.useRef(yw(t)),n=A.useRef(!1),r=ri(),s=A.useMemo(()=>o$(r.search,n.current?null:e.current),[r.search]),i=Jc(),o=A.useCallback((a,l)=>{const c=yw(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}const KC=A.createContext(void 0),g$=({children:t})=>{const[e,n]=A.useState("medium"),[r,s]=A.useState(!1),[i,o]=A.useState(!1);A.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;s(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),A.useEffect(()=>{try{const l=!!window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window<"u"&&window.location&&window.location.protocol==="file:";o(l)}catch{o(!1)}},[]),A.useEffect(()=>{const l=["appFontSize","desktopFontSize","mobileFontSize"];for(const c of l){const d=localStorage.getItem(c);if(d&&["small","medium","large"].includes(d)){n(d);break}}},[]),A.useEffect(()=>{const l=document.documentElement;l.classList.remove("font-size-small","font-size-medium","font-size-large"),l.classList.add(`font-size-${e}`)},[e]);const a=l=>{n(l),localStorage.setItem("appFontSize",l),i&&localStorage.setItem("desktopFontSize",l)};return _.jsx(KC.Provider,{value:{fontSize:e,setFontSize:a,isMobile:r,isDesktopApp:i},children:t})},LG=()=>{const t=A.useContext(KC);if(t===void 0)throw new Error("useFontSize must be used within a FontSizeProvider");return t},y$=LP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-none hover:bg-primary",destructive:"bg-destructive text-destructive-foreground shadow-none hover:bg-destructive",outline:"border border-input bg-background shadow-none hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-none hover:bg-secondary",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-2",sm:"h-10 rounded-full px-4",lg:"h-14 rounded-full px-8",icon:"h-12 w-12"}},defaultVariants:{variant:"default",size:"default"}}),es=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?VM:"button";return _.jsx(o,{className:qn(y$({variant:e,size:n,className:t})),ref:i,...s})});es.displayName="Button";const vw=A.forwardRef(({className:t,type:e,...n},r)=>{const s={...n};return Object.prototype.hasOwnProperty.call(s,"value")&&s.value===void 0&&(s.value=""),_.jsx("input",{type:e,className:qn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});vw.displayName="Input";const v$=()=>{};var OS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},w$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new _$;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E$=function(t){const e=GC(t);return O0.encodeByteArray(e,!0)},Hm=function(t){return E$(t).replace(/\./g,"")},QC=function(t){try{return O0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=()=>YC().__FIREBASE_DEFAULTS__,I$=()=>{if(typeof process>"u"||typeof OS>"u")return;const t=OS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QC(t[1]);return e&&JSON.parse(e)},rg=()=>{try{return v$()||T$()||I$()||S$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b$=t=>{var e,n;return(n=(e=rg())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},JC=t=>{const e=b$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XC=()=>{var t;return(t=rg())==null?void 0:t.config},A$=t=>{var e;return(e=rg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hm(JSON.stringify(n)),Hm(JSON.stringify(o)),""].join(".")}const ad={};function R$(){const t={prod:[],emulator:[]};for(const e of Object.keys(ad))ad[e]?t.emulator.push(e):t.prod.push(e);return t}function P$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let LS=!1;function ZC(t,e){if(typeof window>"u"||typeof document>"u"||!Mi(window.location.host)||ad[t]===e||ad[t]||LS)return;ad[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=R$().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{LS=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=P$(r),m=n("text"),T=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),v=document.getElementById(p)||document.createElement("a"),w=n("preprendIcon"),y=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),d(v,p);const x=c();l(y,w),E.append(y,T,v,x),document.body.appendChild(E)}i?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function eD(){var e;const t=(e=rg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function N$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O$(){const t=Hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tD(){return!eD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nD(){return!eD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function V0(){try{return typeof indexedDB=="object"}catch{return!1}}function L$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$="FirebaseError";class Cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V$,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xc.prototype.create)}}class Xc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?M$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Cs(s,a,r)}}function M$(t,e){return t.replace(F$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const F$=/\{\$([^}]+)}/g;function Tc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(VS(i)&&VS(o)){if(!Tc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function VS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function U$(t,e){const n=new j$(t,e);return n.subscribe.bind(n)}class j${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xy),s.error===void 0&&(s.error=xy),s.complete===void 0&&(s.complete=xy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=4*60*60*1e3;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ww;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W$(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z$(t){return t===ua?void 0:t}function W$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new B$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const H$={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},K$=tt.INFO,G$={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},Q$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=G$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sg{constructor(e){this.name=e,this._logLevel=K$,this._logHandler=Q$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const Y$=(t,e)=>e.some(n=>t instanceof n);let MS,FS;function J$(){return MS||(MS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X$(){return FS||(FS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sD=new WeakMap,_w=new WeakMap,iD=new WeakMap,Ry=new WeakMap,M0=new WeakMap;function Z$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ro(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sD.set(n,t)}).catch(()=>{}),M0.set(e,t),e}function e5(t){if(_w.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_w.set(t,e)}let Ew={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _w.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ro(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t5(t){Ew=t(Ew)}function n5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Py(this),e,...n);return iD.set(r,e.sort?e.sort():[e]),Ro(r)}:X$().includes(t)?function(...e){return t.apply(Py(this),e),Ro(sD.get(this))}:function(...e){return Ro(t.apply(Py(this),e))}}function r5(t){return typeof t=="function"?n5(t):(t instanceof IDBTransaction&&e5(t),Y$(t,J$())?new Proxy(t,Ew):t)}function Ro(t){if(t instanceof IDBRequest)return Z$(t);if(Ry.has(t))return Ry.get(t);const e=r5(t);return e!==t&&(Ry.set(t,e),M0.set(e,t)),e}const Py=t=>M0.get(t);function s5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ro(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ro(o.result),l.oldVersion,l.newVersion,Ro(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const i5=["get","getKey","getAll","getAllKeys","count"],o5=["put","add","delete","clear"],Cy=new Map;function US(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cy.get(e))return Cy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=o5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||i5.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Cy.set(e,i),i}t5(t=>({...t,get:(e,n,r)=>US(e,n)||t.get(e,n,r),has:(e,n)=>!!US(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function l5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tw="@firebase/app",jS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new sg("@firebase/app"),c5="@firebase/app-compat",u5="@firebase/analytics-compat",d5="@firebase/analytics",h5="@firebase/app-check-compat",f5="@firebase/app-check",m5="@firebase/auth",p5="@firebase/auth-compat",g5="@firebase/database",y5="@firebase/data-connect",v5="@firebase/database-compat",w5="@firebase/functions",_5="@firebase/functions-compat",E5="@firebase/installations",T5="@firebase/installations-compat",I5="@firebase/messaging",S5="@firebase/messaging-compat",b5="@firebase/performance",A5="@firebase/performance-compat",x5="@firebase/remote-config",R5="@firebase/remote-config-compat",P5="@firebase/storage",C5="@firebase/storage-compat",D5="@firebase/firestore",k5="@firebase/ai",N5="@firebase/firestore-compat",O5="firebase",L5="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="[DEFAULT]",V5={[Tw]:"fire-core",[c5]:"fire-core-compat",[d5]:"fire-analytics",[u5]:"fire-analytics-compat",[f5]:"fire-app-check",[h5]:"fire-app-check-compat",[m5]:"fire-auth",[p5]:"fire-auth-compat",[g5]:"fire-rtdb",[y5]:"fire-data-connect",[v5]:"fire-rtdb-compat",[w5]:"fire-fn",[_5]:"fire-fn-compat",[E5]:"fire-iid",[T5]:"fire-iid-compat",[I5]:"fire-fcm",[S5]:"fire-fcm-compat",[b5]:"fire-perf",[A5]:"fire-perf-compat",[x5]:"fire-rc",[R5]:"fire-rc-compat",[P5]:"fire-gcs",[C5]:"fire-gcs-compat",[D5]:"fire-fst",[N5]:"fire-fst-compat",[k5]:"fire-vertex","fire-js":"fire-js",[O5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new Map,M5=new Map,Sw=new Map;function $S(t,e){try{t.container.addComponent(e)}catch(n){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Sw.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;Sw.set(e,t);for(const n of Km.values())$S(n,t);for(const n of M5.values())$S(n,t);return!0}function ig(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ur(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new Xc("app","Firebase",F5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=L5;function oD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Iw,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Po.create("bad-app-name",{appName:String(s)});if(n||(n=XC()),!n)throw Po.create("no-options");const i=Km.get(s);if(i){if(Tc(n,i.options)&&Tc(r,i.config))return i;throw Po.create("duplicate-app",{appName:s})}const o=new q$(s);for(const l of Sw.values())o.addComponent(l);const a=new U5(n,r,o);return Km.set(s,a),a}function aD(t=Iw){const e=Km.get(t);if(!e&&t===Iw&&XC())return oD();if(!e)throw Po.create("no-app",{appName:t});return e}function Kr(t,e,n){let r=V5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(o.join(" "));return}ei(new Rs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="firebase-heartbeat-database",$5=1,Hd="firebase-heartbeat-store";let Dy=null;function lD(){return Dy||(Dy=s5(j5,$5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Po.create("idb-open",{originalErrorMessage:t.message})})),Dy}async function B5(t){try{const n=(await lD()).transaction(Hd),r=await n.objectStore(Hd).get(cD(t));return await n.done,r}catch(e){if(e instanceof Cs)Di.warn(e.message);else{const n=Po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Di.warn(n.message)}}}async function BS(t,e){try{const r=(await lD()).transaction(Hd,"readwrite");await r.objectStore(Hd).put(e,cD(t)),await r.done}catch(n){if(n instanceof Cs)Di.warn(n.message);else{const r=Po.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Di.warn(r.message)}}}function cD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=1024,W5=30;class q5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new K5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>W5){const o=G5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zS(),{heartbeatsToSend:r,unsentEntries:s}=H5(this._heartbeatsCache.heartbeats),i=Hm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Di.warn(n),""}}}function zS(){return new Date().toISOString().substring(0,10)}function H5(t,e=z5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),WS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),WS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class K5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V0()?L$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function WS(t){return Hm(JSON.stringify({version:2,heartbeats:t})).length}function G5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){ei(new Rs("platform-logger",e=>new a5(e),"PRIVATE")),ei(new Rs("heartbeat",e=>new q5(e),"PRIVATE")),Kr(Tw,jS,t),Kr(Tw,jS,"esm2020"),Kr("fire-js","")}Q5("");function uD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y5=uD,dD=new Xc("auth","Firebase",uD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new sg("@firebase/auth");function J5(t,...e){Gm.logLevel<=tt.WARN&&Gm.warn(`Auth (${_h}): ${t}`,...e)}function Kf(t,...e){Gm.logLevel<=tt.ERROR&&Gm.error(`Auth (${_h}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,...e){throw U0(t,...e)}function F0(t,...e){return U0(t,...e)}function hD(t,e,n){const r={...Y5(),[e]:n};return new Xc("auth","Firebase",r).create(e,{appName:t.name})}function Co(t){return hD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dD.create(t,...e)}function nt(t,e,...n){if(!t)throw U0(e,...n)}function yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kf(e),new Error(e)}function Qm(t,e){t||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function fD(){return qS()==="http:"||qS()==="https:"}function qS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fD()||k$()||"connection"in navigator)?navigator.onLine:!0}function eB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qm(n>e,"Short delay should be less than long delay!"),this.isMobile=C$()||N$()}get(){return Z5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(t,e){Qm(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sB=new Eh(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function si(t,e,n,r,s={}){return pD(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=rD({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return D$()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Mi(t.emulatorConfig.host)&&(c.credentials="include"),mD.fetch()(await gD(t,t.config.apiHost,n,a),c)})}async function pD(t,e,n){t._canInitEmulator=!1;const r={...nB,...e};try{const s=new oB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw mf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw mf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw mf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw hD(t,d,c);Za(t,d)}}catch(s){if(s instanceof Cs)throw s;Za(t,"network-request-failed",{message:String(s)})}}async function og(t,e,n,r,s={}){const i=await si(t,e,n,r,s);return"mfaPendingCredential"in i&&Za(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function gD(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?tB(t.config,s):`${t.config.apiScheme}://${s}`;return rB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function iB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(F0(this.auth,"network-request-failed")),sB.get())})}}function mf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=F0(t,e,r);return s.customData._tokenResponse=n,s}function HS(t){return t!==void 0&&t.enterprise!==void 0}class aB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lB(t,e){return si(t,"GET","/v2/recaptchaConfig",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(t,e){return si(t,"POST","/v1/accounts:delete",e)}async function Ym(t,e){return si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uB(t,e=!1){const n=ft(t),r=await n.getIdToken(e),s=j0(r);nt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ld(ky(s.auth_time)),issuedAtTime:ld(ky(s.iat)),expirationTime:ld(ky(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ky(t){return Number(t)*1e3}function j0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{const s=QC(n);return s?JSON.parse(s):(Kf("Failed to decode base64 JWT payload"),null)}catch(s){return Kf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function KS(t){const e=j0(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cs&&dB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ld(this.lastLoginAt),this.creationTime=ld(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jm(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Kd(t,Ym(e,{idToken:n}));nt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?yD(s.providerUserInfo):[],o=mB(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new bw(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function fB(t){const e=ft(t);await Jm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function yD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(t,e){const n=await pD(t,{},async()=>{const r=rD({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await gD(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Mi(t.emulatorConfig.host)&&(l.credentials="include"),mD.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gB(t,e){return si(t,"POST","/v2/accounts:revokeToken",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=KS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await pB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new tc;return r&&(nt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(nt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(nt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tc,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _s{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new hB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Kd(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uB(this,e)}reload(){return fB(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await Kd(this,cB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:T,stsTokenManager:p}=n;nt(h&&p,e,"internal-error");const v=tc.fromJSON(this.name,p);nt(typeof h=="string",e,"internal-error"),Qi(r,e.name),Qi(s,e.name),nt(typeof f=="boolean",e,"internal-error"),nt(typeof m=="boolean",e,"internal-error"),Qi(i,e.name),Qi(o,e.name),Qi(a,e.name),Qi(l,e.name),Qi(c,e.name),Qi(d,e.name);const w=new _s({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:d});return T&&Array.isArray(T)&&(w.providerData=T.map(y=>({...y}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new tc;s.updateFromServerResponse(n);const i=new _s({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Jm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];nt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?yD(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new tc;a.updateFromIdToken(r);const l=new _s({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new bw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new Map;function ba(t){Qm(t instanceof Function,"Expected a class definition");let e=GS.get(t);return e?(Qm(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,GS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vD.type="NONE";const Aw=vD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e,n){return`firebase:${t}:${e}:${n}`}class nc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ny(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ny("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ym(this.auth,{idToken:e}).catch(()=>{});return n?_s._fromGetAccountInfoResponse(this.auth,n,e):null}return _s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nc(ba(Aw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ba(Aw);const o=Ny(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let h;if(typeof d=="string"){const f=await Ym(e,{idToken:d}).catch(()=>{});if(!f)break;h=await _s._fromGetAccountInfoResponse(e,f,d)}else h=_s._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new nc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new nc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ED(e))return"Blackberry";if(TD(e))return"Webos";if(vB(e))return"Safari";if((e.includes("chrome/")||wB(e))&&!e.includes("edge/"))return"Chrome";if(_D(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yB(t=Hn()){return/firefox\//i.test(t)}function vB(t=Hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wB(t=Hn()){return/crios\//i.test(t)}function wD(t=Hn()){return/iemobile/i.test(t)}function _D(t=Hn()){return/android/i.test(t)}function ED(t=Hn()){return/blackberry/i.test(t)}function TD(t=Hn()){return/webos/i.test(t)}function _B(t=Hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EB(){return O$()&&document.documentMode===10}function TB(t=Hn()){return _B(t)||_D(t)||TD(t)||ED(t)||/windows phone/i.test(t)||wD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t,e=[]){let n;switch(t){case"Browser":n=QS(Hn());break;case"Worker":n=`${QS(Hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_h}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e={}){return si(t,"GET","/v2/passwordPolicy",Fi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=6;class AB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??bB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YS(this),this.idTokenSubscription=new YS(this),this.beforeStateQueue=new IB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ba(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await nc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ym(this,{idToken:e}),r=await _s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(Co(this));const n=e?ft(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SB(this),n=new AB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ba(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await nc.create(this,[ba(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ID(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&J5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Zc(t){return ft(t)}class YS{constructor(e){this.auth=e,this.observer=null,this.addObserver=U$(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RB(t){$0=t}function PB(t){return $0.loadJS(t)}function CB(){return $0.recaptchaEnterpriseScript}class DB{constructor(){this.enterprise=new kB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class kB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NB="recaptcha-enterprise",SD="NO_RECAPTCHA";class OB{constructor(e){this.type=NB,this.auth=Zc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{lB(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new aB(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;HS(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(SD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DB().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&HS(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CB();l.length!==0&&(l+=a),PB(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function JS(t,e,n,r=!1,s=!1){const i=new OB(t);let o;if(s)o=SD;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xm(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await JS(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await JS(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(t,e){const n=ig(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Tc(i,e??{}))return s;Za(s,"already-initialized")}return n.initialize({options:e})}function VB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ba);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function FB(t,e){return si(t,"POST","/v1/accounts:update",e)}async function UB(t,e){return si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jB(t,e){return og(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))}async function $B(t,e){return si(t,"POST","/v1/accounts:sendOobCode",Fi(t,e))}async function BB(t,e){return $B(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zB(t,e){return og(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}async function WB(t,e){return og(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends MB{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Gd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,n,"signInWithPassword",jB);case"emailLink":return zB(e,{email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,r,"signUpPassword",UB);case"emailLink":return WB(e,{idToken:n,email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HB(t){const e=Bu(zu(t)).link,n=e?Bu(zu(e)).deep_link_id:null,r=Bu(zu(t)).deep_link_id;return(r?Bu(zu(r)).link:null)||r||n||e||t}class B0{constructor(e){const n=Bu(zu(e)),r=n.apiKey??null,s=n.oobCode??null,i=qB(n.mode??null);nt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=HB(e);try{return new B0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.providerId=eu.PROVIDER_ID}static credential(e,n){return Gd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=B0.parseLink(n);return nt(r,"argument-error"),Gd._fromEmailAndCode(e,r.code,r.tenantId)}}eu.PROVIDER_ID="password";eu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e){return og(t,"POST","/v1/accounts:signUp",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await _s._fromIdTokenResponse(e,r,s),o=XS(r);return new Ic({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=XS(r);return new Ic({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function XS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends Cs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zm(e,n,r,s)}}function bD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zm._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e,n=!1){const{auth:r}=t;if(Ur(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const i=await Kd(t,bD(r,s,e,t),n);nt(i.idToken,r,"internal-error");const o=j0(i.idToken);nt(o,r,"internal-error");const{sub:a}=o;return nt(t.uid===a,r,"user-mismatch"),Ic._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Za(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(t,e,n=!1){if(Ur(t.app))return Promise.reject(Co(t));const r="signIn",s=await bD(t,r,e),i=await Ic._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function YB(t,e){return QB(Zc(t),e)}async function MG(t,e){return GB(ft(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t){const e=Zc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JB(t,e,n){const r=Zc(t);await Xm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BB)}async function ZS(t,e,n){if(Ur(t.app))return Promise.reject(Co(t));const r=Zc(t),o=await Xm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&AD(t),l}),a=await Ic._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function XB(t,e,n){return Ur(t.app)?Promise.reject(Co(t)):YB(ft(t),eu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&AD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZB(t,e){return si(t,"POST","/v1/accounts:createAuthUri",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9(t,e){const n=fD()?X5():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await ZB(ft(t),r);return s||[]}function FG(t,e){return t9(ft(t),null,e)}async function t9(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Kd(t,FB(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(t,e){return ft(t).setPersistence(e)}function r9(t,e,n,r){return ft(t).onAuthStateChanged(e,n,r)}function eb(t){return ft(t).signOut()}const tb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tb,"1"),this.storage.removeItem(tb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=1e3,i9=10;class RD extends xD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);EB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,i9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},s9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RD.type="LOCAL";const PD=RD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD extends xD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CD.type="SESSION";const o9=CD;new Eh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Eh(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Eh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Eh(5e3,15e3);var nb="@firebase/auth",rb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c9(t){ei(new Rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;nt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ID(t)},c=new xB(r,s,i,l);return VB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new Rs("auth-internal",e=>{const n=Zc(e.getProvider("auth").getImmediate());return(r=>new a9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(nb,rb,l9(t)),Kr(nb,rb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=5*60;A$("authIdTokenMaxAge");function d9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}RB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=F0("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",d9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c9("Browser");var h9="firebase",f9="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(h9,f9,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=new Map,p9={activated:!1,tokenObservers:[]},g9={initialized:!1,enabled:!1};function Ps(t){return m9.get(t)||{...p9}}function DD(){return g9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="https://content-firebaseappcheck.googleapis.com/v1";const v9="exchangeDebugToken",sb={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},UG=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ww,this.pending.promise.catch(n=>{}),await _9(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ww,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function _9(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},go=new Xc("appCheck","AppCheck",E9);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){if(!Ps(t).activated)throw go.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw go.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw go.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw go.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw go.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function OD(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${y9}/projects/${n}/apps/${r}:${v9}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9="firebase-app-check-database",I9=1,xw="firebase-app-check-store";let pf=null;function S9(){return pf||(pf=new Promise((t,e)=>{try{const n=indexedDB.open(T9,I9);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(go.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(xw,{keyPath:"compositeKey"})}}}catch(n){e(go.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),pf)}function b9(t,e){return A9(x9(t),e)}async function A9(t,e){const r=(await S9()).transaction(xw,"readwrite"),i=r.objectStore(xw).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var c;a(go.create("storage-set",{originalErrorMessage:(c=l.target.error)==null?void 0:c.message}))}})}function x9(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new sg("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){return V0()?b9(t,e).catch(n=>{Wu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(){return DD().enabled}async function VD(){const t=DD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9={error:"UNKNOWN_ERROR"};function P9(t){return O0.encodeString(JSON.stringify(t),!1)}async function Rw(t,e=!1,n=!1){const r=t.app;kD(r);const s=Ps(r);let i=s.token,o;if(i&&!qu(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(qu(c)?i=c:await Oy(r,void 0))}if(!e&&i&&qu(i))return{token:i.token};let a=!1;if(LD())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=ND(OD(r,await VD()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),a=!0);const c=await s.exchangeTokenPromise;return await Oy(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Wu.warn(c.message):n&&Wu.error(c),Ly(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),a=!0),i=await Ps(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?Wu.warn(c.message):n&&Wu.error(c),o=c}let l;return i?o?qu(i)?l={token:i.token,internalError:o}:l=Ly(o):(l={token:i.token},s.token=i,await Oy(r,i)):l=Ly(o),a&&N9(r,l),l}async function C9(t){const e=t.app;kD(e);const{provider:n}=Ps(e);if(LD()){const r=await VD(),{token:s}=await ND(OD(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function D9(t,e,n,r){const{app:s}=t,i=Ps(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&qu(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),ib(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>ib(t))}function MD(t,e){const n=Ps(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function ib(t){const{app:e}=t,n=Ps(e);let r=n.tokenRefresher;r||(r=k9(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function k9(t){const{app:e}=t;return new w9(async()=>{const n=Ps(e);let r;if(n.token?r=await Rw(t,!0):r=await Rw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ps(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},sb.RETRIAL_MIN_WAIT,sb.RETRIAL_MAX_WAIT)}function N9(t,e){const n=Ps(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qu(t){return t.expireTimeMillis-Date.now()>0}function Ly(t){return{token:P9(R9),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ps(this.app);for(const n of e)MD(this.app,n.next);return Promise.resolve()}}function L9(t,e){return new O9(t,e)}function V9(t){return{getToken:e=>Rw(t,e),getLimitedUseToken:()=>C9(t),addTokenListener:e=>D9(t,"INTERNAL",e),removeTokenListener:e=>MD(t.app,e)}}const M9="@firebase/app-check",F9="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="app-check",ob="app-check-internal";function j9(){ei(new Rs(U9,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return L9(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(ob).initialize()})),ei(new Rs(ob,t=>{const e=t.getProvider("app-check").getImmediate();return V9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Kr(M9,F9)}j9();var ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Do,FD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,b){function R(){}R.prototype=b.prototype,S.F=b.prototype,S.prototype=new R,S.prototype.constructor=S,S.D=function(k,P,O){for(var D=Array(arguments.length-2),j=2;j<arguments.length;j++)D[j-2]=arguments[j];return b.prototype[P].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,b,R){R||(R=0);const k=Array(16);if(typeof b=="string")for(var P=0;P<16;++P)k[P]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(P=0;P<16;++P)k[P]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=S.g[0],R=S.g[1],P=S.g[2];let O=S.g[3],D;D=b+(O^R&(P^O))+k[0]+3614090360&4294967295,b=R+(D<<7&4294967295|D>>>25),D=O+(P^b&(R^P))+k[1]+3905402710&4294967295,O=b+(D<<12&4294967295|D>>>20),D=P+(R^O&(b^R))+k[2]+606105819&4294967295,P=O+(D<<17&4294967295|D>>>15),D=R+(b^P&(O^b))+k[3]+3250441966&4294967295,R=P+(D<<22&4294967295|D>>>10),D=b+(O^R&(P^O))+k[4]+4118548399&4294967295,b=R+(D<<7&4294967295|D>>>25),D=O+(P^b&(R^P))+k[5]+1200080426&4294967295,O=b+(D<<12&4294967295|D>>>20),D=P+(R^O&(b^R))+k[6]+2821735955&4294967295,P=O+(D<<17&4294967295|D>>>15),D=R+(b^P&(O^b))+k[7]+4249261313&4294967295,R=P+(D<<22&4294967295|D>>>10),D=b+(O^R&(P^O))+k[8]+1770035416&4294967295,b=R+(D<<7&4294967295|D>>>25),D=O+(P^b&(R^P))+k[9]+2336552879&4294967295,O=b+(D<<12&4294967295|D>>>20),D=P+(R^O&(b^R))+k[10]+4294925233&4294967295,P=O+(D<<17&4294967295|D>>>15),D=R+(b^P&(O^b))+k[11]+2304563134&4294967295,R=P+(D<<22&4294967295|D>>>10),D=b+(O^R&(P^O))+k[12]+1804603682&4294967295,b=R+(D<<7&4294967295|D>>>25),D=O+(P^b&(R^P))+k[13]+4254626195&4294967295,O=b+(D<<12&4294967295|D>>>20),D=P+(R^O&(b^R))+k[14]+2792965006&4294967295,P=O+(D<<17&4294967295|D>>>15),D=R+(b^P&(O^b))+k[15]+1236535329&4294967295,R=P+(D<<22&4294967295|D>>>10),D=b+(P^O&(R^P))+k[1]+4129170786&4294967295,b=R+(D<<5&4294967295|D>>>27),D=O+(R^P&(b^R))+k[6]+3225465664&4294967295,O=b+(D<<9&4294967295|D>>>23),D=P+(b^R&(O^b))+k[11]+643717713&4294967295,P=O+(D<<14&4294967295|D>>>18),D=R+(O^b&(P^O))+k[0]+3921069994&4294967295,R=P+(D<<20&4294967295|D>>>12),D=b+(P^O&(R^P))+k[5]+3593408605&4294967295,b=R+(D<<5&4294967295|D>>>27),D=O+(R^P&(b^R))+k[10]+38016083&4294967295,O=b+(D<<9&4294967295|D>>>23),D=P+(b^R&(O^b))+k[15]+3634488961&4294967295,P=O+(D<<14&4294967295|D>>>18),D=R+(O^b&(P^O))+k[4]+3889429448&4294967295,R=P+(D<<20&4294967295|D>>>12),D=b+(P^O&(R^P))+k[9]+568446438&4294967295,b=R+(D<<5&4294967295|D>>>27),D=O+(R^P&(b^R))+k[14]+3275163606&4294967295,O=b+(D<<9&4294967295|D>>>23),D=P+(b^R&(O^b))+k[3]+4107603335&4294967295,P=O+(D<<14&4294967295|D>>>18),D=R+(O^b&(P^O))+k[8]+1163531501&4294967295,R=P+(D<<20&4294967295|D>>>12),D=b+(P^O&(R^P))+k[13]+2850285829&4294967295,b=R+(D<<5&4294967295|D>>>27),D=O+(R^P&(b^R))+k[2]+4243563512&4294967295,O=b+(D<<9&4294967295|D>>>23),D=P+(b^R&(O^b))+k[7]+1735328473&4294967295,P=O+(D<<14&4294967295|D>>>18),D=R+(O^b&(P^O))+k[12]+2368359562&4294967295,R=P+(D<<20&4294967295|D>>>12),D=b+(R^P^O)+k[5]+4294588738&4294967295,b=R+(D<<4&4294967295|D>>>28),D=O+(b^R^P)+k[8]+2272392833&4294967295,O=b+(D<<11&4294967295|D>>>21),D=P+(O^b^R)+k[11]+1839030562&4294967295,P=O+(D<<16&4294967295|D>>>16),D=R+(P^O^b)+k[14]+4259657740&4294967295,R=P+(D<<23&4294967295|D>>>9),D=b+(R^P^O)+k[1]+2763975236&4294967295,b=R+(D<<4&4294967295|D>>>28),D=O+(b^R^P)+k[4]+1272893353&4294967295,O=b+(D<<11&4294967295|D>>>21),D=P+(O^b^R)+k[7]+4139469664&4294967295,P=O+(D<<16&4294967295|D>>>16),D=R+(P^O^b)+k[10]+3200236656&4294967295,R=P+(D<<23&4294967295|D>>>9),D=b+(R^P^O)+k[13]+681279174&4294967295,b=R+(D<<4&4294967295|D>>>28),D=O+(b^R^P)+k[0]+3936430074&4294967295,O=b+(D<<11&4294967295|D>>>21),D=P+(O^b^R)+k[3]+3572445317&4294967295,P=O+(D<<16&4294967295|D>>>16),D=R+(P^O^b)+k[6]+76029189&4294967295,R=P+(D<<23&4294967295|D>>>9),D=b+(R^P^O)+k[9]+3654602809&4294967295,b=R+(D<<4&4294967295|D>>>28),D=O+(b^R^P)+k[12]+3873151461&4294967295,O=b+(D<<11&4294967295|D>>>21),D=P+(O^b^R)+k[15]+530742520&4294967295,P=O+(D<<16&4294967295|D>>>16),D=R+(P^O^b)+k[2]+3299628645&4294967295,R=P+(D<<23&4294967295|D>>>9),D=b+(P^(R|~O))+k[0]+4096336452&4294967295,b=R+(D<<6&4294967295|D>>>26),D=O+(R^(b|~P))+k[7]+1126891415&4294967295,O=b+(D<<10&4294967295|D>>>22),D=P+(b^(O|~R))+k[14]+2878612391&4294967295,P=O+(D<<15&4294967295|D>>>17),D=R+(O^(P|~b))+k[5]+4237533241&4294967295,R=P+(D<<21&4294967295|D>>>11),D=b+(P^(R|~O))+k[12]+1700485571&4294967295,b=R+(D<<6&4294967295|D>>>26),D=O+(R^(b|~P))+k[3]+2399980690&4294967295,O=b+(D<<10&4294967295|D>>>22),D=P+(b^(O|~R))+k[10]+4293915773&4294967295,P=O+(D<<15&4294967295|D>>>17),D=R+(O^(P|~b))+k[1]+2240044497&4294967295,R=P+(D<<21&4294967295|D>>>11),D=b+(P^(R|~O))+k[8]+1873313359&4294967295,b=R+(D<<6&4294967295|D>>>26),D=O+(R^(b|~P))+k[15]+4264355552&4294967295,O=b+(D<<10&4294967295|D>>>22),D=P+(b^(O|~R))+k[6]+2734768916&4294967295,P=O+(D<<15&4294967295|D>>>17),D=R+(O^(P|~b))+k[13]+1309151649&4294967295,R=P+(D<<21&4294967295|D>>>11),D=b+(P^(R|~O))+k[4]+4149444226&4294967295,b=R+(D<<6&4294967295|D>>>26),D=O+(R^(b|~P))+k[11]+3174756917&4294967295,O=b+(D<<10&4294967295|D>>>22),D=P+(b^(O|~R))+k[2]+718787259&4294967295,P=O+(D<<15&4294967295|D>>>17),D=R+(O^(P|~b))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.v=function(S,b){b===void 0&&(b=S.length);const R=b-this.blockSize,k=this.C;let P=this.h,O=0;for(;O<b;){if(P==0)for(;O<=R;)s(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<b;)if(k[P++]=S.charCodeAt(O++),P==this.blockSize){s(this,k),P=0;break}}else for(;O<b;)if(k[P++]=S[O++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=b},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;b=this.o*8;for(var R=S.length-8;R<S.length;++R)S[R]=b&255,b/=256;for(this.v(S),S=Array(16),b=0,R=0;R<4;++R)for(let k=0;k<32;k+=8)S[b++]=this.g[R]>>>k&255;return S};function i(S,b){var R=a;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=b(S)}function o(S,b){this.h=b;const R=[];let k=!0;for(let P=S.length-1;P>=0;P--){const O=S[P]|0;k&&O==b||(R[P]=O,k=!1)}this.g=R}var a={};function l(S){return-128<=S&&S<128?i(S,function(b){return new o([b|0],b<0?-1:0)}):new o([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return v(c(-S));const b=[];let R=1;for(let k=0;S>=R;k++)b[k]=S/R|0,R*=4294967296;return new o(b,0)}function d(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return v(d(S.substring(1),b));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(b,8));let k=h;for(let O=0;O<S.length;O+=8){var P=Math.min(8,S.length-O);const D=parseInt(S.substring(O,O+P),b);P<8?(P=c(Math.pow(b,P)),k=k.j(P).add(c(D))):(k=k.j(R),k=k.add(c(D)))}return k}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(p(this))return-v(this).m();let S=0,b=1;for(let R=0;R<this.g.length;R++){const k=this.i(R);S+=(k>=0?k:4294967296+k)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(p(this))return"-"+v(this).toString(S);const b=c(Math.pow(S,6));var R=this;let k="";for(;;){const P=x(R,b).g;R=w(R,P.j(b));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(S);if(R=P,T(R))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(let b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function p(S){return S.h==-1}t.l=function(S){return S=w(this,S),p(S)?-1:T(S)?0:1};function v(S){const b=S.g.length,R=[];for(let k=0;k<b;k++)R[k]=~S.g[k];return new o(R,~S.h).add(f)}t.abs=function(){return p(this)?v(this):this},t.add=function(S){const b=Math.max(this.g.length,S.g.length),R=[];let k=0;for(let P=0;P<=b;P++){let O=k+(this.i(P)&65535)+(S.i(P)&65535),D=(O>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=D>>>16,O&=65535,D&=65535,R[P]=D<<16|O}return new o(R,R[R.length-1]&-2147483648?-1:0)};function w(S,b){return S.add(v(b))}t.j=function(S){if(T(this)||T(S))return h;if(p(this))return p(S)?v(this).j(v(S)):v(v(this).j(S));if(p(S))return v(this.j(v(S)));if(this.l(m)<0&&S.l(m)<0)return c(this.m()*S.m());const b=this.g.length+S.g.length,R=[];for(var k=0;k<2*b;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<S.g.length;P++){const O=this.i(k)>>>16,D=this.i(k)&65535,j=S.i(P)>>>16,oe=S.i(P)&65535;R[2*k+2*P]+=D*oe,y(R,2*k+2*P),R[2*k+2*P+1]+=O*oe,y(R,2*k+2*P+1),R[2*k+2*P+1]+=D*j,y(R,2*k+2*P+1),R[2*k+2*P+2]+=O*j,y(R,2*k+2*P+2)}for(S=0;S<b;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=b;S<2*b;S++)R[S]=0;return new o(R,0)};function y(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function E(S,b){this.g=S,this.h=b}function x(S,b){if(T(b))throw Error("division by zero");if(T(S))return new E(h,h);if(p(S))return b=x(v(S),b),new E(v(b.g),v(b.h));if(p(b))return b=x(S,v(b)),new E(v(b.g),b.h);if(S.g.length>30){if(p(S)||p(b))throw Error("slowDivide_ only works with positive integers.");for(var R=f,k=b;k.l(S)<=0;)R=C(R),k=C(k);var P=L(R,1),O=L(k,1);for(k=L(k,2),R=L(R,2);!T(k);){var D=O.add(k);D.l(S)<=0&&(P=P.add(R),O=D),k=L(k,1),R=L(R,1)}return b=w(S,P.j(b)),new E(P,b)}for(P=h;S.l(b)>=0;){for(R=Math.max(1,Math.floor(S.m()/b.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=c(R),D=O.j(b);p(D)||D.l(S)>0;)R-=k,O=c(R),D=O.j(b);T(O)&&(O=f),P=P.add(O),S=w(S,D)}return new E(P,S)}t.B=function(S){return x(this,S).h},t.and=function(S){const b=Math.max(this.g.length,S.g.length),R=[];for(let k=0;k<b;k++)R[k]=this.i(k)&S.i(k);return new o(R,this.h&S.h)},t.or=function(S){const b=Math.max(this.g.length,S.g.length),R=[];for(let k=0;k<b;k++)R[k]=this.i(k)|S.i(k);return new o(R,this.h|S.h)},t.xor=function(S){const b=Math.max(this.g.length,S.g.length),R=[];for(let k=0;k<b;k++)R[k]=this.i(k)^S.i(k);return new o(R,this.h^S.h)};function C(S){const b=S.g.length+1,R=[];for(let k=0;k<b;k++)R[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(R,S.h)}function L(S,b){const R=b>>5;b%=32;const k=S.g.length-R,P=[];for(let O=0;O<k;O++)P[O]=b>0?S.i(O+R)>>>b|S.i(O+R+1)<<32-b:S.i(O+R);return new o(P,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,FD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Do=o}).apply(typeof ab<"u"?ab:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UD,Hu,jD,Gf,Pw,$D,BD,zD;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var g=0;g<u.length;++g){var I=u[g];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var I=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var F=u[N];if(!(F in I))break e;I=I[F]}u=u[u.length-1],N=I[u],g=g(N),g!=N&&g!=null&&e(I,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var I=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&I.push([N,g[N]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,I){return u.call.apply(u.bind,arguments)}function c(u,g,I){return c=l,c.apply(null,arguments)}function d(u,g){var I=Array.prototype.slice.call(arguments,1);return function(){var N=I.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function h(u,g){function I(){}I.prototype=g.prototype,u.Z=g.prototype,u.prototype=new I,u.prototype.constructor=u,u.Ob=function(N,F,B){for(var he=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)he[Ye-2]=arguments[Ye];return g.prototype[F].apply(N,he)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const g=u.length;if(g>0){const I=Array(g);for(let N=0;N<g;N++)I[N]=u[N];return I}return[]}function T(u,g){for(let N=1;N<arguments.length;N++){const F=arguments[N];var I=typeof F;if(I=I!="object"?I:F?Array.isArray(F)?"array":I:"null",I=="array"||I=="object"&&typeof F.length=="number"){I=u.length||0;const B=F.length||0;u.length=I+B;for(let he=0;he<B;he++)u[I+he]=F[he]}else u.push(F)}}class p{constructor(g,I){this.i=g,this.j=I,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){o.setTimeout(()=>{throw u},0)}function w(){var u=S;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class y{constructor(){this.h=this.g=null}add(g,I){const N=E.get();N.set(g,I),this.h?this.h.next=N:this.g=N,this.h=N}}var E=new p(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(g,I){this.h=g,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let C,L=!1,S=new y,b=()=>{const u=Promise.resolve(void 0);C=()=>{u.then(R)}};function R(){for(var u;u=w();){try{u.h.call(u.g)}catch(I){v(I)}var g=E;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const I=()=>{};o.addEventListener("test",I,g),o.removeEventListener("test",I,g)}catch{}return u}();function D(u){return/^[\s\xa0]*$/.test(u)}function j(u,g){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}h(j,P),j.prototype.init=function(u,g){const I=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(I=="mouseover"?g=u.fromElement:I=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),ye=0;function _e(u,g,I,N,F){this.listener=u,this.proxy=null,this.src=g,this.type=I,this.capture=!!N,this.ha=F,this.key=++ye,this.da=this.fa=!1}function W(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function z(u,g,I){for(const N in u)g.call(I,u[N],N,u)}function K(u,g){for(const I in u)g.call(void 0,u[I],I,u)}function Ae(u){const g={};for(const I in u)g[I]=u[I];return g}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(u,g){let I,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(I in N)u[I]=N[I];for(let B=0;B<pe.length;B++)I=pe[B],Object.prototype.hasOwnProperty.call(N,I)&&(u[I]=N[I])}}function we(u){this.src=u,this.g={},this.h=0}we.prototype.add=function(u,g,I,N,F){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const he=at(u,g,N,F);return he>-1?(g=u[he],I||(g.fa=!1)):(g=new _e(g,this.src,B,!!N,F),g.fa=I,u.push(g)),g};function Le(u,g){const I=g.type;if(I in u.g){var N=u.g[I],F=Array.prototype.indexOf.call(N,g,void 0),B;(B=F>=0)&&Array.prototype.splice.call(N,F,1),B&&(W(g),u.g[I].length==0&&(delete u.g[I],u.h--))}}function at(u,g,I,N){for(let F=0;F<u.length;++F){const B=u[F];if(!B.da&&B.listener==g&&B.capture==!!I&&B.ha==N)return F}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Fe={};function je(u,g,I,N,F){if(Array.isArray(g)){for(let B=0;B<g.length;B++)je(u,g[B],I,N,F);return null}return I=cs(I),u&&u[oe]?u.J(g,I,a(N)?!!N.capture:!1,F):qt(u,g,I,!1,N,F)}function qt(u,g,I,N,F,B){if(!g)throw Error("Invalid event type");const he=a(F)?!!F.capture:!!F;let Ye=Ve(u);if(Ye||(u[be]=Ye=new we(u)),I=Ye.add(g,I,N,he,B),I.proxy)return I;if(N=nn(),I.proxy=N,N.src=u,N.listener=I,u.addEventListener)O||(F=he),F===void 0&&(F=!1),u.addEventListener(g.toString(),N,F);else if(u.attachEvent)u.attachEvent(Kn(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return I}function nn(){function u(I){return g.call(u.src,u.listener,I)}const g=Dr;return u}function En(u,g,I,N,F){if(Array.isArray(g))for(var B=0;B<g.length;B++)En(u,g[B],I,N,F);else N=a(N)?!!N.capture:!!N,I=cs(I),u&&u[oe]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],I=at(g,I,N,F),I>-1&&(W(g[I]),Array.prototype.splice.call(g,I,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=Ve(u))&&(g=u.g[g.toString()],u=-1,g&&(u=at(g,I,N,F)),(I=u>-1?g[u]:null)&&gn(I))}function gn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[oe])Le(g.i,u);else{var I=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(I,N,u.capture):g.detachEvent?g.detachEvent(Kn(I),N):g.addListener&&g.removeListener&&g.removeListener(N),(I=Ve(g))?(Le(I,u),I.h==0&&(I.src=null,g[be]=null)):W(u)}}}function Kn(u){return u in Fe?Fe[u]:Fe[u]="on"+u}function Dr(u,g){if(u.da)u=!0;else{g=new j(g,this);const I=u.listener,N=u.ha||u.src;u.fa&&gn(u),u=I.call(N,g)}return u}function Ve(u){return u=u[be],u instanceof we?u:null}var Pn="__closure_events_fn_"+(Math.random()*1e9>>>0);function cs(u){return typeof u=="function"?u:(u[Pn]||(u[Pn]=function(g){return u.handleEvent(g)}),u[Pn])}function Nt(){k.call(this),this.i=new we(this),this.M=this,this.G=null}h(Nt,k),Nt.prototype[oe]=!0,Nt.prototype.removeEventListener=function(u,g,I,N){En(this,u,g,I,N)};function rn(u,g){var I,N=u.G;if(N)for(I=[];N;N=N.G)I.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new P(g,u);else if(g instanceof P)g.target=g.target||u;else{var F=g;g=new P(N,u),V(g,F)}F=!0;let B,he;if(I)for(he=I.length-1;he>=0;he--)B=g.g=I[he],F=yr(B,N,!0,g)&&F;if(B=g.g=u,F=yr(B,N,!0,g)&&F,F=yr(B,N,!1,g)&&F,I)for(he=0;he<I.length;he++)B=g.g=I[he],F=yr(B,N,!1,g)&&F}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const I=u.g[g];for(let N=0;N<I.length;N++)W(I[N]);delete u.g[g],u.h--}}this.G=null},Nt.prototype.J=function(u,g,I,N){return this.i.add(String(u),g,!1,I,N)},Nt.prototype.K=function(u,g,I,N){return this.i.add(String(u),g,!0,I,N)};function yr(u,g,I,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let B=0;B<g.length;++B){const he=g[B];if(he&&!he.da&&he.capture==I){const Ye=he.listener,Sn=he.ha||he.src;he.fa&&Le(u.i,he),F=Ye.call(Sn,N)!==!1&&F}}return F&&!N.defaultPrevented}function $i(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function vr(u){u.g=$i(()=>{u.g=null,u.i&&(u.i=!1,vr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ta extends k{constructor(g,I){super(),this.m=g,this.l=I,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(u){k.call(this),this.h=u,this.g={}}h(Ns,k);var Fn=[];function kr(u){z(u.g,function(g,I){this.g.hasOwnProperty(I)&&gn(g)},u),u.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),kr(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sn=o.JSON.stringify,pl=o.JSON.parse,oi=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ai(){}function na(){}var Zr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nr(){P.call(this,"d")}h(Nr,P);function J(){P.call(this,"c")}h(J,P);var $={},H=null;function te(){return H=H||new Nt}$.Ia="serverreachability";function se(u){P.call(this,$.Ia,u)}h(se,P);function ne(u){const g=te();rn(g,new se(g))}$.STAT_EVENT="statevent";function fe(u,g){P.call(this,$.STAT_EVENT,u),this.stat=g}h(fe,P);function X(u){const g=te();rn(g,new fe(g,u))}$.Ja="timingevent";function ge(u,g){P.call(this,$.Ja,u),this.size=g}h(ge,P);function Pe(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Y(){this.g=!0}Y.prototype.ua=function(){this.g=!1};function le(u,g,I,N,F,B){u.info(function(){if(u.g)if(B){var he="",Ye=B.split("&");for(let bt=0;bt<Ye.length;bt++){var Sn=Ye[bt].split("=");if(Sn.length>1){const Dn=Sn[0];Sn=Sn[1];const Os=Dn.split("_");he=Os.length>=2&&Os[1]=="type"?he+(Dn+"="+Sn+"&"):he+(Dn+"=redacted&")}}}else he=null;else he=B;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+g+`
`+I+`
`+he})}function ue(u,g,I,N,F,B,he){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+g+`
`+I+`
`+B+" "+he})}function ce(u,g,I,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ce(u,I)+(N?" "+N:"")})}function ae(u,g){u.info(function(){return"TIMEOUT: "+g})}Y.prototype.info=function(){};function Ce(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var I=B[u];if(!(I.length<2)){var N=I[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let he=1;he<N.length;he++)N[he]=""}}}}return sn(B)}catch{return g}}var st={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},It={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},St;function mt(){}h(mt,ai),mt.prototype.g=function(){return new XMLHttpRequest},St=new mt;function qe(u){return encodeURIComponent(String(u))}function Ot(u){var g=1;u=u.split(":");const I=[];for(;g>0&&u.length;)I.push(u.shift()),g--;return u.length&&I.push(u.join(":")),I}function Ht(u,g,I,N){this.j=u,this.i=g,this.l=I,this.S=N||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}var yt={},Ze={};function $e(u,g,I){u.M=1,u.A=Or(yn(g)),u.u=I,u.R=!0,de(u,null)}function de(u,g){u.F=Date.now(),xt(u),u.B=yn(u.A);var I=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),aT(I.i,"t",N),u.C=0,I=u.j.L,u.h=new He,u.g=bT(u.j,I?g:null,!u.u),u.P>0&&(u.O=new ta(c(u.Y,u,u.g),u.P)),g=u.V,I=u.g,N=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Fn[0]=F.toString()),F=Fn);for(let B=0;B<F.length;B++){const he=je(I,F[B],N||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=u.J?Ae(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ne(),le(u.i,u.v,u.B,u.l,u.S,u.u)}Ht.prototype.ba=function(u){u=u.target;const g=this.O;g&&zi(u)==3?g.j():this.Y(u)},Ht.prototype.Y=function(u){try{if(u==this.g)e:{const Ye=zi(this.g),Sn=this.g.ya(),bt=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||mT(this.g)))){this.K||Ye!=4||Sn==7||(Sn==8||bt<=0?ne(3):ne(2)),pt(this);var g=this.g.ca();this.X=g;var I=ct(this);if(this.o=g==200,ue(this.i,this.v,this.B,this.l,this.S,Ye,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var B=N;break t}}B=null}if(u=B)ce(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ge(this,u);else{this.o=!1,this.m=3,X(12),xe(this),Tn(this);break e}}if(this.R){u=!0;let Dn;for(;!this.K&&this.C<I.length;)if(Dn=jt(this,I),Dn==Ze){Ye==4&&(this.m=4,X(14),u=!1),ce(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==yt){this.m=4,X(15),ce(this.i,this.l,I,"[Invalid Chunk]"),u=!1;break}else ce(this.i,this.l,Dn,null),Ge(this,Dn);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||I.length!=0||this.h.h||(this.m=1,X(16),u=!1),this.o=this.o&&u,!u)ce(this.i,this.l,I,"[Invalid Chunked Response]"),xe(this),Tn(this);else if(I.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Bg(he),he.P=!0,X(11))}}else ce(this.i,this.l,I,null),Ge(this,I);Ye==4&&xe(this),this.o&&!this.K&&(Ye==4?ET(this.j,this):(this.o=!1,xt(this)))}else J2(this.g),g==400&&I.indexOf("Unknown SID")>0?(this.m=3,X(12)):(this.m=0,X(13)),xe(this),Tn(this)}}}catch{}finally{}};function ct(u){if(!vt(u))return u.g.la();const g=mT(u.g);if(g==="")return"";let I="";const N=g.length,F=zi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return xe(u),Tn(u),"";u.h.i=new o.TextDecoder}for(let B=0;B<N;B++)u.h.h=!0,I+=u.h.i.decode(g[B],{stream:!(F&&B==N-1)});return g.length=0,u.h.g+=I,u.C=0,u.h.g}function vt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jt(u,g){var I=u.C,N=g.indexOf(`
`,I);return N==-1?Ze:(I=Number(g.substring(I,N)),isNaN(I)?yt:(N+=1,N+I>g.length?Ze:(g=g.slice(N,N+I),u.C=N+I,g)))}Ht.prototype.cancel=function(){this.K=!0,xe(this)};function xt(u){u.T=Date.now()+u.H,wr(u,u.H)}function wr(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Pe(c(u.aa,u),g)}function pt(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ht.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ae(this.i,this.B),this.M!=2&&(ne(),X(17)),xe(this),this.m=2,Tn(this)):wr(this,this.T-u)};function Tn(u){u.j.I==0||u.K||ET(u.j,u)}function xe(u){pt(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,kr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ge(u,g){try{var I=u.j;if(I.I!=0&&(I.g==u||In(I.h,u))){if(!u.L&&In(I.h,u)&&I.I==3){try{var N=I.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<u.F)$h(I),Uh(I);else break e;$g(I),X(18)}}else I.xa=F[1],0<I.xa-I.K&&F[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=Pe(c(I.Va,I),6e3));Rt(I.h)<=1&&I.ta&&(I.ta=void 0)}else ia(I,11)}else if((u.L||I.g==u)&&$h(I),!D(g))for(F=I.Ba.g.parse(g),g=0;g<F.length;g++){let bt=F[g];const Dn=bt[0];if(!(Dn<=I.K))if(I.K=Dn,bt=bt[1],I.I==2)if(bt[0]=="c"){I.M=bt[1],I.ba=bt[2];const Os=bt[3];Os!=null&&(I.ka=Os,I.j.info("VER="+I.ka));const oa=bt[4];oa!=null&&(I.za=oa,I.j.info("SVER="+I.za));const Wi=bt[5];Wi!=null&&typeof Wi=="number"&&Wi>0&&(N=1.5*Wi,I.O=N,I.j.info("backChannelRequestTimeoutMs_="+N)),N=I;const qi=u.g;if(qi){const zh=qi.g?qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zh){var B=N.h;B.g||zh.indexOf("spdy")==-1&&zh.indexOf("quic")==-1&&zh.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Un(B,B.h),B.h=null))}if(N.G){const zg=qi.g?qi.g.getResponseHeader("X-HTTP-Session-Id"):null;zg&&(N.wa=zg,De(N.J,N.G,zg))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-u.F,I.j.info("Handshake RTT: "+I.T+"ms")),N=I;var he=u;if(N.na=ST(N,N.L?N.ba:null,N.W),he.L){Cn(N.h,he);var Ye=he,Sn=N.O;Sn&&(Ye.H=Sn),Ye.D&&(pt(Ye),xt(Ye)),N.g=he}else wT(N);I.i.length>0&&jh(I)}else bt[0]!="stop"&&bt[0]!="close"||ia(I,7);else I.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?ia(I,7):jg(I):bt[0]!="noop"&&I.l&&I.l.qa(bt),I.A=0)}}ne(4)}catch{}}var Kt=class{constructor(u,g){this.g=u,this.map=g}};function ut(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Rt(u){return u.h?1:u.g?u.g.size:0}function In(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Un(u,g){u.g?u.g.add(g):u.h=g}function Cn(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ut.prototype.cancel=function(){if(this.i=or(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function or(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const I of u.g.values())g=g.concat(I.G);return g}return m(u.i)}var ar=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _r(u,g){if(u){u=u.split("&");for(let I=0;I<u.length;I++){const N=u[I].indexOf("=");let F,B=null;N>=0?(F=u[I].substring(0,N),B=u[I].substring(N+1)):F=u[I],g(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Gt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Gt?(this.l=u.l,us(this,u.j),this.o=u.o,this.g=u.g,li(this,u.u),this.h=u.h,ra(this,lT(u.i)),this.m=u.m):u&&(g=String(u).match(ar))?(this.l=!1,us(this,g[1]||"",!0),this.o=mu(g[2]||""),this.g=mu(g[3]||"",!0),li(this,g[4]),this.h=mu(g[5]||"",!0),ra(this,g[6]||"",!0),this.m=mu(g[7]||"")):(this.l=!1,this.i=new gu(null,this.l))}Gt.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(pu(g,rT,!0),":");var I=this.g;return(I||g=="file")&&(u.push("//"),(g=this.o)&&u.push(pu(g,rT,!0),"@"),u.push(qe(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&u.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&u.push("/"),u.push(pu(I,I.charAt(0)=="/"?B2:$2,!0))),(I=this.i.toString())&&u.push("?",I),(I=this.m)&&u.push("#",pu(I,W2)),u.join("")},Gt.prototype.resolve=function(u){const g=yn(this);let I=!!u.j;I?us(g,u.j):I=!!u.o,I?g.o=u.o:I=!!u.g,I?g.g=u.g:I=u.u!=null;var N=u.h;if(I)li(g,u.u);else if(I=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=g.h.lastIndexOf("/");F!=-1&&(N=g.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let he=0;he<F.length;){const Ye=F[he++];Ye=="."?N&&he==F.length&&B.push(""):Ye==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),N&&he==F.length&&B.push("")):(B.push(Ye),N=!0)}N=B.join("/")}else N=F}return I?g.h=N:I=u.i.toString()!=="",I?ra(g,lT(u.i)):I=!!u.m,I&&(g.m=u.m),g};function yn(u){return new Gt(u)}function us(u,g,I){u.j=I?mu(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function li(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ra(u,g,I){g instanceof gu?(u.i=g,q2(u.i,u.l)):(I||(g=pu(g,z2)),u.i=new gu(g,u.l))}function De(u,g,I){u.i.set(g,I)}function Or(u){return De(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function mu(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function pu(u,g,I){return typeof u=="string"?(u=encodeURI(u).replace(g,j2),I&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function j2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var rT=/[#\/\?@]/g,$2=/[#\?:]/g,B2=/[#\?]/g,z2=/[#\?@]/g,W2=/#/g;function gu(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function sa(u){u.g||(u.g=new Map,u.h=0,u.i&&_r(u.i,function(g,I){u.add(decodeURIComponent(g.replace(/\+/g," ")),I)}))}t=gu.prototype,t.add=function(u,g){sa(this),this.i=null,u=gl(this,u);let I=this.g.get(u);return I||this.g.set(u,I=[]),I.push(g),this.h+=1,this};function sT(u,g){sa(u),g=gl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function iT(u,g){return sa(u),g=gl(u,g),u.g.has(g)}t.forEach=function(u,g){sa(this),this.g.forEach(function(I,N){I.forEach(function(F){u.call(g,F,N,this)},this)},this)};function oT(u,g){sa(u);let I=[];if(typeof g=="string")iT(u,g)&&(I=I.concat(u.g.get(gl(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)I=I.concat(u[g]);return I}t.set=function(u,g){return sa(this),this.i=null,u=gl(this,u),iT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=oT(this,u),u.length>0?String(u[0]):g):g};function aT(u,g,I){sT(u,g),I.length>0&&(u.i=null,u.g.set(gl(u,g),m(I)),u.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var I=g[N];const F=qe(I);I=oT(this,I);for(let B=0;B<I.length;B++){let he=F;I[B]!==""&&(he+="="+qe(I[B])),u.push(he)}}return this.i=u.join("&")};function lT(u){const g=new gu;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function gl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function q2(u,g){g&&!u.j&&(sa(u),u.i=null,u.g.forEach(function(I,N){const F=N.toLowerCase();N!=F&&(sT(this,N),aT(this,F,I))},u)),u.j=g}function H2(u,g){const I=new Y;if(o.Image){const N=new Image;N.onload=d(Bi,I,"TestLoadImage: loaded",!0,g,N),N.onerror=d(Bi,I,"TestLoadImage: error",!1,g,N),N.onabort=d(Bi,I,"TestLoadImage: abort",!1,g,N),N.ontimeout=d(Bi,I,"TestLoadImage: timeout",!1,g,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function K2(u,g){const I=new Y,N=new AbortController,F=setTimeout(()=>{N.abort(),Bi(I,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(B=>{clearTimeout(F),B.ok?Bi(I,"TestPingServer: ok",!0,g):Bi(I,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Bi(I,"TestPingServer: error",!1,g)})}function Bi(u,g,I,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(I)}catch{}}function G2(){this.g=new oi}function Fg(u){this.i=u.Sb||null,this.h=u.ab||!1}h(Fg,ai),Fg.prototype.g=function(){return new Mh(this.i,this.h)};function Mh(u,g){Nt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Mh,Nt),t=Mh.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,vu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yu(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vu(this)),this.g&&(this.readyState=3,vu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function cT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?yu(this):vu(this),this.readyState==3&&cT(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,yu(this))},t.Na=function(u){this.g&&(this.response=u,yu(this))},t.ga=function(){this.g&&yu(this)};function yu(u){u.readyState=4,u.l=null,u.j=null,u.B=null,vu(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var I=g.next();!I.done;)I=I.value,u.push(I[0]+": "+I[1]),I=g.next();return u.join(`\r
`)};function vu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function uT(u){let g="";return z(u,function(I,N){g+=N,g+=":",g+=I,g+=`\r
`}),g}function Ug(u,g,I){e:{for(N in I){var N=!1;break e}N=!0}N||(I=uT(I),typeof u=="string"?I!=null&&qe(I):De(u,g,I))}function on(u){Nt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(on,Nt);var Q2=/^https?$/i,Y2=["POST","PUT"];t=on.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,I,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():St.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){dT(this,B);return}if(u=I||"",I=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)I.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const B of N.keys())I.set(B,N.get(B));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(I.keys()).find(B=>B.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(Y2,g,void 0)>=0)||N||F||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,he]of I)this.g.setRequestHeader(B,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){dT(this,B)}};function dT(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,hT(u),Fh(u)}function hT(u){u.A||(u.A=!0,rn(u,"complete"),rn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,rn(this,"complete"),rn(this,"abort"),Fh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fh(this,!0)),on.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fT(this):this.Xa())},t.Xa=function(){fT(this)};function fT(u){if(u.h&&typeof i<"u"){if(u.v&&zi(u)==4)setTimeout(u.Ca.bind(u),0);else if(rn(u,"readystatechange"),zi(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var I;if(!(I=g)){var N;if(N=B===0){let he=String(u.D).match(ar)[1]||null;!he&&o.self&&o.self.location&&(he=o.self.location.protocol.slice(0,-1)),N=!Q2.test(he?he.toLowerCase():"")}I=N}if(I)rn(u,"complete"),rn(u,"success");else{u.o=6;try{var F=zi(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",hT(u)}}finally{Fh(u)}}}}function Fh(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const I=u.g;u.g=null,g||rn(u,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zi(u){return u.g?u.g.readyState:0}t.ca=function(){try{return zi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),pl(g)}};function mT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function J2(u){const g={};u=(u.g&&zi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(D(u[N]))continue;var I=Ot(u[N]);const F=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const B=g[F]||[];g[F]=B,B.push(I)}K(g,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wu(u,g,I){return I&&I.internalChannelParams&&I.internalChannelParams[u]||g}function pT(u){this.za=0,this.i=[],this.j=new Y,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wu("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wu("baseRetryDelayMs",5e3,u),this.Za=wu("retryDelaySeedMs",1e4,u),this.Ta=wu("forwardChannelMaxRetries",2,u),this.va=wu("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ut(u&&u.concurrentRequestLimit),this.Ba=new G2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pT.prototype,t.ka=8,t.I=1,t.connect=function(u,g,I,N){X(0),this.W=u,this.H=g||{},I&&N!==void 0&&(this.H.OSID=I,this.H.OAID=N),this.F=this.X,this.J=ST(this,null,this.W),jh(this)};function jg(u){if(gT(u),u.I==3){var g=u.V++,I=yn(u.J);if(De(I,"SID",u.M),De(I,"RID",g),De(I,"TYPE","terminate"),_u(u,I),g=new Ht(u,u.j,g),g.M=2,g.A=Or(yn(I)),I=!1,o.navigator&&o.navigator.sendBeacon)try{I=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!I&&o.Image&&(new Image().src=g.A,I=!0),I||(g.g=bT(g.j,null),g.g.ea(g.A)),g.F=Date.now(),xt(g)}IT(u)}function Uh(u){u.g&&(Bg(u),u.g.cancel(),u.g=null)}function gT(u){Uh(u),u.v&&(o.clearTimeout(u.v),u.v=null),$h(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function jh(u){if(!wt(u.h)&&!u.m){u.m=!0;var g=u.Ea;C||b(),L||(C(),L=!0),S.add(g,u),u.D=0}}function X2(u,g){return Rt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Pe(c(u.Ea,u,g),TT(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Ht(this,this.j,u);let B=this.o;if(this.U&&(B?(B=Ae(B),V(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var g=0,I=0;I<this.i.length;I++){t:{var N=this.i[I];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=I;break e}if(g===4096||I===this.i.length-1){g=I+1;break e}}g=1e3}else g=1e3;g=vT(this,F,g),I=yn(this.J),De(I,"RID",u),De(I,"CVER",22),this.G&&De(I,"X-HTTP-Session-Id",this.G),_u(this,I),B&&(this.R?g="headers="+qe(uT(B))+"&"+g:this.u&&Ug(I,this.u,B)),Un(this.h,F),this.Ra&&De(I,"TYPE","init"),this.S?(De(I,"$req",g),De(I,"SID","null"),F.U=!0,$e(F,I,null)):$e(F,I,g),this.I=2}}else this.I==3&&(u?yT(this,u):this.i.length==0||wt(this.h)||yT(this))};function yT(u,g){var I;g?I=g.l:I=u.V++;const N=yn(u.J);De(N,"SID",u.M),De(N,"RID",I),De(N,"AID",u.K),_u(u,N),u.u&&u.o&&Ug(N,u.u,u.o),I=new Ht(u,u.j,I,u.D+1),u.u===null&&(I.J=u.o),g&&(u.i=g.G.concat(u.i)),g=vT(u,I,1e3),I.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Un(u.h,I),$e(I,N,g)}function _u(u,g){u.H&&z(u.H,function(I,N){De(g,N,I)}),u.l&&z({},function(I,N){De(g,N,I)})}function vT(u,g,I){I=Math.min(u.i.length,I);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var F=u.i;let Ye=-1;for(;;){const Sn=["count="+I];Ye==-1?I>0?(Ye=F[0].g,Sn.push("ofs="+Ye)):Ye=0:Sn.push("ofs="+Ye);let bt=!0;for(let Dn=0;Dn<I;Dn++){var B=F[Dn].g;const Os=F[Dn].map;if(B-=Ye,B<0)Ye=Math.max(0,F[Dn].g-100),bt=!1;else try{B="req"+B+"_"||"";try{var he=Os instanceof Map?Os:Object.entries(Os);for(const[oa,Wi]of he){let qi=Wi;a(Wi)&&(qi=sn(Wi)),Sn.push(B+oa+"="+encodeURIComponent(qi))}}catch(oa){throw Sn.push(B+"type="+encodeURIComponent("_badmap")),oa}}catch{N&&N(Os)}}if(bt){he=Sn.join("&");break e}}he=void 0}return u=u.i.splice(0,I),g.G=u,he}function wT(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;C||b(),L||(C(),L=!0),S.add(g,u),u.A=0}}function $g(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Pe(c(u.Da,u),TT(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,_T(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Pe(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,X(10),Uh(this),_T(this))};function Bg(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function _T(u){u.g=new Ht(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=yn(u.na);De(g,"RID","rpc"),De(g,"SID",u.M),De(g,"AID",u.K),De(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&De(g,"TO",u.ia),De(g,"TYPE","xmlhttp"),_u(u,g),u.u&&u.o&&Ug(g,u.u,u.o),u.O&&(u.g.H=u.O);var I=u.g;u=u.ba,I.M=1,I.A=Or(yn(g)),I.u=null,I.R=!0,de(I,u)}t.Va=function(){this.C!=null&&(this.C=null,Uh(this),$g(this),X(19))};function $h(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function ET(u,g){var I=null;if(u.g==g){$h(u),Bg(u),u.g=null;var N=2}else if(In(u.h,g))I=g.G,Cn(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){I=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;N=te(),rn(N,new ge(N,I)),jh(u)}else wT(u);else if(F=g.m,F==3||F==0&&g.X>0||!(N==1&&X2(u,g)||N==2&&$g(u)))switch(I&&I.length>0&&(g=u.h,g.i=g.i.concat(I)),F){case 1:ia(u,5);break;case 4:ia(u,10);break;case 3:ia(u,6);break;default:ia(u,2)}}}function TT(u,g){let I=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(I*=2),I*g}function ia(u,g){if(u.j.info("Error code "+g),g==2){var I=c(u.bb,u),N=u.Ua;const F=!N;N=new Gt(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||us(N,"https"),Or(N),F?H2(N.toString(),I):K2(N.toString(),I)}else X(2);u.I=0,u.l&&u.l.pa(g),IT(u),gT(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),X(2)):(this.j.info("Failed to ping google.com"),X(1))};function IT(u){if(u.I=0,u.ja=[],u.l){const g=or(u.h);(g.length!=0||u.i.length!=0)&&(T(u.ja,g),T(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function ST(u,g,I){var N=I instanceof Gt?yn(I):new Gt(I);if(N.g!="")g&&(N.g=g+"."+N.g),li(N,N.u);else{var F=o.location;N=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const B=new Gt(null);N&&us(B,N),g&&(B.g=g),F&&li(B,F),I&&(B.h=I),N=B}return I=u.G,g=u.wa,I&&g&&De(N,I,g),De(N,"VER",u.ka),_u(u,N),N}function bT(u,g,I){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new on(new Fg({ab:I})):new on(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function AT(){}t=AT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Bh(){}Bh.prototype.g=function(u,g){return new Lr(u,g)};function Lr(u,g){Nt.call(this),this.g=new pT(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!D(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new yl(this)}h(Lr,Nt),Lr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lr.prototype.close=function(){jg(this.g)},Lr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var I={};I.__data__=u,u=I}else this.v&&(I={},I.__data__=sn(u),u=I);g.i.push(new Kt(g.Ya++,u)),g.I==3&&jh(g)},Lr.prototype.N=function(){this.g.l=null,delete this.j,jg(this.g),delete this.g,Lr.Z.N.call(this)};function xT(u){Nr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const I in g){u=I;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}h(xT,Nr);function RT(){J.call(this),this.status=1}h(RT,J);function yl(u){this.g=u}h(yl,AT),yl.prototype.ra=function(){rn(this.g,"a")},yl.prototype.qa=function(u){rn(this.g,new xT(u))},yl.prototype.pa=function(u){rn(this.g,new RT)},yl.prototype.oa=function(){rn(this.g,"b")},Bh.prototype.createWebChannel=Bh.prototype.g,Lr.prototype.send=Lr.prototype.o,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,zD=function(){return new Bh},BD=function(){return te()},$D=$,Pw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,Gf=st,It.COMPLETE="complete",jD=It,na.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Hu=na,on.prototype.listenOnce=on.prototype.K,on.prototype.getLastError=on.prototype.Ha,on.prototype.getLastErrorCode=on.prototype.ya,on.prototype.getStatus=on.prototype.ca,on.prototype.getResponseJson=on.prototype.La,on.prototype.getResponseText=on.prototype.la,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Fa,UD=on}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});const lb="@firebase/firestore",cb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new sg("@firebase/firestore");function Cl(){return Uo.logLevel}function WD(t){Uo.setLogLevel(t)}function Z(t,...e){if(Uo.logLevel<=tt.DEBUG){const n=e.map(z0);Uo.debug(`Firestore (${tu}): ${t}`,...n)}}function mn(t,...e){if(Uo.logLevel<=tt.ERROR){const n=e.map(z0);Uo.error(`Firestore (${tu}): ${t}`,...n)}}function jo(t,...e){if(Uo.logLevel<=tt.WARN){const n=e.map(z0);Uo.warn(`Firestore (${tu}): ${t}`,...n)}}function z0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qD(t,r,n)}function qD(t,e,n){let r=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mn(r),new Error(r)}function ke(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||qD(e,s,r)}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zn.UNAUTHENTICATED))}shutdown(){}}class B9{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new os;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new os,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new os)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new $9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class z9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new z9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ub{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ke(this.o===void 0,3512);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ub(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ub(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=H9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function Cw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Vy(s)===Vy(i)?We(s,i):Vy(s)?1:-1}return We(t.length,e.length)}const K9=55296,G9=57343;function Vy(t){const e=t.charCodeAt(0);return e>=K9&&e<=G9}function Sc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function KD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ms.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return We(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),s=Ms.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):Cw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Do.fromString(e.substring(4,e.length-2))}}class ht extends Ms{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const Q9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Ms{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return Q9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===db}static keyField(){return new zt([db])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new re(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new re(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(ht.fromString(e))}static fromName(e){return new me(ht.fromString(e).popFirst(5))}static empty(){return new me(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t,e,n){if(!n)throw new re(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QD(t,e,n,r){if(e===!0&&r===!0)throw new re(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hb(t){if(!me.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fb(t){if(me.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function YD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lg(t);throw new re(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Y9(t,e){if(e<=0)throw new re(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){const n={typeString:t};return e&&(n.value=e),n}function Th(t,e){if(!YD(t))throw new re(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new re(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=-62135596800,pb=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*pb);return new dt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mb)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pb}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Th(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:_n("string",dt._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new dt(0,0))}static max(){return new Me(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=-1;class ep{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Dw(t){return t.fields.find(e=>e.kind===2)}function da(t){return t.fields.filter(e=>e.kind!==2)}ep.UNKNOWN_ID=-1;class Qf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Qd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Qd(0,Yr.min())}}function JD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new Yr(s,me.empty(),e)}function XD(t){return new Yr(t.readTime,t.key,bc)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(Me.min(),me.empty(),bc)}static max(){return new Yr(Me.max(),me.empty(),bc)}}function W0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ek{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==ZD)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="SimpleDb";class cg{static open(e,n,r,s){try{return new cg(n,e.transaction(s,r))}catch(i){throw new cd(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new os,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new cd(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=q0(r.target.error);this.S.reject(new cd(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Z(Mr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new X9(n)}}class ko{static delete(e){return Z(Mr,"Removing database:",e),ma(YC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!V0())return!1;if(ko.F())return!0;const e=Hn(),n=ko.M(e),r=0<n&&n<10,s=tk(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,ko.M(Hn())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Z(Mr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new cd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new re(q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new re(q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new cd(e,o))},s.onupgradeneeded=i=>{Z(Mr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{Z(Mr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=cg.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.C(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Z(Mr,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class J9{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ma(this.U.delete())}}class cd extends re{constructor(e,n){super(q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xo(t){return t.name==="IndexedDbTransactionError"}class X9{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Z(Mr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Z(Mr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ma(r)}add(e){return Z(Mr,"ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next(n=>(n===void 0&&(n=null),Z(Mr,"GET",this.store.name,e,n),n))}delete(e){return Z(Mr,"DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return Z(Mr,"COUNT",this.store.name),ma(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,n){Z(Mr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=q0(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new J9(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ma(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=q0(r.target.error);n(s)}})}let gb=!1;function q0(t){const e=ko.M(Hn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gb||(gb=!0,setTimeout(()=>{throw r},0)),r}}return t}const ud="IndexBackfiller";class Z9{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Z(ud,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();Z(ud,`Documents written: ${n}`)}catch(n){Xo(n)?Z(ud,"Ignoring IndexedDB error during index backfill: ",n):await Jo(n)}await this.re(6e4)})}}class ez{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Z(ud,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(Z(ud,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=XD(i);W0(o,r)>0&&(r=o)}),new Yr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}br.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=-1;function ug(t){return t==null}function Yd(t){return t===0&&1/t==-1/0}function nk(t){return typeof t=="number"&&Number.isInteger(t)&&!Yd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="";function rr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yb(e)),e=tz(t.get(n),e);return yb(e)}function tz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case tp:n+="";break;default:n+=i}}return n}function yb(t){return t+tp+""}function qs(t){const e=t.length;if(ke(e>=2,64408,{path:t}),e===2)return ke(t.charAt(0)===tp&&t.charAt(1)==="",56145,{path:t}),ht.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(tp,i);switch((o<0||o>n)&&Ie(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:Ie(61167,{path:t})}i=o+2}return new ht(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="remoteDocuments",Ih="owner",_l="owner",Jd="mutationQueues",nz="userId",ys="mutations",vb="batchId",Aa="userMutationsIndex",wb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e){return[t,rr(e)]}function rk(t,e,n){return[t,rr(e),n]}const rz={},Ac="documentMutations",np="remoteDocumentsV14",sz=["prefixPath","collectionGroup","readTime","documentId"],Jf="documentKeyIndex",iz=["prefixPath","collectionGroup","documentId"],sk="collectionGroupIndex",oz=["collectionGroup","readTime","prefixPath","documentId"],Xd="remoteDocumentGlobal",kw="remoteDocumentGlobalKey",xc="targets",ik="queryTargetsIndex",az=["canonicalId","targetId"],Rc="targetDocuments",lz=["targetId","path"],H0="documentTargetsIndex",cz=["path","targetId"],rp="targetGlobalKey",Wa="targetGlobal",Zd="collectionParents",uz=["collectionId","parent"],Pc="clientMetadata",dz="clientId",dg="bundles",hz="bundleId",hg="namedQueries",fz="name",K0="indexConfiguration",mz="indexId",Nw="collectionGroupIndex",pz="collectionGroup",dd="indexState",gz=["indexId","uid"],ok="sequenceNumberIndex",yz=["uid","sequenceNumber"],hd="indexEntries",vz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ak="documentKeyIndex",wz=["indexId","uid","orderedDocumentKey"],fg="documentOverlays",_z=["userId","collectionPath","documentId"],Ow="collectionPathOverlayIndex",Ez=["userId","collectionPath","largestBatchId"],lk="collectionGroupOverlayIndex",Tz=["userId","collectionGroup","largestBatchId"],G0="globals",Iz="name",ck=[Jd,ys,Ac,ha,xc,Ih,Wa,Rc,Pc,Xd,Zd,dg,hg],Sz=[...ck,fg],uk=[Jd,ys,Ac,np,xc,Ih,Wa,Rc,Pc,Xd,Zd,dg,hg,fg],dk=uk,Q0=[...dk,K0,dd,hd],bz=Q0,hk=[...Q0,G0],Az=hk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends ek{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Rn(t,e){const n=Se(t);return ko.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yf(this.root,e,this.comparator,!0)}}class yf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$n.RED,this.left=s??$n.EMPTY,this.right=i??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $n(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $n.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Eb(this.data.getIterator())}getIteratorFrom(e){return new Eb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class Eb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function El(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Ar([])}unionWith(e){let n=new Tt(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new mk("Invalid base64 string: "+i):i}}(e);return new dn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const xz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(t){if(ke(!!t,39018),typeof t=="string"){let e=0;const n=xz.exec(t);if(ke(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ni(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="server_timestamp",gk="__type__",yk="__previous_value__",vk="__local_write_time__";function Y0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[gk])==null?void 0:r.stringValue)===pk}function mg(t){const e=t.mapValue.fields[yk];return Y0(e)?mg(e):e}function eh(t){const e=ki(t.mapValue.fields[vk].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e,n,r,s,i,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const sp="(default)";class $o{constructor(e,n){this.projectId=e,this.database=n||sp}static empty(){return new $o("","")}get isDefaultDatabase(){return this.database===sp}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__type__",wk="__max__",yo={mapValue:{fields:{__type__:{stringValue:wk}}}},X0="__vector__",Cc="value",Xf={nullValue:"NULL_VALUE"};function Bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Y0(t)?4:_k(t)?9007199254740991:pg(t)?10:11:Ie(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=Bo(t);if(n!==Bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eh(t).isEqual(eh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ki(s.timestampValue),a=ki(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ni(s.bytesValue).isEqual(Ni(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $t(s.geoPointValue.latitude)===$t(i.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $t(s.integerValue)===$t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$t(s.doubleValue),a=$t(i.doubleValue);return o===a?Yd(o)===Yd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Sc(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(_b(o)!==_b(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return Ie(52216,{left:t})}}function th(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function zo(t,e){if(t===e)return 0;const n=Bo(t),r=Bo(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=$t(i.integerValue||i.doubleValue),l=$t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Tb(t.timestampValue,e.timestampValue);case 4:return Tb(eh(t),eh(e));case 5:return Cw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ni(i),l=Ni(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=We(a[c],l[c]);if(d!==0)return d}return We(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=We($t(i.latitude),$t(o.latitude));return a!==0?a:We($t(i.longitude),$t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ib(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,T,p;const a=i.fields||{},l=o.fields||{},c=(f=a[Cc])==null?void 0:f.arrayValue,d=(m=l[Cc])==null?void 0:m.arrayValue,h=We(((T=c==null?void 0:c.values)==null?void 0:T.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:Ib(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===yo.mapValue&&o===yo.mapValue)return 0;if(i===yo.mapValue)return 1;if(o===yo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Cw(l[h],d[h]);if(f!==0)return f;const m=zo(a[l[h]],c[d[h]]);if(m!==0)return m}return We(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function Tb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=ki(t),r=ki(e),s=We(n.seconds,r.seconds);return s!==0?s:We(n.nanos,r.nanos)}function Ib(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=zo(n[s],r[s]);if(i)return i}return We(n.length,r.length)}function Dc(t){return Vw(t)}function Vw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ni(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vw(n.fields[o])}`;return s+"}"}(t.mapValue):Ie(61005,{value:t})}function Zf(t){switch(Bo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mg(t);return e?16+Zf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ni(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Zf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Zo(r.fields,(i,o)=>{s+=i.length+Zf(o)}),s}(t.mapValue);default:throw Ie(13486,{value:t})}}function nh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mw(t){return!!t&&"integerValue"in t}function rh(t){return!!t&&"arrayValue"in t}function Sb(t){return!!t&&"nullValue"in t}function bb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function em(t){return!!t&&"mapValue"in t}function pg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[J0])==null?void 0:r.stringValue)===X0}function fd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fd(t.arrayValue.values[n]);return e}return{...t}}function _k(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wk}const Ek={mapValue:{fields:{[J0]:{stringValue:X0},[Cc]:{arrayValue:{}}}}};function Pz(t){return"nullValue"in t?Xf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?nh($o.empty(),me.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?pg(t)?Ek:{mapValue:{}}:Ie(35942,{value:t})}function Cz(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?nh($o.empty(),me.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Ek:"mapValue"in t?pg(t)?{mapValue:{}}:yo:Ie(61959,{value:t})}function Ab(t,e){const n=zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xb(t,e){const n=zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!em(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(n)}setAll(e){let n=zt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=fd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());em(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];em(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new nr(fd(this.value))}}function Tk(t){const e=[];return Zo(t.fields,(n,r)=>{const s=new zt([n]);if(em(r)){const i=Tk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,Me.min(),Me.min(),Me.min(),nr.empty(),0)}static newFoundDocument(e,n,r,s){return new cn(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new cn(e,2,n,Me.min(),Me.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Me.min(),Me.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.position=e,this.inclusive=n}}function Rb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=me.comparator(me.fromName(o.referenceValue),n.key):r=zo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Dz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{}class rt extends Ik{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kz(e,n,r):n==="array-contains"?new Lz(e,r):n==="in"?new Pk(e,r):n==="not-in"?new Vz(e,r):n==="array-contains-any"?new Mz(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Nz(e,r):new Oz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&Bo(this.value)===Bo(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _t extends Ik{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _t(e,n)}matches(e){return Nc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nc(t){return t.op==="and"}function Fw(t){return t.op==="or"}function Z0(t){return Sk(t)&&Nc(t)}function Sk(t){for(const e of t.filters)if(e instanceof _t)return!1;return!0}function Uw(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Dc(t.value);if(Z0(t))return t.filters.map(e=>Uw(e)).join(",");{const e=t.filters.map(n=>Uw(n)).join(",");return`${t.op}(${e})`}}function bk(t,e){return t instanceof rt?function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&ti(r.value,s.value)}(t,e):t instanceof _t?function(r,s){return s instanceof _t&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&bk(o,s.filters[a]),!0):!1}(t,e):void Ie(19439)}function Ak(t,e){const n=t.filters.concat(e);return _t.create(n,t.op)}function xk(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Dc(n.value)}`}(t):t instanceof _t?function(n){return n.op.toString()+" {"+n.getFilters().map(xk).join(" ,")+"}"}(t):"Filter"}class kz extends rt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class Nz extends rt{constructor(e,n){super(e,"in",n),this.keys=Rk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Oz extends rt{constructor(e,n){super(e,"not-in",n),this.keys=Rk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Rk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>me.fromName(r.referenceValue))}class Lz extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rh(n)&&th(n.arrayValue,this.value)}}class Pk extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&th(this.value.arrayValue,n)}}class Vz extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!th(this.value.arrayValue,n)}}class Mz extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>th(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function jw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Fz(t,e,n,r,s,i,o)}function el(t){const e=Se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ug(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dc(r)).join(",")),e.Te=n}return e.Te}function Sh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Dz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pb(t.startAt,e.startAt)&&Pb(t.endAt,e.endAt)}function ip(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function op(t,e){return t.filters.filter(n=>n instanceof rt&&n.field.isEqual(e))}function Cb(t,e,n){let r=Xf,s=!0;for(const i of op(t,e)){let o=Xf,a=!0;switch(i.op){case"<":case"<=":o=Pz(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Xf}Ab({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Ab({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Db(t,e,n){let r=yo,s=!0;for(const i of op(t,e)){let o=yo,a=!0;switch(i.op){case">=":case">":o=Cz(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=yo}xb({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];xb({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ck(t,e,n,r,s,i,o,a){return new nu(t,e,n,r,s,i,o,a)}function bh(t){return new nu(t)}function kb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dk(t){return t.collectionGroup!==null}function md(t){const e=Se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tt(zt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new sh(i,r))}),n.has(zt.keyField().canonicalString())||e.Ie.push(new sh(zt.keyField(),r))}return e.Ie}function Gr(t){const e=Se(t);return e.Ee||(e.Ee=Uz(e,md(t))),e.Ee}function Uz(t,e){if(t.limitType==="F")return jw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sh(s.field,i)});const n=t.endAt?new kc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kc(t.startAt.position,t.startAt.inclusive):null;return jw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $w(t,e){const n=t.filters.concat([e]);return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ap(t,e,n){return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gg(t,e){return Sh(Gr(t),Gr(e))&&t.limitType===e.limitType}function kk(t){return`${el(Gr(t))}|lt:${t.limitType}`}function Dl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xk(s)).join(", ")}]`),ug(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Dc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Dc(s)).join(",")),`Target(${r})`}(Gr(t))}; limitType=${t.limitType})`}function Ah(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of md(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Rb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,md(r),s)||r.endAt&&!function(o,a,l){const c=Rb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,md(r),s))}(t,e)}function Nk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ok(t){return(e,n)=>{let r=!1;for(const s of md(t)){const i=jz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function jz(t,e,n){const r=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?zo(l,c):Ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=new kt(me.comparator);function zr(){return $z}const Lk=new kt(me.comparator);function Ku(...t){let e=Lk;for(const n of t)e=e.insert(n.key,n);return e}function Vk(t){let e=Lk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hs(){return pd()}function Mk(){return pd()}function pd(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const Bz=new kt(me.comparator),zz=new Tt(me.comparator);function Je(...t){let e=zz;for(const n of t)e=e.add(n);return e}const Wz=new Tt(We);function eE(){return Wz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yd(e)?"-0":e}}function Fk(t){return{integerValue:""+t}}function qz(t,e){return nk(e)?Fk(e):tE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this._=void 0}}function Hz(t,e,n){return t instanceof Oc?function(s,i){const o={fields:{[gk]:{stringValue:pk},[vk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Y0(i)&&(i=mg(i)),i&&(o.fields[yk]=i),{mapValue:o}}(n,e):t instanceof tl?jk(t,e):t instanceof Lc?$k(t,e):function(s,i){const o=Uk(s,i),a=Nb(o)+Nb(s.Ae);return Mw(o)&&Mw(s.Ae)?Fk(a):tE(s.serializer,a)}(t,e)}function Kz(t,e,n){return t instanceof tl?jk(t,e):t instanceof Lc?$k(t,e):n}function Uk(t,e){return t instanceof ih?function(r){return Mw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Oc extends yg{}class tl extends yg{constructor(e){super(),this.elements=e}}function jk(t,e){const n=Bk(e);for(const r of t.elements)n.some(s=>ti(s,r))||n.push(r);return{arrayValue:{values:n}}}class Lc extends yg{constructor(e){super(),this.elements=e}}function $k(t,e){let n=Bk(e);for(const r of t.elements)n=n.filter(s=>!ti(s,r));return{arrayValue:{values:n}}}class ih extends yg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Nb(t){return $t(t.integerValue||t.doubleValue)}function Bk(t){return rh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.field=e,this.transform=n}}function Gz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof tl&&s instanceof tl||r instanceof Lc&&s instanceof Lc?Sc(r.elements,s.elements,ti):r instanceof ih&&s instanceof ih?ti(r.Ae,s.Ae):r instanceof Oc&&s instanceof Oc}(t.transform,e.transform)}class Qz{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vg{}function zk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xh(t.key,xn.none()):new ru(t.key,t.data,xn.none());{const n=t.data,r=nr.empty();let s=new Tt(zt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ji(t.key,r,new Ar(s.toArray()),xn.none())}}function Yz(t,e,n){t instanceof ru?function(s,i,o){const a=s.value.clone(),l=Lb(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(s,i,o){if(!tm(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Lb(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Wk(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gd(t,e,n,r){return t instanceof ru?function(i,o,a,l){if(!tm(i.precondition,o))return a;const c=i.value.clone(),d=Vb(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(i,o,a,l){if(!tm(i.precondition,o))return a;const c=Vb(i.fieldTransforms,l,o),d=o.data;return d.setAll(Wk(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return tm(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Jz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Uk(r.transform,s||null);i!=null&&(n===null&&(n=nr.empty()),n.set(r.field,i))}return n||null}function Ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Sc(r,s,(i,o)=>Gz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ru extends vg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ji extends vg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lb(t,e,n){const r=new Map;ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Kz(o,a,n[s]))}return r}function Vb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Hz(i,o,e))}return r}class xh extends vg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qk extends vg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Yz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Mk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=zk(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,(n,r)=>Ob(n,r))&&Sc(this.baseMutations,e.baseMutations,(n,r)=>Ob(n,r))}}class sE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Bz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new sE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,ot;function Zz(t){switch(t){case q.OK:return Ie(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function Hk(t){if(t===void 0)return mn("GRPC error has no .code"),q.UNKNOWN;switch(t){case vn.OK:return q.OK;case vn.CANCELLED:return q.CANCELLED;case vn.UNKNOWN:return q.UNKNOWN;case vn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case vn.INTERNAL:return q.INTERNAL;case vn.UNAVAILABLE:return q.UNAVAILABLE;case vn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case vn.NOT_FOUND:return q.NOT_FOUND;case vn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case vn.ABORTED:return q.ABORTED;case vn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case vn.DATA_LOSS:return q.DATA_LOSS;default:return Ie(39323,{code:t})}}(ot=vn||(vn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=new Do([4294967295,4294967295],0);function Mb(t){const e=eW().encode(t),n=new FD;return n.update(e),new Uint8Array(n.digest())}function Fb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Do([n,r],0),new Do([s,i],0)]}class oE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gu(`Invalid padding: ${n}`);if(r<0)throw new Gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Do.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Do.fromNumber(r)));return s.compare(tW)===1&&(s=new Do([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mb(e),[r,s]=Fb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new oE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Mb(e),[r,s]=Fb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ph.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rh(Me.min(),s,new kt(We),zr(),Je())}}class Ph{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ph(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Kk{constructor(e,n){this.targetId=e,this.Ce=n}}class Gk{constructor(e,n,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ub{constructor(){this.ve=0,this.Fe=jb(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),r=Je();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ie(38017,{changeType:i})}}),new Ph(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=jb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nW{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=vf(),this.He=vf(),this.Ye=new kt(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ip(i))if(r===0){const o=new me(i.path);this.et(n,o,cn.newNoDocument(o,Me.min()))}else ke(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ni(r).toUint8Array()}catch(l){if(l instanceof mk)return jo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new oE(o,s,i)}catch(l){return jo(l instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&ip(a.target)){const l=new me(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,cn.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Je();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Rh(e,n,this.Ye,this.je,r);return this.je=zr(),this.Je=vf(),this.He=vf(),this.Ye=new kt(We),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ub,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Tt(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Tt(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ub),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vf(){return new kt(me.comparator)}function jb(){return new kt(me.comparator)}const rW={asc:"ASCENDING",desc:"DESCENDING"},sW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iW={and:"AND",or:"OR"};class oW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bw(t,e){return t.useProto3Json||ug(e)?e:{value:e}}function Vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aW(t,e){return Vc(t,e.toTimestamp())}function mr(t){return ke(!!t,49232),Me.fromTimestamp(function(n){const r=ki(n);return new dt(r.seconds,r.nanos)}(t))}function aE(t,e){return zw(t,e).canonicalString()}function zw(t,e){const n=function(s){return new ht(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Yk(t){const e=ht.fromString(t);return ke(iN(e),10190,{key:e.toString()}),e}function lp(t,e){return aE(t.databaseId,e.path)}function qa(t,e){const n=Yk(e);if(n.get(1)!==t.databaseId.projectId)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(Zk(n))}function Jk(t,e){return aE(t.databaseId,e)}function Xk(t){const e=Yk(t);return e.length===4?ht.emptyPath():Zk(e)}function Ww(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Zk(t){return ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $b(t,e,n){return{name:lp(t,e),fields:n.value.mapValue.fields}}function lW(t,e,n){const r=qa(t,e.name),s=mr(e.updateTime),i=e.createTime?mr(e.createTime):Me.min(),o=new nr({mapValue:{fields:e.fields}}),a=cn.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function cW(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ke(d===void 0||typeof d=="string",58123),dn.fromBase64String(d||"")):(ke(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),dn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?q.UNKNOWN:Hk(c.code);return new re(d,c.message||"")}(o);n=new Gk(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qa(t,r.document.name),i=mr(r.document.updateTime),o=r.document.createTime?mr(r.document.createTime):Me.min(),a=new nr({mapValue:{fields:r.document.fields}}),l=cn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new nm(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qa(t,r.document),i=r.readTime?mr(r.readTime):Me.min(),o=cn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new nm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qa(t,r.document),i=r.removedTargetIds||[];n=new nm([],i,s,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Xz(s,i),a=r.targetId;n=new Kk(a,o)}}return n}function cp(t,e){let n;if(e instanceof ru)n={update:$b(t,e.key,e.value)};else if(e instanceof xh)n={delete:lp(t,e.key)};else if(e instanceof ji)n={update:$b(t,e.key,e.data),updateMask:pW(e.fieldMask)};else{if(!(e instanceof qk))return Ie(16599,{Vt:e.type});n={verify:lp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Oc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ih)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:aW(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ie(27497)}(t,e.precondition)),n}function qw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?xn.updateTime(mr(i.updateTime)):i.exists!==void 0?xn.exists(i.exists):xn.none()}(e.currentDocument):xn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ke(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Oc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new tl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Lc(d)}else"increment"in a?l=new ih(o,a.increment):Ie(16584,{proto:a});const c=zt.fromServerFormat(a.fieldPath);return new nE(c,l)}(t,s)):[];if(e.update){e.update.name;const s=qa(t,e.update.name),i=new nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Ar(c.map(d=>zt.fromServerFormat(d)))}(e.updateMask);return new ji(s,i,o,n,r)}return new ru(s,i,n,r)}if(e.delete){const s=qa(t,e.delete);return new xh(s,n)}if(e.verify){const s=qa(t,e.verify);return new qk(s,n)}return Ie(1463,{proto:e})}function uW(t,e){return t&&t.length>0?(ke(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mr(s.updateTime):mr(i);return o.isEqual(Me.min())&&(o=mr(i)),new Qz(o,s.transformResults||[])}(n,e))):[]}function eN(t,e){return{documents:[Jk(t,e.path)]}}function tN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jk(t,s);const i=function(c){if(c.length!==0)return sN(_t.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:kl(f.field),direction:hW(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function nN(t){let e=Xk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ke(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=rN(h);return f instanceof _t&&Z0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new sh(Nl(T.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,ug(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new kc(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new kc(m,f)}(n.endAt)),Ck(e,s,o,i,a,"F",l,c)}function dW(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nl(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Nl(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Nl(n.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nl(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Nl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _t.create(n.compositeFilter.filters.map(r=>rN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(n.compositeFilter.op))}(t):Ie(30097,{filter:t})}function hW(t){return rW[t]}function fW(t){return sW[t]}function mW(t){return iW[t]}function kl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return zt.fromServerFormat(t.fieldPath)}function sN(t){return t instanceof rt?function(n){if(n.op==="=="){if(bb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NAN"}};if(Sb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NAN"}};if(Sb(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(n.field),op:fW(n.op),value:n.value}}}(t):t instanceof _t?function(n){const r=n.getFilters().map(s=>sN(s));return r.length===1?r[0]:{compositeFilter:{op:mW(n.op),filters:r}}}(t):Ie(54877,{filter:t})}function pW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,s,i=Me.min(),o=Me.min(),a=dn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.yt=e}}function gW(t,e){let n;if(e.document)n=lW(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=me.fromSegments(e.noDocument.path),s=rl(e.noDocument.readTime);n=cn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=me.fromSegments(e.unknownDocument.path),s=rl(e.unknownDocument.version);n=cn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new dt(s[0],s[1]);return Me.fromTimestamp(i)}(e.readTime)),n}function Bb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:up(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:lp(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Vc(i,o.version.toTimestamp()),createTime:Vc(i,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nl(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:nl(e.version)}}return r}function up(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(t){const e=new dt(t.seconds,t.nanoseconds);return Me.fromTimestamp(e)}function pa(t,e){const n=(e.baseMutations||[]).map(i=>qw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>qw(t.yt,i)),s=dt.fromMillis(e.localWriteTimeMs);return new rE(e.batchId,s,n,r)}function Qu(t){const e=rl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?rl(t.lastLimboFreeSnapshotVersion):Me.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return ke(o===1,1966,{count:o}),Gr(bh(Xk(i.documents[0])))}(t.query):function(i){return Gr(nN(i))}(t.query),new vi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dn.fromBase64String(t.resumeToken))}function aN(t,e){const n=nl(e.snapshotVersion),r=nl(e.lastLimboFreeSnapshotVersion);let s;s=ip(e.target)?eN(t.yt,e.target):tN(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function lN(t){const e=nN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ap(e,e.limit,"L"):e}function My(t,e){return new iE(e.largestBatchId,qw(t.yt,e.overlayMutation))}function zb(t,e){const n=e.path.lastSegment();return[t,rr(e.path.popLast()),n]}function Wb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:nl(r.readTime),documentKey:rr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{getBundleMetadata(e,n){return qb(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:rl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return qb(e).put(function(s){return{bundleId:s.id,createTime:nl(mr(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Hb(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:lN(i.bundledQuery),readTime:rl(i.readTime)}}(r)})}saveNamedQuery(e,n){return Hb(e).put(function(s){return{name:s.name,readTime:nl(mr(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function qb(t){return Rn(t,dg)}function Hb(t){return Rn(t,hg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new wg(e,r)}getOverlay(e,n){return Du(e).get(zb(this.userId,n)).next(r=>r?My(this.serializer,r):null)}getOverlays(e,n){const r=Hs();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new iE(n,o);s.push(this.St(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(rr(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Du(e).Z(Ow,a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Hs(),i=rr(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Du(e).J(Ow,o).next(a=>{for(const l of a){const c=My(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Hs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Du(e).ee({index:lk,range:a},(l,c,d)=>{const h=My(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}St(e,n){return Du(e).put(function(s,i,o){const[a,l,c]=zb(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cp(s.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Du(t){return Rn(t,fg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{bt(e){return Rn(e,G0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?dn.fromUint8Array(r):dn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt($t(e.integerValue));else if("doubleValue"in e){const r=$t(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Yd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ki(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ni(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?_k(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):pg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ie(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const s=Cc,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt($t(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),me.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ga.Kt=new ga;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=255;function wW(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Kb(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=wW(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class _W{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=Kb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=Kb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Tl),this.sn(255)}_n(){this.an(Tl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Tl?(this.sn(Tl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Tl?(this.an(Tl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class EW{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class TW{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ku{constructor(){this.cn=new _W,this.ln=new EW(this.cn),this.hn=new TW(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ya(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:rm(this.En),directionalValue:rm(this.dn),orderedDocumentKey:rm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Yi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Gb(t.En,e.En),n!==0?n:(n=Gb(t.dn,e.dn),n!==0?n:me.comparator(t.In,e.In)))}function Gb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function rm(t){return nD()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function Qb(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class Yb{constructor(e){this.mn=new Tt((n,r)=>zt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Dw(e);if(n!==void 0&&!this.wn(n))return!1;const r=da(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Tt(zt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Qf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Qf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Qf(r.field,r.dir==="asc"?0:1)));return new ep(ep.UNKNOWN_ID,this.collectionId,n,Qd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){var n,r;if(ke(t instanceof rt||t instanceof _t,20012),t instanceof rt){if(t instanceof Pk){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>rt.create(t.field,"==",i)))||[];return _t.create(s,"or")}return t}const e=t.filters.map(s=>cN(s));return _t.create(e,t.op)}function IW(t){if(t.getFilters().length===0)return[];const e=Gw(cN(t));return ke(uN(e),7391),Hw(e)||Kw(e)?[e]:e.getFilters()}function Hw(t){return t instanceof rt}function Kw(t){return t instanceof _t&&Z0(t)}function uN(t){return Hw(t)||Kw(t)||function(n){if(n instanceof _t&&Fw(n)){for(const r of n.getFilters())if(!Hw(r)&&!Kw(r))return!1;return!0}return!1}(t)}function Gw(t){if(ke(t instanceof rt||t instanceof _t,34018),t instanceof rt)return t;if(t.filters.length===1)return Gw(t.filters[0]);const e=t.filters.map(r=>Gw(r));let n=_t.create(e,t.op);return n=dp(n),uN(n)?n:(ke(n instanceof _t,64498),ke(Nc(n),40251),ke(n.filters.length>1,57927),n.filters.reduce((r,s)=>lE(r,s)))}function lE(t,e){let n;return ke(t instanceof rt||t instanceof _t,38388),ke(e instanceof rt||e instanceof _t,25473),n=t instanceof rt?e instanceof rt?function(s,i){return _t.create([s,i],"and")}(t,e):Jb(t,e):e instanceof rt?Jb(e,t):function(s,i){if(ke(s.filters.length>0&&i.filters.length>0,48005),Nc(s)&&Nc(i))return Ak(s,i.getFilters());const o=Fw(s)?s:i,a=Fw(s)?i:s,l=o.filters.map(c=>lE(c,a));return _t.create(l,"or")}(t,e),dp(n)}function Jb(t,e){if(Nc(e))return Ak(e,t.getFilters());{const n=e.filters.map(r=>lE(t,r));return _t.create(n,"or")}}function dp(t){if(ke(t instanceof rt||t instanceof _t,11850),t instanceof rt)return t;const e=t.getFilters();if(e.length===1)return dp(e[0]);if(Sk(t))return t;const n=e.map(s=>dp(s)),r=[];return n.forEach(s=>{s instanceof rt?r.push(s):s instanceof _t&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:_t.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(){this.Cn=new cE}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Yr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class cE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Tt(ht.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Tt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="IndexedDbIndexManager",wf=new Uint8Array(0);class bW{constructor(e,n){this.databaseId=n,this.vn=new cE,this.Fn=new Ui(r=>el(r),(r,s)=>Sh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:rr(s)};return Zb(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[KD(n),""],!1,!0);return Zb(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(qs(o.parent))}return r})}addFieldIndex(e,n){const r=Nu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Sl(e);return i.next(a=>{o.put(Wb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Nu(e),s=Sl(e),i=Il(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Nu(e),r=Il(e),s=Sl(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Yb(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Il(e);let s=!0;const i=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Je();const a=[];return M.forEach(i,(l,c)=>{Z(Xb,`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${el(n)}`);const d=function(E,x){const C=Dw(x);if(C===void 0)return null;for(const L of op(E,C.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(E,x){const C=new Map;for(const L of da(x))for(const S of op(E,L.fieldPath))switch(S.op){case"==":case"in":C.set(L.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return C.set(L.fieldPath.canonicalString(),S.value),Array.from(C.values())}return null}(c,l),f=function(E,x){const C=[];let L=!0;for(const S of da(x)){const b=S.kind===0?Cb(E,S.fieldPath,E.startAt):Db(E,S.fieldPath,E.startAt);C.push(b.value),L&&(L=b.inclusive)}return new kc(C,L)}(c,l),m=function(E,x){const C=[];let L=!0;for(const S of da(x)){const b=S.kind===0?Db(E,S.fieldPath,E.endAt):Cb(E,S.fieldPath,E.endAt);C.push(b.value),L&&(L=b.inclusive)}return new kc(C,L)}(c,l),T=this.On(l,c,f),p=this.On(l,c,m),v=this.Nn(l,c,h),w=this.Bn(l.indexId,d,T,f.inclusive,p,m.inclusive,v);return M.forEach(w,y=>r.Y(y,n.limit).next(E=>{E.forEach(x=>{const C=me.fromSegments(x.documentKey);o.has(C)||(o=o.add(C),a.push(C))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=IW(_t.create(e.filters,"and")).map(r=>jw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):wf,m=this.kn(e,f,r[h%c],s),T=this.qn(e,f,i[h%c],o),p=a.map(v=>this.kn(e,f,v,!0));d.push(...this.createRange(m,T,p))}return d}kn(e,n,r,s){const i=new ya(e,me.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new ya(e,me.empty(),n,r);return s?i.An():i}xn(e,n){const r=new Yb(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Mn(n);return M.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Tt(zt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new ku;for(const s of da(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);ga.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new ku;return ga.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new ku;return ga.Kt.Dt(nh(this.databaseId,n),r.Pn(function(i){const o=da(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new ku);let i=0;for(const o of da(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&rh(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);ga.Kt.Dt(a,c)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new ku;l.seed(a.un()),ga.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof rt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Nu(e),s=Sl(e);return(n?r.J(Nw,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new Qd(h.sequenceNumber,new Yr(rl(h.readTime),new me(qs(h.documentKey)),h.largestBatchId)):Qd.empty(),m=d.fields.map(([T,p])=>new Qf(zt.fromServerFormat(T),p));return new ep(d.indexId,d.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:We(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Nu(e),i=Sl(e);return this.Gn(e).next(o=>s.J(Nw,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(Wb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.zn(e,s,l).next(c=>{const d=this.jn(i,l);return c.isEqual(d)?M.resolve():this.Jn(e,i,l,c,d)}))))})}Hn(e,n,r,s){return Il(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Il(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Il(e);let i=new Tt(Yi);return s.ee({index:ak,range:IDBKeyRange.only([r.indexId,this.uid,rm(this.$n(r,n))])},(o,a)=>{i=i.add(new ya(r.indexId,n,Qb(a.arrayValue),Qb(a.directionalValue)))}).next(()=>i)}jn(e,n){let r=new Tt(Yi);const s=this.Qn(n,e);if(s==null)return r;const i=Dw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(rh(o))for(const a of o.arrayValue.values||[])r=r.add(new ya(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new ya(n.indexId,e.key,wf,s));return r}Jn(e,n,r,s,i){Z(Xb,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,f){const m=l.getIterator(),T=c.getIterator();let p=El(m),v=El(T);for(;p||v;){let w=!1,y=!1;if(p&&v){const E=d(p,v);E<0?y=!0:E>0&&(w=!0)}else p!=null?y=!0:w=!0;w?(h(v),v=El(T)):y?(f(p),p=El(m)):(p=El(m),v=El(T))}}(s,i,Yi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return Sl(e).ee({index:ok,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Yi(o,a)).filter((o,a,l)=>!a||Yi(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Yi(o,e),l=Yi(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,wf,me.empty()),l=s[o+1].Vn(this.uid,wf,me.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Yi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(eA)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||Ie(44426))).next(eA)}}function Zb(t){return Rn(t,Zd)}function Il(t){return Rn(t,hd)}function Nu(t){return Rn(t,K0)}function Sl(t){return Rn(t,dd)}function eA(t){ke(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;W0(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Yr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dN=41943040;class er{static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t,e,n){const r=t.store(ys),s=t.store(Ac),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));i.push(l.next(()=>{ke(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=rk(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return M.waitFor(i).next(()=>c)}function hp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ie(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(dN,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);class _g{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){ke(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new _g(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ji(e).ee({index:Aa,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Ol(e),o=Ji(e);return o.add({}).next(a=>{ke(typeof a=="number",49019);const l=new rE(a,n,r,s),c=function(m,T,p){const v=p.baseMutations.map(y=>cp(m.yt,y)),w=p.mutations.map(y=>cp(m.yt,y));return{userId:T,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:v,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new Tt((f,m)=>We(f.canonicalString(),m.canonicalString()));for(const f of s){const m=rk(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(i.put(m,rz))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ji(e).get(n).next(r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),pa(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ji(e).ee({index:Aa,range:s},(o,a,l)=>{a.userId===this.userId&&(ke(a.batchId>=r,47524,{tr:r}),i=pa(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=za;return Ji(e).ee({index:Aa,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,za],[this.userId,Number.POSITIVE_INFINITY]);return Ji(e).J(Aa,n).next(r=>r.map(s=>pa(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Yf(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Ol(e).ee({range:s},(o,a,l)=>{const[c,d,h]=o,f=qs(d);if(c===this.userId&&n.path.isEqual(f))return Ji(e).get(h).next(m=>{if(!m)throw Ie(61480,{nr:o,batchId:h});ke(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),i.push(pa(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(We);const s=[];return n.forEach(i=>{const o=Yf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Ol(e).ee({range:a},(c,d,h)=>{const[f,m,T]=c,p=qs(m);f===this.userId&&i.path.isEqual(p)?r=r.add(T):h.done()});s.push(l)}),M.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Yf(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Tt(We);return Ol(e).ee({range:o},(l,c,d)=>{const[h,f,m]=l,T=qs(f);h===this.userId&&r.isPrefixOf(T)?T.length===s&&(a=a.add(m)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ji(e).get(i).next(o=>{if(o===null)throw Ie(35274,{batchId:i});ke(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(pa(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return hN(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Ol(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=qs(i[1]);s.push(l)}else a.done()}).next(()=>{ke(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return fN(e,this.userId,n)}_r(e){return mN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:za,lastStreamToken:""})}}function fN(t,e,n){const r=Yf(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Ol(t).ee({range:i,X:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Ji(t){return Rn(t,ys)}function Ol(t){return Rn(t,Ac)}function mN(t){return Rn(t,Jd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sl(0)}static cr(){return new sl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new sl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Me.fromTimestamp(new dt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>bl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return bl(e).ee((o,a)=>{const l=Qu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return bl(e).ee((r,s)=>{const i=Qu(s);n(i)})}lr(e){return nA(e).get(rp).next(n=>(ke(n!==null,2888),n))}hr(e,n){return nA(e).put(rp,n)}Pr(e,n){return bl(e).put(aN(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=el(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return bl(e).ee({range:s,index:ik},(o,a,l)=>{const c=Qu(a);Sh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=io(e);return n.forEach(o=>{const a=rr(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=io(e);return M.forEach(n,i=>{const o=rr(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=io(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=io(e);let i=Je();return s.ee({range:r,X:!0},(o,a,l)=>{const c=qs(o[1]),d=new me(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=rr(n.path),s=IDBKeyRange.bound([r],[KD(r)],!1,!0);let i=0;return io(e).ee({index:H0,X:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}At(e,n){return bl(e).get(n).next(r=>r?Qu(r):null)}}function bl(t){return Rn(t,xc)}function nA(t){return Rn(t,Wa)}function io(t){return Rn(t,Rc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="LruGarbageCollector",pN=1048576;function sA([t,e],[n,r]){const s=We(t,n);return s===0?We(e,r):s}class xW{constructor(e){this.Ir=e,this.buffer=new Tt(sA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(rA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xo(n)?Z(rA,"Ignoring IndexedDB error during garbage collection: ",n):await Jo(n)}await this.Vr(3e5)})}}class RW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(br.ce);const r=new xW(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(tA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Cl()<=tt.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function yN(t,e){return new RW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e,n){this.db=e,this.garbageCollector=yN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return _f(e,r)}removeReference(e,n,r){return _f(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return _f(e,n)}br(e,n){return function(s,i){let o=!1;return mN(s).te(a=>fN(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Me.min()),io(e).delete(function(h){return[0,rr(h.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return _f(e,n)}Sr(e,n){const r=io(e);let s,i=br.ce;return r.ee({index:H0},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==br.ce&&n(new me(qs(s)),i),i=c,s=l):i=br.ce}).next(()=>{i!==br.ce&&n(new me(qs(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _f(t,e){return io(t).put(function(r,s){return{targetId:0,path:rr(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return aa(e).put(r)}removeEntry(e,n,r){return aa(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],up(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=cn.newInvalidDocument(n);return aa(e).ee({index:Jf,range:IDBKeyRange.only(Ou(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:cn.newInvalidDocument(n)};return aa(e).ee({index:Jf,range:IDBKeyRange.only(Ou(n))},(s,i)=>{r={document:this.Cr(n,i),size:hp(i)}}).next(()=>r)}getEntries(e,n){let r=zr();return this.Fr(e,n,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,n){let r=zr(),s=new kt(me.comparator);return this.Fr(e,n,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,hp(o))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let s=new Tt(aA);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ou(s.first()),Ou(s.last())),o=s.getIterator();let a=o.getNext();return aa(e).ee({index:Jf,range:i},(l,c,d)=>{const h=me.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&aA(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Ou(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),up(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return aa(e).J(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=zr();for(const h of c){const f=this.Cr(me.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Ah(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=zr();const o=oA(n,r),a=oA(n,Yr.max());return aa(e).ee({index:sk,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Cr(me.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new DW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return iA(e).get(kw).next(n=>(ke(!!n,20021),n))}Dr(e,n){return iA(e).put(kw,n)}Cr(e,n){if(n){const r=gW(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Me.min())))return r}return cn.newInvalidDocument(e)}}function wN(t){return new CW(t)}class DW extends vN{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ui(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Tt((i,o)=>We(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Bb(this.Nr.serializer,o);s=s.add(i.path.popLast());const c=hp(l);r+=c-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Bb(this.Nr.serializer,o.convertToNoDocument(Me.min()));n.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function iA(t){return Rn(t,Xd)}function aa(t){return Rn(t,np)}function Ou(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oA(t,e){const n=e.documentKey.path.toArray();return[t,up(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function aA(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=We(n[i],r[i]),s)return s;return s=We(n.length,r.length),s||(s=We(n[n.length-2],r[r.length-2]),s||We(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&gd(r.mutation,s,Ar.empty(),dt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const s=Hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ku();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zr();const o=pd(),a=function(){return pd()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ji)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),gd(d.mutation,c,d.mutation.getFieldMask(),dt.now())):o.set(c.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new kW(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=pd();let s=new kt((o,a)=>o-a),i=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Ar.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Je()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=Mk();d.forEach(f=>{if(!i.has(f)){const m=zk(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Hs());let a=bc,l=i;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Je())).next(d=>({batchId:a,changes:Vk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(r=>{let s=Ku();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ku();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const c=function(h,f){return new nu(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,cn.newInvalidDocument(d)))});let a=Ku();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&gd(d.mutation,c,Ar.empty(),dt.now()),Ah(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mr(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:lN(s.bundledQuery),readTime:mr(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(){this.overlays=new kt(me.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hs();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Hs(),i=n.length+1,o=new me(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new kt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iE(n,r));let i=this.qr.get(n);i===void 0&&(i=Je(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Qr=new Tt(On.$r),this.Ur=new Tt(On.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new On(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new On(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new me(new ht([])),r=new On(n,e),s=new On(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new ht([])),r=new On(n,e),s=new On(n,e+1);let i=Je();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new On(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class On{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(On.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new On(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?za:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new On(n,0),s=new On(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(We);return n.forEach(s=>{const i=new On(s,0),o=new On(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;me.isDocumentKey(i)||(i=i.child(""));const o=new On(new me(i),0);let a=new Tt(We);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new On(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new On(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e){this.ri=e,this.docs=function(){return new kt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=zr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():cn.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zr();const o=n.path,a=new me(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||W0(XD(d),r)<=0||(s.has(d.key)||Ah(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ie(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FW(this)}getSize(e){return M.resolve(this.size)}}class FW extends vN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.persistence=e,this.si=new Ui(n=>el(n),Sh),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new uE,this.targetCount=0,this.ai=sl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new sl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.ui={},this.overlays={},this.ci=new br(0),this.li=!1,this.li=!0,this.hi=new LW,this.referenceDelegate=e(this),this.Pi=new UW(this),this.indexManager=new SW,this.remoteDocumentCache=function(s){return new MW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new oN(n),this.Ii=new NW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new VW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new jW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class jW extends ek{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new uE,this.Vi=null}static mi(e){return new Eg(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=me.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class fp{constructor(e,n){this.persistence=e,this.pi=new Ui(r=>rr(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=yN(this,n)}static mi(e,n){return new fp(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Me.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zf(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e){this.serializer=e}k(e,n,r,s){const i=new cg("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(Ih)}(e),function(l){l.createObjectStore(Jd,{keyPath:nz}),l.createObjectStore(ys,{keyPath:vb,autoIncrement:!0}).createIndex(Aa,wb,{unique:!0}),l.createObjectStore(Ac)}(e),lA(e),function(l){l.createObjectStore(ha)}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Rc),l.deleteObjectStore(xc),l.deleteObjectStore(Wa)}(e),lA(e)),o=o.next(()=>function(l){const c=l.store(Wa),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return c.put(rp,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(ys).J().next(h=>{l.deleteObjectStore(ys),l.createObjectStore(ys,{keyPath:vb,autoIncrement:!0}).createIndex(Aa,wb,{unique:!0});const f=c.store(ys),m=h.map(T=>f.put(T));return M.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Pc,{keyPath:dz})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Xd)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(dg,{keyPath:hz})})(e),function(l){l.createObjectStore(hg,{keyPath:fz})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(fg,{keyPath:_z});c.createIndex(Ow,Ez,{unique:!1}),c.createIndex(lk,Tz,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(np,{keyPath:sz});c.createIndex(Jf,iz),c.createIndex(sk,oz)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ha))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(K0,{keyPath:mz,autoIncrement:!0}).createIndex(Nw,pz,{unique:!1}),l.createObjectStore(dd,{keyPath:gz}).createIndex(ok,yz,{unique:!1}),l.createObjectStore(hd,{keyPath:vz}).createIndex(ak,wz,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(dd).clear()}).next(()=>{n.objectStore(hd).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(G0,{keyPath:Iz})})(e)})),r<18&&s>=18&&nD()&&(o=o.next(()=>{n.objectStore(dd).clear()}).next(()=>{n.objectStore(hd).clear()})),o}wi(e){let n=0;return e.store(ha).ee((r,s)=>{n+=hp(s)}).next(()=>{const r={byteSize:n};return e.store(Xd).put(kw,r)})}yi(e){const n=e.store(Jd),r=e.store(ys);return n.J().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,za],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Aa,o).next(a=>M.forEach(a,l=>{ke(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=pa(this.serializer,l);return hN(e,i.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Rc),r=e.store(ha);return e.store(Wa).get(rp).next(s=>{const i=[];return r.ee((o,a)=>{const l=new ht(o),c=function(h){return[0,rr(h)]}(l);i.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:rr(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}bi(e,n){e.createObjectStore(Zd,{keyPath:uz});const r=n.store(Zd),s=new cE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rr(l)})}};return n.store(ha).ee({X:!0},(o,a)=>{const l=new ht(o);return i(l.popLast())}).next(()=>n.store(Ac).ee({X:!0},([o,a,l],c)=>{const d=qs(a);return i(d.popLast())}))}Di(e){const n=e.store(xc);return n.ee((r,s)=>{const i=Qu(s),o=aN(this.serializer,i);return n.put(o)})}Ci(e,n){const r=n.store(ha),s=[];return r.ee((i,o)=>{const a=n.store(np),l=function(h){return h.document?new me(ht.fromString(h.document.name).popFirst(5)):h.noDocument?me.fromSegments(h.noDocument.path):h.unknownDocument?me.fromSegments(h.unknownDocument.path):Ie(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>M.waitFor(s))}Fi(e,n){const r=n.store(ys),s=wN(this.serializer),i=new dE(Eg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let c=a.get(l.userId)??Je();pa(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),M.forEach(a,(l,c)=>{const d=new Zn(c),h=wg.wt(this.serializer,d),f=i.getIndexManager(d),m=_g.wt(d,this.serializer,f,i.referenceDelegate);return new _N(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Lw(n,br.ce),l).next()})})}}function lA(t){t.createObjectStore(Rc,{keyPath:lz}).createIndex(H0,cz,{unique:!0}),t.createObjectStore(xc,{keyPath:"targetId"}).createIndex(ik,az,{unique:!0}),t.createObjectStore(Wa)}const Xi="IndexedDbPersistence",Fy=18e5,Uy=5e3,jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",BW="main";class hE{constructor(e,n,r,s,i,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!hE.v())throw new re(q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PW(this,s),this.$i=n+BW,this.serializer=new oN(l),this.Ui=new ko(this.$i,this.Ni,new $W(this.serializer)),this.hi=new vW,this.Pi=new AW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wN(this.serializer),this.Ii=new yW,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&mn(Xi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(q.FAILED_PRECONDITION,jy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new br(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Xo(e))return Z(Xi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z(Xi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Lu(e).get(_l).next(n=>M.resolve(this.es(n)))}ts(e){return Ef(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Fy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Rn(n,Pc);return r.J().next(s=>{const i=this.ss(s,Fy),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):Lu(e).get(_l).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Uy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new re(q.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ef(e).J().next(r=>this.ss(r,Uy).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Z(Xi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ih,Pc],e=>{const n=new Lw(e,br.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Ef(e).J().next(n=>this.ss(n,Fy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return _g.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bW(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return wg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z(Xi,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===18?Az:l===17?hk:l===16?bz:l===15?Q0:l===14?dk:l===13?uk:l===12?Sz:l===11?ck:void Ie(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new Lw(a,this.ci?this.ci.next():br.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new re(q.FAILED_PRECONDITION,ZD);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Lu(e).get(_l).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Uy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new re(q.FAILED_PRECONDITION,jy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lu(e).put(_l,n)}static v(){return ko.v()}Zi(e){const n=Lu(e);return n.get(_l).next(r=>this.es(r)?(Z(Xi,"Releasing primary lease."),n.delete(_l)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;tD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return Z(Xi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mn(Xi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lu(t){return Rn(t,Ih)}function Ef(t){return Rn(t,Pc)}function EN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Je(),s=Je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new fE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return tD()?8:tk(Hn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zW;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Cl()<=tt.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Cl()<=tt.DEBUG&&Z("QueryEngine","Query:",Dl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Cl()<=tt.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(n))):M.resolve())}ys(e,n){if(kb(n))return M.resolve(null);let r=Gr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ap(n,null,"F"),r=Gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Je(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,ap(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return kb(n)||s.isEqual(Me.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(Cl()<=tt.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Dl(n)),this.vs(e,o,n,JD(s,bc)).next(a=>a))})}Ds(e,n){let r=new Tt(Ok(e));return n.forEach((s,i)=>{Ah(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Cl()<=tt.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Dl(n)),this.ps.getDocumentsMatchingQuery(e,n,Yr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="LocalStore",WW=3e8;class qW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new kt(We),this.xs=new Ui(i=>el(i),Sh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _N(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function IN(t,e,n,r){return new qW(t,e,n,r)}async function SN(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Je();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function HW(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(T=>{m=m.next(()=>d.getEntry(l,T)).next(p=>{const v=c.docVersions.get(T);ke(v!==null,48541),p.version.compareTo(v)<0&&(h.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),d.addEntry(p)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function bN(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function KW(t,e){const n=Se(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(dn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(p,v,w){return p.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=WW?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,d)&&a.push(n.Pi.updateTargetData(i,m))});let l=zr(),c=Je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(GW(i,o,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Me.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function GW(t,e,n){let r=Je(),s=Je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z(mE,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function QW(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=za),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mp(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Mc(t,e,n){const r=Se(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xo(o))throw o;Z(mE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function pp(t,e,n){const r=Se(t);let s=Me.min(),i=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Se(l),f=h.xs.get(d);return f!==void 0?M.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,d)}(r,o,Gr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Me.min(),n?i:Je())).next(a=>(RN(r,Nk(e),a),{documents:a,Qs:i})))}function AN(t,e){const n=Se(t),r=Se(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.At(i,e).next(o=>o?o.target:null))}function xN(t,e){const n=Se(t),r=n.Os.get(e)||Me.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Ns.getAllFromCollectionGroup(s,e,JD(r,bc),Number.MAX_SAFE_INTEGER)).then(s=>(RN(n,e,s),s))}function RN(t,e,n){let r=t.Os.get(e)||Me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firestore_clients";function cA(t,e){return`${PN}_${t}_${e}`}const CN="firestore_mutations";function uA(t,e,n){let r=`${CN}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const DN="firestore_targets";function $y(t,e){return`${DN}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="SharedClientState";class gp{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new re(s.error.code,s.error.message))),o?new gp(e,n,s.state,i):(mn($s,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new re(r.error.code,r.error.message))),i?new yd(e,r.state,s):(mn($s,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=eE();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=nk(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new yp(e,i):(mn($s,`Failed to parse client data for instance '${e}': ${n}`),null)}}class pE{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new pE(n.clientId,n.onlineState):(mn($s,`Failed to parse online state: ${e}`),null)}}class Qw{constructor(){this.activeTargetIds=eE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class By{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new kt(We),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=cA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Qw),this.ro=new RegExp(`^${PN}_${o}_([^_]*)$`),this.io=new RegExp(`^${CN}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${DN}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(cA(this.persistenceKey,r));if(s){const i=yp.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem($y(this.persistenceKey,e));if(s){const i=yd.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($y(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Po(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Z($s,"READ",e,n),n}setItem(e,n){Z($s,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Z($s,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Z($s,"EVENT",n.key,n.newValue),n.key===this.eo)return void mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(i){let o=br.ce;if(i!=null)try{const a=JSON.parse(i);ke(typeof a=="number",30636,{So:i}),o=a}catch(a){mn($s,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==br.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Do(s)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new gp(this.currentUser,e,n,r),i=uA(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=uA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=$y(this.persistenceKey,e),i=new yd(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return yp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return gp.Ws(new Zn(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return yd.Ws(s,n)}uo(e){return pE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Z($s,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=eE();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class kN{constructor(){this.Mo=new Qw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Qw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="ConnectivityMonitor";class hA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(dA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(dA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf=null;function Yw(){return Tf===null?Tf=function(){return 268435456+Math.round(2147483648*Math.random())}():Tf++,"0x"+Tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="RestConnection",JW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===sp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Yw(),a=this.zo(e,n.toUriEncodedString());Z(zy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),d=Mi(c);return this.Jo(e,a,l,r,d).then(h=>(Z(zy,`Received RPC '${e}' ${o}: `,h),h),h=>{throw jo(zy,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=JW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class e7 extends XW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Yw();return new Promise((a,l)=>{const c=new UD;c.setWithCredentials(!0),c.listenOnce(jD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Gf.NO_ERROR:const h=c.getResponseJson();Z(Xn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Gf.TIMEOUT:Z(Xn,`RPC '${e}' ${o} timed out`),l(new re(q.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const f=c.getStatus();if(Z(Xn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const T=m==null?void 0:m.error;if(T&&T.status&&T.message){const p=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(y)>=0?y:q.UNKNOWN}(T.status);l(new re(p,T.message))}else l(new re(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new re(q.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Z(Xn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Z(Xn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Yw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zD(),a=BD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(Xn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const T=new ZW({Yo:v=>{m?Z(Xn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(f||(Z(Xn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Z(Xn,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Zo:()=>h.close()}),p=(v,w,y)=>{v.listen(w,E=>{try{y(E)}catch(x){setTimeout(()=>{throw x},0)}})};return p(h,Hu.EventType.OPEN,()=>{m||(Z(Xn,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),p(h,Hu.EventType.CLOSE,()=>{m||(m=!0,Z(Xn,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(h))}),p(h,Hu.EventType.ERROR,v=>{m||(m=!0,jo(Xn,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),T.a_(new re(q.UNAVAILABLE,"The operation could not be completed")))}),p(h,Hu.EventType.MESSAGE,v=>{var w;if(!m){const y=v.data[0];ke(!!y,16349);const E=y,x=(E==null?void 0:E.error)||((w=E[0])==null?void 0:w.error);if(x){Z(Xn,`RPC '${e}' stream ${s} received error:`,x);const C=x.status;let L=function(R){const k=vn[R];if(k!==void 0)return Hk(k)}(C),S=x.message;L===void 0&&(L=q.INTERNAL,S="Unknown error status: "+C+" with message "+x.message),m=!0,T.a_(new re(L,S)),h.close()}else Z(Xn,`RPC '${e}' stream ${s} received:`,y),T.u_(y)}}),p(a,$D.STAT_EVENT,v=>{v.stat===Pw.PROXY?Z(Xn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Pw.NOPROXY&&Z(Xn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(){return typeof window<"u"?window:null}function sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t){return new oW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="PersistentStream";class LN{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ON(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new re(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Z(fA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Z(fA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t7 extends LN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cW(this.serializer,e),r=function(i){if(!("targetChange"in i))return Me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?mr(o.readTime):Me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ww(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ip(l)?{documents:eN(i,l)}:{query:tN(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Qk(i,o.resumeToken);const c=Bw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=Vc(i,o.snapshotVersion.toTimestamp());const c=Bw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=dW(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ww(this.serializer),n.removeTarget=e,this.q_(n)}}class n7 extends LN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uW(e.writeResults,e.commitTime),r=mr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ww(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{}class s7 extends r7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,zw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(q.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,zw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class i7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="RemoteStore";class o7{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{fl(this)&&(Z(il,"Restarting streams for network reachability change."),await async function(l){const c=Se(l);c.Ea.add(4),await su(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ch(c)}(this))})}),this.Ra=new i7(r,s)}}async function Ch(t){if(fl(t))for(const e of t.da)await e(!0)}async function su(t){for(const e of t.da)await e(!1)}function Ig(t,e){const n=Se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vE(n)?yE(n):ou(n).O_()&&gE(n,e))}function Fc(t,e){const n=Se(t),r=ou(n);n.Ia.delete(e),r.O_()&&VN(n,e),n.Ia.size===0&&(r.O_()?r.L_():fl(n)&&n.Ra.set("Unknown"))}function gE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ou(t).Y_(e)}function VN(t,e){t.Va.Ue(e),ou(t).Z_(e)}function yE(t){t.Va=new nW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ou(t).start(),t.Ra.ua()}function vE(t){return fl(t)&&!ou(t).x_()&&t.Ia.size>0}function fl(t){return Se(t).Ea.size===0}function MN(t){t.Va=void 0}async function a7(t){t.Ra.set("Online")}async function l7(t){t.Ia.forEach((e,n)=>{gE(t,e)})}async function c7(t,e){MN(t),vE(t)?(t.Ra.ha(e),yE(t)):t.Ra.set("Unknown")}async function u7(t,e,n){if(t.Ra.set("Online"),e instanceof Gk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){Z(il,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vp(t,r)}else if(e instanceof nm?t.Va.Ze(e):e instanceof Kk?t.Va.st(e):t.Va.tt(e),!n.isEqual(Me.min()))try{const r=await bN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(dn.EMPTY_BYTE_STRING,d.snapshotVersion)),VN(i,l);const h=new vi(d.target,l,c,d.sequenceNumber);gE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z(il,"Failed to raise snapshot:",r),await vp(t,r)}}async function vp(t,e,n){if(!Xo(e))throw e;t.Ea.add(1),await su(t),t.Ra.set("Offline"),n||(n=()=>bN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z(il,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ch(t)})}function FN(t,e){return e().catch(n=>vp(t,n,e))}async function iu(t){const e=Se(t),n=Wo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:za;for(;d7(e);)try{const s=await QW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,h7(e,s)}catch(s){await vp(e,s)}UN(e)&&jN(e)}function d7(t){return fl(t)&&t.Ta.length<10}function h7(t,e){t.Ta.push(e);const n=Wo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function UN(t){return fl(t)&&!Wo(t).x_()&&t.Ta.length>0}function jN(t){Wo(t).start()}async function f7(t){Wo(t).ra()}async function m7(t){const e=Wo(t);for(const n of t.Ta)e.ea(n.mutations)}async function p7(t,e,n){const r=t.Ta.shift(),s=sE.from(r,e,n);await FN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await iu(t)}async function g7(t,e){e&&Wo(t).X_&&await async function(r,s){if(function(o){return Zz(o)&&o!==q.ABORTED}(s.code)){const i=r.Ta.shift();Wo(r).B_(),await FN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await iu(r)}}(t,e),UN(t)&&jN(t)}async function mA(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),Z(il,"RemoteStore received new credentials");const r=fl(n);n.Ea.add(3),await su(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ch(n)}async function Jw(t,e){const n=Se(t);e?(n.Ea.delete(2),await Ch(n)):e||(n.Ea.add(2),await su(n),n.Ra.set("Unknown"))}function ou(t){return t.ma||(t.ma=function(n,r,s){const i=Se(n);return i.sa(),new t7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:a7.bind(null,t),t_:l7.bind(null,t),r_:c7.bind(null,t),H_:u7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),vE(t)?yE(t):t.Ra.set("Unknown")):(await t.ma.stop(),MN(t))})),t.ma}function Wo(t){return t.fa||(t.fa=function(n,r,s){const i=Se(n);return i.sa(),new n7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:f7.bind(null,t),r_:g7.bind(null,t),ta:m7.bind(null,t),na:p7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await iu(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(il,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new wE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dh(t,e){if(mn("AsyncQueue",`${e}: ${t}`),Xo(t))return new re(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{static emptySet(e){return new rc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Ku(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new rc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.ga=new kt(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Uc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Uc(e,n,rc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class v7{constructor(){this.queries=gA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Se(n),i=s.queries;s.queries=gA(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new re(q.ABORTED,"Firestore shutting down"))}}function gA(){return new Ui(t=>kk(t),gg)}async function _E(t,e){const n=Se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new y7,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Dh(o,`Initialization of query '${Dl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&TE(n)}async function EE(t,e){const n=Se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function w7(t,e){const n=Se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&TE(n)}function _7(t,e,n){const r=Se(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function TE(t){t.Ca.forEach(e=>{e.next()})}var Xw,yA;(yA=Xw||(Xw={})).Ma="default",yA.Cache="cache";class IE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.key=e}}class BN{constructor(e){this.key=e}}class zN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=Ok(e),this.tu=new rc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new pA,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Ah(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;f&&m?f.data.isEqual(m.data)?T!==p&&(r.track({type:3,doc:m}),v=!0):this.su(f,m)||(r.track({type:2,doc:m}),v=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),v=!0):f&&!m&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(m?(o=o.add(m),i=p?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,T){const p=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:v})}};return p(m)-p(T)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Uc(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new BN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new $N(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Uc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const au="SyncEngine";class E7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class T7{constructor(e){this.key=e,this.hu=!1}}class I7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ui(a=>kk(a),gg),this.Iu=new Map,this.Eu=new Set,this.du=new kt(me.comparator),this.Au=new Map,this.Ru=new uE,this.Vu={},this.mu=new Map,this.fu=sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S7(t,e,n=!0){const r=Sg(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await WN(r,e,n,!0),s}async function b7(t,e){const n=Sg(t);await WN(n,e,!0,!1)}async function WN(t,e,n,r){const s=await mp(t.localStore,Gr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await SE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ig(t.remoteStore,s),a}async function SE(t,e,n,r,s){t.pu=(h,f,m)=>async function(p,v,w,y){let E=v.view.ru(w);E.Cs&&(E=await pp(p.localStore,v.query,!1).then(({documents:S})=>v.view.ru(S,E)));const x=y&&y.targetChanges.get(v.targetId),C=y&&y.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(E,p.isPrimaryClient,x,C);return Zw(p,v.targetId,L.au),L.snapshot}(t,h,f,m);const i=await pp(t.localStore,e,!0),o=new zN(e,i.Qs),a=o.ru(i.documents),l=Ph.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Zw(t,n,c.au);const d=new E7(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function A7(t,e,n){const r=Se(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!gg(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fc(r.remoteStore,s.targetId),jc(r,s.targetId)}).catch(Jo)):(jc(r,s.targetId),await Mc(r.localStore,s.targetId,!0))}async function x7(t,e){const n=Se(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fc(n.remoteStore,r.targetId))}async function R7(t,e,n){const r=RE(t);try{const s=await function(o,a){const l=Se(o),c=dt.now(),d=a.reduce((m,T)=>m.add(T.key),Je());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let T=zr(),p=Je();return l.Ns.getEntries(m,d).next(v=>{T=v,T.forEach((w,y)=>{y.isValidDocument()||(p=p.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,T)).next(v=>{h=v;const w=[];for(const y of a){const E=Jz(y,h.get(y.key).overlayedDocument);E!=null&&w.push(new ji(y.key,E,Tk(E.value.mapValue),xn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(v=>{f=v;const w=v.applyToLocalDocumentSet(h,p);return l.documentOverlayCache.saveOverlays(m,v.batchId,w)})}).then(()=>({batchId:f.batchId,changes:Vk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new kt(We)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await ea(r,s.changes),await iu(r.remoteStore)}catch(s){const i=Dh(s,"Failed to persist write");n.reject(i)}}async function qN(t,e){const n=Se(t);try{const r=await KW(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ke(o.hu,14607):s.removedDocuments.size>0&&(ke(o.hu,42227),o.hu=!1))}),await ea(n,r,e)}catch(r){await Jo(r)}}function vA(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Se(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)}),c&&TE(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P7(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new kt(me.comparator);o=o.insert(i,cn.newNoDocument(i,Me.min()));const a=Je().add(i),l=new Rh(Me.min(),new Map,new kt(We),o,a);await qN(r,l),r.du=r.du.remove(i),r.Au.delete(e),xE(r)}else await Mc(r.localStore,e,!1).then(()=>jc(r,e,n)).catch(Jo)}async function C7(t,e){const n=Se(t),r=e.batch.batchId;try{const s=await HW(n.localStore,e);AE(n,r,null),bE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ea(n,s)}catch(s){await Jo(s)}}async function D7(t,e,n){const r=Se(t);try{const s=await function(o,a){const l=Se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ke(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);AE(r,e,n),bE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ea(r,s)}catch(s){await Jo(s)}}function bE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function AE(t,e,n){const r=Se(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function jc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||HN(t,r)})}function HN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xE(t))}function Zw(t,e,n){for(const r of n)r instanceof $N?(t.Ru.addReference(r.key,e),k7(t,r)):r instanceof BN?(Z(au,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||HN(t,r.key)):Ie(19791,{wu:r})}function k7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Z(au,"New document in limbo: "+n),t.Eu.add(r),xE(t))}function xE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(ht.fromString(e)),r=t.fu.next();t.Au.set(r,new T7(n)),t.du=t.du.insert(n,r),Ig(t.remoteStore,new vi(Gr(bh(n.path)),r,"TargetPurposeLimboResolution",br.ce))}}async function ea(t,e,n){const r=Se(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=fE.As(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const d=Se(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Xo(h))throw h;Z(mE,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),T=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(T);d.Ms=d.Ms.insert(f,p)}}}(r.localStore,i))}async function N7(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){Z(au,"User change. New user:",e.toKey());const r=await SN(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new re(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ea(n,r.Ls)}}function O7(t,e){const n=Se(t),r=n.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let s=Je();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function L7(t,e){const n=Se(t),r=await pp(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&Zw(n,e.targetId,s.au),s}async function V7(t,e){const n=Se(t);return xN(n.localStore,e).then(r=>ea(n,r))}async function M7(t,e,n,r){const s=Se(t),i=await function(a,l){const c=Se(a),d=Se(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await iu(s.remoteStore):n==="acknowledged"||n==="rejected"?(AE(s,e,r||null),bE(s,e),function(a,l){Se(Se(a).mutationQueue).ir(l)}(s.localStore,e)):Ie(6720,"Unknown batchState",{Su:n}),await ea(s,i)):Z(au,"Cannot apply mutation batch with id: "+e)}async function F7(t,e){const n=Se(t);if(Sg(n),RE(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await wA(n,r.toArray());n.gu=!0,await Jw(n.remoteStore,!0);for(const i of s)Ig(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(jc(n,o),Mc(n.localStore,o,!0))),Fc(n.remoteStore,o)}),await s,await wA(n,r),function(o){const a=Se(o);a.Au.forEach((l,c)=>{Fc(a.remoteStore,c)}),a.Ru.Jr(),a.Au=new Map,a.du=new kt(me.comparator)}(n),n.gu=!1,await Jw(n.remoteStore,!1)}}async function wA(t,e,n){const r=Se(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await mp(r.localStore,Gr(l[0]));for(const c of l){const d=r.Tu.get(c),h=await L7(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await AN(r.localStore,o);a=await mp(r.localStore,c),await SE(r,KN(c),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function KN(t){return Ck(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function U7(t){return function(n){return Se(Se(n).persistence).Ts()}(Se(t).localStore)}async function j7(t,e,n,r){const s=Se(t);if(s.gu)return void Z(au,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await xN(s.localStore,Nk(i[0])),a=Rh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dn.EMPTY_BYTE_STRING);await ea(s,o,a);break}case"rejected":await Mc(s.localStore,e,!0),jc(s,e,r);break;default:Ie(64155,n)}}async function $7(t,e,n){const r=Sg(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Z(au,"Adding an already active target "+s);continue}const i=await AN(r.localStore,s),o=await mp(r.localStore,i);await SE(r,KN(i),o.targetId,!1,o.resumeToken),Ig(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Mc(r.localStore,s,!1).then(()=>{Fc(r.remoteStore,s),jc(r,s)}).catch(Jo)}}function Sg(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P7.bind(null,e),e.Pu.H_=w7.bind(null,e.eventManager),e.Pu.yu=_7.bind(null,e.eventManager),e}function RE(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D7.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return IN(this.persistence,new TN,e.initialUser,this.serializer)}Cu(e){return new dE(Eg.mi,this.serializer)}Du(e){return new kN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class B7 extends oh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ke(this.persistence.referenceDelegate instanceof fp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new dE(r=>fp.mi(r,n),this.serializer)}}class GN extends oh{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await RE(this.xu.syncEngine),await iu(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return IN(this.persistence,new TN,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new gN(r,e.asyncQueue,n)}Mu(e,n){const r=new ez(n,this.persistence);return new Z9(e.asyncQueue,r)}Cu(e){const n=EN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new hE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,NN(),sm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new kN}}class z7 extends GN{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof By&&(this.sharedClientState.syncEngine={Co:M7.bind(null,n),vo:j7.bind(null,n),Fo:$7.bind(null,n),Ts:U7.bind(null,n),Do:V7.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await F7(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=NN();if(!By.v(n))throw new re(q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=EN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new By(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N7.bind(null,this.syncEngine),await Jw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v7}()}createDatastore(e){const n=Tg(e.databaseInfo.databaseId),r=function(i){return new e7(i)}(e.databaseInfo);return function(i,o,a,l){return new s7(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new o7(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>vA(this.syncEngine,n,0),function(){return hA.v()?new hA:new YW}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new I7(s,i,o,a,l,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Se(s);Z(il,"RemoteStore shutting down."),i.Ea.add(5),await su(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="FirestoreClient";class W7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Zn.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z(qo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z(qo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress(),Z(qo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await SN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _A(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CE(t);Z(qo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>mA(e.remoteStore,s)),t._onlineComponents=e}async function CE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(qo,"Using user provided OfflineComponentProvider");try{await Wy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await Wy(t,new oh)}}else Z(qo,"Using default OfflineComponentProvider"),await Wy(t,new B7(void 0));return t._offlineComponents}async function DE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(qo,"Using user provided OnlineComponentProvider"),await _A(t,t._uninitializedComponentsProvider._online)):(Z(qo,"Using default OnlineComponentProvider"),await _A(t,new ah))),t._onlineComponents}function QN(t){return CE(t).then(e=>e.persistence)}function YN(t){return CE(t).then(e=>e.localStore)}function JN(t){return DE(t).then(e=>e.remoteStore)}function q7(t){return DE(t).then(e=>e.syncEngine)}async function wp(t){const e=await DE(t),n=e.eventManager;return n.onListen=S7.bind(null,e.syncEngine),n.onUnlisten=A7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x7.bind(null,e.syncEngine),n}function H7(t){return t.asyncQueue.enqueue(async()=>{const e=await QN(t),n=await JN(t);return e.setNetworkEnabled(!0),function(s){const i=Se(s);return i.Ea.delete(0),Ch(i)}(n)})}function K7(t){return t.asyncQueue.enqueue(async()=>{const e=await QN(t),n=await JN(t);return e.setNetworkEnabled(!1),async function(s){const i=Se(s);i.Ea.add(0),await su(i),i.Ra.set("Offline")}(n)})}function G7(t,e){const n=new os;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=Se(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new re(q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Dh(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await YN(t),e,n)),n.promise}function Q7(t,e,n={}){const r=new os;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new PE({next:f=>{d.Nu(),o.enqueueAndForget(()=>EE(i,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new re(q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new re(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new IE(bh(a.path),d,{includeMetadataChanges:!0,qa:!0});return _E(i,h)}(await wp(t),t.asyncQueue,e,n,r)),r.promise}function Y7(t,e){const n=new os;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await pp(s,i,!0),l=new zN(i,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Dh(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await YN(t),e,n)),n.promise}function J7(t,e,n={}){const r=new os;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new PE({next:f=>{d.Nu(),o.enqueueAndForget(()=>EE(i,h)),f.fromCache&&l.source==="server"?c.reject(new re(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new IE(a,d,{includeMetadataChanges:!0,qa:!0});return _E(i,h)}(await wp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7="firestore.googleapis.com",TA=!0;class IA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X7,this.ssl=TA}else this.host=e.host,this.ssl=e.ssl??TA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pN)throw new re(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kE{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HD;switch(r.type){case"firstParty":return new W9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=EA.get(n);r&&(Z("ComponentProvider","Removing Datastore"),EA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Th(n,Wt._jsonSchema))return new Wt(e,r||null,new me(ht.fromString(n.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:_n("string",Wt._jsonSchemaVersion),referencePath:_n("string")};class _i extends Ds{constructor(e,n,r){super(e,n,bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new me(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function Ne(t,e,...n){if(t=ft(t),GD("collection","path",e),t instanceof kE){const r=ht.fromString(e,...n);return fb(r),new _i(t,null,r)}{if(!(t instanceof Wt||t instanceof _i))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return fb(r),new _i(t.firestore,null,r)}}function Ee(t,e,...n){if(t=ft(t),arguments.length===1&&(e=ag.newId()),GD("doc","path",e),t instanceof kE){const r=ht.fromString(e,...n);return hb(r),new Wt(t,null,new me(r))}{if(!(t instanceof Wt||t instanceof _i))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return hb(r),new Wt(t.firestore,t instanceof _i?t.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="AsyncQueue";class bA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ON(this,"async_queue_retry"),this._c=()=>{const r=sm();r&&Z(SA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new os;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xo(e))throw e;Z(SA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",AA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=wE.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Ie(47125,{Pc:AA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ir extends kE{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new bA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bA(e),this._firestoreClient=void 0,await e}}}function ZN(t,e,n){n||(n=sp);const r=ig(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Tc(i,e))return s;throw new re(q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new re(q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pN)throw new re(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Mi(e.host)&&L0(e.host),r.initialize({options:e,instanceIdentifier:n})}function ii(t){if(t._terminated)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eO(t),t._firestoreClient}function eO(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,d){return new Rz(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,XN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new W7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Z7(t,e){jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return tO(t,ah.provider,{build:r=>new GN(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function e8(t){jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();tO(t,ah.provider,{build:n=>new z7(n,e.cacheSizeBytes)})}function tO(t,e,n){if((t=un(t,ir))._firestoreClient||t._terminated)throw new re(q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new re(q.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},eO(t)}function NE(t){return H7(ii(t=un(t,ir)))}function OE(t){return K7(ii(t=un(t,ir)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(dn.fromBase64String(e))}catch(n){throw new re(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jr(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Th(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:_n("string",jr._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Is._jsonSchemaVersion}}static fromJSON(e){if(Th(e,Is._jsonSchema))return new Is(e.latitude,e.longitude)}}Is._jsonSchemaVersion="firestore/geoPoint/1.0",Is._jsonSchema={type:_n("string",Is._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Th(e,Ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ss(e.vectorValues);throw new re(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ss._jsonSchemaVersion="firestore/vectorValue/1.0",Ss._jsonSchema={type:_n("string",Ss._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=/^__.*__$/;class n8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}class nO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:t})}}class bg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _p(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rO(this.Ac)&&t8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class r8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tg(e)}Cc(e,n,r,s=!1){return new bg({Ac:e,methodName:n,Dc:r,path:zt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kh(t){const e=t._freezeSettings(),n=Tg(t._databaseId);return new r8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function LE(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);FE("Data must be an object, but it was:",o,r);const a=oO(r,o);let l,c;if(i.merge)l=new Ar(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=e_(e,h,n);if(!o.contains(f))throw new re(q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);lO(d,f)||d.push(f)}l=new Ar(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new n8(new nr(a),l,c)}class Ag extends cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ag}}function s8(t,e,n){return new bg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class VE extends cu{_toFieldTransform(e){return new nE(e.path,new Oc)}isEqual(e){return e instanceof VE}}class ME extends cu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=s8(this,e,!0),r=this.vc.map(i=>uu(i,n)),s=new tl(r);return new nE(e.path,s)}isEqual(e){return e instanceof ME&&Tc(this.vc,e.vc)}}function sO(t,e,n,r){const s=t.Cc(1,e,n);FE("Data must be an object, but it was:",s,r);const i=[],o=nr.empty();Zo(r,(l,c)=>{const d=UE(e,l,n);c=ft(c);const h=s.yc(d);if(c instanceof Ag)i.push(d);else{const f=uu(c,h);f!=null&&(i.push(d),o.set(d,f))}});const a=new Ar(i);return new nO(o,a,s.fieldTransforms)}function iO(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[e_(e,r,n)],l=[s];if(i.length%2!=0)throw new re(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(e_(e,i[f])),l.push(i[f+1]);const c=[],d=nr.empty();for(let f=a.length-1;f>=0;--f)if(!lO(c,a[f])){const m=a[f];let T=l[f];T=ft(T);const p=o.yc(m);if(T instanceof Ag)c.push(m);else{const v=uu(T,p);v!=null&&(c.push(m),d.set(m,v))}}const h=new Ar(c);return new nO(d,h,o.fieldTransforms)}function i8(t,e,n,r=!1){return uu(n,t.Cc(r?4:3,e))}function uu(t,e){if(aO(t=ft(t)))return FE("Unsupported field value:",e,t),oO(t,e);if(t instanceof cu)return function(r,s){if(!rO(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=uu(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=dt.fromDate(r);return{timestampValue:Vc(s.serializer,i)}}if(r instanceof dt){const i=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vc(s.serializer,i)}}if(r instanceof Is)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jr)return{bytesValue:Qk(s.serializer,r._byteString)};if(r instanceof Wt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:aE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ss)return function(o,a){return{mapValue:{fields:{[J0]:{stringValue:X0},[Cc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return tE(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${lg(r)}`)}(t,e)}function oO(t,e){const n={};return fk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(t,(r,s)=>{const i=uu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function aO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof Is||t instanceof jr||t instanceof Wt||t instanceof cu||t instanceof Ss)}function FE(t,e,n){if(!aO(n)||!YD(n)){const r=lg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function e_(t,e,n){if((e=ft(e))instanceof lu)return e._internalPath;if(typeof e=="string")return UE(t,e);throw _p("Field path arguments must be of type string or ",t,!1,void 0,n)}const o8=new RegExp("[~\\*/\\[\\]]");function UE(t,e,n){if(e.search(o8)>=0)throw _p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lu(...e.split("."))._internalPath}catch{throw _p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _p(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new re(q.INVALID_ARGUMENT,a+t+l)}function lO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a8 extends cO{data(){return super.data()}}function xg(t,e){return typeof e=="string"?UE(t,e):e instanceof lu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jE{}class Rg extends jE{}function Be(t,e,...n){let r=[];e instanceof jE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Pg).length,a=i.filter(l=>l instanceof Nh).length;if(o>1||o>0&&a>0)throw new re(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Nh extends Rg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nh(e,n,r)}_apply(e){const n=this._parse(e);return dO(e._query,n),new Ds(e.firestore,e.converter,$w(e._query,n))}_parse(e){const n=kh(e.firestore);return function(i,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new re(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){PA(h,d);const T=[];for(const p of h)T.push(RA(l,i,p));f={arrayValue:{values:T}}}else f=RA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||PA(h,d),f=i8(a,o,h,d==="in"||d==="not-in");return rt.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ue(t,e,n){const r=e,s=xg("where",t);return Nh._create(s,r,n)}class Pg extends jE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)dO(o,l),o=$w(o,l)}(e._query,n),new Ds(e.firestore,e.converter,$w(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cg extends Rg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new re(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sh(i,o)}(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new nu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function No(t,e="asc"){const n=e,r=xg("orderBy",t);return Cg._create(r,n)}class Dg extends Rg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Dg(e,n,r)}_apply(e){return new Ds(e.firestore,e.converter,ap(e._query,this._limit,this._limitType))}}function du(t){return Y9("limit",t),Dg._create("limit",t,"F")}function RA(t,e,n){if(typeof(n=ft(n))=="string"){if(n==="")throw new re(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dk(e)&&n.indexOf("/")!==-1)throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ht.fromString(n));if(!me.isDocumentKey(r))throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nh(t,new me(r))}if(n instanceof Wt)return nh(t,n._key);throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lg(n)}.`)}function PA(t,e){if(!Array.isArray(t)||t.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dO(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hO{convertValue(e,n="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Cc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>$t(o.doubleValue));return new Ss(n)}convertGeoPoint(e){return new Is($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(eh(e));default:return null}}convertTimestamp(e){const n=ki(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);ke(iN(r),9688,{name:e});const s=new $o(r.get(1),r.get(3)),i=new me(r.popFirst(5));return s.isEqual(n)||mn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ei extends cO{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ei._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:_n("string",Ei._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class vd extends Ei{data(e={}){return super.data(e)}}class Ti{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new xa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vd(this._firestore,this._userDataWriter,r.key,r,new xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new vd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new vd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:l8(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ti._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){t=un(t,Wt);const e=un(t.firestore,ir);return Q7(ii(e),t._key).then(n=>mO(e,t,n))}Ti._jsonSchemaVersion="firestore/querySnapshot/1.0",Ti._jsonSchema={type:_n("string",Ti._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class Oh extends hO{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function fO(t){t=un(t,Wt);const e=un(t.firestore,ir),n=ii(e),r=new Oh(e);return G7(n,t._key).then(s=>new Ei(e,r,t._key,s,new xa(s!==null&&s.hasLocalMutations,!0),t.converter))}function Ke(t){t=un(t,Ds);const e=un(t.firestore,ir),n=ii(e),r=new Oh(e);return uO(t._query),J7(n,t._query).then(s=>new Ti(e,r,t,s))}function c8(t){t=un(t,Ds);const e=un(t.firestore,ir),n=ii(e),r=new Oh(e);return Y7(n,t._query).then(s=>new Ti(e,r,t,s))}function Mt(t,e,n){t=un(t,Wt);const r=un(t.firestore,ir),s=$E(t.converter,e,n);return hu(r,[LE(kh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xn.none())])}function Xt(t,e,n,...r){t=un(t,Wt);const s=un(t.firestore,ir),i=kh(s);let o;return o=typeof(e=ft(e))=="string"||e instanceof lu?iO(i,"updateDoc",t._key,e,n,r):sO(i,"updateDoc",t._key,e),hu(s,[o.toMutation(t._key,xn.exists(!0))])}function Vn(t){return hu(un(t.firestore,ir),[new xh(t._key,xn.none())])}function Js(t,e){const n=un(t.firestore,ir),r=Ee(t),s=$E(t.converter,e);return hu(n,[LE(kh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}function Oi(t,...e){var l,c,d;t=ft(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xA(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,a;if(t instanceof Wt)o=un(t.firestore,ir),a=bh(t._key.path),i={next:h=>{e[r]&&e[r](mO(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=un(t,Ds);o=un(h.firestore,ir),a=h._query;const f=new Oh(o);i={next:m=>{e[r]&&e[r](new Ti(o,f,h,m))},error:e[r+1],complete:e[r+2]},uO(t._query)}return function(f,m,T,p){const v=new PE(p),w=new IE(m,v,T);return f.asyncQueue.enqueueAndForget(async()=>_E(await wp(f),w)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>EE(await wp(f),w))}}(ii(o),a,s,i)}function hu(t,e){return function(r,s){const i=new os;return r.asyncQueue.enqueueAndForget(async()=>R7(await q7(r),s,i)),i.promise}(ii(t),e)}function mO(t,e,n){const r=n.docs.get(e._key),s=new Oh(t);return new Ei(t,s,e._key,r,new xa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=kh(e)}set(e,n,r){this._verifyNotCommitted();const s=qy(e,this._firestore),i=$E(s.converter,n,r),o=LE(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,xn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=qy(e,this._firestore);let o;return o=typeof(n=ft(n))=="string"||n instanceof lu?iO(this._dataReader,"WriteBatch.update",i._key,n,r,s):sO(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qy(e,this._firestore);return this._mutations=this._mutations.concat(new xh(n._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qy(t,e){if((t=ft(t)).firestore!==e)throw new re(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Oe(){return new VE("serverTimestamp")}function u8(...t){return new ME("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){return ii(t=un(t,ir)),new pO(t,e=>hu(t,e))}(function(e,n=!0){(function(s){tu=s})(_h),ei(new Rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ir(new B9(r.getProvider("auth-internal")),new q9(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new re(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(c.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Kr(lb,cb,e),Kr(lb,cb,"esm2020")})();const kn=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:hO,Bytes:jr,CollectionReference:_i,DocumentReference:Wt,DocumentSnapshot:Ei,FieldPath:lu,FieldValue:cu,Firestore:ir,FirestoreError:re,GeoPoint:Is,Query:Ds,QueryCompositeFilterConstraint:Pg,QueryConstraint:Rg,QueryDocumentSnapshot:vd,QueryFieldFilterConstraint:Nh,QueryLimitConstraint:Dg,QueryOrderByConstraint:Cg,QuerySnapshot:Ti,SnapshotMetadata:xa,Timestamp:dt,VectorValue:Ss,WriteBatch:pO,_AutoId:ag,_ByteString:dn,_DatabaseId:$o,_DocumentKey:me,_EmptyAuthCredentialsProvider:HD,_FieldPath:zt,_cast:un,_logWarn:jo,_validateIsNotUsedTogether:QD,addDoc:Js,arrayUnion:u8,collection:Ne,deleteDoc:Vn,disableNetwork:OE,doc:Ee,enableIndexedDbPersistence:Z7,enableMultiTabIndexedDbPersistence:e8,enableNetwork:NE,ensureFirestoreConfigured:ii,executeWrite:hu,getDoc:gt,getDocFromCache:fO,getDocs:Ke,getDocsFromCache:c8,initializeFirestore:ZN,limit:du,onSnapshot:Oi,orderBy:No,query:Be,serverTimestamp:Oe,setDoc:Mt,setLogLevel:WD,updateDoc:Xt,where:Ue,writeBatch:d8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8="type.googleapis.com/google.protobuf.Int64Value",f8="type.googleapis.com/google.protobuf.UInt64Value";function gO(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Ep(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Ep(e));if(typeof t=="function"||typeof t=="object")return gO(t,e=>Ep(e));throw new Error("Data cannot be encoded in JSON: "+t)}function $c(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case h8:case f8:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>$c(e)):typeof t=="function"||typeof t=="object"?gO(t,e=>$c(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xr extends Cs{constructor(e,n,r){super(`${BE}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,xr.prototype)}}function m8(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Tp(t,e){let n=m8(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!CA[o])return new xr("internal","internal");n=CA[o],r=o}const a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=$c(s))}}catch{}return n==="ok"?null:new xr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ur(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="us-central1",g8=/^data: (.*?)(?:\n|$)/;function y8(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new xr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class v8{constructor(e,n,r,s,i=t_,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new p8(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=t_}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function w8(t,e,n){const r=Mi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(L0(t.emulatorOrigin+"/backends"),ZC("Functions",!0))}function _8(t,e,n){const r=s=>T8(t,e,s,{});return r.stream=(s,i)=>S8(t,e,s,i),r}function yO(t){return t.emulatorOrigin&&Mi(t.emulatorOrigin)?"include":void 0}async function E8(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:yO(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function vO(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function T8(t,e,n,r){const s=t._url(e);return I8(t,s,n,r)}async function I8(t,e,n,r){n=Ep(n);const s={data:n},i=await vO(t,r),o=r.timeout||7e4,a=y8(o),l=await Promise.race([E8(e,s,i,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!l)throw new xr("cancelled","Firebase Functions instance was deleted.");const c=Tp(l.status,l.json);if(c)throw c;if(!l.json)throw new xr("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new xr("internal","Response is missing data field.");return{data:$c(d)}}function S8(t,e,n,r){const s=t._url(e);return b8(t,s,n,r||{})}async function b8(t,e,n,r){var f;n=Ep(n);const s={data:n},i=await vO(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:yO(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new xr("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const T=Tp(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let a,l;const c=new Promise((m,T)=>{a=m,l=T});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new xr("cancelled","Request was cancelled.");l(m)});const d=o.body.getReader(),h=A8(d,a,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:T,done:p}=await m.read();return{value:T,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:c}}function A8(t,e,n,r){const s=(o,a)=>{const l=o.match(g8);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){e($c(d.result));return}if("message"in d){a.enqueue($c(d.message));return}if("error"in d){const h=Tp(0,d);a.error(h),n(h);return}}catch(d){if(d instanceof xr){a.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let a="";return l();async function l(){if(r!=null&&r.aborted){const c=new xr("cancelled","Request was cancelled");return o.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){a.trim()&&s(a.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new xr("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}a+=i.decode(c,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return l()}catch(c){const d=c instanceof xr?c:Tp(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const DA="@firebase/functions",kA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8="auth-internal",R8="app-check-internal",P8="messaging-internal";function C8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(x8),o=n.getProvider(P8),a=n.getProvider(R8);return new v8(s,i,o,a,r)};ei(new Rs(BE,e,"PUBLIC").setMultipleInstances(!0)),Kr(DA,kA,t),Kr(DA,kA,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(t=aD(),e=t_){const r=ig(ft(t),BE).getImmediate({identifier:e}),s=JC("functions");return s&&k8(r,...s),r}function k8(t,e,n){w8(ft(t),e,n)}function BG(t,e,n){return _8(ft(t),e)}C8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="firebasestorage.googleapis.com",_O="storageBucket",N8=2*60*1e3,O8=10*60*1e3,L8=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Cs{constructor(e,n,r=0){super(Hy(e),`Firebase Storage: ${n} (${Hy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ut||(Ut={}));function Hy(t){return"storage/"+t}function zE(){const t="An unknown error occurred, please check the error payload for server response.";return new tn(Ut.UNKNOWN,t)}function V8(t){return new tn(Ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function M8(t){return new tn(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function F8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(Ut.UNAUTHENTICATED,t)}function U8(){return new tn(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function j8(t){return new tn(Ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EO(){return new tn(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TO(){return new tn(Ut.CANCELED,"User canceled the upload/download.")}function $8(t){return new tn(Ut.INVALID_URL,"Invalid URL '"+t+"'.")}function B8(t){return new tn(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function z8(){return new tn(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_O+"' property when initializing the app?")}function IO(){return new tn(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W8(){return new tn(Ut.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function q8(){return new tn(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function H8(t){return new tn(Ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function n_(t){return new tn(Ut.INVALID_ARGUMENT,t)}function SO(){return new tn(Ut.APP_DELETED,"The Firebase app was deleted.")}function K8(t){return new tn(Ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wd(t,e){return new tn(Ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vu(t){throw new tn(Ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wr.makeFromUrl(e,n)}catch{return new Wr(e,"")}if(r.path==="")return r;throw B8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),T={bucket:1,path:3},p=n===wO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",w=new RegExp(`^https?://${p}/${s}/${v}`,"i"),E=[{regex:a,indices:l,postModify:i},{regex:m,indices:T,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<E.length;x++){const C=E[x],L=C.regex.exec(e);if(L){const S=L[C.indices.bucket];let b=L[C.indices.path];b||(b=""),r=new Wr(S,b),C.postModify(r);break}}if(r==null)throw $8(e);return r}}class G8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...v){c||(c=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(m,l())},v)}function f(){i&&clearTimeout(i)}function m(v,...w){if(c){f();return}if(v){f(),d.call(null,v,...w);return}if(l()||o){f(),d.call(null,v,...w);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let T=!1;function p(v){T||(T=!0,f(),!c&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}function Y8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t){return t!==void 0}function X8(t){return typeof t=="function"}function Z8(t){return typeof t=="object"&&!Array.isArray(t)}function kg(t){return typeof t=="string"||t instanceof String}function NA(t){return WE()&&t instanceof Blob}function WE(){return typeof Blob<"u"}function OA(t,e,n,r){if(r<e)throw n_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw n_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function bO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(e,n,r,s,i,o,a,l,c,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,p)=>{this.resolve_=T,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new If(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ha.NO_ERROR,l=i.getStatus();if(!a||AO(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ha.ABORT;r(!1,new If(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new If(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());J8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=zE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?SO():TO();o(l)}else{const l=EO();o(l)}};this.canceled_?n(!1,new If(!1,null,!0)):this.backoffId_=Q8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Y8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class If{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function iq(t,e,n,r,s,i,o=!0,a=!1){const l=bO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return rq(d,e),tq(d,n),nq(d,i),sq(d,r),new eq(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aq(...t){const e=oq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(WE())return new Blob(t);throw new tn(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(t){if(typeof atob>"u")throw H8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ky{constructor(e,n){this.data=e,this.contentType=n||null}}function uq(t,e){switch(t){case Ks.RAW:return new Ky(xO(e));case Ks.BASE64:case Ks.BASE64URL:return new Ky(RO(t,e));case Ks.DATA_URL:return new Ky(hq(e),fq(e))}throw zE()}function xO(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dq(t){let e;try{e=decodeURIComponent(t)}catch{throw wd(Ks.DATA_URL,"Malformed data URL.")}return xO(e)}function RO(t,e){switch(t){case Ks.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw wd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ks.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw wd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cq(e)}catch(s){throw s.message.includes("polyfill")?s:wd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class PO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wd(Ks.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=mq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hq(t){const e=new PO(t);return e.base64?RO(Ks.BASE64,e.rest):dq(e.rest)}function fq(t){return new PO(t).contentType}function mq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){let r=0,s="";NA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(NA(this.data_)){const r=this.data_,s=lq(r,e,n);return s===null?null:new mi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mi(r,!0)}}static getBlob(...e){if(WE()){const n=e.map(r=>r instanceof mi?r.data_:r);return new mi(aq.apply(null,n))}else{const n=e.map(o=>kg(o)?uq(Ks.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new mi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){let e;try{e=JSON.parse(t)}catch{return null}return Z8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function DO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(t,e){return e}class lr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||yq}}let Sf=null;function vq(t){return!kg(t)||t.length<2?t:DO(t)}function qE(){if(Sf)return Sf;const t=[];t.push(new lr("bucket")),t.push(new lr("generation")),t.push(new lr("metageneration")),t.push(new lr("name","fullPath",!0));function e(i,o){return vq(o)}const n=new lr("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new lr("size");return s.xform=r,t.push(s),t.push(new lr("timeCreated")),t.push(new lr("updated")),t.push(new lr("md5Hash",null,!0)),t.push(new lr("cacheControl",null,!0)),t.push(new lr("contentDisposition",null,!0)),t.push(new lr("contentEncoding",null,!0)),t.push(new lr("contentLanguage",null,!0)),t.push(new lr("contentType",null,!0)),t.push(new lr("metadata","customMetadata",!0)),Sf=t,Sf}function wq(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Wr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function _q(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return wq(r,t),r}function kO(t,e,n){const r=CO(e);return r===null?null:_q(t,r,n)}function Eq(t,e,n,r){const s=CO(e);if(s===null||!kg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=Lh(f,n,r),T=bO({alt:"media",token:c});return m+T})[0]}function NO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class fu{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){if(!t)throw zE()}function HE(t,e){function n(r,s){const i=kO(t,s,e);return Ii(i!==null),i}return n}function Tq(t,e){function n(r,s){const i=kO(t,s,e);return Ii(i!==null),Eq(i,s,t.host,t._protocol)}return n}function Vh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=U8():s=F8():n.getStatus()===402?s=M8(t.bucket):n.getStatus()===403?s=j8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function OO(t){const e=Vh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=V8(t.path)),i.serverResponse=s.serverResponse,i}return n}function Iq(t,e,n){const r=e.fullServerUrl(),s=Lh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new fu(s,i,HE(t,n),o);return a.errorHandler=OO(e),a}function Sq(t,e,n){const r=e.fullServerUrl(),s=Lh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new fu(s,i,Tq(t,n),o);return a.errorHandler=OO(e),a}function bq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function LO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=bq(null,e)),r}function VO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let x=0;x<2;x++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=LO(e,r,s),d=NO(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=mi.getBlob(h,r,f);if(m===null)throw IO();const T={name:c.fullPath},p=Lh(i,t.host,t._protocol),v="POST",w=t.maxUploadRetryTime,y=new fu(p,v,HE(t,n),w);return y.urlParams=T,y.headers=o,y.body=m.uploadData(),y.errorHandler=Vh(e),y}class Ip{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function KE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ii(!1)}return Ii(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Aq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=LO(e,r,s),a={name:o.fullPath},l=Lh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=NO(o,n),f=t.maxUploadRetryTime;function m(p){KE(p);let v;try{v=p.getResponseHeader("X-Goog-Upload-URL")}catch{Ii(!1)}return Ii(kg(v)),v}const T=new fu(l,c,m,f);return T.urlParams=a,T.headers=d,T.body=h,T.errorHandler=Vh(e),T}function xq(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=KE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ii(!1)}h||Ii(!1);const f=Number(h);return Ii(!isNaN(f)),new Ip(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new fu(n,o,i,a);return l.headers=s,l.errorHandler=Vh(e),l}const LA=256*1024;function Rq(t,e,n,r,s,i,o,a){const l=new Ip(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw W8();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const T={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,f);if(p===null)throw IO();function v(x,C){const L=KE(x,["active","final"]),S=l.current+d,b=r.size();let R;return L==="final"?R=HE(e,i)(x,C):R=null,new Ip(S,b,L==="final",R)}const w="POST",y=e.maxUploadRetryTime,E=new fu(n,w,v,y);return E.headers=T,E.body=p.uploadData(),E.progressCallback=a||null,E.errorHandler=Vh(t),E}const Tr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gy(t){switch(t){case"running":case"pausing":case"canceling":return Tr.RUNNING;case"paused":return Tr.PAUSED;case"success":return Tr.SUCCESS;case"canceled":return Tr.CANCELED;case"error":return Tr.ERROR;default:return Tr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,n,r){if(X8(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Cq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Vu("cannot .send() more than once");if(Mi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Dq extends Cq{initXhr(){this.xhr_.responseType="text"}}function va(){return new Dq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=qE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ut.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(AO(s.status,[]))if(i)s=EO();else{this.sleepTime=Math.max(this.sleepTime*2,L8),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ut.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Aq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=xq(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,va,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=LA*this._chunkMultiplier,n=new Ip(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Rq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,va,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){LA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Iq(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=VO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,va,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=TO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Gy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Pq(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Gy(this._state)){case Tr.SUCCESS:Al(this._resolve.bind(null,this.snapshot))();break;case Tr.CANCELED:case Tr.ERROR:const n=this._reject;Al(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Gy(this._state)){case Tr.RUNNING:case Tr.PAUSED:e.next&&Al(e.next.bind(e,this.snapshot))();break;case Tr.SUCCESS:e.complete&&Al(e.complete.bind(e))();break;case Tr.CANCELED:case Tr.ERROR:e.error&&Al(e.error.bind(e,this._error))();break;default:e.error&&Al(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this._service=e,n instanceof Wr?this._location=n:this._location=Wr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ol(e,n)}get root(){const e=new Wr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DO(this._location.path)}get storage(){return this._service}get parent(){const e=pq(this._location.path);if(e===null)return null;const n=new Wr(this._location.bucket,e);return new ol(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw K8(e)}}function Nq(t,e,n){t._throwIfRoot("uploadBytes");const r=VO(t.storage,t._location,qE(),new mi(e,!0),n);return t.storage.makeRequestWithTokens(r,va).then(s=>({metadata:s,ref:t}))}function Oq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new kq(t,new mi(e),n)}function Lq(t){t._throwIfRoot("getDownloadURL");const e=Sq(t.storage,t._location,qE());return t.storage.makeRequestWithTokens(e,va).then(n=>{if(n===null)throw q8();return n})}function Vq(t,e){const n=gq(t._location.path,e),r=new Wr(t._location.bucket,n);return new ol(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mq(t){return/^[A-Za-z]+:\/\//.test(t)}function Fq(t,e){return new ol(t,e)}function MO(t,e){if(t instanceof GE){const n=t;if(n._bucket==null)throw z8();const r=new ol(n,n._bucket);return e!=null?MO(r,e):r}else return e!==void 0?Vq(t,e):t}function Uq(t,e){if(e&&Mq(e)){if(t instanceof GE)return Fq(t,e);throw n_("To use ref(service, url), the first argument must be a Storage instance.")}else return MO(t,e)}function VA(t,e){const n=e==null?void 0:e[_O];return n==null?null:Wr.makeFromBucketSpec(n,t)}function jq(t,e,n,r={}){t.host=`${e}:${n}`;const s=Mi(e);s&&(L0(`https://${t.host}/b`),ZC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:x$(i,t.app.options.projectId))}class GE{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=wO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N8,this._maxUploadRetryTime=O8,this._requests=new Set,s!=null?this._bucket=Wr.makeFromBucketSpec(s,this._host):this._bucket=VA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wr.makeFromBucketSpec(this._url,e):this._bucket=VA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ol(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new G8(SO());{const o=iq(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const MA="@firebase/storage",FA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="storage";function zG(t,e,n){return t=ft(t),Nq(t,e,n)}function $q(t,e,n){return t=ft(t),Oq(t,e,n)}function Bq(t){return t=ft(t),Lq(t)}function zq(t,e){return t=ft(t),Uq(t,e)}function UO(t=aD(),e){t=ft(t);const r=ig(t,FO).getImmediate({identifier:e}),s=JC("storage");return s&&Wq(r,...s),r}function Wq(t,e,n,r={}){jq(t,e,n,r)}function qq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new GE(n,r,s,e,_h)}function Hq(){ei(new Rs(FO,qq,"PUBLIC").setMultipleInstances(!0)),Kr(MA,FA,""),Kr(MA,FA,"esm2020")}Hq();const Kq={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},r_={apiKey:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),authDomain:"voda-c6abd.firebaseapp.com",projectId:"voda-c6abd",storageBucket:"voda-c6abd.appspot.com",messagingSenderId:"483702062341",appId:"1:483702062341:web:b1ff06ad175cb7ae428b6c"};console.log(" Initializing Firebase with config:",{projectId:r_.projectId,authDomain:r_.authDomain,emulatorMode:!1});const Ng=oD(r_);try{typeof window<"u",void 0||console.log(" App Check not initialized: missing VITE_FIREBASE_RECAPTCHA_KEY")}catch(t){console.log(" Failed to initialize App Check (will proceed without it):",t)}const Pt=LB(Ng,{persistence:[PD,Aw]});console.log(" Firebase Auth initialized with browserLocalPersistence (fallback to inMemory)");const G=ZN(Ng,{experimentalForceLongPolling:!0,useFetchStreams:!1});try{WD("error")}catch{}const Gq=D8(Ng,"us-central1");UO(Ng);console.log(" Firebase initialized successfully");const Qq=async()=>{try{console.log(" Offline persistence disabled (env flag or emulator mode)"),console.log(" Firestore features configured successfully")}catch(t){console.error(" Error configuring Firestore features:",t)}};setTimeout(Qq,100);let fa=0;const Qy=3,Yq=1e3,jO=async t=>{var e,n;if(console.error(" Firestore connection error:",t),(t.code==="unavailable"||t.code==="failed-precondition"||(e=t.message)!=null&&e.includes("ERR_ABORTED")||(n=t.message)!=null&&n.includes("UNAVAILABLE"))&&fa<Qy){fa++;const r=Math.min(Yq*Math.pow(2,fa-1),1e4);console.log(` Attempting to reconnect (${fa}/${Qy}) in ${r}ms...`);try{await OE(G),await new Promise(s=>setTimeout(s,r)),await NE(G),console.log(" Firestore reconnected successfully"),fa=0}catch(s){console.error(" Failed to reconnect:",s),fa>=Qy&&(console.error(" Maximum reconnection attempts reached."),Jq())}}},Jq=()=>{const t=document.createElement("div");t.style.cssText=`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    color: #721c24;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #f5c6cb;
    z-index: 10000;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 400px;
  `,t.innerHTML=`
    <h3 style="margin: 0 0 10px 0;">  </h3>
    <p style="margin: 0 0 15px 0;">   .     .</p>
    <button onclick="window.location.reload()" style="
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    ">  </button>
  `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},1e4)};window.addEventListener("online",async()=>{console.log(" Network back online, enabling Firestore...");try{await NE(G),fa=0,console.log(" Firestore network enabled")}catch(t){console.error(" Failed to enable Firestore network:",t)}});window.addEventListener("offline",async()=>{console.log(" Network offline, disabling Firestore network...");try{await OE(G),console.log(" Firestore network disabled")}catch(t){console.error(" Failed to disable Firestore network:",t)}});window.addEventListener("unhandledrejection",t=>{var e,n,r,s,i,o;(((e=t.reason)==null?void 0:e.code)==="unavailable"||((n=t.reason)==null?void 0:n.code)==="failed-precondition"||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED")||(o=(i=t.reason)==null?void 0:i.message)!=null&&o.includes("UNAVAILABLE"))&&(jO(t.reason),t.preventDefault())});console.log("Using Firebase Production Environment");const Qt=Object.freeze(Object.defineProperty({__proto__:null,auth:Pt,db:G,functions:Gq,handleFirestoreError:jO},Symbol.toStringTag,{value:"Module"})),Xe=t=>{if(t&&typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(t instanceof Date)return t;if(typeof t=="number")return new Date(t);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return new Date},Xq=t=>{if(t===null)return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null},al=t=>{if(t===void 0)return;if(t===null)return null;if(Array.isArray(t))return t.map(n=>al(n)).filter(n=>n!==void 0);if(t instanceof Date||!Xq(t))return t;const e={};for(const[n,r]of Object.entries(t)){const s=al(r);s!==void 0&&(e[n]=s)}return e},im={async create(t){await Mt(Ee(G,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Oe()})},async getById(t){const e=Ee(G,"profiles",t),n=await gt(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Xe(r.createdAt)}}return null},async update(t,e){const n=Ee(G,"profiles",t);await Xt(n,{...e,updatedAt:Oe()})},async getByShopId(t){const e=Be(Ne(G,"profiles"),Ue("shopId","==",t));return(await Ke(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Xe(s.createdAt)}})}},s_={async create(t){return(await Js(Ne(G,"referrals"),{...t,createdAt:Oe(),updatedAt:Oe()})).id},async getByReferrerId(t){try{const e=Be(Ne(G,"referrals"),Ue("referrerId","==",t),No("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Xe(r.data().createdAt),updatedAt:Xe(r.data().updatedAt)}))}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index")){const r=Be(Ne(G,"referrals"),Ue("referrerId","==",t));return(await Ke(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:Xe(i.data().createdAt),updatedAt:Xe(i.data().updatedAt)})).sort((i,o)=>{var a,l,c,d;return(((l=(a=o.createdAt)==null?void 0:a.getTime)==null?void 0:l.call(a))||0)-(((d=(c=i.createdAt)==null?void 0:c.getTime)==null?void 0:d.call(c))||0)})}throw e}},async getByReferralCode(t){const e=Be(Ne(G,"referrals"),Ue("referralCode","==",t),du(1)),n=await Ke(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data(),createdAt:Xe(r.data().createdAt),updatedAt:Xe(r.data().updatedAt)}},async updateStatus(t,e){await Xt(Ee(G,"referrals",t),{status:e,updatedAt:Oe()})},generateReferralCode(t){const e=Date.now().toString(36);return`REF_${t.slice(-6)}_${e}`.toUpperCase()}},$O={async getByUserId(t){const e=Be(Ne(G,"profiles"),Ue("userId","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{userId:r.id,...s,createdAt:Xe(s.createdAt),updatedAt:Xe(s.updatedAt)}}return null},async update(t,e){const n=Be(Ne(G,"profiles"),Ue("userId","==",t)),r=await Ke(n);if(!r.empty){const s=Ee(G,"profiles",r.docs[0].id);await Xt(s,{...e,updatedAt:Oe()})}}},vo={async create(t){return(await Js(Ne(G,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Oe(),updatedAt:Oe()})).id},async getByMerchantId(t){const e=Be(Ne(G,"merchantWallets"),Ue("merchantUserId","==",t)),r=(await Ke(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Xe(l.createdAt),updatedAt:Xe(l.updatedAt)}});if(r.length>0)return r.sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0});const s=Be(Ne(G,"wallets"),Ue("userId","==",t));return(await Ke(s)).docs.map(a=>{const l=a.data();return{id:a.id,merchantUserId:l.userId||t,provider:l.provider||"instapay",msisdn:l.msisdn||"",label:l.name||l.label||"",isActive:l.isActive!==!1,dailyLimit:l.dailyLimit||2e5,monthlyLimit:l.monthlyLimit||2e5,transferLimit:l.transferLimit||l.monthlyTransferLimit||2e5,withdrawLimit:l.withdrawLimit||l.monthlyWithdrawLimit||2e5,transferUsage:l.transferUsage||l.monthlyTransferUsage||0,withdrawUsage:l.withdrawUsage||l.monthlyWithdrawUsage||0,dailyTransferLimit:l.dailyTransferLimit,dailyWithdrawLimit:l.dailyWithdrawLimit,createdAt:Xe(l.createdAt),updatedAt:Xe(l.updatedAt)}}).sort((a,l)=>{const c=a.createdAt,d=l.createdAt;return c&&d?d.getTime()-c.getTime():c&&!d?-1:!c&&d?1:0})},async getById(t){const e=Ee(G,"merchantWallets",t),n=await gt(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Xe(r.createdAt),updatedAt:Xe(r.updatedAt)}}return null},async getByIccid(t){try{if(!t)return null;const e=Be(Ne(G,"merchantWallets"),Ue("iccid","==",t)),n=await Ke(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:Xe(s.createdAt),updatedAt:Xe(s.updatedAt)}}return null}catch(e){return console.warn("getByIccid failed:",e),null}},async getByMsisdn(t){try{const e=String(t||"").replace(/\D/g,"");if(!e)return null;let n=Be(Ne(G,"merchantWallets"),Ue("msisdn","==",t)),r=await Ke(n);if(!r.empty){const a=r.docs[0],l=a.data();return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Xe(l.createdAt),updatedAt:Xe(l.updatedAt)}}const s=Be(Ne(G,"merchantWallets")),i=await Ke(s),o=e.slice(-7);for(const a of i.docs){const l=a.data();if(String(l.msisdn||"").replace(/\D/g,"").slice(-7)===o)return{id:a.id,...l,transferLimit:l.transferLimit||2e5,withdrawLimit:l.withdrawLimit||2e5,transferUsage:l.transferUsage||0,withdrawUsage:l.withdrawUsage||0,createdAt:Xe(l.createdAt),updatedAt:Xe(l.updatedAt)}}return null}catch(e){return console.warn("getByMsisdn failed:",e),null}},async update(t,e){const n=Ee(G,"merchantWallets",t);await Xt(n,{...e,updatedAt:Oe()})},async updateUsage(t,e,n){const r=Ee(G,"merchantWallets",t),s={updatedAt:Oe()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await Xt(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async reassignByMsisdns(t,e){try{if(!e)throw new Error("merchantUserId   ");if(!Array.isArray(t)||t.length===0)return{updated:0,failed:0};const r=((o,a)=>o.reduce((l,c,d)=>(d%a===0&&l.push(o.slice(d,d+a)),l),[]))(t.map(o=>o.trim()).filter(Boolean),10);let s=0,i=0;for(const o of r){const a=Be(Ne(G,"merchantWallets"),Ue("msisdn","in",o)),c=(await Ke(a)).docs.map(async d=>{try{const h=d.data();if(h.merchantUserId&&h.merchantUserId!==e)return;await Xt(d.ref,{merchantUserId:e,updatedAt:Oe()}),s+=1}catch(h){console.error("Failed to reassign wallet",d.id,h),i+=1}});await Promise.allSettled(c)}return{updated:s,failed:i}}catch(n){return console.error("Error reassigning wallets by msisdns:",n),{updated:0,failed:t.length}}},async delete(t){const e=Ee(G,"merchantWallets",t);await Vn(e)}},QE={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await ee(async()=>{const{calculateCommission:c,calculateProfit:d}=await Promise.resolve().then(()=>Oa);return{calculateCommission:c,calculateProfit:d}},void 0,import.meta.url),r=t.commission!==void 0?t.commission:e(t.amount,t.txnType),s=n(t.amount,t.txnType),i=t.merchantUserId||t.createdBy;i||console.warn("   merchantUserId  createdBy         .");const o=Object.fromEntries(Object.entries(t).filter(([c,d])=>d!==void 0)),a={...o,merchantUserId:i,commission:r,profit:s,createdAt:o.createdAt?o.createdAt instanceof Date?o.createdAt:new Date(String(o.createdAt)):new Date,uploadedAt:Oe(),confirmedAt:o.confirmedAt?o.confirmedAt instanceof Date?o.confirmedAt:new Date(String(o.confirmedAt)):null},l=await Js(Ne(G,"transactions"),a);if(console.log("Transaction created with ID:",l.id,"Profit:",s),s>0){const{ProfitService:c}=await ee(async()=>{const{ProfitService:d}=await import("./profitService-Cb__Sc3E.js");return{ProfitService:d}},[],import.meta.url);try{c.addProfit(s,i)}catch{c.addProfit(s)}console.log("     :",s,"")}await this.updateLineUsage(t.lineId,t.amount);try{const c=String((t==null?void 0:t.walletId)||"").trim();if(c){const d=await vo.getById(c),h=Number((d==null?void 0:d.transferUsage)||0),f=Number((d==null?void 0:d.withdrawUsage)||0),m=Number(t.amount||0),T=String((t==null?void 0:t.originType)||"").trim()==="withdraw",p=String(t.txnType||"")==="receive";T||p?await vo.updateUsage(c,void 0,f+m):await vo.updateUsage(c,h+m,void 0)}}catch{}try{const c=Number(t.amount||0),d=String((t==null?void 0:t.receiverMsisdn)||"").trim(),h=String((t==null?void 0:t.walletId)||"").trim(),f=String((t==null?void 0:t.originType)||"").trim();let m="";if(h)try{const p=await vo.getById(h);m=String((p==null?void 0:p.msisdn)||(p==null?void 0:p.label)||h).trim()}catch{}let T="";f==="withdraw"?T=m?`   ${c}   ${m}    ${r}`:`   ${c}    ${r}`:f==="transfer"||t.txnType==="send"?T=`   ${c}   ${m||" "}   ${d||""}    ${r}`:T=m?`  ${c}   ${m}`:`  ${c}`}catch{}return l.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Be(Ne(G,"transactions"),Ue("shopId","==",t),No("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Xe(r.data().createdAt),confirmedAt:r.data().confirmedAt?Xe(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Be(Ne(G,"transactions"),Ue("merchantUserId","==",t),No("createdAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Xe(r.data().createdAt),confirmedAt:r.data().confirmedAt?Xe(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Be(Ne(G,"transactions"),Ue("merchantUserId","==",t)),n=Be(Ne(G,"transactions"),Ue("userId","==",t)),[r,s]=await Promise.all([Ke(e),Ke(n)]),i=[...r.docs,...s.docs],o=new Set,a=[];for(const l of i){if(o.has(l.id))continue;o.add(l.id);const c=l.data();a.push({id:l.id,...c,createdAt:Xe(c.createdAt),confirmedAt:c.confirmedAt?Xe(c.confirmedAt):void 0})}return a.sort((l,c)=>{const d=l.createdAt,h=c.createdAt;return d&&h?h.getTime()-d.getTime():d&&!h?-1:!d&&h?1:0})},async updateStatus(t,e,n){const r=Ee(G,"transactions",t);await Xt(r,{status:e,confirmedAt:n?n instanceof Date?n:new Date(String(n)):null})}};async function Zq(t){const e={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.createdBy,walletId:t.walletId,provider:t.provider||"vodafone_cash",txnType:"receive",originType:"withdraw",amount:t.amount,receiverMsisdn:t.lineId,senderMsisdn:t.senderMsisdn,senderName:t.senderName,reference:t.reference,rawText:t.text,note:t.note,createdBy:t.createdBy,createdAt:new Date,confirmedAt:new Date,status:"confirmed"},n=await QE.create(e);try{const{calculateCommission:r}=await ee(async()=>{const{calculateCommission:o}=await Promise.resolve().then(()=>Oa);return{calculateCommission:o}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i={transactionId:n,userId:t.createdBy,transactionType:"withdraw",txnType:"receive",status:"confirmed",amount:Number(t.amount||0),commission:s,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.lineId,fromWallet:t.walletId,note:t.note||"SMS-VF",reference:t.reference,createdAt:new Date,cashierName:" "};await $r.saveUserTransaction(t.createdBy,i)}catch{}return(async()=>{try{const{calculateCommission:r}=await ee(async()=>{const{calculateCommission:h}=await Promise.resolve().then(()=>Oa);return{calculateCommission:h}},void 0,import.meta.url),s=r(Number(t.amount||0),"receive"),i=await $r.getUserData(t.createdBy),o={...(i==null?void 0:i.walletBalances)||{}},a=Math.max(0,Number(o[t.walletId]||0)),l=Math.max(0,Number(t.amount||0));o[t.walletId]=a+l;const d=Number((i==null?void 0:i.cashBalance)||0)-l+Math.max(0,s);await $r.updateUserData(t.createdBy,{walletBalances:o,cashBalance:d,lastUpdated:new Date().toISOString()})}catch{}})(),(async()=>{try{const{walletDailyLimitsService:r}=await ee(async()=>{const{walletDailyLimitsService:i}=await Promise.resolve().then(()=>l_);return{walletDailyLimitsService:i}},void 0,import.meta.url),s=Math.max(0,Number(t.amount||0));await r.updateUsage(String(t.walletId),s,"withdraw")}catch(r){console.warn("      SMS:",r)}})(),n}const eH="https://summer-cake-5149.alkaptin2030.workers.dev",BO={async getTelegramWorkerUrl(){var t;try{const e=Ee(G,"systemSettings","core"),n=await gt(e);return n.exists()&&String(((t=n.data())==null?void 0:t.telegramWorkerUrl)||"").trim()||null}catch{return null}},async setTelegramWorkerUrl(t){const e=Ee(G,"systemSettings","core");await Mt(e,{telegramWorkerUrl:t,updatedAt:Oe()},{merge:!0})}},tH={async send(t,e){try{const n=await $r.getUserData(t),r=String((n==null?void 0:n.telegramChatId)||(n==null?void 0:n.chat_id)||"").trim();if(!r)throw new Error("Telegram Chat ID   ");const i=(await BO.getTelegramWorkerUrl()||eH).replace(/\/$/,""),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||"     ")}}catch{}}},nH={async log(t,e,n,r,s){await Js(Ne(G,"auditLogs"),{actor:s,action:t,entity:e,entityId:n,meta:r,createdAt:Oe()})},async getLogs(t=100){const e=Be(Ne(G,"auditLogs"),No("createdAt","desc"),du(t));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Xe(r.data().createdAt)}))},async getDeletedTransactions(){try{const t=Be(Ne(G,"deletedTransactions"),No("deletedAt","desc"));return(await Ke(t)).docs.map(n=>({id:n.id,...n.data(),deletedAt:Xe(n.data().deletedAt)}))}catch(t){return console.error("Error getting deleted transactions:",t),[]}},async getDeletedTransactionsByUser(t){try{const e=Be(Ne(G,"deletedTransactions"),Ue("userId","==",t),No("deletedAt","desc"));return(await Ke(e)).docs.map(r=>({id:r.id,...r.data(),deletedAt:Xe(r.data().deletedAt)})).filter(r=>(r==null?void 0:r.permanent)!==!0)}catch(e){if(String((e==null?void 0:e.message)||"").includes("requires an index"))try{const r=Be(Ne(G,"deletedTransactions"),Ue("userId","==",t));return(await Ke(r)).docs.map(o=>({id:o.id,...o.data(),deletedAt:Xe(o.data().deletedAt)})).filter(o=>(o==null?void 0:o.permanent)!==!0).sort((o,a)=>{const l=(o.deletedAt instanceof Date?o.deletedAt:new Date(o.deletedAt)).getTime();return(a.deletedAt instanceof Date?a.deletedAt:new Date(a.deletedAt)).getTime()-l})}catch(r){return console.error("Fallback error getting deleted transactions by user:",r),[]}return console.error("Error getting deleted transactions by user:",e),[]}},async saveDeletedTransaction(t){var e;try{if(console.log("      Firebase:",t.id),!t.userId)throw new Error("     ");if(!t.originalTransactionId)throw new Error("   ");const n=t.reference??t.transactionReference??((e=t.receipt)==null?void 0:e.reference),r={...t,deletedAt:Oe(),userId:t.userId,originalTransactionId:t.originalTransactionId,type:t.type||"unknown",amount:t.amount||0,status:t.status||"deleted",...n?{reference:n}:{}};console.log("    :",r);let s=3,i;for(;s>0;)try{const o=await Js(Ne(G,"deletedTransactions"),r);console.log("       :",o.id);return}catch(o){i=o,s--,console.warn(`       : ${s}`,o),s>0&&await new Promise(a=>setTimeout(a,1e3))}throw console.error("        "),i}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async permanentlyDeleteTransaction(t,e){try{const n=Be(Ne(G,"deletedTransactions"),Ue("originalTransactionId","==",t),Ue("userId","==",e)),r=await Ke(n);r.empty?await Js(Ne(G,"deletedTransactions"),{userId:e,originalTransactionId:t,permanent:!0,deletedAt:Oe()}):await Promise.all(r.docs.map(s=>Xt(s.ref,{permanent:!0,deletedAt:Oe()}))),console.log("    :",t);try{const s=Be(Ne(G,"userTransactions"),Ue("userId","==",e)),o=(await Ke(s)).docs.filter(a=>{var c,d;const l=a.data();return a.id===t||l.id===t||l.transactionId===t||l.originalTransactionId===t||((c=l.receipt)==null?void 0:c.id)===t||((d=l.receipt)==null?void 0:d.transactionId)===t});o.length>0&&(console.log(`  ${o.length}   userTransactions`),await Promise.all(o.map(a=>Vn(a.ref))))}catch(s){console.warn("   userTransactions   :",s)}try{const s=Ee(G,"transactions",t);(await gt(s)).exists()&&(console.log("     transactions  "),await Vn(s));const o=Be(Ne(G,"transactions"),Ue("transactionId","==",t)),a=await Ke(o);a.empty||(console.log(`  ${a.size}   transactions  transactionId`),await Promise.all(a.docs.map(d=>Vn(d.ref))));const l=Be(Ne(G,"transactions"),Ue("originalTransactionId","==",t)),c=await Ke(l);c.empty||(console.log(`  ${c.size}   transactions  originalTransactionId`),await Promise.all(c.docs.map(d=>Vn(d.ref))));try{const d=Be(Ne(G,"deletedTransactions"),Ue("userId","==",e),Ue("originalTransactionId","==",t)),h=await Ke(d),f=h.docs.map(T=>{var p;return String(((p=T.data())==null?void 0:p.reference)||"")}).filter(Boolean),m=h.docs.map(T=>{var p;return String(((p=T.data())==null?void 0:p.transactionId)||"")}).filter(Boolean);for(const T of f){const p=Be(Ne(G,"transactions"),Ue("reference","==",T)),v=await Ke(p);v.empty||(console.log(`  ${v.size}   transactions  reference=${T}`),await Promise.all(v.docs.map(w=>Vn(w.ref))))}for(const T of m){try{const w=Ee(G,"transactions",T);(await gt(w)).exists()&&(console.log("     transactions  :",T),await Vn(w))}catch{}const p=Be(Ne(G,"transactions"),Ue("transactionId","==",T)),v=await Ke(p);v.empty||(console.log(`  ${v.size}   transactions  transactionId=${T}`),await Promise.all(v.docs.map(w=>Vn(w.ref))))}}catch{}}catch(s){console.warn("    transactions   :",s)}}catch(n){throw console.error("Error permanently deleting transaction:",n),n}}},zO={async add(t){const e=`${String(t.userId)}_${String(t.reportDate)}`,n=Ee(G,"daily_reports_archive",e);return await Mt(n,{userId:t.userId,reportDate:t.reportDate,totalTransactions:t.totalTransactions,totalAmount:t.totalAmount,totalWithdrawn:t.totalWithdrawn,totalSent:t.totalSent,profit:t.profit??null,walletId:t.walletId??null,updatedAt:Oe()},{merge:!0}),e},async getByUser(t,e=50){var n,r,s,i;try{const o=Be(Ne(G,"daily_reports_archive"),Ue("userId","==",t),du(e)),a=await Ke(o);let l=[];try{l=(await Ke(Be(Ne(G,"deletedDailyArchives"),Ue("userId","==",t)))).docs.map(T=>{var p,v;return{id:T.id,reportDate:String(((p=T.data())==null?void 0:p.reportDate)||""),archiveId:String(((v=T.data())==null?void 0:v.archiveId)||"")}})}catch{}const c=(m,T)=>l.some(p=>p.archiveId&&p.archiveId===m||p.reportDate&&p.reportDate===T),d=a.docs.map(m=>({id:m.id,userId:String(m.data().userId),reportDate:String(m.data().reportDate),totalTransactions:Number(m.data().totalTransactions||0),totalAmount:Number(m.data().totalAmount||0),totalWithdrawn:Number(m.data().totalWithdrawn||0),totalSent:Number(m.data().totalSent||0),profit:m.data().profit!==void 0?Number(m.data().profit):void 0,walletId:m.data().walletId??null,createdAt:Xe(m.data().createdAt||m.data().updatedAt)})).filter(m=>!c(m.id,m.reportDate)),h=new Map;for(const m of d){const T=h.get(m.reportDate);(!T||(((r=(n=m.createdAt)==null?void 0:n.getTime)==null?void 0:r.call(n))||0)>(((i=(s=T.createdAt)==null?void 0:s.getTime)==null?void 0:i.call(s))||0))&&h.set(m.reportDate,m)}const f=Array.from(h.values());return f.sort((m,T)=>m.reportDate<T.reportDate?1:-1),f}catch(o){throw console.error("Error loading daily reports archive:",o),o}},async deleteOlderThan(t,e=10){try{const n=new Date;n.setDate(n.getDate()-e);const r=Be(Ne(G,"daily_reports_archive"),Ue("userId","==",t)),s=await Ke(r);let i=0;for(const o of s.docs){const a=Xe(o.data().createdAt);a&&a.getTime()<n.getTime()&&(await Vn(o.ref),i++)}return i>0&&console.log(`   ${i}      ${e}   ${t}`),i}catch(n){throw console.error("Error deleting old daily reports archive:",n),n}},async trimToMaxCount(t,e=10){try{const n=Be(Ne(G,"daily_reports_archive"),Ue("userId","==",t)),s=(await Ke(n)).docs.map(o=>({ref:o.ref,reportDate:String(o.data().reportDate||""),createdAt:Xe(o.data().createdAt)}));if(s.sort((o,a)=>{var d,h;if(o.reportDate&&a.reportDate)return o.reportDate<a.reportDate?1:-1;const l=((d=o.createdAt)==null?void 0:d.getTime())??0;return(((h=a.createdAt)==null?void 0:h.getTime())??0)-l}),s.length<=e)return 0;const i=s.slice(e);for(const o of i)await Vn(o.ref);return console.log(`     ${t}  ${e}   ${i.length}`),i.length}catch(n){throw console.error("Error trimming daily reports archive to max count:",n),n}},async deleteAllByUser(t){try{const e=Be(Ne(G,"daily_reports_archive"),Ue("userId","==",t)),n=await Ke(e);let r=0;for(const s of n.docs)try{await Vn(s.ref),r++}catch{const o=s.data();try{await Js(Ne(G,"deletedDailyArchives"),{userId:t,archiveId:s.id,reportDate:String((o==null?void 0:o.reportDate)||""),createdAt:Oe()})}catch{}}return r}catch(e){throw console.error("Error deleting all daily reports archive for user:",e),e}}},$r={async getUserData(t){try{console.log("     :",{userId:t});const e=Ee(G,"users",t),n=await gt(e);if(n.exists()){const r=n.data();return console.log("     :",r),{...r,createdAt:Xe(r.createdAt),updatedAt:Xe(r.updatedAt)}}else{console.log("       ");const r={walletBalances:{},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("     "),r}}catch(e){return console.error("      :",e),{walletBalances:{},createdAt:new Date,updatedAt:new Date}}},getLocalReceipts(t){try{const e=localStorage.getItem(`localReceipts_${t}`);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}},saveLocalReceipt(t,e){try{const n=this.getLocalReceipts(t),r=200,s=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||Date.now()).getTime()}`)},i=s(e),o=n.filter(l=>s(l)!==i),a=[e,...o].slice(0,r);localStorage.setItem(`localReceipts_${t}`,JSON.stringify(a))}catch{}},removeLocalReceiptById(t,e){try{const r=this.getLocalReceipts(t).filter(s=>{var o,a;return![s==null?void 0:s.id,s==null?void 0:s.transactionId,s==null?void 0:s.originalTransactionId,(o=s==null?void 0:s.receipt)==null?void 0:o.transactionId,(a=s==null?void 0:s.receipt)==null?void 0:a.id].map(l=>String(l||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},removeLocalReceiptByRef(t,e){try{if(!e)return;const r=this.getLocalReceipts(t).filter(s=>{var o;return![s==null?void 0:s.reference,s==null?void 0:s.transactionReference,(o=s==null?void 0:s.receipt)==null?void 0:o.reference].map(a=>String(a||"")).includes(String(e))});localStorage.setItem(`localReceipts_${t}`,JSON.stringify(r))}catch{}},subscribeDeletedTransactionsLocalSync(t){try{const e=Be(Ne(G,"deletedTransactions"),Ue("userId","==",t));return Oi(e,r=>{try{r.docChanges().forEach(s=>{const i=s.doc.data();if(!((i==null?void 0:i.permanent)===!0))return;const a=String((i==null?void 0:i.originalTransactionId)||""),l=String((i==null?void 0:i.transactionId)||""),c=String((i==null?void 0:i.reference)||"");a&&this.removeLocalReceiptById(t,a),l&&this.removeLocalReceiptById(t,l),c&&this.removeLocalReceiptByRef(t,c)})}catch{}},r=>{console.warn("deletedTransactions local sync error:",r)})}catch(e){return console.warn("subscribeDeletedTransactionsLocalSync failed:",e),()=>{}}},async saveUserData(t,e){try{const n=Ee(G,"users",t),r=al(e);await Mt(n,{...r||{},updatedAt:Oe()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("      Firebase:",{userId:t,data:e});const n=Ee(G,"users",t),r=Object.fromEntries(Object.entries(e).filter(([l,c])=>c!==void 0)),s=al(r);let i={};try{const l=await gt(n);i=l.exists()?l.data():{},console.log("  :",i)}catch(l){console.warn("         :",l)}const o={...i,...s,updatedAt:Oe()};console.log("   :",o);let a=3;for(;a>0;)try{await Mt(n,o,{merge:!0}),console.log("     ");return}catch(l){if(a--,console.warn(`     : ${a}`,l),a===0)throw l;await new Promise(c=>setTimeout(c,1e3))}}catch(n){throw console.error("     :",n),n instanceof Error&&(n.message.includes("network")?console.error("    -    "):n.message.includes("permission")?console.error("    -    Firestore"):n.message.includes("quota")&&console.error("     -    Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{let e;try{const l=Be(Ne(G,"userTransactions"),Ue("userId","==",t),No("createdAt","desc"),du(200));e=await Ke(l)}catch(l){const c=String((l==null?void 0:l.message)||""),d=Be(Ne(G,"userTransactions"),Ue("userId","==",t));e=await Ke(d)}const n=e.docs.map(l=>({id:l.id,...l.data(),createdAt:Xe(l.data().createdAt)})),r=this.getLocalReceipts(t),s=[...n,...r],i=l=>{var c;return String((l==null?void 0:l.id)||(l==null?void 0:l.transactionId)||(l==null?void 0:l.originalTransactionId)||(l==null?void 0:l.reference)||(l==null?void 0:l.transactionReference)||((c=l==null?void 0:l.receipt)==null?void 0:c.reference)||`${(l==null?void 0:l.type)||"tx"}-${new Date((l==null?void 0:l.createdAt)||0).getTime()}`)},o=new Set;return s.filter(l=>{const c=i(l);return o.has(c)?!1:(o.add(c),!0)}).filter(l=>(l==null?void 0:l.status)!=="cancelled"&&!(l!=null&&l.isDeleted)).sort((l,c)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0;return(c.createdAt?new Date(c.createdAt).getTime():0)-d})}catch(e){console.error("Error getting user transactions:",e);const n=(e==null?void 0:e.code)||"";if(n==="permission-denied"||n==="unauthenticated")throw e;return[]}},async saveUserTransaction(t,e){var n,r;try{const s=Object.fromEntries(Object.entries(e??{}).filter(([o,a])=>a!==void 0));try{const o=s.reference;if(o){const a=Be(Ne(G,"deletedTransactions"),Ue("userId","==",t),Ue("reference","==",o));if(!(await Ke(a)).empty)return console.log("          ."),"skip-deleted"}{const a=Be(Ne(G,"deletedTransactions"),Ue("userId","==",t),Ue("permanent","==",!0)),l=await Ke(a);if(!l.empty){const c=[s.id,s.transactionId,s.originalTransactionId,(n=s.receipt)==null?void 0:n.id,(r=s.receipt)==null?void 0:r.transactionId,s.reference,s.transactionReference].filter(h=>!!h).map(h=>String(h));if(l.docs.find(h=>{const f=h.data(),m=String(f.originalTransactionId||f.transactionId||h.id||""),T=String(f.reference||"");return m&&c.includes(m)||T&&c.includes(T)}))return console.log("        /   ."),"skip-deleted"}}}catch(o){console.warn("           :",o)}try{const o=Be(Ne(G,"userTransactions"),Ue("userId","==",t));if(s.transactionId){const a=Be(Ne(G,"userTransactions"),Ue("userId","==",t),Ue("transactionId","==",s.transactionId)),l=await Ke(a);if(!l.empty){const c=l.docs[0];return await Xt(Ee(G,"userTransactions",c.id),{...s,uploadedAt:Oe()}),c.id}}if(s.reference){const a=Be(Ne(G,"userTransactions"),Ue("userId","==",t),Ue("reference","==",s.reference)),l=await Ke(a);if(!l.empty){const c=l.docs[0];return await Xt(Ee(G,"userTransactions",c.id),{...s,uploadedAt:Oe()}),c.id}}}catch(o){console.warn("      saveUserTransaction  :",o)}return(await Js(Ne(G,"userTransactions"),{...s,userId:t,createdAt:s.createdAt?s.createdAt instanceof Date?s.createdAt:new Date(String(s.createdAt)):Oe(),uploadedAt:Oe()})).id}catch(s){throw console.error("Error saving user transaction:",s),s}},async removeUserTransaction(t,e){try{console.log("     userTransactions:",{userId:t,transactionId:e});try{const o=Ee(G,"userTransactions",e),a=await gt(o);if(a.exists()){const l=a.data();if([l==null?void 0:l.userId,l==null?void 0:l.merchantUserId,l==null?void 0:l.createdBy].map(d=>String(d||"")).includes(String(t))){console.log("    userTransactions  ( ):",e),await Vn(o),console.log("     userTransactions");try{this.removeLocalReceiptById(t,e)}catch{}return}else console.log("           ")}}catch(o){console.warn("     userTransactions   :",o)}const n=Be(Ne(G,"userTransactions"),Ue("userId","==",t)),r=await Ke(n);console.log(`    ${r.docs.length}  `);const s=r.docs.filter(o=>{var h,f;const a=o.data(),l=o.id,d=[a.id===e,a.transactionId===e,l===e,a.originalTransactionId===e,((h=a.receipt)==null?void 0:h.transactionId)===e,((f=a.receipt)==null?void 0:f.id)===e].some(m=>m===!0);return d&&console.log("     :",{docId:l,dataId:a.id,transactionId:a.transactionId,originalTransactionId:a.originalTransactionId,searchingFor:e}),d}),i=[Be(Ne(G,"userTransactions"),Ue("merchantUserId","==",t)),Be(Ne(G,"userTransactions"),Ue("createdBy","==",t))];for(const o of i)try{const l=(await Ke(o)).docs.filter(c=>{var f,m;const d=c.data(),h=c.id;return d.id===e||d.transactionId===e||h===e||d.originalTransactionId===e||((f=d.receipt)==null?void 0:f.transactionId)===e||((m=d.receipt)==null?void 0:m.id)===e});l.length&&(console.log(`   ${l.length}       `),s.push(...l))}catch{}if(s.length>0){console.log(`   ${s.length}    `);const o=s.map(async a=>{try{console.log("   :",a.id),await Vn(a.ref)}catch(l){console.warn("     userTransactions ():",{id:a.id,error:l})}});await Promise.allSettled(o);try{this.removeLocalReceiptById(t,e)}catch{}console.log("        userTransactions:",e);try{const a=Ee(G,"transactions",e);if((await gt(a)).exists())console.log("     transactions   "),await Vn(a);else{const c=Be(Ne(G,"transactions"),Ue("transactionId","==",e)),d=await Ke(c);d.empty||(console.log(`   ${d.size}   transactions  transactionId `),await Promise.all(d.docs.map(m=>Vn(m.ref))));const h=Be(Ne(G,"transactions"),Ue("originalTransactionId","==",e)),f=await Ke(h);f.empty||(console.log(`   ${f.size}   transactions  originalTransactionId `),await Promise.all(f.docs.map(m=>Vn(m.ref))))}}catch(a){console.warn("      transactions   :",a)}return}console.log("       userTransactions (   ):",e)}catch(n){console.error("      userTransactions ():",n);return}}},i_={async getToday(t){const e=Ee(G,"dailyStats",t,"today","data"),n=await gt(e);return n.exists()?n.data():{}},async setToday(t,e){const n=Ee(G,"dailyStats",t,"today","data");await Mt(n,{...al(e),updatedAt:new Date},{merge:!0})},async saveToHistory(t,e,n){const r=Ee(G,"dailyStats",t,"history",e);await Mt(r,al(n),{merge:!0})},async archiveTodayToHistory(t,e){const n=await this.getToday(t);await this.saveToHistory(t,e,n||{})}},rH={async create(t,e){const n={...e,userId:t,status:"active",createdAt:Oe()};return(await Js(Ne(G,"installments"),n)).id},listenByUser(t,e){const n=Be(Ne(G,"installments"),Ue("userId","==",t));return Oi(n,r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)},r=>{console.error("installments listen error",r),e([])})},async markMonthPaid(t,e){const n=e.every(r=>r.paid);return await Xt(Ee(G,"installments",t),{paidMonths:e,status:n?"completed":"active"}),!0},async remove(t){return await Vn(Ee(G,"installments",t)),!0}},Mu=Object.freeze(Object.defineProperty({__proto__:null,InstallmentsService:rH,auditLogService:nH,dailyReportsArchiveService:zO,dailyStatsService:i_,merchantWalletService:vo,profileService:im,profileServiceExtra:$O,recordAutoTransaction:Zq,referralService:s_,sanitizeFirestoreData:al,systemSettingsService:BO,telegramNotifier:tH,transactionService:QE,userDataService:$r},Symbol.toStringTag,{value:"Module"}));var wa=(t=>(t.MONTHLY="monthly",t.QUARTERLY="quarterly",t.YEARLY="yearly",t.LIFETIME="lifetime",t.ZERO="zero",t.TAHWEELA="tahweela",t.FIVE_MINUTES="five_minutes",t))(wa||{});const _d=t=>{if(!t)return null;if(t instanceof Date)return isNaN(t.getTime())?null:t;if(t.toDate&&typeof t.toDate=="function")return t.toDate();if(t.seconds!==void 0&&typeof t.seconds=="number")return new Date(t.seconds*1e3);const e=new Date(t);return isNaN(e.getTime())?null:e},sH=(t,e=new Date)=>{const n=_d(e)||new Date;switch(t){case"monthly":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"five_minutes":{const r=new Date(n);return r.setMinutes(r.getMinutes()+5),r}case"tahweela":{const r=new Date(n);return r.setDate(r.getDate()+30),r}case"quarterly":{const r=new Date(n);return r.setDate(r.getDate()+90),r}case"yearly":{const r=new Date(n);return r.setDate(r.getDate()+365),r}case"lifetime":return null;case"zero":return null;default:return null}},Yu=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate){const r=new Date,s=_d(t.activatedAt);return s&&r.getTime()-s.getTime()<4*60*60*1e3,!0}const e=new Date,n=_d(t.endDate);if(!n){const r=_d(t.activatedAt);return r&&e.getTime()-r.getTime()<4*60*60*1e3,!0}return e<=n},iH=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,n=_d(t.endDate);if(!n)return null;const r=n.getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},WG=async(t,e,n,r)=>{try{const s=new Date,i=sH(e,s),o={planType:e,startDate:s,endDate:i,isActive:!0,activatedBy:n,activatedAt:s};console.log(" Activating subscription for user:",{userId:t,planType:e,adminId:n,subscriptionData:o});const a=Ee(G,"users",t);if(await Xt(a,{subscription:o,isActive:!0,approved:!0,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(" Subscription data updated in Firestore"),typeof window<"u"){const l=new CustomEvent("subscriptionActivated",{detail:{userId:t,planType:e,timestamp:new Date().toISOString()}});window.dispatchEvent(l),console.log(" Subscription activation event dispatched:",{userId:t,planType:e});const c=new CustomEvent("userSubscriptionUpdated",{detail:{userId:t,planType:e,isActive:!0,timestamp:new Date().toISOString()}});window.dispatchEvent(c),console.log(" Global subscription update event dispatched")}console.log(`    ${e}  ${t}`)}catch(s){throw console.error("    :",s),new Error("   ")}},UA=async t=>{try{const e=Ee(G,"users",t);await Xt(e,{"subscription.isActive":!1,isActive:!1,isOnFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,updatedAt:new Date}),console.log(`      ${t}`)}catch(e){throw console.error("     :",e),new Error("    ")}},oH=async t=>{try{const e=Ee(G,"users",t),n=await gt(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("      :",e),null}},qG=t=>{switch(t){case"monthly":return"";case"quarterly":return" ";case"yearly":return"";case"lifetime":return" ";case"zero":return"";case"tahweela":return"";case"five_minutes":return"5 ";default:return" "}},HG=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=iH(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},KG=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):" ";class YE{static async startFreeTrialFromAdmin(e){var n,r,s,i;try{const o=Ee(G,"users",e),a=await gt(o);if(!a.exists())return{success:!1,message:"  "};const l=a.data(),c=!!l.hasUsedFreeTrial,d=(r=(n=l.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null,h=(i=(s=l.freeTrialEndDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;if(c&&!(c&&!d&&!h))return{success:!1,message:"       "};const m=new Date,T=await this.getTrialDurationHours(),p=new Date(m.getTime()+T*60*60*1e3);return await Mt(o,{hasUsedFreeTrial:!0,freeTrialStartDate:m,freeTrialEndDate:p,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Oe()},{merge:!0}),{success:!0,message:`     ${T} ${T>=3&&T<=10?"":T===2?"":""}`}}catch(o){return console.error("Error starting admin free trial:",o),{success:!1,message:"     "}}}static async startFreeTrial(e){var n,r,s,i;try{const o=Ee(G,"users",e),a=await gt(o);if(!a.exists())return{success:!1,message:"  "};const l=a.data(),c=!!l.hasUsedFreeTrial,d=(r=(n=l.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null,h=(i=(s=l.freeTrialEndDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;if(c&&!(c&&!d&&!h))return{success:!1,message:"     "};const m=new Date,T=await this.getTrialDurationHours(),p=new Date(m.getTime()+T*60*60*1e3);return await Mt(o,{hasUsedFreeTrial:!0,freeTrialStartDate:m,freeTrialEndDate:p,isOnFreeTrial:!0,isActive:!0,approved:!0,updatedAt:Oe()},{merge:!0}),{success:!0,message:`     ${T} ${T>=3&&T<=10?"":T===2?"":""}`}}catch(o){return console.error("    :",o),{success:!1,message:"     "}}}static async checkTrialValidity(e){var n,r,s,i;try{const o=Ee(G,"users",e),a=await gt(o);if(!a.exists())return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1};const l=a.data(),c=l.hasUsedFreeTrial||!1,d=l.isOnFreeTrial||!1;let h=(r=(n=l.freeTrialEndDate)==null?void 0:n.toDate)!=null&&r.call(n)?l.freeTrialEndDate.toDate():l.freeTrialEndDate?new Date(l.freeTrialEndDate):null;const f=(i=(s=l.freeTrialStartDate)==null?void 0:s.toDate)!=null&&i.call(s)?l.freeTrialStartDate.toDate():l.freeTrialStartDate?new Date(l.freeTrialStartDate):null;if(!c||!d||!h)return{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:c};const m=new Date;if(m>h){const w=Yu(l.subscription);return await Xt(o,{isOnFreeTrial:!1,isActive:w,approved:w,updatedAt:Oe()}),{isValid:!1,isExpired:!0,hoursRemaining:0,hasUsedTrial:c}}const p=h.getTime()-m.getTime();return{isValid:!0,isExpired:!1,hoursRemaining:Math.ceil(p/(1e3*3600)),hasUsedTrial:c}}catch(o){return console.error("      :",o),{isValid:!1,isExpired:!1,hoursRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=Ee(G,"users",e),i=await gt(s);if(!i.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=i.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("      :",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}static async getTrialDurationHours(){try{const e=Ee(G,"config","freeTrial"),n=await gt(e);if(n.exists()){const r=n.data(),s=typeof(r==null?void 0:r.durationHours)=="number"?r.durationHours:this.TRIAL_DURATION_HOURS;return!Number.isFinite(s)||s<1?this.TRIAL_DURATION_HOURS:s}return this.TRIAL_DURATION_HOURS}catch(e){return console.warn("getTrialDurationHours: fallback to default due to error",e),this.TRIAL_DURATION_HOURS}}static async updateTrialDurationHours(e){try{if(!Number.isFinite(e)||e<1)return{success:!1,message:"       "};const n=Ee(G,"config","freeTrial");return await Mt(n,{durationHours:e,updatedAt:Oe()},{merge:!0}),{success:!0,message:"     "}}catch(n){return console.error("Error updating trial duration hours:",n),{success:!1,message:"    "}}}static async resetActiveTrialToCurrentDuration(e){var n,r;try{const s=Ee(G,"users",e),i=await gt(s);if(!i.exists())return{success:!1,message:"  "};const o=i.data(),a=!!o.isOnFreeTrial,l=(r=(n=o.freeTrialStartDate)==null?void 0:n.toDate)!=null&&r.call(n)?o.freeTrialStartDate.toDate():o.freeTrialStartDate?new Date(o.freeTrialStartDate):null;if(!a||!l)return{success:!1,message:"     "};const c=await this.getTrialDurationHours(),d=new Date(l.getTime()+c*60*60*1e3);return await Xt(s,{freeTrialEndDate:d,updatedAt:Oe()}),{success:!0,message:`     ${c} ${c>=3&&c<=10?"":c===2?"":""}`}}catch(s){return console.error("Error resetting active trial duration:",s),{success:!1,message:"    "}}}static async cancelActiveFreeTrial(e){try{const n=Ee(G,"users",e),r=await gt(n);return r.exists()?!r.data().isOnFreeTrial?{success:!1,message:"      "}:(await Xt(n,{isOnFreeTrial:!1,isActive:!1,approved:!1,freeTrialEndDate:new Date,updatedAt:Oe()}),{success:!0,message:"        "}):{success:!1,message:"  "}}catch(n){return console.error("Error cancelling active free trial:",n),{success:!1,message:"    "}}}}vl(YE,"TRIAL_DURATION_HOURS",4);const GG=Object.freeze(Object.defineProperty({__proto__:null,FreeTrialService:YE},Symbol.toStringTag,{value:"Module"}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var Bc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Bc||(Bc={}));class Yy extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const aH=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},lH=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:aH(t),i=()=>s()!=="web",o=h=>{const f=c.get(h);return!!(f!=null&&f.platforms.has(s())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(m=>m.name===h)},l=h=>t.console.error(h),c=new Map,d=(h,f={})=>{const m=c.get(h);if(m)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),m.proxy;const T=s(),p=a(h);let v;const w=async()=>(!v&&T in f?v=typeof f[T]=="function"?v=await f[T]():v=f[T]:e!==null&&!v&&"web"in f&&(v=typeof f.web=="function"?v=await f.web():v=f.web),v),y=(b,R)=>{var k,P;if(p){const O=p==null?void 0:p.methods.find(D=>R===D.name);if(O)return O.rtype==="promise"?D=>n.nativePromise(h,R.toString(),D):(D,j)=>n.nativeCallback(h,R.toString(),D,j);if(b)return(k=b[R])===null||k===void 0?void 0:k.bind(b)}else{if(b)return(P=b[R])===null||P===void 0?void 0:P.bind(b);throw new Yy(`"${h}" plugin is not implemented on ${T}`,Bc.Unimplemented)}},E=b=>{let R;const k=(...P)=>{const O=w().then(D=>{const j=y(D,b);if(j){const oe=j(...P);return R=oe==null?void 0:oe.remove,oe}else throw new Yy(`"${h}.${b}()" is not implemented on ${T}`,Bc.Unimplemented)});return b==="addListener"&&(O.remove=async()=>R()),O};return k.toString=()=>`${b.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:b,writable:!1,configurable:!1}),k},x=E("addListener"),C=E("removeListener"),L=(b,R)=>{const k=x({eventName:b},R),P=async()=>{const D=await k;C({eventName:b,callbackId:D},R)},O=new Promise(D=>k.then(()=>D({remove:P})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},O},S=new Proxy({},{get(b,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?L:x;case"removeListener":return C;default:return E(R)}}});return r[h]=S,c.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(f),...p?[T]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=l,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=Yy,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},cH=t=>t.Capacitor=lH(t),ve=cH(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Og=ve.registerPlugin;class WO{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new ve.Exception(e,Bc.Unimplemented)}unavailable(e="not available"){return new ve.Exception(e,Bc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const jA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),$A=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class uH extends WO{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=$A(s).trim(),i=$A(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=jA(e.key),r=jA(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Og("CapacitorCookies",{web:()=>new uH});const dH=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),hH=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},fH=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,mH=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=hH(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class pH extends WO{async request(e){const n=mH(e,e.webFetchExtra),r=fH(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await dH(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Og("CapacitorHttp",{web:()=>new pH});const _a=Og("Preferences",{web:()=>ee(()=>import("./web-CsADi3Cf.js"),[],import.meta.url).then(t=>new t.PreferencesWeb)}),Jy=Object.freeze(Object.defineProperty({__proto__:null,Preferences:_a},Symbol.toStringTag,{value:"Module"})),gH={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"0.0.0",VITE_DEV_MODE:"true",VITE_ENABLE_OFFLINE_PERSISTENCE:"false",VITE_FIREBASE_API_KEY:["AI","za","SyA33RTf43u2QE2OsK1RepQHSKrSet9ZI0s"].join(""),VITE_FIREBASE_APP_ID:"1:483702062341:web:b1ff06ad175cb7ae428b6c",VITE_FIREBASE_AUTH_DOMAIN:"voda-c6abd.firebaseapp.com",VITE_FIREBASE_AUTH_EMULATOR_URL:"http://localhost:9099",VITE_FIREBASE_FIRESTORE_EMULATOR_HOST:"localhost:8080",VITE_FIREBASE_FUNCTIONS_EMULATOR_HOST:"localhost:5001",VITE_FIREBASE_MEASUREMENT_ID:"G-CV6QGH7G7P",VITE_FIREBASE_MESSAGING_SENDER_ID:"483702062341",VITE_FIREBASE_PROJECT_ID:"voda-c6abd",VITE_FIREBASE_STORAGE_BUCKET:"voda-c6abd.appspot.com",VITE_FORCE_HASH_ROUTER:"true",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"   ",VITE_SHOW_ENV_BANNER:"true",VITE_USE_EMULATORS:"false",VITE_USE_FIREBASE_EMULATOR:"false"},qO=A.createContext(void 0);function ml(){const t=A.useContext(qO);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const yH=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(null),[i,o]=A.useState(null),[a,l]=A.useState(!1),[c,d]=A.useState(!0),h=async S=>{var b,R,k,P,O,D,j,oe,ye,_e,W,z,K,Ae,pe,V;try{const we=Ee(G,"profiles",S);let Le=!1;try{const be=await fO(we);if(be.exists()){const Fe=be.data(),je={userId:be.id,shopId:Fe.shopId,role:Fe.role,fullName:Fe.fullName,phone:Fe.phone,shopName:Fe.shopName||null,approved:Fe.approved,avatarId:Fe.avatarId,bridgeLink:Fe.bridgeLink||null,bridgeDeviceId:Fe.bridgeDeviceId||null,showWithdrawNote:Fe.showWithdrawNote!==void 0?!!Fe.showWithdrawNote:!0,isReceiptNoteEnabled:Fe.isReceiptNoteEnabled!==void 0?!!Fe.isReceiptNoteEnabled:!0,smsReadingEnabled:Fe.smsReadingEnabled!==void 0?!!Fe.smsReadingEnabled:!1,smsAutoRegisterEnabled:Fe.smsAutoRegisterEnabled!==void 0?!!Fe.smsAutoRegisterEnabled:!1,createdAt:((R=(b=Fe.createdAt)==null?void 0:b.toDate)==null?void 0:R.call(b))||new Date,updatedAt:((P=(k=Fe.updatedAt)==null?void 0:k.toDate)==null?void 0:P.call(k))||new Date,trialStarted:Fe.trialStarted||!1,trialStartDate:(D=(O=Fe.trialStartDate)==null?void 0:O.toDate)==null?void 0:D.call(O),trialEndDate:(oe=(j=Fe.trialEndDate)==null?void 0:j.toDate)==null?void 0:oe.call(j),trialExpired:Fe.trialExpired||!1};s(je),Le=!0,d(!1)}}catch(be){console.log("Cache profile not available:",(be==null?void 0:be.code)||be)}try{if(!Le){const be=localStorage.getItem(`profile_cache_${S}`);if(be){const Fe=JSON.parse(be);s(Fe),Le=!0,d(!1)}}}catch{}if(!Le)for(let be=0;be<3;be++)try{const Fe=await gt(we);if(Fe.exists()){const je=Fe.data(),qt={userId:Fe.id,shopId:je.shopId,role:je.role,fullName:je.fullName,phone:je.phone,sim1Number:je.sim1Number||null,sim2Number:je.sim2Number||null,shopName:je.shopName||null,approved:je.approved,avatarId:je.avatarId,bridgeLink:je.bridgeLink||null,bridgeDeviceId:je.bridgeDeviceId||null,showWithdrawNote:je.showWithdrawNote!==void 0?!!je.showWithdrawNote:!0,isReceiptNoteEnabled:je.isReceiptNoteEnabled!==void 0?!!je.isReceiptNoteEnabled:!0,smsReadingEnabled:je.smsReadingEnabled!==void 0?!!je.smsReadingEnabled:!1,smsAutoRegisterEnabled:je.smsAutoRegisterEnabled!==void 0?!!je.smsAutoRegisterEnabled:!1,createdAt:((_e=(ye=je.createdAt)==null?void 0:ye.toDate)==null?void 0:_e.call(ye))||new Date,updatedAt:((z=(W=je.updatedAt)==null?void 0:W.toDate)==null?void 0:z.call(W))||new Date,trialStarted:je.trialStarted||!1,trialStartDate:(Ae=(K=je.trialStartDate)==null?void 0:K.toDate)==null?void 0:Ae.call(K),trialEndDate:(V=(pe=je.trialEndDate)==null?void 0:pe.toDate)==null?void 0:V.call(pe),trialExpired:je.trialExpired||!1};s(qt);try{localStorage.setItem(`profile_cache_${Fe.id}`,JSON.stringify(qt))}catch{}Le=!0,d(!1);break}}catch{}return Oi(we,async be=>{var Fe,je,qt,nn,En,gn,Kn,Dr;if(be.exists()){const Ve=be.data(),Pn={userId:be.id,shopId:Ve.shopId,role:Ve.role,fullName:Ve.fullName,phone:Ve.phone,sim1Number:Ve.sim1Number||null,sim2Number:Ve.sim2Number||null,shopName:Ve.shopName||null,approved:Ve.approved,avatarId:Ve.avatarId,bridgeLink:Ve.bridgeLink||null,bridgeDeviceId:Ve.bridgeDeviceId||null,showWithdrawNote:Ve.showWithdrawNote!==void 0?!!Ve.showWithdrawNote:!0,isReceiptNoteEnabled:Ve.isReceiptNoteEnabled!==void 0?!!Ve.isReceiptNoteEnabled:!0,smsReadingEnabled:Ve.smsReadingEnabled!==void 0?!!Ve.smsReadingEnabled:!1,smsAutoRegisterEnabled:Ve.smsAutoRegisterEnabled!==void 0?!!Ve.smsAutoRegisterEnabled:!1,createdAt:((je=(Fe=Ve.createdAt)==null?void 0:Fe.toDate)==null?void 0:je.call(Fe))||new Date,updatedAt:((nn=(qt=Ve.updatedAt)==null?void 0:qt.toDate)==null?void 0:nn.call(qt))||new Date,trialStarted:Ve.trialStarted||!1,trialStartDate:(gn=(En=Ve.trialStartDate)==null?void 0:En.toDate)==null?void 0:gn.call(En),trialEndDate:(Dr=(Kn=Ve.trialEndDate)==null?void 0:Kn.toDate)==null?void 0:Dr.call(Kn),trialExpired:Ve.trialExpired||!1};s(Pn);try{localStorage.setItem(`profile_cache_${be.id}`,JSON.stringify(Pn)),Pn.shopId&&localStorage.setItem("shopId",Pn.shopId),localStorage.setItem(`smsReadingEnabled_${be.id}`,String(Pn.smsReadingEnabled)),localStorage.setItem(`smsAutoRegisterEnabled_${be.id}`,String(Pn.smsAutoRegisterEnabled))}catch{}Le||(Le=!0,d(!1))}else if(!Le)try{const Ve=await $O.getByUserId(S);if(Ve){const Pn={userId:S,shopId:Ve.shopId,role:Ve.role||"user",fullName:Ve.fullName||null,phone:Ve.phone||null,shopName:Ve.shopName||null,approved:Ve.approved??!1,avatarId:Ve.avatarId||void 0,bridgeLink:Ve.bridgeLink||null,bridgeDeviceId:Ve.bridgeDeviceId||null,createdAt:Oe(),updatedAt:Oe()};await Mt(Ee(G,"profiles",S),Pn,{merge:!0}),s({...Ve,userId:S,createdAt:Ve.createdAt||new Date,updatedAt:Ve.updatedAt||new Date})}else await m(S)}catch(Ve){console.error("Profile migration/create error:",Ve)}finally{Le=!0,d(!1)}},be=>{console.error("Profile listener error:",be);try{d(!1)}catch{}})}catch(we){return console.error("Error setting up profile listener:",we),await m(S),d(!1),()=>{}}},f=async S=>{try{const b=Ee(G,"users",S.uid);(await gt(b)).exists()?(await Xt(b,{lastLogin:Oe(),updatedAt:Oe()}),console.log(" ensureAdminUserDoc: Updated lastLogin for",S.uid)):(await Mt(b,{email:S.email||"",displayName:S.displayName||" ",phone:null,shopName:null,isActive:!1,createdAt:Oe(),updatedAt:Oe(),lastLogin:Oe()},{merge:!0}),console.log(" ensureAdminUserDoc: Created users doc for",S.uid))}catch(b){console.error(" ensureAdminUserDoc error:",b)}},m=async(S,b,R,k,P)=>{var O,D;try{console.log("Creating default profile for user:",S);const j=s_.generateReferralCode(S);let oe=null;const ye={userId:S,shopId:"default-shop",role:"user",fullName:b||" ",phone:R||null,shopName:k||null,approved:!1,referralCode:j,referredBy:P||null,bridgeLink:null,bridgeDeviceId:null,showWithdrawNote:!0,isReceiptNoteEnabled:!0,smsReadingEnabled:!1,smsAutoRegisterEnabled:!1,createdAt:new Date,updatedAt:new Date};s(ye),console.log("Created temporary profile:",ye);try{const{doc:_e,setDoc:W,serverTimestamp:z}=await ee(async()=>{const{doc:V,setDoc:we,serverTimestamp:Le}=await Promise.resolve().then(()=>kn);return{doc:V,setDoc:we,serverTimestamp:Le}},void 0,import.meta.url),{db:K}=await ee(async()=>{const{db:V}=await Promise.resolve().then(()=>Qt);return{db:V}},void 0,import.meta.url),Ae={email:((O=Pt.currentUser)==null?void 0:O.email)||"",displayName:b||" ",phone:R||null,shopName:k||null,isActive:!1,referralCode:j,referredBy:P||null,createdAt:z(),lastLogin:null,updatedAt:z()};if(console.log("Attempting to add user to admin collection with data:",Ae),await W(_e(K,"users",S),Ae,{merge:!0}),console.log(" User successfully added to admin collection:",Ae),P)try{const{query:V,collection:we,where:Le,limit:at,getDocs:be}=await ee(async()=>{const{query:nn,collection:En,where:gn,limit:Kn,getDocs:Dr}=await Promise.resolve().then(()=>kn);return{query:nn,collection:En,where:gn,limit:Kn,getDocs:Dr}},void 0,import.meta.url),{db:Fe}=await ee(async()=>{const{db:nn}=await Promise.resolve().then(()=>Qt);return{db:nn}},void 0,import.meta.url),je=V(we(Fe,"users"),Le("referralCode","==",P),at(1)),qt=await be(je);qt.empty?console.log(" Referral code not found in users collection:",P):(oe=qt.docs[0].id,await s_.create({referrerId:oe,referredUserId:S,referredUserEmail:((D=Pt.currentUser)==null?void 0:D.email)||"",referralCode:P,status:"completed"}),console.log(" Referral record created successfully for referrer:",oe))}catch(V){console.error(" Error creating referral record:",V)}const pe=await gt(_e(K,"users",S));pe.exists()?console.log(" User document verified in Firestore:",pe.data()):console.log(" User document not found after creation")}catch(_e){console.error(" Error adding user to admin collection:",_e)}try{const{addDoc:_e,collection:W,serverTimestamp:z}=await ee(async()=>{const{addDoc:we,collection:Le,serverTimestamp:at}=await Promise.resolve().then(()=>kn);return{addDoc:we,collection:Le,serverTimestamp:at}},void 0,import.meta.url),{db:K}=await ee(async()=>{const{db:we}=await Promise.resolve().then(()=>Qt);return{db:we}},void 0,import.meta.url),pe=(await _e(W(K,"shops"),{name:k||" ",ownerId:S,createdAt:z(),updatedAt:z(),isActive:!0})).id;await im.create({userId:S,shopId:pe,role:"user",fullName:" ",phone:null});try{await im.update(S,{referralCode:j,referredBy:oe||null,showWithdrawNote:!0,isReceiptNoteEnabled:!0})}catch(we){console.warn(" Failed to update profile with referral fields:",we)}const V=await im.getById(S);V&&(s(V),console.log("Updated with Firebase profile:",V))}catch(_e){console.error("Error creating profile:",_e),console.log("Using local profile - Firebase unavailable")}}catch(j){console.error("Error creating default profile:",j)}};A.useEffect(()=>{console.log(" Setting up auth state listener"),d(!0);const S=setTimeout(()=>{console.warn(" Global auth timeout reached, forcing loading to false"),d(!1)},2e4);localStorage.getItem("demoProfile")&&(console.log(" Cleaning up demo profile from localStorage"),localStorage.removeItem("demoProfile"));const b=localStorage.getItem("demoUser"),R=localStorage.getItem("demoProfile");if(b&&R){console.log(" Found demo user in localStorage");try{const P=JSON.parse(b),O=JSON.parse(R);n(P),s(O),clearTimeout(S),d(!1);return}catch(P){console.error("Error parsing demo user data:",P),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const k=r9(Pt,async P=>{if(console.log(" Auth state changed:",{uid:P==null?void 0:P.uid,email:P==null?void 0:P.email,emailVerified:P==null?void 0:P.emailVerified,timestamp:new Date().toISOString()}),n(P),P){console.log(" User authenticated, starting profile hydration for:",P.uid);try{await _a.set({key:"current_user_id",value:P.uid}),console.log(" Synced current_user_id to Native:",P.uid)}catch(O){console.error("Failed to sync user ID to native:",O)}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}h(P.uid),y(),f(P)}else{console.log(" User not authenticated, clearing profile"),s(null),o(null),l(!1),d(!1);try{await _a.remove({key:"current_user_id"}),await _a.remove({key:"selected_wallet_id"})}catch{}}clearTimeout(S)});return()=>{clearTimeout(S),k()}},[]),A.useEffect(()=>{const S=async()=>{try{await E(),await y()}catch{}};try{window.addEventListener("app:softRefresh",S)}catch{}return()=>{try{window.removeEventListener("app:softRefresh",S)}catch{}}},[e==null?void 0:e.uid]),A.useEffect(()=>{if(!(e!=null&&e.uid))return;const S=i==null?void 0:i.subscription,b=S==null?void 0:S.endDate,R=b!=null&&b.toDate?b.toDate():b?new Date(b):null,k=i==null?void 0:i.isOnFreeTrial,P=i==null?void 0:i.freeTrialEndDate,O=P!=null&&P.toDate?P.toDate():P?new Date(P):null;let D=null;const j=async()=>{try{const oe=new Date;S&&S.isActive===!0&&R&&!isNaN(R.getTime())&&oe>R&&(console.log(" Subscription expired locally, deactivating..."),await UA(e.uid),await y()),k&&O&&!isNaN(O.getTime())&&oe>O&&(console.log(" Free Trial expired locally, validating..."),(await YE.checkTrialValidity(e.uid)).isExpired&&(console.log(" Free Trial expired and updated via service"),await y()))}catch(oe){console.error("Error in auto-expiry tick:",oe)}};return j(),D=setInterval(j,6e4),()=>{try{clearInterval(D)}catch{}}},[e==null?void 0:e.uid,i]),A.useEffect(()=>{if(!(e!=null&&e.uid))return;const S=$r.subscribeDeletedTransactionsLocalSync(e.uid);return()=>{try{S==null||S()}catch{}}},[e==null?void 0:e.uid]);const T=async(S,b,R,k,P,O)=>{try{const D=(S||"").trim().toLowerCase(),j=(b||"").trim();console.log(" Attempting to sign up user:",D);const oe=await ZS(Pt,D,j);console.log(" Sign up successful:",oe.user.uid),await m(oe.user.uid,R,k,P,O),await f(oe.user);try{await h(oe.user.uid),await y()}catch{}try{if(!localStorage.getItem("theme")){localStorage.setItem("theme","light");try{document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-theme","light")}catch{}}}catch{}return{error:null}}catch(D){console.error(" Sign up error:",D);let j="    ";return D.code==="auth/email-already-in-use"?j="    ":D.code==="auth/weak-password"?j="   ":D.code==="auth/invalid-email"&&(j="   "),{error:{...D,message:j}}}},p=async(S,b)=>{var P;const R=(S||"").trim().toLowerCase(),k=(b||"").trim();try{const O=z=>z.replace(/[\u200B\u200C\u200D\u200E\u200F\u061C]/g,""),D=z=>z.replace(/[-]/g,K=>String("0123456789"["".indexOf(K)])).replace(/[-]/g,K=>String("0123456789"["".indexOf(K)])),j=z=>z.replace(/[0-9]/g,K=>""[Number(K)]),oe=z=>D(O(z));if(console.log(" Attempting to sign in user:",R),R==="test@example.com"&&k==="123456"){console.log(" Demo user login detected");const z={uid:"demo-user-123",email:"test@example.com",displayName:" ",emailVerified:!0},K={userId:"demo-user-123",shopId:"demo-shop",role:"user",fullName:" ",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date};return localStorage.setItem("demoUser",JSON.stringify(z)),localStorage.setItem("demoProfile",JSON.stringify(K)),n(z),s(K),d(!1),console.log(" Demo user signed in successfully"),{error:null}}let ye;const _e=[oe(k),O(k),j(O(k))];let W=null;for(const z of _e)try{z!==k&&console.log(" Trying password variant"),ye=await XB(Pt,R,z);break}catch(K){if(W=K,(K==null?void 0:K.code)!=="auth/wrong-password"&&(K==null?void 0:K.code)!=="auth/invalid-credential")throw K}if(!ye)throw W||new Error("auth/invalid-credential");console.log(" Sign in successful:",ye.user.uid);try{if((await gt(Ee(G,"deletedUsers",ye.user.uid))).exists())return console.log(" User is deleted, signing out"),await eb(Pt),{error:{code:"auth/user-deleted",message:"      .    ."}}}catch(z){console.error("Error checking deleted users:",z)}await f(ye.user);try{await h(ye.user.uid),await y()}catch{}return{error:null}}catch(O){if(console.error(" Sign in error:",O),R==="test@example.com"&&O.code==="auth/user-not-found"){console.log(" Creating test user...");try{const oe=await ZS(Pt,R,k);return console.log(" Test user created:",oe.user.uid),await m(oe.user.uid," ","01000000000"," "),{error:null}}catch(oe){return console.error(" Error creating test user:",oe),{error:oe}}}let D="    ",j=O==null?void 0:O.code;if(j==="auth/invalid-credential")try{const oe=await e9(Pt,((P=O==null?void 0:O.customData)==null?void 0:P.email)||"");Array.isArray(oe)&&oe.length===0?(j="auth/user-not-found",D="     "):(j="auth/wrong-password",D="   ")}catch{D="      "}else j==="auth/invalid-email"?D="    ":j==="auth/user-not-found"?D="     ":j==="auth/wrong-password"?D="   ":j==="auth/too-many-requests"&&(D="      ");return{error:{...O,code:j,message:D}}}},v=async()=>{try{localStorage.getItem("demoUser")?(console.log(" Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),d(!1)):await eb(Pt);try{await _a.remove({key:"selected_wallet_id"}),await _a.remove({key:"current_user_id"}),console.log(" Cleared selected_wallet_id and current_user_id from Capacitor Preferences")}catch(k){console.error(" Failed to clear Preferences:",k)}const R=(()=>{try{const k=typeof window<"u"?window:null,P=!!(k&&k.electronAPI)||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"),O=typeof window<"u"&&window.location.protocol==="file:",D=typeof window<"u"&&typeof window.location.hash=="string"&&window.location.hash.startsWith("#/");return P||O||D||typeof import.meta<"u"&&gH&&!0}catch{return!1}})()?"#/user/login":"/user/login";try{window.location.replace(R)}catch{window.location.href=R}}catch(S){console.error("Sign out error:",S)}},w=async S=>{try{return await JB(Pt,S),{error:null}}catch(b){console.error("Reset password error:",b);let R="        ";return b.code==="auth/user-not-found"?R="     ":b.code==="auth/invalid-email"&&(R="   "),{error:{...b,message:R}}}},y=async()=>{var S,b;if(!e){console.log("No user found for subscription check"),o(null),l(!1);return}subscriptionUnsubRef.current&&(subscriptionUnsubRef.current(),subscriptionUnsubRef.current=null),console.log("Checking subscription status for user:",e.uid);try{const R=Ee(G,"users",e.uid);try{const P=await gt(R);if(P.exists()){const O=P.data();o(O);const D=((S=O==null?void 0:O.branchPackage)==null?void 0:S.status)==="active";let j=!1;D?j=!0:j=Yu(O.subscription),l(j)}}catch{}const k=Oi(R,async P=>{var O,D,j,oe,ye,_e,W,z;if(P.exists()){const K=P.data();o(K),console.log(" Subscription Data Details (Real-time):",{userId:e.uid,userEmail:e.email,subscription:K.subscription,subscriptionExists:!!K.subscription,planType:(O=K.subscription)==null?void 0:O.planType,isActive:(D=K.subscription)==null?void 0:D.isActive,startDate:(j=K.subscription)==null?void 0:j.startDate,endDate:(oe=K.subscription)==null?void 0:oe.endDate,activatedBy:(ye=K.subscription)==null?void 0:ye.activatedBy,activatedAt:(_e=K.subscription)==null?void 0:_e.activatedAt,isOnFreeTrial:K.isOnFreeTrial,freeTrialEndDate:K.freeTrialEndDate,branchPackageStatus:(W=K==null?void 0:K.branchPackage)==null?void 0:W.status});const Ae=((z=K==null?void 0:K.branchPackage)==null?void 0:z.status)==="active";let pe=!1;Ae?(console.log(" Branch package is active, granting access"),pe=!0):pe=Yu(K.subscription),l(pe),console.log(" Subscription Validation Result (Real-time):",{userId:e.uid,isValid:pe,isOnFreeTrial:K.isOnFreeTrial,hasActiveBranchPackage:Ae,reason:Ae?"Branch package active":K.subscription?K.subscription.isActive?K.subscription.planType==="lifetime"?"Lifetime plan":K.subscription.endDate?new Date>new Date(K.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"});try{const V=K.subscription,we=V==null?void 0:V.planType,Le=V==null?void 0:V.endDate,at=Le!=null&&Le.toDate?Le.toDate():Le?new Date(Le):null,be=new Date;V&&V.isActive===!0&&at&&!isNaN(at.getTime())&&be>at&&(await UA(e.uid),console.log(" Subscription paused due to end date reached:",{userId:e.uid,plan:we,endDate:at}))}catch(V){console.warn("Failed to auto-deactivate expired subscription:",V)}}},P=>{console.error(" Subscription listener error:",P),(async()=>{var O;try{const D=await gt(R);if(D.exists()){const j=D.data();o(j);const oe=((O=j==null?void 0:j.branchPackage)==null?void 0:O.status)==="active";let ye=!1;oe?ye=!0:ye=Yu(j.subscription),l(ye)}}catch{}})()});return subscriptionUnsubRef.current=k,k}catch(R){console.error("Error setting up subscription listener:",R);try{const k=await gt(Ee(G,"users",e.uid));if(k.exists()){const P=k.data();o(P);const O=((b=P==null?void 0:P.branchPackage)==null?void 0:b.status)==="active";let D=!1;O?D=!0:D=Yu(P.subscription),l(D)}}catch{}}},E=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await h(e.uid),await y()}catch(S){console.error("Error refreshing profile:",S)}},L={user:e,profile:r,userSubscription:i,isSubscriptionActive:a,loading:c,signUp:T,signIn:p,signOut:v,resetPassword:w,updateUserProfile:async S=>{if(e)try{const b={updatedAt:Oe()};if(S.fullName!==void 0&&(b.fullName=S.fullName),S.phone!==void 0&&(b.phone=S.phone),S.sim1Number!==void 0){const R=(S.sim1Number||"").trim();b.sim1Number=R.length?R:null}if(S.sim2Number!==void 0){const R=(S.sim2Number||"").trim();b.sim2Number=R.length?R:null}if(S.bridgeLink!==void 0){const R=(S.bridgeLink||"").trim();b.bridgeLink=R.length?R:null}if(S.bridgeDeviceId!==void 0){const R=(S.bridgeDeviceId||"").trim();b.bridgeDeviceId=R.length?R:null}S.showWithdrawNote!==void 0&&(b.showWithdrawNote=!!S.showWithdrawNote),S.isReceiptNoteEnabled!==void 0&&(b.isReceiptNoteEnabled=!!S.isReceiptNoteEnabled),S.smsReadingEnabled!==void 0&&(b.smsReadingEnabled=!!S.smsReadingEnabled),S.smsAutoRegisterEnabled!==void 0&&(b.smsAutoRegisterEnabled=!!S.smsAutoRegisterEnabled),await Xt(Ee(G,"profiles",e.uid),b),await h(e.uid)}catch(b){console.error("Error updating user profile:",b)}},updateAvatarId:async S=>{if(e)try{await Xt(Ee(G,"profiles",e.uid),{avatarId:S,updatedAt:Oe()}),await h(e.uid)}catch(b){console.error("Error updating avatarId:",b)}},refreshProfile:E,checkSubscriptionStatus:y};return _.jsx(qO.Provider,{value:L,children:t})};function vH(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Lg="Checkbox",[wH]=Hc(Lg),[_H,JE]=wH(Lg);function EH(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,m]=c0({prop:n,defaultProp:s??!1,onChange:l,caller:Lg}),[T,p]=A.useState(null),[v,w]=A.useState(null),y=A.useRef(!1),E=T?!!o||!!T.closest("form"):!0,x={checked:f,disabled:i,setChecked:m,control:T,setControl:p,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:c,defaultChecked:Oo(s)?!1:s,isFormControl:E,bubbleInput:v,setBubbleInput:w};return _.jsx(_H,{scope:e,...x,children:TH(h)?h(x):r})}var HO="CheckboxTrigger",KO=A.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:T}=JE(HO,t),p=Wn(s,d),v=A.useRef(l);return A.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const y=()=>h(v.current);return w.addEventListener("reset",y),()=>w.removeEventListener("reset",y)}},[i,h]),_.jsx(en.button,{type:"button",role:"checkbox","aria-checked":Oo(l)?"mixed":l,"aria-required":c,"data-state":XO(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:p,onKeyDown:Ct(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Ct(n,w=>{h(y=>Oo(y)?!0:!y),T&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});KO.displayName=HO;var XE=A.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return _.jsx(EH,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>_.jsxs(_.Fragment,{children:[_.jsx(KO,{...h,ref:e,__scopeCheckbox:n}),f&&_.jsx(JO,{__scopeCheckbox:n})]})})});XE.displayName=Lg;var GO="CheckboxIndicator",QO=A.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=JE(GO,n);return _.jsx(dl,{present:r||Oo(i.checked)||i.checked===!0,children:_.jsx(en.span,{"data-state":XO(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});QO.displayName=GO;var YO="CheckboxBubbleInput",JO=A.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:m}=JE(YO,t),T=Wn(n,m),p=vH(i),v=lC(r);A.useEffect(()=>{const y=f;if(!y)return;const E=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(E,"checked").set,L=!s.current;if(p!==i&&C){const S=new Event("click",{bubbles:L});y.indeterminate=Oo(i),C.call(y,Oo(i)?!1:i),y.dispatchEvent(S)}},[f,p,i,s]);const w=A.useRef(Oo(i)?!1:i);return _.jsx(en.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:T,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});JO.displayName=YO;function TH(t){return typeof t=="function"}function Oo(t){return t==="indeterminate"}function XO(t){return Oo(t)?"indeterminate":t?"checked":"unchecked"}const ZO=A.forwardRef(({className:t,...e},n)=>_.jsx(XE,{ref:n,className:qn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:_.jsx(QO,{className:qn("flex items-center justify-center text-current"),children:_.jsx($F,{className:"h-4 w-4"})})}));ZO.displayName=XE.displayName;const Sp=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(!1),[o,a]=A.useState(!1),[l,c]=A.useState(typeof navigator<"u"?!navigator.onLine:!1);A.useEffect(()=>{const x=()=>c(!navigator.onLine);return window.addEventListener("online",x),window.addEventListener("offline",x),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",x)}},[]);const[d,h]=A.useState(!0),{signIn:f,user:m,checkSubscriptionStatus:T,loading:p}=ml(),v=Jc();A.useEffect(()=>{try{m&&!p&&v("/user/dashboard")}catch{}},[m,p,v]),A.useEffect(()=>{try{const x=typeof window<"u"?window.localStorage.getItem("cashy:lastEmail"):null;x&&e(x)}catch{}try{const x=typeof window<"u"?window.localStorage.getItem("cashy:rememberLogin"):null;x==="true"?h(!0):x==="false"&&h(!1)}catch{}(async()=>{var x,C;try{if(typeof navigator<"u"&&navigator.credentials&&window.localStorage.getItem("cashy:rememberLogin")==="true"){const L=await((C=(x=navigator.credentials).get)==null?void 0:C.call(x,{password:!0,mediation:"optional"}));L&&L.type==="password"&&(L.id&&e(L.id),L.password&&r(L.password))}if(window.localStorage.getItem("cashy:rememberLogin")==="true")try{const L=sessionStorage.getItem("cashy:rememberedPassword");L&&!n&&r(L)}catch{}}catch{}})()},[]);const w=async x=>{if(x.preventDefault(),o){Jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){Jn.error("   .      .");return}const C=(t||"").trim().toLowerCase(),L=(n||"").trim();if(console.log("    :",{email:C,password:"***"}),!t||!n){Jn.error("   ");return}if(!/^\S+@\S+\.\S+$/.test(C)){Jn.error("    ");return}a(!0);try{try{await n9(Pt,d?PD:o9);try{window.localStorage.setItem("cashy:rememberLogin",d?"true":"false")}catch{}}catch{}console.log("  signIn...");const{error:S}=await f(C,L);if(console.log(" SignIn result:",{error:S}),S){console.error("    :",S);const b=S==null?void 0:S.code;b==="auth/user-not-found"?Jn.error("     "):b==="auth/wrong-password"?Jn.error("   "):b==="auth/invalid-credential"?Jn.error("      "):b==="auth/too-many-requests"?Jn.error("      "):Jn.error((S==null?void 0:S.message)||"    ")}else{console.log("    !"),Jn.success("   !");try{if(d&&navigator.credentials&&window.PasswordCredential){const b=new window.PasswordCredential({id:C,name:C,password:L});await navigator.credentials.store(b)}if(d)try{sessionStorage.setItem("cashy:rememberedPassword",L)}catch{}else try{sessionStorage.removeItem("cashy:rememberedPassword")}catch{}}catch{}setTimeout(()=>{try{window.location.reload()}catch{}},800)}}catch(S){console.error("   :",S),Jn.error("   ")}finally{a(!1)}},y=x=>{if(o){x.preventDefault(),x.stopPropagation(),Jn.info("     ...");return}if(typeof navigator<"u"&&navigator.onLine===!1){x.preventDefault(),x.stopPropagation(),Jn.error("   .      .");return}t||Jn.error("   "),n||Jn.error("   ");const C=(t||"").trim().toLowerCase();C&&!/^\S+@\S+\.\S+$/.test(C)&&Jn.error("    ")},E=()=>{v("/user/forgot-password")};return A.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches))return;const x=document.documentElement,C=document.body,L=x.style.overflow,S=C.style.overflow,b=x.style.overscrollBehaviorY,R=C.style.overscrollBehaviorY;return x.style.overflow="hidden",C.style.overflow="hidden",x.style.overscrollBehaviorY="none",C.style.overscrollBehaviorY="none",()=>{x.style.overflow=L||"",C.style.overflow=S||"",x.style.overscrollBehaviorY=b||"",C.style.overscrollBehaviorY=R||""}},[]),_.jsxs("div",{className:"relative min-h-[100dvh] w-full overflow-hidden flex items-center justify-center p-4 bg-no-repeat bg-cover",style:{backgroundImage:"var(--bg-purple-gradient)",backgroundAttachment:"fixed"},children:[l&&_.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white text-center py-2 z-50 animate-in fade-in slide-in-from-top-2",children:_.jsx("p",{className:"text-sm font-medium",children:"   .        ."})}),_.jsx("div",{className:"absolute inset-0 bg-black/40"}),_.jsxs("div",{className:"w-full max-w-md mt-16 md:mt-12 lg:mt-10",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:_.jsx(_U,{className:"w-10 h-10 text-white"})}),_.jsx("div",{className:"flex items-center justify-center mb-2",children:_.jsx("span",{className:"text-2xl font-extrabold text-white tracking-wider uppercase",dir:"ltr",style:{fontFamily:"Inter, sans-serif"},children:"cashy link"})}),_.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),_.jsx("p",{className:"text-white/80",children:"    "})]}),_.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/20",children:[_.jsxs("form",{onSubmit:w,className:"space-y-6",autoComplete:"on",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white",children:" "}),_.jsxs("div",{className:"relative",children:[_.jsx(QI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),_.jsx(vw,{id:"username",type:"email",placeholder:"  ",value:t,onChange:x=>{const C=x.target.value;e(C);try{window.localStorage.setItem("cashy:lastEmail",C)}catch{}},name:"username",autoComplete:"username",className:"pl-10 pr-4 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",dir:"rtl",required:!0})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white",children:" "}),_.jsxs("div",{className:"relative",children:[_.jsx(tU,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 w-5 h-5"}),_.jsx(vw,{id:"password",type:s?"text":"password",placeholder:"  ",value:n,onChange:x=>r(x.target.value),className:"pl-10 pr-10 py-3 rounded-lg bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:ring-2 focus:ring-green-400",name:"password",autoComplete:"current-password",dir:"rtl",required:!0}),_.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors",children:s?_.jsx(KF,{className:"w-5 h-5"}):_.jsx(QF,{className:"w-5 h-5"})})]}),_.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[_.jsx(ZO,{id:"rememberLogin",checked:d,onCheckedChange:x=>h(!!x)}),_.jsx("label",{htmlFor:"rememberLogin",className:"text-sm text-white",children:"  "})]})]}),_.jsx("div",{className:"flex justify-end",children:_.jsxs(es,{type:"button",variant:"ghost",size:"sm",onClick:E,className:"text-green-200 hover:text-green-100 p-0 h-auto font-normal hover:bg-transparent",children:[_.jsx(QI,{className:"w-4 h-4 ml-1"}),"  "]})}),_.jsx("button",{type:"submit",onClick:y,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-200",children:o?_.jsxs("div",{className:"flex items-center justify-center",children:[_.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"  ..."]}):_.jsxs("div",{className:"flex items-center justify-center",children:[_.jsx(LF,{className:"w-5 h-5 ml-2"})," "]})})]}),_.jsxs("div",{className:"mt-6 text-center space-y-3",children:[_.jsxs("p",{className:"text-sm text-white/80",children:["  "," ",_.jsx(m$,{to:"/user/register",className:"text-green-200 hover:text-green-100 font-medium transition-colors hover:underline",children:"  "})]}),_.jsxs("p",{className:"text-sm text-white/80",children:["        "," ",_.jsx("a",{href:"https://wa.me/201000392539",target:"_blank",rel:"noreferrer",className:"text-green-200 hover:text-green-100 font-medium hover:underline",children:"01000392539"})," ","   "," ",_.jsx("a",{href:"mailto:info@cashy-link.com",className:"text-blue-200 hover:text-blue-100 font-medium hover:underline",children:"info@cashy-link.com"})]})]})]}),_.jsx("div",{className:"mt-6 text-center",children:_.jsx("p",{className:"text-xs text-white/70",children:"   "})})]})]})},IH=Object.freeze(Object.defineProperty({__proto__:null,default:Sp},Symbol.toStringTag,{value:"Module"})),SH=()=>{const t=Jc(),e=ri(),{signOut:n,user:r,userSubscription:s}=ml(),{toast:i}=a0(),[o,a]=A.useState(!1),[l,c]=A.useState(!1),d=[{id:"home",label:"",icon:ZF,path:"/user/dashboard",action:()=>{t("/user/dashboard"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}},{id:"debts",label:"",icon:JF,path:"/debts",action:()=>{t("/user/dashboard",{state:{openDebtDialog:!0}})}},{id:"transfer",label:"",icon:MF,path:"/transfer",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"transfer",startNewTransaction:!0}})}},{id:"add",label:"",icon:YI,path:"/add",isSpecial:!0},{id:"withdraw",label:"",icon:NF,path:"/withdraw",action:()=>{t("/user/dashboard",{state:{openTransactionSection:!0,transactionType:"withdraw",startNewTransaction:!0}})}},{id:"transactions",label:"",icon:_y,path:"/transactions"},{id:"settings",label:"",icon:JI,path:"/profile-settings"}],f=[{id:"installment",label:"",icon:UF,action:()=>{var w;a(!1);const v=(w=s==null?void 0:s.subscription)==null?void 0:w.planType;if(v===wa.TAHWEELA||v===wa.ZERO){i({title:"  ",description:"      .",variant:"destructive"});return}t("/user/dashboard",{state:{openInstallment:!0}})},color:"#7C3AED"},{id:"maintenance",label:"",icon:TU,action:()=>{a(!1),t("/user/dashboard",{state:{openMaintenanceDialog:!0}})},color:"#0EA5E9"},{id:"credit-cards",label:" ",icon:qF,action:()=>{a(!1),t("/user/dashboard",{state:{openCreditCardsDialog:!0}})},color:"#8B5CF6"},{id:"sales",label:"",icon:yU,action:()=>{a(!1),t("/user/dashboard",{state:{openSalesDialog:!0}})},color:"#F59E0B"},{id:"shop-expenses",label:" ",icon:_y,action:()=>{a(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"deficiencies",label:"",icon:MP,action:()=>{a(!1),t("/user/dashboard",{state:{openDeficienciesDialog:!0}})},color:"#DB2777"},{id:"add-wallet",label:" ",icon:YI,action:()=>{a(!1),t("/user/add-wallet")},color:"#EF4444"},{id:"cashier-shift",label:" ",icon:zF,action:()=>{a(!1),t("/user/dashboard",{state:{openCashierShiftModal:!0}})},color:"#3B82F6"},{id:"contact",label:" ",icon:iU,action:()=>{a(!1);const w=`   
  : ${(r==null?void 0:r.email)||" "}`,y=encodeURIComponent(w);window.open(`https://wa.me/201000392539?text=${y}`,"_blank")},color:"#10B981"},{id:"logout",label:" ",icon:GI,action:async()=>{a(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],m=[{id:"shop-expenses-settings",label:" ",icon:_y,action:()=>{c(!1),t("/user/dashboard",{state:{openShopExpensesDialog:!0}})},color:"#F97316"},{id:"profile-settings",label:"  ",icon:JI,action:()=>{c(!1),t("/profile-settings")},color:"#6366F1"},{id:"logout",label:" ",icon:GI,action:async()=>{c(!1);try{await n()}catch(v){console.error("Logout error:",v)}},color:"#EF4444"}],T=(v,w,y,E)=>{var b;const C=((b=s==null?void 0:s.subscription)==null?void 0:b.planType)===wa.TAHWEELA,L=R=>["/user/dashboard","/profile-settings"].includes(R),S=R=>R==="debts";if(y){if(C&&!S(E)&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}y()}else if(w&&v==="/add"){if(C){i({title:"  ",description:"      .",variant:"destructive"});return}a(!o)}else if(!w){if(C&&!L(v)){i({title:"  ",description:"      .",variant:"destructive"});return}t(v)}},p=v=>e.pathname===v;return _.jsxs("div",{className:"mobile-bottom-nav",children:[o&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"quick-actions-overlay",onClick:()=>a(!1)}),_.jsx("div",{className:"quick-actions-bottomsheet",children:_.jsx("div",{className:"quick-actions-grid",children:f.map((v,w)=>_.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var E;if(((E=s==null?void 0:s.subscription)==null?void 0:E.planType)===wa.TAHWEELA){i({title:"  ",description:"      .",variant:"destructive"});return}a(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":`${w*.06}s`},children:[_.jsx("div",{className:"quick-action-icon",children:_.jsx(v.icon,{className:"action-icon"})}),_.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),l&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"quick-actions-overlay",onClick:()=>c(!1)}),_.jsx("div",{className:"quick-actions-bottomsheet",children:_.jsx("div",{className:"quick-actions-grid",children:m.map((v,w)=>_.jsxs("button",{type:"button",className:"quick-action-tile",onClick:()=>{var x;const y=(x=s==null?void 0:s.subscription)==null?void 0:x.planType,E=new Set(["logout","profile-settings"]);if(y===wa.TAHWEELA&&!E.has(v.id)){i({title:"  ",description:"      .",variant:"destructive"});return}c(!1),v.action()},style:{"--action-color":v.color,"--animation-delay":`${w*.06}s`},children:[_.jsx("div",{className:"quick-action-icon",children:_.jsx(v.icon,{className:"action-icon"})}),_.jsx("span",{className:"quick-action-label",children:v.label})]},v.id))})})]}),_.jsx("nav",{className:"mobile-bottom-nav-container",children:d.map(v=>{const w=v.icon,y=p(v.path);return _.jsxs("button",{onClick:()=>T(v.path,v.isSpecial,v.action,v.id),className:`mobile-nav-item ${y?"active":""} ${v.isSpecial?"special":""}`,type:"button","aria-label":v.label,children:[_.jsx("div",{className:`nav-icon-container ${v.isSpecial?"special-icon":""} ${v.isSpecial&&v.id==="add"&&o?"special-open":""}`,children:_.jsx(w,{className:`nav-icon ${y?"active-icon":""} ${v.isSpecial?"special-icon-svg":""} ${v.isSpecial&&v.id==="settings"&&l?"rotated":""}`})}),!v.isSpecial&&_.jsx("span",{className:`nav-label ${y?"active-label":""}`,children:v.label})]},v.id)})})]})};var Lx,Vx;const Ra=(Vx=(Lx=import.meta)==null?void 0:Lx.env)==null?void 0:Vx.VITE_ANDROID_DOWNLOAD_URL;var Mx,Fx;const Pa=(Fx=(Mx=import.meta)==null?void 0:Mx.env)==null?void 0:Fx.VITE_PC_DOWNLOAD_URL;var Ux,jx;const Ca=(jx=(Ux=import.meta)==null?void 0:Ux.env)==null?void 0:jx.VITE_PC32_DOWNLOAD_URL;var $x,Bx;const Da=(Bx=($x=import.meta)==null?void 0:$x.env)==null?void 0:Bx.VITE_ANDROID_VERSION;var zx,Wx;const ka=(Wx=(zx=import.meta)==null?void 0:zx.env)==null?void 0:Wx.VITE_PC_VERSION;var qx,Hx;const Na=(Hx=(qx=import.meta)==null?void 0:qx.env)==null?void 0:Hx.VITE_PC32_VERSION;function hn(t){if(t)try{const n=(t.split("?")[0].split("#")[0].split("/").pop()||"").match(/v?(\d+\.\d+(?:\.\d+)?)/i);return n==null?void 0:n[1]}catch{return}}function bH(t){if(t)try{const e=t.match(/drive\.google\.com\/file\/d\/([^/]+)\//),n=t.match(/drive\.google\.com\/open\?id=([^&]+)/),r=(e==null?void 0:e[1])||(n==null?void 0:n[1]);return r?`https://drive.google.com/uc?export=download&id=${r}`:(/drive\.google\.com\/uc\?/.test(t),t)}catch{return t}}const Ho=["siteContent","appDownloads"],bp=["siteContent","desktop_updates"],Ap=["siteContent","android_updates"],lh="appDownloadsCache";function AH(){try{const e=localStorage.getItem(lh);if(e){const n=JSON.parse(e),r={androidUrl:(n==null?void 0:n.androidUrl)||Ra,pcUrl:(n==null?void 0:n.pcUrl)||Pa,pc32Url:(n==null?void 0:n.pc32Url)||Ca,androidVersion:(n==null?void 0:n.androidVersion)||Da,pcVersion:(n==null?void 0:n.pcVersion)||ka,pc32Version:(n==null?void 0:n.pc32Version)||Na,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}}catch{}const t={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:Da,pcVersion:ka,pc32Version:Na};return t.pcVersion||(t.pcVersion=hn(t.pcUrl)),t.androidVersion||(t.androidVersion=hn(t.androidUrl)),t.pc32Version||(t.pc32Version=hn(t.pc32Url)),t}async function xH(){try{const t=await gt(Ee(G,Ho[0],Ho[1]));if(t.exists()){const n=t.data();try{localStorage.setItem(lh,JSON.stringify(n))}catch{}const r={androidUrl:(n==null?void 0:n.androidUrl)||Ra,pcUrl:(n==null?void 0:n.pcUrl)||Pa,pc32Url:(n==null?void 0:n.pc32Url)||Ca,androidVersion:(n==null?void 0:n.androidVersion)||Da,pcVersion:(n==null?void 0:n.pcVersion)||ka,pc32Version:(n==null?void 0:n.pc32Version)||Na,updatedAt:n==null?void 0:n.updatedAt,updatedBy:n==null?void 0:n.updatedBy};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}const e={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:Da,pcVersion:ka,pc32Version:Na};return e.pcVersion||(e.pcVersion=hn(e.pcUrl)),e.androidVersion||(e.androidVersion=hn(e.androidUrl)),e.pc32Version||(e.pc32Version=hn(e.pc32Url)),e}catch(t){const e=(t==null?void 0:t.message)||"";((t==null?void 0:t.code)||"")==="permission-denied"||e.includes("Missing or insufficient permissions")?console.warn(" Cannot read app downloads (unauth/public). Using cached or empty.",t):console.error(" Error loading app downloads:",t);try{const s=localStorage.getItem(lh);if(s){const i=JSON.parse(s),o={androidUrl:(i==null?void 0:i.androidUrl)||Ra,pcUrl:(i==null?void 0:i.pcUrl)||Pa,pc32Url:(i==null?void 0:i.pc32Url)||Ca,androidVersion:(i==null?void 0:i.androidVersion)||Da,pcVersion:(i==null?void 0:i.pcVersion)||ka,pc32Version:(i==null?void 0:i.pc32Version)||Na,updatedAt:i==null?void 0:i.updatedAt,updatedBy:i==null?void 0:i.updatedBy};return o.pcVersion||(o.pcVersion=hn(o.pcUrl)),o.androidVersion||(o.androidVersion=hn(o.androidUrl)),o.pc32Version||(o.pc32Version=hn(o.pc32Url)),o}}catch{}const r={androidUrl:Ra,pcUrl:Pa,pc32Url:Ca,androidVersion:Da,pcVersion:ka,pc32Version:Na};return r.pcVersion||(r.pcVersion=hn(r.pcUrl)),r.androidVersion||(r.androidVersion=hn(r.androidUrl)),r.pc32Version||(r.pc32Version=hn(r.pc32Url)),r}}function RH(t){try{const e=Ee(G,Ho[0],Ho[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={androidUrl:(s==null?void 0:s.androidUrl)||Ra,pcUrl:(s==null?void 0:s.pcUrl)||Pa,pc32Url:(s==null?void 0:s.pc32Url)||Ca,androidVersion:(s==null?void 0:s.androidVersion)||Da,pcVersion:(s==null?void 0:s.pcVersion)||ka,pc32Version:(s==null?void 0:s.pc32Version)||Na,updatedAt:s==null?void 0:s.updatedAt,updatedBy:s==null?void 0:s.updatedBy};i.pcVersion||(i.pcVersion=hn(i.pcUrl)),i.androidVersion||(i.androidVersion=hn(i.androidUrl)),i.pc32Version||(i.pc32Version=hn(i.pc32Url));try{localStorage.setItem(lh,JSON.stringify(i))}catch{}t(i)},r=>{console.warn("listenAppDownloads error; falling back to cache",r);try{const s=localStorage.getItem(lh);s&&t(JSON.parse(s))}catch{}})}catch{return()=>{}}}async function PH(t,e,n,r,s,i=12e4){const o=UO(),a=t.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`public/apps/${e}/${Date.now()}_${a}`,c=zq(o,l);return new Promise((d,h)=>{const f=$q(c,t);let m=!1;const T=setTimeout(()=>{m=!0;try{f.cancel()}catch{}h(new Error("Upload timed out"))},i);f.on("state_changed",p=>{const v=Math.round(p.bytesTransferred/p.totalBytes*100);s&&s(v)},p=>{clearTimeout(T),h(p)},async()=>{try{if(clearTimeout(T),m)return;const p=await Bq(c),v={updatedAt:Oe(),updatedBy:n||"admin"};e==="android"?(v.androidUrl=p,r&&(v.androidVersion=r)):e==="pc"?(v.pcUrl=p,r&&(v.pcVersion=r)):(v.pc32Url=p,r&&(v.pc32Version=r));const w=Math.min(Math.max(2e4,Math.floor(i/10)),6e4),y=Mt(Ee(G,Ho[0],Ho[1]),v,{merge:!0});let E=!1;const x=new Promise(C=>setTimeout(()=>{E=!0,C()},w));try{await Promise.race([y,x])}catch(C){console.warn(" Firestore write error, proceeding with URL only:",C)}E&&console.warn(" Firestore update timed out;             ."),d(p)}catch(p){h(p)}})})}async function CH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Oe(),updatedBy:e||"admin"};await Mt(Ee(G,Ho[0],Ho[1]),r,{merge:!0})}async function DH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Oe(),updatedBy:e||"admin"};await Mt(Ee(G,bp[0],bp[1]),r,{merge:!0})}function e2(t){try{const e=Ee(G,bp[0],bp[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,downloadURL_64:s!=null&&s.downloadURL_64?String(s.downloadURL_64):void 0,downloadURL_32:s!=null&&s.downloadURL_32?String(s.downloadURL_32):void 0,notes:s!=null&&s.notes?String(s.notes):void 0};try{localStorage.setItem("desktop_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("desktop_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}function t2(t){try{const e=(typeof navigator<"u"?navigator.userAgent.toLowerCase():"")||"",n=e.includes("win64")||e.includes("x64")||e.includes("wow64")||e.includes("amd64"),r=e.includes("arm64");return String(n||r?(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)||"":(t==null?void 0:t.downloadURL_32)||(t==null?void 0:t.downloadURL_64)||"")}catch{return(t==null?void 0:t.downloadURL_64)||(t==null?void 0:t.downloadURL_32)}}async function kH(t,e){const n={};Object.entries(t||{}).forEach(([s,i])=>{i!==void 0&&(n[s]=i)});const r={...n,updatedAt:Oe(),updatedBy:e||"admin"};await Mt(Ee(G,Ap[0],Ap[1]),r,{merge:!0})}function NH(t){try{const e=Ee(G,Ap[0],Ap[1]);return Oi(e,r=>{const s=(r.exists()?r.data():{})||{},i={version:s!=null&&s.version?String(s.version):void 0,url:s!=null&&s.url?String(s.url):void 0,notes:s!=null&&s.notes?String(s.notes):void 0,force:!!(s!=null&&s.force),code:typeof(s==null?void 0:s.code)=="number"?s.code:typeof(s==null?void 0:s.versionCode)=="number"?s.versionCode:void 0};try{localStorage.setItem("android_update_cache",JSON.stringify(i))}catch{}t(i)},()=>{try{const r=localStorage.getItem("android_update_cache");r&&t(JSON.parse(r))}catch{}})}catch{return()=>{}}}const OH=Object.freeze(Object.defineProperty({__proto__:null,getAppDownloads:xH,getCachedOrEnvAppDownloads:AH,listenAndroidUpdates:NH,listenAppDownloads:RH,listenDesktopUpdates:e2,resolveDownloadUrl:bH,selectDesktopUrl:t2,setAndroidUpdateInfo:kH,setAppDownloadLinks:CH,setDesktopUpdateInfo:DH,uploadAppBinaryResumable:PH},Symbol.toStringTag,{value:"Module"})),LH=()=>{const t=typeof window<"u"?window.electronAPI:void 0,e=!!t,[n,r]=U.useState(!1),[s,i]=U.useState(!1),[o,a]=U.useState(!1),[l,c]=U.useState(0),[d,h]=U.useState(""),[f,m]=U.useState(!1),T=async()=>{try{e&&t?await t.windowMinimize():console.info("windowMinimize (dev preview)")}catch(C){console.warn("failed to minimize",C)}},p=async()=>{try{e&&t?await t.windowClose():console.info("windowClose (dev preview)")}catch(C){console.warn("failed to close",C)}},v=async()=>{if(!f){m(!0);try{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}if(e&&t&&typeof t.windowReload=="function"){setTimeout(()=>{try{t.windowReload()}catch{}},50),setTimeout(()=>m(!1),600);return}try{window.location.reload()}catch{}}catch(C){console.warn("failed to soft refresh",C),m(!1)}}};if(U.useEffect(()=>{if(!(!e||!t))try{t.onUpdateAvailable(()=>r(!0)),t.onUpdateDownloaded(()=>r(!0)),typeof t.onUpdateError=="function"&&t.onUpdateError(()=>{a(!1)}),typeof t.onUpdateProgress=="function"&&t.onUpdateProgress(C=>{const L=(C==null?void 0:C.percent)==null?0:Number(C.percent);a(!0),c(Math.max(0,Math.min(100,isNaN(L)?0:L)))}),t.checkUpdate()}catch(C){console.warn("update init failed",C)}},[e,t]),U.useEffect(()=>{const C=e2(L=>{if(String((L==null?void 0:L.version)||"")){r(!0);const b=t2({downloadURL_64:L==null?void 0:L.downloadURL_64,downloadURL_32:L==null?void 0:L.downloadURL_32})||"";h(b)}});return()=>{try{C()}catch{}}},[]),!e)return null;const[y,E]=U.useState(!1),x=async()=>{try{if(!t)return;y?(typeof t.windowFullscreen=="function"&&await t.windowFullscreen(),E(!1)):(typeof t.windowWindowed=="function"&&await t.windowWindowed(),E(!0))}catch(C){console.warn("window toggle failed",C)}};return _.jsxs("div",{className:"fixed top-2 right-2 z-[2000] flex flex-col items-center gap-2",style:{pointerEvents:"auto"},children:[_.jsx("button",{type:"button","aria-label":"",title:"",onClick:p,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-red-600 hover:bg-red-500/10 focus:outline-none dark:text-red-400 dark:hover:bg-red-400/10",children:_.jsx(m0,{className:"w-5 h-5"})}),_.jsx("button",{type:"button","aria-label":"",title:" ",onClick:v,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:_.jsx(f0,{className:`w-5 h-5 ${f?"animate-spin":""}`})}),_.jsx("button",{type:"button","aria-label":"",title:"",onClick:T,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-800 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:_.jsx(aU,{className:"w-5 h-5"})}),_.jsx("button",{type:"button","aria-label":"/",title:y?"  ":"   ",onClick:x,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-gray-700 hover:bg-black/10 focus:outline-none dark:text-white/80 dark:hover:bg-white/10",children:_.jsx(pU,{className:"w-5 h-5"})})]})},o_=({className:t=""})=>{var l,c;const n=typeof window<"u"&&window.location&&window.location.protocol==="file:"?"./":`${((c=(l=import.meta)==null?void 0:l.env)==null?void 0:c.BASE_URL)||"/"}`,[r,s]=A.useState(`${n}logo.svg`),[i,o]=A.useState(0),a=A.useCallback(()=>{o(d=>{const h=d+1;return h===1?s(`${n}logo.png`):h===2&&s(`${n}placeholder.svg`),h})},[]);return _.jsx("div",{className:`min-h-screen bg-background flex items-center justify-center ${t}`,children:_.jsxs("div",{className:"flex flex-col items-center justify-center",children:[_.jsx("img",{src:r,alt:"logo",onError:a,className:"w-16 h-16 animate-spin",style:{animationDuration:"0.6s"}}),_.jsx("p",{className:"mt-3 text-base font-extrabold text-primary tracking-wide animate-pulse",style:{fontFamily:"'Tajawal','Cairo',sans-serif"},children:"  "})]})})},BA=Og("AppLauncher",{web:()=>ee(()=>import("./web-rxg5hbaV.js"),[],import.meta.url).then(t=>new t.AppLauncherWeb)});function VH(t,e){if(!t||!t.trim())throw new Error("USSD code is required");const n=`tel:${t.replace(/#/g,"%23")}`,s=`cashy://ussd?code=${t.replace(/#/g,"%23")}${e?`&sim=${e}`:""}`;let i=!1;try{ve&&ve.getPlatform()!=="web"&&(BA.openUrl({url:s}),i=!0)}catch{}if(!i)try{window.location.href=s,i=!0}catch{}if(!i){try{window.location.href=n}catch{}try{ve&&ve.getPlatform()!=="web"&&BA.openUrl({url:n})}catch{}}}function n2(t,e){const n=String(t||"").replace(/\D/g,""),r=Math.round(Number(e||0));return!n||n.length!==11||!n.startsWith("01")||!r||r<=0?null:n.startsWith("010")?`*9*7*${n}*${r}#`:n.startsWith("011")?`*323*${n}*${r}#`:n.startsWith("012")?`*115*1*${n}*${r}#`:n.startsWith("015")?`*322*${n}*${r}#`:null}function MH(t,e,n){const r=String(t||"").replace(/\D/g,""),s=String(e||"").replace(/\D/g,""),i=Math.round(Number(n||0));return!s||s.length!==11||!s.startsWith("01")||!i||i<=0?null:!r||!r.startsWith("01")?n2(s,i):r.startsWith("010")?`*9*7*${s}*${i}#`:r.startsWith("011")?`*323*${s}*${i}#`:r.startsWith("012")?`*115*1*${s}*${i}#`:r.startsWith("015")?`*322*${s}*${i}#`:null}function QG(t,e,n){const r=n2(t,e),s=String(n||"").replace(/\D/g,"");return!r||!s?r:`${r.endsWith("#")?r.slice(0,-1):r}*${s}#`}function FH(t){const e=String(t||"").replace(/\D/g,"");return e.startsWith("010")?"vodafone":e.startsWith("011")?"etisalat":e.startsWith("012")?"orange":e.startsWith("015")?"we":null}function UH(t){const e=FH(t),n=e?`simSlot_${e}`:"simSlot_default";try{if(localStorage.getItem(n)==="sim2")return"sim2"}catch{}return"sim1"}function YG(t,e,n){const r=MH(t,e,n);if(!r)throw new Error("Unsupported network or invalid sender/receiver/amount");const s=UH(t||e);VH(r,s)}async function jH(t,e="Cashy"){if(!t||!t.trim())throw new Error("Notification message is required");try{if(typeof Notification<"u"&&(Notification.permission==="granted"?"granted":await Notification.requestPermission())==="granted"){new Notification(e||"Cashy",{body:t});return}typeof window<"u"&&typeof alert=="function"?alert(`${e||"Cashy"}
${t}`):console.log(`[${e||"Cashy"}] ${t}`)}catch(n){console.warn("Notification not available:",n)}}function ZE(t,e){return e==="send"?0:Math.round(t*.01*100)/100}function $H(t,e,n=0){const r=ZE(t,e),s=Math.max(0,r-n);return Math.round(s*100)/100}const Oa=Object.freeze(Object.defineProperty({__proto__:null,calculateCommission:ZE,calculateProfit:$H},Symbol.toStringTag,{value:"Module"})),BH=t=>t==="withdraw"||t==="receive"?"receive":"send",zH=async t=>{if(!t)return null;const e=Be(Ne(G,"transactions"),Ue("reference","==",t),du(1)),n=await Ke(e);return n.empty?null:n.docs[0].id},WH=async t=>{var e;try{const n=await _a.get({key:"selected_wallet_id"}),r=String((n==null?void 0:n.value)||"").trim();if(r)return r}catch{}return GH(t||((e=Pt.currentUser)==null?void 0:e.uid)||"")||null},Xy=async t=>{try{const e=String(t||"").trim();if(!e)return null;const n=await vo.getByMsisdn(e);return(n==null?void 0:n.id)||null}catch{return null}},r2=async t=>{if(!t||!t.shopId||!t.lineId||!t.provider)throw new Error("   :   shopId  lineId  provider");if(!t.amount||t.amount<=0)throw new Error("     ");const e=await zH(t.reference);if(e)return{id:e,duplicate:!0};const n=BH(t.type);let r=t.walletId&&String(t.walletId).trim()?String(t.walletId).trim():"";if(!r){let o=await Xy(t.receiverMsisdn);if(o||(o=await Xy(t.senderMsisdn)),!o){const a=String(t.lineId||"").replace(/\D/g,"");a.length>=10&&(o=await Xy(a))}r=o||await WH(t.createdBy)||""}if(!r)throw new Error("     ");const s={shopId:t.shopId,lineId:t.lineId,merchantUserId:t.merchantUserId||t.createdBy,walletId:r,provider:t.provider,txnType:n,originType:t.type,amount:t.amount,fee:void 0,commission:void 0,profit:0,reference:t.reference,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,note:t.note,status:"confirmed",createdBy:t.createdBy,createdAt:t.createdAt||new Date,confirmedAt:new Date},i=await QE.create(s);try{const o="  ",a=`: ${t.type} | : ${t.amount} | : ${t.provider}`;await jH(a,o)}catch(o){console.warn("   :",o)}try{const o=t.merchantUserId||t.createdBy;if(o){const a=n==="receive"?"withdraw":"send",l=ZE(t.amount,n);await $r.saveUserTransaction(o,{type:a,amount:t.amount,commission:l,status:"completed",createdAt:new Date,senderMsisdn:t.senderMsisdn,receiverMsisdn:t.receiverMsisdn,senderName:t.senderName,walletId:r,lineId:t.lineId,provider:t.provider,note:t.note,transactionId:i})}else console.warn("    :   userId (merchantUserId  createdBy)  .")}catch(o){console.warn("      userTransactions   :",o)}return{id:i,duplicate:!1}},om=t=>{try{const e=String(t||"").replace(/[^0-9+]/g,"");if(!e)return"";if(e.startsWith("+20")){const n=e.slice(3);return n.startsWith("1")?"0"+n:n}if(e.startsWith("20")){const n=e.slice(2);return n.startsWith("1")?"0"+n:n}return e.startsWith("0")?e:/^(10|11|12|15)/.test(e)?"0"+e:e}catch{return""}},a_=async(t=[],e)=>{var n;try{try{console.log("identifyWalletBySim  input",t)}catch{}const r=e||((n=Pt.currentUser)==null?void 0:n.uid)||"default",s=Array.isArray(t)?t.map(p=>om(p)).filter(p=>!!p):[],i=`wallets_${r}`,o=typeof localStorage<"u"?localStorage.getItem(i):null,a=o?JSON.parse(o):[],l=p=>String(p||"").replace(/\D/g,""),c=Array.isArray(a)?a.map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:om(String((p==null?void 0:p.phone)||(p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn):[],d=new Map;for(const p of s){const v=l(p);for(const w of c){const y=l(w.msisdn);if(w.msisdn===p){d.set(w.walletId,w.msisdn);continue}if(y.slice(-5)===v.slice(-5)){d.set(w.walletId,w.msisdn);continue}}}if(d.size===1){const[p,v]=Array.from(d.entries())[0];return{walletId:p,msisdn:v}}const f=(await vo.getByMerchantId(r)||[]).map(p=>({walletId:String((p==null?void 0:p.id)||""),msisdn:om(String((p==null?void 0:p.msisdn)||"")),isDefault:!!(p!=null&&p.isDefault)})).filter(p=>p.walletId&&p.msisdn),m=[...c,...f],T=new Map;for(const p of s){const v=l(p);for(const w of m){const y=l(w.msisdn);if(w.msisdn===p){T.set(w.walletId,w.msisdn);continue}if(y.slice(-5)===v.slice(-5)){T.set(w.walletId,w.msisdn);continue}}}try{console.log("identifyWalletBySim  matched size",T.size)}catch{}if(T.size===1){const[p,v]=Array.from(T.entries())[0];try{console.log("identifyWalletBySim  unique match",{walletId:p,msisdn:v})}catch{}return{walletId:p,msisdn:v}}try{console.warn("identifyWalletBySim  no unique match")}catch{}return null}catch{return null}};async function qH(t,e){try{const n=i=>om(String(i||"")),r=(e||[]).map(i=>({walletId:String(i.id||""),msisdn:n(String(i.msisdn||i.phone||"")),isDefault:!!i.isDefault})).filter(i=>i.walletId&&i.msisdn),s=i=>String(i||"").replace(/\D/g,"");for(const i of t||[]){const o=n(i),a=s(o),l=r.find(d=>d.msisdn===o);if(l)return{walletId:l.walletId,msisdn:l.msisdn};const c=r.find(d=>s(d.msisdn).slice(-5)===a.slice(-5));if(c)return{walletId:c.walletId,msisdn:c.msisdn}}return null}catch{return null}}async function HH(t){var e;try{const n=t.userId||((e=Pt.currentUser)==null?void 0:e.uid)||"default",r=Array.isArray(t.simNumbers)?t.simNumbers:[],s=await a_(r,n);if(s)return s;const i=`simWalletBindings_${n}`;let o={};try{const c=typeof localStorage<"u"?localStorage.getItem(i):null;o=c?JSON.parse(c):{}}catch{}const a=String(t.subId??""),l=String(t.slotIndex??"");if(a&&o[a]&&o[a].walletId)return{walletId:o[a].walletId,msisdn:String(o[a].msisdn||"")};if(l&&o[`slot_${l}`]&&o[`slot_${l}`].walletId)return{walletId:o[`slot_${l}`].walletId,msisdn:String(o[`slot_${l}`].msisdn||"")};if(t.slotIndex!==void 0&&t.slotIndex!==null&&t.slotIndex>=0){let c="";if(t.slotIndex===0?c=localStorage.getItem(`sim1Number_${n}`)||localStorage.getItem("sim1Number")||"":t.slotIndex===1&&(c=localStorage.getItem(`sim2Number_${n}`)||localStorage.getItem("sim2Number")||""),c){const d=await a_([c],n);if(d)return d}}return null}catch{return null}}function KH(t){var e;try{const r=`simWalletBindings_${t.userId||((e=Pt.currentUser)==null?void 0:e.uid)||"default"}`;let s={};try{const i=typeof localStorage<"u"?localStorage.getItem(r):null;s=i?JSON.parse(i):{}}catch{}t.subId!=null&&(s[String(t.subId)]={walletId:t.walletId,msisdn:t.msisdn||""}),t.slotIndex!=null&&(s[`slot_${String(t.slotIndex)}`]={walletId:t.walletId,msisdn:t.msisdn||""});try{typeof localStorage<"u"&&localStorage.setItem(r,JSON.stringify(s))}catch{}}catch{}}const GH=t=>{var e,n;try{const r=t||((e=Pt.currentUser)==null?void 0:e.uid)||"",s=Object.keys(localStorage),i=`selectedWallet_${r}`,o=`wallets_${r}`,a=s.find(c=>c.startsWith(i));if(a){const c=localStorage.getItem(a)||"";if(c)return c}const l=s.find(c=>c.startsWith(o));if(l){const c=localStorage.getItem(l)||"";if(c){const d=JSON.parse(c);if(Array.isArray(d)&&d.length>0){const h=d.find(f=>f==null?void 0:f.isDefault);return(h==null?void 0:h.id)||((n=d[0])==null?void 0:n.id)||null}}}}catch{}return null};function s2(){return typeof window>"u"?()=>{}:()=>{}}const Ea=Object.freeze(Object.defineProperty({__proto__:null,bindSlotWalletMapping:KH,detectWalletFromSim:qH,identifyWalletBySim:a_,initMobileSmsBridge:s2,processMobileTransactionNotification:r2,resolveWalletBySimOrSlot:HH},Symbol.toStringTag,{value:"Module"})),QH=t=>{try{const e=t.match(/([0-9]+[.,]?[0-9]*)\s*(?:|EGP)?/);if(!e)return null;const n=e[1].replace(",",""),r=Number(n);return isNaN(r)?null:r}catch{return null}},YH=t=>{try{const e=t.match(/(01[0-9]{9})/);return e?e[1]:void 0}catch{return}},JH=()=>{var t,e;try{const n=((t=Pt.currentUser)==null?void 0:t.uid)||"default",r=Object.keys(localStorage).find(i=>i.startsWith(`selectedWallet_${n}`));if(r){const i=localStorage.getItem(r)||"";if(i)return i}const s=Object.keys(localStorage).find(i=>i.startsWith(`wallets_${n}`));if(s){const i=localStorage.getItem(s)||"";if(i){const o=JSON.parse(i);if(Array.isArray(o)&&o.length>0){const a=o.find(l=>l==null?void 0:l.isDefault);return(a==null?void 0:a.id)||((e=o[0])==null?void 0:e.id)||null}}}}catch{}return null},XH=()=>{var t;try{const e=((t=Pt.currentUser)==null?void 0:t.uid)||"",n=e?`selectedShopId_${e}`:"selectedShopId";return localStorage.getItem(n)||""||null}catch{return null}},Zy=async(t,e)=>{var E;const n=String((t==null?void 0:t.text)||"").trim(),r=String((t==null?void 0:t.title)||"").trim(),s=String((t==null?void 0:t.packageName)||"").toLowerCase(),i=String((t==null?void 0:t.appName)||"").toLowerCase();if(!n||!(/vodafone|emeint|myservices/.test(s)||/vodafone|vf\-?cash||/.test(i)||/\s*\s*|\s*|\s*|ana\s*vodafone/i.test(n)))return;try{console.log("VF NOTIFICATION RECEIVED",t)}catch{}const a=/||/.test(n),l=/|/.test(n),c=QH(n),d=YH(n);if(!c||c<=0)return;const h=((E=Pt.currentUser)==null?void 0:E.uid)||"",f=JH()||void 0,m=XH()||"",T=f||"default-line";if(!h||!f||!m)return;try{const x=await oH(h);if((x==null?void 0:x.planType)===wa.ZERO){console.log("Ignoring VF Notification for Zero Plan user");return}}catch{}const p=`${r}|${n}|${(t==null?void 0:t.postedAt)||Date.now()}`,v=`VF-${btoa(unescape(encodeURIComponent(p))).slice(0,24)}`,w=a?"withdraw":l?"transfer":"withdraw",y={type:w,amount:c,provider:"vodafone_cash",shopId:m,lineId:T,walletId:f,senderMsisdn:w==="transfer"&&d||void 0,receiverMsisdn:w==="withdraw"&&d||void 0,reference:v,createdBy:h,merchantUserId:h,note:"  "};try{await r2(y)}catch{}},ws={async syncReportsDataFromFirebase(t){try{if(!t)return null;const e=await $r.getUserData(t),n=e==null?void 0:e.reportsData;if(!n)return null;const r=`reportsData_${t}`,s=o=>{if(!o)return null;try{return o!=null&&o.toDate?o.toDate():new Date(o)}catch{return null}},i={lastDailyResetDate:s(n.lastDailyResetDate),lastMonthlyResetDate:s(n.lastMonthlyResetDate),hiddenDailyTransactionIds:Array.isArray(n.hiddenDailyTransactionIds)?n.hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:Array.isArray(n.hiddenMonthlyTransactionIds)?n.hiddenMonthlyTransactionIds:[],dailyProfit:Number(n.dailyProfit??0),monthlyProfit:Number(n.monthlyProfit??0),lastDailyProfitResetDate:s(n.lastDailyProfitResetDate),lastMonthlyProfitResetDate:s(n.lastMonthlyProfitResetDate)};try{localStorage.setItem(r,JSON.stringify(i))}catch{}return i}catch(e){return console.warn("     Firebase:",e),null}},shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[],dailyProfit:o.dailyProfit||0,monthlyProfit:o.monthlyProfit||0,lastDailyProfitResetDate:o.lastDailyProfitResetDate?new Date(o.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:o.lastMonthlyProfitResetDate?new Date(o.lastMonthlyProfitResetDate):null}}else if(t){const o=localStorage.getItem("reportsData");if(o)try{const a=JSON.parse(o);r={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null},localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("     :",a)}}const s=!1,i=!1;if(r.lastDailyResetDate||(r.lastDailyResetDate=new Date),r.lastDailyProfitResetDate||(r.lastDailyProfitResetDate=new Date),r.lastMonthlyResetDate||(r.lastMonthlyResetDate=new Date),r.lastMonthlyProfitResetDate||(r.lastMonthlyProfitResetDate=new Date),localStorage.setItem(e,JSON.stringify(r)),t)try{$r.updateUserData(t,{reportsData:{...r}})}catch(o){console.warn("     Firebase   :",o)}return{dailyReset:s,monthlyReset:i}}catch(e){return console.error("    :",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let i={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};if(s){const a=JSON.parse(s);i={lastDailyResetDate:a.lastDailyResetDate?new Date(a.lastDailyResetDate):null,lastMonthlyResetDate:a.lastMonthlyResetDate?new Date(a.lastMonthlyResetDate):null,hiddenDailyTransactionIds:a.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:a.hiddenMonthlyTransactionIds||[],dailyProfit:a.dailyProfit||0,monthlyProfit:a.monthlyProfit||0,lastDailyProfitResetDate:a.lastDailyProfitResetDate?new Date(a.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:a.lastMonthlyProfitResetDate?new Date(a.lastMonthlyProfitResetDate):null}}let o=[];if(t==="daily"){const a=new Date().toDateString();o=e.filter(l=>new Date(l.createdAt).toDateString()===a).map(l=>l.id),i.hiddenDailyTransactionIds=[...new Set([...i.hiddenDailyTransactionIds,...o])],i.lastDailyResetDate=new Date,i.dailyProfit=0,i.lastDailyProfitResetDate=new Date}else{const a=new Date().getMonth(),l=new Date().getFullYear();o=e.filter(c=>{const d=new Date(c.createdAt);return d.getMonth()===a&&d.getFullYear()===l}).map(c=>c.id),i.hiddenMonthlyTransactionIds=[...new Set([...i.hiddenMonthlyTransactionIds,...o])],i.lastMonthlyResetDate=new Date,i.monthlyProfit=0,i.lastMonthlyProfitResetDate=new Date}if(localStorage.setItem(r,JSON.stringify(i)),n)try{$r.updateUserData(n,{reportsData:{...i}})}catch(a){console.warn("     Firebase   :",a)}return console.log(`   ${t==="daily"?"":""} `),o}catch(r){return console.error("    :",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[],dailyProfit:r.dailyProfit||0,monthlyProfit:r.monthlyProfit||0,lastDailyProfitResetDate:r.lastDailyProfitResetDate?new Date(r.lastDailyProfitResetDate):null,lastMonthlyProfitResetDate:r.lastMonthlyProfitResetDate?new Date(r.lastMonthlyProfitResetDate):null}}catch(e){return console.error("    :",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[],dailyProfit:0,monthlyProfit:0,lastDailyProfitResetDate:null,lastMonthlyProfitResetDate:null}}},filterVisibleTransactions:(t,e,n)=>{try{const r=ws.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(o=>!s.includes(o.id))}catch(r){return console.error("   :",r),t}},addProfit:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=ws.getReportsData(n);if(e==="daily"?s.dailyProfit+=t:s.monthlyProfit+=t,localStorage.setItem(r,JSON.stringify(s)),n)try{$r.updateUserData(n,{reportsData:{...s}})}catch(i){console.warn("     Firebase:",i)}try{window.dispatchEvent(new CustomEvent("reportsUpdated",{detail:{userId:n,type:e,amount:t}}))}catch{}}catch(r){console.error("   :",r)}},getProfits:t=>{try{const e=ws.getReportsData(t);return{dailyProfit:e.dailyProfit,monthlyProfit:e.monthlyProfit}}catch(e){return console.error("   :",e),{dailyProfit:0,monthlyProfit:0}}},removeTransactionEffects:(t,e)=>{try{const n=e?`reportsData_${e}`:"reportsData",r=ws.getReportsData(e),s=new Date(t.createdAt),i=new Date,o=i.getMonth(),a=i.getFullYear(),l=ws.calculateTransactionProfit(t);if(s.toDateString()===i.toDateString()&&((r.hiddenDailyTransactionIds||[]).includes(t.id)||(r.dailyProfit=Math.round((r.dailyProfit-l)*100)/100,r.dailyProfit<0&&(r.dailyProfit=0))),s.getMonth()===o&&s.getFullYear()===a&&((r.hiddenMonthlyTransactionIds||[]).includes(t.id)||(r.monthlyProfit=Math.round((r.monthlyProfit-l)*100)/100,r.monthlyProfit<0&&(r.monthlyProfit=0))),localStorage.setItem(n,JSON.stringify(r)),e)try{$r.updateUserData(e,{reportsData:{...r}})}catch(c){console.warn("      Firebase:",c)}}catch(n){console.error("      :",n)}},calculateTransactionProfit:t=>{const e=String((t==null?void 0:t.status)||"").toLowerCase();if(e&&e!=="completed"&&e!=="confirmed")return 0;const n=Number((t==null?void 0:t.fee)??0);if(t.commission!==void 0){const i=Math.max(0,Number(t.commission||0));return Math.round((i+Math.max(0,n))*100)/100}const r=String(t.type||"").toLowerCase(),s=r==="withdrawal"?"withdraw":r;if(s==="withdraw"||s==="receive"||s==="send"||s==="transfer"){const i=Math.round(Number(t.amount||0)*.01*100)/100;return Math.round((i+Math.max(0,n))*100)/100}return 0}},ZH=ws,JG=Object.freeze(Object.defineProperty({__proto__:null,ReportsService:ZH,reportsService:ws},Symbol.toStringTag,{value:"Module"})),xp={parseNum(t,e){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const n=t.replace(/[^0-9.-]/g,""),r=parseFloat(n);return Number.isFinite(r)?r:e}return e},getCurrentDayId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},async setLimits(t,e){var n;try{const r=Ee(G,"walletLimits",t),s={updatedAt:Oe(),ownerId:(n=Pt.currentUser)==null?void 0:n.uid};return e.dailyTransferLimit!==void 0&&(s.dailyTransferLimit=e.dailyTransferLimit),e.dailyWithdrawLimit!==void 0&&(s.dailyWithdrawLimit=e.dailyWithdrawLimit),e.monthlyTransferLimit!==void 0&&(s.monthlyTransferLimit=e.monthlyTransferLimit),e.monthlyWithdrawLimit!==void 0&&(s.monthlyWithdrawLimit=e.monthlyWithdrawLimit),await Mt(r,s,{merge:!0}),await this.getWalletLimits(t)}catch(r){return console.error("    :",r),null}},getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},shouldResetDailyLimits(t){if(!t)return!0;const e=new Date,n=t.toDate();return e.getDate()!==n.getDate()||e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear()},shouldResetMonthlyLimits(t){const e=new Date,n=e.getDate()===1;if(!t)return n;const r=t.toDate();return n&&(e.getMonth()!==r.getMonth()||e.getFullYear()!==r.getFullYear())},async getWalletLimits(t){var e;try{const n=Ee(G,"walletLimits",t);try{const s=await gt(n);if(s.exists()){const i=s.data();return{walletId:t,dailyTransferLimit:this.parseNum(i.dailyTransferLimit,6e4),dailyWithdrawLimit:this.parseNum(i.dailyWithdrawLimit,1e5),dailyTransferUsed:this.parseNum(i.dailyTransferUsed,0),dailyWithdrawUsed:this.parseNum(i.dailyWithdrawUsed,0),lastDailyReset:i.lastDailyReset||null,monthlyTransferLimit:this.parseNum(i.monthlyTransferLimit,2e5),monthlyWithdrawLimit:this.parseNum(i.monthlyWithdrawLimit,2e5),monthlyTransferUsed:this.parseNum(i.monthlyTransferUsed,0),monthlyWithdrawUsed:this.parseNum(i.monthlyWithdrawUsed,0),lastMonthlyReset:i.lastMonthlyReset||null,updatedAt:i.updatedAt||dt.now()}}}catch{}const r={walletId:t,dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:dt.now()};return await Mt(n,{dailyTransferLimit:6e4,dailyWithdrawLimit:1e5,dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:null,monthlyTransferLimit:2e5,monthlyWithdrawLimit:2e5,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:null,updatedAt:Oe(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid}),r}catch(n){return console.error("     :",n),null}},async resetDailyLimits(t){var e;try{const n=Ee(G,"walletLimits",t);return await Mt(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,lastDailyReset:Oe(),updatedAt:Oe(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async resetMonthlyLimits(t){var e;try{const n=Ee(G,"walletLimits",t);return await Mt(n,{monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastMonthlyReset:Oe(),updatedAt:Oe(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),!0}catch(n){return console.error("     :",n),!1}},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletLimits(t);if(!e)return null;let n=!1;return this.shouldResetDailyLimits(e.lastDailyReset)&&(await this.resetDailyLimits(t),n=!0),this.shouldResetMonthlyLimits(e.lastMonthlyReset)&&(await this.resetMonthlyLimits(t),n=!0),n?await this.getWalletLimits(t):e}catch(e){return console.error("     :",e),null}},async canPerformOperation(t,e,n){try{const r=await this.autoResetLimitsIfNeeded(t);if(!r)return{canPerform:!1,message:"      "};if(n==="transfer"){const s=Math.max(0,this.parseNum(r.dailyTransferLimit,6e4)-this.parseNum(r.dailyTransferUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyTransferLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyTransferLimit,2e5)-this.parseNum(r.monthlyTransferUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyTransferLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}if(n==="withdraw"){const s=Math.max(0,this.parseNum(r.dailyWithdrawLimit,1e5)-this.parseNum(r.dailyWithdrawUsed,0));if(e>s)return{canPerform:!1,message:`   . : ${s.toLocaleString()} .   ${r.dailyWithdrawLimit.toLocaleString()} .`,dailyRemaining:s,limitType:"daily"};const i=Math.max(0,this.parseNum(r.monthlyWithdrawLimit,2e5)-this.parseNum(r.monthlyWithdrawUsed,0));return e>i?{canPerform:!1,message:`   . : ${i.toLocaleString()} .   ${r.monthlyWithdrawLimit.toLocaleString()} .`,monthlyRemaining:i,limitType:"monthly"}:{canPerform:!0,dailyRemaining:Math.max(0,s-e),monthlyRemaining:Math.max(0,i-e)}}return{canPerform:!1,message:"   "}}catch(r){return console.error("      :",r),{canPerform:!1,message:"    "}}},async updateUsage(t,e,n){try{const r=await this.canPerformOperation(t,e,n);if(!r.canPerform)throw new Error(r.message||"   ");const s=Ee(G,"walletLimits",t),i=await this.getWalletLimits(t);if(!i)throw new Error("      ");const o={updatedAt:Oe()};return n==="transfer"?(o.dailyTransferUsed=i.dailyTransferUsed+e,o.monthlyTransferUsed=i.monthlyTransferUsed+e):n==="withdraw"&&(o.dailyWithdrawUsed=i.dailyWithdrawUsed+e,o.monthlyWithdrawUsed=i.monthlyWithdrawUsed+e),await Mt(s,{...o},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("    :",r),r}},async rollbackUsage(t,e,n){try{const r=Ee(G,"walletLimits",t),s=await this.getWalletLimits(t);if(!s)throw new Error("      ");const i={updatedAt:Oe()};return n==="transfer"?(i.dailyTransferUsed=Math.max(0,(s.dailyTransferUsed||0)-e),i.monthlyTransferUsed=Math.max(0,(s.monthlyTransferUsed||0)-e)):(i.dailyWithdrawUsed=Math.max(0,(s.dailyWithdrawUsed||0)-e),i.monthlyWithdrawUsed=Math.max(0,(s.monthlyWithdrawUsed||0)-e)),await Mt(r,{...i},{merge:!0}),await this.getWalletLimits(t)}catch(r){throw console.error("      :",r),r}},calculateRemaining(t){return{dailyTransferRemaining:Math.max(0,t.dailyTransferLimit-t.dailyTransferUsed),dailyWithdrawRemaining:Math.max(0,t.dailyWithdrawLimit-t.dailyWithdrawUsed),monthlyTransferRemaining:Math.max(0,t.monthlyTransferLimit-t.monthlyTransferUsed),monthlyWithdrawRemaining:Math.max(0,t.monthlyWithdrawLimit-t.monthlyWithdrawUsed)}},async resetAllLimits(t){var e;try{const n=Ee(G,"walletLimits",t);return await Mt(n,{dailyTransferUsed:0,dailyWithdrawUsed:0,monthlyTransferUsed:0,monthlyWithdrawUsed:0,lastDailyReset:Oe(),lastMonthlyReset:Oe(),updatedAt:Oe(),ownerId:(e=Pt.currentUser)==null?void 0:e.uid},{merge:!0}),console.log(`       ${t}`),await this.getWalletLimits(t)}catch(n){return console.error("     :",n),null}}},l_=Object.freeze(Object.defineProperty({__proto__:null,default:xp,walletDailyLimitsService:xp},Symbol.toStringTag,{value:"Module"}));class eK{constructor(){vl(this,"intervalId",null);vl(this,"isRunning",!1)}start(){if(this.isRunning){console.log(" ReportsResetScheduler  ");return}this.isRunning=!0;try{const e=()=>{const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,0,0,0,0),s=Math.max(1e3,r.getTime()-n.getTime());this.intervalId=setTimeout(async()=>{await this.runResetSafely(),e()},s)};e(),console.log("        ")}catch{console.log("   ")}}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("     ")}async runResetSafely(){var e;try{const n=(e=Pt.currentUser)==null?void 0:e.uid;if(!n){console.log("          ");return}const s=new Date().toISOString().slice(0,10),i=await i_.getToday(n);await i_.saveToHistory(n,s,i||{}),console.log("      :",s),await this.archivePreviousDayIfNeeded(n),await this.resetUserWalletLimits(n)}catch(n){console.error("     :",n)}}async archivePreviousDayIfNeeded(e){try{await ws.syncReportsDataFromFirebase(e);const n=ws.getReportsData(e);if(!n.lastDailyResetDate||!ws.shouldResetDailyReports(n.lastDailyResetDate))return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),o=i.toDateString(),a=await $r.getUserTransactions(e),l=y=>{const E=String(y||"").toLowerCase();return["completed","confirmed","success"].includes(E)?"completed":["failed","error"].includes(E)?"failed":["cancelled","canceled"].includes(E)?"cancelled":"pending"},c=(a||[]).filter(y=>{var x,C;const E=(x=y==null?void 0:y.createdAt)!=null&&x.toDate?y.createdAt.toDate():(y==null?void 0:y.createdAt)instanceof Date?y.createdAt:new Date(y==null?void 0:y.createdAt);return((C=E==null?void 0:E.toDateString)==null?void 0:C.call(E))===o&&l(y==null?void 0:y.status)==="completed"}),d=c.length,h=c.reduce((y,E)=>y+Number(E.amount||0),0),f=y=>{const E=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return E==="withdraw"||E==="withdrawal"||E==="receive"},m=y=>{const E=String(((y==null?void 0:y.type)??(y==null?void 0:y.txnType))||"").toLowerCase();return E==="send"||E==="transfer"},T=c.filter(f).reduce((y,E)=>{const x=E.withdrawnAmount!==void 0?Number(E.withdrawnAmount):Number(E.amount||0);return y+x},0),p=c.filter(m).reduce((y,E)=>{const x=E.sentAmount!==void 0?Number(E.sentAmount):Number(E.amount||0);return y+x},0),v=c.reduce((y,E)=>y+Number(ws.calculateTransactionProfit(E)||0),0),w=new Date(i).toISOString().slice(0,10);await zO.add({userId:e,reportDate:w,totalTransactions:d,totalAmount:Number(h.toFixed(2)),totalWithdrawn:Number(T.toFixed(2)),totalSent:Number(p.toFixed(2)),profit:Number(v.toFixed(2)),walletId:null}),console.log("    :",w)}catch(n){console.warn("      :",n)}}async resetUserWalletLimits(e){try{const n=await vo.getByMerchantId(e),r=new Date().getDate()===1;for(const s of n){const i=String((s==null?void 0:s.id)||"");if(i){try{await xp.resetDailyLimits(i)}catch{}if(r)try{await xp.resetMonthlyLimits(i)}catch{}}}console.log("     "+(r?" ":""))}catch(n){console.warn("    :",n)}}}const zA=new eK,ev=768;function tK(){const[t,e]=A.useState(void 0);return A.useEffect(()=>{const n=window.matchMedia(`(max-width: ${ev-1}px)`),r=()=>{e(window.innerWidth<ev)};return n.addEventListener("change",r),e(window.innerWidth<ev),()=>n.removeEventListener("change",r)},[]),!!t}function nK(){const[t,e]=A.useState("default"),[n,r]=A.useState(!1);return A.useEffect(()=>{try{const i=localStorage.getItem("notificationPermission");(i==="granted"||i==="denied"||i==="default")&&e(i);const o=localStorage.getItem("notificationConsentRequested")==="true";r(o)}catch{}},[]),{permission:t,hasRequested:n,requestConsent:async()=>{if(typeof window<"u"&&"Notification"in window){const i=await Notification.requestPermission();e(i);try{localStorage.setItem("notificationPermission",i),localStorage.setItem("notificationConsentRequested","true"),r(!0)}catch{}return i}return"unsupported"}}}const i2=A.createContext(void 0);function rK({children:t}){const{profile:e,user:n,loading:r}=ml(),[s,i]=A.useState(null),[o,a]=A.useState(null),[l,c]=A.useState(!0);A.useEffect(()=>{if(!r&&e){const h=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";let f=null;try{f=localStorage.getItem(h)||null}catch{}i(f||e.shopId),a((e==null?void 0:e.shopName)||(n==null?void 0:n.displayName)||""),c(!1)}else r||c(!1)},[e,r]),A.useEffect(()=>{const h=()=>{const m=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";try{const T=localStorage.getItem(m);i(T||((e==null?void 0:e.shopId)??null))}catch{}};window.addEventListener("selectedShopIdChanged",h);const f=m=>{const T=e!=null&&e.userId?`selectedShopId_${e.userId}`:n!=null&&n.uid?`selectedShopId_${n==null?void 0:n.uid}`:"selectedShopId";if(!(!m.key||m.key!==T))try{const p=localStorage.getItem(T);i(p||((e==null?void 0:e.shopId)??null))}catch{}};return window.addEventListener("storage",f),()=>{window.removeEventListener("selectedShopIdChanged",h),window.removeEventListener("storage",f)}},[e==null?void 0:e.userId,n==null?void 0:n.uid,e==null?void 0:e.shopId]);const d={shopId:s,shopName:o,loading:l};return _.jsx(i2.Provider,{value:d,children:t})}function sK(){const t=A.useContext(i2);return t===void 0?{shopId:null,shopName:null,loading:!1}:t}var tv="focusScope.autoFocusOnMount",nv="focusScope.autoFocusOnUnmount",WA={bubbles:!1,cancelable:!0},iK="FocusScope",o2=A.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=A.useState(null),c=Xs(s),d=Xs(i),h=A.useRef(null),f=Wn(e,p=>l(p)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let p=function(E){if(m.paused||!a)return;const x=E.target;a.contains(x)?h.current=x:eo(h.current,{select:!0})},v=function(E){if(m.paused||!a)return;const x=E.relatedTarget;x!==null&&(a.contains(x)||eo(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const C of E)C.removedNodes.length>0&&eo(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const y=new MutationObserver(w);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),y.disconnect()}}},[r,a,m.paused]),A.useEffect(()=>{if(a){HA.add(m);const p=document.activeElement;if(!a.contains(p)){const w=new CustomEvent(tv,WA);a.addEventListener(tv,c),a.dispatchEvent(w),w.defaultPrevented||(oK(dK(a2(a)),{select:!0}),document.activeElement===p&&eo(a))}return()=>{a.removeEventListener(tv,c),setTimeout(()=>{const w=new CustomEvent(nv,WA);a.addEventListener(nv,d),a.dispatchEvent(w),w.defaultPrevented||eo(p??document.body,{select:!0}),a.removeEventListener(nv,d),HA.remove(m)},0)}}},[a,c,d,m]);const T=A.useCallback(p=>{if(!n&&!r||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(v&&w){const y=p.currentTarget,[E,x]=aK(y);E&&x?!p.shiftKey&&w===x?(p.preventDefault(),n&&eo(E,{select:!0})):p.shiftKey&&w===E&&(p.preventDefault(),n&&eo(x,{select:!0})):w===y&&p.preventDefault()}},[n,r,m.paused]);return _.jsx(en.div,{tabIndex:-1,...o,ref:f,onKeyDown:T})});o2.displayName=iK;function oK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(eo(r,{select:e}),document.activeElement!==n)return}function aK(t){const e=a2(t),n=qA(e,t),r=qA(e.reverse(),t);return[n,r]}function a2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function qA(t,e){for(const n of t)if(!lK(n,{upTo:e}))return n}function lK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cK(t){return t instanceof HTMLInputElement&&"select"in t}function eo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&cK(t)&&e&&t.select()}}var HA=uK();function uK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=KA(t,e),t.unshift(e)},remove(e){var n;t=KA(t,e),(n=t[0])==null||n.resume()}}}function KA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function dK(t){return t.filter(e=>e.tagName!=="A")}var rv=0;function hK(){A.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??GA()),document.body.insertAdjacentElement("beforeend",t[1]??GA()),rv++,()=>{rv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),rv--}},[])}function GA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var zs=function(){return zs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zs.apply(this,arguments)};function l2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fK(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var am="right-scroll-bar-position",lm="width-before-scroll-bar",mK="with-scroll-bars-hidden",pK="--removed-body-scroll-bar-size";function sv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function gK(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var yK=typeof window<"u"?A.useLayoutEffect:A.useEffect,QA=new WeakMap;function vK(t,e){var n=gK(null,function(r){return t.forEach(function(s){return sv(s,r)})});return yK(function(){var r=QA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||sv(a,null)}),i.forEach(function(a){s.has(a)||sv(a,o)})}QA.set(n,t)},[t]),n}function wK(t){return t}function _K(t,e){e===void 0&&(e=wK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function EK(t){t===void 0&&(t={});var e=_K(null);return e.options=zs({async:!0,ssr:!1},t),e}var c2=function(t){var e=t.sideCar,n=l2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,zs({},n))};c2.isSideCarExport=!0;function TK(t,e){return t.useMedium(e),c2}var u2=EK(),iv=function(){},Vg=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:iv,onWheelCapture:iv,onTouchMoveCapture:iv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,T=t.noIsolation,p=t.inert,v=t.allowPinchZoom,w=t.as,y=w===void 0?"div":w,E=t.gapMode,x=l2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,L=vK([n,e]),S=zs(zs({},x),s);return A.createElement(A.Fragment,null,d&&A.createElement(C,{sideCar:u2,removeScrollBar:c,shards:h,noRelative:m,noIsolation:T,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:E}),o?A.cloneElement(A.Children.only(a),zs(zs({},S),{ref:L})):A.createElement(y,zs({},S,{className:l,ref:L}),a))});Vg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vg.classNames={fullWidth:lm,zeroRight:am};var IK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=IK();return e&&t.setAttribute("nonce",e),t}function bK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function AK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=SK())&&(bK(e,n),AK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},RK=function(){var t=xK();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},d2=function(){var t=RK(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},PK={left:0,top:0,right:0,gap:0},ov=function(t){return parseInt(t||"",10)||0},CK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[ov(n),ov(r),ov(s)]},DK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return PK;var e=CK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},kK=d2(),sc="data-scroll-locked",NK=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(mK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(sc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(am,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(lm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(am," .").concat(am,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(lm," .").concat(lm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(sc,`] {
    `).concat(pK,": ").concat(a,`px;
  }
`)},YA=function(){var t=parseInt(document.body.getAttribute(sc)||"0",10);return isFinite(t)?t:0},OK=function(){A.useEffect(function(){return document.body.setAttribute(sc,(YA()+1).toString()),function(){var t=YA()-1;t<=0?document.body.removeAttribute(sc):document.body.setAttribute(sc,t.toString())}},[])},LK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;OK();var i=A.useMemo(function(){return DK(s)},[s]);return A.createElement(kK,{styles:NK(i,!e,s,n?"":"!important")})},c_=!1;if(typeof window<"u")try{var bf=Object.defineProperty({},"passive",{get:function(){return c_=!0,!0}});window.addEventListener("test",bf,bf),window.removeEventListener("test",bf,bf)}catch{c_=!1}var xl=c_?{passive:!1}:!1,VK=function(t){return t.tagName==="TEXTAREA"},h2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!VK(t)&&n[e]==="visible")},MK=function(t){return h2(t,"overflowY")},FK=function(t){return h2(t,"overflowX")},JA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=f2(t,r);if(s){var i=m2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},UK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},jK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},f2=function(t,e){return t==="v"?MK(e):FK(e)},m2=function(t,e){return t==="v"?UK(e):jK(e)},$K=function(t,e){return t==="h"&&e==="rtl"?-1:1},BK=function(t,e,n,r,s){var i=$K(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var m=m2(t,a),T=m[0],p=m[1],v=m[2],w=p-v-i*T;(T||w)&&f2(t,a)&&(h+=w,f+=T);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},Af=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},XA=function(t){return[t.deltaX,t.deltaY]},ZA=function(t){return t&&"current"in t?t.current:t},zK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},WK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},qK=0,Rl=[];function HK(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),s=A.useState(qK++)[0],i=A.useState(d2)[0],o=A.useRef(t);A.useEffect(function(){o.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=fK([t.lockRef.current],(t.shards||[]).map(ZA),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=A.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var w=Af(p),y=n.current,E="deltaX"in p?p.deltaX:y[0]-w[0],x="deltaY"in p?p.deltaY:y[1]-w[1],C,L=p.target,S=Math.abs(E)>Math.abs(x)?"h":"v";if("touches"in p&&S==="h"&&L.type==="range")return!1;var b=JA(S,L);if(!b)return!0;if(b?C=S:(C=S==="v"?"h":"v",b=JA(S,L)),!b)return!1;if(!r.current&&"changedTouches"in p&&(E||x)&&(r.current=C),!C)return!0;var R=r.current||C;return BK(R,v,p,R==="h"?E:x)},[]),l=A.useCallback(function(p){var v=p;if(!(!Rl.length||Rl[Rl.length-1]!==i)){var w="deltaY"in v?XA(v):Af(v),y=e.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&zK(C.delta,w)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var E=(o.current.shards||[]).map(ZA).filter(Boolean).filter(function(C){return C.contains(v.target)}),x=E.length>0?a(v,E[0]):!o.current.noIsolation;x&&v.cancelable&&v.preventDefault()}}},[]),c=A.useCallback(function(p,v,w,y){var E={name:p,delta:v,target:w,should:y,shadowParent:KK(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(x){return x!==E})},1)},[]),d=A.useCallback(function(p){n.current=Af(p),r.current=void 0},[]),h=A.useCallback(function(p){c(p.type,XA(p),p.target,a(p,t.lockRef.current))},[]),f=A.useCallback(function(p){c(p.type,Af(p),p.target,a(p,t.lockRef.current))},[]);A.useEffect(function(){return Rl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,xl),document.addEventListener("touchmove",l,xl),document.addEventListener("touchstart",d,xl),function(){Rl=Rl.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,xl),document.removeEventListener("touchmove",l,xl),document.removeEventListener("touchstart",d,xl)}},[]);var m=t.removeScrollBar,T=t.inert;return A.createElement(A.Fragment,null,T?A.createElement(i,{styles:WK(s)}):null,m?A.createElement(LK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function KK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const GK=TK(u2,HK);var p2=A.forwardRef(function(t,e){return A.createElement(Vg,zs({},t,{ref:e,sideCar:GK}))});p2.classNames=Vg.classNames;var QK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Pl=new WeakMap,xf=new WeakMap,Rf={},av=0,g2=function(t){return t&&(t.host||g2(t.parentNode))},YK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=g2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},JK=function(t,e,n,r){var s=YK(e,Array.isArray(t)?t:[t]);Rf[n]||(Rf[n]=new WeakMap);var i=Rf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),T=m!==null&&m!=="false",p=(Pl.get(f)||0)+1,v=(i.get(f)||0)+1;Pl.set(f,p),i.set(f,v),o.push(f),p===1&&T&&xf.set(f,!0),v===1&&f.setAttribute(n,"true"),T||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),a.clear(),av++,function(){o.forEach(function(h){var f=Pl.get(h)-1,m=i.get(h)-1;Pl.set(h,f),i.set(h,m),f||(xf.has(h)||h.removeAttribute(r),xf.delete(h)),m||h.removeAttribute(n)}),av--,av||(Pl=new WeakMap,Pl=new WeakMap,xf=new WeakMap,Rf={})}},XK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=QK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),JK(r,s,n,"aria-hidden")):function(){return null}},Mg="Dialog",[y2,XG]=Hc(Mg),[ZK,ks]=y2(Mg),v2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=A.useRef(null),l=A.useRef(null),[c,d]=c0({prop:r,defaultProp:s??!1,onChange:i,caller:Mg});return _.jsx(ZK,{scope:e,triggerRef:a,contentRef:l,contentId:Ty(),titleId:Ty(),descriptionId:Ty(),open:c,onOpenChange:d,onOpenToggle:A.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};v2.displayName=Mg;var w2="DialogTrigger",_2=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(w2,n),i=Wn(e,s.triggerRef);return _.jsx(en.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":nT(s.open),...r,ref:i,onClick:Ct(t.onClick,s.onOpenToggle)})});_2.displayName=w2;var eT="DialogPortal",[eG,E2]=y2(eT,{forceMount:void 0}),T2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ks(eT,e);return _.jsx(eG,{scope:e,forceMount:n,children:A.Children.map(r,o=>_.jsx(dl,{present:n||i.open,children:_.jsx(l0,{asChild:!0,container:s,children:o})}))})};T2.displayName=eT;var Rp="DialogOverlay",I2=A.forwardRef((t,e)=>{const n=E2(Rp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ks(Rp,t.__scopeDialog);return i.modal?_.jsx(dl,{present:r||i.open,children:_.jsx(nG,{...s,ref:e})}):null});I2.displayName=Rp;var tG=Fd("DialogOverlay.RemoveScroll"),nG=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(Rp,n);return _.jsx(p2,{as:tG,allowPinchZoom:!0,shards:[s.contentRef],children:_.jsx(en.div,{"data-state":nT(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ll="DialogContent",S2=A.forwardRef((t,e)=>{const n=E2(ll,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ks(ll,t.__scopeDialog);return _.jsx(dl,{present:r||i.open,children:i.modal?_.jsx(rG,{...s,ref:e}):_.jsx(sG,{...s,ref:e})})});S2.displayName=ll;var rG=A.forwardRef((t,e)=>{const n=ks(ll,t.__scopeDialog),r=A.useRef(null),s=Wn(e,n.contentRef,r);return A.useEffect(()=>{const i=r.current;if(i)return XK(i)},[]),_.jsx(b2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ct(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ct(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Ct(t.onFocusOutside,i=>i.preventDefault())})}),sG=A.forwardRef((t,e)=>{const n=ks(ll,t.__scopeDialog),r=A.useRef(!1),s=A.useRef(!1);return _.jsx(b2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),b2=A.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ks(ll,n),l=A.useRef(null),c=Wn(e,l);return hK(),_.jsxs(_.Fragment,{children:[_.jsx(o2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:_.jsx(qp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":nT(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(iG,{titleId:a.titleId}),_.jsx(aG,{contentRef:l,descriptionId:a.descriptionId})]})]})}),tT="DialogTitle",A2=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(tT,n);return _.jsx(en.h2,{id:s.titleId,...r,ref:e})});A2.displayName=tT;var x2="DialogDescription",R2=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(x2,n);return _.jsx(en.p,{id:s.descriptionId,...r,ref:e})});R2.displayName=x2;var P2="DialogClose",C2=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(P2,n);return _.jsx(en.button,{type:"button",...r,ref:e,onClick:Ct(t.onClick,()=>s.onOpenChange(!1))})});C2.displayName=P2;function nT(t){return t?"open":"closed"}var D2="DialogTitleWarning",[ZG,k2]=OM(D2,{contentName:ll,titleName:tT,docsSlug:"dialog"}),iG=({titleId:t})=>{const e=k2(D2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},oG="DialogDescriptionWarning",aG=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${k2(oG).contentName}}.`;return A.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},lG=v2,cG=_2,uG=T2,N2=I2,O2=S2,L2=A2,V2=R2,dG=C2;const lv=lG,eQ=cG,hG=uG,M2=A.forwardRef(({className:t,...e},n)=>_.jsx(N2,{ref:n,className:qn("fixed inset-0 z-50 bg-black/30 dark:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 radix-dialog-overlay",t),...e}));M2.displayName=N2.displayName;const cm=A.forwardRef(({className:t,children:e,hideClose:n,disableOutsideClose:r,disableEscClose:s,...i},o)=>_.jsxs(hG,{children:[_.jsx(M2,{}),_.jsxs(O2,{ref:o,className:qn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-md rounded-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] radix-dialog-content",t),onInteractOutside:a=>{r&&a.preventDefault()},onEscapeKeyDown:a=>{s&&a.preventDefault()},...i,children:[e,!n&&_.jsxs(dG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[_.jsx(m0,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cm.displayName=O2.displayName;const um=({className:t,...e})=>_.jsx("div",{className:qn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});um.displayName="DialogHeader";const fG=({className:t,...e})=>_.jsx("div",{className:qn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});fG.displayName="DialogFooter";const dm=A.forwardRef(({className:t,...e},n)=>_.jsx(L2,{ref:n,className:qn("text-lg font-semibold leading-none tracking-tight",t),...e}));dm.displayName=L2.displayName;const u_=A.forwardRef(({className:t,...e},n)=>_.jsx(V2,{ref:n,className:qn("text-sm text-muted-foreground",t),...e}));u_.displayName=V2.displayName;const mG={},ex=U.lazy(()=>ee(()=>import("./Index-DgHWdedI.js"),[],import.meta.url)),Pf=U.lazy(()=>ee(()=>import("./LandingPage-C0Ms1HDx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),tx=U.lazy(()=>ee(()=>import("./SubscriptionsPage-D5UjXYSG.js"),__vite__mapDeps([11,1,4,12]),import.meta.url)),nx=U.lazy(()=>ee(()=>import("./AuthPage-CamUNh6Z.js"),__vite__mapDeps([13,1,2,3,8]),import.meta.url)),Cf=U.lazy(()=>ee(()=>import("./TopUpPage-Bhfp-cL_.js"),__vite__mapDeps([14,1,15]),import.meta.url)),rx=U.lazy(()=>ee(()=>import("./AdminTopupsPage-BjXxQtRZ.js"),__vite__mapDeps([16,15]),import.meta.url)),sx=U.lazy(()=>ee(()=>import("./AdminNotificationsPage-CkQwTuHu.js"),__vite__mapDeps([17,1,18,19,20]),import.meta.url)),Df=U.lazy(()=>ee(()=>import("./UserRegisterPage-SxEfxiD0.js"),__vite__mapDeps([21,1,18,22,23,24,25,26]),import.meta.url)),ix=U.lazy(()=>ee(()=>import("./UserAccountSetupPage-4HMF_svJ.js"),__vite__mapDeps([27,1,18,22,26,25,10]),import.meta.url)),ox=U.lazy(()=>ee(()=>import("./ForgotPasswordCodePage-CSVBMtOv.js"),[],import.meta.url)),ax=U.lazy(()=>ee(()=>import("./DashboardLoginPage-CrXgcu4P.js"),__vite__mapDeps([28,1]),import.meta.url)),lx=U.lazy(()=>ee(()=>import("./ProtectedDashboard-CxuS43d0.js"),__vite__mapDeps([29,1,15,30,18,31,32,33,23]),import.meta.url)),hm=U.lazy(()=>ee(()=>import("./ProtectedUserDashboard-BMtPDPDM.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url)),cx=U.lazy(()=>ee(()=>import("./MerchantDashboard-BQ8z7jds.js"),__vite__mapDeps([36,37,15,38,39,40,1,41,18,42]),import.meta.url)),ux=U.lazy(()=>ee(()=>import("./PendingApprovalPage-B7t4NmQj.js"),__vite__mapDeps([43,44]),import.meta.url)),dx=U.lazy(()=>ee(()=>import("./AdminLogin-C1mLgL54.js"),[],import.meta.url)),hx=U.lazy(()=>ee(()=>import("./ProtectedAdminDashboard-P329-KLC.js"),__vite__mapDeps([45,12,46,37,15,38,18,30,31,47,1,19,22,39,48,4,44,25,49,50,35,9,7,3,8,10,51]),import.meta.url)),fx=U.lazy(()=>ee(()=>import("./AuthTestPage-C0akQJxb.js"),__vite__mapDeps([52,1,18]),import.meta.url)),mx=U.lazy(()=>ee(()=>import("./ProfileSettingsPage-CJNkg_vg.js"),__vite__mapDeps([53,1,18,47,54,30,31,42,5,49,7,44]),import.meta.url)),px=U.lazy(()=>ee(()=>import("./TransactionsPage-BwbUtB_c.js"),__vite__mapDeps([55,1,15,39,38,56,48,30,18,31,4,41,10,8,32,33,5,51]),import.meta.url)),gx=U.lazy(()=>ee(()=>import("./WalletAdditionPage-D55PrPkN.js"),__vite__mapDeps([57,1,18,15,5,23,25,31]),import.meta.url)),yx=U.lazy(()=>ee(()=>import("./ReferralsPage-CzlnDHY6.js"),__vite__mapDeps([58,1,39,22,24,20,10,50,51]),import.meta.url)),vx=U.lazy(()=>ee(()=>import("./CPanelPage-BBsKHjJZ.js"),__vite__mapDeps([59,1,18]),import.meta.url)),wx=U.lazy(()=>ee(()=>import("./CPanelLoginPage-wXsr_quw.js"),__vite__mapDeps([60,18,1]),import.meta.url)),_x=U.lazy(()=>ee(()=>import("./NotFound-CHsi-8IL.js"),[],import.meta.url)),Ex=U.lazy(()=>ee(()=>import("./PrivacyPolicyPage-CPKN92EG.js"),[],import.meta.url)),F2=new a6({defaultOptions:{queries:{gcTime:3e5}}});if(typeof window<"u")try{const t=f6({storage:window.localStorage,key:"cashylink:rq-cache",throttleTime:1e3});h6({queryClient:F2,persister:t,maxAge:24*60*60*1e3})}catch{}const pG=()=>{if(!((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"))return null;const e=()=>{try{window.location.reload()}catch{}};return _.jsx("div",{className:"fixed top-2 right-2 z-[2000] flex items-center gap-2",style:{pointerEvents:"auto"},children:_.jsx("button",{type:"button","aria-label":"",title:" ",onClick:e,className:"inline-flex items-center justify-center w-9 h-9 rounded-md bg-transparent text-blue-600 hover:bg-blue-500/10 focus:outline-none dark:text-blue-400 dark:hover:bg-blue-400/10",children:_.jsx(f0,{className:"w-5 h-5"})})})},Tx=()=>{const t=ri(),{user:e,loading:n}=ml(),r=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",s=t.pathname.startsWith("/user/dashboard"),i=r&&t.pathname==="/",o=!!e&&(s||i);return n?null:o?_.jsx(SH,{}):null},Ix=()=>{var Nr;const t=tK(),e=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",{profile:n,user:r}=ml(),{shopId:s}=sK(),o=ri().pathname.startsWith("/user/dashboard"),a=Jc(),{toast:l}=a0(),[c,d]=U.useState(!1),[h,f]=U.useState(null),[m,T]=U.useState(!1),[p,v]=U.useState(null),[w,y]=U.useState(!1),[E,x]=U.useState(""),[C,L]=U.useState(""),[S,b]=U.useState(null),[R,k]=U.useState(null),P=U.useRef(null),O=U.useRef(null),D=U.useRef(!1),j=U.useRef(null),oe=U.useRef(""),ye=U.useRef(""),_e=U.useRef(()=>{try{const J=localStorage.getItem("sms_suppressed_ids")||"[]",$=Array.isArray(JSON.parse(J))?JSON.parse(J):[];return new Set($.map(H=>String(H||"")))}catch{return new Set}}),[W,z]=U.useState(!1),K=U.useRef(n);U.useEffect(()=>{K.current=n},[n]),nK(),U.useEffect(()=>{const J=$=>{$.detail&&typeof $.detail.enabled=="boolean"&&!$.detail.enabled&&r!=null&&r.uid&&l({title:"  ",description:"        ",action:_.jsx(qP,{altText:"",onClick:()=>{try{window.location.href="cashy://openNotificationSettings"}catch{}},children:""}),duration:1e4})};if(window.addEventListener("notificationListenerStatus",J),r!=null&&r.uid&&e){const $=setTimeout(()=>{try{window.location.href="cashy://checkNotificationStatus"}catch{}},2e3);return()=>{window.removeEventListener("notificationListenerStatus",J),clearTimeout($)}}return()=>window.removeEventListener("notificationListenerStatus",J)},[r==null?void 0:r.uid,l,e]);const[Ae,pe]=U.useState(!1),[V,we]=U.useState(null),[Le,at]=U.useState(""),[be,Fe]=U.useState(!1),[je,qt]=U.useState(!1),[nn,En]=U.useState(""),[gn,Kn]=U.useState(""),[Dr,Ve]=U.useState(!1),[Pn,cs]=U.useState(0),[Nt,rn]=U.useState(!1),[yr,$i]=U.useState(""),[vr,ta]=U.useState("");U.useEffect(()=>{try{const J=(r==null?void 0:r.uid)||"default",$=localStorage.getItem(`sim1Number_${J}`)??localStorage.getItem("sim1Number")??"",H=localStorage.getItem(`sim2Number_${J}`)??localStorage.getItem("sim2Number")??"";$i($),ta(H),oe.current=$,ye.current=H}catch{}},[r==null?void 0:r.uid]);const Ns=async(J,$)=>{if(!(!J||!V))try{const{resolveWalletBySimOrSlot:H,merchantWalletService:te,detectWalletFromSim:se}=await ee(async()=>{const{resolveWalletBySimOrSlot:X,merchantWalletService:ge,detectWalletFromSim:Pe}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:X,merchantWalletService:ge,detectWalletFromSim:Pe}},void 0,import.meta.url),ne=(r==null?void 0:r.uid)||"";we(X=>X?{...X,simNumber:J,simLabel:$}:null);let fe=await H({simNumbers:[J],userId:ne});if(!fe||!fe.walletId)try{const X=await te.getByMerchantId(ne),ge=localStorage.getItem(`wallets_${ne}`),Pe=ge?JSON.parse(ge):[],Y=(Array.isArray(Pe)?Pe:[]).map(ae=>({id:String((ae==null?void 0:ae.id)||""),phone:String((ae==null?void 0:ae.phone)||(ae==null?void 0:ae.msisdn)||""),isDefault:!!(ae!=null&&ae.isDefault)})),le=(Array.isArray(X)?X:[]).map(ae=>({id:String((ae==null?void 0:ae.id)||""),msisdn:String((ae==null?void 0:ae.msisdn)||""),isDefault:!!(ae!=null&&ae.isDefault)})),ue=[...Y,...le],ce=await se([J],ue);ce&&ce.walletId&&(fe={walletId:ce.walletId,msisdn:ce.msisdn})}catch{}if(fe&&fe.walletId){we(X=>X?{...X,walletMsisdn:fe.msisdn}:null),localStorage.setItem(`selectedWallet_${ne}`,fe.walletId);try{localStorage.setItem(`selectedWallet_${ne}_${s||""}`,fe.walletId)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:fe.walletId}}))}catch{}try{const{Preferences:X}=await ee(async()=>{const{Preferences:ge}=await Promise.resolve().then(()=>Jy);return{Preferences:ge}},void 0,import.meta.url);await X.set({key:"selected_wallet_id",value:fe.walletId})}catch{}}}catch{}},Fn=U.useCallback(()=>{try{localStorage.setItem("privacyPolicyAccepted","true")}catch{}rn(!1);try{a("/user/login")}catch{}},[a]);U.useEffect(()=>{try{!(localStorage.getItem("privacyPolicyAccepted")==="true")&&!r&&e&&rn(!0)}catch{!r&&e&&rn(!0)}},[r,e]);const kr=U.useCallback(()=>{try{const J=window.AudioContext||window.webkitAudioContext;if(!J)return;const $=new J,H=$.createOscillator(),te=$.createGain();H.type="sine",te.gain.setValueAtTime(0,$.currentTime),H.connect(te),te.connect($.destination);const se=$.currentTime;H.frequency.setValueAtTime(800,se),te.gain.linearRampToValueAtTime(.15,se+.02),H.start(se),H.frequency.exponentialRampToValueAtTime(1200,se+.08),te.gain.exponentialRampToValueAtTime(1e-5,se+.32),H.stop(se+.35)}catch{}},[]),sn=J=>{try{const $=String(J||"").replace(/[^0-9+]/g,"");if(!$)return"";if($.startsWith("+20")){const H=$.slice(3);return H.startsWith("1")?"0"+H:H}if($.startsWith("0020")){const H=$.slice(4);return H.startsWith("1")?"0"+H:H}if($.startsWith("20")){const H=$.slice(2);return H.startsWith("1")?"0"+H:H}return $.startsWith("0")?$:/^(10|11|12|15)/.test($)?"0"+$:$}catch{return""}},pl=J=>{try{const $=String(J||""),H=$.match(/(?:\s*\s*|\s*)\s*([0-9]+(?:[\.,][0-9]{1,2})?)/i);let te=H?parseFloat(String(H[1]).replace(",",".")):0;const se=$.match(/(?:\s*|(?:\s*)?|)\s*[:\-\s]*([\+\d]{10,14})/i);let ne=se?sn(se[1]):void 0;const fe=$.match(/(?:\s*(?:|)|\s*(?:|)|(?:|)|(?:\s*)?|)\s*[:\-\s]*([^\n:]+?)(?=\s*(?:||||transaction|ref|reference|$))/i),X=$.match(/(?:registered\s*(?:name|as)|from|sender|name)\s*[:\-]?\s*([A-Za-z][A-Za-z\s]+?)(?=\s*(?:balance|mobile|number|account|ref|transaction|$))/i),ge=fe?String(fe[1]).trim():X?String(X[1]).trim():void 0,Pe=$.match(/\s*(?:|||)\s*[:\-\s]*([0-9]{6,})/i),Y=$.match(/(?:ref(?:\.|erence)?\s*no\.?|reference)\s*[:\-\s]*([A-Za-z0-9\-]{6,})/i),le=$.match(/Ref:\s*([A-Za-z0-9\-]+)/i);if(!te||te<=0){const ce=$.match(/Received\s*EGP\s*([0-9.,]+)/i)||$.match(/Received\s*EGP([0-9.,]+)/i);ce&&(te=parseFloat(String(ce[1]).replace(/,/g,"")))}if(!ne){const ce=$.match(/from\s+([0-9+]+)/i);ce&&(ne=sn(ce[1]))}const ue=Pe?String(Pe[1]).trim():Y?String(Y[1]).trim():le?String(le[1]).trim():void 0;return{amount:te,sender:ne,senderName:ge,reference:ue}}catch{return{amount:0}}};U.useEffect(()=>{(async()=>{var J;try{if(!Ae||!V){Fe(!1);return}const{auth:$}=await ee(async()=>{const{auth:ne}=await Promise.resolve().then(()=>Qt);return{auth:ne}},void 0,import.meta.url),H=((J=$.currentUser)==null?void 0:J.uid)||"",te=H?`selectedWallet_${H}`:"selectedWallet_default",se=localStorage.getItem(te)||"";if(!se){Fe(!0);return}try{const{merchantWalletService:ne}=await ee(async()=>{const{merchantWalletService:ge}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:ge}},void 0,import.meta.url),fe=await ne.getById(se),X=fe&&fe.defaultWithdrawCommission!=null;Fe(!X)}catch{Fe(!0)}}catch{Fe(!0)}})()},[Ae,V]);const oi=async J=>{try{const{merchantWalletService:$,detectWalletFromSim:H}=await ee(async()=>{const{merchantWalletService:Y,detectWalletFromSim:le}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:Y,detectWalletFromSim:le}},void 0,import.meta.url),te=(r==null?void 0:r.uid)||"";if(!te)return;const se=`wallets_${te}`,ne=typeof localStorage<"u"?localStorage.getItem(se):null,fe=ne?JSON.parse(ne):[],X=await $.getByMerchantId(te),ge=[...(Array.isArray(fe)?fe:[]).map(Y=>({id:String((Y==null?void 0:Y.id)||""),phone:String((Y==null?void 0:Y.phone)||(Y==null?void 0:Y.msisdn)||""),isDefault:!!(Y!=null&&Y.isDefault)})),...(Array.isArray(X)?X:[]).map(Y=>({id:String((Y==null?void 0:Y.id)||""),msisdn:String((Y==null?void 0:Y.msisdn)||""),isDefault:!!(Y!=null&&Y.isDefault)}))],Pe=await H(J||[],ge);if(Pe&&Pe.walletId)try{localStorage.setItem(`selectedWallet_${te}`,Pe.walletId)}catch{}}catch{}};A.useEffect(()=>{const J=async $=>{var H;try{const te=($==null?void 0:$.detail)||{},se=String(te.text||"").trim(),ne=String(te.title||"").trim();if(!se)return;if(!/vodafone|vf\-?cash|||\s*\s*|\s*|instapay|received\s*egp|transaction/i.test(`${ne} ${se}`)){try{Zy(te,{toast:l})}catch{}return}const{auth:X}=await ee(async()=>{const{auth:$e}=await Promise.resolve().then(()=>Qt);return{auth:$e}},void 0,import.meta.url),ge=((H=X.currentUser)==null?void 0:H.uid)||"";let Pe=s||"";if(!ge){try{l({title:"  ",description:"   "})}catch{}return}if(!Pe)try{const{doc:$e,getDoc:de}=await ee(async()=>{const{doc:jt,getDoc:xt}=await Promise.resolve().then(()=>kn);return{doc:jt,getDoc:xt}},void 0,import.meta.url),{db:ct}=await ee(async()=>{const{db:jt}=await Promise.resolve().then(()=>Qt);return{db:jt}},void 0,import.meta.url),vt=await de($e(ct,"profiles",ge));if(vt.exists()){const jt=vt.data(),xt=String((jt==null?void 0:jt.shopId)||"").trim();xt&&(Pe=xt)}}catch{}let Y="",le="",ue=!1;try{const $e=ge||"default";Y=(localStorage.getItem(`sim1Number_${$e}`)??localStorage.getItem("sim1Number")??"").trim(),le=(localStorage.getItem(`sim2Number_${$e}`)??localStorage.getItem("sim2Number")??"").trim(),ue=(localStorage.getItem(`smsAutoRegisterEnabled_${$e}`)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"}catch{}try{const{Preferences:$e}=await ee(async()=>{const{Preferences:vt}=await Promise.resolve().then(()=>Jy);return{Preferences:vt}},void 0,import.meta.url),de=await $e.get({key:"sim1_number"}),ct=await $e.get({key:"sim2_number"});!Y&&(de!=null&&de.value)&&(Y=String(de.value).trim()),!le&&(ct!=null&&ct.value)&&(le=String(ct.value).trim()),!Y&&oe.current&&(Y=oe.current),!le&&ye.current&&(le=ye.current)}catch{}let ce=[];const ae=Array.isArray((($==null?void 0:$.detail)||{}).activeSimMsisdns)?$.detail.activeSimMsisdns.map($e=>String($e||"")):[];ae.length>0?ce=ae:ce=[Y,le].filter(Boolean);try{localStorage.setItem("lastActiveSimMsisdns",JSON.stringify(ce))}catch{}let Ce="";try{const $e=localStorage.getItem("lastSmsSimMsisdn")||"";$e&&ce.includes($e)&&(Ce=$e)}catch{}if(Ce||(Ce=ce[0]||""),Ce)try{localStorage.setItem("lastSmsSimMsisdn",Ce)}catch{}const{resolveWalletBySimOrSlot:st,bindSlotWalletMapping:It,merchantWalletService:St}=await ee(async()=>{const{resolveWalletBySimOrSlot:$e,bindSlotWalletMapping:de,merchantWalletService:ct}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:$e,bindSlotWalletMapping:de,merchantWalletService:ct}},void 0,import.meta.url),mt=ge;let qe=await st({simNumbers:ce,userId:mt});if(!qe&&ce.length>0){try{await oi(ce)}catch{}const $e=localStorage.getItem(`selectedWallet_${mt}`)||"";if($e)try{const de=await St.getById($e);qe={walletId:$e,msisdn:String((de==null?void 0:de.msisdn)||"")}}catch{}}if(qe&&qe.walletId){try{localStorage.setItem(`selectedWallet_${mt}`,qe.walletId)}catch{}try{It({userId:mt,walletId:qe.walletId,msisdn:qe.msisdn})}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:qe.walletId}}))}catch{}try{const $e=String(qe.msisdn||"").trim();$e&&(Ce=$e,localStorage.setItem("lastSmsSimMsisdn",$e))}catch{}}const Ot=pl(se),Ht=Number(Ot.amount||0);if(!Ht||Ht<=0){try{Zy(te,{toast:l})}catch{}return}const He=(qe==null?void 0:qe.msisdn)||await cv(ge),yt=Ot.reference||`VF-${Date.now()}`,Ze={amount:Ht,sender:String(Ot.sender||""),senderName:Ot.senderName,text:se,simNumber:Ce};if(ue)try{await ai({...Ze,reference:yt,walletMsisdn:He})}catch{}else{try{const{addDoc:$e,collection:de,serverTimestamp:ct}=await ee(async()=>{const{addDoc:wr,collection:pt,serverTimestamp:Tn}=await Promise.resolve().then(()=>kn);return{addDoc:wr,collection:pt,serverTimestamp:Tn}},void 0,import.meta.url),{db:vt}=await ee(async()=>{const{db:wr}=await Promise.resolve().then(()=>Qt);return{db:wr}},void 0,import.meta.url),jt=await $e(de(vt,"pendingSmsPopups"),{userId:ge,shopId:Pe,payload:{...Ze,reference:yt,walletMsisdn:He,sim1Number:Y,sim2Number:le},status:"pending",createdAt:ct()}),xt=/Received\s*EGP/i.test(String(se))?"InstaPay":"VF-Cash";we({...Ze,reference:yt,providerLabel:xt,walletMsisdn:He,popupId:jt.id})}catch{const $e=/Received\s*EGP/i.test(String(se))?"InstaPay":"VF-Cash";we({...Ze,reference:yt,providerLabel:$e,walletMsisdn:He})}pe(!0);try{kr()}catch{}}}catch{try{Zy(($==null?void 0:$.detail)||{},{toast:l})}catch{}}};try{window.addEventListener("vfNotificationReceived",J)}catch{}return()=>{try{window.removeEventListener("vfNotificationReceived",J)}catch{}}},[l,s]),A.useEffect(()=>{const J=async $=>{try{const H=($==null?void 0:$.detail)||{},te=String(H.text||"");if(!te||!((n==null?void 0:n.smsReadingEnabled)!==void 0?!!n.smsReadingEnabled:localStorage.getItem("smsReadingEnabled")==="true"))return;const ne=/Received\s*EGP/i.test(te),fe=yG(te,String(H.sender||H.msisdn||""));if(!ne&&!fe)return;const X=(r==null?void 0:r.uid)||"";if(!X)return;let ge=s||(n==null?void 0:n.shopId)||localStorage.getItem("shopId")||"";const Pe=K.current;let Y=(Pe==null?void 0:Pe.sim1Number)||"",le=(Pe==null?void 0:Pe.sim2Number)||"";Y||(Y=localStorage.getItem(`sim1Number_${X}`)||localStorage.getItem("sim1Number")||""),le||(le=localStorage.getItem(`sim2Number_${X}`)||localStorage.getItem("sim2Number")||""),!Y&&oe.current&&(Y=oe.current),!le&&ye.current&&(le=ye.current),Y=String(Y).trim(),le=String(le).trim();const ue=String(H.msisdn||H.sender||""),ce=sn(ue),ae=pl(te);let Ce=Number(ae.amount||0),st=ae.sender||ce||String(H.sender||""),It=ae.senderName,St=ae.reference||"";if(ne){const de=String(te).match(/Received\s*EGP\s*([0-9.,]+)/i);de&&(Ce=parseFloat(String(de[1]).replace(/,/g,"")));const ct=String(te).match(/from\s+([0-9+]+)/i);ct&&(st=sn(ct[1]));const vt=String(te).match(/Ref:\s*([A-Za-z0-9\-]+)/i);vt&&(St=String(vt[1]).trim())}if(!Ce||Ce<=0)return;let mt="",qe="";const Ot=[Y,le].filter(Boolean).map(de=>sn(de));if(ce&&Ot.includes(ce)&&(mt=ce,mt===sn(Y)?qe="SIM 1":mt===sn(le)&&(qe="SIM 2")),!qe){const de=H==null?void 0:H.slot,ct=de!=null?Number(de):-1;ct===0?(qe="SIM 1",mt=Y?sn(Y):""):ct===1&&(qe="SIM 2",mt=le?sn(le):"")}!qe&&mt&&(mt===sn(Y)?qe="SIM 1":mt===sn(le)&&(qe="SIM 2"));const Ht=ne?"InstaPay":"VF-Cash",He={amount:Ce,sender:st,senderName:It,text:te,simNumber:mt,simLabel:qe},yt=X?`smsAutoRegisterEnabled_${X}`:"smsAutoRegisterEnabled",$e=(localStorage.getItem(yt)??localStorage.getItem("smsAutoRegisterEnabled"))==="true"||(n==null?void 0:n.smsAutoRegisterEnabled)===!0;if(!$e){we({...He,reference:St,providerLabel:Ht,walletMsisdn:""}),pe(!0);try{kr()}catch{}}(async()=>{try{const{resolveWalletBySimOrSlot:de,bindSlotWalletMapping:ct,merchantWalletService:vt}=await ee(async()=>{const{resolveWalletBySimOrSlot:pt,bindSlotWalletMapping:Tn,merchantWalletService:xe}=await Promise.resolve().then(()=>Ea);return{resolveWalletBySimOrSlot:pt,bindSlotWalletMapping:Tn,merchantWalletService:xe}},void 0,import.meta.url);let jt=Array.isArray(H.activeSimMsisdns)&&H.activeSimMsisdns.length>0?H.activeSimMsisdns.map(pt=>sn(String(pt||""))):ce?[ce]:[];jt.length===0&&(jt=[sn(Y),sn(le)].filter(Boolean));let xt=await de({simNumbers:jt,subId:Number((H==null?void 0:H.subId)||-1),slotIndex:Number((H==null?void 0:H.slot)||-1),userId:X});if(!xt&&jt.length>0){try{await oi(jt)}catch{}const pt=localStorage.getItem(`selectedWallet_${X}`)||"";if(pt)try{const Tn=await vt.getById(pt);xt={walletId:pt,msisdn:String((Tn==null?void 0:Tn.msisdn)||"")}}catch{}}if(xt&&xt.walletId){try{localStorage.setItem(`selectedWallet_${X}`,xt.walletId)}catch{}try{ct({userId:X,subId:Number((H==null?void 0:H.subId)||-1),slotIndex:Number((H==null?void 0:H.slot)||-1),walletId:xt.walletId,msisdn:xt.msisdn})}catch{}}const wr=(xt==null?void 0:xt.msisdn)||(X?await cv(X):"");if(we(pt=>pt?{...pt,walletMsisdn:wr}:null),$e)try{await ai({...He,reference:St,walletMsisdn:wr})}catch{}else try{const{addDoc:pt,collection:Tn,serverTimestamp:xe}=await ee(async()=>{const{addDoc:ut,collection:wt,serverTimestamp:Rt}=await Promise.resolve().then(()=>kn);return{addDoc:ut,collection:wt,serverTimestamp:Rt}},void 0,import.meta.url),{db:Ge}=await ee(async()=>{const{db:ut}=await Promise.resolve().then(()=>Qt);return{db:ut}},void 0,import.meta.url),Kt=await pt(Tn(Ge,"pendingSmsPopups"),{userId:X,shopId:ge,payload:{...He,reference:St,walletMsisdn:wr,sim1Number:Y,sim2Number:le},status:"pending",createdAt:xe()});we(ut=>ut?{...ut,popupId:Kt.id}:null)}catch{}}catch(de){console.error("Background SMS processing error",de)}})()}catch(H){console.error("SMS Handler Error",H)}};try{window.addEventListener("mobileSmsReceived",J)}catch{}return()=>{try{window.removeEventListener("mobileSmsReceived",J)}catch{}}},[l,s,n,r]),A.useEffect(()=>{},[l,s]),A.useEffect(()=>{},[l,s]);const ai=async J=>{var $,H,te,se,ne,fe,X;try{const ge=J||V;if(!ge)return;const{amount:Pe,sender:Y,text:le,simNumber:ue,senderName:ce}=ge,ae=String(le||"");let Ce=Number(Pe||0);const st=typeof(J==null?void 0:J.deferredMode)=="boolean"?J.deferredMode:je,It=(J==null?void 0:J.debtorName)??nn,St=(J==null?void 0:J.debtorNote)??gn;try{pe(!1)}catch{}try{}catch{}const mt=/Received\s*EGP/i.test(ae)?"instapay":"vodafone_cash";if(!Ce||Ce<=0){const xe=ae.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i);if(xe&&(Ce=parseFloat(String(xe[1]).replace(",","."))),!Ce||Ce<=0){const Ge=ae.match(/Received\s*EGP\s*([0-9.,]+)/i)||ae.match(/Received\s*EGP([0-9.,]+)/i);Ge&&(Ce=parseFloat(String(Ge[1]).replace(/,/g,"")))}}let qe=String(Y||"").trim();if(!qe){const xe=ae.match(/\s+\s+(\d+)/i);qe=xe?sn(xe[1]):""}let Ot=String((ge==null?void 0:ge.reference)||"").trim();if(!Ot){const xe=ae.match(/\s*\s*([\d\.]+)/i);Ot=xe?String(xe[1]).trim():String(Date.now())}if(!Ce||Ce<=0){try{l({title:"      ",variant:"destructive"})}catch{}return}const{auth:Ht}=await ee(async()=>{const{auth:xe}=await Promise.resolve().then(()=>Qt);return{auth:xe}},void 0,import.meta.url),He=(($=Ht.currentUser)==null?void 0:$.uid)||"";let yt=s||"";if(!He){try{l({title:"  ",description:"   "})}catch{}return}if(!yt)try{const{doc:xe,getDoc:Ge}=await ee(async()=>{const{doc:wt,getDoc:Rt}=await Promise.resolve().then(()=>kn);return{doc:wt,getDoc:Rt}},void 0,import.meta.url),{db:Kt}=await ee(async()=>{const{db:wt}=await Promise.resolve().then(()=>Qt);return{db:wt}},void 0,import.meta.url),ut=await Ge(xe(Kt,"profiles",He));if(ut.exists()){const wt=ut.data(),Rt=String((wt==null?void 0:wt.shopId)||"").trim();Rt&&(yt=Rt)}}catch{}if(!yt){try{l({title:"  ",description:"   "})}catch{}return}let Ze=await vG(He);if(!Ze)try{const{doc:xe,getDoc:Ge}=await ee(async()=>{const{doc:De,getDoc:Or}=await Promise.resolve().then(()=>kn);return{doc:De,getDoc:Or}},void 0,import.meta.url),{db:Kt}=await ee(async()=>{const{db:De}=await Promise.resolve().then(()=>Qt);return{db:De}},void 0,import.meta.url);let ut="",wt="";try{const De=await Ge(xe(Kt,"profiles",He));if(De.exists()){const Or=De.data();ut=String((Or==null?void 0:Or.sim1Number)||"").trim(),wt=String((Or==null?void 0:Or.sim2Number)||"").trim()}}catch{}const{detectWalletFromSim:Rt}=await ee(async()=>{const{detectWalletFromSim:De}=await Promise.resolve().then(()=>Ea);return{detectWalletFromSim:De}},void 0,import.meta.url),{merchantWalletService:In}=await ee(async()=>{const{merchantWalletService:De}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:De}},void 0,import.meta.url),Un=`wallets_${He}`,Cn=localStorage.getItem(Un),or=Cn?JSON.parse(Cn):[],ar=await In.getByMerchantId(He),_r=(Array.isArray(or)?or:[]).map(De=>({id:String((De==null?void 0:De.id)||""),phone:String((De==null?void 0:De.phone)||(De==null?void 0:De.msisdn)||""),isDefault:!!(De!=null&&De.isDefault)})),Gt=(Array.isArray(ar)?ar:[]).map(De=>({id:String((De==null?void 0:De.id)||""),msisdn:String((De==null?void 0:De.msisdn)||""),isDefault:!!(De!=null&&De.isDefault)})),yn=[..._r,...Gt],us=ue||String(localStorage.getItem("lastSmsSimMsisdn")||"");let li=(us?[us]:[]).filter(Boolean);li.length===0&&(li=[ut,wt].filter(Boolean));const ra=await Rt(li,yn);if(ra&&ra.walletId){Ze=ra.walletId;try{localStorage.setItem(`selectedWallet_${He}`,Ze)}catch{}}}catch{}if(!Ze){try{l({title:"   ",description:"       "})}catch{}return}try{const xe=He;try{localStorage.setItem(`selectedWallet_${xe}`,Ze)}catch{}try{localStorage.setItem(`selectedWallet_${xe}_${yt}`,Ze)}catch{}try{window.dispatchEvent(new CustomEvent("walletSelection:update",{detail:{walletId:Ze}}))}catch{}try{const{Preferences:Ge}=await ee(async()=>{const{Preferences:Kt}=await Promise.resolve().then(()=>Jy);return{Preferences:Kt}},void 0,import.meta.url);await Ge.set({key:"selected_wallet_id",value:Ze}),await Ge.set({key:"current_user_id",value:xe})}catch{}}catch{}const{recordAutoTransaction:$e,userDataService:de}=await ee(async()=>{const{recordAutoTransaction:xe,userDataService:Ge}=await Promise.resolve().then(()=>Mu);return{recordAutoTransaction:xe,userDataService:Ge}},void 0,import.meta.url),ct=Le&&Le.trim()!==""?Math.max(0,parseFloat(Le)):null;let vt=0;if(ct!=null)vt=ct;else try{const{merchantWalletService:xe}=await ee(async()=>{const{merchantWalletService:ut}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:ut}},void 0,import.meta.url),Ge=await xe.getById(String(Ze)),Kt=Ge&&Ge.defaultWithdrawCommission;if(Kt!=null)vt=Math.round((Number(Kt)||0)*Number(Ce)/1e3*100)/100;else{const{calculateCommission:ut}=await ee(async()=>{const{calculateCommission:wt}=await Promise.resolve().then(()=>Oa);return{calculateCommission:wt}},void 0,import.meta.url);vt=ut(Number(Ce),"receive")}}catch{const{calculateCommission:xe}=await ee(async()=>{const{calculateCommission:Ge}=await Promise.resolve().then(()=>Oa);return{calculateCommission:Ge}},void 0,import.meta.url);vt=xe(Number(Ce),"receive")}try{const{walletDailyLimitsService:xe}=await ee(async()=>{const{walletDailyLimitsService:Kt}=await Promise.resolve().then(()=>l_);return{walletDailyLimitsService:Kt}},void 0,import.meta.url),Ge=await xe.canPerformOperation(String(Ze),Math.max(0,Number(Ce||0)),"withdraw");if(!Ge.canPerform)try{l({title:"  ",description:String(Ge.message||"      "),variant:"destructive"})}catch{}}catch{}const jt=Ot||`${ae}|${Date.now()}`,xt=ue||String(localStorage.getItem("lastSmsSimMsisdn")||""),pt=String((ge==null?void 0:ge.walletMsisdn)||"").trim()||xt||await cv(He)||"",Tn=(localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct";if(st)try{const xe=await de.getUserData(He),Ge=Array.isArray(xe==null?void 0:xe.debts)?xe.debts:[],Kt=Tn==="add"?Number(Ce)+Number(vt):Number(Ce),ut={id:`DEBT-${Date.now()}`,debtorName:It||ce||qe||"",amount:Math.round(Number(Kt)*100)/100,reason:St||"  VodafoneCash",customerId:void 0,mobile:qe,status:"pending",createdAt:new Date},wt=[ut,...Ge];await de.updateUserData(He,{debts:wt});try{const Rt=vt;await de.saveUserTransaction(He,{type:"withdraw",amount:Ce,withdrawnAmount:Ce,commission:Rt,status:"pending",createdAt:new Date,senderMsisdn:qe,receiverMsisdn:pt,senderName:ce,walletId:Ze,fromWallet:Ze,lineId:pt,provider:mt,reference:jt,transactionId:`DEFER-${Date.now()}`,linkedDebtId:ut.id})}catch{}try{const Rt=(J==null?void 0:J.popupId)||(V==null?void 0:V.popupId)||"";if(Rt){const{doc:In,updateDoc:Un,serverTimestamp:Cn}=await ee(async()=>{const{doc:ar,updateDoc:_r,serverTimestamp:Gt}=await Promise.resolve().then(()=>kn);return{doc:ar,updateDoc:_r,serverTimestamp:Gt}},void 0,import.meta.url),{db:or}=await ee(async()=>{const{db:ar}=await Promise.resolve().then(()=>Qt);return{db:ar}},void 0,import.meta.url);try{await Un(In(or,"pendingSmsPopups",Rt),{status:"confirmed",confirmedAt:Cn()})}catch{}try{(te=(H=_e.current)==null?void 0:H.add)==null||te.call(H,Rt);const ar=Array.from(_e.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(ar))}catch{}}}catch{}try{l({title:"  ",description:"      "})}catch{}return}catch{}try{const xe=await $e({shopId:yt,lineId:pt,walletId:Ze,amount:Ce,note:"SMS-ManualConfirm",provider:mt,createdBy:He,senderMsisdn:qe,senderName:ce,reference:jt,text:ae});try{const Ge=(J==null?void 0:J.popupId)||(V==null?void 0:V.popupId)||"";if(Ge){const{doc:Kt,updateDoc:ut,serverTimestamp:wt}=await ee(async()=>{const{doc:In,updateDoc:Un,serverTimestamp:Cn}=await Promise.resolve().then(()=>kn);return{doc:In,updateDoc:Un,serverTimestamp:Cn}},void 0,import.meta.url),{db:Rt}=await ee(async()=>{const{db:In}=await Promise.resolve().then(()=>Qt);return{db:In}},void 0,import.meta.url);try{await ut(Kt(Rt,"pendingSmsPopups",Ge),{status:"confirmed",confirmedAt:wt()})}catch{}try{(ne=(se=_e.current)==null?void 0:se.add)==null||ne.call(se,Ge);const In=Array.from(_e.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(In))}catch{}}}catch{}try{const Ge=Math.max(0,Number(Ce||0)),{doc:Kt,getDoc:ut,updateDoc:wt}=await ee(async()=>{const{doc:_r,getDoc:Gt,updateDoc:yn}=await Promise.resolve().then(()=>kn);return{doc:_r,getDoc:Gt,updateDoc:yn}},void 0,import.meta.url),{db:Rt}=await ee(async()=>{const{db:_r}=await Promise.resolve().then(()=>Qt);return{db:_r}},void 0,import.meta.url),In=Kt(Rt,"dashboardData",yt),Un=await ut(In);let Cn=Un.exists()?Number(((fe=Un.data())==null?void 0:fe.cashBalance)||0):0;const or=Un.exists()?((X=Un.data())==null?void 0:X.walletBalances)||{}:{},ar=Number(or[Ze]||0);or[Ze]=ar+Ge,Cn=Cn-Ge+Math.max(0,vt),await wt(In,{cashBalance:Cn,walletBalances:or,lastUpdated:new Date().toISOString()});try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:Cn}}))}catch{}try{const{walletDailyLimitsService:_r}=await ee(async()=>{const{walletDailyLimitsService:Gt}=await Promise.resolve().then(()=>l_);return{walletDailyLimitsService:Gt}},void 0,import.meta.url);await _r.updateUsage(String(Ze),Ge,"withdraw");try{window.dispatchEvent(new CustomEvent("walletLimitsUpdated",{detail:{walletId:String(Ze)}}))}catch{}}catch{}}catch{}(async()=>{try{const Ge=vt;await de.saveUserTransaction(He,{type:"withdraw",amount:Ce,withdrawnAmount:Ce,commission:Ge,status:"completed",createdAt:new Date,senderMsisdn:qe,receiverMsisdn:pt,senderName:ce,walletId:Ze,fromWallet:Ze,lineId:pt,provider:mt,reference:jt,transactionId:xe})}catch{}})(),pe(!1),we(null);try{l({title:`     ${xe}`})}catch{}}catch(xe){try{l({title:String((xe==null?void 0:xe.message)||"  "),variant:"destructive"})}catch{}}}catch{}};A.useEffect(()=>{try{zA.start()}catch{}return()=>{try{zA.stop()}catch{}}},[]),A.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.uid))return;const J=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),$=String(localStorage.getItem("android_installed_version")||"").trim(),H=localStorage.getItem("android_last_ack_code"),te=localStorage.getItem("android_installed_code"),se=H?Number(H):null,ne=te?Number(te):null,fe=J||$,X=se??ne??null;fe&&x(fe),X&&k(X);const{doc:ge,getDoc:Pe}=await ee(async()=>{const{doc:ue,getDoc:ce}=await Promise.resolve().then(()=>kn);return{doc:ue,getDoc:ce}},void 0,import.meta.url),{db:Y}=await ee(async()=>{const{db:ue}=await Promise.resolve().then(()=>Qt);return{db:ue}},void 0,import.meta.url),le=await Pe(ge(Y,"profiles",r.uid));if(le.exists()){const ue=le.data(),ce=String((ue==null?void 0:ue.lastAckAndroidVersion)||(ue==null?void 0:ue.androidInstalledVersion)||(ue==null?void 0:ue.lastAckUpdateId)||"").trim(),ae=typeof(ue==null?void 0:ue.lastAckAndroidCode)=="number"?ue.lastAckAndroidCode:typeof(ue==null?void 0:ue.androidInstalledCode)=="number"?ue.androidInstalledCode:null,Ce=(It,St)=>{const mt=String(It||"").replace(/^v/i,"").split(".").map(Ot=>parseInt(Ot,10)||0),qe=String(St||"").replace(/^v/i,"").split(".").map(Ot=>parseInt(Ot,10)||0);for(let Ot=0;Ot<Math.max(mt.length,qe.length);Ot++){const Ht=mt[Ot]||0,He=qe[Ot]||0;if(Ht>He)return 1;if(Ht<He)return-1}return 0};let st=!1;if(typeof ae=="number"&&typeof X=="number"?st=ae>X:typeof ae=="number"&&X==null?st=!0:ce&&fe?st=Ce(ce,fe)>0:ce&&!fe&&(st=!0),st){if(ce){try{localStorage.setItem("android_installed_version",ce)}catch{}x(ce)}if(typeof ae=="number"){try{localStorage.setItem("android_installed_code",String(ae))}catch{}k(ae)}}else if(typeof ae=="number"&&X==null){try{localStorage.setItem("android_installed_code",String(ae))}catch{}k(ae)}}}catch{}})()},[r==null?void 0:r.uid]),A.useEffect(()=>{try{const $=String((window==null?void 0:window.__nativeAppVersion)||"").trim();$&&L($);const H=window==null?void 0:window.__nativeAppVersionCode;if(typeof H=="number"){b(H);try{localStorage.setItem("android_installed_code",String(H))}catch{}}try{$&&localStorage.setItem("android_installed_version",$)}catch{}}catch{}const J=$=>{var H,te;try{const se=String((((H=$==null?void 0:$.detail)==null?void 0:H.version)??"")||"").trim(),ne=(te=$==null?void 0:$.detail)==null?void 0:te.code;se&&L(se);try{se&&localStorage.setItem("android_installed_version",se)}catch{}typeof ne=="number"&&b(ne)}catch{}};try{window.addEventListener("native-app-version",J)}catch{}return()=>{try{window.removeEventListener("native-app-version",J)}catch{}}},[]),A.useEffect(()=>{try{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",$=String(C||"").trim();if(!J||!$||!(r!=null&&r.uid))return;(async()=>{try{const{doc:H,setDoc:te,serverTimestamp:se}=await ee(async()=>{const{doc:fe,setDoc:X,serverTimestamp:ge}=await Promise.resolve().then(()=>kn);return{doc:fe,setDoc:X,serverTimestamp:ge}},void 0,import.meta.url),{db:ne}=await ee(async()=>{const{db:fe}=await Promise.resolve().then(()=>Qt);return{db:fe}},void 0,import.meta.url);await te(H(ne,"profiles",r.uid),{androidInstalledVersion:$,androidInstalledAt:se()},{merge:!0});try{localStorage.setItem("android_installed_version",$)}catch{}}catch{}})()}catch{}},[C,r==null?void 0:r.uid]),A.useEffect(()=>{ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"&&(async()=>{try{await ee(()=>import("./ProtectedUserDashboard-BMtPDPDM.js"),__vite__mapDeps([34,35,20,30,18,31]),import.meta.url),await ee(()=>import("./UserDashboardPage-C7dLCNLX.js"),__vite__mapDeps([61,1,39,15,18,30,31,23,6,42,41,25,5,48,33,46,37,38,47,51,10,56,4,8,32,26,35,19,40,54,7,44]),import.meta.url),await ee(()=>Promise.resolve().then(()=>IH),void 0,import.meta.url),await ee(()=>import("./ProfileSettingsPage-CJNkg_vg.js"),__vite__mapDeps([53,1,18,47,54,30,31,42,5,49,7,44]),import.meta.url),await ee(()=>import("./TransactionsPage-BwbUtB_c.js"),__vite__mapDeps([55,1,15,39,38,56,48,30,18,31,4,41,10,8,32,33,5,51]),import.meta.url)}catch{}})()},[]),A.useEffect(()=>{if(!t)return;const J=document.createElement("style");J.setAttribute("data-disable-pull-to-refresh","true"),J.textContent="html, body { overscroll-behavior-y: contain; touch-action: pan-y; }",document.head.appendChild(J);let $=0,H=null;const te=ne=>{var fe,X;$=((X=(fe=ne.touches)==null?void 0:fe[0])==null?void 0:X.clientY)||0,H=ne.target},se=ne=>{var ue,ce;const fe=((ce=(ue=ne.touches)==null?void 0:ue[0])==null?void 0:ce.clientY)||0,X=document.scrollingElement||document.documentElement,ge=X.scrollTop||window.scrollY||0,Pe=X.scrollHeight-X.clientHeight||0,Y=H||null,le=(()=>{let ae=Y;for(;ae&&ae!==document.body;){const st=window.getComputedStyle(ae).overflowY;if((st==="auto"||st==="scroll")&&ae.scrollHeight>ae.clientHeight)return!0;ae=ae.parentElement}return!1})();!le&&ge<=0&&fe>$&&ne.cancelable&&ne.preventDefault(),!le&&ge>=Pe&&fe<$&&ne.cancelable&&ne.preventDefault()};return document.addEventListener("touchstart",te,{passive:!0}),document.addEventListener("touchmove",se,{passive:!1}),()=>{document.removeEventListener("touchstart",te),document.removeEventListener("touchmove",se);try{document.head.removeChild(J)}catch{}}},[t]),A.useEffect(()=>{if(!((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"))return;try{const te=(window.location.reload||(()=>{})).bind(window.location);window.__originalReload=te,window.location.reload=()=>{try{window.dispatchEvent(new CustomEvent("app:softRefresh"))}catch{}}}catch{}try{const te=(window.location.assign||(se=>{})).bind(window.location);window.__originalAssign=te,window.location.assign=se=>{try{if(String(se||"").startsWith("/user/dashboard")){a("/user/dashboard");return}}catch{}try{te(se)}catch{}}}catch{}let $=null,H=!1;return(async()=>{try{const{listenAndroidUpdates:te}=await ee(async()=>{const{listenAndroidUpdates:se}=await Promise.resolve().then(()=>OH);return{listenAndroidUpdates:se}},void 0,import.meta.url);$=te(se=>{if(H)return;const ne=String((se==null?void 0:se.version)||"").trim(),fe=String((se==null?void 0:se.url)||"").trim(),X=String((se==null?void 0:se.notes)||"").trim(),ge=!!(se!=null&&se.force),Pe=typeof(se==null?void 0:se.code)=="number"?se.code:void 0,Y=String(localStorage.getItem("android_last_ack_version_id")||"").trim(),le=String(E||Y||"").trim(),ue=(He,yt)=>{const Ze=String(He||"").replace(/^v/i,"").split(".").map(de=>parseInt(de,10)||0),$e=String(yt||"").replace(/^v/i,"").split(".").map(de=>parseInt(de,10)||0);for(let de=0;de<Math.max(Ze.length,$e.length);de++){const ct=Ze[de]||0,vt=$e[de]||0;if(ct>vt)return 1;if(ct<vt)return-1}return 0},ce=String(C||"").trim(),ae=String(localStorage.getItem("android_installed_version")||"").trim(),Ce=localStorage.getItem("android_installed_code"),st=Ce?Number(Ce):null,It=[S,R,st].filter(He=>typeof He=="number").reduce((He,yt)=>He===void 0?yt:Math.max(He,yt),void 0),St=typeof Pe=="number"&&typeof It=="number"?Pe>It:void 0,mt=(()=>{const He=[ce,le,ae].filter(Boolean);return He.length===0?"":He.reduce((yt,Ze)=>ue(Ze,yt)>0?Ze:yt)})(),qe=ue(ne,mt)>0;if(!!fe&&(!!ne||typeof Pe=="number")&&(St!==void 0?St:qe)){const He="   ",yt=`${X?X+`
`:""} : ${ne}`;f({title:He,message:yt,apkUrl:fe,force:ge,versionId:ne,versionCode:Pe}),d(!0)}else try{d(!1)}catch{}})}catch{}})(),()=>{H=!0;try{typeof $=="function"&&$()}catch{}}},[E,C]),A.useEffect(()=>{const J=H=>{const te=(H==null?void 0:H.detail)||{};try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{O.current&&(clearInterval(O.current),O.current=null)}catch{}T(!0),v({percent:te.percent??null,downloaded:te.downloaded??0,total:te.total??0})},$=()=>{try{P.current&&(clearTimeout(P.current),P.current=null)}catch{}try{O.current&&(clearInterval(O.current),O.current=null)}catch{}T(!1),y(!0),v({percent:100,downloaded:((p==null?void 0:p.total)??(p==null?void 0:p.downloaded)??0)||0,total:(p==null?void 0:p.total)??0});try{const H=String((h==null?void 0:h.versionId)||"").trim();if(H){try{localStorage.setItem("android_last_ack_version_id",H)}catch{}try{localStorage.setItem("android_installed_version",H)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:te,setDoc:se,serverTimestamp:ne}=await ee(async()=>{const{doc:X,setDoc:ge,serverTimestamp:Pe}=await Promise.resolve().then(()=>kn);return{doc:X,setDoc:ge,serverTimestamp:Pe}},void 0,import.meta.url),{db:fe}=await ee(async()=>{const{db:X}=await Promise.resolve().then(()=>Qt);return{db:X}},void 0,import.meta.url);await se(te(fe,"profiles",r.uid),{lastAckAndroidVersion:H,androidInstalledVersion:H,lastAckAt:ne(),androidInstalledAt:ne()},{merge:!0})}}catch{}})()}}catch{}};return window.addEventListener("androidUpdateProgress",J),window.addEventListener("androidUpdateDownloaded",$),()=>{window.removeEventListener("androidUpdateProgress",J),window.removeEventListener("androidUpdateDownloaded",$)}},[]),A.useEffect(()=>((async()=>{var J;try{const{auth:$}=await ee(async()=>{const{auth:le}=await Promise.resolve().then(()=>Qt);return{auth:le}},void 0,import.meta.url),H=((J=$.currentUser)==null?void 0:J.uid)||"";if(!H)return;const{db:te}=await ee(async()=>{const{db:le}=await Promise.resolve().then(()=>Qt);return{db:le}},void 0,import.meta.url),{collection:se,query:ne,where:fe,onSnapshot:X}=await ee(async()=>{const{collection:le,query:ue,where:ce,onSnapshot:ae}=await Promise.resolve().then(()=>kn);return{collection:le,query:ue,where:ce,onSnapshot:ae}},void 0,import.meta.url),ge=ne(se(te,"pendingSmsPopups"),fe("userId","==",H),fe("status","==","pending")),Pe=Date.now(),Y=X(ge,le=>{var ue,ce,ae,Ce,st,It,St,mt,qe,Ot,Ht,He,yt;try{const Ze=typeof le.docChanges=="function"?le.docChanges():[];for(const $e of Ze){if($e.type==="added"){const de=$e.doc.data()||{},ct=$e.doc.id;if((ce=(ue=_e.current)==null?void 0:ue.has)!=null&&ce.call(ue,ct))continue;try{const Gt=de.createdAt||de.timestamp||(de.payload||{}).createdAt||(de.payload||{}).timestamp,yn=Gt&&typeof Gt.toMillis=="function"?Gt.toMillis():typeof de.createdAtMs=="number"?de.createdAtMs:typeof(de.payload||{}).createdAtMs=="number"?(de.payload||{}).createdAtMs:null;if(typeof yn=="number"&&yn<Pe)continue}catch{}let vt=de.amount??((ae=de.payload)==null?void 0:ae.amount)??null,jt=de.sender??((Ce=de.payload)==null?void 0:Ce.sender)??"";const xt=de.senderName??((st=de.payload)==null?void 0:st.senderName)??"";let wr=de.reference??((It=de.payload)==null?void 0:It.reference)??"";const pt=de.text??((St=de.payload)==null?void 0:St.text)??"";let Tn=de.simNumber??((mt=de.payload)==null?void 0:mt.simNumber)??"",xe=de.simSlot??((qe=de.payload)==null?void 0:qe.simSlot);xe==null&&(xe=de.slot??((Ot=de.payload)==null?void 0:Ot.slot)),xe==null&&(xe=de.sim_slot??((Ht=de.payload)==null?void 0:Ht.sim_slot)),xe==null&&(xe=de.lineId??((He=de.payload)==null?void 0:He.lineId));const Ge=xe!=null?String(xe):"",Kt=(r==null?void 0:r.uid)||"default";let ut=localStorage.getItem(`sim1Number_${Kt}`)??localStorage.getItem("sim1Number")??"",wt=localStorage.getItem(`sim2Number_${Kt}`)??localStorage.getItem("sim2Number")??"";const Rt=de.payload||{},In=Rt.sim1Number||Rt.sim1||de.sim1Number||"",Un=Rt.sim2Number||Rt.sim2||de.sim2Number||"";In&&(ut=String(In).trim(),$i(ut)),Un&&(wt=String(Un).trim(),ta(wt));let Cn=Tn,or="";Ge==="1"?(or="SIM 2",wt&&(Cn=wt)):(Ge==="0"||!Ge)&&(or="SIM 1",ut&&(Cn=ut));const ar=de.walletMsisdn??((yt=de.payload)==null?void 0:yt.walletMsisdn)??"";let _r="VF-Cash";if(/Received\s*EGP/i.test(String(pt))){_r="InstaPay";const Gt=String(pt).match(/Received\s*EGP\s*([0-9.,]+)/i);Gt&&(vt=parseFloat(String(Gt[1]).replace(/,/g,"")));const yn=String(pt).match(/from\s+([0-9+]+)/i);yn&&(jt=sn(yn[1]));const us=String(pt).match(/Ref:\s*([A-Za-z0-9\-]+)/i);us&&(wr=String(us[1]).trim())}we({amount:Number(vt||0),sender:String(jt||""),senderName:xt,reference:String(wr||""),text:pt,simNumber:Cn,simLabel:or,walletMsisdn:ar,providerLabel:_r,popupId:ct,sim1Number:ut,sim2Number:wt}),pe(!0);try{kr()}catch{}}if($e.type==="removed"){const de=$e.doc.id,ct=(V==null?void 0:V.popupId)||"";ct&&ct===de&&(pe(!1),we(null))}}}catch{}});j.current=Y}catch{}})(),()=>{try{const J=j.current;typeof J=="function"&&J()}catch{}}),[r==null?void 0:r.uid]),A.useEffect(()=>{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",$=typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"));if(J||$)return;let H=!1;return(async()=>{try{const te="0.0.0",se=await fetch("https://cashy-link.com/desktop_version.json",{cache:"no-store"});if(!se.ok)return;const ne=await se.json(),fe=String((ne==null?void 0:ne.version)||"0.0.0"),X=!!(ne!=null&&ne.force);if(!H&&((Pe,Y)=>{const le=String(Pe).split(".").map(ce=>parseInt(ce,10)||0),ue=String(Y).split(".").map(ce=>parseInt(ce,10)||0);for(let ce=0;ce<Math.max(le.length,ue.length);ce++){const ae=le[ce]||0,Ce=ue[ce]||0;if(ae>Ce)return 1;if(ae<Ce)return-1}return 0})(fe,te)>0){if(X){try{window.location.reload()}catch{}return}try{l({title:"  ",description:` ${fe}      `})}catch{}}}catch{}})(),()=>{H=!0}},[]),A.useEffect(()=>{if(Ae)try{const J=(r==null?void 0:r.uid)||"default",$=localStorage.getItem(`sim1Number_${J}`)??localStorage.getItem("sim1Number")??"",H=localStorage.getItem(`sim2Number_${J}`)??localStorage.getItem("sim2Number")??"";$i($),ta(H)}catch{}},[Ae,r==null?void 0:r.uid]);const na=(()=>{try{return String(localStorage.getItem("android_installed_version")||"").trim()}catch{return""}})(),Zr=(()=>{const J=(H,te)=>{const se=String(H||"").replace(/^v/i,"").split(".").map(fe=>parseInt(fe,10)||0),ne=String(te||"").replace(/^v/i,"").split(".").map(fe=>parseInt(fe,10)||0);for(let fe=0;fe<Math.max(se.length,ne.length);fe++){const X=se[fe]||0,ge=ne[fe]||0;if(X>ge)return 1;if(X<ge)return-1}return 0},$=[C,E,na].filter(Boolean);return $.length===0?"":$.reduce((H,te)=>J(te,H)>0?te:H)})();return _.jsxs(_.Fragment,{children:[_.jsx(lv,{open:Nt,onOpenChange:()=>{},children:_.jsxs(cm,{hideClose:!0,disableOutsideClose:!0,disableEscClose:!0,className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[92vw] max-w-md max-h-[86vh] overflow-y-auto rounded-2xl bg-white/95 backdrop-blur border border-gray-200 shadow-[0_10px_40px_rgba(16,24,40,0.12)] p-5",onInteractOutside:J=>{try{J.preventDefault()}catch{}},onEscapeKeyDown:J=>{try{J.preventDefault()}catch{}},style:{paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[_.jsx("div",{className:"absolute inset-x-0 -top-1 mx-auto h-1 w-24 rounded-full bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600"}),_.jsx(um,{className:"text-center",children:_.jsxs("div",{className:"flex items-center justify-center gap-3",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600 to-emerald-500 text-white",children:_.jsx(fU,{className:"w-6 h-6"})}),_.jsx(dm,{className:"text-lg font-extrabold tracking-tight text-gray-900",children:" "})]})}),_.jsxs("div",{className:"mt-2 space-y-4 text-[0.95rem] leading-relaxed text-gray-800",children:[_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"1"}),_.jsx("div",{children:"  ( )                        ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"2"}),_.jsx("div",{children:"                         ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"3"}),_.jsx("div",{children:"       (   )        ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"4"}),_.jsx("div",{children:"                    ."})]}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-br from-blue-600 to-emerald-500 text-white flex items-center justify-center font-bold",children:"5"}),_.jsx("div",{children:"               ."})]})]}),_.jsx("div",{className:"mt-4",children:_.jsx(es,{className:"w-full h-10 rounded-xl bg-gradient-to-r from-blue-600 via-emerald-500 to-purple-600 hover:from-blue-700 hover:via-emerald-600 hover:to-purple-700 text-white font-semibold",onClick:Fn,children:"  "})})]})}),U.useEffect(()=>{try{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",$=(r==null?void 0:r.uid)||"";if(!J||!$)return;const H=`androidPermsRequested_${$}`;localStorage.getItem(H)==="true"||(localStorage.setItem(H,"true"),setTimeout(()=>{try{window.location.href="cashy://requestPerms"}catch{}},300))}catch{}},[r==null?void 0:r.uid]),(()=>{try{const J=(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android",$=(typeof window<"u"?window.__uid:"")||""}catch{}return null})(),W&&(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"&&_.jsx("div",{className:"fixed inset-0 z-[3000] flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #0f172a, #111827)"},children:_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 max-w-sm w-full p-5 text-center",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-red-100 text-red-600 mx-auto",children:_.jsx("span",{className:"text-2xl",children:"!"})}),_.jsx("h2",{className:"mt-3 text-base md:text-lg font-bold text-gray-900",children:"   "}),_.jsx("p",{className:"mt-1 text-sm text-gray-700",children:"        "}),_.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:_.jsx(es,{variant:"outline",className:"h-8 min-w-[100px]",onClick:retryConnectivity,children:"  "})})]})}),c&&h&&_.jsx(lv,{open:c,onOpenChange:J=>{h!=null&&h.force||d(J)},children:_.jsxs(cm,{className:"max-w-sm mx-auto bg-white border border-gray-200 shadow-2xl rounded-2xl sm:max-w-md",children:[_.jsxs(um,{className:"text-center",children:[_.jsx(dm,{className:"text-base md:text-lg font-bold text-gray-900",children:h.title}),_.jsx(u_,{className:"text-sm text-gray-700 whitespace-pre-line",children:h.message}),_.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:Zr?`  : v${Zr}`:""})]}),_.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[!h.force&&!m&&!w&&_.jsx(es,{variant:"outline",className:"h-8 min-w-[80px]",onClick:()=>d(!1),children:""}),!w&&_.jsx(es,{className:"h-8 min-w-[120px] bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>{try{const J=String((h==null?void 0:h.versionId)||"").trim(),$=h==null?void 0:h.versionCode;if(J)try{localStorage.setItem("android_last_ack_version_id",J)}catch{}if(typeof $=="number")try{localStorage.setItem("android_last_ack_code",String($))}catch{}if((async()=>{try{if(r!=null&&r.uid&&J){const{doc:te,setDoc:se,serverTimestamp:ne}=await ee(async()=>{const{doc:ge,setDoc:Pe,serverTimestamp:Y}=await Promise.resolve().then(()=>kn);return{doc:ge,setDoc:Pe,serverTimestamp:Y}},void 0,import.meta.url),{db:fe}=await ee(async()=>{const{db:ge}=await Promise.resolve().then(()=>Qt);return{db:ge}},void 0,import.meta.url),X={lastAckAndroidVersion:J,lastAckAt:ne()};typeof $=="number"&&(X.lastAckAndroidCode=$),await se(te(fe,"profiles",r.uid),X,{merge:!0})}}catch{}})(),(ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"){const te=h.apkUrl,se=`cashy://update?url=${encodeURIComponent(te)}`;T(!0),v({percent:0,downloaded:0,total:0});try{O.current&&clearInterval(O.current),O.current=setInterval(()=>{v(ne=>{const fe=typeof(ne==null?void 0:ne.percent)=="number"?ne.percent:0,X=D.current?2:1;return{percent:Math.min(99,Math.max(0,Math.round(fe+X))),downloaded:(ne==null?void 0:ne.downloaded)??0,total:(ne==null?void 0:ne.total)??0}})},600)}catch{}window.location.href=se;try{P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{try{D.current=!1}catch{}try{P.current=null}catch{}},8e3)}catch{}}else{const te=h.apkUrl;try{window.open(te,"_blank")}catch{}}}catch{}},children:m?" ...":" "}),w&&_.jsx(es,{className:"h-8 min-w-[120px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{try{if((ve==null?void 0:ve.isNativePlatform)&&ve.getPlatform()==="android"){d(!1);try{const $=String((h==null?void 0:h.versionId)||"").trim();if($){try{localStorage.setItem("android_last_ack_version_id",$)}catch{}(async()=>{try{if(r!=null&&r.uid){const{doc:H,setDoc:te,serverTimestamp:se}=await ee(async()=>{const{doc:ge,setDoc:Pe,serverTimestamp:Y}=await Promise.resolve().then(()=>kn);return{doc:ge,setDoc:Pe,serverTimestamp:Y}},void 0,import.meta.url),{db:ne}=await ee(async()=>{const{db:ge}=await Promise.resolve().then(()=>Qt);return{db:ge}},void 0,import.meta.url),fe={lastAckAndroidVersion:$,androidInstalledVersion:$,lastAckAt:se(),androidInstalledAt:se()},X=h==null?void 0:h.versionCode;if(typeof X=="number"){fe.lastAckAndroidCode=X,fe.androidInstalledCode=X;try{localStorage.setItem("android_installed_code",String(X)),localStorage.setItem("android_last_ack_code",String(X))}catch{}}await te(H(ne,"profiles",r.uid),fe,{merge:!0})}}catch{}})()}}catch{}window.location.href="cashy://applyUpdate"}}catch{}},children:" "})]}),m&&_.jsxs("div",{className:"mt-3 text-center",children:[_.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:_.jsx("div",{className:"h-2 bg-emerald-600 rounded",style:{width:`${Math.max(0,Math.min(100,Math.round((p==null?void 0:p.percent)||0)))}%`}})}),_.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round((p==null?void 0:p.percent)||0),"%"]})]})]})}),o&&_.jsx(lv,{open:Ae,onOpenChange:async J=>{var $,H;if(pe(J),!J){try{const te=(V==null?void 0:V.popupId)||"";if(te){const{db:se}=await ee(async()=>{const{db:ge}=await Promise.resolve().then(()=>Qt);return{db:ge}},void 0,import.meta.url),{doc:ne,updateDoc:fe,serverTimestamp:X}=await ee(async()=>{const{doc:ge,updateDoc:Pe,serverTimestamp:Y}=await Promise.resolve().then(()=>kn);return{doc:ge,updateDoc:Pe,serverTimestamp:Y}},void 0,import.meta.url);try{await fe(ne(se,"pendingSmsPopups",te),{status:"dismissed",dismissedAt:X()})}catch{}try{(H=($=_e.current)==null?void 0:$.add)==null||H.call($,te);const ge=Array.from(_e.current||[]);localStorage.setItem("sms_suppressed_ids",JSON.stringify(ge))}catch{}}}catch{}qt(!1),at(""),En(""),Kn(""),Ve(!1),cs(0)}},children:_.jsxs(cm,{className:"sm:max-w-[420px] rounded-2xl shadow-xl",children:[_.jsxs(um,{children:[_.jsx(dm,{children:V!=null&&V.providerLabel?_.jsxs(_.Fragment,{children:["   ",_.jsx("span",{className:"text-red-600",children:V.providerLabel})]}):"   "}),_.jsx(u_,{})]}),_.jsxs("div",{className:"text-sm",children:[_.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[_.jsx(es,{variant:(V==null?void 0:V.simLabel)==="SIM 1"?"default":"outline",className:`w-full h-9 ${(V==null?void 0:V.simLabel)==="SIM 1"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Ns((V==null?void 0:V.sim1Number)||yr,"SIM 1"),disabled:!(V!=null&&V.sim1Number||yr),children:(V==null?void 0:V.sim1Number)||yr||" "}),_.jsx(es,{variant:(V==null?void 0:V.simLabel)==="SIM 2"?"default":"outline",className:`w-full h-9 ${(V==null?void 0:V.simLabel)==="SIM 2"?"bg-blue-600 hover:bg-blue-700 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,onClick:()=>Ns((V==null?void 0:V.sim2Number)||vr,"SIM 2"),disabled:!(V!=null&&V.sim2Number||vr),children:(V==null?void 0:V.sim2Number)||vr||" "})]}),_.jsx("div",{className:"border rounded-lg p-3",children:_.jsxs("div",{className:"grid grid-cols-2 gap-3 items-start",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"font-bold",children:[" ",(Nr=V==null?void 0:V.amount)==null?void 0:Nr.toLocaleString()]}),_.jsx("div",{className:"font-mono",children:(V==null?void 0:V.sender)||""}),_.jsxs("div",{className:"font-mono",children:[(V==null?void 0:V.simLabel)&&_.jsx("span",{className:`inline-flex items-center justify-center rounded-md px-1.5 py-0.5 text-xs font-bold mr-2 ${V.simLabel==="SIM 1"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:V.simLabel}),(V==null?void 0:V.simNumber)||"-"]}),(V==null?void 0:V.senderName)&&_.jsx("div",{children:V==null?void 0:V.senderName}),(V==null?void 0:V.reference)&&_.jsx("div",{className:"font-mono",children:V==null?void 0:V.reference}),(V==null?void 0:V.walletMsisdn)&&_.jsx("div",{className:"font-mono",children:V==null?void 0:V.walletMsisdn})]}),_.jsxs("div",{className:"space-y-2 text-right",children:[_.jsx("div",{children:"  "}),_.jsx("div",{children:" "}),_.jsx("div",{children:" "}),(V==null?void 0:V.senderName)&&_.jsx("div",{children:"  "}),(V==null?void 0:V.reference)&&_.jsx("div",{children:"  "}),(V==null?void 0:V.walletMsisdn)&&_.jsx("div",{children:"  "})]})]})}),be&&_.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[_.jsx("span",{className:"flex-1",children:"  ()"}),_.jsx("input",{type:"number",step:"0.01",min:"0",value:Le,onChange:J=>at(J.target.value),className:"w-32 text-right border rounded px-2 py-1",placeholder:"0.00"})]}),Dr&&_.jsxs("div",{className:"mt-2 border rounded-lg p-3 bg-amber-50",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("div",{className:"text-sm",children:" "}),_.jsxs("div",{className:"font-bold",children:[" ",Pn.toLocaleString()]})]}),_.jsx("div",{className:"mt-3",children:_.jsx("input",{type:"text",value:nn,onChange:J=>En(J.target.value),className:"w-full border rounded px-3 py-2 text-sm",placeholder:" "})}),_.jsx("div",{className:"mt-3",children:_.jsx(es,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{qt(!0),Ve(!1)},children:""})})]}),je&&!Dr&&_.jsx("div",{className:"mt-2 text-xs bg-amber-50 border border-amber-200 text-amber-800 rounded p-2",children:'   .  \\" \\"   .'}),_.jsx("div",{className:"pt-2",children:_.jsx("button",{type:"button",className:"w-full rounded-md px-3 py-2 text-sm font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:async()=>{var J;try{const H=String((V==null?void 0:V.text)||"").match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),te=H?parseFloat(String(H[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),{auth:se}=await ee(async()=>{const{auth:ue}=await Promise.resolve().then(()=>Qt);return{auth:ue}},void 0,import.meta.url),ne=((J=se.currentUser)==null?void 0:J.uid)||"",fe=ne?`selectedWallet_${ne}`:"selectedWallet_default",X=localStorage.getItem(fe)||"",ge=Le&&Le.trim()!==""?Math.max(0,parseFloat(Le)):null;let Pe=0;if(ge!=null)Pe=ge;else try{const{merchantWalletService:ue}=await ee(async()=>{const{merchantWalletService:Ce}=await Promise.resolve().then(()=>Mu);return{merchantWalletService:Ce}},void 0,import.meta.url),ce=await ue.getById(String(X)),ae=ce&&ce.defaultWithdrawCommission;if(ae!=null)Pe=Math.round((Number(ae)||0)*Number(te)/1e3*100)/100;else{const{calculateCommission:Ce}=await ee(async()=>{const{calculateCommission:st}=await Promise.resolve().then(()=>Oa);return{calculateCommission:st}},void 0,import.meta.url);Pe=Ce(Number(te),"receive")}}catch{const{calculateCommission:ue}=await ee(async()=>{const{calculateCommission:ce}=await Promise.resolve().then(()=>Oa);return{calculateCommission:ce}},void 0,import.meta.url);Pe=ue(Number(te),"receive")}const le=((localStorage.getItem("commissionMode")||"").toLowerCase()==="add"?"add":"deduct")==="add"?Number(te)+Number(Pe):Number(te);cs(Math.round(le*100)/100),Ve(!0)}catch{Ve(!0)}},children:""})})]}),_.jsx("div",{className:"pt-3",children:_.jsx(es,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{try{const J=String((V==null?void 0:V.text)||""),$=J.match(/\s+(\d+(?:[\.,]\d+)?)\s*/i),H=$?parseFloat(String($[1]).replace(",",".")):Number((V==null?void 0:V.amount)||0),te=J.match(/\s+\s+(\d+)/i),se=String((V==null?void 0:V.sender)||(te?te[1]:"")||""),ne=J.match(/\s*\s*([\d\.]+)/i),fe=String((V==null?void 0:V.reference)||(ne?ne[1]:String(Date.now())));ai({...V,amount:H,sender:se,reference:fe,deferredMode:je,debtorName:nn,debtorNote:gn})}catch{ai()}},children:" "})})]})})]})},Sx=()=>{const t=ri(),e=t.pathname.startsWith("/user/dashboard"),n=t.pathname.startsWith("/user/login")||t.pathname.startsWith("/auth")||t.pathname.startsWith("/admin/login")||t.pathname.startsWith("/cpanel/login")||t.pathname.startsWith("/dashboard/login");return e||n?_.jsxs(_.Fragment,{children:[_.jsx(s4,{}),_.jsx(U4,{})]}):null},bx=()=>{const{user:t,loading:e}=ml();return e?_.jsx(o_,{}):t?_.jsx(hm,{}):_.jsx(Sp,{})},gG=()=>_.jsx(l6,{client:F2,children:_.jsx(g$,{children:_.jsxs(A3,{children:[typeof window<"u"&&(window.electronAPI||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron"))&&!(ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android")&&_.jsx(LH,{}),_.jsx(pG,{}),typeof window<"u"&&(window.electronAPI||window.location.protocol==="file:"||typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("electron")||typeof window.location.hash=="string"&&window.location.hash.startsWith("#/")||typeof import.meta<"u"&&mG||ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android")?_.jsxs(d$,{children:[_.jsx(Ix,{}),_.jsx(Sx,{}),_.jsx(A.Suspense,{fallback:_.jsx(o_,{}),children:_.jsxs(DS,{children:[_.jsx(Re,{path:"/",element:ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"?_.jsx(bx,{}):_.jsx(Pf,{})}),_.jsx(Re,{path:"/dashboard-redirect",element:_.jsx(ex,{})}),_.jsx(Re,{path:"/landing",element:_.jsx(Pf,{})}),_.jsx(Re,{path:"/subscriptions",element:_.jsx(tx,{})}),_.jsx(Re,{path:"/auth",element:_.jsx(nx,{})}),_.jsx(Re,{path:"/user/login",element:_.jsx(Sp,{})}),_.jsx(Re,{path:"/user/forgot-password",element:_.jsx(ox,{})}),_.jsx(Re,{path:"/user/register",element:_.jsx(Df,{})}),_.jsx(Re,{path:"/register",element:_.jsx(Df,{})}),_.jsx(Re,{path:"/user/account-setup",element:_.jsx(ix,{})}),_.jsx(Re,{path:"/user/pending-approval",element:_.jsx(ux,{})}),_.jsx(Re,{path:"/user/dashboard",element:_.jsx(hm,{})}),_.jsx(Re,{path:"/branch/:shopId/dashboard",element:_.jsx(hm,{})}),_.jsx(Re,{path:"/user/add-wallet",element:_.jsx(gx,{})}),_.jsx(Re,{path:"/admin/login",element:_.jsx(dx,{})}),_.jsx(Re,{path:"/admin/dashboard",element:_.jsx(hx,{})}),_.jsx(Re,{path:"/admin/topups",element:_.jsx(rx,{})}),_.jsx(Re,{path:"/admin/notifications",element:_.jsx(sx,{})}),_.jsx(Re,{path:"/profile-settings",element:_.jsx(mx,{})}),_.jsx(Re,{path:"/transactions",element:_.jsx(px,{})}),_.jsx(Re,{path:"/referrals",element:_.jsx(yx,{})}),_.jsx(Re,{path:"/privacy-policy",element:_.jsx(Ex,{})}),_.jsx(Re,{path:"/cpanel",element:_.jsx(vx,{})}),_.jsx(Re,{path:"/cpanel/login",element:_.jsx(wx,{})}),_.jsx(Re,{path:"/auth-test",element:_.jsx(fx,{})}),_.jsx(Re,{path:"/topup",element:_.jsx(Cf,{})}),_.jsx(Re,{path:"/recharge",element:_.jsx(Cf,{})}),_.jsx(Re,{path:"/merchant/*",element:_.jsx(cx,{})}),_.jsx(Re,{path:"/dashboard/login",element:_.jsx(ax,{})}),_.jsx(Re,{path:"/dashboard",element:_.jsx(lx,{})}),_.jsx(Re,{path:"*",element:_.jsx(_x,{})})]})}),_.jsx(Tx,{})]}):_.jsxs(u$,{children:[_.jsx(Ix,{}),_.jsx(Sx,{}),_.jsx(A.Suspense,{fallback:_.jsx(o_,{}),children:_.jsxs(DS,{children:[_.jsx(Re,{path:"/",element:ve!=null&&ve.isNativePlatform&&ve.getPlatform()==="android"?_.jsx(bx,{}):_.jsx(Pf,{})}),_.jsx(Re,{path:"/dashboard-redirect",element:_.jsx(ex,{})}),_.jsx(Re,{path:"/landing",element:_.jsx(Pf,{})}),_.jsx(Re,{path:"/subscriptions",element:_.jsx(tx,{})}),_.jsx(Re,{path:"/auth",element:_.jsx(nx,{})}),_.jsx(Re,{path:"/user/login",element:_.jsx(Sp,{})}),_.jsx(Re,{path:"/user/forgot-password",element:_.jsx(ox,{})}),_.jsx(Re,{path:"/user/register",element:_.jsx(Df,{})}),_.jsx(Re,{path:"/register",element:_.jsx(Df,{})}),_.jsx(Re,{path:"/user/account-setup",element:_.jsx(ix,{})}),_.jsx(Re,{path:"/user/pending-approval",element:_.jsx(ux,{})}),_.jsx(Re,{path:"/user/dashboard",element:_.jsx(hm,{})}),_.jsx(Re,{path:"/user/add-wallet",element:_.jsx(gx,{})}),_.jsx(Re,{path:"/admin/login",element:_.jsx(dx,{})}),_.jsx(Re,{path:"/admin/dashboard",element:_.jsx(hx,{})}),_.jsx(Re,{path:"/admin/topups",element:_.jsx(rx,{})}),_.jsx(Re,{path:"/admin/notifications",element:_.jsx(sx,{})}),_.jsx(Re,{path:"/profile-settings",element:_.jsx(mx,{})}),_.jsx(Re,{path:"/transactions",element:_.jsx(px,{})}),_.jsx(Re,{path:"/referrals",element:_.jsx(yx,{})}),_.jsx(Re,{path:"/privacy-policy",element:_.jsx(Ex,{})}),_.jsx(Re,{path:"/cpanel",element:_.jsx(vx,{})}),_.jsx(Re,{path:"/cpanel/login",element:_.jsx(wx,{})}),_.jsx(Re,{path:"/auth-test",element:_.jsx(fx,{})}),_.jsx(Re,{path:"/topup",element:_.jsx(Cf,{})}),_.jsx(Re,{path:"/recharge",element:_.jsx(Cf,{})}),_.jsx(Re,{path:"/merchant/*",element:_.jsx(cx,{})}),_.jsx(Re,{path:"/dashboard/login",element:_.jsx(ax,{})}),_.jsx(Re,{path:"/dashboard",element:_.jsx(lx,{})}),_.jsx(Re,{path:"*",element:_.jsx(_x,{})})]})}),_.jsx(Tx,{})]})]})})}),yG=(t,e)=>{try{const n=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return!!(n.includes("vf-cash")||n.includes("vodafone")||n.includes("vfcash")||/\s*/i.test(t)||r.includes("vodafone cash"))}catch{return!1}},cv=async t=>{try{const e=String(localStorage.getItem(`selectedWallet_${t}`)||"").trim();if(!e)return"";const{merchantWalletService:n}=await ee(async()=>{const{merchantWalletService:c}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:c}},void 0,import.meta.url),r=await n.getByMerchantId(t),s=localStorage.getItem(`wallets_${t}`),i=s?JSON.parse(s):[],a=[...Array.isArray(i)?i:[],...Array.isArray(r)?r:[]].find(c=>String((c==null?void 0:c.id)||"")===e);return String((a==null?void 0:a.msisdn)||(a==null?void 0:a.phone)||"")}catch{return""}},vG=async t=>{var e;try{const n=Object.keys(localStorage),r=`selectedWallet_${t}`,s=`wallets_${t}`,i=n.find(h=>h.startsWith(r));if(i){const h=localStorage.getItem(i)||"";if(h)return h}const{merchantWalletService:o}=await ee(async()=>{const{merchantWalletService:h}=await Promise.resolve().then(()=>Ea);return{merchantWalletService:h}},void 0,import.meta.url),a=await o.getByMerchantId(t),l=localStorage.getItem(s),c=l?JSON.parse(l):[],d=[...Array.isArray(c)?c:[],...Array.isArray(a)?a:[]];if(d.length>0){const h=d.find(m=>!!(m!=null&&m.isDefault)),f=String(((h==null?void 0:h.id)??((e=d[0])==null?void 0:e.id))||"").trim();if(f)return f}}catch{}return""},U2=A.createContext(void 0),wG=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!1),[i,o]=A.useState(null),{profile:a,user:l}=ml();A.useEffect(()=>{try{const f=localStorage.getItem("cashier_shift_user"),m=localStorage.getItem("cashier_shift_active"),T=localStorage.getItem("cashier_shift_start_at");f&&n(JSON.parse(f)),m&&s(m==="true"),T&&o(Number(T))}catch{}},[]),A.useEffect(()=>{if(!(a!=null&&a.shopId))return;const f=Ee(G,"cashierShift",a.shopId);let m=null;return(async()=>{try{(await gt(f)).exists()||await Mt(f,{isShiftActive:!1,shiftStartAt:null,shiftUser:null}),m=Oi(f,p=>{if(p.exists()){const v=p.data(),w=(v==null?void 0:v.shiftUser)||null,y=!!(v!=null&&v.isShiftActive),E=(v==null?void 0:v.shiftStartAt)??null;let x=w;if(!x)try{const C=localStorage.getItem("cashier_shift_user"),L=C?JSON.parse(C):null;L&&(x=L)}catch{}n(x),s(y),o(typeof E=="number"?E:E?Number(E):null);try{x?localStorage.setItem("cashier_shift_user",JSON.stringify(x)):localStorage.removeItem("cashier_shift_user"),localStorage.setItem("cashier_shift_active",y?"true":"false"),E!=null&&localStorage.setItem("cashier_shift_start_at",String(E))}catch{}}},p=>{console.warn("cashierShift snapshot error:",p)})}catch(T){console.warn("Failed to init cashierShift doc:",T)}})(),()=>{m&&m()}},[a==null?void 0:a.shopId]);const c=f=>{n(f);try{f?localStorage.setItem("cashier_shift_user",JSON.stringify(f)):localStorage.removeItem("cashier_shift_user")}catch{}try{if(a!=null&&a.shopId){const m=Ee(G,"cashierShift",a.shopId);Xt(m,{shiftUser:f||null})}}catch{}},d=()=>{s(!0);try{localStorage.setItem("cashier_shift_active","true")}catch{}const f=Date.now();o(f);try{localStorage.setItem("cashier_shift_start_at",String(f))}catch{}try{if(a!=null&&a.shopId){const m=Ee(G,"cashierShift",a.shopId);Xt(m,{isShiftActive:!0,shiftStartAt:f})}}catch{}try{const T=`cashBalance_${(l==null?void 0:l.uid)||"default"}`,p=`userCashBalance_${(l==null?void 0:l.uid)||"default"}`,v=`walletBalances_${(l==null?void 0:l.uid)||"default"}`;let w=localStorage.getItem(T);if(w==null){const E=localStorage.getItem(p);if(E!=null){w=E;try{localStorage.setItem(T,E),localStorage.removeItem(p)}catch{}}}if(w==null&&(l!=null&&l.uid)){const E=localStorage.getItem("cashBalance"),x=localStorage.getItem("userCashBalance");if(E!=null){try{localStorage.setItem(T,E),localStorage.removeItem("cashBalance")}catch{}w=E}else if(x!=null){try{localStorage.setItem(T,x),localStorage.removeItem("userCashBalance")}catch{}w=x}}const y=localStorage.getItem(v);w?localStorage.setItem("shiftStartDrawerFunds",w):localStorage.setItem("shiftStartDrawerFunds","0"),y?localStorage.setItem("shiftStartWalletBalances",y):localStorage.setItem("shiftStartWalletBalances","{}")}catch{}try{a!=null&&a.shopId&&(async()=>{try{const m=Ee(G,"dashboardData",a.shopId),T=await gt(m);if(T.exists()){const p=T.data(),v=Number((p==null?void 0:p.cashBalance)??0),w=(p==null?void 0:p.walletBalances)??{};try{const y=localStorage.getItem("shiftStartDrawerFunds"),E=localStorage.getItem("shiftStartWalletBalances"),x=y?parseFloat(y):0,C=E?JSON.parse(E):{},L=!y||!Number.isFinite(x)||x===0,S=!E||Object.keys(C||{}).length===0;L&&localStorage.setItem("shiftStartDrawerFunds",String(Number.isFinite(v)?v:0)),S&&localStorage.setItem("shiftStartWalletBalances",JSON.stringify(w||{}))}catch{}}}catch(m){console.warn("Shift start Firebase read failed:",m)}})()}catch{}},h=()=>{s(!1);try{localStorage.setItem("cashier_shift_active","false")}catch{}try{if(a!=null&&a.shopId){const f=Ee(G,"cashierShift",a.shopId);Xt(f,{isShiftActive:!1})}}catch{}};return _.jsx(U2.Provider,{value:{shiftUser:e,isShiftActive:r,shiftStartAt:i,setShiftUser:c,startShift:d,endShift:h},children:t})},tQ=()=>{const t=A.useContext(U2);if(!t)throw new Error("useShift must be used within ShiftProvider");return t};class _G extends A.Component{constructor(){super(...arguments);vl(this,"state",{hasError:!1,error:null});vl(this,"handleReload",()=>{window.location.reload()})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r,s,i;if(this.state.hasError){const o=((r=(n=this.state.error)==null?void 0:n.message)==null?void 0:r.includes("removeChild"))||((i=(s=this.state.error)==null?void 0:s.message)==null?void 0:i.includes("NotFoundError"));return _.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 text-center dark:bg-gray-900",children:_.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 space-y-4",children:[_.jsx("div",{className:"flex justify-center",children:_.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full",children:_.jsx(MP,{className:"w-8 h-8 text-red-600 dark:text-red-400"})})}),_.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"    "}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o?"         .   .":"    .    ."}),!1,_.jsxs(es,{onClick:this.handleReload,className:"w-full gap-2",children:[_.jsx(f0,{className:"w-4 h-4"})," "]})]})})}return this.props.children}}try{const t=navigator.userAgent||navigator.vendor||"",e=/iPad|iPhone|iPod/.test(t),n=document.documentElement;n&&(n.classList.toggle("ios",e),n.classList.toggle("android",!e))}catch{}try{s2()}catch{}const EG=()=>{const{theme:t="system"}=QP();return A.useEffect(()=>{try{const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="system"?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",n||"light"),document.documentElement.classList.toggle("dark",n==="dark")}catch{}},[t]),null};aP(document.getElementById("root")).render(_.jsx(_G,{children:_.jsx(a4,{attribute:"class",defaultTheme:"system",enableSystem:!0,storageKey:"theme",children:_.jsx(yH,{children:_.jsx(wG,{children:_.jsxs(rK,{children:[_.jsx(gG,{}),_.jsx(EG,{})]})})})})}));export{dm as $,LF as A,es as B,WG as C,wa as D,KF as E,YE as F,Yu as G,XB as H,vw as I,Mt as J,At as K,m$ as L,QI as M,NG as N,gt as O,Xt as P,s_ as Q,U as R,fU as S,zF as T,_U as U,qn as V,LP as W,lv as X,cm as Y,um as Z,ee as _,Jc as a,iH as a$,fG as a0,ri as a1,ws as a2,$r as a3,Hc as a4,BM as a5,Ty as a6,en as a7,Ct as a8,Wn as a9,eu as aA,MG as aB,vH as aC,lC as aD,uC as aE,SG as aF,o3 as aG,dl as aH,l0 as aI,XK as aJ,uP as aK,hK as aL,p2 as aM,Fd as aN,o2 as aO,qp as aP,a3 as aQ,l3 as aR,lP as aS,$F as aT,LG as aU,QP as aV,n2 as aW,aU as aX,qG as aY,HG as aZ,KG as a_,c0 as aa,Xs as ab,WO as ac,RH as ad,yU as ae,im as af,tQ as ag,tK as ah,ve as ai,GI as aj,MF as ak,fO as al,ZE as am,o_ as an,JI as ao,DS as ap,Re as aq,vo as ar,YI as as,qF as at,oH as au,xp as av,Ue as aw,m0 as ax,u8 as ay,u_ as az,OG as b,UO as b$,QG as b0,VH as b1,NM as b2,sK as b3,c8 as b4,nH as b5,UF as b6,JF as b7,TU as b8,Ri as b9,hr as bA,RG as bB,DG as bC,QE as bD,$H as bE,_y as bF,dt as bG,eQ as bH,tH as bI,XG as bJ,lG as bK,uG as bL,ZG as bM,O2 as bN,FM as bO,L2 as bP,V2 as bQ,dG as bR,N2 as bS,cG as bT,y$ as bU,kG as bV,zO as bW,_a as bX,d8 as bY,MH as bZ,YG as b_,oF as ba,yh as bb,FG as bc,e2 as bd,t2 as be,iU as bf,MP as bg,_d as bh,NH as bi,kH as bj,Vn as bk,UA as bl,DH as bm,eg as bn,$3 as bo,O3 as bp,xG as bq,hw as br,dr as bs,tg as bt,k3 as bu,N3 as bv,Bm as bw,PC as bx,t6 as by,M3 as bz,a0 as c,zq as c0,zG as c1,Bq as c2,rH as c3,NF as c4,kn as c5,Qt as c6,Mu as c7,GG as c8,Jy as c9,OH as ca,JG as cb,l_ as cc,xH as d,bH as e,Pt as f,AH as g,Ne as h,G as i,_ as j,Ke as k,du as l,BG as m,Gq as n,No as o,Js as p,Be as q,A as r,Oe as s,tU as t,ml as u,QF as v,JB as w,Ee as x,Oi as y,Jn as z};
//# sourceMappingURL=index-B6qHa3zL.js.map
