import{a0 as Na,u as va,a9 as ja,aM as wa,r as i,j as e,aa as W,ab as q,ac as be,ad as fe,b2 as ka,B as g,b8 as Da,aq as Xe,I as w,c as A,d as Y,e as Q,g as B,C as ye,a3 as _,ap as Ne,aG as Aa,q as P,s as N,t as p,aH as $,v as Ba,x as C,E as D,D as O,a8 as ve,b9 as Je,an as X,W as S,w as J,aK as Z}from"./index-DhbnydJl.js";import{S as Pa}from"./separator-Cn84CDdZ.js";import{C as Ca,V as Sa}from"./VideoModal-w5Ot-7KI.js";import{ProfitService as Ta}from"./profitService-QTJQLMA0.js";import{C as je}from"./circle-check-big-Dtvck6_a.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ee=Na("truck",_a),za=({open:ae,onOpenChange:we})=>{const{user:r,profile:v}=va(),{shopId:E}=ja()||{},{shiftUser:f,isShiftActive:ke}=wa(),[I,z]=i.useState([]),[te,De]=i.useState(""),[Ae,Be]=i.useState(""),[Ze,Pe]=i.useState(!1),[Ce,Se]=i.useState(""),[Te,_e]=i.useState(""),[Ie,Me]=i.useState(""),[se,Fe]=i.useState(""),[re,$e]=i.useState(""),[H,le]=i.useState(!1),[Ee,ze]=i.useState(!1),[ea,R]=i.useState(!1),[aa,M]=i.useState(!1),[ta,sa]=i.useState(0),[ra,la]=i.useState(0),[na,ca]=i.useState(0),[da,ne]=i.useState(!1),[ia,Ue]=i.useState(!1),[We,oa]=i.useState([]),[ma,ce]=i.useState(!1),[de,qe]=i.useState(""),[ie,Oe]=i.useState(""),[oe,He]=i.useState(""),[F,me]=i.useState("in_progress"),xa=()=>{const a=new Date,t=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getDate()).padStart(2,"0");return`${t}-${n}-${c}`},[xe,ha]=i.useState(xa()),[ga,pa]=i.useState(0),U=a=>`${new Intl.NumberFormat("ar-EG",{maximumFractionDigits:0}).format(Number(a||0))} Ø¬.Ù…`,Re=i.useRef(null);i.useEffect(()=>{var a;H&&((a=Re.current)==null||a.scrollIntoView({behavior:"smooth",block:"start"}))},[H]);const he=(a,t)=>{const n=new Date,c=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=new Date(n.getFullYear(),n.getMonth(),1),x=t||xe;let h;if(x){const[m,u,o]=x.split("-").map(Number);h=new Date(m,u-1,o)}else h=new Date(n.getFullYear(),n.getMonth(),n.getDate());h.setHours(0,0,0,0);let s=0,b=0,d=0;a.forEach(m=>{if(m.status==="completed"){const u=m.completedAt?new Date(m.completedAt):new Date(m.createdAt),o=new Date(u.getFullYear(),u.getMonth(),u.getDate()),y=m.profit!==void 0?m.profit:(m.repairPrice||0)-(m.wholesalePrice||0),k=Number.isFinite(y)?y:0;o.getTime()===c.getTime()&&(s+=k),u>=l&&(b+=k),o.getTime()===h.getTime()&&(d+=k)}}),sa(s),la(b),pa(d)},Le=async()=>{if(!(r!=null&&r.uid))return;ze(!0);const a=t=>{const n=t.docs.map(c=>{var x,h,s,b;const l=c.data();return{id:c.id,productName:l.productName,faultType:l.faultType,customerName:l.customerName,mobile:l.mobile,repairPrice:Number(l.repairPrice??l.customerPrice??0),wholesalePrice:l.wholesalePrice!==void 0?Number(l.wholesalePrice):void 0,partialPayment:l.partialPayment!==void 0?Number(l.partialPayment):void 0,remainingDue:l.remainingDue!==void 0?Number(l.remainingDue):l.partialPayment!==void 0?Math.max(0,Math.round((Number(l.repairPrice??l.customerPrice??0)-Number(l.partialPayment))*100)/100):void 0,status:l.status||"in_progress",createdAt:((h=(x=l.createdAt)==null?void 0:x.toDate)==null?void 0:h.call(x))||new Date,completedAt:(b=(s=l.completedAt)==null?void 0:s.toDate)==null?void 0:b.call(s),userId:l.userId||r.uid,profit:l.profit!==void 0?Number(l.profit):void 0,profitAdded:l.profitAdded||!1,receivedByType:l.receivedByType,receivedByName:l.receivedByName,receivedByUsername:l.receivedByUsername??null,deliveredByType:l.deliveredByType,deliveredByName:l.deliveredByName,deliveredByUsername:l.deliveredByUsername??null}});z(n),he(n)};try{const t=P(N(p,"maintenance_items"),$("userId","==",r.uid),Ba("createdAt","desc")),n=await C(t);a(n)}catch(t){console.warn("Failed to fetch with ordering, falling back without orderBy:",t);try{const n=P(N(p,"maintenance_items"),$("userId","==",r.uid)),l=(await C(n)).docs.sort((x,h)=>{var d,m,u,o;const s=((m=(d=x.data().createdAt)==null?void 0:d.toDate)==null?void 0:m.call(d))||new Date(0);return(((o=(u=h.data().createdAt)==null?void 0:u.toDate)==null?void 0:o.call(u))||new Date(0)).getTime()-s.getTime()});a({docs:l})}catch(n){console.warn("Failed to fetch maintenance items (fallback):",n)}}finally{ze(!1)}},Ve=async()=>{if(!(r!=null&&r.uid))return;const a=new Date,t=new Date(a.getFullYear(),a.getMonth(),1);try{const n=P(N(p,"users",r.uid,"maintenance_waste")),l=(await C(n)).docs.reduce((x,h)=>{var d;const s=h.data();return((d=s.createdAt)!=null&&d.toDate?s.createdAt.toDate():new Date(s.createdAt||0))>=t?x+(Number(s.amount)||0):x},0);ca(l)}catch(n){console.error("Error fetching waste:",n)}},Ge=async()=>{if(r!=null&&r.uid)try{const a=P(N(p,"users",r.uid,"maintenance_waste")),n=(await C(a)).docs.map(c=>({id:c.id,...c.data()})).sort((c,l)=>{var s,b;const x=(s=c.createdAt)!=null&&s.toDate?c.createdAt.toDate():new Date(c.createdAt||0);return((b=l.createdAt)!=null&&b.toDate?l.createdAt.toDate():new Date(l.createdAt||0)).getTime()-x.getTime()});oa(n)}catch(a){console.error("Error fetching waste history:",a)}};i.useEffect(()=>{ae&&(Le(),Ve(),Ge())},[r==null?void 0:r.uid,ae]);const ua=()=>{De(""),Be(""),Se(""),_e(""),Me(""),Fe(""),$e("")},Ke=async a=>{if(!(r!=null&&r.uid)){alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©");return}const t=Number(Ie),n=se?Number(se):void 0,c=re?Number(re):void 0;if(!te.trim()||!t||Number.isNaN(t)||t<=0){alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");return}try{const l=ke&&f?"cashier":"admin",x=l==="cashier"?(f==null?void 0:f.name)||"ÙƒØ§Ø´ÙŠØ±":(v==null?void 0:v.fullName)||(r==null?void 0:r.displayName)||"Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ",h=l==="cashier"&&(f==null?void 0:f.username)||null,s={productName:te.trim(),repairPrice:t,status:a,createdAt:D(),userId:r.uid,profitAdded:a==="completed",receivedByType:l,receivedByName:x};h&&(s.receivedByUsername=h),a==="completed"&&(s.profit=Math.round((t-(n||0))*100)/100,s.deliveredByType=l,s.deliveredByName=x,h&&(s.deliveredByUsername=h));const b=Ae.trim(),d=Ce.trim(),m=Te.trim();b&&(s.faultType=b),d&&(s.customerName=d),m&&(s.mobile=m),n!==void 0&&(s.wholesalePrice=n),a==="completed"&&(s.completedAt=D()),c!==void 0&&(s.partialPayment=c),c!==void 0&&(s.remainingDue=Math.max(0,Math.round((t-c)*100)/100));const u=await O(N(p,"maintenance_items"),s);try{const o={linkedId:u.id,productName:s.productName,faultType:s.faultType,customerName:s.customerName,mobile:s.mobile,repairPrice:s.repairPrice,wholesalePrice:s.wholesalePrice,partialPayment:s.partialPayment,remainingDue:s.remainingDue,userId:r.uid,profitAdded:s.profitAdded,receivedByType:s.receivedByType,receivedByName:s.receivedByName,receivedByUsername:s.receivedByUsername??null,deliveredByType:s.deliveredByType,deliveredByName:s.deliveredByName,deliveredByUsername:s.deliveredByUsername??null};s.profit!==void 0&&(o.profit=s.profit),a==="in_progress"?await O(N(p,"maintenance_pending"),{...o,status:"in_progress",createdAt:D()}):await O(N(p,"maintenance_done"),{...o,status:"completed",createdAt:D(),completedAt:D()})}catch(o){console.warn("ØªØ¹Ø°Ø± Ù…Ø²Ø§Ù…Ù†Ø© Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø© Ù…Ø¹ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„/Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±:",o)}if(z(o=>[{id:u.id,productName:s.productName,faultType:s.faultType,customerName:s.customerName,mobile:s.mobile,repairPrice:s.repairPrice,wholesalePrice:s.wholesalePrice,partialPayment:s.partialPayment,remainingDue:s.remainingDue,status:s.status,createdAt:new Date,completedAt:s.status==="completed"?new Date:void 0,userId:r.uid,profit:s.profit,profitAdded:s.profitAdded,receivedByType:s.receivedByType,receivedByName:s.receivedByName,receivedByUsername:s.receivedByUsername??null,deliveredByType:s.deliveredByType,deliveredByName:s.deliveredByName,deliveredByUsername:s.deliveredByUsername??null},...o]),a==="completed")try{const o=Math.max(0,Number(t||0)),y=`cashBalance_${(r==null?void 0:r.uid)||"default"}`,k=`cashBalance_${(r==null?void 0:r.uid)||"default"}_${E||"main"}`,K=localStorage.getItem(k)??localStorage.getItem(y)??"0",j=(parseFloat(K||"0")||0)+o;try{localStorage.setItem(y,String(j))}catch{}try{localStorage.setItem(k,String(j))}catch{}try{await ve.updateUserData(r.uid,{cashBalance:j})}catch{}try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:j}}))}catch{}}catch{}else if(a==="in_progress"&&c!==void 0&&c>0)try{const o=Math.max(0,Number(c||0)),y=`cashBalance_${(r==null?void 0:r.uid)||"default"}`,k=`cashBalance_${(r==null?void 0:r.uid)||"default"}_${E||"main"}`,K=localStorage.getItem(k)??localStorage.getItem(y)??"0",j=(parseFloat(K||"0")||0)+o;try{localStorage.setItem(y,String(j))}catch{}try{localStorage.setItem(k,String(j))}catch{}try{await ve.updateUserData(r.uid,{cashBalance:j})}catch{}try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:j}}))}catch{}}catch{}ua();try{if(r!=null&&r.uid){const o=s.partialPayment!==void 0?`ØŒ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ù…Ù‚Ø¯Ù…Ù‹Ø§ ${s.partialPayment} Ø¬Ù†ÙŠÙ‡`:"",y=s.mobile?`ØŒ Ø±Ù‚Ù… ØªÙ„ÙŠÙÙˆÙ† ${s.mobile}`:"";await Je.send(r.uid,`ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¬Ù‡Ø§Ø² ØµÙŠØ§Ù†Ø© Ø¨Ø§Ø³Ù… ${s.customerName||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}ØŒ Ø§Ù„Ø¬Ù‡Ø§Ø² ${s.productName}${y}ØŒ Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­ ${s.repairPrice} Ø¬Ù†ÙŠÙ‡${o}`)}}catch{}}catch(l){console.error("Failed to add maintenance item:",l);const x=l||{},s=[x.code,x.message].filter(Boolean).join(" â€” ")||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";alert(`Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©: ${s}`)}},ba=async a=>{try{await X(S(p,"maintenance_items",a),{status:"waiting_for_delivery"}),z(t=>t.map(n=>n.id===a?{...n,status:"waiting_for_delivery"}:n));try{const t=P(N(p,"maintenance_pending"),$("linkedId","==",a),J(1)),n=await C(t);n.empty||await X(S(p,"maintenance_pending",n.docs[0].id),{status:"waiting_for_delivery"})}catch(t){console.warn("Sync error",t)}}catch{alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©")}},Ye=async a=>{try{const t=I.find(d=>d.id===a),n=Math.round((((t==null?void 0:t.repairPrice)||0)-((t==null?void 0:t.wholesalePrice)||0))*100)/100,c=ke&&f?"cashier":"admin",l=c==="cashier"?(f==null?void 0:f.name)||"ÙƒØ§Ø´ÙŠØ±":(v==null?void 0:v.fullName)||(r==null?void 0:r.displayName)||"Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ",x=c==="cashier"&&(f==null?void 0:f.username)||null,h={status:"completed",completedAt:D(),profit:n,profitAdded:!0,deliveredByType:c,deliveredByName:l};x&&(h.deliveredByUsername=x);const s=Math.round(((t==null?void 0:t.repairPrice)||0)*100)/100;h.partialPayment=s,h.remainingDue=0,await X(S(p,"maintenance_items",a),h),z(d=>d.map(m=>m.id===a?{...m,status:"completed",completedAt:new Date,profit:n,profitAdded:!0,partialPayment:s,remainingDue:0,deliveredByType:c,deliveredByName:l,deliveredByUsername:x??null}:m));const b=I.map(d=>d.id===a?{...d,status:"completed",profit:n}:d);he(b);try{const d=Math.max(0,Number((t==null?void 0:t.repairPrice)||0)),m=Math.max(0,Number((t==null?void 0:t.partialPayment)||0)),u=Math.max(0,d-m);if(u>0){const o=`cashBalance_${(r==null?void 0:r.uid)||"default"}`,y=`cashBalance_${(r==null?void 0:r.uid)||"default"}_${E||"main"}`,k=localStorage.getItem(y)??localStorage.getItem(o)??"0",T=(parseFloat(k||"0")||0)+u;try{localStorage.setItem(o,String(T))}catch{}try{localStorage.setItem(y,String(T))}catch{}if(r!=null&&r.uid)try{await ve.updateUserData(r.uid,{cashBalance:T})}catch{}try{const j=(v==null?void 0:v.shopId)||E;j&&await X(S(p,"dashboardData",j),{cashBalance:T,lastUpdated:new Date().toISOString()})}catch{}try{window.dispatchEvent(new CustomEvent("cashBalanceChanged",{detail:{value:T}}))}catch{}}}catch{}try{const d={linkedId:a,productName:t==null?void 0:t.productName,faultType:t==null?void 0:t.faultType,customerName:t==null?void 0:t.customerName,mobile:t==null?void 0:t.mobile,repairPrice:t==null?void 0:t.repairPrice,wholesalePrice:t==null?void 0:t.wholesalePrice,profit:n,partialPayment:s,remainingDue:0,userId:(r==null?void 0:r.uid)||(t==null?void 0:t.userId),status:"completed",createdAt:t!=null&&t.createdAt?t.createdAt:D(),completedAt:D(),profitAdded:n!==void 0,receivedByType:t==null?void 0:t.receivedByType,receivedByName:t==null?void 0:t.receivedByName,receivedByUsername:(t==null?void 0:t.receivedByUsername)??null,deliveredByType:c,deliveredByName:l,deliveredByUsername:x??null};await O(N(p,"maintenance_done"),d);try{const m=P(N(p,"maintenance_pending"),$("linkedId","==",a),J(1)),o=(await C(m)).docs[0];o!=null&&o.id&&await Z(S(p,"maintenance_pending",o.id))}catch(m){console.warn("ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­:",m)}}catch(d){console.warn("ØªØ¹Ø°Ø± Ù…Ø²Ø§Ù…Ù†Ø© Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„/Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±:",d)}try{if(r!=null&&r.uid){const d=t!=null&&t.mobile?`ØŒ Ø±Ù‚Ù… ØªÙ„ÙŠÙÙˆÙ† ${t.mobile}`:"";await Je.send(r.uid,`ØªÙ… ØªØµÙ„ÙŠØ­ Ø§Ù„Ø¬Ù‡Ø§Ø² ${(t==null?void 0:t.productName)||""} Ù„Ù„Ø¹Ù…ÙŠÙ„ ${(t==null?void 0:t.customerName)||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…"}${d}ØŒ Ù…Ø¨Ù„Øº Ø§Ù„ØªØµÙ„ÙŠØ­ Ø§Ù„ÙƒØ§Ù…Ù„ ${(t==null?void 0:t.repairPrice)||0} Ø¬Ù†ÙŠÙ‡`)}}catch{}try{n!==void 0&&n>0&&await Ta.addProfit((r==null?void 0:r.uid)||"",{amount:n,source:"maintenance",description:`Ø±Ø¨Ø­ ØªØµÙ„ÙŠØ­ ${(t==null?void 0:t.productName)||"Ø¬Ù‡Ø§Ø²"}`,itemId:a,timestamp:new Date})}catch(d){console.warn("Failed to add profit to reports:",d)}}catch{alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø¥Ù„Ù‰ ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­")}},ge=async a=>{var t,n;try{await Z(S(p,"maintenance_items",a));try{const c=P(N(p,"maintenance_pending"),$("linkedId","==",a),J(1)),l=await C(c);(t=l.docs[0])!=null&&t.id&&await Z(S(p,"maintenance_pending",l.docs[0].id))}catch{}try{const c=P(N(p,"maintenance_done"),$("linkedId","==",a),J(1)),l=await C(c);(n=l.docs[0])!=null&&n.id&&await Z(S(p,"maintenance_done",l.docs[0].id))}catch{}z(c=>c.filter(l=>l.id!==a))}catch{alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø¹Ù†ØµØ± Ø§Ù„ØµÙŠØ§Ù†Ø©")}},fa=async()=>{if(!(!(r!=null&&r.uid)||!oe))try{await O(N(p,"users",r.uid,"maintenance_waste"),{userId:r.uid,amount:Number(oe),description:`Ø¬Ù‡Ø§Ø²: ${de} - Ø¹Ø·Ù„: ${ie}`,note:`Ø¬Ù‡Ø§Ø²: ${de} - Ø¹Ø·Ù„: ${ie}`,createdAt:D(),shopId:E}),ce(!1),qe(""),Oe(""),He(""),Ve(),Ge(),ne(!0)}catch(a){console.error(a),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ")}},[Qe,ya]=i.useState(""),pe=Qe.trim().toLowerCase(),ue=a=>pe?a.filter(t=>{const n=String(t.customerName||"").toLowerCase(),c=String(t.mobile||"");return n.includes(pe)||c.includes(pe)}):a,L=ue(I.filter(a=>a.status==="in_progress")),V=ue(I.filter(a=>a.status==="waiting_for_delivery")),G=ue(I.filter(a=>a.status==="completed"));return e.jsxs(e.Fragment,{children:[e.jsx(W,{open:ae,onOpenChange:we,children:e.jsxs(q,{className:"z-[10001] maintenance-dialog sm:max-w-3xl w-screen sm:w-auto h-[90vh] overflow-y-auto rounded-none sm:rounded-lg p-0 dark:bg-[#121212]",overlayClassName:"backdrop-blur-[5px] bg-black/10 !dark:bg-black",children:[e.jsx(be,{className:"sticky top-0 bg-white dark:bg-[#0F0F0F] z-20 border-b border-gray-200 dark:border-[#333] px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-4 w-4 text-amber-600"}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©",e.jsx(g,{size:"sm",variant:"ghost",className:"mr-2 p-1 h-auto rounded-full",onClick:Le,disabled:Ee,title:"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",children:e.jsx(Da,{className:`h-4 w-4 ${Ee?"animate-spin":""}`})})]}),e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>Pe(!0),className:"gap-1 px-2 text-rose-600 hover:text-rose-700 hover:bg-rose-50 mx-2",children:[e.jsx(Ca,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Ø´Ø±Ø­ Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ§Ù†Ù‡"})]}),e.jsx(g,{size:"sm",variant:"ghost",className:"ml-auto",onClick:()=>we(!1),title:"Ø¥ØºÙ„Ø§Ù‚",children:e.jsx(Xe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"w-full flex items-center",children:e.jsx(w,{value:Qe,onChange:a=>ya(a.target.value),placeholder:"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ...",className:"h-9 text-sm bg-gray-50 dark:bg-[#1A1A1A] border-gray-200 dark:border-[#333] rounded-full px-3"})})]})}),e.jsxs("div",{className:"px-4 py-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(g,{size:"sm",variant:"outline",className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 hover:shadow-md transition-all duration-200",onClick:()=>M(!0),children:"ğŸ“Š Ø¹Ø±Ø¶ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ØµÙŠØ§Ù†Ø©"})}),e.jsx("div",{className:"flex items-center gap-2",children:!H&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"bg-red-600 hover:bg-red-700 hover:shadow-md transition-all duration-200",onClick:()=>ce(!0),children:"ğŸ—‘ï¸ Ù‡ÙˆØ§Ù„Ùƒ"}),e.jsx(g,{className:"bg-amber-600 hover:bg-amber-700 hover:shadow-md transition-all duration-200",onClick:()=>le(!0),children:"â• Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² ØµÙŠØ§Ù†Ø©"})]})})]}),H&&e.jsx("div",{ref:Re,children:e.jsxs(A,{className:"mb-3 border-2 border-blue-100 dark:border-blue-900/30 bg-gradient-to-br from-blue-50 to-white dark:from-blue-900/20 dark:to-[#1A1A1A]",children:[e.jsx(Y,{className:"pb-3",children:e.jsxs(Q,{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ“"}),e.jsx("span",{className:"font-bold text-blue-800 dark:text-blue-200",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„ØµÙŠØ§Ù†Ø©"})]})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ”§"})," Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"]}),e.jsx(w,{value:te,onChange:a=>De(a.target.value),placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø·Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"]}),e.jsx(w,{value:Ae,onChange:a=>Be(a.target.value),placeholder:"Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø·Ù„",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ‘¤"})," Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"]}),e.jsx(w,{value:Ce,onChange:a=>Se(a.target.value),placeholder:"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ“±"})," Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"]}),e.jsx(w,{value:Te,onChange:a=>_e(a.target.value),placeholder:"01xxxxxxxxx",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ’°"})," Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­"]}),e.jsx(w,{value:Ie,onChange:a=>Me(a.target.value),placeholder:"Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ·ï¸"})," Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©"]}),e.jsx(w,{value:se,onChange:a=>Fe(a.target.value),placeholder:"Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø© Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-1 sm:col-span-2",children:[e.jsxs("label",{className:"text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{children:"ğŸ’³"})," Ø¯ÙØ¹ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„ØªØµÙ„ÙŠØ­ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"]}),e.jsx(w,{value:re,onChange:a=>$e(a.target.value),placeholder:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ù…Ù‚Ø¯Ù…Ù‹Ø§",className:"bg-white dark:bg-[#1A1A1A]"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(g,{className:"bg-amber-600 hover:bg-amber-700 hover:shadow-md transition-all duration-200",onClick:()=>Ke("in_progress"),children:"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­"}),e.jsx(g,{className:"bg-green-600 hover:bg-green-700 hover:shadow-md transition-all duration-200",onClick:()=>Ke("completed"),children:"âœ… ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­"}),e.jsx(g,{variant:"outline",onClick:()=>le(!1),className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:"Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬"})]})]})]})}),e.jsx(Pa,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-3",children:[e.jsx(A,{className:"border bg-amber-50/60 dark:bg-amber-900/10 cursor-pointer transition-all duration-150 "+(F==="in_progress"?"border-amber-400 ring-2 ring-amber-300 shadow-sm":"border-amber-100 hover:border-amber-300"),onClick:()=>me("in_progress"),children:e.jsxs(B,{className:"py-2 px-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-xs font-semibold text-amber-800 dark:text-amber-100",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­"})]}),e.jsx(_,{className:"text-[10px] bg-white dark:bg-[#252525] text-amber-700 dark:text-amber-100 border border-amber-200",children:L.length})]})}),e.jsx(A,{className:"border bg-blue-50/60 dark:bg-blue-900/10 cursor-pointer transition-all duration-150 "+(F==="waiting"?"border-blue-400 ring-2 ring-blue-300 shadow-sm":"border-blue-100 hover:border-blue-300"),onClick:()=>me("waiting"),children:e.jsxs(B,{className:"py-2 px-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-100",children:"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…"})]}),e.jsx(_,{className:"text-[10px] bg-white dark:bg-[#252525] text-blue-700 dark:text-blue-100 border border-blue-200",children:V.length})]})}),e.jsx(A,{className:"border bg-emerald-50/60 dark:bg-emerald-900/10 cursor-pointer transition-all duration-150 "+(F==="completed"?"border-emerald-400 ring-2 ring-emerald-300 shadow-sm":"border-emerald-100 hover:border-emerald-300"),onClick:()=>me("completed"),children:e.jsxs(B,{className:"py-2 px-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"text-xs font-semibold text-emerald-800 dark:text-emerald-100",children:"ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­"})]}),e.jsx(_,{className:"text-[10px] bg-white dark:bg-[#252525] text-emerald-700 dark:text-emerald-100 border border-emerald-200",children:G.length})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-3",children:[F==="in_progress"&&e.jsxs(A,{children:[e.jsx(Y,{className:"pb-2",children:e.jsxs(Q,{className:"text-sm flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-amber-50 dark:bg-amber-900/20 px-3 py-1 rounded-full",children:[e.jsx(ye,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙ„ÙŠØ­"})]}),e.jsx(_,{variant:"secondary",className:"ml-auto text-[10px] bg-amber-100 text-amber-800",children:L.length})]})}),e.jsx(B,{className:"space-y-2 sm:max-h-[280px] sm:overflow-y-auto",children:L.length===0?e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù‚ÙŠØ¯ Ø§Ù„ØªØµÙ„ÙŠØ­"}):L.map(a=>e.jsx("div",{className:"rounded-xl shadow-sm border border-amber-200 dark:border-amber-800 bg-amber-50/60 dark:bg-amber-900/20 p-3 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto md:min-w-[200px]",children:[e.jsx("div",{className:"h-9 w-9 rounded-full flex items-center justify-center bg-amber-100 text-amber-700 text-sm font-bold",children:"ğŸ”§"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:a.productName}),a.faultType&&e.jsxs("span",{className:"text-[11px] text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px]",children:"âš ï¸"}),e.jsx("span",{children:a.faultType})]})]})]}),e.jsxs("div",{className:"flex-1 w-full grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1 text-[11px] text-right",children:[(a.customerName||a.mobile)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsxs("span",{className:"font-medium",children:[a.customerName||"-",a.customerName&&a.mobile&&" â€¢ ",a.mobile]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ’° Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­"}),e.jsxs("span",{className:"font-bold text-green-700 dark:text-green-400",children:[a.repairPrice," Ø¬"]})]}),typeof a.partialPayment=="number"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ’³ Ø§Ù„Ù…Ø¯ÙÙˆØ¹"}),e.jsxs("span",{className:"font-medium text-blue-700 dark:text-blue-400",children:[a.partialPayment," Ø¬"]})]}),typeof a.remainingDue=="number"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"â³ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"}),e.jsxs("span",{className:"font-medium text-orange-700 dark:text-orange-400",children:[a.remainingDue," Ø¬"]})]}),a.receivedByName&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ‘¨â€ğŸ”§ Ø§Ø³ØªÙ„Ù…Ù‡Ø§"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.receivedByName})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto items-center",children:[e.jsxs("div",{className:"flex bg-white/70 dark:bg-[#111827] rounded-lg p-1 gap-1 shadow-sm",children:[e.jsx(g,{size:"sm",variant:"outline",className:"h-7 px-2 text-[11px] bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",onClick:()=>ba(a.id),title:"Ù†Ù‚Ù„ Ø¥Ù„Ù‰ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…",children:e.jsx(ee,{className:"h-3 w-3"})}),e.jsx(g,{size:"sm",className:"h-7 px-2 text-[11px] bg-green-600 hover:bg-green-700",onClick:()=>Ye(a.id),children:"âœ“ ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­"})]}),e.jsx(g,{size:"sm",variant:"outline",className:"h-7 w-full sm:w-auto",onClick:()=>ge(a.id),children:e.jsx(Ne,{className:"h-3 w-3"})})]})]})},a.id))})]}),F==="waiting"&&e.jsxs(A,{className:"mb-3 border-2 border-blue-50 dark:border-blue-900/20",children:[e.jsx(Y,{className:"pb-2",children:e.jsxs(Q,{className:"text-sm flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full",children:[e.jsx(ee,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…"})]}),e.jsx(_,{variant:"secondary",className:"ml-auto text-[10px] bg-blue-100 text-blue-800",children:V.length})]})}),e.jsx(B,{className:"space-y-2 sm:max-h-[280px] sm:overflow-y-auto",children:V.length===0?e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…"}):V.map(a=>e.jsx("div",{className:"rounded-xl shadow-sm border border-blue-200 dark:border-blue-800 bg-blue-50/60 dark:bg-blue-900/20 p-3 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto md:min-w-[200px]",children:[e.jsx("div",{className:"h-9 w-9 rounded-full flex items-center justify-center bg-blue-100 text-blue-700 text-sm font-bold",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:a.productName}),a.customerName&&e.jsx("span",{className:"text-[11px] text-gray-600 dark:text-gray-300",children:a.customerName})]})]}),e.jsxs("div",{className:"flex-1 w-full grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1 text-[11px] text-right",children:[(a.customerName||a.mobile)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ“± Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsx("span",{className:"font-medium",children:a.mobile||"-"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ’° Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­"}),e.jsxs("span",{className:"font-bold text-green-700 dark:text-green-400",children:[a.repairPrice," Ø¬"]})]}),typeof a.partialPayment=="number"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ’³ Ø§Ù„Ù…Ø¯ÙÙˆØ¹"}),e.jsxs("span",{className:"font-medium text-blue-700 dark:text-blue-400",children:[a.partialPayment," Ø¬"]})]}),typeof a.remainingDue=="number"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"â³ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"}),e.jsxs("span",{className:"font-medium text-orange-700 dark:text-orange-400",children:[a.remainingDue," Ø¬"]})]}),a.receivedByName&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ‘¨â€ğŸ”§ Ø§Ø³ØªÙ„Ù…Ù‡Ø§"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.receivedByName})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto items-center",children:[e.jsx("div",{className:"flex bg-white/70 dark:bg-[#111827] rounded-lg p-1 gap-1 shadow-sm",children:e.jsx(g,{size:"sm",className:"h-7 px-3 text-[11px] bg-green-600 hover:bg-green-700",onClick:()=>Ye(a.id),children:"âœ“ ØªØ³Ù„ÙŠÙ…"})}),e.jsx(g,{size:"sm",variant:"outline",className:"h-7 w-full sm:w-auto",onClick:()=>ge(a.id),children:e.jsx(Ne,{className:"h-3 w-3"})})]})]})},a.id))})]}),F==="completed"&&e.jsxs(A,{children:[e.jsx(Y,{className:"pb-2",children:e.jsxs(Q,{className:"text-sm flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 dark:bg-green-900/20 px-3 py-1 rounded-full",children:[e.jsx(je,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800 dark:text-green-200",children:"ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­"})]}),e.jsx(_,{variant:"secondary",className:"ml-auto text-[10px] bg-green-100 text-green-800",children:G.length})]})}),e.jsx(B,{className:"space-y-2 sm:max-h-[280px] sm:overflow-y-auto",children:G.length===0?e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…Ù†ØªÙ‡ÙŠØ©"}):G.map(a=>e.jsx("div",{className:"rounded-xl shadow-sm border border-emerald-200 dark:border-emerald-800 bg-emerald-50/60 dark:bg-emerald-900/20 p-3 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto md:min_w-[200px]",children:[e.jsx("div",{className:"h-9 w-9 rounded-full flex items-center justify-center bg-emerald-100 text-emerald-700 text-sm font-bold",children:"âœ…"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:a.productName}),a.faultType&&e.jsxs("span",{className:"text-[11px] text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px]",children:"ğŸ”§"}),e.jsx("span",{children:a.faultType})]})]})]}),e.jsxs("div",{className:"flex-1 w-full grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1 text-[11px] text-right",children:[(a.customerName||a.mobile)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„"}),e.jsxs("span",{className:"font-medium",children:[a.customerName||"-",a.customerName&&a.mobile&&" â€¢ ",a.mobile]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ’° Ø³Ø¹Ø± Ø§Ù„ØªØµÙ„ÙŠØ­"}),e.jsxs("span",{className:"font-bold text-green-700 dark:text-green-400",children:[a.repairPrice," Ø¬"]})]}),typeof a.partialPayment=="number"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ’µ Ø§Ù„Ù…Ø¯ÙÙˆØ¹"}),e.jsxs("span",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:[a.partialPayment," Ø¬"]})]}),typeof a.remainingDue=="number"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"â³ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"}),e.jsxs("span",{className:"font-medium text-orange-700 dark:text-orange-400",children:[a.remainingDue," Ø¬"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:a.completedAt instanceof Date?a.completedAt.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):a.createdAt instanceof Date?a.createdAt.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"ØªØ§Ø±ÙŠØ® ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"})]}),a.receivedByName&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸ‘¨â€ğŸ”§ Ø§Ø³ØªÙ„Ù…Ù‡Ø§"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.receivedByName})]}),a.deliveredByName&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-[10px] flex items-center gap-1",children:"ğŸšš Ø³Ù„Ù‘Ù…Ù‡Ø§"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:a.deliveredByName})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto items-center",children:[e.jsx(_,{className:"text-[10px] bg-green-100 text-green-800 border border-green-200",children:"âœ“ Ù…ÙƒØªÙ…Ù„"}),e.jsx(g,{size:"sm",variant:"outline",className:"h-7 w-full sm:w-auto",onClick:()=>ge(a.id),title:"Ø­Ø°Ù",children:e.jsx(Ne,{className:"h-3 w-3"})})]})]})},a.id))})]})]}),e.jsx("div",{className:"sm:hidden sticky bottom-0 left-0 right-0 bg-white dark:bg-[#0F0F0F] border-t border-gray-200 dark:border-[#333] p-3 z-20",children:e.jsx(g,{className:"w-full bg-amber-600 hover:bg-amber-700",onClick:()=>le(!0),children:"Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² ØµÙŠØ§Ù†Ø©"})})]})]})}),e.jsx(W,{open:ma,onOpenChange:ce,children:e.jsxs(q,{className:"sm:max-w-[425px] z-[10005]",overlayClassName:"backdrop-blur-[5px] bg-black/10 !dark:bg-black",children:[e.jsx(be,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ğŸ—‘ï¸"}),"Ø¥Ø¶Ø§ÙØ© Ù‡ÙˆØ§Ù„Ùƒ"]})}),e.jsx(A,{className:"border-0 shadow-none bg-transparent",children:e.jsxs(B,{className:"space-y-4 p-0 pt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium leading-none flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{children:"ğŸ“±"})," Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²"]}),e.jsx(w,{value:de,onChange:a=>qe(a.target.value),placeholder:"Ù…Ø«Ø§Ù„: iPhone 11",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium leading-none flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{children:"âš ï¸"})," Ø§Ù„Ø¹Ø·Ù„"]}),e.jsx(w,{value:ie,onChange:a=>Oe(a.target.value),placeholder:"ÙˆØµÙ Ø§Ù„Ø¹Ø·Ù„",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium leading-none flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{children:"ğŸ’°"})," Ø³Ø¹Ø± Ø§Ù„Ø®Ø³Ø§Ø±Ø©"]}),e.jsx(w,{type:"number",value:oe,onChange:a=>He(a.target.value),placeholder:"Ø§Ù„Ù…Ø¨Ù„Øº",className:"bg-white dark:bg-[#1A1A1A]"})]}),e.jsx(g,{onClick:fa,className:"bg-red-600 hover:bg-red-700 w-full mt-6 shadow-md transition-all h-10 text-md font-semibold",children:"Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØµØ§Ù„ Ù‡ÙˆØ§Ù„Ùƒ"}),e.jsx(g,{variant:"outline",onClick:()=>Ue(!0),className:"w-full mt-2 border-red-200 text-red-600 hover:bg-red-50 hover:text-red-700 dark:border-red-900 dark:text-red-400 dark:hover:bg-red-900/20",children:"Ø¹Ø±Ø¶ Ø¥ÙŠØµØ§Ù„Ø§Øª Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ"})]})})]})}),e.jsx(W,{open:da,onOpenChange:ne,children:e.jsxs(q,{className:"sm:max-w-[350px] z-[10006] flex flex-col items-center justify-center text-center p-6 border-0 shadow-lg rounded-xl",overlayClassName:"backdrop-blur-[5px] bg-black/10 !dark:bg-black/95",children:[e.jsx("div",{className:"h-20 w-20 bg-green-100 rounded-full flex items-center justify-center mb-6 animate-in zoom-in duration-300",children:e.jsx(je,{className:"h-12 w-12 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8",children:"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª."}),e.jsx(g,{onClick:()=>ne(!1),className:"bg-green-600 hover:bg-green-700 w-full h-12 text-lg font-medium rounded-lg shadow-sm",children:"Ø­Ø³Ù†Ø§Ù‹"})]})}),e.jsx(W,{open:ia,onOpenChange:Ue,children:e.jsxs(q,{className:"sm:max-w-[600px] z-[10007] max-h-[80vh] overflow-hidden flex flex-col",overlayClassName:"backdrop-blur-[5px] bg-black/10 !dark:bg-black/95",children:[e.jsx(be,{children:e.jsxs(fe,{className:"flex items-center gap-2 text-xl",children:[e.jsx("span",{children:"ğŸ“‹"}),"Ø³Ø¬Ù„ Ø¥ÙŠØµØ§Ù„Ø§Øª Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 mt-4 space-y-3 custom-scrollbar",children:We.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥ÙŠØµØ§Ù„Ø§Øª Ù‡ÙˆØ§Ù„Ùƒ Ø³Ø§Ø¨Ù‚Ø©"}):We.map(a=>{var t,n,c;return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg border border-gray-100 dark:border-gray-800 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:((t=a.note)==null?void 0:t.split(" - ")[0])||"Ø¬Ù‡Ø§Ø² ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:((n=a.note)==null?void 0:n.split(" - ")[1])||"Ø¹Ø·Ù„ ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[e.jsx(ye,{className:"h-3 w-3"}),(c=a.createdAt)!=null&&c.toDate?a.createdAt.toDate().toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"ØªØ§Ø±ÙŠØ® ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"]})]}),e.jsxs("div",{className:"text-red-600 font-bold text-lg dir-ltr",children:["-",U(a.amount)]})]},a.id)})})]})}),e.jsx(Aa,{open:aa,onOpenChange:M,userId:r==null?void 0:r.uid,userRole:v==null?void 0:v.role,onSuccess:()=>{M(!1),setTimeout(()=>{R(!0)},100)},className:"z-[10003]",overlayClassName:"backdrop-blur-[5px] bg-black/10 !dark:bg-black/95"}),e.jsx(W,{open:ea,onOpenChange:a=>{a||(R(!1),M(!1))},children:e.jsxs(q,{className:"z-[50000] max-w-md rounded-lg",hideClose:!0,overlayClassName:"backdrop-blur-[5px] bg-black/10 !dark:bg-black",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ØµÙŠØ§Ù†Ø©"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{R(!1),M(!1)},children:e.jsx(Xe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200",children:U(ta)})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("div",{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:U(ra)})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‡ÙˆØ§Ù„Ùƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©"}),e.jsx("div",{className:"text-2xl font-bold text-red-800 dark:text-red-200",children:U(na)})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsx(w,{type:"date",value:xe,onChange:a=>{ha(a.target.value),he(I,a.target.value)},className:"w-40 h-8 text-xs bg-white dark:bg-gray-800 border-purple-200"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-purple-600/70 dark:text-purple-400/70 mb-1",children:["Ø£Ø±Ø¨Ø§Ø­ ÙŠÙˆÙ… ",new Date(xe).toLocaleDateString("ar-EG")]}),e.jsx("div",{className:"text-xl font-bold text-purple-800 dark:text-purple-200",children:U(ga)})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(g,{className:"w-full bg-gray-600 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600",onClick:()=>{R(!1),M(!1)},children:"Ø¥ØºÙ„Ø§Ù‚"})})]})]})}),e.jsx(Sa,{isOpen:Ze,onClose:()=>Pe(!1),videoUrl:"https://www.youtube.com/watch?v=i8xiGeUTTyc",title:"Ø´Ø±Ø­ Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ§Ù†Ù‡",className:"z-[10002]"})]})};export{za as default};
//# sourceMappingURL=MaintenanceDialog-nfkRI82d.js.map
