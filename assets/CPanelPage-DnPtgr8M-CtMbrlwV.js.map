{"version":3,"file":"CPanelPage-DnPtgr8M-CtMbrlwV.js","sources":["../../assets/CPanelPage-DnPtgr8M.js"],"sourcesContent":["import{u as M,r as t,j as e,B as j,W as B,X as E,Y as I,Z as L,I as d,_ as H,m as O,n as T}from\"./index-tnWDkOuX.js\";import{C as R,a as W,b as X,d as Y}from\"./card-SlwaggFS.js\";import{L as o}from\"./label-_mnIMROJ.js\";function q(){var w;const{user:v,profile:n,isSubscriptionActive:y,userSubscription:m}=M(),[P,c]=t.useState(!1),[h,C]=t.useState(\"\"),[x,N]=t.useState(\"\"),[g,f]=t.useState(\"\"),[u,b]=t.useState(\"\"),[p,F]=t.useState(!1),[S,l]=t.useState(null),k=((w=m==null?void 0:m.branchPackage)==null?void 0:w.status)===\"active\",i=(n==null?void 0:n.role)===\"admin\"||(n==null?void 0:n.role)===\"merchant\"||y||k,D=()=>{C(\"\"),N(\"\"),f(\"\"),b(\"\")},A=async()=>{if(l(null),!i){l(\"هذه العملية تتطلب اشتراكًا مفعلًا أو صلاحية مدير/تاجر.\");return}if(!h||!x||!g||!u){l(\"يرجى ملء جميع الحقول المطلوبة.\");return}try{F(!0);const r=await O(T,\"createShopAndManager\")({shopName:h,managerName:x,email:g,password:u}),a=r==null?void 0:r.data;l(a!=null&&a.success?`تم إنشاء المتجر (${a.shopId}) ومدير الحساب بنجاح.`:\"فشل إنشاء الحساب، حاول مرة أخرى.\"),a!=null&&a.success&&(D(),c(!1))}catch(s){const r=(s==null?void 0:s.message)||\"حدث خطأ غير متوقع أثناء الإنشاء\";l(r)}finally{F(!1)}};return e.jsxs(\"div\",{className:\"container mx-auto p-4\",children:[e.jsxs(R,{children:[e.jsx(W,{children:e.jsx(X,{children:\"لوحة التحكم (CPanel)\"})}),e.jsxs(Y,{children:[e.jsxs(\"div\",{className:\"flex items-center justify-between\",children:[e.jsx(\"div\",{children:e.jsx(\"p\",{className:\"text-sm text-muted-foreground\",children:\"إضافة محل جديد مع إنشاء حساب المدير ليتسجل من صفحة الدخول العادية.\"})}),e.jsx(j,{onClick:()=>c(!0),disabled:!i,children:\"إضافة محل\"})]}),!v&&e.jsx(\"p\",{className:\"mt-3 text-sm text-red-600\",children:\"يجب تسجيل الدخول للوصول إلى لوحة التحكم.\"}),v&&!i&&e.jsx(\"p\",{className:\"mt-3 text-sm text-red-600\",children:\"حسابك ليس لديه صلاحيات كافية أو اشتراك/باقة فروع مفعّلة لإنشاء المحلات. إذا كنت مشتركًا بباقة مدفوعة أو لديك باقة فروع مفعّلة، ستتمكن من إضافة الحسابات مباشرة.\"})]})]}),e.jsx(B,{open:P,onOpenChange:c,children:e.jsxs(E,{children:[e.jsx(I,{children:e.jsx(L,{children:\"إضافة محل ومدير\"})}),e.jsxs(\"div\",{className:\"grid gap-4 py-2\",children:[e.jsxs(\"div\",{className:\"grid gap-2\",children:[e.jsx(o,{htmlFor:\"shopName\",children:\"اسم المحل\"}),e.jsx(d,{id:\"shopName\",value:h,onChange:s=>C(s.target.value),placeholder:\"مثال: متجر أحمد\"})]}),e.jsxs(\"div\",{className:\"grid gap-2\",children:[e.jsx(o,{htmlFor:\"managerName\",children:\"اسم المدير\"}),e.jsx(d,{id:\"managerName\",value:x,onChange:s=>N(s.target.value),placeholder:\"مثال: أحمد علي\"})]}),e.jsxs(\"div\",{className:\"grid gap-2\",children:[e.jsx(o,{htmlFor:\"email\",children:\"الإيميل\"}),e.jsx(d,{id:\"email\",type:\"email\",value:g,onChange:s=>f(s.target.value),placeholder:\"example@mail.com\"})]}),e.jsxs(\"div\",{className:\"grid gap-2\",children:[e.jsx(o,{htmlFor:\"password\",children:\"الباسوورد\"}),e.jsx(d,{id:\"password\",type:\"password\",value:u,onChange:s=>b(s.target.value),placeholder:\"••••••••\"})]}),S&&e.jsx(\"p\",{className:\"text-sm text-muted-foreground\",children:S})]}),e.jsxs(H,{children:[e.jsx(j,{variant:\"outline\",onClick:()=>c(!1),disabled:p,children:\"إلغاء\"}),e.jsx(j,{onClick:A,disabled:p||!i,children:p?\"جاري الإنشاء...\":\"إنشاء الحساب\"})]})]})})]})}export{q as default};\r\n//# sourceMappingURL=CPanelPage-DnPtgr8M.js.map\r\n"],"names":["q","w","v","n","m","M","P","c","t","h","C","x","g","f","u","b","p","F","S","l","i","D","r","O","T","a","s","e","R","W","X","Y","j","B","E","I","L","o","d","H"],"mappings":"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"}